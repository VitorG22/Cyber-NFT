function xU(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var oq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _U={exports:{}},R3={},EU={exports:{}},kn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA=Symbol.for("react.element"),aq=Symbol.for("react.portal"),lq=Symbol.for("react.fragment"),cq=Symbol.for("react.strict_mode"),uq=Symbol.for("react.profiler"),fq=Symbol.for("react.provider"),hq=Symbol.for("react.context"),dq=Symbol.for("react.forward_ref"),pq=Symbol.for("react.suspense"),mq=Symbol.for("react.memo"),gq=Symbol.for("react.lazy"),HB=Symbol.iterator;function Aq(n){return n===null||typeof n!="object"?null:(n=HB&&n[HB]||n["@@iterator"],typeof n=="function"?n:null)}var wU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SU=Object.assign,CU={};function e0(n,e,t){this.props=n,this.context=e,this.refs=CU,this.updater=t||wU}e0.prototype.isReactComponent={};e0.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};e0.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function bU(){}bU.prototype=e0.prototype;function X6(n,e,t){this.props=n,this.context=e,this.refs=CU,this.updater=t||wU}var q6=X6.prototype=new bU;q6.constructor=X6;SU(q6,e0.prototype);q6.isPureReactComponent=!0;var QB=Array.isArray,MU=Object.prototype.hasOwnProperty,J6={current:null},IU={key:!0,ref:!0,__self:!0,__source:!0};function TU(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)MU.call(e,i)&&!IU.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:XA,type:n,key:s,ref:o,props:r,_owner:J6.current}}function vq(n,e){return{$$typeof:XA,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function K6(n){return typeof n=="object"&&n!==null&&n.$$typeof===XA}function yq(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var VB=/\/+/g;function C4(n,e){return typeof n=="object"&&n!==null&&n.key!=null?yq(""+n.key):e.toString(36)}function jx(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case XA:case aq:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+C4(o,0):i,QB(r)?(t="",n!=null&&(t=n.replace(VB,"$&/")+"/"),jx(r,e,t,"",function(c){return c})):r!=null&&(K6(r)&&(r=vq(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(VB,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",QB(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+C4(s,a);o+=jx(s,e,t,l,r)}else if(l=Aq(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+C4(s,a++),o+=jx(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ey(n,e,t){if(n==null)return n;var i=[],r=0;return jx(n,i,"","",function(s){return e.call(t,s,r++)}),i}function xq(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ds={current:null},Wx={transition:null},_q={ReactCurrentDispatcher:Ds,ReactCurrentBatchConfig:Wx,ReactCurrentOwner:J6};function BU(){throw Error("act(...) is not supported in production builds of React.")}kn.Children={map:Ey,forEach:function(n,e,t){Ey(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ey(n,function(){e++}),e},toArray:function(n){return Ey(n,function(e){return e})||[]},only:function(n){if(!K6(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};kn.Component=e0;kn.Fragment=lq;kn.Profiler=uq;kn.PureComponent=X6;kn.StrictMode=cq;kn.Suspense=pq;kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_q;kn.act=BU;kn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=SU({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=J6.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)MU.call(e,l)&&!IU.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:XA,type:n.type,key:r,ref:s,props:i,_owner:o}};kn.createContext=function(n){return n={$$typeof:hq,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:fq,_context:n},n.Consumer=n};kn.createElement=TU;kn.createFactory=function(n){var e=TU.bind(null,n);return e.type=n,e};kn.createRef=function(){return{current:null}};kn.forwardRef=function(n){return{$$typeof:dq,render:n}};kn.isValidElement=K6;kn.lazy=function(n){return{$$typeof:gq,_payload:{_status:-1,_result:n},_init:xq}};kn.memo=function(n,e){return{$$typeof:mq,type:n,compare:e===void 0?null:e}};kn.startTransition=function(n){var e=Wx.transition;Wx.transition={};try{n()}finally{Wx.transition=e}};kn.unstable_act=BU;kn.useCallback=function(n,e){return Ds.current.useCallback(n,e)};kn.useContext=function(n){return Ds.current.useContext(n)};kn.useDebugValue=function(){};kn.useDeferredValue=function(n){return Ds.current.useDeferredValue(n)};kn.useEffect=function(n,e){return Ds.current.useEffect(n,e)};kn.useId=function(){return Ds.current.useId()};kn.useImperativeHandle=function(n,e,t){return Ds.current.useImperativeHandle(n,e,t)};kn.useInsertionEffect=function(n,e){return Ds.current.useInsertionEffect(n,e)};kn.useLayoutEffect=function(n,e){return Ds.current.useLayoutEffect(n,e)};kn.useMemo=function(n,e){return Ds.current.useMemo(n,e)};kn.useReducer=function(n,e,t){return Ds.current.useReducer(n,e,t)};kn.useRef=function(n){return Ds.current.useRef(n)};kn.useState=function(n){return Ds.current.useState(n)};kn.useSyncExternalStore=function(n,e,t){return Ds.current.useSyncExternalStore(n,e,t)};kn.useTransition=function(){return Ds.current.useTransition()};kn.version="18.3.1";EU.exports=kn;var E=EU.exports;const _t=Zh(E),Eq=xU({__proto__:null,default:_t},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wq=E,Sq=Symbol.for("react.element"),Cq=Symbol.for("react.fragment"),bq=Object.prototype.hasOwnProperty,Mq=wq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Iq={key:!0,ref:!0,__self:!0,__source:!0};function PU(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)bq.call(e,i)&&!Iq.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Sq,type:n,key:s,ref:o,props:r,_owner:Mq.current}}R3.Fragment=Cq;R3.jsx=PU;R3.jsxs=PU;_U.exports=R3;var q=_U.exports,Q5={},RU={exports:{}},Io={},DU={exports:{}},LU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,X){var Y=U.length;U.push(X);e:for(;0<Y;){var O=Y-1>>>1,W=U[O];if(0<r(W,X))U[O]=X,U[Y]=W,Y=O;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var X=U[0],Y=U.pop();if(Y!==X){U[0]=Y;e:for(var O=0,W=U.length,$=W>>>1;O<$;){var k=2*(O+1)-1,V=U[k],Q=k+1,j=U[Q];if(0>r(V,Y))Q<W&&0>r(j,V)?(U[O]=j,U[Q]=Y,O=Q):(U[O]=V,U[k]=Y,O=k);else if(Q<W&&0>r(j,Y))U[O]=j,U[Q]=Y,O=Q;else break e}}return X}function r(U,X){var Y=U.sortIndex-X.sortIndex;return Y!==0?Y:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,d=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(U){for(var X=t(c);X!==null;){if(X.callback===null)i(c);else if(X.startTime<=U)i(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function w(U){if(g=!1,y(U),!m)if(t(l)!==null)m=!0,J(S);else{var X=t(c);X!==null&&Z(w,X.startTime-U)}}function S(U,X){m=!1,g&&(g=!1,p(M),M=-1),d=!0;var Y=h;try{for(y(X),f=t(l);f!==null&&(!(f.expirationTime>X)||U&&!D());){var O=f.callback;if(typeof O=="function"){f.callback=null,h=f.priorityLevel;var W=O(f.expirationTime<=X);X=n.unstable_now(),typeof W=="function"?f.callback=W:f===t(l)&&i(l),y(X)}else i(l);f=t(l)}if(f!==null)var $=!0;else{var k=t(c);k!==null&&Z(w,k.startTime-X),$=!1}return $}finally{f=null,h=Y,d=!1}}var C=!1,b=null,M=-1,I=5,T=-1;function D(){return!(n.unstable_now()-T<I)}function R(){if(b!==null){var U=n.unstable_now();T=U;var X=!0;try{X=b(!0,U)}finally{X?z():(C=!1,b=null)}}else C=!1}var z;if(typeof A=="function")z=function(){A(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=R,z=function(){H.postMessage(null)}}else z=function(){v(R,0)};function J(U){b=U,C||(C=!0,z())}function Z(U,X){M=v(function(){U(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){m||d||(m=!0,J(S))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var Y=h;h=X;try{return U()}finally{h=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=h;h=U;try{return X()}finally{h=Y}},n.unstable_scheduleCallback=function(U,X,Y){var O=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?O+Y:O):Y=O,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Y+W,U={id:u++,callback:X,priorityLevel:U,startTime:Y,expirationTime:W,sortIndex:-1},Y>O?(U.sortIndex=Y,e(c,U),t(l)===null&&U===t(c)&&(g?(p(M),M=-1):g=!0,Z(w,Y-O))):(U.sortIndex=W,e(l,U),m||d||(m=!0,J(S))),U},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(U){var X=h;return function(){var Y=h;h=X;try{return U.apply(this,arguments)}finally{h=Y}}}})(LU);DU.exports=LU;var Tq=DU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bq=E,Co=Tq;function mt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FU=new Set,eA={};function ed(n,e){Bm(n,e),Bm(n+"Capture",e)}function Bm(n,e){for(eA[n]=e,n=0;n<e.length;n++)FU.add(e[n])}var Ic=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V5=Object.prototype.hasOwnProperty,Pq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jB={},WB={};function Rq(n){return V5.call(WB,n)?!0:V5.call(jB,n)?!1:Pq.test(n)?WB[n]=!0:(jB[n]=!0,!1)}function Dq(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Lq(n,e,t,i){if(e===null||typeof e>"u"||Dq(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ls(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var is={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){is[n]=new Ls(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];is[e]=new Ls(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){is[n]=new Ls(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){is[n]=new Ls(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){is[n]=new Ls(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){is[n]=new Ls(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){is[n]=new Ls(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){is[n]=new Ls(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){is[n]=new Ls(n,5,!1,n.toLowerCase(),null,!1,!1)});var $6=/[\-:]([a-z])/g;function Z6(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace($6,Z6);is[e]=new Ls(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace($6,Z6);is[e]=new Ls(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace($6,Z6);is[e]=new Ls(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){is[n]=new Ls(n,1,!1,n.toLowerCase(),null,!1,!1)});is.xlinkHref=new Ls("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){is[n]=new Ls(n,1,!1,n.toLowerCase(),null,!0,!0)});function eI(n,e,t,i){var r=is.hasOwnProperty(e)?is[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Lq(e,t,r,i)&&(t=null),i||r===null?Rq(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Nc=Bq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wy=Symbol.for("react.element"),jp=Symbol.for("react.portal"),Wp=Symbol.for("react.fragment"),tI=Symbol.for("react.strict_mode"),j5=Symbol.for("react.profiler"),OU=Symbol.for("react.provider"),zU=Symbol.for("react.context"),nI=Symbol.for("react.forward_ref"),W5=Symbol.for("react.suspense"),Y5=Symbol.for("react.suspense_list"),iI=Symbol.for("react.memo"),Au=Symbol.for("react.lazy"),UU=Symbol.for("react.offscreen"),YB=Symbol.iterator;function Q0(n){return n===null||typeof n!="object"?null:(n=YB&&n[YB]||n["@@iterator"],typeof n=="function"?n:null)}var Wi=Object.assign,b4;function sg(n){if(b4===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);b4=e&&e[1]||""}return`
`+b4+n}var M4=!1;function I4(n,e){if(!n||M4)return"";M4=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{M4=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?sg(n):""}function Fq(n){switch(n.tag){case 5:return sg(n.type);case 16:return sg("Lazy");case 13:return sg("Suspense");case 19:return sg("SuspenseList");case 0:case 2:case 15:return n=I4(n.type,!1),n;case 11:return n=I4(n.type.render,!1),n;case 1:return n=I4(n.type,!0),n;default:return""}}function X5(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Wp:return"Fragment";case jp:return"Portal";case j5:return"Profiler";case tI:return"StrictMode";case W5:return"Suspense";case Y5:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case zU:return(n.displayName||"Context")+".Consumer";case OU:return(n._context.displayName||"Context")+".Provider";case nI:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case iI:return e=n.displayName||null,e!==null?e:X5(n.type)||"Memo";case Au:e=n._payload,n=n._init;try{return X5(n(e))}catch{}}return null}function Oq(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X5(e);case 8:return e===tI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zu(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function kU(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zq(n){var e=kU(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Sy(n){n._valueTracker||(n._valueTracker=zq(n))}function NU(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=kU(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function S_(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function q5(n,e){var t=e.checked;return Wi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function XB(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Zu(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GU(n,e){e=e.checked,e!=null&&eI(n,"checked",e,!1)}function J5(n,e){GU(n,e);var t=Zu(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?K5(n,e.type,t):e.hasOwnProperty("defaultValue")&&K5(n,e.type,Zu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function qB(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function K5(n,e,t){(e!=="number"||S_(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var og=Array.isArray;function hm(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Zu(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function $5(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(mt(91));return Wi({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function JB(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(mt(92));if(og(t)){if(1<t.length)throw Error(mt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Zu(t)}}function HU(n,e){var t=Zu(e.value),i=Zu(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function KB(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function QU(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Z5(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?QU(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Cy,VU=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Cy=Cy||document.createElement("div"),Cy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function tA(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var xg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Uq=["Webkit","ms","Moz","O"];Object.keys(xg).forEach(function(n){Uq.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),xg[e]=xg[n]})});function jU(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||xg.hasOwnProperty(n)&&xg[n]?(""+e).trim():e+"px"}function WU(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=jU(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var kq=Wi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eb(n,e){if(e){if(kq[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(mt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(mt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(mt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(mt(62))}}function tb(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nb=null;function rI(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ib=null,dm=null,pm=null;function $B(n){if(n=KA(n)){if(typeof ib!="function")throw Error(mt(280));var e=n.stateNode;e&&(e=z3(e),ib(n.stateNode,n.type,e))}}function YU(n){dm?pm?pm.push(n):pm=[n]:dm=n}function XU(){if(dm){var n=dm,e=pm;if(pm=dm=null,$B(n),e)for(n=0;n<e.length;n++)$B(e[n])}}function qU(n,e){return n(e)}function JU(){}var T4=!1;function KU(n,e,t){if(T4)return n(e,t);T4=!0;try{return qU(n,e,t)}finally{T4=!1,(dm!==null||pm!==null)&&(JU(),XU())}}function nA(n,e){var t=n.stateNode;if(t===null)return null;var i=z3(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(mt(231,e,typeof t));return t}var rb=!1;if(Ic)try{var V0={};Object.defineProperty(V0,"passive",{get:function(){rb=!0}}),window.addEventListener("test",V0,V0),window.removeEventListener("test",V0,V0)}catch{rb=!1}function Nq(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var _g=!1,C_=null,b_=!1,sb=null,Gq={onError:function(n){_g=!0,C_=n}};function Hq(n,e,t,i,r,s,o,a,l){_g=!1,C_=null,Nq.apply(Gq,arguments)}function Qq(n,e,t,i,r,s,o,a,l){if(Hq.apply(this,arguments),_g){if(_g){var c=C_;_g=!1,C_=null}else throw Error(mt(198));b_||(b_=!0,sb=c)}}function td(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function $U(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function ZB(n){if(td(n)!==n)throw Error(mt(188))}function Vq(n){var e=n.alternate;if(!e){if(e=td(n),e===null)throw Error(mt(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return ZB(r),n;if(s===i)return ZB(r),e;s=s.sibling}throw Error(mt(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(mt(189))}}if(t.alternate!==i)throw Error(mt(190))}if(t.tag!==3)throw Error(mt(188));return t.stateNode.current===t?n:e}function ZU(n){return n=Vq(n),n!==null?ek(n):null}function ek(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=ek(n);if(e!==null)return e;n=n.sibling}return null}var tk=Co.unstable_scheduleCallback,e7=Co.unstable_cancelCallback,jq=Co.unstable_shouldYield,Wq=Co.unstable_requestPaint,cr=Co.unstable_now,Yq=Co.unstable_getCurrentPriorityLevel,sI=Co.unstable_ImmediatePriority,nk=Co.unstable_UserBlockingPriority,M_=Co.unstable_NormalPriority,Xq=Co.unstable_LowPriority,ik=Co.unstable_IdlePriority,D3=null,Ll=null;function qq(n){if(Ll&&typeof Ll.onCommitFiberRoot=="function")try{Ll.onCommitFiberRoot(D3,n,void 0,(n.current.flags&128)===128)}catch{}}var Xa=Math.clz32?Math.clz32:$q,Jq=Math.log,Kq=Math.LN2;function $q(n){return n>>>=0,n===0?32:31-(Jq(n)/Kq|0)|0}var by=64,My=4194304;function ag(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function I_(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=ag(a):(s&=o,s!==0&&(i=ag(s)))}else o=t&~r,o!==0?i=ag(o):s!==0&&(i=ag(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Xa(e),r=1<<t,i|=n[t],e&=~r;return i}function Zq(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eJ(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Xa(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=Zq(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function ob(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function rk(){var n=by;return by<<=1,!(by&4194240)&&(by=64),n}function B4(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function qA(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Xa(e),n[e]=t}function tJ(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Xa(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function oI(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Xa(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var ci=0;function sk(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var ok,aI,ak,lk,ck,ab=!1,Iy=[],Ou=null,zu=null,Uu=null,iA=new Map,rA=new Map,xu=[],nJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t7(n,e){switch(n){case"focusin":case"focusout":Ou=null;break;case"dragenter":case"dragleave":zu=null;break;case"mouseover":case"mouseout":Uu=null;break;case"pointerover":case"pointerout":iA.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rA.delete(e.pointerId)}}function j0(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=KA(e),e!==null&&aI(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function iJ(n,e,t,i,r){switch(e){case"focusin":return Ou=j0(Ou,n,e,t,i,r),!0;case"dragenter":return zu=j0(zu,n,e,t,i,r),!0;case"mouseover":return Uu=j0(Uu,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return iA.set(s,j0(iA.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,rA.set(s,j0(rA.get(s)||null,n,e,t,i,r)),!0}return!1}function uk(n){var e=uh(n.target);if(e!==null){var t=td(e);if(t!==null){if(e=t.tag,e===13){if(e=$U(t),e!==null){n.blockedOn=e,ck(n.priority,function(){ak(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Yx(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=lb(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);nb=i,t.target.dispatchEvent(i),nb=null}else return e=KA(t),e!==null&&aI(e),n.blockedOn=t,!1;e.shift()}return!0}function n7(n,e,t){Yx(n)&&t.delete(e)}function rJ(){ab=!1,Ou!==null&&Yx(Ou)&&(Ou=null),zu!==null&&Yx(zu)&&(zu=null),Uu!==null&&Yx(Uu)&&(Uu=null),iA.forEach(n7),rA.forEach(n7)}function W0(n,e){n.blockedOn===e&&(n.blockedOn=null,ab||(ab=!0,Co.unstable_scheduleCallback(Co.unstable_NormalPriority,rJ)))}function sA(n){function e(r){return W0(r,n)}if(0<Iy.length){W0(Iy[0],n);for(var t=1;t<Iy.length;t++){var i=Iy[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Ou!==null&&W0(Ou,n),zu!==null&&W0(zu,n),Uu!==null&&W0(Uu,n),iA.forEach(e),rA.forEach(e),t=0;t<xu.length;t++)i=xu[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<xu.length&&(t=xu[0],t.blockedOn===null);)uk(t),t.blockedOn===null&&xu.shift()}var mm=Nc.ReactCurrentBatchConfig,T_=!0;function sJ(n,e,t,i){var r=ci,s=mm.transition;mm.transition=null;try{ci=1,lI(n,e,t,i)}finally{ci=r,mm.transition=s}}function oJ(n,e,t,i){var r=ci,s=mm.transition;mm.transition=null;try{ci=4,lI(n,e,t,i)}finally{ci=r,mm.transition=s}}function lI(n,e,t,i){if(T_){var r=lb(n,e,t,i);if(r===null)N4(n,e,i,B_,t),t7(n,i);else if(iJ(r,n,e,t,i))i.stopPropagation();else if(t7(n,i),e&4&&-1<nJ.indexOf(n)){for(;r!==null;){var s=KA(r);if(s!==null&&ok(s),s=lb(n,e,t,i),s===null&&N4(n,e,i,B_,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else N4(n,e,i,null,t)}}var B_=null;function lb(n,e,t,i){if(B_=null,n=rI(i),n=uh(n),n!==null)if(e=td(n),e===null)n=null;else if(t=e.tag,t===13){if(n=$U(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return B_=n,null}function fk(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yq()){case sI:return 1;case nk:return 4;case M_:case Xq:return 16;case ik:return 536870912;default:return 16}default:return 16}}var Eu=null,cI=null,Xx=null;function hk(){if(Xx)return Xx;var n,e=cI,t=e.length,i,r="value"in Eu?Eu.value:Eu.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Xx=r.slice(n,1<i?1-i:void 0)}function qx(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ty(){return!0}function i7(){return!1}function To(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ty:i7,this.isPropagationStopped=i7,this}return Wi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ty)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ty)},persist:function(){},isPersistent:Ty}),e}var t0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uI=To(t0),JA=Wi({},t0,{view:0,detail:0}),aJ=To(JA),P4,R4,Y0,L3=Wi({},JA,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fI,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Y0&&(Y0&&n.type==="mousemove"?(P4=n.screenX-Y0.screenX,R4=n.screenY-Y0.screenY):R4=P4=0,Y0=n),P4)},movementY:function(n){return"movementY"in n?n.movementY:R4}}),r7=To(L3),lJ=Wi({},L3,{dataTransfer:0}),cJ=To(lJ),uJ=Wi({},JA,{relatedTarget:0}),D4=To(uJ),fJ=Wi({},t0,{animationName:0,elapsedTime:0,pseudoElement:0}),hJ=To(fJ),dJ=Wi({},t0,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),pJ=To(dJ),mJ=Wi({},t0,{data:0}),s7=To(mJ),gJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yJ(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=vJ[n])?!!e[n]:!1}function fI(){return yJ}var xJ=Wi({},JA,{key:function(n){if(n.key){var e=gJ[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=qx(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?AJ[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fI,charCode:function(n){return n.type==="keypress"?qx(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qx(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),_J=To(xJ),EJ=Wi({},L3,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o7=To(EJ),wJ=Wi({},JA,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fI}),SJ=To(wJ),CJ=Wi({},t0,{propertyName:0,elapsedTime:0,pseudoElement:0}),bJ=To(CJ),MJ=Wi({},L3,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),IJ=To(MJ),TJ=[9,13,27,32],hI=Ic&&"CompositionEvent"in window,Eg=null;Ic&&"documentMode"in document&&(Eg=document.documentMode);var BJ=Ic&&"TextEvent"in window&&!Eg,dk=Ic&&(!hI||Eg&&8<Eg&&11>=Eg),a7=" ",l7=!1;function pk(n,e){switch(n){case"keyup":return TJ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mk(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yp=!1;function PJ(n,e){switch(n){case"compositionend":return mk(e);case"keypress":return e.which!==32?null:(l7=!0,a7);case"textInput":return n=e.data,n===a7&&l7?null:n;default:return null}}function RJ(n,e){if(Yp)return n==="compositionend"||!hI&&pk(n,e)?(n=hk(),Xx=cI=Eu=null,Yp=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dk&&e.locale!=="ko"?null:e.data;default:return null}}var DJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c7(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!DJ[n.type]:e==="textarea"}function gk(n,e,t,i){YU(i),e=P_(e,"onChange"),0<e.length&&(t=new uI("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var wg=null,oA=null;function LJ(n){Mk(n,0)}function F3(n){var e=Jp(n);if(NU(e))return n}function FJ(n,e){if(n==="change")return e}var Ak=!1;if(Ic){var L4;if(Ic){var F4="oninput"in document;if(!F4){var u7=document.createElement("div");u7.setAttribute("oninput","return;"),F4=typeof u7.oninput=="function"}L4=F4}else L4=!1;Ak=L4&&(!document.documentMode||9<document.documentMode)}function f7(){wg&&(wg.detachEvent("onpropertychange",vk),oA=wg=null)}function vk(n){if(n.propertyName==="value"&&F3(oA)){var e=[];gk(e,oA,n,rI(n)),KU(LJ,e)}}function OJ(n,e,t){n==="focusin"?(f7(),wg=e,oA=t,wg.attachEvent("onpropertychange",vk)):n==="focusout"&&f7()}function zJ(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return F3(oA)}function UJ(n,e){if(n==="click")return F3(e)}function kJ(n,e){if(n==="input"||n==="change")return F3(e)}function NJ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Za=typeof Object.is=="function"?Object.is:NJ;function aA(n,e){if(Za(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!V5.call(e,r)||!Za(n[r],e[r]))return!1}return!0}function h7(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function d7(n,e){var t=h7(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=h7(t)}}function yk(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?yk(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function xk(){for(var n=window,e=S_();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=S_(n.document)}return e}function dI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function GJ(n){var e=xk(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&yk(t.ownerDocument.documentElement,t)){if(i!==null&&dI(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=d7(t,s);var o=d7(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var HJ=Ic&&"documentMode"in document&&11>=document.documentMode,Xp=null,cb=null,Sg=null,ub=!1;function p7(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ub||Xp==null||Xp!==S_(i)||(i=Xp,"selectionStart"in i&&dI(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Sg&&aA(Sg,i)||(Sg=i,i=P_(cb,"onSelect"),0<i.length&&(e=new uI("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Xp)))}function By(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var qp={animationend:By("Animation","AnimationEnd"),animationiteration:By("Animation","AnimationIteration"),animationstart:By("Animation","AnimationStart"),transitionend:By("Transition","TransitionEnd")},O4={},_k={};Ic&&(_k=document.createElement("div").style,"AnimationEvent"in window||(delete qp.animationend.animation,delete qp.animationiteration.animation,delete qp.animationstart.animation),"TransitionEvent"in window||delete qp.transitionend.transition);function O3(n){if(O4[n])return O4[n];if(!qp[n])return n;var e=qp[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in _k)return O4[n]=e[t];return n}var Ek=O3("animationend"),wk=O3("animationiteration"),Sk=O3("animationstart"),Ck=O3("transitionend"),bk=new Map,m7="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function df(n,e){bk.set(n,e),ed(e,[n])}for(var z4=0;z4<m7.length;z4++){var U4=m7[z4],QJ=U4.toLowerCase(),VJ=U4[0].toUpperCase()+U4.slice(1);df(QJ,"on"+VJ)}df(Ek,"onAnimationEnd");df(wk,"onAnimationIteration");df(Sk,"onAnimationStart");df("dblclick","onDoubleClick");df("focusin","onFocus");df("focusout","onBlur");df(Ck,"onTransitionEnd");Bm("onMouseEnter",["mouseout","mouseover"]);Bm("onMouseLeave",["mouseout","mouseover"]);Bm("onPointerEnter",["pointerout","pointerover"]);Bm("onPointerLeave",["pointerout","pointerover"]);ed("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ed("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ed("onBeforeInput",["compositionend","keypress","textInput","paste"]);ed("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ed("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ed("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(lg));function g7(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,Qq(i,e,void 0,n),n.currentTarget=null}function Mk(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;g7(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;g7(r,a,c),s=l}}}if(b_)throw n=sb,b_=!1,sb=null,n}function wi(n,e){var t=e[mb];t===void 0&&(t=e[mb]=new Set);var i=n+"__bubble";t.has(i)||(Ik(e,n,2,!1),t.add(i))}function k4(n,e,t){var i=0;e&&(i|=4),Ik(t,n,i,e)}var Py="_reactListening"+Math.random().toString(36).slice(2);function lA(n){if(!n[Py]){n[Py]=!0,FU.forEach(function(t){t!=="selectionchange"&&(jJ.has(t)||k4(t,!1,n),k4(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Py]||(e[Py]=!0,k4("selectionchange",!1,e))}}function Ik(n,e,t,i){switch(fk(e)){case 1:var r=sJ;break;case 4:r=oJ;break;default:r=lI}t=r.bind(null,e,t,n),r=void 0,!rb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function N4(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=uh(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}KU(function(){var c=s,u=rI(t),f=[];e:{var h=bk.get(n);if(h!==void 0){var d=uI,m=n;switch(n){case"keypress":if(qx(t)===0)break e;case"keydown":case"keyup":d=_J;break;case"focusin":m="focus",d=D4;break;case"focusout":m="blur",d=D4;break;case"beforeblur":case"afterblur":d=D4;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=r7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=cJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=SJ;break;case Ek:case wk:case Sk:d=hJ;break;case Ck:d=bJ;break;case"scroll":d=aJ;break;case"wheel":d=IJ;break;case"copy":case"cut":case"paste":d=pJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=o7}var g=(e&4)!==0,v=!g&&n==="scroll",p=g?h!==null?h+"Capture":null:h;g=[];for(var A=c,y;A!==null;){y=A;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,p!==null&&(w=nA(A,p),w!=null&&g.push(cA(A,w,y)))),v)break;A=A.return}0<g.length&&(h=new d(h,m,null,t,u),f.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",d=n==="mouseout"||n==="pointerout",h&&t!==nb&&(m=t.relatedTarget||t.fromElement)&&(uh(m)||m[Tc]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(m=t.relatedTarget||t.toElement,d=c,m=m?uh(m):null,m!==null&&(v=td(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=c),d!==m)){if(g=r7,w="onMouseLeave",p="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(g=o7,w="onPointerLeave",p="onPointerEnter",A="pointer"),v=d==null?h:Jp(d),y=m==null?h:Jp(m),h=new g(w,A+"leave",d,t,u),h.target=v,h.relatedTarget=y,w=null,uh(u)===c&&(g=new g(p,A+"enter",m,t,u),g.target=y,g.relatedTarget=v,w=g),v=w,d&&m)t:{for(g=d,p=m,A=0,y=g;y;y=Cd(y))A++;for(y=0,w=p;w;w=Cd(w))y++;for(;0<A-y;)g=Cd(g),A--;for(;0<y-A;)p=Cd(p),y--;for(;A--;){if(g===p||p!==null&&g===p.alternate)break t;g=Cd(g),p=Cd(p)}g=null}else g=null;d!==null&&A7(f,h,d,g,!1),m!==null&&v!==null&&A7(f,v,m,g,!0)}}e:{if(h=c?Jp(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var S=FJ;else if(c7(h))if(Ak)S=kJ;else{S=zJ;var C=OJ}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=UJ);if(S&&(S=S(n,c))){gk(f,S,t,u);break e}C&&C(n,h,c),n==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&K5(h,"number",h.value)}switch(C=c?Jp(c):window,n){case"focusin":(c7(C)||C.contentEditable==="true")&&(Xp=C,cb=c,Sg=null);break;case"focusout":Sg=cb=Xp=null;break;case"mousedown":ub=!0;break;case"contextmenu":case"mouseup":case"dragend":ub=!1,p7(f,t,u);break;case"selectionchange":if(HJ)break;case"keydown":case"keyup":p7(f,t,u)}var b;if(hI)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Yp?pk(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(dk&&t.locale!=="ko"&&(Yp||M!=="onCompositionStart"?M==="onCompositionEnd"&&Yp&&(b=hk()):(Eu=u,cI="value"in Eu?Eu.value:Eu.textContent,Yp=!0)),C=P_(c,M),0<C.length&&(M=new s7(M,n,null,t,u),f.push({event:M,listeners:C}),b?M.data=b:(b=mk(t),b!==null&&(M.data=b)))),(b=BJ?PJ(n,t):RJ(n,t))&&(c=P_(c,"onBeforeInput"),0<c.length&&(u=new s7("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=b))}Mk(f,e)})}function cA(n,e,t){return{instance:n,listener:e,currentTarget:t}}function P_(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=nA(n,t),s!=null&&i.unshift(cA(n,s,r)),s=nA(n,e),s!=null&&i.push(cA(n,s,r))),n=n.return}return i}function Cd(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function A7(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=nA(t,s),l!=null&&o.unshift(cA(t,l,a))):r||(l=nA(t,s),l!=null&&o.push(cA(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var WJ=/\r\n?/g,YJ=/\u0000|\uFFFD/g;function v7(n){return(typeof n=="string"?n:""+n).replace(WJ,`
`).replace(YJ,"")}function Ry(n,e,t){if(e=v7(e),v7(n)!==e&&t)throw Error(mt(425))}function R_(){}var fb=null,hb=null;function db(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pb=typeof setTimeout=="function"?setTimeout:void 0,XJ=typeof clearTimeout=="function"?clearTimeout:void 0,y7=typeof Promise=="function"?Promise:void 0,qJ=typeof queueMicrotask=="function"?queueMicrotask:typeof y7<"u"?function(n){return y7.resolve(null).then(n).catch(JJ)}:pb;function JJ(n){setTimeout(function(){throw n})}function G4(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),sA(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);sA(e)}function ku(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function x7(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var n0=Math.random().toString(36).slice(2),Tl="__reactFiber$"+n0,uA="__reactProps$"+n0,Tc="__reactContainer$"+n0,mb="__reactEvents$"+n0,KJ="__reactListeners$"+n0,$J="__reactHandles$"+n0;function uh(n){var e=n[Tl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Tc]||t[Tl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=x7(n);n!==null;){if(t=n[Tl])return t;n=x7(n)}return e}n=t,t=n.parentNode}return null}function KA(n){return n=n[Tl]||n[Tc],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Jp(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(mt(33))}function z3(n){return n[uA]||null}var gb=[],Kp=-1;function pf(n){return{current:n}}function bi(n){0>Kp||(n.current=gb[Kp],gb[Kp]=null,Kp--)}function _i(n,e){Kp++,gb[Kp]=n.current,n.current=e}var ef={},gs=pf(ef),eo=pf(!1),Dh=ef;function Pm(n,e){var t=n.type.contextTypes;if(!t)return ef;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function to(n){return n=n.childContextTypes,n!=null}function D_(){bi(eo),bi(gs)}function _7(n,e,t){if(gs.current!==ef)throw Error(mt(168));_i(gs,e),_i(eo,t)}function Tk(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(mt(108,Oq(n)||"Unknown",r));return Wi({},t,i)}function L_(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ef,Dh=gs.current,_i(gs,n),_i(eo,eo.current),!0}function E7(n,e,t){var i=n.stateNode;if(!i)throw Error(mt(169));t?(n=Tk(n,e,Dh),i.__reactInternalMemoizedMergedChildContext=n,bi(eo),bi(gs),_i(gs,n)):bi(eo),_i(eo,t)}var Ac=null,U3=!1,H4=!1;function Bk(n){Ac===null?Ac=[n]:Ac.push(n)}function ZJ(n){U3=!0,Bk(n)}function mf(){if(!H4&&Ac!==null){H4=!0;var n=0,e=ci;try{var t=Ac;for(ci=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Ac=null,U3=!1}catch(r){throw Ac!==null&&(Ac=Ac.slice(n+1)),tk(sI,mf),r}finally{ci=e,H4=!1}}return null}var $p=[],Zp=0,F_=null,O_=0,Zo=[],ea=0,Lh=null,_c=1,Ec="";function rh(n,e){$p[Zp++]=O_,$p[Zp++]=F_,F_=n,O_=e}function Pk(n,e,t){Zo[ea++]=_c,Zo[ea++]=Ec,Zo[ea++]=Lh,Lh=n;var i=_c;n=Ec;var r=32-Xa(i)-1;i&=~(1<<r),t+=1;var s=32-Xa(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,_c=1<<32-Xa(e)+r|t<<r|i,Ec=s+n}else _c=1<<s|t<<r|i,Ec=n}function pI(n){n.return!==null&&(rh(n,1),Pk(n,1,0))}function mI(n){for(;n===F_;)F_=$p[--Zp],$p[Zp]=null,O_=$p[--Zp],$p[Zp]=null;for(;n===Lh;)Lh=Zo[--ea],Zo[ea]=null,Ec=Zo[--ea],Zo[ea]=null,_c=Zo[--ea],Zo[ea]=null}var wo=null,yo=null,Oi=!1,Na=null;function Rk(n,e){var t=aa(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function w7(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,wo=n,yo=ku(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,wo=n,yo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Lh!==null?{id:_c,overflow:Ec}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=aa(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,wo=n,yo=null,!0):!1;default:return!1}}function Ab(n){return(n.mode&1)!==0&&(n.flags&128)===0}function vb(n){if(Oi){var e=yo;if(e){var t=e;if(!w7(n,e)){if(Ab(n))throw Error(mt(418));e=ku(t.nextSibling);var i=wo;e&&w7(n,e)?Rk(i,t):(n.flags=n.flags&-4097|2,Oi=!1,wo=n)}}else{if(Ab(n))throw Error(mt(418));n.flags=n.flags&-4097|2,Oi=!1,wo=n}}}function S7(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;wo=n}function Dy(n){if(n!==wo)return!1;if(!Oi)return S7(n),Oi=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!db(n.type,n.memoizedProps)),e&&(e=yo)){if(Ab(n))throw Dk(),Error(mt(418));for(;e;)Rk(n,e),e=ku(e.nextSibling)}if(S7(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(mt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){yo=ku(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}yo=null}}else yo=wo?ku(n.stateNode.nextSibling):null;return!0}function Dk(){for(var n=yo;n;)n=ku(n.nextSibling)}function Rm(){yo=wo=null,Oi=!1}function gI(n){Na===null?Na=[n]:Na.push(n)}var eK=Nc.ReactCurrentBatchConfig;function X0(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(mt(309));var i=t.stateNode}if(!i)throw Error(mt(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(mt(284));if(!t._owner)throw Error(mt(290,n))}return n}function Ly(n,e){throw n=Object.prototype.toString.call(e),Error(mt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function C7(n){var e=n._init;return e(n._payload)}function Lk(n){function e(p,A){if(n){var y=p.deletions;y===null?(p.deletions=[A],p.flags|=16):y.push(A)}}function t(p,A){if(!n)return null;for(;A!==null;)e(p,A),A=A.sibling;return null}function i(p,A){for(p=new Map;A!==null;)A.key!==null?p.set(A.key,A):p.set(A.index,A),A=A.sibling;return p}function r(p,A){return p=Qu(p,A),p.index=0,p.sibling=null,p}function s(p,A,y){return p.index=y,n?(y=p.alternate,y!==null?(y=y.index,y<A?(p.flags|=2,A):y):(p.flags|=2,A)):(p.flags|=1048576,A)}function o(p){return n&&p.alternate===null&&(p.flags|=2),p}function a(p,A,y,w){return A===null||A.tag!==6?(A=q4(y,p.mode,w),A.return=p,A):(A=r(A,y),A.return=p,A)}function l(p,A,y,w){var S=y.type;return S===Wp?u(p,A,y.props.children,w,y.key):A!==null&&(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Au&&C7(S)===A.type)?(w=r(A,y.props),w.ref=X0(p,A,y),w.return=p,w):(w=n_(y.type,y.key,y.props,null,p.mode,w),w.ref=X0(p,A,y),w.return=p,w)}function c(p,A,y,w){return A===null||A.tag!==4||A.stateNode.containerInfo!==y.containerInfo||A.stateNode.implementation!==y.implementation?(A=J4(y,p.mode,w),A.return=p,A):(A=r(A,y.children||[]),A.return=p,A)}function u(p,A,y,w,S){return A===null||A.tag!==7?(A=Ch(y,p.mode,w,S),A.return=p,A):(A=r(A,y),A.return=p,A)}function f(p,A,y){if(typeof A=="string"&&A!==""||typeof A=="number")return A=q4(""+A,p.mode,y),A.return=p,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case wy:return y=n_(A.type,A.key,A.props,null,p.mode,y),y.ref=X0(p,null,A),y.return=p,y;case jp:return A=J4(A,p.mode,y),A.return=p,A;case Au:var w=A._init;return f(p,w(A._payload),y)}if(og(A)||Q0(A))return A=Ch(A,p.mode,y,null),A.return=p,A;Ly(p,A)}return null}function h(p,A,y,w){var S=A!==null?A.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(p,A,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wy:return y.key===S?l(p,A,y,w):null;case jp:return y.key===S?c(p,A,y,w):null;case Au:return S=y._init,h(p,A,S(y._payload),w)}if(og(y)||Q0(y))return S!==null?null:u(p,A,y,w,null);Ly(p,y)}return null}function d(p,A,y,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(y)||null,a(A,p,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wy:return p=p.get(w.key===null?y:w.key)||null,l(A,p,w,S);case jp:return p=p.get(w.key===null?y:w.key)||null,c(A,p,w,S);case Au:var C=w._init;return d(p,A,y,C(w._payload),S)}if(og(w)||Q0(w))return p=p.get(y)||null,u(A,p,w,S,null);Ly(A,w)}return null}function m(p,A,y,w){for(var S=null,C=null,b=A,M=A=0,I=null;b!==null&&M<y.length;M++){b.index>M?(I=b,b=null):I=b.sibling;var T=h(p,b,y[M],w);if(T===null){b===null&&(b=I);break}n&&b&&T.alternate===null&&e(p,b),A=s(T,A,M),C===null?S=T:C.sibling=T,C=T,b=I}if(M===y.length)return t(p,b),Oi&&rh(p,M),S;if(b===null){for(;M<y.length;M++)b=f(p,y[M],w),b!==null&&(A=s(b,A,M),C===null?S=b:C.sibling=b,C=b);return Oi&&rh(p,M),S}for(b=i(p,b);M<y.length;M++)I=d(b,p,M,y[M],w),I!==null&&(n&&I.alternate!==null&&b.delete(I.key===null?M:I.key),A=s(I,A,M),C===null?S=I:C.sibling=I,C=I);return n&&b.forEach(function(D){return e(p,D)}),Oi&&rh(p,M),S}function g(p,A,y,w){var S=Q0(y);if(typeof S!="function")throw Error(mt(150));if(y=S.call(y),y==null)throw Error(mt(151));for(var C=S=null,b=A,M=A=0,I=null,T=y.next();b!==null&&!T.done;M++,T=y.next()){b.index>M?(I=b,b=null):I=b.sibling;var D=h(p,b,T.value,w);if(D===null){b===null&&(b=I);break}n&&b&&D.alternate===null&&e(p,b),A=s(D,A,M),C===null?S=D:C.sibling=D,C=D,b=I}if(T.done)return t(p,b),Oi&&rh(p,M),S;if(b===null){for(;!T.done;M++,T=y.next())T=f(p,T.value,w),T!==null&&(A=s(T,A,M),C===null?S=T:C.sibling=T,C=T);return Oi&&rh(p,M),S}for(b=i(p,b);!T.done;M++,T=y.next())T=d(b,p,M,T.value,w),T!==null&&(n&&T.alternate!==null&&b.delete(T.key===null?M:T.key),A=s(T,A,M),C===null?S=T:C.sibling=T,C=T);return n&&b.forEach(function(R){return e(p,R)}),Oi&&rh(p,M),S}function v(p,A,y,w){if(typeof y=="object"&&y!==null&&y.type===Wp&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case wy:e:{for(var S=y.key,C=A;C!==null;){if(C.key===S){if(S=y.type,S===Wp){if(C.tag===7){t(p,C.sibling),A=r(C,y.props.children),A.return=p,p=A;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Au&&C7(S)===C.type){t(p,C.sibling),A=r(C,y.props),A.ref=X0(p,C,y),A.return=p,p=A;break e}t(p,C);break}else e(p,C);C=C.sibling}y.type===Wp?(A=Ch(y.props.children,p.mode,w,y.key),A.return=p,p=A):(w=n_(y.type,y.key,y.props,null,p.mode,w),w.ref=X0(p,A,y),w.return=p,p=w)}return o(p);case jp:e:{for(C=y.key;A!==null;){if(A.key===C)if(A.tag===4&&A.stateNode.containerInfo===y.containerInfo&&A.stateNode.implementation===y.implementation){t(p,A.sibling),A=r(A,y.children||[]),A.return=p,p=A;break e}else{t(p,A);break}else e(p,A);A=A.sibling}A=J4(y,p.mode,w),A.return=p,p=A}return o(p);case Au:return C=y._init,v(p,A,C(y._payload),w)}if(og(y))return m(p,A,y,w);if(Q0(y))return g(p,A,y,w);Ly(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,A!==null&&A.tag===6?(t(p,A.sibling),A=r(A,y),A.return=p,p=A):(t(p,A),A=q4(y,p.mode,w),A.return=p,p=A),o(p)):t(p,A)}return v}var Dm=Lk(!0),Fk=Lk(!1),z_=pf(null),U_=null,em=null,AI=null;function vI(){AI=em=U_=null}function yI(n){var e=z_.current;bi(z_),n._currentValue=e}function yb(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function gm(n,e){U_=n,AI=em=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Xs=!0),n.firstContext=null)}function ga(n){var e=n._currentValue;if(AI!==n)if(n={context:n,memoizedValue:e,next:null},em===null){if(U_===null)throw Error(mt(308));em=n,U_.dependencies={lanes:0,firstContext:n}}else em=em.next=n;return e}var fh=null;function xI(n){fh===null?fh=[n]:fh.push(n)}function Ok(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,xI(e)):(t.next=r.next,r.next=t),e.interleaved=t,Bc(n,i)}function Bc(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var vu=!1;function _I(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zk(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function wc(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Nu(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,qn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Bc(n,t)}return r=i.interleaved,r===null?(e.next=e,xI(i)):(e.next=r.next,r.next=e),i.interleaved=e,Bc(n,t)}function Jx(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,oI(n,t)}}function b7(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function k_(n,e,t,i){var r=n.updateQueue;vu=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,d=a.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,g=a;switch(h=e,d=t,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(d,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(d,f,h):m,h==null)break e;f=Wi({},f,h);break e;case 2:vu=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else d={eventTime:d,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=d,l=f):u=u.next=d,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Oh|=o,n.lanes=o,n.memoizedState=f}}function M7(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(mt(191,r));r.call(i)}}}var $A={},Fl=pf($A),fA=pf($A),hA=pf($A);function hh(n){if(n===$A)throw Error(mt(174));return n}function EI(n,e){switch(_i(hA,e),_i(fA,n),_i(Fl,$A),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Z5(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Z5(e,n)}bi(Fl),_i(Fl,e)}function Lm(){bi(Fl),bi(fA),bi(hA)}function Uk(n){hh(hA.current);var e=hh(Fl.current),t=Z5(e,n.type);e!==t&&(_i(fA,n),_i(Fl,t))}function wI(n){fA.current===n&&(bi(Fl),bi(fA))}var Gi=pf(0);function N_(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Q4=[];function SI(){for(var n=0;n<Q4.length;n++)Q4[n]._workInProgressVersionPrimary=null;Q4.length=0}var Kx=Nc.ReactCurrentDispatcher,V4=Nc.ReactCurrentBatchConfig,Fh=0,Vi=null,Cr=null,Gr=null,G_=!1,Cg=!1,dA=0,tK=0;function ls(){throw Error(mt(321))}function CI(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Za(n[t],e[t]))return!1;return!0}function bI(n,e,t,i,r,s){if(Fh=s,Vi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kx.current=n===null||n.memoizedState===null?sK:oK,n=t(i,r),Cg){s=0;do{if(Cg=!1,dA=0,25<=s)throw Error(mt(301));s+=1,Gr=Cr=null,e.updateQueue=null,Kx.current=aK,n=t(i,r)}while(Cg)}if(Kx.current=H_,e=Cr!==null&&Cr.next!==null,Fh=0,Gr=Cr=Vi=null,G_=!1,e)throw Error(mt(300));return n}function MI(){var n=dA!==0;return dA=0,n}function _l(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?Vi.memoizedState=Gr=n:Gr=Gr.next=n,Gr}function Aa(){if(Cr===null){var n=Vi.alternate;n=n!==null?n.memoizedState:null}else n=Cr.next;var e=Gr===null?Vi.memoizedState:Gr.next;if(e!==null)Gr=e,Cr=n;else{if(n===null)throw Error(mt(310));Cr=n,n={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Gr===null?Vi.memoizedState=Gr=n:Gr=Gr.next=n}return Gr}function pA(n,e){return typeof e=="function"?e(n):e}function j4(n){var e=Aa(),t=e.queue;if(t===null)throw Error(mt(311));t.lastRenderedReducer=n;var i=Cr,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Fh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,Vi.lanes|=u,Oh|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Za(i,e.memoizedState)||(Xs=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Vi.lanes|=s,Oh|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function W4(n){var e=Aa(),t=e.queue;if(t===null)throw Error(mt(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Za(s,e.memoizedState)||(Xs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function kk(){}function Nk(n,e){var t=Vi,i=Aa(),r=e(),s=!Za(i.memoizedState,r);if(s&&(i.memoizedState=r,Xs=!0),i=i.queue,II(Qk.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Gr!==null&&Gr.memoizedState.tag&1){if(t.flags|=2048,mA(9,Hk.bind(null,t,i,r,e),void 0,null),jr===null)throw Error(mt(349));Fh&30||Gk(t,e,r)}return r}function Gk(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Vi.updateQueue,e===null?(e={lastEffect:null,stores:null},Vi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Hk(n,e,t,i){e.value=t,e.getSnapshot=i,Vk(e)&&jk(n)}function Qk(n,e,t){return t(function(){Vk(e)&&jk(n)})}function Vk(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Za(n,t)}catch{return!0}}function jk(n){var e=Bc(n,1);e!==null&&qa(e,n,1,-1)}function I7(n){var e=_l();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pA,lastRenderedState:n},e.queue=n,n=n.dispatch=rK.bind(null,Vi,n),[e.memoizedState,n]}function mA(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Vi.updateQueue,e===null?(e={lastEffect:null,stores:null},Vi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function Wk(){return Aa().memoizedState}function $x(n,e,t,i){var r=_l();Vi.flags|=n,r.memoizedState=mA(1|e,t,void 0,i===void 0?null:i)}function k3(n,e,t,i){var r=Aa();i=i===void 0?null:i;var s=void 0;if(Cr!==null){var o=Cr.memoizedState;if(s=o.destroy,i!==null&&CI(i,o.deps)){r.memoizedState=mA(e,t,s,i);return}}Vi.flags|=n,r.memoizedState=mA(1|e,t,s,i)}function T7(n,e){return $x(8390656,8,n,e)}function II(n,e){return k3(2048,8,n,e)}function Yk(n,e){return k3(4,2,n,e)}function Xk(n,e){return k3(4,4,n,e)}function qk(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Jk(n,e,t){return t=t!=null?t.concat([n]):null,k3(4,4,qk.bind(null,e,n),t)}function TI(){}function Kk(n,e){var t=Aa();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&CI(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function $k(n,e){var t=Aa();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&CI(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Zk(n,e,t){return Fh&21?(Za(t,e)||(t=rk(),Vi.lanes|=t,Oh|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Xs=!0),n.memoizedState=t)}function nK(n,e){var t=ci;ci=t!==0&&4>t?t:4,n(!0);var i=V4.transition;V4.transition={};try{n(!1),e()}finally{ci=t,V4.transition=i}}function eN(){return Aa().memoizedState}function iK(n,e,t){var i=Hu(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},tN(n))nN(e,t);else if(t=Ok(n,e,t,i),t!==null){var r=Ps();qa(t,n,i,r),iN(t,e,i)}}function rK(n,e,t){var i=Hu(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(tN(n))nN(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Za(a,o)){var l=e.interleaved;l===null?(r.next=r,xI(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=Ok(n,e,r,i),t!==null&&(r=Ps(),qa(t,n,i,r),iN(t,e,i))}}function tN(n){var e=n.alternate;return n===Vi||e!==null&&e===Vi}function nN(n,e){Cg=G_=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function iN(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,oI(n,t)}}var H_={readContext:ga,useCallback:ls,useContext:ls,useEffect:ls,useImperativeHandle:ls,useInsertionEffect:ls,useLayoutEffect:ls,useMemo:ls,useReducer:ls,useRef:ls,useState:ls,useDebugValue:ls,useDeferredValue:ls,useTransition:ls,useMutableSource:ls,useSyncExternalStore:ls,useId:ls,unstable_isNewReconciler:!1},sK={readContext:ga,useCallback:function(n,e){return _l().memoizedState=[n,e===void 0?null:e],n},useContext:ga,useEffect:T7,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,$x(4194308,4,qk.bind(null,e,n),t)},useLayoutEffect:function(n,e){return $x(4194308,4,n,e)},useInsertionEffect:function(n,e){return $x(4,2,n,e)},useMemo:function(n,e){var t=_l();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=_l();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=iK.bind(null,Vi,n),[i.memoizedState,n]},useRef:function(n){var e=_l();return n={current:n},e.memoizedState=n},useState:I7,useDebugValue:TI,useDeferredValue:function(n){return _l().memoizedState=n},useTransition:function(){var n=I7(!1),e=n[0];return n=nK.bind(null,n[1]),_l().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Vi,r=_l();if(Oi){if(t===void 0)throw Error(mt(407));t=t()}else{if(t=e(),jr===null)throw Error(mt(349));Fh&30||Gk(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,T7(Qk.bind(null,i,s,n),[n]),i.flags|=2048,mA(9,Hk.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=_l(),e=jr.identifierPrefix;if(Oi){var t=Ec,i=_c;t=(i&~(1<<32-Xa(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=dA++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=tK++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},oK={readContext:ga,useCallback:Kk,useContext:ga,useEffect:II,useImperativeHandle:Jk,useInsertionEffect:Yk,useLayoutEffect:Xk,useMemo:$k,useReducer:j4,useRef:Wk,useState:function(){return j4(pA)},useDebugValue:TI,useDeferredValue:function(n){var e=Aa();return Zk(e,Cr.memoizedState,n)},useTransition:function(){var n=j4(pA)[0],e=Aa().memoizedState;return[n,e]},useMutableSource:kk,useSyncExternalStore:Nk,useId:eN,unstable_isNewReconciler:!1},aK={readContext:ga,useCallback:Kk,useContext:ga,useEffect:II,useImperativeHandle:Jk,useInsertionEffect:Yk,useLayoutEffect:Xk,useMemo:$k,useReducer:W4,useRef:Wk,useState:function(){return W4(pA)},useDebugValue:TI,useDeferredValue:function(n){var e=Aa();return Cr===null?e.memoizedState=n:Zk(e,Cr.memoizedState,n)},useTransition:function(){var n=W4(pA)[0],e=Aa().memoizedState;return[n,e]},useMutableSource:kk,useSyncExternalStore:Nk,useId:eN,unstable_isNewReconciler:!1};function Oa(n,e){if(n&&n.defaultProps){e=Wi({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function xb(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Wi({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var N3={isMounted:function(n){return(n=n._reactInternals)?td(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Ps(),r=Hu(n),s=wc(i,r);s.payload=e,t!=null&&(s.callback=t),e=Nu(n,s,r),e!==null&&(qa(e,n,r,i),Jx(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Ps(),r=Hu(n),s=wc(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Nu(n,s,r),e!==null&&(qa(e,n,r,i),Jx(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ps(),i=Hu(n),r=wc(t,i);r.tag=2,e!=null&&(r.callback=e),e=Nu(n,r,i),e!==null&&(qa(e,n,i,t),Jx(e,n,i))}};function B7(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!aA(t,i)||!aA(r,s):!0}function rN(n,e,t){var i=!1,r=ef,s=e.contextType;return typeof s=="object"&&s!==null?s=ga(s):(r=to(e)?Dh:gs.current,i=e.contextTypes,s=(i=i!=null)?Pm(n,r):ef),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=N3,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function P7(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&N3.enqueueReplaceState(e,e.state,null)}function _b(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},_I(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ga(s):(s=to(e)?Dh:gs.current,r.context=Pm(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xb(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&N3.enqueueReplaceState(r,r.state,null),k_(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Fm(n,e){try{var t="",i=e;do t+=Fq(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Y4(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Eb(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var lK=typeof WeakMap=="function"?WeakMap:Map;function sN(n,e,t){t=wc(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){V_||(V_=!0,Rb=i),Eb(n,e)},t}function oN(n,e,t){t=wc(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Eb(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Eb(n,e),typeof i!="function"&&(Gu===null?Gu=new Set([this]):Gu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function R7(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new lK;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=EK.bind(null,n,e,t),e.then(n,n))}function D7(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function L7(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=wc(-1,1),e.tag=2,Nu(t,e,1))),t.lanes|=1),n)}var cK=Nc.ReactCurrentOwner,Xs=!1;function bs(n,e,t,i){e.child=n===null?Fk(e,null,t,i):Dm(e,n.child,t,i)}function F7(n,e,t,i,r){t=t.render;var s=e.ref;return gm(e,r),i=bI(n,e,t,i,s,r),t=MI(),n!==null&&!Xs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Pc(n,e,r)):(Oi&&t&&pI(e),e.flags|=1,bs(n,e,i,r),e.child)}function O7(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!zI(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,aN(n,e,s,i,r)):(n=n_(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:aA,t(o,i)&&n.ref===e.ref)return Pc(n,e,r)}return e.flags|=1,n=Qu(s,i),n.ref=e.ref,n.return=e,e.child=n}function aN(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(aA(s,i)&&n.ref===e.ref)if(Xs=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Xs=!0);else return e.lanes=n.lanes,Pc(n,e,r)}return wb(n,e,t,i,r)}function lN(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(nm,vo),vo|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,_i(nm,vo),vo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,_i(nm,vo),vo|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,_i(nm,vo),vo|=i;return bs(n,e,r,t),e.child}function cN(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function wb(n,e,t,i,r){var s=to(t)?Dh:gs.current;return s=Pm(e,s),gm(e,r),t=bI(n,e,t,i,s,r),i=MI(),n!==null&&!Xs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Pc(n,e,r)):(Oi&&i&&pI(e),e.flags|=1,bs(n,e,t,r),e.child)}function z7(n,e,t,i,r){if(to(t)){var s=!0;L_(e)}else s=!1;if(gm(e,r),e.stateNode===null)Zx(n,e),rN(e,t,i),_b(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=ga(c):(c=to(t)?Dh:gs.current,c=Pm(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&P7(e,o,i,c),vu=!1;var h=e.memoizedState;o.state=h,k_(e,i,o,r),l=e.memoizedState,a!==i||h!==l||eo.current||vu?(typeof u=="function"&&(xb(e,t,u,i),l=e.memoizedState),(a=vu||B7(e,t,a,i,h,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,zk(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Oa(e.type,a),o.props=c,f=e.pendingProps,h=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ga(l):(l=to(t)?Dh:gs.current,l=Pm(e,l));var d=t.getDerivedStateFromProps;(u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&P7(e,o,i,l),vu=!1,h=e.memoizedState,o.state=h,k_(e,i,o,r);var m=e.memoizedState;a!==f||h!==m||eo.current||vu?(typeof d=="function"&&(xb(e,t,d,i),m=e.memoizedState),(c=vu||B7(e,t,c,i,h,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return Sb(n,e,t,i,s,r)}function Sb(n,e,t,i,r,s){cN(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&E7(e,t,!1),Pc(n,e,s);i=e.stateNode,cK.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Dm(e,n.child,null,s),e.child=Dm(e,null,a,s)):bs(n,e,a,s),e.memoizedState=i.state,r&&E7(e,t,!0),e.child}function uN(n){var e=n.stateNode;e.pendingContext?_7(n,e.pendingContext,e.pendingContext!==e.context):e.context&&_7(n,e.context,!1),EI(n,e.containerInfo)}function U7(n,e,t,i,r){return Rm(),gI(r),e.flags|=256,bs(n,e,t,i),e.child}var Cb={dehydrated:null,treeContext:null,retryLane:0};function bb(n){return{baseLanes:n,cachePool:null,transitions:null}}function fN(n,e,t){var i=e.pendingProps,r=Gi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),_i(Gi,r&1),n===null)return vb(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Q3(o,i,0,null),n=Ch(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=bb(t),e.memoizedState=Cb,n):BI(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return uK(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Qu(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Qu(a,s):(s=Ch(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?bb(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Cb,i}return s=n.child,n=s.sibling,i=Qu(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function BI(n,e){return e=Q3({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Fy(n,e,t,i){return i!==null&&gI(i),Dm(e,n.child,null,t),n=BI(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function uK(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Y4(Error(mt(422))),Fy(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Q3({mode:"visible",children:i.children},r,0,null),s=Ch(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Dm(e,n.child,null,o),e.child.memoizedState=bb(o),e.memoizedState=Cb,s);if(!(e.mode&1))return Fy(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(mt(419)),i=Y4(s,i,void 0),Fy(n,e,o,i)}if(a=(o&n.childLanes)!==0,Xs||a){if(i=jr,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Bc(n,r),qa(i,n,r,-1))}return OI(),i=Y4(Error(mt(421))),Fy(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=wK.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,yo=ku(r.nextSibling),wo=e,Oi=!0,Na=null,n!==null&&(Zo[ea++]=_c,Zo[ea++]=Ec,Zo[ea++]=Lh,_c=n.id,Ec=n.overflow,Lh=e),e=BI(e,i.children),e.flags|=4096,e)}function k7(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),yb(n.return,e,t)}function X4(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function hN(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(bs(n,e,i.children,t),i=Gi.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&k7(n,t,e);else if(n.tag===19)k7(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(_i(Gi,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&N_(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),X4(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&N_(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}X4(e,!0,t,null,s);break;case"together":X4(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zx(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Pc(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Oh|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(mt(153));if(e.child!==null){for(n=e.child,t=Qu(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Qu(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function fK(n,e,t){switch(e.tag){case 3:uN(e),Rm();break;case 5:Uk(e);break;case 1:to(e.type)&&L_(e);break;case 4:EI(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;_i(z_,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(_i(Gi,Gi.current&1),e.flags|=128,null):t&e.child.childLanes?fN(n,e,t):(_i(Gi,Gi.current&1),n=Pc(n,e,t),n!==null?n.sibling:null);_i(Gi,Gi.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return hN(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),_i(Gi,Gi.current),i)break;return null;case 22:case 23:return e.lanes=0,lN(n,e,t)}return Pc(n,e,t)}var dN,Mb,pN,mN;dN=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Mb=function(){};pN=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,hh(Fl.current);var s=null;switch(t){case"input":r=q5(n,r),i=q5(n,i),s=[];break;case"select":r=Wi({},r,{value:void 0}),i=Wi({},i,{value:void 0}),s=[];break;case"textarea":r=$5(n,r),i=$5(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=R_)}eb(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(eA.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(eA.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&wi("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};mN=function(n,e,t,i){t!==i&&(e.flags|=4)};function q0(n,e){if(!Oi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function cs(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function hK(n,e,t){var i=e.pendingProps;switch(mI(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cs(e),null;case 1:return to(e.type)&&D_(),cs(e),null;case 3:return i=e.stateNode,Lm(),bi(eo),bi(gs),SI(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Dy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Na!==null&&(Fb(Na),Na=null))),Mb(n,e),cs(e),null;case 5:wI(e);var r=hh(hA.current);if(t=e.type,n!==null&&e.stateNode!=null)pN(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(mt(166));return cs(e),null}if(n=hh(Fl.current),Dy(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Tl]=e,i[uA]=s,n=(e.mode&1)!==0,t){case"dialog":wi("cancel",i),wi("close",i);break;case"iframe":case"object":case"embed":wi("load",i);break;case"video":case"audio":for(r=0;r<lg.length;r++)wi(lg[r],i);break;case"source":wi("error",i);break;case"img":case"image":case"link":wi("error",i),wi("load",i);break;case"details":wi("toggle",i);break;case"input":XB(i,s),wi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},wi("invalid",i);break;case"textarea":JB(i,s),wi("invalid",i)}eb(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ry(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ry(i.textContent,a,n),r=["children",""+a]):eA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&wi("scroll",i)}switch(t){case"input":Sy(i),qB(i,s,!0);break;case"textarea":Sy(i),KB(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=R_)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=QU(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Tl]=e,n[uA]=i,dN(n,e,!1,!1),e.stateNode=n;e:{switch(o=tb(t,i),t){case"dialog":wi("cancel",n),wi("close",n),r=i;break;case"iframe":case"object":case"embed":wi("load",n),r=i;break;case"video":case"audio":for(r=0;r<lg.length;r++)wi(lg[r],n);r=i;break;case"source":wi("error",n),r=i;break;case"img":case"image":case"link":wi("error",n),wi("load",n),r=i;break;case"details":wi("toggle",n),r=i;break;case"input":XB(n,i),r=q5(n,i),wi("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Wi({},i,{value:void 0}),wi("invalid",n);break;case"textarea":JB(n,i),r=$5(n,i),wi("invalid",n);break;default:r=i}eb(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?WU(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VU(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&tA(n,l):typeof l=="number"&&tA(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(eA.hasOwnProperty(s)?l!=null&&s==="onScroll"&&wi("scroll",n):l!=null&&eI(n,s,l,o))}switch(t){case"input":Sy(n),qB(n,i,!1);break;case"textarea":Sy(n),KB(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Zu(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?hm(n,!!i.multiple,s,!1):i.defaultValue!=null&&hm(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=R_)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cs(e),null;case 6:if(n&&e.stateNode!=null)mN(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(mt(166));if(t=hh(hA.current),hh(Fl.current),Dy(e)){if(i=e.stateNode,t=e.memoizedProps,i[Tl]=e,(s=i.nodeValue!==t)&&(n=wo,n!==null))switch(n.tag){case 3:Ry(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ry(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Tl]=e,e.stateNode=i}return cs(e),null;case 13:if(bi(Gi),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Oi&&yo!==null&&e.mode&1&&!(e.flags&128))Dk(),Rm(),e.flags|=98560,s=!1;else if(s=Dy(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(mt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(mt(317));s[Tl]=e}else Rm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cs(e),s=!1}else Na!==null&&(Fb(Na),Na=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Gi.current&1?Mr===0&&(Mr=3):OI())),e.updateQueue!==null&&(e.flags|=4),cs(e),null);case 4:return Lm(),Mb(n,e),n===null&&lA(e.stateNode.containerInfo),cs(e),null;case 10:return yI(e.type._context),cs(e),null;case 17:return to(e.type)&&D_(),cs(e),null;case 19:if(bi(Gi),s=e.memoizedState,s===null)return cs(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)q0(s,!1);else{if(Mr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=N_(n),o!==null){for(e.flags|=128,q0(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return _i(Gi,Gi.current&1|2),e.child}n=n.sibling}s.tail!==null&&cr()>Om&&(e.flags|=128,i=!0,q0(s,!1),e.lanes=4194304)}else{if(!i)if(n=N_(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),q0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Oi)return cs(e),null}else 2*cr()-s.renderingStartTime>Om&&t!==1073741824&&(e.flags|=128,i=!0,q0(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=cr(),e.sibling=null,t=Gi.current,_i(Gi,i?t&1|2:t&1),e):(cs(e),null);case 22:case 23:return FI(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?vo&1073741824&&(cs(e),e.subtreeFlags&6&&(e.flags|=8192)):cs(e),null;case 24:return null;case 25:return null}throw Error(mt(156,e.tag))}function dK(n,e){switch(mI(e),e.tag){case 1:return to(e.type)&&D_(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Lm(),bi(eo),bi(gs),SI(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return wI(e),null;case 13:if(bi(Gi),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(mt(340));Rm()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return bi(Gi),null;case 4:return Lm(),null;case 10:return yI(e.type._context),null;case 22:case 23:return FI(),null;case 24:return null;default:return null}}var Oy=!1,ds=!1,pK=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function tm(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){qi(n,e,i)}else t.current=null}function Ib(n,e,t){try{t()}catch(i){qi(n,e,i)}}var N7=!1;function mK(n,e){if(fb=T_,n=xk(),dI(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,h=null;t:for(;;){for(var d;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===n)break t;if(h===t&&++c===r&&(a=o),h===s&&++u===i&&(l=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(hb={focusedElem:n,selectionRange:t},T_=!1,Ot=e;Ot!==null;)if(e=Ot,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ot=n;else for(;Ot!==null;){e=Ot;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,p=e.stateNode,A=p.getSnapshotBeforeUpdate(e.elementType===e.type?g:Oa(e.type,g),v);p.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(w){qi(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,Ot=n;break}Ot=e.return}return m=N7,N7=!1,m}function bg(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Ib(e,t,s)}r=r.next}while(r!==i)}}function G3(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Tb(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function gN(n){var e=n.alternate;e!==null&&(n.alternate=null,gN(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Tl],delete e[uA],delete e[mb],delete e[KJ],delete e[$J])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function AN(n){return n.tag===5||n.tag===3||n.tag===4}function G7(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||AN(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Bb(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=R_));else if(i!==4&&(n=n.child,n!==null))for(Bb(n,e,t),n=n.sibling;n!==null;)Bb(n,e,t),n=n.sibling}function Pb(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Pb(n,e,t),n=n.sibling;n!==null;)Pb(n,e,t),n=n.sibling}var ts=null,Ua=!1;function nu(n,e,t){for(t=t.child;t!==null;)vN(n,e,t),t=t.sibling}function vN(n,e,t){if(Ll&&typeof Ll.onCommitFiberUnmount=="function")try{Ll.onCommitFiberUnmount(D3,t)}catch{}switch(t.tag){case 5:ds||tm(t,e);case 6:var i=ts,r=Ua;ts=null,nu(n,e,t),ts=i,Ua=r,ts!==null&&(Ua?(n=ts,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ts.removeChild(t.stateNode));break;case 18:ts!==null&&(Ua?(n=ts,t=t.stateNode,n.nodeType===8?G4(n.parentNode,t):n.nodeType===1&&G4(n,t),sA(n)):G4(ts,t.stateNode));break;case 4:i=ts,r=Ua,ts=t.stateNode.containerInfo,Ua=!0,nu(n,e,t),ts=i,Ua=r;break;case 0:case 11:case 14:case 15:if(!ds&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ib(t,e,o),r=r.next}while(r!==i)}nu(n,e,t);break;case 1:if(!ds&&(tm(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){qi(t,e,a)}nu(n,e,t);break;case 21:nu(n,e,t);break;case 22:t.mode&1?(ds=(i=ds)||t.memoizedState!==null,nu(n,e,t),ds=i):nu(n,e,t);break;default:nu(n,e,t)}}function H7(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new pK),e.forEach(function(i){var r=SK.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Sa(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ts=a.stateNode,Ua=!1;break e;case 3:ts=a.stateNode.containerInfo,Ua=!0;break e;case 4:ts=a.stateNode.containerInfo,Ua=!0;break e}a=a.return}if(ts===null)throw Error(mt(160));vN(s,o,r),ts=null,Ua=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){qi(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yN(e,n),e=e.sibling}function yN(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Sa(e,n),hl(n),i&4){try{bg(3,n,n.return),G3(3,n)}catch(g){qi(n,n.return,g)}try{bg(5,n,n.return)}catch(g){qi(n,n.return,g)}}break;case 1:Sa(e,n),hl(n),i&512&&t!==null&&tm(t,t.return);break;case 5:if(Sa(e,n),hl(n),i&512&&t!==null&&tm(t,t.return),n.flags&32){var r=n.stateNode;try{tA(r,"")}catch(g){qi(n,n.return,g)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&GU(r,s),tb(a,o);var c=tb(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?WU(r,f):u==="dangerouslySetInnerHTML"?VU(r,f):u==="children"?tA(r,f):eI(r,u,f,c)}switch(a){case"input":J5(r,s);break;case"textarea":HU(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?hm(r,!!s.multiple,d,!1):h!==!!s.multiple&&(s.defaultValue!=null?hm(r,!!s.multiple,s.defaultValue,!0):hm(r,!!s.multiple,s.multiple?[]:"",!1))}r[uA]=s}catch(g){qi(n,n.return,g)}}break;case 6:if(Sa(e,n),hl(n),i&4){if(n.stateNode===null)throw Error(mt(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(g){qi(n,n.return,g)}}break;case 3:if(Sa(e,n),hl(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{sA(e.containerInfo)}catch(g){qi(n,n.return,g)}break;case 4:Sa(e,n),hl(n);break;case 13:Sa(e,n),hl(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(DI=cr())),i&4&&H7(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(ds=(c=ds)||u,Sa(e,n),ds=c):Sa(e,n),hl(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Ot=n,u=n.child;u!==null;){for(f=Ot=u;Ot!==null;){switch(h=Ot,d=h.child,h.tag){case 0:case 11:case 14:case 15:bg(4,h,h.return);break;case 1:tm(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){qi(i,t,g)}}break;case 5:tm(h,h.return);break;case 22:if(h.memoizedState!==null){V7(f);continue}}d!==null?(d.return=h,Ot=d):V7(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=jU("display",o))}catch(g){qi(n,n.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){qi(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Sa(e,n),hl(n),i&4&&H7(n);break;case 21:break;default:Sa(e,n),hl(n)}}function hl(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(AN(t)){var i=t;break e}t=t.return}throw Error(mt(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(tA(r,""),i.flags&=-33);var s=G7(n);Pb(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=G7(n);Bb(n,a,o);break;default:throw Error(mt(161))}}catch(l){qi(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function gK(n,e,t){Ot=n,xN(n)}function xN(n,e,t){for(var i=(n.mode&1)!==0;Ot!==null;){var r=Ot,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Oy;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ds;a=Oy;var c=ds;if(Oy=o,(ds=l)&&!c)for(Ot=r;Ot!==null;)o=Ot,l=o.child,o.tag===22&&o.memoizedState!==null?j7(r):l!==null?(l.return=o,Ot=l):j7(r);for(;s!==null;)Ot=s,xN(s),s=s.sibling;Ot=r,Oy=a,ds=c}Q7(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ot=s):Q7(n)}}function Q7(n){for(;Ot!==null;){var e=Ot;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ds||G3(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ds)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Oa(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&M7(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}M7(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&sA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}ds||e.flags&512&&Tb(e)}catch(h){qi(e,e.return,h)}}if(e===n){Ot=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ot=t;break}Ot=e.return}}function V7(n){for(;Ot!==null;){var e=Ot;if(e===n){Ot=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ot=t;break}Ot=e.return}}function j7(n){for(;Ot!==null;){var e=Ot;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{G3(4,e)}catch(l){qi(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){qi(e,r,l)}}var s=e.return;try{Tb(e)}catch(l){qi(e,s,l)}break;case 5:var o=e.return;try{Tb(e)}catch(l){qi(e,o,l)}}}catch(l){qi(e,e.return,l)}if(e===n){Ot=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ot=a;break}Ot=e.return}}var AK=Math.ceil,Q_=Nc.ReactCurrentDispatcher,PI=Nc.ReactCurrentOwner,ha=Nc.ReactCurrentBatchConfig,qn=0,jr=null,xr=null,ns=0,vo=0,nm=pf(0),Mr=0,gA=null,Oh=0,H3=0,RI=0,Mg=null,Ys=null,DI=0,Om=1/0,hc=null,V_=!1,Rb=null,Gu=null,zy=!1,wu=null,j_=0,Ig=0,Db=null,e_=-1,t_=0;function Ps(){return qn&6?cr():e_!==-1?e_:e_=cr()}function Hu(n){return n.mode&1?qn&2&&ns!==0?ns&-ns:eK.transition!==null?(t_===0&&(t_=rk()),t_):(n=ci,n!==0||(n=window.event,n=n===void 0?16:fk(n.type)),n):1}function qa(n,e,t,i){if(50<Ig)throw Ig=0,Db=null,Error(mt(185));qA(n,t,i),(!(qn&2)||n!==jr)&&(n===jr&&(!(qn&2)&&(H3|=t),Mr===4&&_u(n,ns)),no(n,i),t===1&&qn===0&&!(e.mode&1)&&(Om=cr()+500,U3&&mf()))}function no(n,e){var t=n.callbackNode;eJ(n,e);var i=I_(n,n===jr?ns:0);if(i===0)t!==null&&e7(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&e7(t),e===1)n.tag===0?ZJ(W7.bind(null,n)):Bk(W7.bind(null,n)),qJ(function(){!(qn&6)&&mf()}),t=null;else{switch(sk(i)){case 1:t=sI;break;case 4:t=nk;break;case 16:t=M_;break;case 536870912:t=ik;break;default:t=M_}t=IN(t,_N.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function _N(n,e){if(e_=-1,t_=0,qn&6)throw Error(mt(327));var t=n.callbackNode;if(Am()&&n.callbackNode!==t)return null;var i=I_(n,n===jr?ns:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=W_(n,i);else{e=i;var r=qn;qn|=2;var s=wN();(jr!==n||ns!==e)&&(hc=null,Om=cr()+500,Sh(n,e));do try{xK();break}catch(a){EN(n,a)}while(!0);vI(),Q_.current=s,qn=r,xr!==null?e=0:(jr=null,ns=0,e=Mr)}if(e!==0){if(e===2&&(r=ob(n),r!==0&&(i=r,e=Lb(n,r))),e===1)throw t=gA,Sh(n,0),_u(n,i),no(n,cr()),t;if(e===6)_u(n,i);else{if(r=n.current.alternate,!(i&30)&&!vK(r)&&(e=W_(n,i),e===2&&(s=ob(n),s!==0&&(i=s,e=Lb(n,s))),e===1))throw t=gA,Sh(n,0),_u(n,i),no(n,cr()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(mt(345));case 2:sh(n,Ys,hc);break;case 3:if(_u(n,i),(i&130023424)===i&&(e=DI+500-cr(),10<e)){if(I_(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Ps(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=pb(sh.bind(null,n,Ys,hc),e);break}sh(n,Ys,hc);break;case 4:if(_u(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Xa(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=cr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*AK(i/1960))-i,10<i){n.timeoutHandle=pb(sh.bind(null,n,Ys,hc),i);break}sh(n,Ys,hc);break;case 5:sh(n,Ys,hc);break;default:throw Error(mt(329))}}}return no(n,cr()),n.callbackNode===t?_N.bind(null,n):null}function Lb(n,e){var t=Mg;return n.current.memoizedState.isDehydrated&&(Sh(n,e).flags|=256),n=W_(n,e),n!==2&&(e=Ys,Ys=t,e!==null&&Fb(e)),n}function Fb(n){Ys===null?Ys=n:Ys.push.apply(Ys,n)}function vK(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Za(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _u(n,e){for(e&=~RI,e&=~H3,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Xa(e),i=1<<t;n[t]=-1,e&=~i}}function W7(n){if(qn&6)throw Error(mt(327));Am();var e=I_(n,0);if(!(e&1))return no(n,cr()),null;var t=W_(n,e);if(n.tag!==0&&t===2){var i=ob(n);i!==0&&(e=i,t=Lb(n,i))}if(t===1)throw t=gA,Sh(n,0),_u(n,e),no(n,cr()),t;if(t===6)throw Error(mt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,sh(n,Ys,hc),no(n,cr()),null}function LI(n,e){var t=qn;qn|=1;try{return n(e)}finally{qn=t,qn===0&&(Om=cr()+500,U3&&mf())}}function zh(n){wu!==null&&wu.tag===0&&!(qn&6)&&Am();var e=qn;qn|=1;var t=ha.transition,i=ci;try{if(ha.transition=null,ci=1,n)return n()}finally{ci=i,ha.transition=t,qn=e,!(qn&6)&&mf()}}function FI(){vo=nm.current,bi(nm)}function Sh(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,XJ(t)),xr!==null)for(t=xr.return;t!==null;){var i=t;switch(mI(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&D_();break;case 3:Lm(),bi(eo),bi(gs),SI();break;case 5:wI(i);break;case 4:Lm();break;case 13:bi(Gi);break;case 19:bi(Gi);break;case 10:yI(i.type._context);break;case 22:case 23:FI()}t=t.return}if(jr=n,xr=n=Qu(n.current,null),ns=vo=e,Mr=0,gA=null,RI=H3=Oh=0,Ys=Mg=null,fh!==null){for(e=0;e<fh.length;e++)if(t=fh[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}fh=null}return n}function EN(n,e){do{var t=xr;try{if(vI(),Kx.current=H_,G_){for(var i=Vi.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}G_=!1}if(Fh=0,Gr=Cr=Vi=null,Cg=!1,dA=0,PI.current=null,t===null||t.return===null){Mr=1,gA=e,xr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=ns,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=D7(o);if(d!==null){d.flags&=-257,L7(d,o,a,s,e),d.mode&1&&R7(s,c,e),e=d,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){R7(s,c,e),OI();break e}l=Error(mt(426))}}else if(Oi&&a.mode&1){var v=D7(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),L7(v,o,a,s,e),gI(Fm(l,a));break e}}s=l=Fm(l,a),Mr!==4&&(Mr=2),Mg===null?Mg=[s]:Mg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=sN(s,l,e);b7(s,p);break e;case 1:a=l;var A=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Gu===null||!Gu.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=oN(s,a,e);b7(s,w);break e}}s=s.return}while(s!==null)}CN(t)}catch(S){e=S,xr===t&&t!==null&&(xr=t=t.return);continue}break}while(!0)}function wN(){var n=Q_.current;return Q_.current=H_,n===null?H_:n}function OI(){(Mr===0||Mr===3||Mr===2)&&(Mr=4),jr===null||!(Oh&268435455)&&!(H3&268435455)||_u(jr,ns)}function W_(n,e){var t=qn;qn|=2;var i=wN();(jr!==n||ns!==e)&&(hc=null,Sh(n,e));do try{yK();break}catch(r){EN(n,r)}while(!0);if(vI(),qn=t,Q_.current=i,xr!==null)throw Error(mt(261));return jr=null,ns=0,Mr}function yK(){for(;xr!==null;)SN(xr)}function xK(){for(;xr!==null&&!jq();)SN(xr)}function SN(n){var e=MN(n.alternate,n,vo);n.memoizedProps=n.pendingProps,e===null?CN(n):xr=e,PI.current=null}function CN(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=dK(t,e),t!==null){t.flags&=32767,xr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Mr=6,xr=null;return}}else if(t=hK(t,e,vo),t!==null){xr=t;return}if(e=e.sibling,e!==null){xr=e;return}xr=e=n}while(e!==null);Mr===0&&(Mr=5)}function sh(n,e,t){var i=ci,r=ha.transition;try{ha.transition=null,ci=1,_K(n,e,t,i)}finally{ha.transition=r,ci=i}return null}function _K(n,e,t,i){do Am();while(wu!==null);if(qn&6)throw Error(mt(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(mt(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(tJ(n,s),n===jr&&(xr=jr=null,ns=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||zy||(zy=!0,IN(M_,function(){return Am(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ha.transition,ha.transition=null;var o=ci;ci=1;var a=qn;qn|=4,PI.current=null,mK(n,t),yN(t,n),GJ(hb),T_=!!fb,hb=fb=null,n.current=t,gK(t),Wq(),qn=a,ci=o,ha.transition=s}else n.current=t;if(zy&&(zy=!1,wu=n,j_=r),s=n.pendingLanes,s===0&&(Gu=null),qq(t.stateNode),no(n,cr()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(V_)throw V_=!1,n=Rb,Rb=null,n;return j_&1&&n.tag!==0&&Am(),s=n.pendingLanes,s&1?n===Db?Ig++:(Ig=0,Db=n):Ig=0,mf(),null}function Am(){if(wu!==null){var n=sk(j_),e=ha.transition,t=ci;try{if(ha.transition=null,ci=16>n?16:n,wu===null)var i=!1;else{if(n=wu,wu=null,j_=0,qn&6)throw Error(mt(331));var r=qn;for(qn|=4,Ot=n.current;Ot!==null;){var s=Ot,o=s.child;if(Ot.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ot=c;Ot!==null;){var u=Ot;switch(u.tag){case 0:case 11:case 15:bg(8,u,s)}var f=u.child;if(f!==null)f.return=u,Ot=f;else for(;Ot!==null;){u=Ot;var h=u.sibling,d=u.return;if(gN(u),u===c){Ot=null;break}if(h!==null){h.return=d,Ot=h;break}Ot=d}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Ot=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ot=o;else e:for(;Ot!==null;){if(s=Ot,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bg(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Ot=p;break e}Ot=s.return}}var A=n.current;for(Ot=A;Ot!==null;){o=Ot;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Ot=y;else e:for(o=A;Ot!==null;){if(a=Ot,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:G3(9,a)}}catch(S){qi(a,a.return,S)}if(a===o){Ot=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Ot=w;break e}Ot=a.return}}if(qn=r,mf(),Ll&&typeof Ll.onPostCommitFiberRoot=="function")try{Ll.onPostCommitFiberRoot(D3,n)}catch{}i=!0}return i}finally{ci=t,ha.transition=e}}return!1}function Y7(n,e,t){e=Fm(t,e),e=sN(n,e,1),n=Nu(n,e,1),e=Ps(),n!==null&&(qA(n,1,e),no(n,e))}function qi(n,e,t){if(n.tag===3)Y7(n,n,t);else for(;e!==null;){if(e.tag===3){Y7(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Gu===null||!Gu.has(i))){n=Fm(t,n),n=oN(e,n,1),e=Nu(e,n,1),n=Ps(),e!==null&&(qA(e,1,n),no(e,n));break}}e=e.return}}function EK(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Ps(),n.pingedLanes|=n.suspendedLanes&t,jr===n&&(ns&t)===t&&(Mr===4||Mr===3&&(ns&130023424)===ns&&500>cr()-DI?Sh(n,0):RI|=t),no(n,e)}function bN(n,e){e===0&&(n.mode&1?(e=My,My<<=1,!(My&130023424)&&(My=4194304)):e=1);var t=Ps();n=Bc(n,e),n!==null&&(qA(n,e,t),no(n,t))}function wK(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),bN(n,t)}function SK(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(mt(314))}i!==null&&i.delete(e),bN(n,t)}var MN;MN=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||eo.current)Xs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Xs=!1,fK(n,e,t);Xs=!!(n.flags&131072)}else Xs=!1,Oi&&e.flags&1048576&&Pk(e,O_,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Zx(n,e),n=e.pendingProps;var r=Pm(e,gs.current);gm(e,t),r=bI(null,e,i,n,r,t);var s=MI();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,to(i)?(s=!0,L_(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,_I(e),r.updater=N3,e.stateNode=r,r._reactInternals=e,_b(e,i,n,t),e=Sb(null,e,i,!0,s,t)):(e.tag=0,Oi&&s&&pI(e),bs(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Zx(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=bK(i),n=Oa(i,n),r){case 0:e=wb(null,e,i,n,t);break e;case 1:e=z7(null,e,i,n,t);break e;case 11:e=F7(null,e,i,n,t);break e;case 14:e=O7(null,e,i,Oa(i.type,n),t);break e}throw Error(mt(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Oa(i,r),wb(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Oa(i,r),z7(n,e,i,r,t);case 3:e:{if(uN(e),n===null)throw Error(mt(387));i=e.pendingProps,s=e.memoizedState,r=s.element,zk(n,e),k_(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Fm(Error(mt(423)),e),e=U7(n,e,i,t,r);break e}else if(i!==r){r=Fm(Error(mt(424)),e),e=U7(n,e,i,t,r);break e}else for(yo=ku(e.stateNode.containerInfo.firstChild),wo=e,Oi=!0,Na=null,t=Fk(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Rm(),i===r){e=Pc(n,e,t);break e}bs(n,e,i,t)}e=e.child}return e;case 5:return Uk(e),n===null&&vb(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,db(i,r)?o=null:s!==null&&db(i,s)&&(e.flags|=32),cN(n,e),bs(n,e,o,t),e.child;case 6:return n===null&&vb(e),null;case 13:return fN(n,e,t);case 4:return EI(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Dm(e,null,i,t):bs(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Oa(i,r),F7(n,e,i,r,t);case 7:return bs(n,e,e.pendingProps,t),e.child;case 8:return bs(n,e,e.pendingProps.children,t),e.child;case 12:return bs(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,_i(z_,i._currentValue),i._currentValue=o,s!==null)if(Za(s.value,o)){if(s.children===r.children&&!eo.current){e=Pc(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=wc(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),yb(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(mt(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),yb(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}bs(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,gm(e,t),r=ga(r),i=i(r),e.flags|=1,bs(n,e,i,t),e.child;case 14:return i=e.type,r=Oa(i,e.pendingProps),r=Oa(i.type,r),O7(n,e,i,r,t);case 15:return aN(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Oa(i,r),Zx(n,e),e.tag=1,to(i)?(n=!0,L_(e)):n=!1,gm(e,t),rN(e,i,r),_b(e,i,r,t),Sb(null,e,i,!0,n,t);case 19:return hN(n,e,t);case 22:return lN(n,e,t)}throw Error(mt(156,e.tag))};function IN(n,e){return tk(n,e)}function CK(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function aa(n,e,t,i){return new CK(n,e,t,i)}function zI(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bK(n){if(typeof n=="function")return zI(n)?1:0;if(n!=null){if(n=n.$$typeof,n===nI)return 11;if(n===iI)return 14}return 2}function Qu(n,e){var t=n.alternate;return t===null?(t=aa(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function n_(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")zI(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Wp:return Ch(t.children,r,s,e);case tI:o=8,r|=8;break;case j5:return n=aa(12,t,e,r|2),n.elementType=j5,n.lanes=s,n;case W5:return n=aa(13,t,e,r),n.elementType=W5,n.lanes=s,n;case Y5:return n=aa(19,t,e,r),n.elementType=Y5,n.lanes=s,n;case UU:return Q3(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case OU:o=10;break e;case zU:o=9;break e;case nI:o=11;break e;case iI:o=14;break e;case Au:o=16,i=null;break e}throw Error(mt(130,n==null?n:typeof n,""))}return e=aa(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Ch(n,e,t,i){return n=aa(7,n,i,e),n.lanes=t,n}function Q3(n,e,t,i){return n=aa(22,n,i,e),n.elementType=UU,n.lanes=t,n.stateNode={isHidden:!1},n}function q4(n,e,t){return n=aa(6,n,null,e),n.lanes=t,n}function J4(n,e,t){return e=aa(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function MK(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=B4(0),this.expirationTimes=B4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B4(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function UI(n,e,t,i,r,s,o,a,l){return n=new MK(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=aa(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},_I(s),n}function IK(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jp,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function TN(n){if(!n)return ef;n=n._reactInternals;e:{if(td(n)!==n||n.tag!==1)throw Error(mt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(to(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(mt(171))}if(n.tag===1){var t=n.type;if(to(t))return Tk(n,t,e)}return e}function BN(n,e,t,i,r,s,o,a,l){return n=UI(t,i,!0,n,r,s,o,a,l),n.context=TN(null),t=n.current,i=Ps(),r=Hu(t),s=wc(i,r),s.callback=e??null,Nu(t,s,r),n.current.lanes=r,qA(n,r,i),no(n,i),n}function V3(n,e,t,i){var r=e.current,s=Ps(),o=Hu(r);return t=TN(t),e.context===null?e.context=t:e.pendingContext=t,e=wc(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Nu(r,e,o),n!==null&&(qa(n,r,o,s),Jx(n,r,o)),o}function Y_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function X7(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function kI(n,e){X7(n,e),(n=n.alternate)&&X7(n,e)}function TK(){return null}var PN=typeof reportError=="function"?reportError:function(n){console.error(n)};function NI(n){this._internalRoot=n}j3.prototype.render=NI.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(mt(409));V3(n,e,null,null)};j3.prototype.unmount=NI.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;zh(function(){V3(null,n,null,null)}),e[Tc]=null}};function j3(n){this._internalRoot=n}j3.prototype.unstable_scheduleHydration=function(n){if(n){var e=lk();n={blockedOn:null,target:n,priority:e};for(var t=0;t<xu.length&&e!==0&&e<xu[t].priority;t++);xu.splice(t,0,n),t===0&&uk(n)}};function GI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function W3(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function q7(){}function BK(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Y_(o);s.call(c)}}var o=BN(e,i,n,0,null,!1,!1,"",q7);return n._reactRootContainer=o,n[Tc]=o.current,lA(n.nodeType===8?n.parentNode:n),zh(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Y_(l);a.call(c)}}var l=UI(n,0,!1,null,null,!1,!1,"",q7);return n._reactRootContainer=l,n[Tc]=l.current,lA(n.nodeType===8?n.parentNode:n),zh(function(){V3(e,l,t,i)}),l}function Y3(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Y_(o);a.call(l)}}V3(e,o,n,r)}else o=BK(t,e,n,r,i);return Y_(o)}ok=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ag(e.pendingLanes);t!==0&&(oI(e,t|1),no(e,cr()),!(qn&6)&&(Om=cr()+500,mf()))}break;case 13:zh(function(){var i=Bc(n,1);if(i!==null){var r=Ps();qa(i,n,1,r)}}),kI(n,1)}};aI=function(n){if(n.tag===13){var e=Bc(n,134217728);if(e!==null){var t=Ps();qa(e,n,134217728,t)}kI(n,134217728)}};ak=function(n){if(n.tag===13){var e=Hu(n),t=Bc(n,e);if(t!==null){var i=Ps();qa(t,n,e,i)}kI(n,e)}};lk=function(){return ci};ck=function(n,e){var t=ci;try{return ci=n,e()}finally{ci=t}};ib=function(n,e,t){switch(e){case"input":if(J5(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=z3(i);if(!r)throw Error(mt(90));NU(i),J5(i,r)}}}break;case"textarea":HU(n,t);break;case"select":e=t.value,e!=null&&hm(n,!!t.multiple,e,!1)}};qU=LI;JU=zh;var PK={usingClientEntryPoint:!1,Events:[KA,Jp,z3,YU,XU,LI]},J0={findFiberByHostInstance:uh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RK={bundleType:J0.bundleType,version:J0.version,rendererPackageName:J0.rendererPackageName,rendererConfig:J0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nc.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ZU(n),n===null?null:n.stateNode},findFiberByHostInstance:J0.findFiberByHostInstance||TK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uy.isDisabled&&Uy.supportsFiber)try{D3=Uy.inject(RK),Ll=Uy}catch{}}Io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PK;Io.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!GI(e))throw Error(mt(200));return IK(n,e,null,t)};Io.createRoot=function(n,e){if(!GI(n))throw Error(mt(299));var t=!1,i="",r=PN;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=UI(n,1,!1,null,null,t,!1,i,r),n[Tc]=e.current,lA(n.nodeType===8?n.parentNode:n),new NI(e)};Io.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(mt(188)):(n=Object.keys(n).join(","),Error(mt(268,n)));return n=ZU(e),n=n===null?null:n.stateNode,n};Io.flushSync=function(n){return zh(n)};Io.hydrate=function(n,e,t){if(!W3(e))throw Error(mt(200));return Y3(null,n,e,!0,t)};Io.hydrateRoot=function(n,e,t){if(!GI(n))throw Error(mt(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=PN;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=BN(e,null,n,1,t??null,r,!1,s,o),n[Tc]=e.current,lA(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new j3(e)};Io.render=function(n,e,t){if(!W3(e))throw Error(mt(200));return Y3(null,n,e,!1,t)};Io.unmountComponentAtNode=function(n){if(!W3(n))throw Error(mt(40));return n._reactRootContainer?(zh(function(){Y3(null,null,n,!1,function(){n._reactRootContainer=null,n[Tc]=null})}),!0):!1};Io.unstable_batchedUpdates=LI;Io.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!W3(t))throw Error(mt(200));if(n==null||n._reactInternals===void 0)throw Error(mt(38));return Y3(n,e,t,!1,i)};Io.version="18.3.1-next-f1338f8080-20240426";function RN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RN)}catch(n){console.error(n)}}RN(),RU.exports=Io;var HI=RU.exports;const DN=Zh(HI),DK=xU({__proto__:null,default:DN},[HI]);var QI,J7=HI;QI=Q5.createRoot=J7.createRoot,Q5.hydrateRoot=J7.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ni(){return Ni=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ni.apply(this,arguments)}var mr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(mr||(mr={}));const K7="popstate";function LK(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return AA("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Uh(r)}return OK(e,t,null,n)}function Tn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function zm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FK(){return Math.random().toString(36).substr(2,8)}function $7(n,e){return{usr:n.state,key:n.key,idx:e}}function AA(n,e,t,i){return t===void 0&&(t=null),Ni({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?gf(e):e,{state:t,key:e&&e.key||i||FK()})}function Uh(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function gf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function OK(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=mr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ni({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=mr.Pop;let v=u(),p=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:p})}function h(v,p){a=mr.Push;let A=AA(g.location,v,p);c=u()+1;let y=$7(A,c),w=g.createHref(A);try{o.pushState(y,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(w)}s&&l&&l({action:a,location:g.location,delta:1})}function d(v,p){a=mr.Replace;let A=AA(g.location,v,p);c=u();let y=$7(A,c),w=g.createHref(A);o.replaceState(y,"",w),s&&l&&l({action:a,location:g.location,delta:0})}function m(v){let p=r.location.origin!=="null"?r.location.origin:r.location.href,A=typeof v=="string"?v:Uh(v);return A=A.replace(/ $/,"%20"),Tn(p,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,p)}let g={get action(){return a},get location(){return n(r,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(K7,f),l=v,()=>{r.removeEventListener(K7,f),l=null}},createHref(v){return e(r,v)},createURL:m,encodeLocation(v){let p=m(v);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:d,go(v){return o.go(v)}};return g}var Fi;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Fi||(Fi={}));const zK=new Set(["lazy","caseSensitive","path","id","index","children"]);function UK(n){return n.index===!0}function Ob(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((r,s)=>{let o=[...t,s],a=typeof r.id=="string"?r.id:o.join("-");if(Tn(r.index!==!0||!r.children,"Cannot specify children on an index route"),Tn(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),UK(r)){let l=Ni({},r,e(r),{id:a});return i[a]=l,l}else{let l=Ni({},r,e(r),{id:a,children:void 0});return i[a]=l,r.children&&(l.children=Ob(r.children,e,o,i)),l}})}function im(n,e,t){t===void 0&&(t="/");let i=typeof e=="string"?gf(e):e,r=Rc(i.pathname||"/",t);if(r==null)return null;let s=LN(n);NK(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=KK(r);o=qK(s[a],l)}return o}function kK(n,e){let{route:t,pathname:i,params:r}=n;return{id:t.id,pathname:i,params:r,data:e[t.id],handle:t.handle}}function LN(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Tn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Sc([i,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(Tn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),LN(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:YK(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of FN(s.path))r(s,o,l)}),e}function FN(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=FN(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function NK(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:XK(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const GK=/^:[\w-]+$/,HK=3,QK=2,VK=1,jK=10,WK=-2,Z7=n=>n==="*";function YK(n,e){let t=n.split("/"),i=t.length;return t.some(Z7)&&(i+=WK),e&&(i+=QK),t.filter(r=>!Z7(r)).reduce((r,s)=>r+(GK.test(s)?HK:s===""?VK:jK),i)}function XK(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function qK(n,e){let{routesMeta:t}=n,i={},r="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,c=r==="/"?e:e.slice(r.length)||"/",u=zb({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(i,u.params);let f=a.route;s.push({params:i,pathname:Sc([r,u.pathname]),pathnameBase:e$(Sc([r,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(r=Sc([r,u.pathnameBase]))}return s}function zb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=JK(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,f)=>{let{paramName:h,isOptional:d}=u;if(h==="*"){let g=a[f]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[f];return d&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function JK(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),zm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function KK(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Rc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function $K(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?gf(n):n;return{pathname:t?t.startsWith("/")?t:ZK(t,e):e,search:t$(i),hash:n$(r)}}function ZK(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function K4(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ON(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function X3(n,e){let t=ON(n);return e?t.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function q3(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=gf(n):(r=Ni({},n),Tn(!r.pathname||!r.pathname.includes("?"),K4("?","pathname","search",r)),Tn(!r.pathname||!r.pathname.includes("#"),K4("#","pathname","hash",r)),Tn(!r.search||!r.search.includes("#"),K4("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;r.pathname=h.join("/")}a=f>=0?e[f]:"/"}let l=$K(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Sc=n=>n.join("/").replace(/\/\/+/g,"/"),e$=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),t$=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,n$=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class VI{constructor(e,t,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function jI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const zN=["post","put","patch","delete"],i$=new Set(zN),r$=["get",...zN],s$=new Set(r$),o$=new Set([301,302,303,307,308]),a$=new Set([307,308]),$4={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},l$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},K0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},WI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,c$=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),UN="remix-router-transitions";function u$(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;Tn(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(n.mapRouteProperties)r=n.mapRouteProperties;else if(n.detectErrorBoundary){let we=n.detectErrorBoundary;r=Ie=>({hasErrorBoundary:we(Ie)})}else r=c$;let s={},o=Ob(n.routes,r,void 0,s),a,l=n.basename||"/",c=n.unstable_dataStrategy||p$,u=Ni({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},n.future),f=null,h=new Set,d=null,m=null,g=null,v=n.hydrationData!=null,p=im(o,n.history.location,l),A=null;if(p==null){let we=Xo(404,{pathname:n.history.location.pathname}),{matches:Ie,route:Fe}=cP(o);p=Ie,A={[Fe.id]:we}}let y,w=p.some(we=>we.route.lazy),S=p.some(we=>we.route.loader);if(w)y=!1;else if(!S)y=!0;else if(u.v7_partialHydration){let we=n.hydrationData?n.hydrationData.loaderData:null,Ie=n.hydrationData?n.hydrationData.errors:null,Fe=qe=>qe.route.loader?typeof qe.route.loader=="function"&&qe.route.loader.hydrate===!0?!1:we&&we[qe.route.id]!==void 0||Ie&&Ie[qe.route.id]!==void 0:!0;if(Ie){let qe=p.findIndex(ut=>Ie[ut.route.id]!==void 0);y=p.slice(0,qe+1).every(Fe)}else y=p.every(Fe)}else y=n.hydrationData!=null;let C,b={historyAction:n.history.action,location:n.history.location,matches:p,initialized:y,navigation:$4,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||A,fetchers:new Map,blockers:new Map},M=mr.Pop,I=!1,T,D=!1,R=new Map,z=null,L=!1,H=!1,J=[],Z=[],U=new Map,X=0,Y=-1,O=new Map,W=new Set,$=new Map,k=new Map,V=new Set,Q=new Map,j=new Map,oe=!1;function xe(){if(f=n.history.listen(we=>{let{action:Ie,location:Fe,delta:qe}=we;if(oe){oe=!1;return}zm(j.size===0||qe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ut=Ye({currentLocation:b.location,nextLocation:Fe,historyAction:Ie});if(ut&&qe!=null){oe=!0,n.history.go(qe*-1),$e(ut,{state:"blocked",location:Fe,proceed(){$e(ut,{state:"proceeding",proceed:void 0,reset:void 0,location:Fe}),n.history.go(qe)},reset(){let Mt=new Map(b.blockers);Mt.set(ut,K0),te({blockers:Mt})}});return}return ye(Ie,Fe)}),t){b$(e,R);let we=()=>M$(e,R);e.addEventListener("pagehide",we),z=()=>e.removeEventListener("pagehide",we)}return b.initialized||ye(mr.Pop,b.location,{initialHydration:!0}),C}function pe(){f&&f(),z&&z(),h.clear(),T&&T.abort(),b.fetchers.forEach((we,Ie)=>We(Ie)),b.blockers.forEach((we,Ie)=>De(Ie))}function de(we){return h.add(we),()=>h.delete(we)}function te(we,Ie){Ie===void 0&&(Ie={}),b=Ni({},b,we);let Fe=[],qe=[];u.v7_fetcherPersist&&b.fetchers.forEach((ut,Mt)=>{ut.state==="idle"&&(V.has(Mt)?qe.push(Mt):Fe.push(Mt))}),[...h].forEach(ut=>ut(b,{deletedFetchers:qe,unstable_viewTransitionOpts:Ie.viewTransitionOpts,unstable_flushSync:Ie.flushSync===!0})),u.v7_fetcherPersist&&(Fe.forEach(ut=>b.fetchers.delete(ut)),qe.forEach(ut=>We(ut)))}function Ee(we,Ie,Fe){var qe,ut;let{flushSync:Mt}=Fe===void 0?{}:Fe,It=b.actionData!=null&&b.navigation.formMethod!=null&&ka(b.navigation.formMethod)&&b.navigation.state==="loading"&&((qe=we.state)==null?void 0:qe._isRedirect)!==!0,wt;Ie.actionData?Object.keys(Ie.actionData).length>0?wt=Ie.actionData:wt=null:It?wt=b.actionData:wt=null;let Ht=Ie.loaderData?aP(b.loaderData,Ie.loaderData,Ie.matches||[],Ie.errors):b.loaderData,zt=b.blockers;zt.size>0&&(zt=new Map(zt),zt.forEach((ht,un)=>zt.set(un,K0)));let Fn=I===!0||b.navigation.formMethod!=null&&ka(b.navigation.formMethod)&&((ut=we.state)==null?void 0:ut._isRedirect)!==!0;a&&(o=a,a=void 0),L||M===mr.Pop||(M===mr.Push?n.history.push(we,we.state):M===mr.Replace&&n.history.replace(we,we.state));let wn;if(M===mr.Pop){let ht=R.get(b.location.pathname);ht&&ht.has(we.pathname)?wn={currentLocation:b.location,nextLocation:we}:R.has(we.pathname)&&(wn={currentLocation:we,nextLocation:b.location})}else if(D){let ht=R.get(b.location.pathname);ht?ht.add(we.pathname):(ht=new Set([we.pathname]),R.set(b.location.pathname,ht)),wn={currentLocation:b.location,nextLocation:we}}te(Ni({},Ie,{actionData:wt,loaderData:Ht,historyAction:M,location:we,initialized:!0,navigation:$4,revalidation:"idle",restoreScrollPosition:ot(we,Ie.matches||b.matches),preventScrollReset:Fn,blockers:zt}),{viewTransitionOpts:wn,flushSync:Mt===!0}),M=mr.Pop,I=!1,D=!1,L=!1,H=!1,J=[],Z=[]}async function ue(we,Ie){if(typeof we=="number"){n.history.go(we);return}let Fe=Ub(b.location,b.matches,l,u.v7_prependBasename,we,u.v7_relativeSplatPath,Ie==null?void 0:Ie.fromRouteId,Ie==null?void 0:Ie.relative),{path:qe,submission:ut,error:Mt}=eP(u.v7_normalizeFormMethod,!1,Fe,Ie),It=b.location,wt=AA(b.location,qe,Ie&&Ie.state);wt=Ni({},wt,n.history.encodeLocation(wt));let Ht=Ie&&Ie.replace!=null?Ie.replace:void 0,zt=mr.Push;Ht===!0?zt=mr.Replace:Ht===!1||ut!=null&&ka(ut.formMethod)&&ut.formAction===b.location.pathname+b.location.search&&(zt=mr.Replace);let Fn=Ie&&"preventScrollReset"in Ie?Ie.preventScrollReset===!0:void 0,wn=(Ie&&Ie.unstable_flushSync)===!0,ht=Ye({currentLocation:It,nextLocation:wt,historyAction:zt});if(ht){$e(ht,{state:"blocked",location:wt,proceed(){$e(ht,{state:"proceeding",proceed:void 0,reset:void 0,location:wt}),ue(we,Ie)},reset(){let un=new Map(b.blockers);un.set(ht,K0),te({blockers:un})}});return}return await ye(zt,wt,{submission:ut,pendingError:Mt,preventScrollReset:Fn,replace:Ie&&Ie.replace,enableViewTransition:Ie&&Ie.unstable_viewTransition,flushSync:wn})}function ve(){if(Ae(),te({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){ye(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}ye(M||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation})}}async function ye(we,Ie,Fe){T&&T.abort(),T=null,M=we,L=(Fe&&Fe.startUninterruptedRevalidation)===!0,at(b.location,b.matches),I=(Fe&&Fe.preventScrollReset)===!0,D=(Fe&&Fe.enableViewTransition)===!0;let qe=a||o,ut=Fe&&Fe.overrideNavigation,Mt=im(qe,Ie,l),It=(Fe&&Fe.flushSync)===!0;if(!Mt){let ht=Xo(404,{pathname:Ie.pathname}),{matches:un,route:Jn}=cP(qe);fe(),Ee(Ie,{matches:un,loaderData:{},errors:{[Jn.id]:ht}},{flushSync:It});return}if(b.initialized&&!H&&x$(b.location,Ie)&&!(Fe&&Fe.submission&&ka(Fe.submission.formMethod))){Ee(Ie,{matches:Mt},{flushSync:It});return}T=new AbortController;let wt=bd(n.history,Ie,T.signal,Fe&&Fe.submission),Ht;if(Fe&&Fe.pendingError)Ht=[Tg(Mt).route.id,{type:Fi.error,error:Fe.pendingError}];else if(Fe&&Fe.submission&&ka(Fe.submission.formMethod)){let ht=await Be(wt,Ie,Fe.submission,Mt,{replace:Fe.replace,flushSync:It});if(ht.shortCircuited)return;Ht=ht.pendingActionResult,ut=Z4(Ie,Fe.submission),It=!1,wt=bd(n.history,wt.url,wt.signal)}let{shortCircuited:zt,loaderData:Fn,errors:wn}=await ae(wt,Ie,Mt,ut,Fe&&Fe.submission,Fe&&Fe.fetcherSubmission,Fe&&Fe.replace,Fe&&Fe.initialHydration===!0,It,Ht);zt||(T=null,Ee(Ie,Ni({matches:Mt},lP(Ht),{loaderData:Fn,errors:wn})))}async function Be(we,Ie,Fe,qe,ut){ut===void 0&&(ut={}),Ae();let Mt=S$(Ie,Fe);te({navigation:Mt},{flushSync:ut.flushSync===!0});let It,wt=Nb(qe,Ie);if(!wt.route.action&&!wt.route.lazy)It={type:Fi.error,error:Xo(405,{method:we.method,pathname:Ie.pathname,routeId:wt.route.id})};else if(It=(await se("action",we,[wt],qe))[0],we.signal.aborted)return{shortCircuited:!0};if(ph(It)){let Ht;return ut&&ut.replace!=null?Ht=ut.replace:Ht=rP(It.response.headers.get("Location"),new URL(we.url),l)===b.location.pathname+b.location.search,await ct(we,It,{submission:Fe,replace:Ht}),{shortCircuited:!0}}if(dh(It))throw Xo(400,{type:"defer-action"});if(ta(It)){let Ht=Tg(qe,wt.route.id);return(ut&&ut.replace)!==!0&&(M=mr.Push),{pendingActionResult:[Ht.route.id,It]}}return{pendingActionResult:[wt.route.id,It]}}async function ae(we,Ie,Fe,qe,ut,Mt,It,wt,Ht,zt){let Fn=qe||Z4(Ie,ut),wn=ut||Mt||hP(Fn),ht=a||o,[un,Jn]=tP(n.history,b,Fe,wn,Ie,u.v7_partialHydration&&wt===!0,u.unstable_skipActionErrorRevalidation,H,J,Z,V,$,W,ht,l,zt);if(fe(Ne=>!(Fe&&Fe.some(Je=>Je.route.id===Ne))||un&&un.some(Je=>Je.route.id===Ne)),Y=++X,un.length===0&&Jn.length===0){let Ne=lt();return Ee(Ie,Ni({matches:Fe,loaderData:{},errors:zt&&ta(zt[1])?{[zt[0]]:zt[1].error}:null},lP(zt),Ne?{fetchers:new Map(b.fetchers)}:{}),{flushSync:Ht}),{shortCircuited:!0}}if(!L&&(!u.v7_partialHydration||!wt)){Jn.forEach(Je=>{let Te=b.fetchers.get(Je.key),pt=$0(void 0,Te?Te.data:void 0);b.fetchers.set(Je.key,pt)});let Ne;zt&&!ta(zt[1])?Ne={[zt[0]]:zt[1].data}:b.actionData&&(Object.keys(b.actionData).length===0?Ne=null:Ne=b.actionData),te(Ni({navigation:Fn},Ne!==void 0?{actionData:Ne}:{},Jn.length>0?{fetchers:new Map(b.fetchers)}:{}),{flushSync:Ht})}Jn.forEach(Ne=>{U.has(Ne.key)&&Oe(Ne.key),Ne.controller&&U.set(Ne.key,Ne.controller)});let ne=()=>Jn.forEach(Ne=>Oe(Ne.key));T&&T.signal.addEventListener("abort",ne);let{loaderResults:G,fetcherResults:re}=await ee(b.matches,Fe,un,Jn,we);if(we.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",ne),Jn.forEach(Ne=>U.delete(Ne.key));let he=uP([...G,...re]);if(he){if(he.idx>=un.length){let Ne=Jn[he.idx-un.length].key;W.add(Ne)}return await ct(we,he.result,{replace:It}),{shortCircuited:!0}}let{loaderData:le,errors:me}=oP(b,Fe,un,G,zt,Jn,re,Q);Q.forEach((Ne,Je)=>{Ne.subscribe(Te=>{(Te||Ne.done)&&Q.delete(Je)})}),u.v7_partialHydration&&wt&&b.errors&&Object.entries(b.errors).filter(Ne=>{let[Je]=Ne;return!un.some(Te=>Te.route.id===Je)}).forEach(Ne=>{let[Je,Te]=Ne;me=Object.assign(me||{},{[Je]:Te})});let Ge=lt(),Qe=st(Y),Ke=Ge||Qe||Jn.length>0;return Ni({loaderData:le,errors:me},Ke?{fetchers:new Map(b.fetchers)}:{})}function ie(we,Ie,Fe,qe){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");U.has(we)&&Oe(we);let ut=(qe&&qe.unstable_flushSync)===!0,Mt=a||o,It=Ub(b.location,b.matches,l,u.v7_prependBasename,Fe,u.v7_relativeSplatPath,Ie,qe==null?void 0:qe.relative),wt=im(Mt,It,l);if(!wt){Ce(we,Ie,Xo(404,{pathname:It}),{flushSync:ut});return}let{path:Ht,submission:zt,error:Fn}=eP(u.v7_normalizeFormMethod,!0,It,qe);if(Fn){Ce(we,Ie,Fn,{flushSync:ut});return}let wn=Nb(wt,Ht);if(I=(qe&&qe.preventScrollReset)===!0,zt&&ka(zt.formMethod)){be(we,Ie,Ht,wn,wt,ut,zt);return}$.set(we,{routeId:Ie,path:Ht}),Re(we,Ie,Ht,wn,wt,ut,zt)}async function be(we,Ie,Fe,qe,ut,Mt,It){if(Ae(),$.delete(we),!qe.route.action&&!qe.route.lazy){let pt=Xo(405,{method:It.formMethod,pathname:Fe,routeId:Ie});Ce(we,Ie,pt,{flushSync:Mt});return}let wt=b.fetchers.get(we);Ue(we,C$(It,wt),{flushSync:Mt});let Ht=new AbortController,zt=bd(n.history,Fe,Ht.signal,It);U.set(we,Ht);let Fn=X,ht=(await se("action",zt,[qe],ut))[0];if(zt.signal.aborted){U.get(we)===Ht&&U.delete(we);return}if(u.v7_fetcherPersist&&V.has(we)){if(ph(ht)||ta(ht)){Ue(we,pu(void 0));return}}else{if(ph(ht))if(U.delete(we),Y>Fn){Ue(we,pu(void 0));return}else return W.add(we),Ue(we,$0(It)),ct(zt,ht,{fetcherSubmission:It});if(ta(ht)){Ce(we,Ie,ht.error);return}}if(dh(ht))throw Xo(400,{type:"defer-action"});let un=b.navigation.location||b.location,Jn=bd(n.history,un,Ht.signal),ne=a||o,G=b.navigation.state!=="idle"?im(ne,b.navigation.location,l):b.matches;Tn(G,"Didn't find any matches after fetcher action");let re=++X;O.set(we,re);let he=$0(It,ht.data);b.fetchers.set(we,he);let[le,me]=tP(n.history,b,G,It,un,!1,u.unstable_skipActionErrorRevalidation,H,J,Z,V,$,W,ne,l,[qe.route.id,ht]);me.filter(pt=>pt.key!==we).forEach(pt=>{let At=pt.key,vt=b.fetchers.get(At),Nt=$0(void 0,vt?vt.data:void 0);b.fetchers.set(At,Nt),U.has(At)&&Oe(At),pt.controller&&U.set(At,pt.controller)}),te({fetchers:new Map(b.fetchers)});let Ge=()=>me.forEach(pt=>Oe(pt.key));Ht.signal.addEventListener("abort",Ge);let{loaderResults:Qe,fetcherResults:Ke}=await ee(b.matches,G,le,me,Jn);if(Ht.signal.aborted)return;Ht.signal.removeEventListener("abort",Ge),O.delete(we),U.delete(we),me.forEach(pt=>U.delete(pt.key));let Ne=uP([...Qe,...Ke]);if(Ne){if(Ne.idx>=le.length){let pt=me[Ne.idx-le.length].key;W.add(pt)}return ct(Jn,Ne.result)}let{loaderData:Je,errors:Te}=oP(b,b.matches,le,Qe,void 0,me,Ke,Q);if(b.fetchers.has(we)){let pt=pu(ht.data);b.fetchers.set(we,pt)}st(re),b.navigation.state==="loading"&&re>Y?(Tn(M,"Expected pending action"),T&&T.abort(),Ee(b.navigation.location,{matches:G,loaderData:Je,errors:Te,fetchers:new Map(b.fetchers)})):(te({errors:Te,loaderData:aP(b.loaderData,Je,G,Te),fetchers:new Map(b.fetchers)}),H=!1)}async function Re(we,Ie,Fe,qe,ut,Mt,It){let wt=b.fetchers.get(we);Ue(we,$0(It,wt?wt.data:void 0),{flushSync:Mt});let Ht=new AbortController,zt=bd(n.history,Fe,Ht.signal);U.set(we,Ht);let Fn=X,ht=(await se("loader",zt,[qe],ut))[0];if(dh(ht)&&(ht=await HN(ht,zt.signal,!0)||ht),U.get(we)===Ht&&U.delete(we),!zt.signal.aborted){if(V.has(we)){Ue(we,pu(void 0));return}if(ph(ht))if(Y>Fn){Ue(we,pu(void 0));return}else{W.add(we),await ct(zt,ht);return}if(ta(ht)){Ce(we,Ie,ht.error);return}Tn(!dh(ht),"Unhandled fetcher deferred data"),Ue(we,pu(ht.data))}}async function ct(we,Ie,Fe){let{submission:qe,fetcherSubmission:ut,replace:Mt}=Fe===void 0?{}:Fe;Ie.response.headers.has("X-Remix-Revalidate")&&(H=!0);let It=Ie.response.headers.get("Location");Tn(It,"Expected a Location header on the redirect Response"),It=rP(It,new URL(we.url),l);let wt=AA(b.location,It,{_isRedirect:!0});if(t){let un=!1;if(Ie.response.headers.has("X-Remix-Reload-Document"))un=!0;else if(WI.test(It)){const Jn=n.history.createURL(It);un=Jn.origin!==e.location.origin||Rc(Jn.pathname,l)==null}if(un){Mt?e.location.replace(It):e.location.assign(It);return}}T=null;let Ht=Mt===!0?mr.Replace:mr.Push,{formMethod:zt,formAction:Fn,formEncType:wn}=b.navigation;!qe&&!ut&&zt&&Fn&&wn&&(qe=hP(b.navigation));let ht=qe||ut;if(a$.has(Ie.response.status)&&ht&&ka(ht.formMethod))await ye(Ht,wt,{submission:Ni({},ht,{formAction:It}),preventScrollReset:I});else{let un=Z4(wt,qe);await ye(Ht,wt,{overrideNavigation:un,fetcherSubmission:ut,preventScrollReset:I})}}async function se(we,Ie,Fe,qe){try{let ut=await m$(c,we,Ie,Fe,qe,s,r);return await Promise.all(ut.map((Mt,It)=>{if(_$(Mt)){let wt=Mt.result;return{type:Fi.redirect,response:v$(wt,Ie,Fe[It].route.id,qe,l,u.v7_relativeSplatPath)}}return A$(Mt)}))}catch(ut){return Fe.map(()=>({type:Fi.error,error:ut}))}}async function ee(we,Ie,Fe,qe,ut){let[Mt,...It]=await Promise.all([Fe.length?se("loader",ut,Fe,Ie):[],...qe.map(wt=>{if(wt.matches&&wt.match&&wt.controller){let Ht=bd(n.history,wt.path,wt.controller.signal);return se("loader",Ht,[wt.match],wt.matches).then(zt=>zt[0])}else return Promise.resolve({type:Fi.error,error:Xo(404,{pathname:wt.path})})})]);return await Promise.all([fP(we,Fe,Mt,Mt.map(()=>ut.signal),!1,b.loaderData),fP(we,qe.map(wt=>wt.match),It,qe.map(wt=>wt.controller?wt.controller.signal:null),!0)]),{loaderResults:Mt,fetcherResults:It}}function Ae(){H=!0,J.push(...fe()),$.forEach((we,Ie)=>{U.has(Ie)&&(Z.push(Ie),Oe(Ie))})}function Ue(we,Ie,Fe){Fe===void 0&&(Fe={}),b.fetchers.set(we,Ie),te({fetchers:new Map(b.fetchers)},{flushSync:(Fe&&Fe.flushSync)===!0})}function Ce(we,Ie,Fe,qe){qe===void 0&&(qe={});let ut=Tg(b.matches,Ie);We(we),te({errors:{[ut.route.id]:Fe},fetchers:new Map(b.fetchers)},{flushSync:(qe&&qe.flushSync)===!0})}function ke(we){return u.v7_fetcherPersist&&(k.set(we,(k.get(we)||0)+1),V.has(we)&&V.delete(we)),b.fetchers.get(we)||l$}function We(we){let Ie=b.fetchers.get(we);U.has(we)&&!(Ie&&Ie.state==="loading"&&O.has(we))&&Oe(we),$.delete(we),O.delete(we),W.delete(we),V.delete(we),b.fetchers.delete(we)}function Xe(we){if(u.v7_fetcherPersist){let Ie=(k.get(we)||0)-1;Ie<=0?(k.delete(we),V.add(we)):k.set(we,Ie)}else We(we);te({fetchers:new Map(b.fetchers)})}function Oe(we){let Ie=U.get(we);Tn(Ie,"Expected fetch controller: "+we),Ie.abort(),U.delete(we)}function ft(we){for(let Ie of we){let Fe=ke(Ie),qe=pu(Fe.data);b.fetchers.set(Ie,qe)}}function lt(){let we=[],Ie=!1;for(let Fe of W){let qe=b.fetchers.get(Fe);Tn(qe,"Expected fetcher: "+Fe),qe.state==="loading"&&(W.delete(Fe),we.push(Fe),Ie=!0)}return ft(we),Ie}function st(we){let Ie=[];for(let[Fe,qe]of O)if(qe<we){let ut=b.fetchers.get(Fe);Tn(ut,"Expected fetcher: "+Fe),ut.state==="loading"&&(Oe(Fe),O.delete(Fe),Ie.push(Fe))}return ft(Ie),Ie.length>0}function ce(we,Ie){let Fe=b.blockers.get(we)||K0;return j.get(we)!==Ie&&j.set(we,Ie),Fe}function De(we){b.blockers.delete(we),j.delete(we)}function $e(we,Ie){let Fe=b.blockers.get(we)||K0;Tn(Fe.state==="unblocked"&&Ie.state==="blocked"||Fe.state==="blocked"&&Ie.state==="blocked"||Fe.state==="blocked"&&Ie.state==="proceeding"||Fe.state==="blocked"&&Ie.state==="unblocked"||Fe.state==="proceeding"&&Ie.state==="unblocked","Invalid blocker state transition: "+Fe.state+" -> "+Ie.state);let qe=new Map(b.blockers);qe.set(we,Ie),te({blockers:qe})}function Ye(we){let{currentLocation:Ie,nextLocation:Fe,historyAction:qe}=we;if(j.size===0)return;j.size>1&&zm(!1,"A router only supports one blocker at a time");let ut=Array.from(j.entries()),[Mt,It]=ut[ut.length-1],wt=b.blockers.get(Mt);if(!(wt&&wt.state==="proceeding")&&It({currentLocation:Ie,nextLocation:Fe,historyAction:qe}))return Mt}function fe(we){let Ie=[];return Q.forEach((Fe,qe)=>{(!we||we(qe))&&(Fe.cancel(),Ie.push(qe),Q.delete(qe))}),Ie}function _e(we,Ie,Fe){if(d=we,g=Ie,m=Fe||null,!v&&b.navigation===$4){v=!0;let qe=ot(b.location,b.matches);qe!=null&&te({restoreScrollPosition:qe})}return()=>{d=null,g=null,m=null}}function Me(we,Ie){return m&&m(we,Ie.map(qe=>kK(qe,b.loaderData)))||we.key}function at(we,Ie){if(d&&g){let Fe=Me(we,Ie);d[Fe]=g()}}function ot(we,Ie){if(d){let Fe=Me(we,Ie),qe=d[Fe];if(typeof qe=="number")return qe}return null}function yt(we){s={},a=Ob(we,r,void 0,s)}return C={get basename(){return l},get future(){return u},get state(){return b},get routes(){return o},get window(){return e},initialize:xe,subscribe:de,enableScrollRestoration:_e,navigate:ue,fetch:ie,revalidate:ve,createHref:we=>n.history.createHref(we),encodeLocation:we=>n.history.encodeLocation(we),getFetcher:ke,deleteFetcher:Xe,dispose:pe,getBlocker:ce,deleteBlocker:De,_internalFetchControllers:U,_internalActiveDeferreds:Q,_internalSetRoutes:yt},C}function f$(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Ub(n,e,t,i,r,s,o,a){let l,c;if(o){l=[];for(let f of e)if(l.push(f),f.route.id===o){c=f;break}}else l=e,c=e[e.length-1];let u=q3(r||".",X3(l,s),Rc(n.pathname,t)||n.pathname,a==="path");return r==null&&(u.search=n.search,u.hash=n.hash),(r==null||r===""||r===".")&&c&&c.route.index&&!YI(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Sc([t,u.pathname])),Uh(u)}function eP(n,e,t,i){if(!i||!f$(i))return{path:t};if(i.formMethod&&!w$(i.formMethod))return{path:t,error:Xo(405,{method:i.formMethod})};let r=()=>({path:t,error:Xo(400,{type:"invalid-body"})}),s=i.formMethod||"get",o=n?s.toUpperCase():s.toLowerCase(),a=NN(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!ka(o))return r();let h=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((d,m)=>{let[g,v]=m;return""+d+g+"="+v+`
`},""):String(i.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:h}}}else if(i.formEncType==="application/json"){if(!ka(o))return r();try{let h=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:h,text:void 0}}}catch{return r()}}}Tn(typeof FormData=="function","FormData is not available in this environment");let l,c;if(i.formData)l=kb(i.formData),c=i.formData;else if(i.body instanceof FormData)l=kb(i.body),c=i.body;else if(i.body instanceof URLSearchParams)l=i.body,c=sP(l);else if(i.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(i.body),c=sP(l)}catch{return r()}let u={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ka(u.formMethod))return{path:t,submission:u};let f=gf(t);return e&&f.search&&YI(f.search)&&l.append("index",""),f.search="?"+l,{path:Uh(f),submission:u}}function h$(n,e){let t=n;if(e){let i=n.findIndex(r=>r.route.id===e);i>=0&&(t=n.slice(0,i))}return t}function tP(n,e,t,i,r,s,o,a,l,c,u,f,h,d,m,g){let v=g?ta(g[1])?g[1].error:g[1].data:void 0,p=n.createURL(e.location),A=n.createURL(r),y=g&&ta(g[1])?g[0]:void 0,w=y?h$(t,y):t,S=g?g[1].statusCode:void 0,C=o&&S&&S>=400,b=w.filter((I,T)=>{let{route:D}=I;if(D.lazy)return!0;if(D.loader==null)return!1;if(s)return typeof D.loader!="function"||D.loader.hydrate?!0:e.loaderData[D.id]===void 0&&(!e.errors||e.errors[D.id]===void 0);if(d$(e.loaderData,e.matches[T],I)||l.some(L=>L===I.route.id))return!0;let R=e.matches[T],z=I;return nP(I,Ni({currentUrl:p,currentParams:R.params,nextUrl:A,nextParams:z.params},i,{actionResult:v,unstable_actionStatus:S,defaultShouldRevalidate:C?!1:a||p.pathname+p.search===A.pathname+A.search||p.search!==A.search||kN(R,z)}))}),M=[];return f.forEach((I,T)=>{if(s||!t.some(H=>H.route.id===I.routeId)||u.has(T))return;let D=im(d,I.path,m);if(!D){M.push({key:T,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let R=e.fetchers.get(T),z=Nb(D,I.path),L=!1;h.has(T)?L=!1:c.includes(T)?L=!0:R&&R.state!=="idle"&&R.data===void 0?L=a:L=nP(z,Ni({currentUrl:p,currentParams:e.matches[e.matches.length-1].params,nextUrl:A,nextParams:t[t.length-1].params},i,{actionResult:v,unstable_actionStatus:S,defaultShouldRevalidate:C?!1:a})),L&&M.push({key:T,routeId:I.routeId,path:I.path,matches:D,match:z,controller:new AbortController})}),[b,M]}function d$(n,e,t){let i=!e||t.route.id!==e.route.id,r=n[t.route.id]===void 0;return i||r}function kN(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function nP(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}async function iP(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let r=t[n.id];Tn(r,"No route found in manifest");let s={};for(let o in i){let l=r[o]!==void 0&&o!=="hasErrorBoundary";zm(!l,'Route "'+r.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!zK.has(o)&&(s[o]=i[o])}Object.assign(r,s),Object.assign(r,Ni({},e(r),{lazy:void 0}))}function p$(n){return Promise.all(n.matches.map(e=>e.resolve()))}async function m$(n,e,t,i,r,s,o,a){let l=i.reduce((f,h)=>f.add(h.route.id),new Set),c=new Set,u=await n({matches:r.map(f=>{let h=l.has(f.route.id);return Ni({},f,{shouldLoad:h,resolve:m=>(c.add(f.route.id),h?g$(e,t,f,s,o,m,a):Promise.resolve({type:Fi.data,result:void 0}))})}),request:t,params:r[0].params,context:a});return r.forEach(f=>Tn(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),u.filter((f,h)=>l.has(r[h].route.id))}async function g$(n,e,t,i,r,s,o){let a,l,c=u=>{let f,h=new Promise((g,v)=>f=v);l=()=>f(),e.signal.addEventListener("abort",l);let d=g=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):u({request:e,params:t.params,context:o},...g!==void 0?[g]:[]),m;return s?m=s(g=>d(g)):m=(async()=>{try{return{type:"data",result:await d()}}catch(g){return{type:"error",result:g}}})(),Promise.race([m,h])};try{let u=t.route[n];if(t.route.lazy)if(u){let f,[h]=await Promise.all([c(u).catch(d=>{f=d}),iP(t.route,r,i)]);if(f!==void 0)throw f;a=h}else if(await iP(t.route,r,i),u=t.route[n],u)a=await c(u);else if(n==="action"){let f=new URL(e.url),h=f.pathname+f.search;throw Xo(405,{method:e.method,pathname:h,routeId:t.route.id})}else return{type:Fi.data,result:void 0};else if(u)a=await c(u);else{let f=new URL(e.url),h=f.pathname+f.search;throw Xo(404,{pathname:h})}Tn(a.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Fi.error,result:u}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function A$(n){let{result:e,type:t,status:i}=n;if(GN(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Fi.error,error:a}}return t===Fi.error?{type:Fi.error,error:new VI(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Fi.data,data:o,statusCode:e.status,headers:e.headers}}if(t===Fi.error)return{type:Fi.error,error:e,statusCode:jI(e)?e.status:i};if(E$(e)){var r,s;return{type:Fi.deferred,deferredData:e,statusCode:(r=e.init)==null?void 0:r.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Fi.data,data:e,statusCode:i}}function v$(n,e,t,i,r,s){let o=n.headers.get("Location");if(Tn(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!WI.test(o)){let a=i.slice(0,i.findIndex(l=>l.route.id===t)+1);o=Ub(new URL(e.url),a,r,!0,o,s),n.headers.set("Location",o)}return n}function rP(n,e,t){if(WI.test(n)){let i=n,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),s=Rc(r.pathname,t)!=null;if(r.origin===e.origin&&s)return r.pathname+r.search+r.hash}return n}function bd(n,e,t,i){let r=n.createURL(NN(e)).toString(),s={signal:t};if(i&&ka(i.formMethod)){let{formMethod:o,formEncType:a}=i;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(i.json)):a==="text/plain"?s.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?s.body=kb(i.formData):s.body=i.formData}return new Request(r,s)}function kb(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function sP(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function y$(n,e,t,i,r,s){let o={},a=null,l,c=!1,u={},f=i&&ta(i[1])?i[1].error:void 0;return t.forEach((h,d)=>{let m=e[d].route.id;if(Tn(!ph(h),"Cannot handle redirect results in processLoaderData"),ta(h)){let g=h.error;f!==void 0&&(g=f,f=void 0),a=a||{};{let v=Tg(n,m);a[v.route.id]==null&&(a[v.route.id]=g)}o[m]=void 0,c||(c=!0,l=jI(h.error)?h.error.status:500),h.headers&&(u[m]=h.headers)}else dh(h)?(r.set(m,h.deferredData),o[m]=h.deferredData.data,h.statusCode!=null&&h.statusCode!==200&&!c&&(l=h.statusCode),h.headers&&(u[m]=h.headers)):(o[m]=h.data,h.statusCode&&h.statusCode!==200&&!c&&(l=h.statusCode),h.headers&&(u[m]=h.headers))}),f!==void 0&&i&&(a={[i[0]]:f},o[i[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:u}}function oP(n,e,t,i,r,s,o,a){let{loaderData:l,errors:c}=y$(e,t,i,r,a);for(let u=0;u<s.length;u++){let{key:f,match:h,controller:d}=s[u];Tn(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let m=o[u];if(!(d&&d.signal.aborted))if(ta(m)){let g=Tg(n.matches,h==null?void 0:h.route.id);c&&c[g.route.id]||(c=Ni({},c,{[g.route.id]:m.error})),n.fetchers.delete(f)}else if(ph(m))Tn(!1,"Unhandled fetcher revalidation redirect");else if(dh(m))Tn(!1,"Unhandled fetcher deferred data");else{let g=pu(m.data);n.fetchers.set(f,g)}}return{loaderData:l,errors:c}}function aP(n,e,t,i){let r=Ni({},e);for(let s of t){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(r[o]=e[o]):n[o]!==void 0&&s.route.loader&&(r[o]=n[o]),i&&i.hasOwnProperty(o))break}return r}function lP(n){return n?ta(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Tg(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function cP(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Xo(n,e){let{pathname:t,routeId:i,method:r,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return n===400?(o="Bad Request",r&&t&&i?a="You made a "+r+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):n===403?(o="Forbidden",a='Route "'+i+'" does not match URL "'+t+'"'):n===404?(o="Not Found",a='No route matches URL "'+t+'"'):n===405&&(o="Method Not Allowed",r&&t&&i?a="You made a "+r.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(a='Invalid request method "'+r.toUpperCase()+'"')),new VI(n||500,o,new Error(a),!0)}function uP(n){for(let e=n.length-1;e>=0;e--){let t=n[e];if(ph(t))return{result:t,idx:e}}}function NN(n){let e=typeof n=="string"?gf(n):n;return Uh(Ni({},e,{hash:""}))}function x$(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function _$(n){return GN(n.result)&&o$.has(n.result.status)}function dh(n){return n.type===Fi.deferred}function ta(n){return n.type===Fi.error}function ph(n){return(n&&n.type)===Fi.redirect}function E$(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function GN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function w$(n){return s$.has(n.toLowerCase())}function ka(n){return i$.has(n.toLowerCase())}async function fP(n,e,t,i,r,s){for(let o=0;o<t.length;o++){let a=t[o],l=e[o];if(!l)continue;let c=n.find(f=>f.route.id===l.route.id),u=c!=null&&!kN(c,l)&&(s&&s[l.route.id])!==void 0;if(dh(a)&&(r||u)){let f=i[o];Tn(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await HN(a,f,r).then(h=>{h&&(t[o]=h||t[o])})}}}async function HN(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:Fi.data,data:n.deferredData.unwrappedData}}catch(r){return{type:Fi.error,error:r}}return{type:Fi.data,data:n.deferredData.data}}}function YI(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Nb(n,e){let t=typeof e=="string"?gf(e).search:e.search;if(n[n.length-1].route.index&&YI(t||""))return n[n.length-1];let i=ON(n);return i[i.length-1]}function hP(n){let{formMethod:e,formAction:t,formEncType:i,text:r,formData:s,json:o}=n;if(!(!e||!t||!i)){if(r!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:r};if(s!=null)return{formMethod:e,formAction:t,formEncType:i,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:o,text:void 0}}}function Z4(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function S$(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function $0(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function C$(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function pu(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function b$(n,e){try{let t=n.sessionStorage.getItem(UN);if(t){let i=JSON.parse(t);for(let[r,s]of Object.entries(i||{}))s&&Array.isArray(s)&&e.set(r,new Set(s||[]))}}catch{}}function M$(n,e){if(e.size>0){let t={};for(let[i,r]of e)t[i]=[...r];try{n.sessionStorage.setItem(UN,JSON.stringify(t))}catch(i){zm(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function X_(){return X_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},X_.apply(this,arguments)}const ZA=E.createContext(null),XI=E.createContext(null),Gc=E.createContext(null),qI=E.createContext(null),Gl=E.createContext({outlet:null,matches:[],isDataRoute:!1}),QN=E.createContext(null);function I$(n,e){let{relative:t}=e===void 0?{}:e;i0()||Tn(!1);let{basename:i,navigator:r}=E.useContext(Gc),{hash:s,pathname:o,search:a}=K3(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:Sc([i,o])),r.createHref({pathname:l,search:a,hash:s})}function i0(){return E.useContext(qI)!=null}function r0(){return i0()||Tn(!1),E.useContext(qI).location}function VN(n){E.useContext(Gc).static||E.useLayoutEffect(n)}function J3(){let{isDataRoute:n}=E.useContext(Gl);return n?G$():T$()}function T$(){i0()||Tn(!1);let n=E.useContext(ZA),{basename:e,future:t,navigator:i}=E.useContext(Gc),{matches:r}=E.useContext(Gl),{pathname:s}=r0(),o=JSON.stringify(X3(r,t.v7_relativeSplatPath)),a=E.useRef(!1);return VN(()=>{a.current=!0}),E.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=q3(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Sc([e,f.pathname])),(u.replace?i.replace:i.push)(f,u.state,u)},[e,i,o,s,n])}const B$=E.createContext(null);function P$(n){let e=E.useContext(Gl).outlet;return e&&E.createElement(B$.Provider,{value:n},e)}function jN(){let{matches:n}=E.useContext(Gl),e=n[n.length-1];return e?e.params:{}}function K3(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=E.useContext(Gc),{matches:r}=E.useContext(Gl),{pathname:s}=r0(),o=JSON.stringify(X3(r,i.v7_relativeSplatPath));return E.useMemo(()=>q3(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function R$(n,e,t,i){i0()||Tn(!1);let{navigator:r}=E.useContext(Gc),{matches:s}=E.useContext(Gl),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=r0(),u;u=c;let f=u.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let d=im(n,{pathname:h});return z$(d&&d.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Sc([l,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Sc([l,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,t,i)}function D$(){let n=XN(),e=jI(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:r},t):null,null)}const L$=E.createElement(D$,null);class F$ extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?E.createElement(Gl.Provider,{value:this.props.routeContext},E.createElement(QN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function O$(n){let{routeContext:e,match:t,children:i}=n,r=E.useContext(ZA);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(Gl.Provider,{value:e},i)}function z$(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Tn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:h,errors:d}=t,m=f.route.loader&&h[f.route.id]===void 0&&(!d||d[f.route.id]===void 0);if(f.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,h)=>{let d,m=!1,g=null,v=null;t&&(d=a&&f.route.id?a[f.route.id]:void 0,g=f.route.errorElement||L$,l&&(c<0&&h===0?(H$("route-fallback"),m=!0,v=null):c===h&&(m=!0,v=f.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,h+1)),A=()=>{let y;return d?y=g:m?y=v:f.route.Component?y=E.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=u,E.createElement(O$,{match:f,routeContext:{outlet:u,matches:p,isDataRoute:t!=null},children:y})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?E.createElement(F$,{location:t.location,revalidation:t.revalidation,component:g,error:d,children:A(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):A()},null)}var WN=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(WN||{}),q_=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(q_||{});function U$(n){let e=E.useContext(ZA);return e||Tn(!1),e}function k$(n){let e=E.useContext(XI);return e||Tn(!1),e}function N$(n){let e=E.useContext(Gl);return e||Tn(!1),e}function YN(n){let e=N$(),t=e.matches[e.matches.length-1];return t.route.id||Tn(!1),t.route.id}function XN(){var n;let e=E.useContext(QN),t=k$(q_.UseRouteError),i=YN(q_.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function G$(){let{router:n}=U$(WN.UseNavigateStable),e=YN(q_.UseNavigateStable),t=E.useRef(!1);return VN(()=>{t.current=!0}),E.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,X_({fromRouteId:e},s)))},[n,e])}const dP={};function H$(n,e,t){dP[n]||(dP[n]=!0)}function Q$(n){let{to:e,replace:t,state:i,relative:r}=n;i0()||Tn(!1);let{future:s,static:o}=E.useContext(Gc),{matches:a}=E.useContext(Gl),{pathname:l}=r0(),c=J3(),u=q3(e,X3(a,s.v7_relativeSplatPath),l,r==="path"),f=JSON.stringify(u);return E.useEffect(()=>c(JSON.parse(f),{replace:t,state:i,relative:r}),[c,f,r,t,i]),null}function qN(n){return P$(n.context)}function V$(n){let{basename:e="/",children:t=null,location:i,navigationType:r=mr.Pop,navigator:s,static:o=!1,future:a}=n;i0()&&Tn(!1);let l=e.replace(/^\/*/,"/"),c=E.useMemo(()=>({basename:l,navigator:s,static:o,future:X_({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=gf(i));let{pathname:u="/",search:f="",hash:h="",state:d=null,key:m="default"}=i,g=E.useMemo(()=>{let v=Rc(u,l);return v==null?null:{location:{pathname:v,search:f,hash:h,state:d,key:m},navigationType:r}},[l,u,f,h,d,m,r]);return g==null?null:E.createElement(Gc.Provider,{value:c},E.createElement(qI.Provider,{children:t,value:g}))}new Promise(()=>{});function j$(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:E.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:E.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:E.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Um(){return Um=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Um.apply(this,arguments)}function JN(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function W$(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Y$(n,e){return n.button===0&&(!e||e==="_self")&&!W$(n)}const X$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],q$=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],J$="6";try{window.__reactRouterVersion=J$}catch{}function K$(n,e){return u$({basename:void 0,future:Um({},void 0,{v7_prependBasename:!0}),history:LK({window:void 0}),hydrationData:$$(),routes:n,mapRouteProperties:j$,unstable_dataStrategy:void 0,window:void 0}).initialize()}function $$(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Um({},e,{errors:Z$(e.errors)})),e}function Z$(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")t[i]=new VI(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let o=new s(r.message);o.stack="",t[i]=o}catch{}}if(t[i]==null){let s=new Error(r.message);s.stack="",t[i]=s}}else t[i]=r;return t}const KN=E.createContext({isTransitioning:!1}),eZ=E.createContext(new Map),tZ="startTransition",pP=Eq[tZ],nZ="flushSync",mP=DK[nZ];function iZ(n){pP?pP(n):n()}function Z0(n){mP?mP(n):n()}class rZ{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}}function sZ(n){let{fallbackElement:e,router:t,future:i}=n,[r,s]=E.useState(t.state),[o,a]=E.useState(),[l,c]=E.useState({isTransitioning:!1}),[u,f]=E.useState(),[h,d]=E.useState(),[m,g]=E.useState(),v=E.useRef(new Map),{v7_startTransition:p}=i||{},A=E.useCallback(b=>{p?iZ(b):b()},[p]),y=E.useCallback((b,M)=>{let{deletedFetchers:I,unstable_flushSync:T,unstable_viewTransitionOpts:D}=M;I.forEach(z=>v.current.delete(z)),b.fetchers.forEach((z,L)=>{z.data!==void 0&&v.current.set(L,z.data)});let R=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!D||R){T?Z0(()=>s(b)):A(()=>s(b));return}if(T){Z0(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let z=t.window.document.startViewTransition(()=>{Z0(()=>s(b))});z.finished.finally(()=>{Z0(()=>{f(void 0),d(void 0),a(void 0),c({isTransitioning:!1})})}),Z0(()=>d(z));return}h?(u&&u.resolve(),h.skipTransition(),g({state:b,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(a(b),c({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[t.window,h,u,v,A]);E.useLayoutEffect(()=>t.subscribe(y),[t,y]),E.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new rZ)},[l]),E.useEffect(()=>{if(u&&o&&t.window){let b=o,M=u.promise,I=t.window.document.startViewTransition(async()=>{A(()=>s(b)),await M});I.finished.finally(()=>{f(void 0),d(void 0),a(void 0),c({isTransitioning:!1})}),d(I)}},[A,o,u,t.window]),E.useEffect(()=>{u&&o&&r.location.key===o.location.key&&u.resolve()},[u,h,r.location,o]),E.useEffect(()=>{!l.isTransitioning&&m&&(a(m.state),c({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))},[l.isTransitioning,m]),E.useEffect(()=>{},[]);let w=E.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:b=>t.navigate(b),push:(b,M,I)=>t.navigate(b,{state:M,preventScrollReset:I==null?void 0:I.preventScrollReset}),replace:(b,M,I)=>t.navigate(b,{replace:!0,state:M,preventScrollReset:I==null?void 0:I.preventScrollReset})}),[t]),S=t.basename||"/",C=E.useMemo(()=>({router:t,navigator:w,static:!1,basename:S}),[t,w,S]);return E.createElement(E.Fragment,null,E.createElement(ZA.Provider,{value:C},E.createElement(XI.Provider,{value:r},E.createElement(eZ.Provider,{value:v.current},E.createElement(KN.Provider,{value:l},E.createElement(V$,{basename:S,location:r.location,navigationType:r.historyAction,navigator:w,future:{v7_relativeSplatPath:t.future.v7_relativeSplatPath}},r.initialized||t.future.v7_partialHydration?E.createElement(oZ,{routes:t.routes,future:t.future,state:r}):e))))),null)}function oZ(n){let{routes:e,future:t,state:i}=n;return R$(e,void 0,i,t)}const aZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$3=E.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:f}=e,h=JN(e,X$),{basename:d}=E.useContext(Gc),m,g=!1;if(typeof c=="string"&&lZ.test(c)&&(m=c,aZ))try{let y=new URL(window.location.href),w=c.startsWith("//")?new URL(y.protocol+c):new URL(c),S=Rc(w.pathname,d);w.origin===y.origin&&S!=null?c=S+w.search+w.hash:g=!0}catch{}let v=I$(c,{relative:r}),p=uZ(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,unstable_viewTransition:f});function A(y){i&&i(y),y.defaultPrevented||p(y)}return E.createElement("a",Um({},h,{href:m||v,onClick:g||s?i:A,ref:t,target:l}))}),cg=E.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:c,children:u}=e,f=JN(e,q$),h=K3(l,{relative:f.relative}),d=r0(),m=E.useContext(XI),{navigator:g,basename:v}=E.useContext(Gc),p=m!=null&&fZ(h)&&c===!0,A=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,y=d.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(y=y.toLowerCase(),w=w?w.toLowerCase():null,A=A.toLowerCase()),w&&v&&(w=Rc(w,v)||w);const S=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let C=y===A||!o&&y.startsWith(A)&&y.charAt(S)==="/",b=w!=null&&(w===A||!o&&w.startsWith(A)&&w.charAt(A.length)==="/"),M={isActive:C,isPending:b,isTransitioning:p},I=C?i:void 0,T;typeof s=="function"?T=s(M):T=[s,C?"active":null,b?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let D=typeof a=="function"?a(M):a;return E.createElement($3,Um({},f,{"aria-current":I,className:T,ref:t,style:D,to:l,unstable_viewTransition:c}),typeof u=="function"?u(M):u)});var Gb;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Gb||(Gb={}));var gP;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(gP||(gP={}));function cZ(n){let e=E.useContext(ZA);return e||Tn(!1),e}function uZ(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=J3(),c=r0(),u=K3(n,{relative:o});return E.useCallback(f=>{if(Y$(f,t)){f.preventDefault();let h=i!==void 0?i:Uh(c)===Uh(u);l(n,{replace:h,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,i,r,t,n,s,o,a])}function fZ(n,e){e===void 0&&(e={});let t=E.useContext(KN);t==null&&Tn(!1);let{basename:i}=cZ(Gb.useViewTransitionState),r=K3(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Rc(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=Rc(t.nextLocation.pathname,i)||t.nextLocation.pathname;return zb(r.pathname,o)!=null||zb(r.pathname,s)!=null}const hZ="modulepreload",dZ=function(n){return"/"+n},AP={},Z3=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(t.map(a=>{if(a=dZ(a),a in AP)return;AP[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":hZ,l||(u.as="script",u.crossOrigin=""),u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),l)return new Promise((f,h)=>{u.addEventListener("load",f),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function pZ({buttonFilter:n,setSelectedFilter:e,selectedFilter:t}){return q.jsxs("li",{children:[t==n?q.jsx("div",{className:"buttonBackground"}):null,q.jsx("button",{onClick:()=>e(n),className:`NavButton ${t==n?"NavButtonSelected":null}`,children:n})]})}const da=[{ArtName:"Art 0",path:"https://i.pinimg.com/736x/01/b9/49/01b949cf38a94001986be93cbaa656b0.jpg",EHT_price:.11,filterSearch:["All","AI Models"],id:"AA00",collectionName:"Gems",collectionId:"A008"},{ArtName:"Art 1",path:"https://i.pinimg.com/736x/02/b2/91/02b2912b354b43ee52800c66acfede5c.jpg",EHT_price:9,filterSearch:["All","Photography"],id:"AA01",collectionName:"Ne0n",collectionId:"A006"},{ArtName:"Art 2",path:"https://i.pinimg.com/564x/2c/de/e7/2cdee700cf98441f75bcce107dd0fdb8.jpg",EHT_price:1.33,filterSearch:["All","AI Models"],id:"AA02",collectionName:"White Autumn",collectionId:"A002"},{ArtName:"Art 3",path:"https://i.pinimg.com/564x/61/d2/39/61d2393e73cc00936a40ff74b592e4e5.jpg",EHT_price:1.22,filterSearch:["All","Photography"],id:"AA03",collectionName:"Black and White",collectionId:"A005"},{ArtName:"Art 4",path:"https://i.pinimg.com/736x/11/b7/ca/11b7ca27b1d4667ec8447f492533054f.jpg",EHT_price:1.33,filterSearch:["All","AI Models"],id:"AA04",collectionName:"White Autumn",collectionId:"A002"},{ArtName:"Art 5",path:"https://i.pinimg.com/564x/1a/be/61/1abe61cca775de877081b3b40376878e.jpg",EHT_price:1.33,filterSearch:["All","Photography"],id:"AA05",collectionName:"Marble",collectionId:"A003"},{ArtName:"Art 6",path:"https://i.pinimg.com/564x/1e/a9/fc/1ea9fc47bffc9c5449819e72c09e51d0.jpg",EHT_price:.14,filterSearch:["All","Photography"],id:"AA06",collectionName:"Marble",collectionId:"A003"},{ArtName:"Art 7",path:"https://i.pinimg.com/736x/21/96/8c/21968cc0f0115c3bf320fbfedccdae18.jpg",EHT_price:1,filterSearch:["All","AI Models"],id:"AA07",collectionName:"Gems",collectionId:"A008"},{ArtName:"Art 8",path:"https://i.pinimg.com/564x/2a/67/a2/2a67a239333704a0ccc67716a532613c.jpg",EHT_price:.86,filterSearch:["All","Photography"],id:"AA08",collectionName:"Marble",collectionId:"A003"},{ArtName:"Art 9",path:"https://i.pinimg.com/474x/31/32/f0/3132f0c5e6bb9aaeea4cf5cc85e3754d.jpg",EHT_price:2,filterSearch:["All","Photography"],id:"AA09",collectionName:"Black and White",collectionId:"A005"},{ArtName:"Art 10",path:"https://i.pinimg.com/736x/31/94/a0/3194a0469d02712959f78903806e57ca.jpg",EHT_price:2,filterSearch:["All","AI Models"],id:"BA00",collectionName:"Gems",collectionId:"A008"},{ArtName:"Art 11",path:"https://i.pinimg.com/564x/33/55/be/3355be72a9c42dfd4d995bf773c59bd1.jpg",EHT_price:1.29,filterSearch:["All","AI Models"],id:"BA01",collectionName:"Black Autumn",collectionId:"A001"},{ArtName:"Art 12",path:"https://i.pinimg.com/564x/37/35/de/3735de1ddf621a1444e8ad26bfb4f264.jpg",EHT_price:6,filterSearch:["All","AI Models"],id:"BA02",collectionName:"Crystal Eyes",collectionId:"A004"},{ArtName:"Art 13",path:"https://i.pinimg.com/236x/3d/1d/52/3d1d522036f4ca97d907d8bbdd339017.jpg",EHT_price:1,filterSearch:["All","AI Models"],id:"BA03",collectionName:"Liquify",collectionId:"A009"},{ArtName:"Art 14",path:"https://i.pinimg.com/236x/e7/ae/30/e7ae3074f6aed91d55ea0c674c905022.jpg",EHT_price:1.67,filterSearch:["All","Photography"],id:"BA04",collectionName:"Black and White",collectionId:"A005"},{ArtName:"Art 15",path:"https://i.pinimg.com/564x/40/2a/42/402a4215f49d77688e6531e8e45cd98d.jpg",EHT_price:.44,filterSearch:["All","AI Models"],id:"BA05"},{ArtName:"Art 16",path:"https://i.pinimg.com/564x/bd/19/87/bd198757bc0ff7d0c43fb920f0d38fd5.jpg",EHT_price:3.67,filterSearch:["All","Photography"],id:"BA06",collectionName:"Marble",collectionId:"A003"},{ArtName:"Art 17",path:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQbOgvdKzWqWllDBUFs6r-oFeM8KEsXxb5XRgzYBJ7gKkzmuSV4",EHT_price:2.11,filterSearch:["All","AI Models"],id:"BA07",collectionName:"Skulls",collectionId:"A007"},{ArtName:"Art 18",path:"https://i.pinimg.com/736x/53/c8/55/53c8559e872db16d8328c0f6380ae2f6.jpg",EHT_price:1.22,filterSearch:["All","AI Models"],id:"BA08",collectionName:"Liquify",collectionId:"A009"},{ArtName:"Art 19",path:"https://i.pinimg.com/736x/54/c6/4b/54c64b50fa9ffef4bd1ed10e06c6082b.jpg",EHT_price:2.2,filterSearch:["All","AI Models"],id:"BA09",collectionName:"Black Autumn",collectionId:"A001"},{ArtName:"Art 20",path:"https://i.pinimg.com/564x/1c/b5/9e/1cb59e0f3fbb15c2b484c21650bc6973.jpg",EHT_price:10,filterSearch:["All","Photography"],id:"CA00",collectionName:"Black and White",collectionId:"A005"},{ArtName:"Art 21",path:"https://i.pinimg.com/474x/5d/33/66/5d336666decc5df42b2b2fc89bfa7085.jpg",EHT_price:1,filterSearch:["All","AI Models"],id:"CA01",collectionName:"White Autumn",collectionId:"A002"},{ArtName:"Art 22",path:"https://i.pinimg.com/474x/e9/e3/80/e9e380add4200eabb3d7307307b650a7.jpg",EHT_price:2,filterSearch:["All","Photography"],id:"CA02",collectionName:"Black and White",collectionId:"A005"},{ArtName:"Art 23",path:"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQUoWH_1L5eawp-WA7_Ql04vESrCGKRBwho-wYY5_dzsEs3FyYU",EHT_price:2.4,filterSearch:["All","Photography"],id:"CA03",collectionName:"Black and White",collectionId:"A005"},{ArtName:"Art 24",path:"https://i.pinimg.com/736x/66/80/93/6680932bbbddd677be6a755eadb81c46.jpg",EHT_price:1,filterSearch:["All","Photography"],id:"CA04"},{ArtName:"Art 25",path:"https://i.pinimg.com/236x/41/82/40/41824098455ae808beaad6d06ff78415.jpg",EHT_price:2.29,filterSearch:["All","AI Models"],id:"CA05",collectionName:"Skulls",collectionId:"A007"},{ArtName:"Art 26",path:"https://i.pinimg.com/564x/88/81/66/888166dad3a1b857fb245eb60f84bf22.jpg",EHT_price:13,filterSearch:["All","Photography"],id:"CA06"},{ArtName:"Art 27",path:"https://i.pinimg.com/236x/ac/42/d4/ac42d4c25642d55e1a7d8e20633dcfb6.jpg",EHT_price:.14,filterSearch:["All","AI Models"],id:"CA07",collectionName:"Skulls",collectionId:"A007"},{ArtName:"Art 28",path:"https://i.pinimg.com/564x/ae/34/b8/ae34b81323675c7797955fc33827b45e.jpg",EHT_price:1.67,filterSearch:["All","AI Models"],id:"CA08",collectionName:"Marble",collectionId:"A003"},{ArtName:"Art 29",path:"https://i.pinimg.com/564x/b7/db/fc/b7dbfc8f61314049700ea402e8a959a5.jpg",EHT_price:1.33,filterSearch:["All","AI Models"],id:"CA09",collectionName:"Marble",collectionId:"A003"},{ArtName:"Art 30",path:"https://i.pinimg.com/564x/bb/d4/71/bbd471e29ddcc4768455afd0162d6654.jpg",EHT_price:.71,filterSearch:["All","AI Models"],id:"DB00",collectionName:"Crystal Eyes",collectionId:"A004"},{ArtName:"Art 31",path:"https://i.pinimg.com/736x/c0/9e/b7/c09eb7044c30c535cdbb3e41f3b2006d.jpg",EHT_price:1,filterSearch:["All","AI Models"],id:"DB01",collectionName:"Black Autumn",collectionId:"A001"},{ArtName:"Art 32",path:"https://i.pinimg.com/736x/c1/06/16/c10616706ae7157bff9e257938327d98.jpg",EHT_price:.6,filterSearch:["All","AI Models"],id:"DB02",collectionName:"White Autumn",collectionId:"A002"},{ArtName:"Art 33",path:"https://i.pinimg.com/564x/25/8f/f2/258ff22e9650581f21a9df4dc2ae2994.jpg",EHT_price:2.11,filterSearch:["All","Photography"],id:"DB03",collectionName:"Black and White",collectionId:"A005"},{ArtName:"Art 34",path:"https://i.pinimg.com/564x/cd/d1/3c/cdd13c59ada83d6f7edaa4a6014ab33a.jpg",EHT_price:2.29,filterSearch:["All","AI Models"],id:"DB04",collectionName:"Crystal Eyes",collectionId:"A004"},{ArtName:"Art 35",path:"https://i.pinimg.com/474x/d0/70/99/d0709970593327922ab03cba617ba2d4.jpg",EHT_price:17,filterSearch:["All","AI Models"],id:"DB05",collectionName:"White Autumn",collectionId:"A002"},{ArtName:"Art 36",path:"https://i.pinimg.com/736x/d2/f0/70/d2f07089f5829d4d04b9c1a6a78009c0.jpg",EHT_price:4,filterSearch:["All","AI Models"],id:"DB06"},{ArtName:"Art 37",path:"https://i.pinimg.com/564x/d4/5b/8c/d45b8ca9af0b9e8350857dce2e767773.jpg",EHT_price:.22,filterSearch:["All","AI Models"],id:"DB07",collectionName:"Marble",collectionId:"A003"},{ArtName:"Art 38",path:"https://i.pinimg.com/564x/d5/45/97/d54597febda44e5d047fa5284462f15f.jpg",EHT_price:2,filterSearch:["All","AI Models"],id:"DB08"},{ArtName:"Art 39",path:"https://i.pinimg.com/564x/da/31/be/da31be5885629cfa77b5168c3beb22b9.jpg",EHT_price:1,filterSearch:["All","AI Models"],id:"DB09",collectionName:"Skulls",collectionId:"A007"},{ArtName:"Art 40",path:"https://i.pinimg.com/736x/e8/8b/10/e88b1037a3e58764ece893bf82221828.jpg",EHT_price:11,filterSearch:["All","AI Models"],id:"EB00",collectionName:"Gems",collectionId:"A008"},{ArtName:"Art 41",path:"https://i.pinimg.com/736x/ec/51/4a/ec514af84c27a9b68c2481d3b538198e.jpg",EHT_price:2.14,filterSearch:["All","AI Models"],id:"EB01",collectionName:"White Autumn",collectionId:"A002"},{ArtName:"Art 42",path:"https://i.pinimg.com/564x/39/47/2e/39472e2ede7e5dc1e47bcd888925f82b.jpg",EHT_price:.57,filterSearch:["All","AI Models"],id:"EB02",collectionName:"Skulls",collectionId:"A007"},{ArtName:"Art 43",path:"https://i.pinimg.com/474x/f8/2b/68/f82b68c7a495910a65f15719300cfb92.jpg",EHT_price:2.8,filterSearch:["All","Photography"],id:"EB03",collectionName:"Black and White",collectionId:"A005"},{ArtName:"Art 44",path:"https://i.pinimg.com/564x/38/36/0c/38360cf95d27bca41432c25e0ab7463a.jpg",EHT_price:6,filterSearch:["All","AI Models"],id:"EB04"},{ArtName:"Art 45",path:"https://i.pinimg.com/474x/ba/44/6b/ba446b1ce72479c600f8f30bfa36a475.jpg",EHT_price:1.56,filterSearch:["All","Photography"],id:"EB05",collectionName:"Ne0n",collectionId:"A006"},{ArtName:"Art 46",path:"https://i.pinimg.com/474x/9a/98/69/9a9869b9b0d61f4c06724e251ec6180f.jpg",EHT_price:6,filterSearch:["All","Ai Models"],id:"EB06",collectionName:"Ne0n",collectionId:"A006"},{ArtName:"Art 47",path:"https://i.pinimg.com/236x/39/68/7e/39687eadd445877e655550b18b61b40d.jpg",EHT_price:.6,filterSearch:["All","Photography"],id:"EB07",collectionName:"Ne0n",collectionId:"A006"},{ArtName:"Art 48",path:"https://i.pinimg.com/236x/9a/08/26/9a0826cd566ddd99d4dc0717d080f2e9.jpg",EHT_price:1.8,filterSearch:["All","AI Models"],id:"EB08",collectionName:"Ne0n",collectionId:"A006"},{ArtName:"Art 49",path:"https://i.pinimg.com/736x/52/5a/d5/525ad550d762946af364ce3018c1afca.jpg",EHT_price:1.2,filterSearch:["All","Photography"],id:"EB09"},{ArtName:"Art 50",path:"https://i.pinimg.com/236x/40/1e/33/401e33de9c571ae12928b8498895760c.jpg",EHT_price:1.57,filterSearch:["All","Photography"],id:"FB00"},{ArtName:"Art 51",path:"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQ6k0A3Hsl2IzjlWfJNDKD_Nj1HOcyDjxw5aw-l6XG8bxg9eTbv",EHT_price:1.67,filterSearch:["All","AI Models"],id:"FB01"},{ArtName:"Art 52",path:"https://i.pinimg.com/564x/61/98/fb/6198fb92c796d45d5157ae3cc9bcbcc6.jpg",EHT_price:.33,filterSearch:["All","AI Models"],id:"FB02"},{ArtName:"Art 53",path:"https://i.pinimg.com/564x/f0/0b/f2/f00bf2fde784dde70591e62eb428df2a.jpg",EHT_price:5.67,filterSearch:["All","AI Models"],id:"FB03"},{ArtName:"Art 54",path:"https://i.pinimg.com/736x/6d/dd/38/6ddd381abb86e0d1e60f1298a41600a4.jpg",EHT_price:.2,filterSearch:["All","Photography"],id:"FB04"},{ArtName:"Art 55",path:"https://i.pinimg.com/236x/e2/f8/d0/e2f8d051833eae818a0b7a794dac52ba.jpg",EHT_price:2.4,filterSearch:["All","Photography"],id:"FB05",collectionName:"Ne0n",collectionId:"A006"},{ArtName:"Art 56",path:"https://i.pinimg.com/474x/d6/20/22/d620220e175fbd975d5e9a6b88576498.jpg",EHT_price:5.67,filterSearch:["All","AI Models"],id:"FB06",collectionName:"Ne0n",collectionId:"A006"},{ArtName:"Art 57",path:"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRVtzGWKVUEv_S1cac_V6xwXgEsJAvQHYg5rkCsXRN6JN5fd-lM",EHT_price:1,filterSearch:["All","AI Models"],id:"FB07"},{ArtName:"Art 58",path:"https://i.pinimg.com/236x/dc/e3/a7/dce3a7182cd3e5a4050b4b0fd14e1714.jpg",EHT_price:1,filterSearch:["All","AI Models"],id:"FB08"},{ArtName:"Art 59",path:"https://i.pinimg.com/474x/38/80/87/388087a92bd19cb85b90c5e0e8fb182e.jpg",EHT_price:.33,filterSearch:["All","Photography"],id:"FB09"},{ArtName:"Art 60",path:"https://i.pinimg.com/236x/30/4e/fc/304efcf1dc088d2e3202d4338b4d4be5.jpg",EHT_price:3,filterSearch:["All","AI Models"],id:"GB00"},{ArtName:"Art 61",path:"https://i.pinimg.com/236x/d8/6f/7c/d86f7ceaee4204f3eedbcf1cee5b22e9.jpg",EHT_price:5,filterSearch:["All","Photography"],id:"GB01",collectionName:"Ne0n",collectionId:"A006"},{ArtName:"Art 62",path:"https://i.pinimg.com/236x/7c/c4/9e/7cc49e291f96dfdf068799ca29dd2d85.jpg",EHT_price:.11,filterSearch:["All","AI Models"],id:"GB02",collectionName:"Gems",collectionId:"A008"},{ArtName:"Art 63",path:"https://i.pinimg.com/236x/0f/a9/0b/0fa90b20d8232e4cd6aa75cc44701bc2.jpg",EHT_price:.11,filterSearch:["All","AI Models"],id:"GB04",collectionName:"Gems",collectionId:"A008"},{ArtName:"Art 64",path:"https://i.pinimg.com/236x/a8/69/94/a869945debda6938c24f79c862ee8915.jpg",EHT_price:.11,filterSearch:["All","AI Models"],id:"GB05",collectionName:"Gems",collectionId:"A008"},{ArtName:"Art 65",path:"https://i.pinimg.com/236x/6a/4d/92/6a4d92a0549fa51bb47292e6d3bb4cca.jpg",EHT_price:.11,filterSearch:["All","AI Models"],id:"GB06",collectionName:"Gems",collectionId:"A008"},{ArtName:"Art 66",path:"https://i.pinimg.com/564x/13/f7/ec/13f7ec153074c52c34ba781fc4ab8e18.jpg",EHT_price:.11,filterSearch:["All","AI Models"],id:"GB07",collectionName:"Liquify",collectionId:"A009"},{ArtName:"Art 67",path:"https://i.pinimg.com/236x/78/97/21/789721d902a24e29b8a4d0b35398ad5e.jpg",EHT_price:1,filterSearch:["All","AI Models"],id:"GB08"},{ArtName:"Art 68",path:"https://i.pinimg.com/474x/1a/9e/45/1a9e45e07b48e54699d7531da12ee94f.jpg",EHT_price:1.56,filterSearch:["All","AI Models"],id:"GB09",collectionName:"Ne0n",collectionId:"A006"},{ArtName:"Art 69",path:"https://i.pinimg.com/564x/94/bd/2d/94bd2dc76c177078406bf5c583624009.jpg",EHT_price:.11,filterSearch:["All","AI Models"],id:"GB03"}];function vP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ft(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vP(Object(t),!0).forEach(function(i){Br(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vP(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function J_(n){"@babel/helpers - typeof";return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J_(n)}function mZ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function gZ(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function AZ(n,e,t){return e&&gZ(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Br(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JI(n,e){return yZ(n)||_Z(n,e)||$N(n,e)||wZ()}function ev(n){return vZ(n)||xZ(n)||$N(n)||EZ()}function vZ(n){if(Array.isArray(n))return Hb(n)}function yZ(n){if(Array.isArray(n))return n}function xZ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _Z(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function $N(n,e){if(n){if(typeof n=="string")return Hb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Hb(n,e)}}function Hb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function EZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yP=function(){},KI={},ZN={},eG=null,tG={mark:yP,measure:yP};try{typeof window<"u"&&(KI=window),typeof document<"u"&&(ZN=document),typeof MutationObserver<"u"&&(eG=MutationObserver),typeof performance<"u"&&(tG=performance)}catch{}var SZ=KI.navigator||{},xP=SZ.userAgent,_P=xP===void 0?"":xP,tf=KI,Mi=ZN,EP=eG,ky=tG;tf.document;var Hc=!!Mi.documentElement&&!!Mi.head&&typeof Mi.addEventListener=="function"&&typeof Mi.createElement=="function",nG=~_P.indexOf("MSIE")||~_P.indexOf("Trident/"),Ny,Gy,Hy,Qy,Vy,Dc="___FONT_AWESOME___",Qb=16,iG="fa",rG="svg-inline--fa",kh="data-fa-i2svg",Vb="data-fa-pseudo-element",CZ="data-fa-pseudo-element-pending",$I="data-prefix",ZI="data-icon",wP="fontawesome-i2svg",bZ="async",MZ=["HTML","HEAD","STYLE","SCRIPT"],sG=function(){try{return!0}catch{return!1}}(),Si="classic",Ki="sharp",eT=[Si,Ki];function tv(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[Si]}})}var vA=tv((Ny={},Br(Ny,Si,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),Br(Ny,Ki,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Ny)),yA=tv((Gy={},Br(Gy,Si,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Br(Gy,Ki,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Gy)),xA=tv((Hy={},Br(Hy,Si,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Br(Hy,Ki,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Hy)),IZ=tv((Qy={},Br(Qy,Si,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Br(Qy,Ki,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Qy)),TZ=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,oG="fa-layers-text",BZ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,PZ=tv((Vy={},Br(Vy,Si,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Br(Vy,Ki,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),Vy)),aG=[1,2,3,4,5,6,7,8,9,10],RZ=aG.concat([11,12,13,14,15,16,17,18,19,20]),DZ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],mh={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},_A=new Set;Object.keys(yA[Si]).map(_A.add.bind(_A));Object.keys(yA[Ki]).map(_A.add.bind(_A));var LZ=[].concat(eT,ev(_A),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",mh.GROUP,mh.SWAP_OPACITY,mh.PRIMARY,mh.SECONDARY]).concat(aG.map(function(n){return"".concat(n,"x")})).concat(RZ.map(function(n){return"w-".concat(n)})),Bg=tf.FontAwesomeConfig||{};function FZ(n){var e=Mi.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}function OZ(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}if(Mi&&typeof Mi.querySelector=="function"){var zZ=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];zZ.forEach(function(n){var e=JI(n,2),t=e[0],i=e[1],r=OZ(FZ(t));r!=null&&(Bg[i]=r)})}var lG={styleDefault:"solid",familyDefault:"classic",cssPrefix:iG,replacementClass:rG,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Bg.familyPrefix&&(Bg.cssPrefix=Bg.familyPrefix);var km=Ft(Ft({},lG),Bg);km.autoReplaceSvg||(km.observeMutations=!1);var Qt={};Object.keys(lG).forEach(function(n){Object.defineProperty(Qt,n,{enumerable:!0,set:function(t){km[n]=t,Pg.forEach(function(i){return i(Qt)})},get:function(){return km[n]}})});Object.defineProperty(Qt,"familyPrefix",{enumerable:!0,set:function(e){km.cssPrefix=e,Pg.forEach(function(t){return t(Qt)})},get:function(){return km.cssPrefix}});tf.FontAwesomeConfig=Qt;var Pg=[];function UZ(n){return Pg.push(n),function(){Pg.splice(Pg.indexOf(n),1)}}var iu=Qb,Rl={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function kZ(n){if(!(!n||!Hc)){var e=Mi.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=Mi.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Mi.head.insertBefore(e,i),n}}var NZ="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function EA(){for(var n=12,e="";n-- >0;)e+=NZ[Math.random()*62|0];return e}function s0(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function tT(n){return n.classList?s0(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function cG(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function GZ(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(cG(n[t]),'" ')},"").trim()}function eE(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function nT(n){return n.size!==Rl.size||n.x!==Rl.x||n.y!==Rl.y||n.rotate!==Rl.rotate||n.flipX||n.flipY}function HZ(n){var e=n.transform,t=n.containerWidth,i=n.iconWidth,r={transform:"translate(".concat(t/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function QZ(n){var e=n.transform,t=n.width,i=t===void 0?Qb:t,r=n.height,s=r===void 0?Qb:r,o=n.startCentered,a=o===void 0?!1:o,l="";return a&&nG?l+="translate(".concat(e.x/iu-i/2,"em, ").concat(e.y/iu-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/iu,"em), calc(-50% + ").concat(e.y/iu,"em)) "):l+="translate(".concat(e.x/iu,"em, ").concat(e.y/iu,"em) "),l+="scale(".concat(e.size/iu*(e.flipX?-1:1),", ").concat(e.size/iu*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var VZ=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function uG(){var n=iG,e=rG,t=Qt.cssPrefix,i=Qt.replacementClass,r=VZ;if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return r}var SP=!1;function eS(){Qt.autoAddCss&&!SP&&(kZ(uG()),SP=!0)}var jZ={mixout:function(){return{dom:{css:uG,insertCss:eS}}},hooks:function(){return{beforeDOMElementCreation:function(){eS()},beforeI2svg:function(){eS()}}}},Lc=tf||{};Lc[Dc]||(Lc[Dc]={});Lc[Dc].styles||(Lc[Dc].styles={});Lc[Dc].hooks||(Lc[Dc].hooks={});Lc[Dc].shims||(Lc[Dc].shims=[]);var Va=Lc[Dc],fG=[],WZ=function n(){Mi.removeEventListener("DOMContentLoaded",n),K_=1,fG.map(function(e){return e()})},K_=!1;Hc&&(K_=(Mi.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Mi.readyState),K_||Mi.addEventListener("DOMContentLoaded",WZ));function YZ(n){Hc&&(K_?setTimeout(n,0):fG.push(n))}function nv(n){var e=n.tag,t=n.attributes,i=t===void 0?{}:t,r=n.children,s=r===void 0?[]:r;return typeof n=="string"?cG(n):"<".concat(e," ").concat(GZ(i),">").concat(s.map(nv).join(""),"</").concat(e,">")}function CP(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}var tS=function(e,t,i,r){var s=Object.keys(e),o=s.length,a=t,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function XZ(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),t--)}else e.push(r)}return e}function jb(n){var e=XZ(n);return e.length===1?e[0].toString(16):null}function qZ(n,e){var t=n.length,i=n.charCodeAt(e),r;return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function bP(n){return Object.keys(n).reduce(function(e,t){var i=n[t],r=!!i.icon;return r?e[i.iconName]=i.icon:e[t]=i,e},{})}function Wb(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=t.skipHooks,r=i===void 0?!1:i,s=bP(e);typeof Va.hooks.addPack=="function"&&!r?Va.hooks.addPack(n,bP(e)):Va.styles[n]=Ft(Ft({},Va.styles[n]||{}),s),n==="fas"&&Wb("fa",e)}var jy,Wy,Yy,rm=Va.styles,JZ=Va.shims,KZ=(jy={},Br(jy,Si,Object.values(xA[Si])),Br(jy,Ki,Object.values(xA[Ki])),jy),iT=null,hG={},dG={},pG={},mG={},gG={},$Z=(Wy={},Br(Wy,Si,Object.keys(vA[Si])),Br(Wy,Ki,Object.keys(vA[Ki])),Wy);function ZZ(n){return~LZ.indexOf(n)}function eee(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i===n&&r!==""&&!ZZ(r)?r:null}var AG=function(){var e=function(s){return tS(rm,function(o,a,l){return o[l]=tS(a,s,{}),o},{})};hG=e(function(r,s,o){if(s[3]&&(r[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){r[l.toString(16)]=o})}return r}),dG=e(function(r,s,o){if(r[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){r[l]=o})}return r}),gG=e(function(r,s,o){var a=s[2];return r[o]=o,a.forEach(function(l){r[l]=o}),r});var t="far"in rm||Qt.autoFetchSvg,i=tS(JZ,function(r,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!t&&(a="fas"),typeof o=="string"&&(r.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(r.unicodes[o.toString(16)]={prefix:a,iconName:l}),r},{names:{},unicodes:{}});pG=i.names,mG=i.unicodes,iT=tE(Qt.styleDefault,{family:Qt.familyDefault})};UZ(function(n){iT=tE(n.styleDefault,{family:Qt.familyDefault})});AG();function rT(n,e){return(hG[n]||{})[e]}function tee(n,e){return(dG[n]||{})[e]}function gh(n,e){return(gG[n]||{})[e]}function vG(n){return pG[n]||{prefix:null,iconName:null}}function nee(n){var e=mG[n],t=rT("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function nf(){return iT}var sT=function(){return{prefix:null,iconName:null,rest:[]}};function tE(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.family,i=t===void 0?Si:t,r=vA[i][n],s=yA[i][n]||yA[i][r],o=n in Va.styles?n:null;return s||o||null}var MP=(Yy={},Br(Yy,Si,Object.keys(xA[Si])),Br(Yy,Ki,Object.keys(xA[Ki])),Yy);function nE(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,r=i===void 0?!1:i,s=(e={},Br(e,Si,"".concat(Qt.cssPrefix,"-").concat(Si)),Br(e,Ki,"".concat(Qt.cssPrefix,"-").concat(Ki)),e),o=null,a=Si;(n.includes(s[Si])||n.some(function(c){return MP[Si].includes(c)}))&&(a=Si),(n.includes(s[Ki])||n.some(function(c){return MP[Ki].includes(c)}))&&(a=Ki);var l=n.reduce(function(c,u){var f=eee(Qt.cssPrefix,u);if(rm[u]?(u=KZ[a].includes(u)?IZ[a][u]:u,o=u,c.prefix=u):$Z[a].indexOf(u)>-1?(o=u,c.prefix=tE(u,{family:a})):f?c.iconName=f:u!==Qt.replacementClass&&u!==s[Si]&&u!==s[Ki]&&c.rest.push(u),!r&&c.prefix&&c.iconName){var h=o==="fa"?vG(c.iconName):{},d=gh(c.prefix,c.iconName);h.prefix&&(o=null),c.iconName=h.iconName||d||c.iconName,c.prefix=h.prefix||c.prefix,c.prefix==="far"&&!rm.far&&rm.fas&&!Qt.autoFetchSvg&&(c.prefix="fas")}return c},sT());return(n.includes("fa-brands")||n.includes("fab"))&&(l.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===Ki&&(rm.fass||Qt.autoFetchSvg)&&(l.prefix="fass",l.iconName=gh(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||o==="fa")&&(l.prefix=nf()||"fas"),l}var iee=function(){function n(){mZ(this,n),this.definitions={}}return AZ(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=Ft(Ft({},t.definitions[a]||{}),o[a]),Wb(a,o[a]);var l=xA[Si][a];l&&Wb(l,o[a]),AG()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];t[a]||(t[a]={}),u.length>0&&u.forEach(function(f){typeof f=="string"&&(t[a][f]=c)}),t[a][l]=c}),t}}]),n}(),IP=[],sm={},vm={},ree=Object.keys(vm);function see(n,e){var t=e.mixoutsTo;return IP=n,sm={},Object.keys(vm).forEach(function(i){ree.indexOf(i)===-1&&delete vm[i]}),IP.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(o){typeof r[o]=="function"&&(t[o]=r[o]),J_(r[o])==="object"&&Object.keys(r[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=r[o][a]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(o){sm[o]||(sm[o]=[]),sm[o].push(s[o])})}i.provides&&i.provides(vm)}),t}function Yb(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=sm[n]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function Nh(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=sm[n]||[];r.forEach(function(s){s.apply(null,t)})}function Fc(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return vm[n]?vm[n].apply(null,e):void 0}function Xb(n){n.prefix==="fa"&&(n.prefix="fas");var e=n.iconName,t=n.prefix||nf();if(e)return e=gh(t,e)||e,CP(yG.definitions,t,e)||CP(Va.styles,t,e)}var yG=new iee,oee=function(){Qt.autoReplaceSvg=!1,Qt.observeMutations=!1,Nh("noAuto")},aee={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Hc?(Nh("beforeI2svg",e),Fc("pseudoElements2svg",e),Fc("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot;Qt.autoReplaceSvg===!1&&(Qt.autoReplaceSvg=!0),Qt.observeMutations=!0,YZ(function(){cee({autoReplaceSvgRoot:t}),Nh("watch",e)})}},lee={icon:function(e){if(e===null)return null;if(J_(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:gh(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],i=tE(e[0]);return{prefix:i,iconName:gh(i,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(Qt.cssPrefix,"-"))>-1||e.match(TZ))){var r=nE(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||nf(),iconName:gh(r.prefix,r.iconName)||r.iconName}}if(typeof e=="string"){var s=nf();return{prefix:s,iconName:gh(s,e)||e}}}},Bo={noAuto:oee,config:Qt,dom:aee,parse:lee,library:yG,findIconDefinition:Xb,toHtml:nv},cee=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot,i=t===void 0?Mi:t;(Object.keys(Va.styles).length>0||Qt.autoFetchSvg)&&Hc&&Qt.autoReplaceSvg&&Bo.dom.i2svg({node:i})};function iE(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return nv(i)})}}),Object.defineProperty(n,"node",{get:function(){if(Hc){var i=Mi.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function uee(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,o=n.transform;if(nT(o)&&t.found&&!i.found){var a=t.width,l=t.height,c={x:a/l/2,y:.5};r.style=eE(Ft(Ft({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function fee(n){var e=n.prefix,t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,o=s===!0?"".concat(e,"-").concat(Qt.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ft(Ft({},r),{},{id:o}),children:i}]}]}function oT(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,o=n.transform,a=n.symbol,l=n.title,c=n.maskId,u=n.titleId,f=n.extra,h=n.watchable,d=h===void 0?!1:h,m=i.found?i:t,g=m.width,v=m.height,p=r==="fak",A=[Qt.replacementClass,s?"".concat(Qt.cssPrefix,"-").concat(s):""].filter(function(I){return f.classes.indexOf(I)===-1}).filter(function(I){return I!==""||!!I}).concat(f.classes).join(" "),y={children:[],attributes:Ft(Ft({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:A,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(v)})},w=p&&!~f.classes.indexOf("fa-fw")?{width:"".concat(g/v*16*.0625,"em")}:{};d&&(y.attributes[kh]=""),l&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(u||EA())},children:[l]}),delete y.attributes.title);var S=Ft(Ft({},y),{},{prefix:r,iconName:s,main:t,mask:i,maskId:c,transform:o,symbol:a,styles:Ft(Ft({},w),f.styles)}),C=i.found&&t.found?Fc("generateAbstractMask",S)||{children:[],attributes:{}}:Fc("generateAbstractIcon",S)||{children:[],attributes:{}},b=C.children,M=C.attributes;return S.children=b,S.attributes=M,a?fee(S):uee(S)}function TP(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,o=n.extra,a=n.watchable,l=a===void 0?!1:a,c=Ft(Ft(Ft({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[kh]="");var u=Ft({},o.styles);nT(r)&&(u.transform=QZ({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var f=eE(u);f.length>0&&(c.style=f);var h=[];return h.push({tag:"span",attributes:c,children:[e]}),s&&h.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),h}function hee(n){var e=n.content,t=n.title,i=n.extra,r=Ft(Ft(Ft({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=eE(i.styles);s.length>0&&(r.style=s);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var nS=Va.styles;function qb(n){var e=n[0],t=n[1],i=n.slice(4),r=JI(i,1),s=r[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(Qt.cssPrefix,"-").concat(mh.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Qt.cssPrefix,"-").concat(mh.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Qt.cssPrefix,"-").concat(mh.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:t,icon:o}}var dee={found:!1,width:512,height:512};function pee(n,e){!sG&&!Qt.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))}function Jb(n,e){var t=e;return e==="fa"&&Qt.styleDefault!==null&&(e=nf()),new Promise(function(i,r){if(Fc("missingIconAbstract"),t==="fa"){var s=vG(n)||{};n=s.iconName||n,e=s.prefix||e}if(n&&e&&nS[e]&&nS[e][n]){var o=nS[e][n];return i(qb(o))}pee(n,e),i(Ft(Ft({},dee),{},{icon:Qt.showMissingIcons&&n?Fc("missingIconAbstract")||{}:{}}))})}var BP=function(){},Kb=Qt.measurePerformance&&ky&&ky.mark&&ky.measure?ky:{mark:BP,measure:BP},ug='FA "6.5.2"',mee=function(e){return Kb.mark("".concat(ug," ").concat(e," begins")),function(){return xG(e)}},xG=function(e){Kb.mark("".concat(ug," ").concat(e," ends")),Kb.measure("".concat(ug," ").concat(e),"".concat(ug," ").concat(e," begins"),"".concat(ug," ").concat(e," ends"))},aT={begin:mee,end:xG},i_=function(){};function PP(n){var e=n.getAttribute?n.getAttribute(kh):null;return typeof e=="string"}function gee(n){var e=n.getAttribute?n.getAttribute($I):null,t=n.getAttribute?n.getAttribute(ZI):null;return e&&t}function Aee(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(Qt.replacementClass)}function vee(){if(Qt.autoReplaceSvg===!0)return r_.replace;var n=r_[Qt.autoReplaceSvg];return n||r_.replace}function yee(n){return Mi.createElementNS("http://www.w3.org/2000/svg",n)}function xee(n){return Mi.createElement(n)}function _G(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.ceFn,i=t===void 0?n.tag==="svg"?yee:xee:t;if(typeof n=="string")return Mi.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){r.setAttribute(o,n.attributes[o])});var s=n.children||[];return s.forEach(function(o){r.appendChild(_G(o,{ceFn:i}))}),r}function _ee(n){var e=" ".concat(n.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var r_={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(_G(r),t)}),t.getAttribute(kh)===null&&Qt.keepOriginalSource){var i=Mi.createComment(_ee(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~tT(t).indexOf(Qt.replacementClass))return r_.replace(e);var r=new RegExp("".concat(Qt.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(a,l){return l===Qt.replacementClass||l.match(r)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var o=i.map(function(a){return nv(a)}).join(`
`);t.setAttribute(kh,""),t.innerHTML=o}};function RP(n){n()}function EG(n,e){var t=typeof e=="function"?e:i_;if(n.length===0)t();else{var i=RP;Qt.mutateApproach===bZ&&(i=tf.requestAnimationFrame||RP),i(function(){var r=vee(),s=aT.begin("mutate");n.map(r),s(),t()})}}var lT=!1;function wG(){lT=!0}function $b(){lT=!1}var $_=null;function DP(n){if(EP&&Qt.observeMutations){var e=n.treeCallback,t=e===void 0?i_:e,i=n.nodeCallback,r=i===void 0?i_:i,s=n.pseudoElementsCallback,o=s===void 0?i_:s,a=n.observeMutationsRoot,l=a===void 0?Mi:a;$_=new EP(function(c){if(!lT){var u=nf();s0(c).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!PP(f.addedNodes[0])&&(Qt.searchPseudoElements&&o(f.target),t(f.target)),f.type==="attributes"&&f.target.parentNode&&Qt.searchPseudoElements&&o(f.target.parentNode),f.type==="attributes"&&PP(f.target)&&~DZ.indexOf(f.attributeName))if(f.attributeName==="class"&&gee(f.target)){var h=nE(tT(f.target)),d=h.prefix,m=h.iconName;f.target.setAttribute($I,d||u),m&&f.target.setAttribute(ZI,m)}else Aee(f.target)&&r(f.target)})}}),Hc&&$_.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Eee(){$_&&$_.disconnect()}function wee(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}function See(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=n.innerText!==void 0?n.innerText.trim():"",r=nE(tT(n));return r.prefix||(r.prefix=nf()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=tee(r.prefix,n.innerText)||rT(r.prefix,jb(n.innerText))),!r.iconName&&Qt.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function Cee(n){var e=s0(n.attributes).reduce(function(r,s){return r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return Qt.autoA11y&&(t?e["aria-labelledby"]="".concat(Qt.replacementClass,"-title-").concat(i||EA()):(e["aria-hidden"]="true",e.focusable="false")),e}function bee(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Rl,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function LP(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},t=See(n),i=t.iconName,r=t.prefix,s=t.rest,o=Cee(n),a=Yb("parseNodeAttributes",{},n),l=e.styleParser?wee(n):[];return Ft({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:Rl,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var Mee=Va.styles;function SG(n){var e=Qt.autoReplaceSvg==="nest"?LP(n,{styleParser:!1}):LP(n);return~e.extra.classes.indexOf(oG)?Fc("generateLayersText",n,e):Fc("generateSvgReplacementMutation",n,e)}var rf=new Set;eT.map(function(n){rf.add("fa-".concat(n))});Object.keys(vA[Si]).map(rf.add.bind(rf));Object.keys(vA[Ki]).map(rf.add.bind(rf));rf=ev(rf);function FP(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Hc)return Promise.resolve();var t=Mi.documentElement.classList,i=function(f){return t.add("".concat(wP,"-").concat(f))},r=function(f){return t.remove("".concat(wP,"-").concat(f))},s=Qt.autoFetchSvg?rf:eT.map(function(u){return"fa-".concat(u)}).concat(Object.keys(Mee));s.includes("fa")||s.push("fa");var o=[".".concat(oG,":not([").concat(kh,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(kh,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=s0(n.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();var l=aT.begin("onTree"),c=a.reduce(function(u,f){try{var h=SG(f);h&&u.push(h)}catch(d){sG||d.name==="MissingIcon"&&console.error(d)}return u},[]);return new Promise(function(u,f){Promise.all(c).then(function(h){EG(h,function(){i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(h){l(),f(h)})})}function Iee(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;SG(n).then(function(t){t&&EG([t],e)})}function Tee(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(e||{}).icon?e:Xb(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:Xb(r||{})),n(i,Ft(Ft({},t),{},{mask:r}))}}var Bee=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transform,r=i===void 0?Rl:i,s=t.symbol,o=s===void 0?!1:s,a=t.mask,l=a===void 0?null:a,c=t.maskId,u=c===void 0?null:c,f=t.title,h=f===void 0?null:f,d=t.titleId,m=d===void 0?null:d,g=t.classes,v=g===void 0?[]:g,p=t.attributes,A=p===void 0?{}:p,y=t.styles,w=y===void 0?{}:y;if(e){var S=e.prefix,C=e.iconName,b=e.icon;return iE(Ft({type:"icon"},e),function(){return Nh("beforeDOMElementCreation",{iconDefinition:e,params:t}),Qt.autoA11y&&(h?A["aria-labelledby"]="".concat(Qt.replacementClass,"-title-").concat(m||EA()):(A["aria-hidden"]="true",A.focusable="false")),oT({icons:{main:qb(b),mask:l?qb(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:S,iconName:C,transform:Ft(Ft({},Rl),r),symbol:o,title:h,maskId:u,titleId:m,extra:{attributes:A,styles:w,classes:v}})})}},Pee={mixout:function(){return{icon:Tee(Bee)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=FP,t.nodeCallback=Iee,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,r=i===void 0?Mi:i,s=t.callback,o=s===void 0?function(){}:s;return FP(r,o)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,o=i.titleId,a=i.prefix,l=i.transform,c=i.symbol,u=i.mask,f=i.maskId,h=i.extra;return new Promise(function(d,m){Promise.all([Jb(r,a),u.iconName?Jb(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(g){var v=JI(g,2),p=v[0],A=v[1];d([t,oT({icons:{main:p,mask:A},prefix:a,iconName:r,transform:l,symbol:c,maskId:f,title:s,titleId:o,extra:h,watchable:!0})])}).catch(m)})},e.generateAbstractIcon=function(t){var i=t.children,r=t.attributes,s=t.main,o=t.transform,a=t.styles,l=eE(a);l.length>0&&(r.style=l);var c;return nT(o)&&(c=Fc("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),i.push(c||s.icon),{children:i,attributes:r}}}},Ree={mixout:function(){return{layer:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.classes,s=r===void 0?[]:r;return iE({type:"layer"},function(){Nh("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Qt.cssPrefix,"-layers")].concat(ev(s)).join(" ")},children:o}]})}}}},Dee={mixout:function(){return{counter:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.title,s=r===void 0?null:r,o=i.classes,a=o===void 0?[]:o,l=i.attributes,c=l===void 0?{}:l,u=i.styles,f=u===void 0?{}:u;return iE({type:"counter",content:t},function(){return Nh("beforeDOMElementCreation",{content:t,params:i}),hee({content:t.toString(),title:s,extra:{attributes:c,styles:f,classes:["".concat(Qt.cssPrefix,"-layers-counter")].concat(ev(a))}})})}}}},Lee={mixout:function(){return{text:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.transform,s=r===void 0?Rl:r,o=i.title,a=o===void 0?null:o,l=i.classes,c=l===void 0?[]:l,u=i.attributes,f=u===void 0?{}:u,h=i.styles,d=h===void 0?{}:h;return iE({type:"text",content:t},function(){return Nh("beforeDOMElementCreation",{content:t,params:i}),TP({content:t,transform:Ft(Ft({},Rl),s),title:a,extra:{attributes:f,styles:d,classes:["".concat(Qt.cssPrefix,"-layers-text")].concat(ev(c))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,o=i.extra,a=null,l=null;if(nG){var c=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/c,l=u.height/c}return Qt.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,TP({content:t.innerHTML,width:a,height:l,transform:s,title:r,extra:o,watchable:!0})])}}},Fee=new RegExp('"',"ug"),OP=[1105920,1112319];function Oee(n){var e=n.replace(Fee,""),t=qZ(e,0),i=t>=OP[0]&&t<=OP[1],r=e.length===2?e[0]===e[1]:!1;return{value:jb(r?e[0]:e),isSecondary:i||r}}function zP(n,e){var t="".concat(CZ).concat(e.replace(":","-"));return new Promise(function(i,r){if(n.getAttribute(t)!==null)return i();var s=s0(n.children),o=s.filter(function(b){return b.getAttribute(Vb)===e})[0],a=tf.getComputedStyle(n,e),l=a.getPropertyValue("font-family").match(BZ),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return n.removeChild(o),i();if(l&&u!=="none"&&u!==""){var f=a.getPropertyValue("content"),h=~["Sharp"].indexOf(l[2])?Ki:Si,d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?yA[h][l[2].toLowerCase()]:PZ[h][c],m=Oee(f),g=m.value,v=m.isSecondary,p=l[0].startsWith("FontAwesome"),A=rT(d,g),y=A;if(p){var w=nee(g);w.iconName&&w.prefix&&(A=w.iconName,d=w.prefix)}if(A&&!v&&(!o||o.getAttribute($I)!==d||o.getAttribute(ZI)!==y)){n.setAttribute(t,y),o&&n.removeChild(o);var S=bee(),C=S.extra;C.attributes[Vb]=e,Jb(A,d).then(function(b){var M=oT(Ft(Ft({},S),{},{icons:{main:b,mask:sT()},prefix:d,iconName:y,extra:C,watchable:!0})),I=Mi.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?n.insertBefore(I,n.firstChild):n.appendChild(I),I.outerHTML=M.map(function(T){return nv(T)}).join(`
`),n.removeAttribute(t),i()}).catch(r)}else i()}else i()})}function zee(n){return Promise.all([zP(n,"::before"),zP(n,"::after")])}function Uee(n){return n.parentNode!==document.head&&!~MZ.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(Vb)&&(!n.parentNode||n.parentNode.tagName!=="svg")}function UP(n){if(Hc)return new Promise(function(e,t){var i=s0(n.querySelectorAll("*")).filter(Uee).map(zee),r=aT.begin("searchPseudoElements");wG(),Promise.all(i).then(function(){r(),$b(),e()}).catch(function(){r(),$b(),t()})})}var kee={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=UP,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node,r=i===void 0?Mi:i;Qt.searchPseudoElements&&UP(r)}}},kP=!1,Nee={mixout:function(){return{dom:{unwatch:function(){wG(),kP=!0}}}},hooks:function(){return{bootstrap:function(){DP(Yb("mutationObserverCallbacks",{}))},noAuto:function(){Eee()},watch:function(t){var i=t.observeMutationsRoot;kP?$b():DP(Yb("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},NP=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return i.flipX=!0,i;if(o&&a==="v")return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a;break}return i},t)},Gee={mixout:function(){return{parse:{transform:function(t){return NP(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=NP(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,s=t.containerWidth,o=t.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(r.x*32,", ").concat(r.y*32,") "),c="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),f={transform:"".concat(l," ").concat(c," ").concat(u)},h={transform:"translate(".concat(o/2*-1," -256)")},d={outer:a,inner:f,path:h};return{tag:"g",attributes:Ft({},d.outer),children:[{tag:"g",attributes:Ft({},d.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:Ft(Ft({},i.icon.attributes),d.path)}]}]}}}},iS={x:0,y:0,width:"100%",height:"100%"};function GP(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function Hee(n){return n.tag==="g"?n.children:[n]}var Qee={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?nE(r.split(" ").map(function(o){return o.trim()})):sT();return s.prefix||(s.prefix=nf()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var i=t.children,r=t.attributes,s=t.main,o=t.mask,a=t.maskId,l=t.transform,c=s.width,u=s.icon,f=o.width,h=o.icon,d=HZ({transform:l,containerWidth:f,iconWidth:c}),m={tag:"rect",attributes:Ft(Ft({},iS),{},{fill:"white"})},g=u.children?{children:u.children.map(GP)}:{},v={tag:"g",attributes:Ft({},d.inner),children:[GP(Ft({tag:u.tag,attributes:Ft(Ft({},u.attributes),d.path)},g))]},p={tag:"g",attributes:Ft({},d.outer),children:[v]},A="mask-".concat(a||EA()),y="clip-".concat(a||EA()),w={tag:"mask",attributes:Ft(Ft({},iS),{},{id:A,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[m,p]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:Hee(h)},w]};return i.push(S,{tag:"rect",attributes:Ft({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(A,")")},iS)}),{children:i,attributes:r}}}},Vee={provides:function(e){var t=!1;tf.matchMedia&&(t=tf.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:Ft(Ft({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=Ft(Ft({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Ft(Ft({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:Ft(Ft({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ft(Ft({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:Ft(Ft({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Ft(Ft({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:Ft(Ft({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ft(Ft({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},jee={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol"),s=r===null?!1:r===""?!0:r;return t.symbol=s,t}}}},Wee=[jZ,Pee,Ree,Dee,Lee,kee,Nee,Gee,Qee,Vee,jee];see(Wee,{mixoutsTo:Bo});Bo.noAuto;Bo.config;Bo.library;Bo.dom;var Zb=Bo.parse;Bo.findIconDefinition;Bo.toHtml;var Yee=Bo.icon;Bo.layer;Bo.text;Bo.counter;var CG={exports:{}},Xee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qee=Xee,Jee=qee;function bG(){}function MG(){}MG.resetWarningCache=bG;var Kee=function(){function n(i,r,s,o,a,l){if(l!==Jee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:MG,resetWarningCache:bG};return t.PropTypes=t,t};CG.exports=Kee();var $ee=CG.exports;const Cn=Zh($ee);function HP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Cl(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(t),!0).forEach(function(i){om(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HP(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Z_(n){"@babel/helpers - typeof";return Z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z_(n)}function om(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Zee(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function ete(n,e){if(n==null)return{};var t=Zee(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function eM(n){return tte(n)||nte(n)||ite(n)||rte()}function tte(n){if(Array.isArray(n))return tM(n)}function nte(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ite(n,e){if(n){if(typeof n=="string")return tM(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tM(n,e)}}function tM(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function rte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ste(n){var e,t=n.beat,i=n.fade,r=n.beatFade,s=n.bounce,o=n.shake,a=n.flash,l=n.spin,c=n.spinPulse,u=n.spinReverse,f=n.pulse,h=n.fixedWidth,d=n.inverse,m=n.border,g=n.listItem,v=n.flip,p=n.size,A=n.rotation,y=n.pull,w=(e={"fa-beat":t,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":f,"fa-fw":h,"fa-inverse":d,"fa-border":m,"fa-li":g,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},om(e,"fa-".concat(p),typeof p<"u"&&p!==null),om(e,"fa-rotate-".concat(A),typeof A<"u"&&A!==null&&A!==0),om(e,"fa-pull-".concat(y),typeof y<"u"&&y!==null),om(e,"fa-swap-opacity",n.swapOpacity),e);return Object.keys(w).map(function(S){return w[S]?S:null}).filter(function(S){return S})}function ote(n){return n=n-0,n===n}function IG(n){return ote(n)?n:(n=n.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),n.substr(0,1).toLowerCase()+n.substr(1))}var ate=["style"];function lte(n){return n.charAt(0).toUpperCase()+n.slice(1)}function cte(n){return n.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var i=t.indexOf(":"),r=IG(t.slice(0,i)),s=t.slice(i+1).trim();return r.startsWith("webkit")?e[lte(r)]=s:e[r]=s,e},{})}function TG(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return TG(n,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=cte(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[IG(c)]=u}return l},{attrs:{}}),s=t.style,o=s===void 0?{}:s,a=ete(t,ate);return r.attrs.style=Cl(Cl({},r.attrs.style),o),n.apply(void 0,[e.tag,Cl(Cl({},r.attrs),a)].concat(eM(i)))}var BG=!1;try{BG=!0}catch{}function ute(){if(!BG&&console&&typeof console.error=="function"){var n;(n=console).error.apply(n,arguments)}}function QP(n){if(n&&Z_(n)==="object"&&n.prefix&&n.iconName&&n.icon)return n;if(Zb.icon)return Zb.icon(n);if(n===null)return null;if(n&&Z_(n)==="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}function rS(n,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?om({},n,e):{}}var VP={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},ai=_t.forwardRef(function(n,e){var t=Cl(Cl({},VP),n),i=t.icon,r=t.mask,s=t.symbol,o=t.className,a=t.title,l=t.titleId,c=t.maskId,u=QP(i),f=rS("classes",[].concat(eM(ste(t)),eM((o||"").split(" ")))),h=rS("transform",typeof t.transform=="string"?Zb.transform(t.transform):t.transform),d=rS("mask",QP(r)),m=Yee(u,Cl(Cl(Cl(Cl({},f),h),d),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!m)return ute("Could not find icon",u),null;var g=m.abstract,v={ref:e};return Object.keys(t).forEach(function(p){VP.hasOwnProperty(p)||(v[p]=t[p])}),fte(g[0],v)});ai.displayName="FontAwesomeIcon";ai.propTypes={beat:Cn.bool,border:Cn.bool,beatFade:Cn.bool,bounce:Cn.bool,className:Cn.string,fade:Cn.bool,flash:Cn.bool,mask:Cn.oneOfType([Cn.object,Cn.array,Cn.string]),maskId:Cn.string,fixedWidth:Cn.bool,inverse:Cn.bool,flip:Cn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Cn.oneOfType([Cn.object,Cn.array,Cn.string]),listItem:Cn.bool,pull:Cn.oneOf(["right","left"]),pulse:Cn.bool,rotation:Cn.oneOf([0,90,180,270]),shake:Cn.bool,size:Cn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Cn.bool,spinPulse:Cn.bool,spinReverse:Cn.bool,symbol:Cn.oneOfType([Cn.bool,Cn.string]),title:Cn.string,titleId:Cn.string,transform:Cn.oneOfType([Cn.string,Cn.object]),swapOpacity:Cn.bool};var fte=TG.bind(null,_t.createElement),hte={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"]},PG={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},dte={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},sS={prefix:"fas",iconName:"diamond",icon:[512,512,[9830],"f219","M284.3 11.7c-15.6-15.6-40.9-15.6-56.6 0l-216 216c-15.6 15.6-15.6 40.9 0 56.6l216 216c15.6 15.6 40.9 15.6 56.6 0l216-216c15.6-15.6 15.6-40.9 0-56.6l-216-216z"]},pte={prefix:"fas",iconName:"cart-shopping",icon:[576,512,[128722,"shopping-cart"],"f07a","M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},mte={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},gte=mte,Ate={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},RG=Ate,vte={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]},yte={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},cT=yte,xte={prefix:"fas",iconName:"percent",icon:[384,512,[62101,62785,"percentage"],"25","M374.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-320 320c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l320-320zM128 128A64 64 0 1 0 0 128a64 64 0 1 0 128 0zM384 384a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z"]},_te=xte,Ete={prefix:"fas",iconName:"exclamation",icon:[64,512,[10069,10071,61738],"21","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64V320c0 17.7 14.3 32 32 32s32-14.3 32-32V64zM32 480a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},DG={},LG={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="heart-crack",i=512,r=512,s=[128148,"heart-broken"],o="f7a9",a="M119.4 44.1c23.3-3.9 46.8-1.9 68.6 5.3l49.8 77.5-75.4 75.4c-1.5 1.5-2.4 3.6-2.3 5.8s1 4.2 2.6 5.7l112 104c2.9 2.7 7.4 2.9 10.5 .3s3.8-7 1.7-10.4l-60.4-98.1 90.7-75.6c2.6-2.1 3.5-5.7 2.4-8.8L296.8 61.8c28.5-16.7 62.4-23.2 95.7-17.6C461.5 55.6 512 115.2 512 185.1v5.8c0 41.5-17.2 81.2-47.6 109.5L283.7 469.1c-7.5 7-17.4 10.9-27.7 10.9s-20.2-3.9-27.7-10.9L47.6 300.4C17.2 272.1 0 232.4 0 190.9v-5.8c0-69.9 50.5-129.5 119.4-141z";n.definition={prefix:e,iconName:t,icon:[i,r,s,o,a]},n.faHeartCrack=n.definition,n.prefix=e,n.iconName=t,n.width=i,n.height=r,n.ligatures=s,n.unicode=o,n.svgPathData=a,n.aliases=s})(LG);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=LG;n.definition={prefix:e.prefix,iconName:e.iconName,icon:[e.width,e.height,e.aliases,e.unicode,e.svgPathData]},n.faHeartBroken=n.definition,n.prefix=e.prefix,n.iconName=e.iconName,n.width=e.width,n.height=e.height,n.ligatures=e.aliases,n.unicode=e.unicode,n.svgPathData=e.svgPathData,n.aliases=e.aliases})(DG);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const il="154",na={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},vc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},FG=0,nM=1,OG=2,wte=3,zG=0,rE=1,Rg=2,za=3,Rs=0,er=1,ni=2,Ste=2,pa=0,Vu=1,e3=2,iM=3,rM=4,sE=5,ah=100,UG=101,kG=102,sM=103,oM=104,NG=200,oE=201,GG=202,HG=203,aE=204,uT=205,QG=206,VG=207,jG=208,WG=209,YG=210,XG=0,qG=1,JG=2,t3=3,KG=4,$G=5,ZG=6,eH=7,iv=0,tH=1,nH=2,ma=0,iH=1,rH=2,sH=3,fT=4,oH=5,sf=300,zl=301,of=302,af=303,wA=304,o0=306,Wr=1e3,li=1001,Nm=1002,dn=1003,SA=1004,Cte=1004,ym=1005,bte=1005,Xt=1006,lE=1007,Mte=1007,bo=1008,aM=1008,hi=1009,CA=1010,cE=1011,Af=1012,bh=1013,ps=1014,Ln=1015,jn=1016,hT=1017,dT=1018,ju=1020,aH=1021,Vn=1023,lH=1024,cH=1025,Ja=1026,Gh=1027,la=1028,uE=1029,Su=1030,rv=1031,Hh=1033,Dg=33776,s_=33777,o_=33778,Lg=33779,n3=35840,lM=35841,i3=35842,cM=35843,pT=36196,r3=37492,s3=37496,o3=37808,uM=37809,fM=37810,hM=37811,bA=37812,dM=37813,pM=37814,mM=37815,gM=37816,AM=37817,vM=37818,yM=37819,xM=37820,_M=37821,Fg=36492,uH=36283,EM=36284,wM=36285,SM=36286,fH=2200,hH=2201,dH=2202,Gm=2300,Qh=2301,a_=2302,Ah=2400,vh=2401,MA=2402,fE=2500,mT=2501,pH=0,gT=1,a3=2,AT=3e3,Wu=3001,mH=3200,hE=3201,vf=0,gH=1,Yu="",En="srgb",ro="srgb-linear",vT="display-p3",Ite=0,Mh=7680,l_=7681,Tte=7682,Bte=7683,Pte=34055,Rte=34056,Dte=5386,Lte=512,Fte=513,AH=514,Ote=515,zte=516,vH=517,Ute=518,yT=519,yH=512,xH=513,_H=514,EH=515,wH=516,SH=517,CH=518,bH=519,IA=35044,ms=35048,kte=35040,Nte=35045,Gte=35049,Hte=35041,Qte=35046,Vte=35050,jte=35042,Wte="100",CM="300 es",l3=1035,Dl=2e3,TA=2001;let Yr=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const us=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let jP=1234567;const Ih=Math.PI/180,Hm=180/Math.PI;function So(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(us[n&255]+us[n>>8&255]+us[n>>16&255]+us[n>>24&255]+"-"+us[e&255]+us[e>>8&255]+"-"+us[e>>16&15|64]+us[e>>24&255]+"-"+us[t&63|128]+us[t>>8&255]+"-"+us[t>>16&255]+us[t>>24&255]+us[i&255]+us[i>>8&255]+us[i>>16&255]+us[i>>24&255]).toLowerCase()}function $i(n,e,t){return Math.max(e,Math.min(t,n))}function xT(n,e){return(n%e+e)%e}function Yte(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Xte(n,e,t){return n!==e?(t-n)/(e-n):0}function Og(n,e,t){return(1-t)*n+t*e}function qte(n,e,t,i){return Og(n,e,1-Math.exp(-t*i))}function Jte(n,e=1){return e-Math.abs(xT(n,e*2)-e)}function Kte(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function $te(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Zte(n,e){return n+Math.floor(Math.random()*(e-n+1))}function ene(n,e){return n+Math.random()*(e-n)}function tne(n){return n*(.5-Math.random())}function nne(n){n!==void 0&&(jP=n);let e=jP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ine(n){return n*Ih}function rne(n){return n*Hm}function bM(n){return(n&n-1)===0&&n!==0}function MH(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function c3(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function sne(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),h=o((e-i)/2),d=s((i-e)/2),m=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*f,l*h,a*c);break;case"YZY":n.set(l*h,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*h,a*u,a*c);break;case"XZX":n.set(a*u,l*m,l*d,a*c);break;case"YXY":n.set(l*d,a*u,l*m,a*c);break;case"ZYZ":n.set(l*m,l*d,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function xo(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function In(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const jt={DEG2RAD:Ih,RAD2DEG:Hm,generateUUID:So,clamp:$i,euclideanModulo:xT,mapLinear:Yte,inverseLerp:Xte,lerp:Og,damp:qte,pingpong:Jte,smoothstep:Kte,smootherstep:$te,randInt:Zte,randFloat:ene,randFloatSpread:tne,seededRandom:nne,degToRad:ine,radToDeg:rne,isPowerOfTwo:bM,ceilPowerOfTwo:MH,floorPowerOfTwo:c3,setQuaternionFromProperEuler:sne,normalize:In,denormalize:xo};class Se{constructor(e=0,t=0){Se.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($i(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class tn{constructor(e,t,i,r,s,o,a,l,c){tn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],h=i[2],d=i[5],m=i[8],g=r[0],v=r[3],p=r[6],A=r[1],y=r[4],w=r[7],S=r[2],C=r[5],b=r[8];return s[0]=o*g+a*A+l*S,s[3]=o*v+a*y+l*C,s[6]=o*p+a*w+l*b,s[1]=c*g+u*A+f*S,s[4]=c*v+u*y+f*C,s[7]=c*p+u*w+f*b,s[2]=h*g+d*A+m*S,s[5]=h*v+d*y+m*C,s[8]=h*p+d*w+m*b,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,h=a*l-u*s,d=c*s-o*l,m=t*f+i*h+r*d;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=f*g,e[1]=(r*c-u*i)*g,e[2]=(a*i-r*o)*g,e[3]=h*g,e[4]=(u*t-r*l)*g,e[5]=(r*s-a*t)*g,e[6]=d*g,e[7]=(i*l-c*t)*g,e[8]=(o*t-i*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(oS.makeScale(e,t)),this}rotate(e){return this.premultiply(oS.makeRotation(-e)),this}translate(e,t){return this.premultiply(oS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const oS=new tn;function IH(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const one={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function am(n,e){return new one[n](e)}function BA(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const WP={};function zg(n){n in WP||(WP[n]=!0,console.warn(n))}function xm(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function aS(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const ane=new tn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),lne=new tn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function cne(n){return n.convertSRGBToLinear().applyMatrix3(lne)}function une(n){return n.applyMatrix3(ane).convertLinearToSRGB()}const fne={[ro]:n=>n,[En]:n=>n.convertSRGBToLinear(),[vT]:cne},hne={[ro]:n=>n,[En]:n=>n.convertLinearToSRGB(),[vT]:une},jo={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return ro},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=fne[e],r=hne[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Md;class _T{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Md===void 0&&(Md=BA("canvas")),Md.width=e.width,Md.height=e.height;const i=Md.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Md}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=BA("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=xm(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(xm(t[i]/255)*255):t[i]=xm(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let dne=0;class yh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:dne++}),this.uuid=So(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(lS(r[o].image)):s.push(lS(r[o]))}else s=lS(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function lS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?_T.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let pne=0,Nn=class c_ extends Yr{constructor(e=c_.DEFAULT_IMAGE,t=c_.DEFAULT_MAPPING,i=li,r=li,s=Xt,o=bo,a=Vn,l=hi,c=c_.DEFAULT_ANISOTROPY,u=Yu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pne++}),this.uuid=So(),this.name="",this.source=new yh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Se(0,0),this.repeat=new Se(1,1),this.center=new Se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new tn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(zg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Wu?En:Yu),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==sf)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Wr:e.x=e.x-Math.floor(e.x);break;case li:e.x=e.x<0?0:1;break;case Nm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Wr:e.y=e.y-Math.floor(e.y);break;case li:e.y=e.y<0?0:1;break;case Nm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return zg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===En?Wu:AT}set encoding(e){zg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Wu?En:Yu}};Nn.DEFAULT_IMAGE=null;Nn.DEFAULT_MAPPING=sf;Nn.DEFAULT_ANISOTROPY=1;class sn{constructor(e=0,t=0,i=0,r=1){sn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],m=l[9],g=l[2],v=l[6],p=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-g)<.01&&Math.abs(m-v)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+g)<.1&&Math.abs(m+v)<.1&&Math.abs(c+d+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(c+1)/2,w=(d+1)/2,S=(p+1)/2,C=(u+h)/4,b=(f+g)/4,M=(m+v)/4;return y>w&&y>S?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=C/i,s=b/i):w>S?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=C/r,s=M/r):S<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),i=b/s,r=M/s),this.set(i,r,s,t),this}let A=Math.sqrt((v-m)*(v-m)+(f-g)*(f-g)+(h-u)*(h-u));return Math.abs(A)<.001&&(A=1),this.x=(v-m)/A,this.y=(f-g)/A,this.z=(h-u)/A,this.w=Math.acos((c+d+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qn extends Yr{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(zg("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Wu?En:Yu),this.texture=new Nn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Xt,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new yh(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class dE extends Nn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=dn,this.minFilter=dn,this.wrapR=li,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mne extends Qn{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new dE(null,e,t,i),this.texture.isRenderTargetTexture=!0}}let ET=class extends Nn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=dn,this.minFilter=dn,this.wrapR=li,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};class gne extends Qn{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new ET(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ane extends Qn{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Lt{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const h=s[o+0],d=s[o+1],m=s[o+2],g=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=h,e[t+1]=d,e[t+2]=m,e[t+3]=g;return}if(f!==g||l!==h||c!==d||u!==m){let v=1-a;const p=l*h+c*d+u*m+f*g,A=p>=0?1:-1,y=1-p*p;if(y>Number.EPSILON){const S=Math.sqrt(y),C=Math.atan2(S,p*A);v=Math.sin(v*C)/S,a=Math.sin(a*C)/S}const w=a*A;if(l=l*v+h*w,c=c*v+d*w,u=u*v+m*w,f=f*v+g*w,v===1-a){const S=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=S,c*=S,u*=S,f*=S}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=s[o],h=s[o+1],d=s[o+2],m=s[o+3];return e[t]=a*m+u*f+l*d-c*h,e[t+1]=l*m+u*h+c*f-a*d,e[t+2]=c*m+u*d+a*h-l*f,e[t+3]=u*m-a*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),f=a(s/2),h=l(i/2),d=l(r/2),m=l(s/2);switch(o){case"XYZ":this._x=h*u*f+c*d*m,this._y=c*d*f-h*u*m,this._z=c*u*m+h*d*f,this._w=c*u*f-h*d*m;break;case"YXZ":this._x=h*u*f+c*d*m,this._y=c*d*f-h*u*m,this._z=c*u*m-h*d*f,this._w=c*u*f+h*d*m;break;case"ZXY":this._x=h*u*f-c*d*m,this._y=c*d*f+h*u*m,this._z=c*u*m+h*d*f,this._w=c*u*f-h*d*m;break;case"ZYX":this._x=h*u*f-c*d*m,this._y=c*d*f+h*u*m,this._z=c*u*m-h*d*f,this._w=c*u*f+h*d*m;break;case"YZX":this._x=h*u*f+c*d*m,this._y=c*d*f+h*u*m,this._z=c*u*m-h*d*f,this._w=c*u*f-h*d*m;break;case"XZY":this._x=h*u*f-c*d*m,this._y=c*d*f-h*u*m,this._z=c*u*m+h*d*f,this._w=c*u*f+h*d*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],h=i+a+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(s-c)*d,this._z=(o-r)*d}else if(i>a&&i>f){const d=2*Math.sqrt(1+i-a-f);this._w=(u-l)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+c)/d}else if(a>f){const d=2*Math.sqrt(1+a-i-f);this._w=(s-c)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-i-a);this._w=(o-r)/d,this._x=(s+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($i(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*i+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*f+this._w*h,this._x=i*f+this._x*h,this._y=r*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class F{constructor(e=0,t=0,i=0){F.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(YP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(YP.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,f=l*r+s*i-o*t,h=-s*t-o*i-a*r;return this.x=c*l+h*-s+u*-a-f*-o,this.y=u*l+h*-o+f*-s-c*-a,this.z=f*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return cS.copy(this).projectOnVector(e),this.sub(cS)}reflect(e){return this.sub(cS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($i(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const cS=new F,YP=new Lt;class Gn{constructor(e=new F(1/0,1/0,1/0),t=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Zl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Zl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Zl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Id.copy(e.boundingBox),Id.applyMatrix4(e.matrixWorld),this.union(Id);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Zl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Zl)}else r.boundingBox===null&&r.computeBoundingBox(),Id.copy(r.boundingBox),Id.applyMatrix4(e.matrixWorld),this.union(Id)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Zl),Zl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(e1),Xy.subVectors(this.max,e1),Td.subVectors(e.a,e1),Bd.subVectors(e.b,e1),Pd.subVectors(e.c,e1),ru.subVectors(Bd,Td),su.subVectors(Pd,Bd),kf.subVectors(Td,Pd);let t=[0,-ru.z,ru.y,0,-su.z,su.y,0,-kf.z,kf.y,ru.z,0,-ru.x,su.z,0,-su.x,kf.z,0,-kf.x,-ru.y,ru.x,0,-su.y,su.x,0,-kf.y,kf.x,0];return!uS(t,Td,Bd,Pd,Xy)||(t=[1,0,0,0,1,0,0,0,1],!uS(t,Td,Bd,Pd,Xy))?!1:(qy.crossVectors(ru,su),t=[qy.x,qy.y,qy.z],uS(t,Td,Bd,Pd,Xy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Zl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Zl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:($l[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$l[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$l[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$l[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$l[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$l[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$l[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$l[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($l),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $l=[new F,new F,new F,new F,new F,new F,new F,new F],Zl=new F,Id=new Gn,Td=new F,Bd=new F,Pd=new F,ru=new F,su=new F,kf=new F,e1=new F,Xy=new F,qy=new F,Nf=new F;function uS(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Nf.fromArray(n,s);const a=r.x*Math.abs(Nf.x)+r.y*Math.abs(Nf.y)+r.z*Math.abs(Nf.z),l=e.dot(Nf),c=t.dot(Nf),u=i.dot(Nf);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const vne=new Gn,t1=new F,fS=new F;let Bi=class{constructor(e=new F,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):vne.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;t1.subVectors(e,this.center);const t=t1.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(t1,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(fS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(t1.copy(e.center).add(fS)),this.expandByPoint(t1.copy(e.center).sub(fS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const ec=new F,hS=new F,Jy=new F,ou=new F,dS=new F,Ky=new F,pS=new F;class xa{constructor(e=new F,t=new F(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ec)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ec.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ec.copy(this.origin).addScaledVector(this.direction,t),ec.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){hS.copy(e).add(t).multiplyScalar(.5),Jy.copy(t).sub(e).normalize(),ou.copy(this.origin).sub(hS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Jy),a=ou.dot(this.direction),l=-ou.dot(Jy),c=ou.lengthSq(),u=Math.abs(1-o*o);let f,h,d,m;if(u>0)if(f=o*l-a,h=o*a-l,m=s*u,f>=0)if(h>=-m)if(h<=m){const g=1/u;f*=g,h*=g,d=f*(f+o*h+2*a)+h*(o*f+h+2*l)+c}else h=s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h=-s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h<=-m?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+c):h<=m?(f=0,h=Math.min(Math.max(-s,-l),s),d=h*(h+2*l)+c):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+c);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(hS).addScaledVector(Jy,h),d}intersectSphere(e,t){ec.subVectors(e.center,this.origin);const i=ec.dot(this.direction),r=ec.dot(ec)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ec)!==null}intersectTriangle(e,t,i,r,s){dS.subVectors(t,e),Ky.subVectors(i,e),pS.crossVectors(dS,Ky);let o=this.direction.dot(pS),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ou.subVectors(this.origin,e);const l=a*this.direction.dot(Ky.crossVectors(ou,Ky));if(l<0)return null;const c=a*this.direction.dot(dS.cross(ou));if(c<0||l+c>o)return null;const u=-a*ou.dot(pS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class He{constructor(e,t,i,r,s,o,a,l,c,u,f,h,d,m,g,v){He.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,f,h,d,m,g,v)}set(e,t,i,r,s,o,a,l,c,u,f,h,d,m,g,v){const p=this.elements;return p[0]=e,p[4]=t,p[8]=i,p[12]=r,p[1]=s,p[5]=o,p[9]=a,p[13]=l,p[2]=c,p[6]=u,p[10]=f,p[14]=h,p[3]=d,p[7]=m,p[11]=g,p[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new He().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Rd.setFromMatrixColumn(e,0).length(),s=1/Rd.setFromMatrixColumn(e,1).length(),o=1/Rd.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*u,d=o*f,m=a*u,g=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=d+m*c,t[5]=h-g*c,t[9]=-a*l,t[2]=g-h*c,t[6]=m+d*c,t[10]=o*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,m=c*u,g=c*f;t[0]=h+g*a,t[4]=m*a-d,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=d*a-m,t[6]=g+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,m=c*u,g=c*f;t[0]=h-g*a,t[4]=-o*f,t[8]=m+d*a,t[1]=d+m*a,t[5]=o*u,t[9]=g-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*u,d=o*f,m=a*u,g=a*f;t[0]=l*u,t[4]=m*c-d,t[8]=h*c+g,t[1]=l*f,t[5]=g*c+h,t[9]=d*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,d=o*c,m=a*l,g=a*c;t[0]=l*u,t[4]=g-h*f,t[8]=m*f+d,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=d*f+m,t[10]=h-g*f}else if(e.order==="XZY"){const h=o*l,d=o*c,m=a*l,g=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=h*f+g,t[5]=o*u,t[9]=d*f-m,t[2]=m*f-d,t[6]=a*u,t[10]=g*f+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(yne,e,xne)}lookAt(e,t,i){const r=this.elements;return po.subVectors(e,t),po.lengthSq()===0&&(po.z=1),po.normalize(),au.crossVectors(i,po),au.lengthSq()===0&&(Math.abs(i.z)===1?po.x+=1e-4:po.z+=1e-4,po.normalize(),au.crossVectors(i,po)),au.normalize(),$y.crossVectors(po,au),r[0]=au.x,r[4]=$y.x,r[8]=po.x,r[1]=au.y,r[5]=$y.y,r[9]=po.y,r[2]=au.z,r[6]=$y.z,r[10]=po.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],h=i[9],d=i[13],m=i[2],g=i[6],v=i[10],p=i[14],A=i[3],y=i[7],w=i[11],S=i[15],C=r[0],b=r[4],M=r[8],I=r[12],T=r[1],D=r[5],R=r[9],z=r[13],L=r[2],H=r[6],J=r[10],Z=r[14],U=r[3],X=r[7],Y=r[11],O=r[15];return s[0]=o*C+a*T+l*L+c*U,s[4]=o*b+a*D+l*H+c*X,s[8]=o*M+a*R+l*J+c*Y,s[12]=o*I+a*z+l*Z+c*O,s[1]=u*C+f*T+h*L+d*U,s[5]=u*b+f*D+h*H+d*X,s[9]=u*M+f*R+h*J+d*Y,s[13]=u*I+f*z+h*Z+d*O,s[2]=m*C+g*T+v*L+p*U,s[6]=m*b+g*D+v*H+p*X,s[10]=m*M+g*R+v*J+p*Y,s[14]=m*I+g*z+v*Z+p*O,s[3]=A*C+y*T+w*L+S*U,s[7]=A*b+y*D+w*H+S*X,s[11]=A*M+y*R+w*J+S*Y,s[15]=A*I+y*z+w*Z+S*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],m=e[3],g=e[7],v=e[11],p=e[15];return m*(+s*l*f-r*c*f-s*a*h+i*c*h+r*a*d-i*l*d)+g*(+t*l*d-t*c*h+s*o*h-r*o*d+r*c*u-s*l*u)+v*(+t*c*f-t*a*d-s*o*f+i*o*d+s*a*u-i*c*u)+p*(-r*a*u-t*l*f+t*a*h+r*o*f-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],m=e[12],g=e[13],v=e[14],p=e[15],A=f*v*c-g*h*c+g*l*d-a*v*d-f*l*p+a*h*p,y=m*h*c-u*v*c-m*l*d+o*v*d+u*l*p-o*h*p,w=u*g*c-m*f*c+m*a*d-o*g*d-u*a*p+o*f*p,S=m*f*l-u*g*l-m*a*h+o*g*h+u*a*v-o*f*v,C=t*A+i*y+r*w+s*S;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/C;return e[0]=A*b,e[1]=(g*h*s-f*v*s-g*r*d+i*v*d+f*r*p-i*h*p)*b,e[2]=(a*v*s-g*l*s+g*r*c-i*v*c-a*r*p+i*l*p)*b,e[3]=(f*l*s-a*h*s-f*r*c+i*h*c+a*r*d-i*l*d)*b,e[4]=y*b,e[5]=(u*v*s-m*h*s+m*r*d-t*v*d-u*r*p+t*h*p)*b,e[6]=(m*l*s-o*v*s-m*r*c+t*v*c+o*r*p-t*l*p)*b,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*d+t*l*d)*b,e[8]=w*b,e[9]=(m*f*s-u*g*s-m*i*d+t*g*d+u*i*p-t*f*p)*b,e[10]=(o*g*s-m*a*s+m*i*c-t*g*c-o*i*p+t*a*p)*b,e[11]=(u*a*s-o*f*s-u*i*c+t*f*c+o*i*d-t*a*d)*b,e[12]=S*b,e[13]=(u*g*r-m*f*r+m*i*h-t*g*h-u*i*v+t*f*v)*b,e[14]=(m*a*r-o*g*r-m*i*l+t*g*l+o*i*v-t*a*v)*b,e[15]=(o*f*r-u*a*r+u*i*l-t*f*l-o*i*h+t*a*h)*b,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,h=s*c,d=s*u,m=s*f,g=o*u,v=o*f,p=a*f,A=l*c,y=l*u,w=l*f,S=i.x,C=i.y,b=i.z;return r[0]=(1-(g+p))*S,r[1]=(d+w)*S,r[2]=(m-y)*S,r[3]=0,r[4]=(d-w)*C,r[5]=(1-(h+p))*C,r[6]=(v+A)*C,r[7]=0,r[8]=(m+y)*b,r[9]=(v-A)*b,r[10]=(1-(h+g))*b,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Rd.set(r[0],r[1],r[2]).length();const o=Rd.set(r[4],r[5],r[6]).length(),a=Rd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ca.copy(this);const c=1/s,u=1/o,f=1/a;return Ca.elements[0]*=c,Ca.elements[1]*=c,Ca.elements[2]*=c,Ca.elements[4]*=u,Ca.elements[5]*=u,Ca.elements[6]*=u,Ca.elements[8]*=f,Ca.elements[9]*=f,Ca.elements[10]*=f,t.setFromRotationMatrix(Ca),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Dl){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),f=(t+e)/(t-e),h=(i+r)/(i-r);let d,m;if(a===Dl)d=-(o+s)/(o-s),m=-2*o*s/(o-s);else if(a===TA)d=-o/(o-s),m=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Dl){const l=this.elements,c=1/(t-e),u=1/(i-r),f=1/(o-s),h=(t+e)*c,d=(i+r)*u;let m,g;if(a===Dl)m=(o+s)*f,g=-2*f;else if(a===TA)m=s*f,g=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=g,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Rd=new F,Ca=new He,yne=new F(0,0,0),xne=new F(1,1,1),au=new F,$y=new F,po=new F,XP=new He,qP=new Lt;class Qr{constructor(e=0,t=0,i=0,r=Qr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],f=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin($i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-$i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin($i(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-$i(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin($i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-$i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return XP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(XP,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return qP.setFromEuler(this),this.setFromQuaternion(qP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Qr.DEFAULT_ORDER="XYZ";class Th{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let _ne=0;const JP=new F,Dd=new Lt,tc=new He,Zy=new F,n1=new F,Ene=new F,wne=new Lt,KP=new F(1,0,0),$P=new F(0,1,0),ZP=new F(0,0,1),Sne={type:"added"},eR={type:"removed"};class Jt extends Yr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_ne++}),this.uuid=So(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jt.DEFAULT_UP.clone();const e=new F,t=new Qr,i=new Lt,r=new F(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new He},normalMatrix:{value:new tn}}),this.matrix=new He,this.matrixWorld=new He,this.matrixAutoUpdate=Jt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Th,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Dd.setFromAxisAngle(e,t),this.quaternion.multiply(Dd),this}rotateOnWorldAxis(e,t){return Dd.setFromAxisAngle(e,t),this.quaternion.premultiply(Dd),this}rotateX(e){return this.rotateOnAxis(KP,e)}rotateY(e){return this.rotateOnAxis($P,e)}rotateZ(e){return this.rotateOnAxis(ZP,e)}translateOnAxis(e,t){return JP.copy(e).applyQuaternion(this.quaternion),this.position.add(JP.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(KP,e)}translateY(e){return this.translateOnAxis($P,e)}translateZ(e){return this.translateOnAxis(ZP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(tc.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Zy.copy(e):Zy.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),n1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tc.lookAt(n1,Zy,this.up):tc.lookAt(Zy,n1,this.up),this.quaternion.setFromRotationMatrix(tc),r&&(tc.extractRotation(r.matrixWorld),Dd.setFromRotationMatrix(tc),this.quaternion.premultiply(Dd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Sne)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(eR)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(eR)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),tc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),tc.multiply(e.parent.matrixWorld)),e.applyMatrix4(tc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(n1,e,Ene),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(n1,wne,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),h=o(e.skeletons),d=o(e.animations),m=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),d.length>0&&(i.animations=d),m.length>0&&(i.nodes=m)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Jt.DEFAULT_UP=new F(0,1,0);Jt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ba=new F,nc=new F,mS=new F,ic=new F,Ld=new F,Fd=new F,tR=new F,gS=new F,AS=new F,vS=new F;let e2=!1;class vr{constructor(e=new F,t=new F,i=new F){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ba.subVectors(e,t),r.cross(ba);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ba.subVectors(r,t),nc.subVectors(i,t),mS.subVectors(e,t);const o=ba.dot(ba),a=ba.dot(nc),l=ba.dot(mS),c=nc.dot(nc),u=nc.dot(mS),f=o*c-a*a;if(f===0)return s.set(-2,-1,-1);const h=1/f,d=(c*l-a*u)*h,m=(o*u-a*l)*h;return s.set(1-d-m,m,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ic),ic.x>=0&&ic.y>=0&&ic.x+ic.y<=1}static getUV(e,t,i,r,s,o,a,l){return e2===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),e2=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,ic),l.setScalar(0),l.addScaledVector(s,ic.x),l.addScaledVector(o,ic.y),l.addScaledVector(a,ic.z),l}static isFrontFacing(e,t,i,r){return ba.subVectors(i,t),nc.subVectors(e,t),ba.cross(nc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ba.subVectors(this.c,this.b),nc.subVectors(this.a,this.b),ba.cross(nc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return vr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return e2===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),e2=!0),vr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return vr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return vr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Ld.subVectors(r,i),Fd.subVectors(s,i),gS.subVectors(e,i);const l=Ld.dot(gS),c=Fd.dot(gS);if(l<=0&&c<=0)return t.copy(i);AS.subVectors(e,r);const u=Ld.dot(AS),f=Fd.dot(AS);if(u>=0&&f<=u)return t.copy(r);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Ld,o);vS.subVectors(e,s);const d=Ld.dot(vS),m=Fd.dot(vS);if(m>=0&&d<=m)return t.copy(s);const g=d*c-l*m;if(g<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(i).addScaledVector(Fd,a);const v=u*m-d*f;if(v<=0&&f-u>=0&&d-m>=0)return tR.subVectors(s,r),a=(f-u)/(f-u+(d-m)),t.copy(r).addScaledVector(tR,a);const p=1/(v+g+h);return o=g*p,a=h*p,t.copy(i).addScaledVector(Ld,o).addScaledVector(Fd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Cne=0;class ur extends Yr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Cne++}),this.uuid=So(),this.name="",this.type="Material",this.blending=Vu,this.side=Rs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=aE,this.blendDst=uT,this.blendEquation=ah,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=t3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=yT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Mh,this.stencilZFail=Mh,this.stencilZPass=Mh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Vu&&(i.blending=this.blending),this.side!==Rs&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const TH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ma={h:0,s:0,l:0},t2={h:0,s:0,l:0};function yS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class et{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=En){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,jo.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=jo.workingColorSpace){return this.r=e,this.g=t,this.b=i,jo.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=jo.workingColorSpace){if(e=xT(e,1),t=$i(t,0,1),i=$i(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=yS(o,s,e+1/3),this.g=yS(o,s,e),this.b=yS(o,s,e-1/3)}return jo.toWorkingColorSpace(this,r),this}setStyle(e,t=En){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=En){const i=TH[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xm(e.r),this.g=xm(e.g),this.b=xm(e.b),this}copyLinearToSRGB(e){return this.r=aS(e.r),this.g=aS(e.g),this.b=aS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=En){return jo.fromWorkingColorSpace(fs.copy(this),e),Math.round($i(fs.r*255,0,255))*65536+Math.round($i(fs.g*255,0,255))*256+Math.round($i(fs.b*255,0,255))}getHexString(e=En){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=jo.workingColorSpace){jo.fromWorkingColorSpace(fs.copy(this),t);const i=fs.r,r=fs.g,s=fs.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=jo.workingColorSpace){return jo.fromWorkingColorSpace(fs.copy(this),t),e.r=fs.r,e.g=fs.g,e.b=fs.b,e}getStyle(e=En){jo.fromWorkingColorSpace(fs.copy(this),e);const t=fs.r,i=fs.g,r=fs.b;return e!==En?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ma),Ma.h+=e,Ma.s+=t,Ma.l+=i,this.setHSL(Ma.h,Ma.s,Ma.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ma),e.getHSL(t2);const i=Og(Ma.h,t2.h,t),r=Og(Ma.s,t2.s,t),s=Og(Ma.l,t2.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const fs=new et;et.NAMES=TH;class Ir extends ur{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const yc=bne();function bne(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function js(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=$i(n,-65504,65504),yc.floatView[0]=n;const e=yc.uint32View[0],t=e>>23&511;return yc.baseTable[t]+((e&8388607)>>yc.shiftTable[t])}function fg(n){const e=n>>10;return yc.uint32View[0]=yc.mantissaTable[yc.offsetTable[e]+(n&1023)]+yc.exponentTable[e],yc.floatView[0]}const ja={toHalfFloat:js,fromHalfFloat:fg},dr=new F,n2=new Se;class qt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=IA,this.updateRange={offset:0,count:-1},this.gpuType=Ln,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)n2.fromBufferAttribute(this,t),n2.applyMatrix3(e),this.setXY(t,n2.x,n2.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)dr.fromBufferAttribute(this,t),dr.applyMatrix3(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)dr.fromBufferAttribute(this,t),dr.applyMatrix4(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)dr.fromBufferAttribute(this,t),dr.applyNormalMatrix(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)dr.fromBufferAttribute(this,t),dr.transformDirection(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=xo(t,this.array)),t}setX(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=xo(t,this.array)),t}setY(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=xo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=xo(t,this.array)),t}setW(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),i=In(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),i=In(i,this.array),r=In(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),i=In(i,this.array),r=In(r,this.array),s=In(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==IA&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Mne extends qt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Ine extends qt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Tne extends qt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Bne extends qt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class pE extends qt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Pne extends qt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class wT extends qt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Rne extends qt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=fg(this.array[e*this.itemSize]);return this.normalized&&(t=xo(t,this.array)),t}setX(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize]=js(t),this}getY(e){let t=fg(this.array[e*this.itemSize+1]);return this.normalized&&(t=xo(t,this.array)),t}setY(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+1]=js(t),this}getZ(e){let t=fg(this.array[e*this.itemSize+2]);return this.normalized&&(t=xo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+2]=js(t),this}getW(e){let t=fg(this.array[e*this.itemSize+3]);return this.normalized&&(t=xo(t,this.array)),t}setW(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+3]=js(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),i=In(i,this.array)),this.array[e+0]=js(t),this.array[e+1]=js(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),i=In(i,this.array),r=In(r,this.array)),this.array[e+0]=js(t),this.array[e+1]=js(i),this.array[e+2]=js(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),i=In(i,this.array),r=In(r,this.array),s=In(s,this.array)),this.array[e+0]=js(t),this.array[e+1]=js(i),this.array[e+2]=js(r),this.array[e+3]=js(s),this}}class Et extends qt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class Dne extends qt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let Lne=0;const No=new He,xS=new Jt,Od=new F,mo=new Gn,i1=new Gn,Ur=new F;class Gt extends Yr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Lne++}),this.uuid=So(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(IH(e)?wT:pE)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new tn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return No.makeRotationFromQuaternion(e),this.applyMatrix4(No),this}rotateX(e){return No.makeRotationX(e),this.applyMatrix4(No),this}rotateY(e){return No.makeRotationY(e),this.applyMatrix4(No),this}rotateZ(e){return No.makeRotationZ(e),this.applyMatrix4(No),this}translate(e,t,i){return No.makeTranslation(e,t,i),this.applyMatrix4(No),this}scale(e,t,i){return No.makeScale(e,t,i),this.applyMatrix4(No),this}lookAt(e){return xS.lookAt(e),xS.updateMatrix(),this.applyMatrix4(xS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Od).negate(),this.translate(Od.x,Od.y,Od.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Et(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];mo.setFromBufferAttribute(s),this.morphTargetsRelative?(Ur.addVectors(this.boundingBox.min,mo.min),this.boundingBox.expandByPoint(Ur),Ur.addVectors(this.boundingBox.max,mo.max),this.boundingBox.expandByPoint(Ur)):(this.boundingBox.expandByPoint(mo.min),this.boundingBox.expandByPoint(mo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Bi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new F,1/0);return}if(e){const i=this.boundingSphere.center;if(mo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];i1.setFromBufferAttribute(a),this.morphTargetsRelative?(Ur.addVectors(mo.min,i1.min),mo.expandByPoint(Ur),Ur.addVectors(mo.max,i1.max),mo.expandByPoint(Ur)):(mo.expandByPoint(i1.min),mo.expandByPoint(i1.max))}mo.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Ur.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ur));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Ur.fromBufferAttribute(a,c),l&&(Od.fromBufferAttribute(e,c),Ur.add(Od)),r=Math.max(r,i.distanceToSquared(Ur))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new qt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let T=0;T<a;T++)c[T]=new F,u[T]=new F;const f=new F,h=new F,d=new F,m=new Se,g=new Se,v=new Se,p=new F,A=new F;function y(T,D,R){f.fromArray(r,T*3),h.fromArray(r,D*3),d.fromArray(r,R*3),m.fromArray(o,T*2),g.fromArray(o,D*2),v.fromArray(o,R*2),h.sub(f),d.sub(f),g.sub(m),v.sub(m);const z=1/(g.x*v.y-v.x*g.y);isFinite(z)&&(p.copy(h).multiplyScalar(v.y).addScaledVector(d,-g.y).multiplyScalar(z),A.copy(d).multiplyScalar(g.x).addScaledVector(h,-v.x).multiplyScalar(z),c[T].add(p),c[D].add(p),c[R].add(p),u[T].add(A),u[D].add(A),u[R].add(A))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let T=0,D=w.length;T<D;++T){const R=w[T],z=R.start,L=R.count;for(let H=z,J=z+L;H<J;H+=3)y(i[H+0],i[H+1],i[H+2])}const S=new F,C=new F,b=new F,M=new F;function I(T){b.fromArray(s,T*3),M.copy(b);const D=c[T];S.copy(D),S.sub(b.multiplyScalar(b.dot(D))).normalize(),C.crossVectors(M,D);const z=C.dot(u[T])<0?-1:1;l[T*4]=S.x,l[T*4+1]=S.y,l[T*4+2]=S.z,l[T*4+3]=z}for(let T=0,D=w.length;T<D;++T){const R=w[T],z=R.start,L=R.count;for(let H=z,J=z+L;H<J;H+=3)I(i[H+0]),I(i[H+1]),I(i[H+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new qt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,d=i.count;h<d;h++)i.setXYZ(h,0,0,0);const r=new F,s=new F,o=new F,a=new F,l=new F,c=new F,u=new F,f=new F;if(e)for(let h=0,d=e.count;h<d;h+=3){const m=e.getX(h+0),g=e.getX(h+1),v=e.getX(h+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,v),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,v),a.add(u),l.add(u),c.add(u),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let h=0,d=t.count;h<d;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ur.fromBufferAttribute(e,t),Ur.normalize(),e.setXYZ(t,Ur.x,Ur.y,Ur.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,h=new c.constructor(l.length*u);let d=0,m=0;for(let g=0,v=l.length;g<v;g++){a.isInterleavedBufferAttribute?d=l[g]*a.data.stride+a.offset:d=l[g]*u;for(let p=0;p<u;p++)h[m++]=c[d++]}return new qt(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Gt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const h=c[u],d=e(h,i);l.push(d)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f];u.push(d.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const nR=new He,Gf=new xa,i2=new Bi,iR=new F,zd=new F,Ud=new F,kd=new F,_S=new F,r2=new F,s2=new Se,o2=new Se,a2=new Se,rR=new F,sR=new F,oR=new F,l2=new F,c2=new F;class gt extends Jt{constructor(e=new Gt,t=new Ir){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){r2.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(_S.fromBufferAttribute(f,e),o?r2.addScaledVector(_S,u):r2.addScaledVector(_S.sub(t),u))}t.add(r2)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),i2.copy(i.boundingSphere),i2.applyMatrix4(s),Gf.copy(e.ray).recast(e.near),!(i2.containsPoint(Gf.origin)===!1&&(Gf.intersectSphere(i2,iR)===null||Gf.origin.distanceToSquared(iR)>(e.far-e.near)**2))&&(nR.copy(s).invert(),Gf.copy(e.ray).applyMatrix4(nR),!(i.boundingBox!==null&&Gf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Gf)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,h=s.groups,d=s.drawRange;if(a!==null)if(Array.isArray(o))for(let m=0,g=h.length;m<g;m++){const v=h[m],p=o[v.materialIndex],A=Math.max(v.start,d.start),y=Math.min(a.count,Math.min(v.start+v.count,d.start+d.count));for(let w=A,S=y;w<S;w+=3){const C=a.getX(w),b=a.getX(w+1),M=a.getX(w+2);r=u2(this,p,e,i,c,u,f,C,b,M),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{const m=Math.max(0,d.start),g=Math.min(a.count,d.start+d.count);for(let v=m,p=g;v<p;v+=3){const A=a.getX(v),y=a.getX(v+1),w=a.getX(v+2);r=u2(this,o,e,i,c,u,f,A,y,w),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,g=h.length;m<g;m++){const v=h[m],p=o[v.materialIndex],A=Math.max(v.start,d.start),y=Math.min(l.count,Math.min(v.start+v.count,d.start+d.count));for(let w=A,S=y;w<S;w+=3){const C=w,b=w+1,M=w+2;r=u2(this,p,e,i,c,u,f,C,b,M),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{const m=Math.max(0,d.start),g=Math.min(l.count,d.start+d.count);for(let v=m,p=g;v<p;v+=3){const A=v,y=v+1,w=v+2;r=u2(this,o,e,i,c,u,f,A,y,w),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}}}function Fne(n,e,t,i,r,s,o,a){let l;if(e.side===er?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Rs,a),l===null)return null;c2.copy(a),c2.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(c2);return c<t.near||c>t.far?null:{distance:c,point:c2.clone(),object:n}}function u2(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,zd),n.getVertexPosition(l,Ud),n.getVertexPosition(c,kd);const u=Fne(n,e,t,i,zd,Ud,kd,l2);if(u){r&&(s2.fromBufferAttribute(r,a),o2.fromBufferAttribute(r,l),a2.fromBufferAttribute(r,c),u.uv=vr.getInterpolation(l2,zd,Ud,kd,s2,o2,a2,new Se)),s&&(s2.fromBufferAttribute(s,a),o2.fromBufferAttribute(s,l),a2.fromBufferAttribute(s,c),u.uv1=vr.getInterpolation(l2,zd,Ud,kd,s2,o2,a2,new Se),u.uv2=u.uv1),o&&(rR.fromBufferAttribute(o,a),sR.fromBufferAttribute(o,l),oR.fromBufferAttribute(o,c),u.normal=vr.getInterpolation(l2,zd,Ud,kd,rR,sR,oR,new F),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new F,materialIndex:0};vr.getNormal(zd,Ud,kd,f.normal),u.face=f}return u}class Ms extends Gt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let h=0,d=0;m("z","y","x",-1,-1,i,t,e,o,s,0),m("z","y","x",1,-1,i,t,-e,o,s,1),m("x","z","y",1,1,e,i,t,r,o,2),m("x","z","y",1,-1,e,i,-t,r,o,3),m("x","y","z",1,-1,e,t,i,r,s,4),m("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Et(c,3)),this.setAttribute("normal",new Et(u,3)),this.setAttribute("uv",new Et(f,2));function m(g,v,p,A,y,w,S,C,b,M,I){const T=w/b,D=S/M,R=w/2,z=S/2,L=C/2,H=b+1,J=M+1;let Z=0,U=0;const X=new F;for(let Y=0;Y<J;Y++){const O=Y*D-z;for(let W=0;W<H;W++){const $=W*T-R;X[g]=$*A,X[v]=O*y,X[p]=L,c.push(X.x,X.y,X.z),X[g]=0,X[v]=0,X[p]=C>0?1:-1,u.push(X.x,X.y,X.z),f.push(W/b),f.push(1-Y/M),Z+=1}}for(let Y=0;Y<M;Y++)for(let O=0;O<b;O++){const W=h+O+H*Y,$=h+O+H*(Y+1),k=h+(O+1)+H*(Y+1),V=h+(O+1)+H*Y;l.push(W,$,V),l.push($,k,V),U+=6}a.addGroup(d,U,I),d+=U,h+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ms(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qm(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Cs(n){const e={};for(let t=0;t<n.length;t++){const i=Qm(n[t]);for(const r in i)e[r]=i[r]}return e}function One(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function BH(n){return n.getRenderTarget()===null?n.outputColorSpace:ro}const va={clone:Qm,merge:Cs};var zne=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Une=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Wn extends ur{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=zne,this.fragmentShader=Une,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qm(e.uniforms),this.uniformsGroups=One(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class yf extends Jt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new He,this.projectionMatrix=new He,this.projectionMatrixInverse=new He,this.coordinateSystem=Dl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let mn=class extends yf{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Hm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ih*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Hm*2*Math.atan(Math.tan(Ih*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ih*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Nd=-90,Gd=1;let mE=class extends Jt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null;const r=new mn(Nd,Gd,e,t);r.layers=this.layers,this.add(r);const s=new mn(Nd,Gd,e,t);s.layers=this.layers,this.add(s);const o=new mn(Nd,Gd,e,t);o.layers=this.layers,this.add(o);const a=new mn(Nd,Gd,e,t);a.layers=this.layers,this.add(a);const l=new mn(Nd,Gd,e,t);l.layers=this.layers,this.add(l);const c=new mn(Nd,Gd,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Dl)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===TA)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),f=e.toneMapping,h=e.xr.enabled;e.toneMapping=ma,e.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=d,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=f,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}},sv=class extends Nn{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:zl,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}};class a0 extends Qn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(zg("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Wu?En:Yu),this.texture=new sv(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Xt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ms(5,5,5),s=new Wn({name:"CubemapFromEquirect",uniforms:Qm(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:er,blending:pa});s.uniforms.tEquirect.value=t;const o=new gt(r,s),a=t.minFilter;return t.minFilter===bo&&(t.minFilter=Xt),new mE(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const ES=new F,kne=new F,Nne=new tn;let Hr=class{constructor(e=new F(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=ES.subVectors(i,t).cross(kne.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(ES),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Nne.getNormalMatrix(e),r=this.coplanarPoint(ES).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Hf=new Bi,f2=new F;class l0{constructor(e=new Hr,t=new Hr,i=new Hr,r=new Hr,s=new Hr,o=new Hr){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Dl){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],f=r[6],h=r[7],d=r[8],m=r[9],g=r[10],v=r[11],p=r[12],A=r[13],y=r[14],w=r[15];if(i[0].setComponents(l-s,h-c,v-d,w-p).normalize(),i[1].setComponents(l+s,h+c,v+d,w+p).normalize(),i[2].setComponents(l+o,h+u,v+m,w+A).normalize(),i[3].setComponents(l-o,h-u,v-m,w-A).normalize(),i[4].setComponents(l-a,h-f,v-g,w-y).normalize(),t===Dl)i[5].setComponents(l+a,h+f,v+g,w+y).normalize();else if(t===TA)i[5].setComponents(a,f,g,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Hf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Hf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hf)}intersectsSprite(e){return Hf.center.set(0,0,0),Hf.radius=.7071067811865476,Hf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hf)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(f2.x=r.normal.x>0?e.max.x:e.min.x,f2.y=r.normal.y>0?e.max.y:e.min.y,f2.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(f2)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function PH(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Gne(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const f=c.array,h=c.usage,d=n.createBuffer();n.bindBuffer(u,d),n.bufferData(u,f,h),c.onUploadCallback();let m;if(f instanceof Float32Array)m=n.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)m=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)m=n.SHORT;else if(f instanceof Uint32Array)m=n.UNSIGNED_INT;else if(f instanceof Int32Array)m=n.INT;else if(f instanceof Int8Array)m=n.BYTE;else if(f instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:d,type:m,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,f){const h=u.array,d=u.updateRange;n.bindBuffer(f,c),d.count===-1?n.bufferSubData(f,0,h):(t?n.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):n.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);(!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);f===void 0?i.set(c,r(c,u)):f.version<c.version&&(s(f.buffer,c,u),f.version=c.version)}return{get:o,remove:a,update:l}}class br extends Gt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,f=e/a,h=t/l,d=[],m=[],g=[],v=[];for(let p=0;p<u;p++){const A=p*h-o;for(let y=0;y<c;y++){const w=y*f-s;m.push(w,-A,0),g.push(0,0,1),v.push(y/a),v.push(1-p/l)}}for(let p=0;p<l;p++)for(let A=0;A<a;A++){const y=A+c*p,w=A+c*(p+1),S=A+1+c*(p+1),C=A+1+c*p;d.push(y,w,C),d.push(w,S,C)}this.setIndex(d),this.setAttribute("position",new Et(m,3)),this.setAttribute("normal",new Et(g,3)),this.setAttribute("uv",new Et(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new br(e.width,e.height,e.widthSegments,e.heightSegments)}}var Hne=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Qne=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Vne=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,jne=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Wne=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Yne=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Xne=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,qne=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Jne=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Kne=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,$ne=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Zne=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,eie=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,tie=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,nie=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,iie=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,rie=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,sie=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,oie=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,aie=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,lie=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,cie=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,uie=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,fie=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,hie=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,die=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,pie=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,mie=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,gie="gl_FragColor = linearToOutputTexel( gl_FragColor );",Aie=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,vie=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,yie=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,xie=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_ie=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Eie=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,wie=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Sie=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Cie=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,bie=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Mie=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Iie=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Tie=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Bie=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Pie=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Rie=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Die=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Lie=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Fie=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Oie=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,zie=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Uie=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,kie=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Nie=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Gie=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Hie=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Qie=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Vie=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jie=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Wie=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Yie=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,Xie=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qie=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Jie=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Kie=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,$ie=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Zie=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ere=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,tre=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,nre=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,ire=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,rre=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,sre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ore=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,are=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,lre=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,cre=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,ure=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,fre=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,hre=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,dre=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,pre=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,mre=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,gre=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Are=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vre=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yre=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xre=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_re=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Ere=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wre=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Sre=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Cre=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,bre=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Mre=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Ire=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Tre=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Bre=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Pre=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Rre=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Dre=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Lre=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Fre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ore=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,zre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Ure=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const kre=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Nre=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Hre=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Qre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Vre=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jre=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Wre=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Yre=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Xre=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,qre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Jre=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Kre=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$re=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Zre=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ese=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tse=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nse=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ise=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,rse=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sse=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ose=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ase=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lse=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cse=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,use=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fse=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hse=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dse=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,pse=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mse=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gse=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ase=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vse=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rn={alphahash_fragment:Hne,alphahash_pars_fragment:Qne,alphamap_fragment:Vne,alphamap_pars_fragment:jne,alphatest_fragment:Wne,alphatest_pars_fragment:Yne,aomap_fragment:Xne,aomap_pars_fragment:qne,begin_vertex:Jne,beginnormal_vertex:Kne,bsdfs:$ne,iridescence_fragment:Zne,bumpmap_pars_fragment:eie,clipping_planes_fragment:tie,clipping_planes_pars_fragment:nie,clipping_planes_pars_vertex:iie,clipping_planes_vertex:rie,color_fragment:sie,color_pars_fragment:oie,color_pars_vertex:aie,color_vertex:lie,common:cie,cube_uv_reflection_fragment:uie,defaultnormal_vertex:fie,displacementmap_pars_vertex:hie,displacementmap_vertex:die,emissivemap_fragment:pie,emissivemap_pars_fragment:mie,colorspace_fragment:gie,colorspace_pars_fragment:Aie,envmap_fragment:vie,envmap_common_pars_fragment:yie,envmap_pars_fragment:xie,envmap_pars_vertex:_ie,envmap_physical_pars_fragment:Die,envmap_vertex:Eie,fog_vertex:wie,fog_pars_vertex:Sie,fog_fragment:Cie,fog_pars_fragment:bie,gradientmap_pars_fragment:Mie,lightmap_fragment:Iie,lightmap_pars_fragment:Tie,lights_lambert_fragment:Bie,lights_lambert_pars_fragment:Pie,lights_pars_begin:Rie,lights_toon_fragment:Lie,lights_toon_pars_fragment:Fie,lights_phong_fragment:Oie,lights_phong_pars_fragment:zie,lights_physical_fragment:Uie,lights_physical_pars_fragment:kie,lights_fragment_begin:Nie,lights_fragment_maps:Gie,lights_fragment_end:Hie,logdepthbuf_fragment:Qie,logdepthbuf_pars_fragment:Vie,logdepthbuf_pars_vertex:jie,logdepthbuf_vertex:Wie,map_fragment:Yie,map_pars_fragment:Xie,map_particle_fragment:qie,map_particle_pars_fragment:Jie,metalnessmap_fragment:Kie,metalnessmap_pars_fragment:$ie,morphcolor_vertex:Zie,morphnormal_vertex:ere,morphtarget_pars_vertex:tre,morphtarget_vertex:nre,normal_fragment_begin:ire,normal_fragment_maps:rre,normal_pars_fragment:sre,normal_pars_vertex:ore,normal_vertex:are,normalmap_pars_fragment:lre,clearcoat_normal_fragment_begin:cre,clearcoat_normal_fragment_maps:ure,clearcoat_pars_fragment:fre,iridescence_pars_fragment:hre,opaque_fragment:dre,packing:pre,premultiplied_alpha_fragment:mre,project_vertex:gre,dithering_fragment:Are,dithering_pars_fragment:vre,roughnessmap_fragment:yre,roughnessmap_pars_fragment:xre,shadowmap_pars_fragment:_re,shadowmap_pars_vertex:Ere,shadowmap_vertex:wre,shadowmask_pars_fragment:Sre,skinbase_vertex:Cre,skinning_pars_vertex:bre,skinning_vertex:Mre,skinnormal_vertex:Ire,specularmap_fragment:Tre,specularmap_pars_fragment:Bre,tonemapping_fragment:Pre,tonemapping_pars_fragment:Rre,transmission_fragment:Dre,transmission_pars_fragment:Lre,uv_pars_fragment:Fre,uv_pars_vertex:Ore,uv_vertex:zre,worldpos_vertex:Ure,background_vert:kre,background_frag:Nre,backgroundCube_vert:Gre,backgroundCube_frag:Hre,cube_vert:Qre,cube_frag:Vre,depth_vert:jre,depth_frag:Wre,distanceRGBA_vert:Yre,distanceRGBA_frag:Xre,equirect_vert:qre,equirect_frag:Jre,linedashed_vert:Kre,linedashed_frag:$re,meshbasic_vert:Zre,meshbasic_frag:ese,meshlambert_vert:tse,meshlambert_frag:nse,meshmatcap_vert:ise,meshmatcap_frag:rse,meshnormal_vert:sse,meshnormal_frag:ose,meshphong_vert:ase,meshphong_frag:lse,meshphysical_vert:cse,meshphysical_frag:use,meshtoon_vert:fse,meshtoon_frag:hse,points_vert:dse,points_frag:pse,shadow_vert:mse,shadow_frag:gse,sprite_vert:Ase,sprite_frag:vse},Ct={common:{diffuse:{value:new et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new tn},alphaMap:{value:null},alphaMapTransform:{value:new tn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new tn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new tn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new tn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new tn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new tn},normalScale:{value:new Se(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new tn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new tn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new tn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new tn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new tn},alphaTest:{value:0},uvTransform:{value:new tn}},sprite:{diffuse:{value:new et(16777215)},opacity:{value:1},center:{value:new Se(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new tn},alphaMap:{value:null},alphaMapTransform:{value:new tn},alphaTest:{value:0}}},Ga={basic:{uniforms:Cs([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:rn.meshbasic_vert,fragmentShader:rn.meshbasic_frag},lambert:{uniforms:Cs([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new et(0)}}]),vertexShader:rn.meshlambert_vert,fragmentShader:rn.meshlambert_frag},phong:{uniforms:Cs([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new et(0)},specular:{value:new et(1118481)},shininess:{value:30}}]),vertexShader:rn.meshphong_vert,fragmentShader:rn.meshphong_frag},standard:{uniforms:Cs([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag},toon:{uniforms:Cs([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new et(0)}}]),vertexShader:rn.meshtoon_vert,fragmentShader:rn.meshtoon_frag},matcap:{uniforms:Cs([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:rn.meshmatcap_vert,fragmentShader:rn.meshmatcap_frag},points:{uniforms:Cs([Ct.points,Ct.fog]),vertexShader:rn.points_vert,fragmentShader:rn.points_frag},dashed:{uniforms:Cs([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rn.linedashed_vert,fragmentShader:rn.linedashed_frag},depth:{uniforms:Cs([Ct.common,Ct.displacementmap]),vertexShader:rn.depth_vert,fragmentShader:rn.depth_frag},normal:{uniforms:Cs([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:rn.meshnormal_vert,fragmentShader:rn.meshnormal_frag},sprite:{uniforms:Cs([Ct.sprite,Ct.fog]),vertexShader:rn.sprite_vert,fragmentShader:rn.sprite_frag},background:{uniforms:{uvTransform:{value:new tn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rn.background_vert,fragmentShader:rn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:rn.backgroundCube_vert,fragmentShader:rn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rn.cube_vert,fragmentShader:rn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rn.equirect_vert,fragmentShader:rn.equirect_frag},distanceRGBA:{uniforms:Cs([Ct.common,Ct.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rn.distanceRGBA_vert,fragmentShader:rn.distanceRGBA_frag},shadow:{uniforms:Cs([Ct.lights,Ct.fog,{color:{value:new et(0)},opacity:{value:1}}]),vertexShader:rn.shadow_vert,fragmentShader:rn.shadow_frag}};Ga.physical={uniforms:Cs([Ga.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new tn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new tn},clearcoatNormalScale:{value:new Se(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new tn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new tn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new tn},sheen:{value:0},sheenColor:{value:new et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new tn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new tn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new tn},transmissionSamplerSize:{value:new Se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new tn},attenuationDistance:{value:0},attenuationColor:{value:new et(0)},specularColor:{value:new et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new tn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new tn},anisotropyVector:{value:new Se},anisotropyMap:{value:null},anisotropyMapTransform:{value:new tn}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag};const h2={r:0,b:0,g:0};function yse(n,e,t,i,r,s,o){const a=new et(0);let l=s===!0?0:1,c,u,f=null,h=0,d=null;function m(v,p){let A=!1,y=p.isScene===!0?p.background:null;switch(y&&y.isTexture&&(y=(p.backgroundBlurriness>0?t:e).get(y)),y===null?g(a,l):y&&y.isColor&&(g(y,1),A=!0),n.xr.getEnvironmentBlendMode()){case"opaque":A=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),A=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),A=!0;break}(n.autoClear||A)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||y.mapping===o0)?(u===void 0&&(u=new gt(new Ms(1,1,1),new Wn({name:"BackgroundCubeMaterial",uniforms:Qm(Ga.backgroundCube.uniforms),vertexShader:Ga.backgroundCube.vertexShader,fragmentShader:Ga.backgroundCube.fragmentShader,side:er,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,b,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=y.colorSpace!==En,(f!==y||h!==y.version||d!==n.toneMapping)&&(u.material.needsUpdate=!0,f=y,h=y.version,d=n.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(c===void 0&&(c=new gt(new br(2,2),new Wn({name:"BackgroundMaterial",uniforms:Qm(Ga.background.uniforms),vertexShader:Ga.background.vertexShader,fragmentShader:Ga.background.fragmentShader,side:Rs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=y,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=y.colorSpace!==En,y.matrixAutoUpdate===!0&&y.updateMatrix(),c.material.uniforms.uvTransform.value.copy(y.matrix),(f!==y||h!==y.version||d!==n.toneMapping)&&(c.material.needsUpdate=!0,f=y,h=y.version,d=n.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function g(v,p){v.getRGB(h2,BH(n)),i.buffers.color.setClear(h2.r,h2.g,h2.b,p,o)}return{getClearColor:function(){return a},setClearColor:function(v,p=1){a.set(v),l=p,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,g(a,l)},render:m}}function xse(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=v(null);let c=l,u=!1;function f(L,H,J,Z,U){let X=!1;if(o){const Y=g(Z,J,H);c!==Y&&(c=Y,d(c.object)),X=p(L,Z,J,U),X&&A(L,Z,J,U)}else{const Y=H.wireframe===!0;(c.geometry!==Z.id||c.program!==J.id||c.wireframe!==Y)&&(c.geometry=Z.id,c.program=J.id,c.wireframe=Y,X=!0)}U!==null&&t.update(U,n.ELEMENT_ARRAY_BUFFER),(X||u)&&(u=!1,M(L,H,J,Z),U!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(U).buffer))}function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function d(L){return i.isWebGL2?n.bindVertexArray(L):s.bindVertexArrayOES(L)}function m(L){return i.isWebGL2?n.deleteVertexArray(L):s.deleteVertexArrayOES(L)}function g(L,H,J){const Z=J.wireframe===!0;let U=a[L.id];U===void 0&&(U={},a[L.id]=U);let X=U[H.id];X===void 0&&(X={},U[H.id]=X);let Y=X[Z];return Y===void 0&&(Y=v(h()),X[Z]=Y),Y}function v(L){const H=[],J=[],Z=[];for(let U=0;U<r;U++)H[U]=0,J[U]=0,Z[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:J,attributeDivisors:Z,object:L,attributes:{},index:null}}function p(L,H,J,Z){const U=c.attributes,X=H.attributes;let Y=0;const O=J.getAttributes();for(const W in O)if(O[W].location>=0){const k=U[W];let V=X[W];if(V===void 0&&(W==="instanceMatrix"&&L.instanceMatrix&&(V=L.instanceMatrix),W==="instanceColor"&&L.instanceColor&&(V=L.instanceColor)),k===void 0||k.attribute!==V||V&&k.data!==V.data)return!0;Y++}return c.attributesNum!==Y||c.index!==Z}function A(L,H,J,Z){const U={},X=H.attributes;let Y=0;const O=J.getAttributes();for(const W in O)if(O[W].location>=0){let k=X[W];k===void 0&&(W==="instanceMatrix"&&L.instanceMatrix&&(k=L.instanceMatrix),W==="instanceColor"&&L.instanceColor&&(k=L.instanceColor));const V={};V.attribute=k,k&&k.data&&(V.data=k.data),U[W]=V,Y++}c.attributes=U,c.attributesNum=Y,c.index=Z}function y(){const L=c.newAttributes;for(let H=0,J=L.length;H<J;H++)L[H]=0}function w(L){S(L,0)}function S(L,H){const J=c.newAttributes,Z=c.enabledAttributes,U=c.attributeDivisors;J[L]=1,Z[L]===0&&(n.enableVertexAttribArray(L),Z[L]=1),U[L]!==H&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,H),U[L]=H)}function C(){const L=c.newAttributes,H=c.enabledAttributes;for(let J=0,Z=H.length;J<Z;J++)H[J]!==L[J]&&(n.disableVertexAttribArray(J),H[J]=0)}function b(L,H,J,Z,U,X,Y){Y===!0?n.vertexAttribIPointer(L,H,J,U,X):n.vertexAttribPointer(L,H,J,Z,U,X)}function M(L,H,J,Z){if(i.isWebGL2===!1&&(L.isInstancedMesh||Z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const U=Z.attributes,X=J.getAttributes(),Y=H.defaultAttributeValues;for(const O in X){const W=X[O];if(W.location>=0){let $=U[O];if($===void 0&&(O==="instanceMatrix"&&L.instanceMatrix&&($=L.instanceMatrix),O==="instanceColor"&&L.instanceColor&&($=L.instanceColor)),$!==void 0){const k=$.normalized,V=$.itemSize,Q=t.get($);if(Q===void 0)continue;const j=Q.buffer,oe=Q.type,xe=Q.bytesPerElement,pe=i.isWebGL2===!0&&(oe===n.INT||oe===n.UNSIGNED_INT||$.gpuType===bh);if($.isInterleavedBufferAttribute){const de=$.data,te=de.stride,Ee=$.offset;if(de.isInstancedInterleavedBuffer){for(let ue=0;ue<W.locationSize;ue++)S(W.location+ue,de.meshPerAttribute);L.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let ue=0;ue<W.locationSize;ue++)w(W.location+ue);n.bindBuffer(n.ARRAY_BUFFER,j);for(let ue=0;ue<W.locationSize;ue++)b(W.location+ue,V/W.locationSize,oe,k,te*xe,(Ee+V/W.locationSize*ue)*xe,pe)}else{if($.isInstancedBufferAttribute){for(let de=0;de<W.locationSize;de++)S(W.location+de,$.meshPerAttribute);L.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let de=0;de<W.locationSize;de++)w(W.location+de);n.bindBuffer(n.ARRAY_BUFFER,j);for(let de=0;de<W.locationSize;de++)b(W.location+de,V/W.locationSize,oe,k,V*xe,V/W.locationSize*de*xe,pe)}}else if(Y!==void 0){const k=Y[O];if(k!==void 0)switch(k.length){case 2:n.vertexAttrib2fv(W.location,k);break;case 3:n.vertexAttrib3fv(W.location,k);break;case 4:n.vertexAttrib4fv(W.location,k);break;default:n.vertexAttrib1fv(W.location,k)}}}}C()}function I(){R();for(const L in a){const H=a[L];for(const J in H){const Z=H[J];for(const U in Z)m(Z[U].object),delete Z[U];delete H[J]}delete a[L]}}function T(L){if(a[L.id]===void 0)return;const H=a[L.id];for(const J in H){const Z=H[J];for(const U in Z)m(Z[U].object),delete Z[U];delete H[J]}delete a[L.id]}function D(L){for(const H in a){const J=a[H];if(J[L.id]===void 0)continue;const Z=J[L.id];for(const U in Z)m(Z[U].object),delete Z[U];delete J[L.id]}}function R(){z(),u=!0,c!==l&&(c=l,d(c.object))}function z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:R,resetDefaultState:z,dispose:I,releaseStatesOfGeometry:T,releaseStatesOfProgram:D,initAttributes:y,enableAttribute:w,disableUnusedAttributes:C}}function _se(n,e,t,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,f){if(f===0)return;let h,d;if(r)h=n,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](s,c,u,f),t.update(u,s,f)}this.setMode=o,this.render=a,this.renderInstances=l}function Ese(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const b=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(b){if(b==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return b==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_TEXTURE_SIZE),m=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),v=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),p=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,w=o||e.has("OES_texture_float"),S=y&&w,C=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:v,maxVaryings:p,maxFragmentUniforms:A,vertexTextures:y,floatFragmentTextures:w,floatVertexTextures:S,maxSamples:C}}function wse(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Hr,a=new tn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const d=f.length!==0||h||i!==0||r;return r=h,i=f.length,d},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){t=u(f,h,0)},this.setState=function(f,h,d){const m=f.clippingPlanes,g=f.clipIntersection,v=f.clipShadows,p=n.get(f);if(!r||m===null||m.length===0||s&&!v)s?u(null):c();else{const A=s?0:i,y=A*4;let w=p.clippingState||null;l.value=w,w=u(m,h,y,d);for(let S=0;S!==y;++S)w[S]=t[S];p.clippingState=w,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,h,d,m){const g=f!==null?f.length:0;let v=null;if(g!==0){if(v=l.value,m!==!0||v===null){const p=d+g*4,A=h.matrixWorldInverse;a.getNormalMatrix(A),(v===null||v.length<p)&&(v=new Float32Array(p));for(let y=0,w=d;y!==g;++y,w+=4)o.copy(f[y]).applyMatrix4(A,a),o.normal.toArray(v,w),v[w+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,v}}function Sse(n){let e=new WeakMap;function t(o,a){return a===af?o.mapping=zl:a===wA&&(o.mapping=of),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===af||a===wA)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new a0(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}let ti=class extends yf{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const lm=4,aR=[.125,.215,.35,.446,.526,.582],lh=20,wS=new ti,lR=new et;let SS=null;const oh=(1+Math.sqrt(5))/2,Hd=1/oh,cR=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,oh,Hd),new F(0,oh,-Hd),new F(Hd,0,oh),new F(-Hd,0,oh),new F(oh,Hd,0),new F(-oh,Hd,0)];class MM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){SS=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=hR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=fR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(SS),e.scissorTest=!1,d2(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===zl||e.mapping===of?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),SS=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Xt,minFilter:Xt,generateMipmaps:!1,type:jn,format:Vn,colorSpace:ro,depthBuffer:!1},r=uR(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=uR(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Cse(s)),this._blurMaterial=bse(s,e,t)}return r}_compileMaterial(e){const t=new gt(this._lodPlanes[0],e);this._renderer.compile(t,wS)}_sceneToCubeUV(e,t,i,r){const a=new mn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(lR),u.toneMapping=ma,u.autoClear=!1;const d=new Ir({name:"PMREM.Background",side:er,depthWrite:!1,depthTest:!1}),m=new gt(new Ms,d);let g=!1;const v=e.background;v?v.isColor&&(d.color.copy(v),e.background=null,g=!0):(d.color.copy(lR),g=!0);for(let p=0;p<6;p++){const A=p%3;A===0?(a.up.set(0,l[p],0),a.lookAt(c[p],0,0)):A===1?(a.up.set(0,0,l[p]),a.lookAt(0,c[p],0)):(a.up.set(0,l[p],0),a.lookAt(0,0,c[p]));const y=this._cubeSize;d2(r,A*y,p>2?y:0,y,y),u.setRenderTarget(r),g&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===zl||e.mapping===of;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=hR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=fR());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new gt(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;d2(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,wS)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=cR[(r-1)%cR.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new gt(this._lodPlanes[r],c),h=c.uniforms,d=this._sizeLods[i]-1,m=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*lh-1),g=s/m,v=isFinite(s)?1+Math.floor(u*g):lh;v>lh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${lh}`);const p=[];let A=0;for(let b=0;b<lh;++b){const M=b/g,I=Math.exp(-M*M/2);p.push(I),b===0?A+=I:b<v&&(A+=2*I)}for(let b=0;b<p.length;b++)p[b]=p[b]/A;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=p,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:y}=this;h.dTheta.value=m,h.mipInt.value=y-i;const w=this._sizeLods[r],S=3*w*(r>y-lm?r-y+lm:0),C=4*(this._cubeSize-w);d2(t,S,C,3*w,2*w),l.setRenderTarget(t),l.render(f,wS)}}function Cse(n){const e=[],t=[],i=[];let r=n;const s=n-lm+1+aR.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-lm?l=aR[o-n+lm-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,m=6,g=3,v=2,p=1,A=new Float32Array(g*m*d),y=new Float32Array(v*m*d),w=new Float32Array(p*m*d);for(let C=0;C<d;C++){const b=C%3*2/3-1,M=C>2?0:-1,I=[b,M,0,b+2/3,M,0,b+2/3,M+1,0,b,M,0,b+2/3,M+1,0,b,M+1,0];A.set(I,g*m*C),y.set(h,v*m*C);const T=[C,C,C,C,C,C];w.set(T,p*m*C)}const S=new Gt;S.setAttribute("position",new qt(A,g)),S.setAttribute("uv",new qt(y,v)),S.setAttribute("faceIndex",new qt(w,p)),e.push(S),r>lm&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function uR(n,e,t){const i=new Qn(n,e,t);return i.texture.mapping=o0,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function d2(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function bse(n,e,t){const i=new Float32Array(lh),r=new F(0,1,0);return new Wn({name:"SphericalGaussianBlur",defines:{n:lh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:ST(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:pa,depthTest:!1,depthWrite:!1})}function fR(){return new Wn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ST(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:pa,depthTest:!1,depthWrite:!1})}function hR(){return new Wn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ST(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:pa,depthTest:!1,depthWrite:!1})}function ST(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Mse(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===af||l===wA,u=l===zl||l===of;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new MM(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||u&&f&&r(f)){t===null&&(t=new MM(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function Ise(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Tse(n,e,t,i){const r={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);for(const m in h.morphAttributes){const g=h.morphAttributes[m];for(let v=0,p=g.length;v<p;v++)e.remove(g[v])}h.removeEventListener("dispose",o),delete r[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(f,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h}function l(f){const h=f.attributes;for(const m in h)e.update(h[m],n.ARRAY_BUFFER);const d=f.morphAttributes;for(const m in d){const g=d[m];for(let v=0,p=g.length;v<p;v++)e.update(g[v],n.ARRAY_BUFFER)}}function c(f){const h=[],d=f.index,m=f.attributes.position;let g=0;if(d!==null){const A=d.array;g=d.version;for(let y=0,w=A.length;y<w;y+=3){const S=A[y+0],C=A[y+1],b=A[y+2];h.push(S,C,C,b,b,S)}}else{const A=m.array;g=m.version;for(let y=0,w=A.length/3-1;y<w;y+=3){const S=y+0,C=y+1,b=y+2;h.push(S,C,C,b,b,S)}}const v=new(IH(h)?wT:pE)(h,1);v.version=g;const p=s.get(f);p&&e.remove(p),s.set(f,v)}function u(f){const h=s.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function Bse(n,e,t,i){const r=i.isWebGL2;let s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,d){n.drawElements(s,d,a,h*l),t.update(d,s,1)}function f(h,d,m){if(m===0)return;let g,v;if(r)g=n,v="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](s,d,a,h*l,m),t.update(d,s,m)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f}function Pse(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Rse(n,e){return n[0]-e[0]}function Dse(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Lse(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new sn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,f){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const d=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=d!==void 0?d.length:0;let g=s.get(u);if(g===void 0||g.count!==m){let L=function(){R.dispose(),s.delete(u),u.removeEventListener("dispose",L)};g!==void 0&&g.texture.dispose();const A=u.morphAttributes.position!==void 0,y=u.morphAttributes.normal!==void 0,w=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],b=u.morphAttributes.color||[];let M=0;A===!0&&(M=1),y===!0&&(M=2),w===!0&&(M=3);let I=u.attributes.position.count*M,T=1;I>e.maxTextureSize&&(T=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const D=new Float32Array(I*T*4*m),R=new dE(D,I,T,m);R.type=Ln,R.needsUpdate=!0;const z=M*4;for(let H=0;H<m;H++){const J=S[H],Z=C[H],U=b[H],X=I*T*4*H;for(let Y=0;Y<J.count;Y++){const O=Y*z;A===!0&&(o.fromBufferAttribute(J,Y),D[X+O+0]=o.x,D[X+O+1]=o.y,D[X+O+2]=o.z,D[X+O+3]=0),y===!0&&(o.fromBufferAttribute(Z,Y),D[X+O+4]=o.x,D[X+O+5]=o.y,D[X+O+6]=o.z,D[X+O+7]=0),w===!0&&(o.fromBufferAttribute(U,Y),D[X+O+8]=o.x,D[X+O+9]=o.y,D[X+O+10]=o.z,D[X+O+11]=U.itemSize===4?o.w:1)}}g={count:m,texture:R,size:new Se(I,T)},s.set(u,g),u.addEventListener("dispose",L)}let v=0;for(let A=0;A<h.length;A++)v+=h[A];const p=u.morphTargetsRelative?1:1-v;f.getUniforms().setValue(n,"morphTargetBaseInfluence",p),f.getUniforms().setValue(n,"morphTargetInfluences",h),f.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const d=h===void 0?0:h.length;let m=i[u.id];if(m===void 0||m.length!==d){m=[];for(let y=0;y<d;y++)m[y]=[y,0];i[u.id]=m}for(let y=0;y<d;y++){const w=m[y];w[0]=y,w[1]=h[y]}m.sort(Dse);for(let y=0;y<8;y++)y<d&&m[y][1]?(a[y][0]=m[y][0],a[y][1]=m[y][1]):(a[y][0]=Number.MAX_SAFE_INTEGER,a[y][1]=0);a.sort(Rse);const g=u.morphAttributes.position,v=u.morphAttributes.normal;let p=0;for(let y=0;y<8;y++){const w=a[y],S=w[0],C=w[1];S!==Number.MAX_SAFE_INTEGER&&C?(g&&u.getAttribute("morphTarget"+y)!==g[S]&&u.setAttribute("morphTarget"+y,g[S]),v&&u.getAttribute("morphNormal"+y)!==v[S]&&u.setAttribute("morphNormal"+y,v[S]),r[y]=C,p+=C):(g&&u.hasAttribute("morphTarget"+y)===!0&&u.deleteAttribute("morphTarget"+y),v&&u.hasAttribute("morphNormal"+y)===!0&&u.deleteAttribute("morphNormal"+y),r[y]=0)}const A=u.morphTargetsRelative?1:1-p;f.getUniforms().setValue(n,"morphTargetBaseInfluence",A),f.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function Fse(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const RH=new Nn,DH=new dE,LH=new ET,FH=new sv,dR=[],pR=[],mR=new Float32Array(16),gR=new Float32Array(9),AR=new Float32Array(4);function c0(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=dR[r];if(s===void 0&&(s=new Float32Array(r),dR[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Pr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Rr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function gE(n,e){let t=pR[e];t===void 0&&(t=new Int32Array(e),pR[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Ose(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function zse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pr(t,e))return;n.uniform2fv(this.addr,e),Rr(t,e)}}function Use(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Pr(t,e))return;n.uniform3fv(this.addr,e),Rr(t,e)}}function kse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pr(t,e))return;n.uniform4fv(this.addr,e),Rr(t,e)}}function Nse(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Rr(t,e)}else{if(Pr(t,i))return;AR.set(i),n.uniformMatrix2fv(this.addr,!1,AR),Rr(t,i)}}function Gse(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Rr(t,e)}else{if(Pr(t,i))return;gR.set(i),n.uniformMatrix3fv(this.addr,!1,gR),Rr(t,i)}}function Hse(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Rr(t,e)}else{if(Pr(t,i))return;mR.set(i),n.uniformMatrix4fv(this.addr,!1,mR),Rr(t,i)}}function Qse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Vse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pr(t,e))return;n.uniform2iv(this.addr,e),Rr(t,e)}}function jse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pr(t,e))return;n.uniform3iv(this.addr,e),Rr(t,e)}}function Wse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pr(t,e))return;n.uniform4iv(this.addr,e),Rr(t,e)}}function Yse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Xse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pr(t,e))return;n.uniform2uiv(this.addr,e),Rr(t,e)}}function qse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pr(t,e))return;n.uniform3uiv(this.addr,e),Rr(t,e)}}function Jse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pr(t,e))return;n.uniform4uiv(this.addr,e),Rr(t,e)}}function Kse(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||RH,r)}function $se(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||LH,r)}function Zse(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||FH,r)}function eoe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||DH,r)}function toe(n){switch(n){case 5126:return Ose;case 35664:return zse;case 35665:return Use;case 35666:return kse;case 35674:return Nse;case 35675:return Gse;case 35676:return Hse;case 5124:case 35670:return Qse;case 35667:case 35671:return Vse;case 35668:case 35672:return jse;case 35669:case 35673:return Wse;case 5125:return Yse;case 36294:return Xse;case 36295:return qse;case 36296:return Jse;case 35678:case 36198:case 36298:case 36306:case 35682:return Kse;case 35679:case 36299:case 36307:return $se;case 35680:case 36300:case 36308:case 36293:return Zse;case 36289:case 36303:case 36311:case 36292:return eoe}}function noe(n,e){n.uniform1fv(this.addr,e)}function ioe(n,e){const t=c0(e,this.size,2);n.uniform2fv(this.addr,t)}function roe(n,e){const t=c0(e,this.size,3);n.uniform3fv(this.addr,t)}function soe(n,e){const t=c0(e,this.size,4);n.uniform4fv(this.addr,t)}function ooe(n,e){const t=c0(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function aoe(n,e){const t=c0(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function loe(n,e){const t=c0(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function coe(n,e){n.uniform1iv(this.addr,e)}function uoe(n,e){n.uniform2iv(this.addr,e)}function foe(n,e){n.uniform3iv(this.addr,e)}function hoe(n,e){n.uniform4iv(this.addr,e)}function doe(n,e){n.uniform1uiv(this.addr,e)}function poe(n,e){n.uniform2uiv(this.addr,e)}function moe(n,e){n.uniform3uiv(this.addr,e)}function goe(n,e){n.uniform4uiv(this.addr,e)}function Aoe(n,e,t){const i=this.cache,r=e.length,s=gE(t,r);Pr(i,s)||(n.uniform1iv(this.addr,s),Rr(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||RH,s[o])}function voe(n,e,t){const i=this.cache,r=e.length,s=gE(t,r);Pr(i,s)||(n.uniform1iv(this.addr,s),Rr(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||LH,s[o])}function yoe(n,e,t){const i=this.cache,r=e.length,s=gE(t,r);Pr(i,s)||(n.uniform1iv(this.addr,s),Rr(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||FH,s[o])}function xoe(n,e,t){const i=this.cache,r=e.length,s=gE(t,r);Pr(i,s)||(n.uniform1iv(this.addr,s),Rr(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||DH,s[o])}function _oe(n){switch(n){case 5126:return noe;case 35664:return ioe;case 35665:return roe;case 35666:return soe;case 35674:return ooe;case 35675:return aoe;case 35676:return loe;case 5124:case 35670:return coe;case 35667:case 35671:return uoe;case 35668:case 35672:return foe;case 35669:case 35673:return hoe;case 5125:return doe;case 36294:return poe;case 36295:return moe;case 36296:return goe;case 35678:case 36198:case 36298:case 36306:case 35682:return Aoe;case 35679:case 36299:case 36307:return voe;case 35680:case 36300:case 36308:case 36293:return yoe;case 36289:case 36303:case 36311:case 36292:return xoe}}class Eoe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=toe(t.type)}}class woe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=_oe(t.type)}}class Soe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const CS=/(\w+)(\])?(\[|\.)?/g;function vR(n,e){n.seq.push(e),n.map[e.id]=e}function Coe(n,e,t){const i=n.name,r=i.length;for(CS.lastIndex=0;;){const s=CS.exec(i),o=CS.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){vR(t,c===void 0?new Eoe(a,n,e):new woe(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new Soe(a),vR(t,f)),t=f}}}class u_{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Coe(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function yR(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let boe=0;function Moe(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function Ioe(n){switch(n){case ro:return["Linear","( value )"];case En:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function xR(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Moe(n.getShaderSource(e),o)}else return r}function Toe(n,e){const t=Ioe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Boe(n,e){let t;switch(e){case iH:t="Linear";break;case rH:t="Reinhard";break;case sH:t="OptimizedCineon";break;case fT:t="ACESFilmic";break;case oH:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Poe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(hg).join(`
`)}function Roe(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Doe(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function hg(n){return n!==""}function _R(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ER(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Loe=/^[ \t]*#include +<([\w\d./]+)>/gm;function IM(n){return n.replace(Loe,Ooe)}const Foe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Ooe(n,e){let t=rn[e];if(t===void 0){const i=Foe.get(e);if(i!==void 0)t=rn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return IM(t)}const zoe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function wR(n){return n.replace(zoe,Uoe)}function Uoe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function SR(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function koe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===rE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Rg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===za&&(e="SHADOWMAP_TYPE_VSM"),e}function Noe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case zl:case of:e="ENVMAP_TYPE_CUBE";break;case o0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Goe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case of:e="ENVMAP_MODE_REFRACTION";break}return e}function Hoe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case iv:e="ENVMAP_BLENDING_MULTIPLY";break;case tH:e="ENVMAP_BLENDING_MIX";break;case nH:e="ENVMAP_BLENDING_ADD";break}return e}function Qoe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Voe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=koe(t),c=Noe(t),u=Goe(t),f=Hoe(t),h=Qoe(t),d=t.isWebGL2?"":Poe(t),m=Roe(s),g=r.createProgram();let v,p,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(hg).join(`
`),v.length>0&&(v+=`
`),p=[d,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(hg).join(`
`),p.length>0&&(p+=`
`)):(v=[SR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(hg).join(`
`),p=[d,SR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ma?"#define TONE_MAPPING":"",t.toneMapping!==ma?rn.tonemapping_pars_fragment:"",t.toneMapping!==ma?Boe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",rn.colorspace_pars_fragment,Toe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(hg).join(`
`)),o=IM(o),o=_R(o,t),o=ER(o,t),a=IM(a),a=_R(a,t),a=ER(a,t),o=wR(o),a=wR(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,p=["#define varying in",t.glslVersion===CM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===CM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const y=A+v+o,w=A+p+a,S=yR(r,r.VERTEX_SHADER,y),C=yR(r,r.FRAGMENT_SHADER,w);if(r.attachShader(g,S),r.attachShader(g,C),t.index0AttributeName!==void 0?r.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),n.debug.checkShaderErrors){const I=r.getProgramInfoLog(g).trim(),T=r.getShaderInfoLog(S).trim(),D=r.getShaderInfoLog(C).trim();let R=!0,z=!0;if(r.getProgramParameter(g,r.LINK_STATUS)===!1)if(R=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,g,S,C);else{const L=xR(r,S,"vertex"),H=xR(r,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+`

Program Info Log: `+I+`
`+L+`
`+H)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(T===""||D==="")&&(z=!1);z&&(this.diagnostics={runnable:R,programLog:I,vertexShader:{log:T,prefix:v},fragmentShader:{log:D,prefix:p}})}r.deleteShader(S),r.deleteShader(C);let b;this.getUniforms=function(){return b===void 0&&(b=new u_(r,g)),b};let M;return this.getAttributes=function(){return M===void 0&&(M=Doe(r,g)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=boe++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=S,this.fragmentShader=C,this}let joe=0;class Woe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Yoe(e),t.set(e,i)),i}}class Yoe{constructor(e){this.id=joe++,this.code=e,this.usedTimes=0}}function Xoe(n,e,t,i,r,s,o){const a=new Th,l=new Woe,c=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,h=r.vertexTextures;let d=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(I){return I===0?"uv":`uv${I}`}function v(I,T,D,R,z){const L=R.fog,H=z.geometry,J=I.isMeshStandardMaterial?R.environment:null,Z=(I.isMeshStandardMaterial?t:e).get(I.envMap||J),U=Z&&Z.mapping===o0?Z.image.height:null,X=m[I.type];I.precision!==null&&(d=r.getMaxPrecision(I.precision),d!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",d,"instead."));const Y=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,O=Y!==void 0?Y.length:0;let W=0;H.morphAttributes.position!==void 0&&(W=1),H.morphAttributes.normal!==void 0&&(W=2),H.morphAttributes.color!==void 0&&(W=3);let $,k,V,Q;if(X){const Fe=Ga[X];$=Fe.vertexShader,k=Fe.fragmentShader}else $=I.vertexShader,k=I.fragmentShader,l.update(I),V=l.getVertexShaderID(I),Q=l.getFragmentShaderID(I);const j=n.getRenderTarget(),oe=z.isInstancedMesh===!0,xe=!!I.map,pe=!!I.matcap,de=!!Z,te=!!I.aoMap,Ee=!!I.lightMap,ue=!!I.bumpMap,ve=!!I.normalMap,ye=!!I.displacementMap,Be=!!I.emissiveMap,ae=!!I.metalnessMap,ie=!!I.roughnessMap,be=I.anisotropy>0,Re=I.clearcoat>0,ct=I.iridescence>0,se=I.sheen>0,ee=I.transmission>0,Ae=be&&!!I.anisotropyMap,Ue=Re&&!!I.clearcoatMap,Ce=Re&&!!I.clearcoatNormalMap,ke=Re&&!!I.clearcoatRoughnessMap,We=ct&&!!I.iridescenceMap,Xe=ct&&!!I.iridescenceThicknessMap,Oe=se&&!!I.sheenColorMap,ft=se&&!!I.sheenRoughnessMap,lt=!!I.specularMap,st=!!I.specularColorMap,ce=!!I.specularIntensityMap,De=ee&&!!I.transmissionMap,$e=ee&&!!I.thicknessMap,Ye=!!I.gradientMap,fe=!!I.alphaMap,_e=I.alphaTest>0,Me=!!I.alphaHash,at=!!I.extensions,ot=!!H.attributes.uv1,yt=!!H.attributes.uv2,we=!!H.attributes.uv3;return{isWebGL2:u,shaderID:X,shaderType:I.type,shaderName:I.name,vertexShader:$,fragmentShader:k,defines:I.defines,customVertexShaderID:V,customFragmentShaderID:Q,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:d,instancing:oe,instancingColor:oe&&z.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:j===null?n.outputColorSpace:j.isXRRenderTarget===!0?j.texture.colorSpace:ro,map:xe,matcap:pe,envMap:de,envMapMode:de&&Z.mapping,envMapCubeUVHeight:U,aoMap:te,lightMap:Ee,bumpMap:ue,normalMap:ve,displacementMap:h&&ye,emissiveMap:Be,normalMapObjectSpace:ve&&I.normalMapType===gH,normalMapTangentSpace:ve&&I.normalMapType===vf,metalnessMap:ae,roughnessMap:ie,anisotropy:be,anisotropyMap:Ae,clearcoat:Re,clearcoatMap:Ue,clearcoatNormalMap:Ce,clearcoatRoughnessMap:ke,iridescence:ct,iridescenceMap:We,iridescenceThicknessMap:Xe,sheen:se,sheenColorMap:Oe,sheenRoughnessMap:ft,specularMap:lt,specularColorMap:st,specularIntensityMap:ce,transmission:ee,transmissionMap:De,thicknessMap:$e,gradientMap:Ye,opaque:I.transparent===!1&&I.blending===Vu,alphaMap:fe,alphaTest:_e,alphaHash:Me,combine:I.combine,mapUv:xe&&g(I.map.channel),aoMapUv:te&&g(I.aoMap.channel),lightMapUv:Ee&&g(I.lightMap.channel),bumpMapUv:ue&&g(I.bumpMap.channel),normalMapUv:ve&&g(I.normalMap.channel),displacementMapUv:ye&&g(I.displacementMap.channel),emissiveMapUv:Be&&g(I.emissiveMap.channel),metalnessMapUv:ae&&g(I.metalnessMap.channel),roughnessMapUv:ie&&g(I.roughnessMap.channel),anisotropyMapUv:Ae&&g(I.anisotropyMap.channel),clearcoatMapUv:Ue&&g(I.clearcoatMap.channel),clearcoatNormalMapUv:Ce&&g(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ke&&g(I.clearcoatRoughnessMap.channel),iridescenceMapUv:We&&g(I.iridescenceMap.channel),iridescenceThicknessMapUv:Xe&&g(I.iridescenceThicknessMap.channel),sheenColorMapUv:Oe&&g(I.sheenColorMap.channel),sheenRoughnessMapUv:ft&&g(I.sheenRoughnessMap.channel),specularMapUv:lt&&g(I.specularMap.channel),specularColorMapUv:st&&g(I.specularColorMap.channel),specularIntensityMapUv:ce&&g(I.specularIntensityMap.channel),transmissionMapUv:De&&g(I.transmissionMap.channel),thicknessMapUv:$e&&g(I.thicknessMap.channel),alphaMapUv:fe&&g(I.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(ve||be),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,vertexUv1s:ot,vertexUv2s:yt,vertexUv3s:we,pointsUvs:z.isPoints===!0&&!!H.attributes.uv&&(xe||fe),fog:!!L,useFog:I.fog===!0,fogExp2:L&&L.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:z.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:O,morphTextureStride:W,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:I.toneMapped?n.toneMapping:ma,useLegacyLights:n.useLegacyLights,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===ni,flipSided:I.side===er,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:at&&I.extensions.derivatives===!0,extensionFragDepth:at&&I.extensions.fragDepth===!0,extensionDrawBuffers:at&&I.extensions.drawBuffers===!0,extensionShaderTextureLOD:at&&I.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:I.customProgramCacheKey()}}function p(I){const T=[];if(I.shaderID?T.push(I.shaderID):(T.push(I.customVertexShaderID),T.push(I.customFragmentShaderID)),I.defines!==void 0)for(const D in I.defines)T.push(D),T.push(I.defines[D]);return I.isRawShaderMaterial===!1&&(A(T,I),y(T,I),T.push(n.outputColorSpace)),T.push(I.customProgramCacheKey),T.join()}function A(I,T){I.push(T.precision),I.push(T.outputColorSpace),I.push(T.envMapMode),I.push(T.envMapCubeUVHeight),I.push(T.mapUv),I.push(T.alphaMapUv),I.push(T.lightMapUv),I.push(T.aoMapUv),I.push(T.bumpMapUv),I.push(T.normalMapUv),I.push(T.displacementMapUv),I.push(T.emissiveMapUv),I.push(T.metalnessMapUv),I.push(T.roughnessMapUv),I.push(T.anisotropyMapUv),I.push(T.clearcoatMapUv),I.push(T.clearcoatNormalMapUv),I.push(T.clearcoatRoughnessMapUv),I.push(T.iridescenceMapUv),I.push(T.iridescenceThicknessMapUv),I.push(T.sheenColorMapUv),I.push(T.sheenRoughnessMapUv),I.push(T.specularMapUv),I.push(T.specularColorMapUv),I.push(T.specularIntensityMapUv),I.push(T.transmissionMapUv),I.push(T.thicknessMapUv),I.push(T.combine),I.push(T.fogExp2),I.push(T.sizeAttenuation),I.push(T.morphTargetsCount),I.push(T.morphAttributeCount),I.push(T.numDirLights),I.push(T.numPointLights),I.push(T.numSpotLights),I.push(T.numSpotLightMaps),I.push(T.numHemiLights),I.push(T.numRectAreaLights),I.push(T.numDirLightShadows),I.push(T.numPointLightShadows),I.push(T.numSpotLightShadows),I.push(T.numSpotLightShadowsWithMaps),I.push(T.shadowMapType),I.push(T.toneMapping),I.push(T.numClippingPlanes),I.push(T.numClipIntersection),I.push(T.depthPacking)}function y(I,T){a.disableAll(),T.isWebGL2&&a.enable(0),T.supportsVertexTextures&&a.enable(1),T.instancing&&a.enable(2),T.instancingColor&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUv1s&&a.enable(13),T.vertexUv2s&&a.enable(14),T.vertexUv3s&&a.enable(15),T.vertexTangents&&a.enable(16),T.anisotropy&&a.enable(17),I.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.skinning&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.useLegacyLights&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.transmission&&a.enable(15),T.sheen&&a.enable(16),T.opaque&&a.enable(17),T.pointsUvs&&a.enable(18),I.push(a.mask)}function w(I){const T=m[I.type];let D;if(T){const R=Ga[T];D=va.clone(R.uniforms)}else D=I.uniforms;return D}function S(I,T){let D;for(let R=0,z=c.length;R<z;R++){const L=c[R];if(L.cacheKey===T){D=L,++D.usedTimes;break}}return D===void 0&&(D=new Voe(n,T,I,s),c.push(D)),D}function C(I){if(--I.usedTimes===0){const T=c.indexOf(I);c[T]=c[c.length-1],c.pop(),I.destroy()}}function b(I){l.remove(I)}function M(){l.dispose()}return{getParameters:v,getProgramCacheKey:p,getUniforms:w,acquireProgram:S,releaseProgram:C,releaseShaderCache:b,programs:c,dispose:M}}function qoe(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function Joe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function CR(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function bR(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,h,d,m,g,v){let p=n[e];return p===void 0?(p={id:f.id,object:f,geometry:h,material:d,groupOrder:m,renderOrder:f.renderOrder,z:g,group:v},n[e]=p):(p.id=f.id,p.object=f,p.geometry=h,p.material=d,p.groupOrder=m,p.renderOrder=f.renderOrder,p.z=g,p.group=v),e++,p}function a(f,h,d,m,g,v){const p=o(f,h,d,m,g,v);d.transmission>0?i.push(p):d.transparent===!0?r.push(p):t.push(p)}function l(f,h,d,m,g,v){const p=o(f,h,d,m,g,v);d.transmission>0?i.unshift(p):d.transparent===!0?r.unshift(p):t.unshift(p)}function c(f,h){t.length>1&&t.sort(f||Joe),i.length>1&&i.sort(h||CR),r.length>1&&r.sort(h||CR)}function u(){for(let f=e,h=n.length;f<h;f++){const d=n[f];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function Koe(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new bR,n.set(i,[o])):r>=s.length?(o=new bR,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function $oe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new F,color:new et};break;case"SpotLight":t={position:new F,direction:new F,color:new et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new F,color:new et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new F,skyColor:new et,groundColor:new et};break;case"RectAreaLight":t={color:new et,position:new F,halfWidth:new F,halfHeight:new F};break}return n[e.id]=t,t}}}function Zoe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let eae=0;function tae(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function nae(n,e){const t=new $oe,i=Zoe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new F);const s=new F,o=new He,a=new He;function l(u,f){let h=0,d=0,m=0;for(let D=0;D<9;D++)r.probe[D].set(0,0,0);let g=0,v=0,p=0,A=0,y=0,w=0,S=0,C=0,b=0,M=0;u.sort(tae);const I=f===!0?Math.PI:1;for(let D=0,R=u.length;D<R;D++){const z=u[D],L=z.color,H=z.intensity,J=z.distance,Z=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)h+=L.r*H*I,d+=L.g*H*I,m+=L.b*H*I;else if(z.isLightProbe)for(let U=0;U<9;U++)r.probe[U].addScaledVector(z.sh.coefficients[U],H);else if(z.isDirectionalLight){const U=t.get(z);if(U.color.copy(z.color).multiplyScalar(z.intensity*I),z.castShadow){const X=z.shadow,Y=i.get(z);Y.shadowBias=X.bias,Y.shadowNormalBias=X.normalBias,Y.shadowRadius=X.radius,Y.shadowMapSize=X.mapSize,r.directionalShadow[g]=Y,r.directionalShadowMap[g]=Z,r.directionalShadowMatrix[g]=z.shadow.matrix,w++}r.directional[g]=U,g++}else if(z.isSpotLight){const U=t.get(z);U.position.setFromMatrixPosition(z.matrixWorld),U.color.copy(L).multiplyScalar(H*I),U.distance=J,U.coneCos=Math.cos(z.angle),U.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),U.decay=z.decay,r.spot[p]=U;const X=z.shadow;if(z.map&&(r.spotLightMap[b]=z.map,b++,X.updateMatrices(z),z.castShadow&&M++),r.spotLightMatrix[p]=X.matrix,z.castShadow){const Y=i.get(z);Y.shadowBias=X.bias,Y.shadowNormalBias=X.normalBias,Y.shadowRadius=X.radius,Y.shadowMapSize=X.mapSize,r.spotShadow[p]=Y,r.spotShadowMap[p]=Z,C++}p++}else if(z.isRectAreaLight){const U=t.get(z);U.color.copy(L).multiplyScalar(H),U.halfWidth.set(z.width*.5,0,0),U.halfHeight.set(0,z.height*.5,0),r.rectArea[A]=U,A++}else if(z.isPointLight){const U=t.get(z);if(U.color.copy(z.color).multiplyScalar(z.intensity*I),U.distance=z.distance,U.decay=z.decay,z.castShadow){const X=z.shadow,Y=i.get(z);Y.shadowBias=X.bias,Y.shadowNormalBias=X.normalBias,Y.shadowRadius=X.radius,Y.shadowMapSize=X.mapSize,Y.shadowCameraNear=X.camera.near,Y.shadowCameraFar=X.camera.far,r.pointShadow[v]=Y,r.pointShadowMap[v]=Z,r.pointShadowMatrix[v]=z.shadow.matrix,S++}r.point[v]=U,v++}else if(z.isHemisphereLight){const U=t.get(z);U.skyColor.copy(z.color).multiplyScalar(H*I),U.groundColor.copy(z.groundColor).multiplyScalar(H*I),r.hemi[y]=U,y++}}A>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ct.LTC_FLOAT_1,r.rectAreaLTC2=Ct.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ct.LTC_HALF_1,r.rectAreaLTC2=Ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=m;const T=r.hash;(T.directionalLength!==g||T.pointLength!==v||T.spotLength!==p||T.rectAreaLength!==A||T.hemiLength!==y||T.numDirectionalShadows!==w||T.numPointShadows!==S||T.numSpotShadows!==C||T.numSpotMaps!==b)&&(r.directional.length=g,r.spot.length=p,r.rectArea.length=A,r.point.length=v,r.hemi.length=y,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=C+b-M,r.spotLightMap.length=b,r.numSpotLightShadowsWithMaps=M,T.directionalLength=g,T.pointLength=v,T.spotLength=p,T.rectAreaLength=A,T.hemiLength=y,T.numDirectionalShadows=w,T.numPointShadows=S,T.numSpotShadows=C,T.numSpotMaps=b,r.version=eae++)}function c(u,f){let h=0,d=0,m=0,g=0,v=0;const p=f.matrixWorldInverse;for(let A=0,y=u.length;A<y;A++){const w=u[A];if(w.isDirectionalLight){const S=r.directional[h];S.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(p),h++}else if(w.isSpotLight){const S=r.spot[m];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(p),S.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(p),m++}else if(w.isRectAreaLight){const S=r.rectArea[g];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(p),a.identity(),o.copy(w.matrixWorld),o.premultiply(p),a.extractRotation(o),S.halfWidth.set(w.width*.5,0,0),S.halfHeight.set(0,w.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),g++}else if(w.isPointLight){const S=r.point[d];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(p),d++}else if(w.isHemisphereLight){const S=r.hemi[v];S.direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(p),v++}}}return{setup:l,setupView:c,state:r}}function MR(n,e){const t=new nae(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(f){i.push(f)}function a(f){r.push(f)}function l(f){t.setup(i,f)}function c(f){t.setupView(i,f)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function iae(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new MR(n,e),t.set(s,[l])):o>=a.length?(l=new MR(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class ov extends ur{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=mH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class AE extends ur{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const rae=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sae=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function oae(n,e,t){let i=new l0;const r=new Se,s=new Se,o=new sn,a=new ov({depthPacking:hE}),l=new AE,c={},u=t.maxTextureSize,f={[Rs]:er,[er]:Rs,[ni]:ni},h=new Wn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Se},radius:{value:4}},vertexShader:rae,fragmentShader:sae}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const m=new Gt;m.setAttribute("position",new qt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new gt(m,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=rE;let p=this.type;this.render=function(S,C,b){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||S.length===0)return;const M=n.getRenderTarget(),I=n.getActiveCubeFace(),T=n.getActiveMipmapLevel(),D=n.state;D.setBlending(pa),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const R=p!==za&&this.type===za,z=p===za&&this.type!==za;for(let L=0,H=S.length;L<H;L++){const J=S[L],Z=J.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;r.copy(Z.mapSize);const U=Z.getFrameExtents();if(r.multiply(U),s.copy(Z.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/U.x),r.x=s.x*U.x,Z.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/U.y),r.y=s.y*U.y,Z.mapSize.y=s.y)),Z.map===null||R===!0||z===!0){const Y=this.type!==za?{minFilter:dn,magFilter:dn}:{};Z.map!==null&&Z.map.dispose(),Z.map=new Qn(r.x,r.y,Y),Z.map.texture.name=J.name+".shadowMap",Z.camera.updateProjectionMatrix()}n.setRenderTarget(Z.map),n.clear();const X=Z.getViewportCount();for(let Y=0;Y<X;Y++){const O=Z.getViewport(Y);o.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),D.viewport(o),Z.updateMatrices(J,Y),i=Z.getFrustum(),w(C,b,Z.camera,J,this.type)}Z.isPointLightShadow!==!0&&this.type===za&&A(Z,b),Z.needsUpdate=!1}p=this.type,v.needsUpdate=!1,n.setRenderTarget(M,I,T)};function A(S,C){const b=e.update(g);h.defines.VSM_SAMPLES!==S.blurSamples&&(h.defines.VSM_SAMPLES=S.blurSamples,d.defines.VSM_SAMPLES=S.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Qn(r.x,r.y)),h.uniforms.shadow_pass.value=S.map.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(C,null,b,h,g,null),d.uniforms.shadow_pass.value=S.mapPass.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(C,null,b,d,g,null)}function y(S,C,b,M){let I=null;const T=b.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(T!==void 0)I=T;else if(I=b.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const D=I.uuid,R=C.uuid;let z=c[D];z===void 0&&(z={},c[D]=z);let L=z[R];L===void 0&&(L=I.clone(),z[R]=L),I=L}if(I.visible=C.visible,I.wireframe=C.wireframe,M===za?I.side=C.shadowSide!==null?C.shadowSide:C.side:I.side=C.shadowSide!==null?C.shadowSide:f[C.side],I.alphaMap=C.alphaMap,I.alphaTest=C.alphaTest,I.map=C.map,I.clipShadows=C.clipShadows,I.clippingPlanes=C.clippingPlanes,I.clipIntersection=C.clipIntersection,I.displacementMap=C.displacementMap,I.displacementScale=C.displacementScale,I.displacementBias=C.displacementBias,I.wireframeLinewidth=C.wireframeLinewidth,I.linewidth=C.linewidth,b.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const D=n.properties.get(I);D.light=b}return I}function w(S,C,b,M,I){if(S.visible===!1)return;if(S.layers.test(C.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&I===za)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,S.matrixWorld);const R=e.update(S),z=S.material;if(Array.isArray(z)){const L=R.groups;for(let H=0,J=L.length;H<J;H++){const Z=L[H],U=z[Z.materialIndex];if(U&&U.visible){const X=y(S,U,M,I);n.renderBufferDirect(b,null,R,X,S,Z)}}}else if(z.visible){const L=y(S,z,M,I);n.renderBufferDirect(b,null,R,L,S,null)}}const D=S.children;for(let R=0,z=D.length;R<z;R++)w(D[R],C,b,M,I)}}function aae(n,e,t){const i=t.isWebGL2;function r(){let fe=!1;const _e=new sn;let Me=null;const at=new sn(0,0,0,0);return{setMask:function(ot){Me!==ot&&!fe&&(n.colorMask(ot,ot,ot,ot),Me=ot)},setLocked:function(ot){fe=ot},setClear:function(ot,yt,we,Ie,Fe){Fe===!0&&(ot*=Ie,yt*=Ie,we*=Ie),_e.set(ot,yt,we,Ie),at.equals(_e)===!1&&(n.clearColor(ot,yt,we,Ie),at.copy(_e))},reset:function(){fe=!1,Me=null,at.set(-1,0,0,0)}}}function s(){let fe=!1,_e=null,Me=null,at=null;return{setTest:function(ot){ot?j(n.DEPTH_TEST):oe(n.DEPTH_TEST)},setMask:function(ot){_e!==ot&&!fe&&(n.depthMask(ot),_e=ot)},setFunc:function(ot){if(Me!==ot){switch(ot){case XG:n.depthFunc(n.NEVER);break;case qG:n.depthFunc(n.ALWAYS);break;case JG:n.depthFunc(n.LESS);break;case t3:n.depthFunc(n.LEQUAL);break;case KG:n.depthFunc(n.EQUAL);break;case $G:n.depthFunc(n.GEQUAL);break;case ZG:n.depthFunc(n.GREATER);break;case eH:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Me=ot}},setLocked:function(ot){fe=ot},setClear:function(ot){at!==ot&&(n.clearDepth(ot),at=ot)},reset:function(){fe=!1,_e=null,Me=null,at=null}}}function o(){let fe=!1,_e=null,Me=null,at=null,ot=null,yt=null,we=null,Ie=null,Fe=null;return{setTest:function(qe){fe||(qe?j(n.STENCIL_TEST):oe(n.STENCIL_TEST))},setMask:function(qe){_e!==qe&&!fe&&(n.stencilMask(qe),_e=qe)},setFunc:function(qe,ut,Mt){(Me!==qe||at!==ut||ot!==Mt)&&(n.stencilFunc(qe,ut,Mt),Me=qe,at=ut,ot=Mt)},setOp:function(qe,ut,Mt){(yt!==qe||we!==ut||Ie!==Mt)&&(n.stencilOp(qe,ut,Mt),yt=qe,we=ut,Ie=Mt)},setLocked:function(qe){fe=qe},setClear:function(qe){Fe!==qe&&(n.clearStencil(qe),Fe=qe)},reset:function(){fe=!1,_e=null,Me=null,at=null,ot=null,yt=null,we=null,Ie=null,Fe=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,f=new WeakMap;let h={},d={},m=new WeakMap,g=[],v=null,p=!1,A=null,y=null,w=null,S=null,C=null,b=null,M=null,I=!1,T=null,D=null,R=null,z=null,L=null;const H=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let J=!1,Z=0;const U=n.getParameter(n.VERSION);U.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(U)[1]),J=Z>=1):U.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),J=Z>=2);let X=null,Y={};const O=n.getParameter(n.SCISSOR_BOX),W=n.getParameter(n.VIEWPORT),$=new sn().fromArray(O),k=new sn().fromArray(W);function V(fe,_e,Me,at){const ot=new Uint8Array(4),yt=n.createTexture();n.bindTexture(fe,yt),n.texParameteri(fe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(fe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let we=0;we<Me;we++)i&&(fe===n.TEXTURE_3D||fe===n.TEXTURE_2D_ARRAY)?n.texImage3D(_e,0,n.RGBA,1,1,at,0,n.RGBA,n.UNSIGNED_BYTE,ot):n.texImage2D(_e+we,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ot);return yt}const Q={};Q[n.TEXTURE_2D]=V(n.TEXTURE_2D,n.TEXTURE_2D,1),Q[n.TEXTURE_CUBE_MAP]=V(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Q[n.TEXTURE_2D_ARRAY]=V(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Q[n.TEXTURE_3D]=V(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),j(n.DEPTH_TEST),l.setFunc(t3),ye(!1),Be(nM),j(n.CULL_FACE),ue(pa);function j(fe){h[fe]!==!0&&(n.enable(fe),h[fe]=!0)}function oe(fe){h[fe]!==!1&&(n.disable(fe),h[fe]=!1)}function xe(fe,_e){return d[fe]!==_e?(n.bindFramebuffer(fe,_e),d[fe]=_e,i&&(fe===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=_e),fe===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=_e)),!0):!1}function pe(fe,_e){let Me=g,at=!1;if(fe)if(Me=m.get(_e),Me===void 0&&(Me=[],m.set(_e,Me)),fe.isWebGLMultipleRenderTargets){const ot=fe.texture;if(Me.length!==ot.length||Me[0]!==n.COLOR_ATTACHMENT0){for(let yt=0,we=ot.length;yt<we;yt++)Me[yt]=n.COLOR_ATTACHMENT0+yt;Me.length=ot.length,at=!0}}else Me[0]!==n.COLOR_ATTACHMENT0&&(Me[0]=n.COLOR_ATTACHMENT0,at=!0);else Me[0]!==n.BACK&&(Me[0]=n.BACK,at=!0);at&&(t.isWebGL2?n.drawBuffers(Me):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Me))}function de(fe){return v!==fe?(n.useProgram(fe),v=fe,!0):!1}const te={[ah]:n.FUNC_ADD,[UG]:n.FUNC_SUBTRACT,[kG]:n.FUNC_REVERSE_SUBTRACT};if(i)te[sM]=n.MIN,te[oM]=n.MAX;else{const fe=e.get("EXT_blend_minmax");fe!==null&&(te[sM]=fe.MIN_EXT,te[oM]=fe.MAX_EXT)}const Ee={[NG]:n.ZERO,[oE]:n.ONE,[GG]:n.SRC_COLOR,[aE]:n.SRC_ALPHA,[YG]:n.SRC_ALPHA_SATURATE,[jG]:n.DST_COLOR,[QG]:n.DST_ALPHA,[HG]:n.ONE_MINUS_SRC_COLOR,[uT]:n.ONE_MINUS_SRC_ALPHA,[WG]:n.ONE_MINUS_DST_COLOR,[VG]:n.ONE_MINUS_DST_ALPHA};function ue(fe,_e,Me,at,ot,yt,we,Ie){if(fe===pa){p===!0&&(oe(n.BLEND),p=!1);return}if(p===!1&&(j(n.BLEND),p=!0),fe!==sE){if(fe!==A||Ie!==I){if((y!==ah||C!==ah)&&(n.blendEquation(n.FUNC_ADD),y=ah,C=ah),Ie)switch(fe){case Vu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case e3:n.blendFunc(n.ONE,n.ONE);break;case iM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case rM:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}else switch(fe){case Vu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case e3:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case iM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case rM:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}w=null,S=null,b=null,M=null,A=fe,I=Ie}return}ot=ot||_e,yt=yt||Me,we=we||at,(_e!==y||ot!==C)&&(n.blendEquationSeparate(te[_e],te[ot]),y=_e,C=ot),(Me!==w||at!==S||yt!==b||we!==M)&&(n.blendFuncSeparate(Ee[Me],Ee[at],Ee[yt],Ee[we]),w=Me,S=at,b=yt,M=we),A=fe,I=!1}function ve(fe,_e){fe.side===ni?oe(n.CULL_FACE):j(n.CULL_FACE);let Me=fe.side===er;_e&&(Me=!Me),ye(Me),fe.blending===Vu&&fe.transparent===!1?ue(pa):ue(fe.blending,fe.blendEquation,fe.blendSrc,fe.blendDst,fe.blendEquationAlpha,fe.blendSrcAlpha,fe.blendDstAlpha,fe.premultipliedAlpha),l.setFunc(fe.depthFunc),l.setTest(fe.depthTest),l.setMask(fe.depthWrite),a.setMask(fe.colorWrite);const at=fe.stencilWrite;c.setTest(at),at&&(c.setMask(fe.stencilWriteMask),c.setFunc(fe.stencilFunc,fe.stencilRef,fe.stencilFuncMask),c.setOp(fe.stencilFail,fe.stencilZFail,fe.stencilZPass)),ie(fe.polygonOffset,fe.polygonOffsetFactor,fe.polygonOffsetUnits),fe.alphaToCoverage===!0?j(n.SAMPLE_ALPHA_TO_COVERAGE):oe(n.SAMPLE_ALPHA_TO_COVERAGE)}function ye(fe){T!==fe&&(fe?n.frontFace(n.CW):n.frontFace(n.CCW),T=fe)}function Be(fe){fe!==FG?(j(n.CULL_FACE),fe!==D&&(fe===nM?n.cullFace(n.BACK):fe===OG?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):oe(n.CULL_FACE),D=fe}function ae(fe){fe!==R&&(J&&n.lineWidth(fe),R=fe)}function ie(fe,_e,Me){fe?(j(n.POLYGON_OFFSET_FILL),(z!==_e||L!==Me)&&(n.polygonOffset(_e,Me),z=_e,L=Me)):oe(n.POLYGON_OFFSET_FILL)}function be(fe){fe?j(n.SCISSOR_TEST):oe(n.SCISSOR_TEST)}function Re(fe){fe===void 0&&(fe=n.TEXTURE0+H-1),X!==fe&&(n.activeTexture(fe),X=fe)}function ct(fe,_e,Me){Me===void 0&&(X===null?Me=n.TEXTURE0+H-1:Me=X);let at=Y[Me];at===void 0&&(at={type:void 0,texture:void 0},Y[Me]=at),(at.type!==fe||at.texture!==_e)&&(X!==Me&&(n.activeTexture(Me),X=Me),n.bindTexture(fe,_e||Q[fe]),at.type=fe,at.texture=_e)}function se(){const fe=Y[X];fe!==void 0&&fe.type!==void 0&&(n.bindTexture(fe.type,null),fe.type=void 0,fe.texture=void 0)}function ee(){try{n.compressedTexImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ae(){try{n.compressedTexImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ue(){try{n.texSubImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ce(){try{n.texSubImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function ke(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function We(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Xe(){try{n.texStorage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Oe(){try{n.texStorage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function ft(){try{n.texImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function lt(){try{n.texImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function st(fe){$.equals(fe)===!1&&(n.scissor(fe.x,fe.y,fe.z,fe.w),$.copy(fe))}function ce(fe){k.equals(fe)===!1&&(n.viewport(fe.x,fe.y,fe.z,fe.w),k.copy(fe))}function De(fe,_e){let Me=f.get(_e);Me===void 0&&(Me=new WeakMap,f.set(_e,Me));let at=Me.get(fe);at===void 0&&(at=n.getUniformBlockIndex(_e,fe.name),Me.set(fe,at))}function $e(fe,_e){const at=f.get(_e).get(fe);u.get(_e)!==at&&(n.uniformBlockBinding(_e,at,fe.__bindingPointIndex),u.set(_e,at))}function Ye(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},X=null,Y={},d={},m=new WeakMap,g=[],v=null,p=!1,A=null,y=null,w=null,S=null,C=null,b=null,M=null,I=!1,T=null,D=null,R=null,z=null,L=null,$.set(0,0,n.canvas.width,n.canvas.height),k.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:j,disable:oe,bindFramebuffer:xe,drawBuffers:pe,useProgram:de,setBlending:ue,setMaterial:ve,setFlipSided:ye,setCullFace:Be,setLineWidth:ae,setPolygonOffset:ie,setScissorTest:be,activeTexture:Re,bindTexture:ct,unbindTexture:se,compressedTexImage2D:ee,compressedTexImage3D:Ae,texImage2D:ft,texImage3D:lt,updateUBOMapping:De,uniformBlockBinding:$e,texStorage2D:Xe,texStorage3D:Oe,texSubImage2D:Ue,texSubImage3D:Ce,compressedTexSubImage2D:ke,compressedTexSubImage3D:We,scissor:st,viewport:ce,reset:Ye}}function lae(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let g;const v=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(se,ee){return p?new OffscreenCanvas(se,ee):BA("canvas")}function y(se,ee,Ae,Ue){let Ce=1;if((se.width>Ue||se.height>Ue)&&(Ce=Ue/Math.max(se.width,se.height)),Ce<1||ee===!0)if(typeof HTMLImageElement<"u"&&se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&se instanceof ImageBitmap){const ke=ee?c3:Math.floor,We=ke(Ce*se.width),Xe=ke(Ce*se.height);g===void 0&&(g=A(We,Xe));const Oe=Ae?A(We,Xe):g;return Oe.width=We,Oe.height=Xe,Oe.getContext("2d").drawImage(se,0,0,We,Xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+se.width+"x"+se.height+") to ("+We+"x"+Xe+")."),Oe}else return"data"in se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+se.width+"x"+se.height+")."),se;return se}function w(se){return bM(se.width)&&bM(se.height)}function S(se){return a?!1:se.wrapS!==li||se.wrapT!==li||se.minFilter!==dn&&se.minFilter!==Xt}function C(se,ee){return se.generateMipmaps&&ee&&se.minFilter!==dn&&se.minFilter!==Xt}function b(se){n.generateMipmap(se)}function M(se,ee,Ae,Ue,Ce=!1){if(a===!1)return ee;if(se!==null){if(n[se]!==void 0)return n[se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+se+"'")}let ke=ee;return ee===n.RED&&(Ae===n.FLOAT&&(ke=n.R32F),Ae===n.HALF_FLOAT&&(ke=n.R16F),Ae===n.UNSIGNED_BYTE&&(ke=n.R8)),ee===n.RG&&(Ae===n.FLOAT&&(ke=n.RG32F),Ae===n.HALF_FLOAT&&(ke=n.RG16F),Ae===n.UNSIGNED_BYTE&&(ke=n.RG8)),ee===n.RGBA&&(Ae===n.FLOAT&&(ke=n.RGBA32F),Ae===n.HALF_FLOAT&&(ke=n.RGBA16F),Ae===n.UNSIGNED_BYTE&&(ke=Ue===En&&Ce===!1?n.SRGB8_ALPHA8:n.RGBA8),Ae===n.UNSIGNED_SHORT_4_4_4_4&&(ke=n.RGBA4),Ae===n.UNSIGNED_SHORT_5_5_5_1&&(ke=n.RGB5_A1)),(ke===n.R16F||ke===n.R32F||ke===n.RG16F||ke===n.RG32F||ke===n.RGBA16F||ke===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ke}function I(se,ee,Ae){return C(se,Ae)===!0||se.isFramebufferTexture&&se.minFilter!==dn&&se.minFilter!==Xt?Math.log2(Math.max(ee.width,ee.height))+1:se.mipmaps!==void 0&&se.mipmaps.length>0?se.mipmaps.length:se.isCompressedTexture&&Array.isArray(se.image)?ee.mipmaps.length:1}function T(se){return se===dn||se===SA||se===ym?n.NEAREST:n.LINEAR}function D(se){const ee=se.target;ee.removeEventListener("dispose",D),z(ee),ee.isVideoTexture&&m.delete(ee)}function R(se){const ee=se.target;ee.removeEventListener("dispose",R),H(ee)}function z(se){const ee=i.get(se);if(ee.__webglInit===void 0)return;const Ae=se.source,Ue=v.get(Ae);if(Ue){const Ce=Ue[ee.__cacheKey];Ce.usedTimes--,Ce.usedTimes===0&&L(se),Object.keys(Ue).length===0&&v.delete(Ae)}i.remove(se)}function L(se){const ee=i.get(se);n.deleteTexture(ee.__webglTexture);const Ae=se.source,Ue=v.get(Ae);delete Ue[ee.__cacheKey],o.memory.textures--}function H(se){const ee=se.texture,Ae=i.get(se),Ue=i.get(ee);if(Ue.__webglTexture!==void 0&&(n.deleteTexture(Ue.__webglTexture),o.memory.textures--),se.depthTexture&&se.depthTexture.dispose(),se.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++)n.deleteFramebuffer(Ae.__webglFramebuffer[Ce]),Ae.__webglDepthbuffer&&n.deleteRenderbuffer(Ae.__webglDepthbuffer[Ce]);else{if(n.deleteFramebuffer(Ae.__webglFramebuffer),Ae.__webglDepthbuffer&&n.deleteRenderbuffer(Ae.__webglDepthbuffer),Ae.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Ae.__webglMultisampledFramebuffer),Ae.__webglColorRenderbuffer)for(let Ce=0;Ce<Ae.__webglColorRenderbuffer.length;Ce++)Ae.__webglColorRenderbuffer[Ce]&&n.deleteRenderbuffer(Ae.__webglColorRenderbuffer[Ce]);Ae.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Ae.__webglDepthRenderbuffer)}if(se.isWebGLMultipleRenderTargets)for(let Ce=0,ke=ee.length;Ce<ke;Ce++){const We=i.get(ee[Ce]);We.__webglTexture&&(n.deleteTexture(We.__webglTexture),o.memory.textures--),i.remove(ee[Ce])}i.remove(ee),i.remove(se)}let J=0;function Z(){J=0}function U(){const se=J;return se>=l&&console.warn("THREE.WebGLTextures: Trying to use "+se+" texture units while this GPU supports only "+l),J+=1,se}function X(se){const ee=[];return ee.push(se.wrapS),ee.push(se.wrapT),ee.push(se.wrapR||0),ee.push(se.magFilter),ee.push(se.minFilter),ee.push(se.anisotropy),ee.push(se.internalFormat),ee.push(se.format),ee.push(se.type),ee.push(se.generateMipmaps),ee.push(se.premultiplyAlpha),ee.push(se.flipY),ee.push(se.unpackAlignment),ee.push(se.colorSpace),ee.join()}function Y(se,ee){const Ae=i.get(se);if(se.isVideoTexture&&Re(se),se.isRenderTargetTexture===!1&&se.version>0&&Ae.__version!==se.version){const Ue=se.image;if(Ue===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{xe(Ae,se,ee);return}}t.bindTexture(n.TEXTURE_2D,Ae.__webglTexture,n.TEXTURE0+ee)}function O(se,ee){const Ae=i.get(se);if(se.version>0&&Ae.__version!==se.version){xe(Ae,se,ee);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Ae.__webglTexture,n.TEXTURE0+ee)}function W(se,ee){const Ae=i.get(se);if(se.version>0&&Ae.__version!==se.version){xe(Ae,se,ee);return}t.bindTexture(n.TEXTURE_3D,Ae.__webglTexture,n.TEXTURE0+ee)}function $(se,ee){const Ae=i.get(se);if(se.version>0&&Ae.__version!==se.version){pe(Ae,se,ee);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Ae.__webglTexture,n.TEXTURE0+ee)}const k={[Wr]:n.REPEAT,[li]:n.CLAMP_TO_EDGE,[Nm]:n.MIRRORED_REPEAT},V={[dn]:n.NEAREST,[SA]:n.NEAREST_MIPMAP_NEAREST,[ym]:n.NEAREST_MIPMAP_LINEAR,[Xt]:n.LINEAR,[lE]:n.LINEAR_MIPMAP_NEAREST,[bo]:n.LINEAR_MIPMAP_LINEAR},Q={[yH]:n.NEVER,[bH]:n.ALWAYS,[xH]:n.LESS,[EH]:n.LEQUAL,[_H]:n.EQUAL,[CH]:n.GEQUAL,[wH]:n.GREATER,[SH]:n.NOTEQUAL};function j(se,ee,Ae){if(Ae?(n.texParameteri(se,n.TEXTURE_WRAP_S,k[ee.wrapS]),n.texParameteri(se,n.TEXTURE_WRAP_T,k[ee.wrapT]),(se===n.TEXTURE_3D||se===n.TEXTURE_2D_ARRAY)&&n.texParameteri(se,n.TEXTURE_WRAP_R,k[ee.wrapR]),n.texParameteri(se,n.TEXTURE_MAG_FILTER,V[ee.magFilter]),n.texParameteri(se,n.TEXTURE_MIN_FILTER,V[ee.minFilter])):(n.texParameteri(se,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(se,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(se===n.TEXTURE_3D||se===n.TEXTURE_2D_ARRAY)&&n.texParameteri(se,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(ee.wrapS!==li||ee.wrapT!==li)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(se,n.TEXTURE_MAG_FILTER,T(ee.magFilter)),n.texParameteri(se,n.TEXTURE_MIN_FILTER,T(ee.minFilter)),ee.minFilter!==dn&&ee.minFilter!==Xt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),ee.compareFunction&&(n.texParameteri(se,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(se,n.TEXTURE_COMPARE_FUNC,Q[ee.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ue=e.get("EXT_texture_filter_anisotropic");if(ee.magFilter===dn||ee.minFilter!==ym&&ee.minFilter!==bo||ee.type===Ln&&e.has("OES_texture_float_linear")===!1||a===!1&&ee.type===jn&&e.has("OES_texture_half_float_linear")===!1)return;(ee.anisotropy>1||i.get(ee).__currentAnisotropy)&&(n.texParameterf(se,Ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ee.anisotropy,r.getMaxAnisotropy())),i.get(ee).__currentAnisotropy=ee.anisotropy)}}function oe(se,ee){let Ae=!1;se.__webglInit===void 0&&(se.__webglInit=!0,ee.addEventListener("dispose",D));const Ue=ee.source;let Ce=v.get(Ue);Ce===void 0&&(Ce={},v.set(Ue,Ce));const ke=X(ee);if(ke!==se.__cacheKey){Ce[ke]===void 0&&(Ce[ke]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Ae=!0),Ce[ke].usedTimes++;const We=Ce[se.__cacheKey];We!==void 0&&(Ce[se.__cacheKey].usedTimes--,We.usedTimes===0&&L(ee)),se.__cacheKey=ke,se.__webglTexture=Ce[ke].texture}return Ae}function xe(se,ee,Ae){let Ue=n.TEXTURE_2D;(ee.isDataArrayTexture||ee.isCompressedArrayTexture)&&(Ue=n.TEXTURE_2D_ARRAY),ee.isData3DTexture&&(Ue=n.TEXTURE_3D);const Ce=oe(se,ee),ke=ee.source;t.bindTexture(Ue,se.__webglTexture,n.TEXTURE0+Ae);const We=i.get(ke);if(ke.version!==We.__version||Ce===!0){t.activeTexture(n.TEXTURE0+Ae),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ee.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ee.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Xe=S(ee)&&w(ee.image)===!1;let Oe=y(ee.image,Xe,!1,u);Oe=ct(ee,Oe);const ft=w(Oe)||a,lt=s.convert(ee.format,ee.colorSpace);let st=s.convert(ee.type),ce=M(ee.internalFormat,lt,st,ee.colorSpace);j(Ue,ee,ft);let De;const $e=ee.mipmaps,Ye=a&&ee.isVideoTexture!==!0,fe=We.__version===void 0||Ce===!0,_e=I(ee,Oe,ft);if(ee.isDepthTexture)ce=n.DEPTH_COMPONENT,a?ee.type===Ln?ce=n.DEPTH_COMPONENT32F:ee.type===ps?ce=n.DEPTH_COMPONENT24:ee.type===ju?ce=n.DEPTH24_STENCIL8:ce=n.DEPTH_COMPONENT16:ee.type===Ln&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ee.format===Ja&&ce===n.DEPTH_COMPONENT&&ee.type!==Af&&ee.type!==ps&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ee.type=ps,st=s.convert(ee.type)),ee.format===Gh&&ce===n.DEPTH_COMPONENT&&(ce=n.DEPTH_STENCIL,ee.type!==ju&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ee.type=ju,st=s.convert(ee.type))),fe&&(Ye?t.texStorage2D(n.TEXTURE_2D,1,ce,Oe.width,Oe.height):t.texImage2D(n.TEXTURE_2D,0,ce,Oe.width,Oe.height,0,lt,st,null));else if(ee.isDataTexture)if($e.length>0&&ft){Ye&&fe&&t.texStorage2D(n.TEXTURE_2D,_e,ce,$e[0].width,$e[0].height);for(let Me=0,at=$e.length;Me<at;Me++)De=$e[Me],Ye?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,De.width,De.height,lt,st,De.data):t.texImage2D(n.TEXTURE_2D,Me,ce,De.width,De.height,0,lt,st,De.data);ee.generateMipmaps=!1}else Ye?(fe&&t.texStorage2D(n.TEXTURE_2D,_e,ce,Oe.width,Oe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Oe.width,Oe.height,lt,st,Oe.data)):t.texImage2D(n.TEXTURE_2D,0,ce,Oe.width,Oe.height,0,lt,st,Oe.data);else if(ee.isCompressedTexture)if(ee.isCompressedArrayTexture){Ye&&fe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_e,ce,$e[0].width,$e[0].height,Oe.depth);for(let Me=0,at=$e.length;Me<at;Me++)De=$e[Me],ee.format!==Vn?lt!==null?Ye?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Me,0,0,0,De.width,De.height,Oe.depth,lt,De.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Me,ce,De.width,De.height,Oe.depth,0,De.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ye?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Me,0,0,0,De.width,De.height,Oe.depth,lt,st,De.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Me,ce,De.width,De.height,Oe.depth,0,lt,st,De.data)}else{Ye&&fe&&t.texStorage2D(n.TEXTURE_2D,_e,ce,$e[0].width,$e[0].height);for(let Me=0,at=$e.length;Me<at;Me++)De=$e[Me],ee.format!==Vn?lt!==null?Ye?t.compressedTexSubImage2D(n.TEXTURE_2D,Me,0,0,De.width,De.height,lt,De.data):t.compressedTexImage2D(n.TEXTURE_2D,Me,ce,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ye?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,De.width,De.height,lt,st,De.data):t.texImage2D(n.TEXTURE_2D,Me,ce,De.width,De.height,0,lt,st,De.data)}else if(ee.isDataArrayTexture)Ye?(fe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_e,ce,Oe.width,Oe.height,Oe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,lt,st,Oe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,ce,Oe.width,Oe.height,Oe.depth,0,lt,st,Oe.data);else if(ee.isData3DTexture)Ye?(fe&&t.texStorage3D(n.TEXTURE_3D,_e,ce,Oe.width,Oe.height,Oe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,lt,st,Oe.data)):t.texImage3D(n.TEXTURE_3D,0,ce,Oe.width,Oe.height,Oe.depth,0,lt,st,Oe.data);else if(ee.isFramebufferTexture){if(fe)if(Ye)t.texStorage2D(n.TEXTURE_2D,_e,ce,Oe.width,Oe.height);else{let Me=Oe.width,at=Oe.height;for(let ot=0;ot<_e;ot++)t.texImage2D(n.TEXTURE_2D,ot,ce,Me,at,0,lt,st,null),Me>>=1,at>>=1}}else if($e.length>0&&ft){Ye&&fe&&t.texStorage2D(n.TEXTURE_2D,_e,ce,$e[0].width,$e[0].height);for(let Me=0,at=$e.length;Me<at;Me++)De=$e[Me],Ye?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,lt,st,De):t.texImage2D(n.TEXTURE_2D,Me,ce,lt,st,De);ee.generateMipmaps=!1}else Ye?(fe&&t.texStorage2D(n.TEXTURE_2D,_e,ce,Oe.width,Oe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,lt,st,Oe)):t.texImage2D(n.TEXTURE_2D,0,ce,lt,st,Oe);C(ee,ft)&&b(Ue),We.__version=ke.version,ee.onUpdate&&ee.onUpdate(ee)}se.__version=ee.version}function pe(se,ee,Ae){if(ee.image.length!==6)return;const Ue=oe(se,ee),Ce=ee.source;t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture,n.TEXTURE0+Ae);const ke=i.get(Ce);if(Ce.version!==ke.__version||Ue===!0){t.activeTexture(n.TEXTURE0+Ae),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ee.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ee.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const We=ee.isCompressedTexture||ee.image[0].isCompressedTexture,Xe=ee.image[0]&&ee.image[0].isDataTexture,Oe=[];for(let Me=0;Me<6;Me++)!We&&!Xe?Oe[Me]=y(ee.image[Me],!1,!0,c):Oe[Me]=Xe?ee.image[Me].image:ee.image[Me],Oe[Me]=ct(ee,Oe[Me]);const ft=Oe[0],lt=w(ft)||a,st=s.convert(ee.format,ee.colorSpace),ce=s.convert(ee.type),De=M(ee.internalFormat,st,ce,ee.colorSpace),$e=a&&ee.isVideoTexture!==!0,Ye=ke.__version===void 0||Ue===!0;let fe=I(ee,ft,lt);j(n.TEXTURE_CUBE_MAP,ee,lt);let _e;if(We){$e&&Ye&&t.texStorage2D(n.TEXTURE_CUBE_MAP,fe,De,ft.width,ft.height);for(let Me=0;Me<6;Me++){_e=Oe[Me].mipmaps;for(let at=0;at<_e.length;at++){const ot=_e[at];ee.format!==Vn?st!==null?$e?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,at,0,0,ot.width,ot.height,st,ot.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,at,De,ot.width,ot.height,0,ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$e?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,at,0,0,ot.width,ot.height,st,ce,ot.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,at,De,ot.width,ot.height,0,st,ce,ot.data)}}}else{_e=ee.mipmaps,$e&&Ye&&(_e.length>0&&fe++,t.texStorage2D(n.TEXTURE_CUBE_MAP,fe,De,Oe[0].width,Oe[0].height));for(let Me=0;Me<6;Me++)if(Xe){$e?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,Oe[Me].width,Oe[Me].height,st,ce,Oe[Me].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,De,Oe[Me].width,Oe[Me].height,0,st,ce,Oe[Me].data);for(let at=0;at<_e.length;at++){const yt=_e[at].image[Me].image;$e?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,at+1,0,0,yt.width,yt.height,st,ce,yt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,at+1,De,yt.width,yt.height,0,st,ce,yt.data)}}else{$e?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,st,ce,Oe[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,De,st,ce,Oe[Me]);for(let at=0;at<_e.length;at++){const ot=_e[at];$e?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,at+1,0,0,st,ce,ot.image[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,at+1,De,st,ce,ot.image[Me])}}}C(ee,lt)&&b(n.TEXTURE_CUBE_MAP),ke.__version=Ce.version,ee.onUpdate&&ee.onUpdate(ee)}se.__version=ee.version}function de(se,ee,Ae,Ue,Ce){const ke=s.convert(Ae.format,Ae.colorSpace),We=s.convert(Ae.type),Xe=M(Ae.internalFormat,ke,We,Ae.colorSpace);i.get(ee).__hasExternalTextures||(Ce===n.TEXTURE_3D||Ce===n.TEXTURE_2D_ARRAY?t.texImage3D(Ce,0,Xe,ee.width,ee.height,ee.depth,0,ke,We,null):t.texImage2D(Ce,0,Xe,ee.width,ee.height,0,ke,We,null)),t.bindFramebuffer(n.FRAMEBUFFER,se),be(ee)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ue,Ce,i.get(Ae).__webglTexture,0,ie(ee)):(Ce===n.TEXTURE_2D||Ce>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ce<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ue,Ce,i.get(Ae).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function te(se,ee,Ae){if(n.bindRenderbuffer(n.RENDERBUFFER,se),ee.depthBuffer&&!ee.stencilBuffer){let Ue=n.DEPTH_COMPONENT16;if(Ae||be(ee)){const Ce=ee.depthTexture;Ce&&Ce.isDepthTexture&&(Ce.type===Ln?Ue=n.DEPTH_COMPONENT32F:Ce.type===ps&&(Ue=n.DEPTH_COMPONENT24));const ke=ie(ee);be(ee)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ke,Ue,ee.width,ee.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ke,Ue,ee.width,ee.height)}else n.renderbufferStorage(n.RENDERBUFFER,Ue,ee.width,ee.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,se)}else if(ee.depthBuffer&&ee.stencilBuffer){const Ue=ie(ee);Ae&&be(ee)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,n.DEPTH24_STENCIL8,ee.width,ee.height):be(ee)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ue,n.DEPTH24_STENCIL8,ee.width,ee.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,ee.width,ee.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,se)}else{const Ue=ee.isWebGLMultipleRenderTargets===!0?ee.texture:[ee.texture];for(let Ce=0;Ce<Ue.length;Ce++){const ke=Ue[Ce],We=s.convert(ke.format,ke.colorSpace),Xe=s.convert(ke.type),Oe=M(ke.internalFormat,We,Xe,ke.colorSpace),ft=ie(ee);Ae&&be(ee)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ft,Oe,ee.width,ee.height):be(ee)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ft,Oe,ee.width,ee.height):n.renderbufferStorage(n.RENDERBUFFER,Oe,ee.width,ee.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ee(se,ee){if(ee&&ee.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,se),!(ee.depthTexture&&ee.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ee.depthTexture).__webglTexture||ee.depthTexture.image.width!==ee.width||ee.depthTexture.image.height!==ee.height)&&(ee.depthTexture.image.width=ee.width,ee.depthTexture.image.height=ee.height,ee.depthTexture.needsUpdate=!0),Y(ee.depthTexture,0);const Ue=i.get(ee.depthTexture).__webglTexture,Ce=ie(ee);if(ee.depthTexture.format===Ja)be(ee)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ue,0,Ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ue,0);else if(ee.depthTexture.format===Gh)be(ee)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ue,0,Ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ue,0);else throw new Error("Unknown depthTexture format")}function ue(se){const ee=i.get(se),Ae=se.isWebGLCubeRenderTarget===!0;if(se.depthTexture&&!ee.__autoAllocateDepthBuffer){if(Ae)throw new Error("target.depthTexture not supported in Cube render targets");Ee(ee.__webglFramebuffer,se)}else if(Ae){ee.__webglDepthbuffer=[];for(let Ue=0;Ue<6;Ue++)t.bindFramebuffer(n.FRAMEBUFFER,ee.__webglFramebuffer[Ue]),ee.__webglDepthbuffer[Ue]=n.createRenderbuffer(),te(ee.__webglDepthbuffer[Ue],se,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,ee.__webglFramebuffer),ee.__webglDepthbuffer=n.createRenderbuffer(),te(ee.__webglDepthbuffer,se,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function ve(se,ee,Ae){const Ue=i.get(se);ee!==void 0&&de(Ue.__webglFramebuffer,se,se.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),Ae!==void 0&&ue(se)}function ye(se){const ee=se.texture,Ae=i.get(se),Ue=i.get(ee);se.addEventListener("dispose",R),se.isWebGLMultipleRenderTargets!==!0&&(Ue.__webglTexture===void 0&&(Ue.__webglTexture=n.createTexture()),Ue.__version=ee.version,o.memory.textures++);const Ce=se.isWebGLCubeRenderTarget===!0,ke=se.isWebGLMultipleRenderTargets===!0,We=w(se)||a;if(Ce){Ae.__webglFramebuffer=[];for(let Xe=0;Xe<6;Xe++)Ae.__webglFramebuffer[Xe]=n.createFramebuffer()}else{if(Ae.__webglFramebuffer=n.createFramebuffer(),ke)if(r.drawBuffers){const Xe=se.texture;for(let Oe=0,ft=Xe.length;Oe<ft;Oe++){const lt=i.get(Xe[Oe]);lt.__webglTexture===void 0&&(lt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&se.samples>0&&be(se)===!1){const Xe=ke?ee:[ee];Ae.__webglMultisampledFramebuffer=n.createFramebuffer(),Ae.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Ae.__webglMultisampledFramebuffer);for(let Oe=0;Oe<Xe.length;Oe++){const ft=Xe[Oe];Ae.__webglColorRenderbuffer[Oe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Ae.__webglColorRenderbuffer[Oe]);const lt=s.convert(ft.format,ft.colorSpace),st=s.convert(ft.type),ce=M(ft.internalFormat,lt,st,ft.colorSpace,se.isXRRenderTarget===!0),De=ie(se);n.renderbufferStorageMultisample(n.RENDERBUFFER,De,ce,se.width,se.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.RENDERBUFFER,Ae.__webglColorRenderbuffer[Oe])}n.bindRenderbuffer(n.RENDERBUFFER,null),se.depthBuffer&&(Ae.__webglDepthRenderbuffer=n.createRenderbuffer(),te(Ae.__webglDepthRenderbuffer,se,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ce){t.bindTexture(n.TEXTURE_CUBE_MAP,Ue.__webglTexture),j(n.TEXTURE_CUBE_MAP,ee,We);for(let Xe=0;Xe<6;Xe++)de(Ae.__webglFramebuffer[Xe],se,ee,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe);C(ee,We)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ke){const Xe=se.texture;for(let Oe=0,ft=Xe.length;Oe<ft;Oe++){const lt=Xe[Oe],st=i.get(lt);t.bindTexture(n.TEXTURE_2D,st.__webglTexture),j(n.TEXTURE_2D,lt,We),de(Ae.__webglFramebuffer,se,lt,n.COLOR_ATTACHMENT0+Oe,n.TEXTURE_2D),C(lt,We)&&b(n.TEXTURE_2D)}t.unbindTexture()}else{let Xe=n.TEXTURE_2D;(se.isWebGL3DRenderTarget||se.isWebGLArrayRenderTarget)&&(a?Xe=se.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Xe,Ue.__webglTexture),j(Xe,ee,We),de(Ae.__webglFramebuffer,se,ee,n.COLOR_ATTACHMENT0,Xe),C(ee,We)&&b(Xe),t.unbindTexture()}se.depthBuffer&&ue(se)}function Be(se){const ee=w(se)||a,Ae=se.isWebGLMultipleRenderTargets===!0?se.texture:[se.texture];for(let Ue=0,Ce=Ae.length;Ue<Ce;Ue++){const ke=Ae[Ue];if(C(ke,ee)){const We=se.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Xe=i.get(ke).__webglTexture;t.bindTexture(We,Xe),b(We),t.unbindTexture()}}}function ae(se){if(a&&se.samples>0&&be(se)===!1){const ee=se.isWebGLMultipleRenderTargets?se.texture:[se.texture],Ae=se.width,Ue=se.height;let Ce=n.COLOR_BUFFER_BIT;const ke=[],We=se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Xe=i.get(se),Oe=se.isWebGLMultipleRenderTargets===!0;if(Oe)for(let ft=0;ft<ee.length;ft++)t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ft,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ft,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Xe.__webglFramebuffer);for(let ft=0;ft<ee.length;ft++){ke.push(n.COLOR_ATTACHMENT0+ft),se.depthBuffer&&ke.push(We);const lt=Xe.__ignoreDepthValues!==void 0?Xe.__ignoreDepthValues:!1;if(lt===!1&&(se.depthBuffer&&(Ce|=n.DEPTH_BUFFER_BIT),se.stencilBuffer&&(Ce|=n.STENCIL_BUFFER_BIT)),Oe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Xe.__webglColorRenderbuffer[ft]),lt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[We]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[We])),Oe){const st=i.get(ee[ft]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,st,0)}n.blitFramebuffer(0,0,Ae,Ue,0,0,Ae,Ue,Ce,n.NEAREST),d&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ke)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Oe)for(let ft=0;ft<ee.length;ft++){t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ft,n.RENDERBUFFER,Xe.__webglColorRenderbuffer[ft]);const lt=i.get(ee[ft]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ft,n.TEXTURE_2D,lt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer)}}function ie(se){return Math.min(f,se.samples)}function be(se){const ee=i.get(se);return a&&se.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ee.__useRenderToTexture!==!1}function Re(se){const ee=o.render.frame;m.get(se)!==ee&&(m.set(se,ee),se.update())}function ct(se,ee){const Ae=se.colorSpace,Ue=se.format,Ce=se.type;return se.isCompressedTexture===!0||se.format===l3||Ae!==ro&&Ae!==Yu&&(Ae===En?a===!1?e.has("EXT_sRGB")===!0&&Ue===Vn?(se.format=l3,se.minFilter=Xt,se.generateMipmaps=!1):ee=_T.sRGBToLinear(ee):(Ue!==Vn||Ce!==hi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ae)),ee}this.allocateTextureUnit=U,this.resetTextureUnits=Z,this.setTexture2D=Y,this.setTexture2DArray=O,this.setTexture3D=W,this.setTextureCube=$,this.rebindTextures=ve,this.setupRenderTarget=ye,this.updateRenderTargetMipmap=Be,this.updateMultisampleRenderTarget=ae,this.setupDepthRenderbuffer=ue,this.setupFrameBufferTexture=de,this.useMultisampledRTT=be}function OH(n,e,t){const i=t.isWebGL2;function r(s,o=Yu){let a;if(s===hi)return n.UNSIGNED_BYTE;if(s===hT)return n.UNSIGNED_SHORT_4_4_4_4;if(s===dT)return n.UNSIGNED_SHORT_5_5_5_1;if(s===CA)return n.BYTE;if(s===cE)return n.SHORT;if(s===Af)return n.UNSIGNED_SHORT;if(s===bh)return n.INT;if(s===ps)return n.UNSIGNED_INT;if(s===Ln)return n.FLOAT;if(s===jn)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===aH)return n.ALPHA;if(s===Vn)return n.RGBA;if(s===lH)return n.LUMINANCE;if(s===cH)return n.LUMINANCE_ALPHA;if(s===Ja)return n.DEPTH_COMPONENT;if(s===Gh)return n.DEPTH_STENCIL;if(s===l3)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===la)return n.RED;if(s===uE)return n.RED_INTEGER;if(s===Su)return n.RG;if(s===rv)return n.RG_INTEGER;if(s===Hh)return n.RGBA_INTEGER;if(s===Dg||s===s_||s===o_||s===Lg)if(o===En)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Dg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===s_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===o_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Lg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Dg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===s_)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===o_)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Lg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===n3||s===lM||s===i3||s===cM)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===n3)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===lM)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===i3)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===cM)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===pT)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===r3||s===s3)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===r3)return o===En?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===s3)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===o3||s===uM||s===fM||s===hM||s===bA||s===dM||s===pM||s===mM||s===gM||s===AM||s===vM||s===yM||s===xM||s===_M)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===o3)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===uM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===fM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===hM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===bA)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===dM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===pM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===mM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===gM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===AM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===vM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===yM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===xM)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===_M)return o===En?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Fg)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Fg)return o===En?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===uH||s===EM||s===wM||s===SM)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Fg)return a.COMPRESSED_RED_RGTC1_EXT;if(s===EM)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===wM)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===SM)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ju?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class zH extends mn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class qs extends Jt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const cae={type:"move"};class bS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const v=t.getJointPose(g,i),p=this._getHandJoint(c,g);v!==null&&(p.matrix.fromArray(v.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=v.radius),p.visible=v!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),d=.02,m=.005;c.inputState.pinching&&h>d+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=d-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(cae)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new qs;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class u0 extends Nn{constructor(e,t,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:Ja,u!==Ja&&u!==Gh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Ja&&(i=ps),i===void 0&&u===Gh&&(i=ju),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:dn,this.minFilter=l!==void 0?l:dn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class uae extends Yr{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,h=null,d=null,m=null;const g=t.getContextAttributes();let v=null,p=null;const A=[],y=[],w=new mn;w.layers.enable(1),w.viewport=new sn;const S=new mn;S.layers.enable(2),S.viewport=new sn;const C=[w,S],b=new zH;b.layers.enable(1),b.layers.enable(2);let M=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let W=A[O];return W===void 0&&(W=new bS,A[O]=W),W.getTargetRaySpace()},this.getControllerGrip=function(O){let W=A[O];return W===void 0&&(W=new bS,A[O]=W),W.getGripSpace()},this.getHand=function(O){let W=A[O];return W===void 0&&(W=new bS,A[O]=W),W.getHandSpace()};function T(O){const W=y.indexOf(O.inputSource);if(W===-1)return;const $=A[W];$!==void 0&&($.update(O.inputSource,O.frame,c||o),$.dispatchEvent({type:O.type,data:O.inputSource}))}function D(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",D),r.removeEventListener("inputsourceschange",R);for(let O=0;O<A.length;O++){const W=y[O];W!==null&&(y[O]=null,A[O].disconnect(W))}M=null,I=null,e.setRenderTarget(v),d=null,h=null,f=null,r=null,p=null,Y.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){s=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){a=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(O){c=O},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return f},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(O){if(r=O,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",D),r.addEventListener("inputsourceschange",R),g.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const W={antialias:r.renderState.layers===void 0?g.antialias:!0,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,W),r.updateRenderState({baseLayer:d}),p=new Qn(d.framebufferWidth,d.framebufferHeight,{format:Vn,type:hi,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let W=null,$=null,k=null;g.depth&&(k=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,W=g.stencil?Gh:Ja,$=g.stencil?ju:ps);const V={colorFormat:t.RGBA8,depthFormat:k,scaleFactor:s};f=new XRWebGLBinding(r,t),h=f.createProjectionLayer(V),r.updateRenderState({layers:[h]}),p=new Qn(h.textureWidth,h.textureHeight,{format:Vn,type:hi,depthTexture:new u0(h.textureWidth,h.textureHeight,$,void 0,void 0,void 0,void 0,void 0,void 0,W),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0});const Q=e.properties.get(p);Q.__ignoreDepthValues=h.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),Y.setContext(r),Y.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function R(O){for(let W=0;W<O.removed.length;W++){const $=O.removed[W],k=y.indexOf($);k>=0&&(y[k]=null,A[k].disconnect($))}for(let W=0;W<O.added.length;W++){const $=O.added[W];let k=y.indexOf($);if(k===-1){for(let Q=0;Q<A.length;Q++)if(Q>=y.length){y.push($),k=Q;break}else if(y[Q]===null){y[Q]=$,k=Q;break}if(k===-1)break}const V=A[k];V&&V.connect($)}}const z=new F,L=new F;function H(O,W,$){z.setFromMatrixPosition(W.matrixWorld),L.setFromMatrixPosition($.matrixWorld);const k=z.distanceTo(L),V=W.projectionMatrix.elements,Q=$.projectionMatrix.elements,j=V[14]/(V[10]-1),oe=V[14]/(V[10]+1),xe=(V[9]+1)/V[5],pe=(V[9]-1)/V[5],de=(V[8]-1)/V[0],te=(Q[8]+1)/Q[0],Ee=j*de,ue=j*te,ve=k/(-de+te),ye=ve*-de;W.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(ye),O.translateZ(ve),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const Be=j+ve,ae=oe+ve,ie=Ee-ye,be=ue+(k-ye),Re=xe*oe/ae*Be,ct=pe*oe/ae*Be;O.projectionMatrix.makePerspective(ie,be,Re,ct,Be,ae),O.projectionMatrixInverse.copy(O.projectionMatrix).invert()}function J(O,W){W===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(W.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(r===null)return;b.near=S.near=w.near=O.near,b.far=S.far=w.far=O.far,(M!==b.near||I!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),M=b.near,I=b.far);const W=O.parent,$=b.cameras;J(b,W);for(let k=0;k<$.length;k++)J($[k],W);$.length===2?H(b,w,S):b.projectionMatrix.copy(w.projectionMatrix),Z(O,b,W)};function Z(O,W,$){$===null?O.matrix.copy(W.matrixWorld):(O.matrix.copy($.matrixWorld),O.matrix.invert(),O.matrix.multiply(W.matrixWorld)),O.matrix.decompose(O.position,O.quaternion,O.scale),O.updateMatrixWorld(!0);const k=O.children;for(let V=0,Q=k.length;V<Q;V++)k[V].updateMatrixWorld(!0);O.projectionMatrix.copy(W.projectionMatrix),O.projectionMatrixInverse.copy(W.projectionMatrixInverse),O.isPerspectiveCamera&&(O.fov=Hm*2*Math.atan(1/O.projectionMatrix.elements[5]),O.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(h===null&&d===null))return l},this.setFoveation=function(O){l=O,h!==null&&(h.fixedFoveation=O),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=O)};let U=null;function X(O,W){if(u=W.getViewerPose(c||o),m=W,u!==null){const $=u.views;d!==null&&(e.setRenderTargetFramebuffer(p,d.framebuffer),e.setRenderTarget(p));let k=!1;$.length!==b.cameras.length&&(b.cameras.length=0,k=!0);for(let V=0;V<$.length;V++){const Q=$[V];let j=null;if(d!==null)j=d.getViewport(Q);else{const xe=f.getViewSubImage(h,Q);j=xe.viewport,V===0&&(e.setRenderTargetTextures(p,xe.colorTexture,h.ignoreDepthValues?void 0:xe.depthStencilTexture),e.setRenderTarget(p))}let oe=C[V];oe===void 0&&(oe=new mn,oe.layers.enable(V),oe.viewport=new sn,C[V]=oe),oe.matrix.fromArray(Q.transform.matrix),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.projectionMatrix.fromArray(Q.projectionMatrix),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert(),oe.viewport.set(j.x,j.y,j.width,j.height),V===0&&(b.matrix.copy(oe.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),k===!0&&b.cameras.push(oe)}}for(let $=0;$<A.length;$++){const k=y[$],V=A[$];k!==null&&V!==void 0&&V.update(k,W,c||o)}U&&U(O,W),W.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:W}),m=null}const Y=new PH;Y.setAnimationLoop(X),this.setAnimationLoop=function(O){U=O},this.dispose=function(){}}}function fae(n,e){function t(v,p){v.matrixAutoUpdate===!0&&v.updateMatrix(),p.value.copy(v.matrix)}function i(v,p){p.color.getRGB(v.fogColor.value,BH(n)),p.isFog?(v.fogNear.value=p.near,v.fogFar.value=p.far):p.isFogExp2&&(v.fogDensity.value=p.density)}function r(v,p,A,y,w){p.isMeshBasicMaterial||p.isMeshLambertMaterial?s(v,p):p.isMeshToonMaterial?(s(v,p),f(v,p)):p.isMeshPhongMaterial?(s(v,p),u(v,p)):p.isMeshStandardMaterial?(s(v,p),h(v,p),p.isMeshPhysicalMaterial&&d(v,p,w)):p.isMeshMatcapMaterial?(s(v,p),m(v,p)):p.isMeshDepthMaterial?s(v,p):p.isMeshDistanceMaterial?(s(v,p),g(v,p)):p.isMeshNormalMaterial?s(v,p):p.isLineBasicMaterial?(o(v,p),p.isLineDashedMaterial&&a(v,p)):p.isPointsMaterial?l(v,p,A,y):p.isSpriteMaterial?c(v,p):p.isShadowMaterial?(v.color.value.copy(p.color),v.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function s(v,p){v.opacity.value=p.opacity,p.color&&v.diffuse.value.copy(p.color),p.emissive&&v.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(v.map.value=p.map,t(p.map,v.mapTransform)),p.alphaMap&&(v.alphaMap.value=p.alphaMap,t(p.alphaMap,v.alphaMapTransform)),p.bumpMap&&(v.bumpMap.value=p.bumpMap,t(p.bumpMap,v.bumpMapTransform),v.bumpScale.value=p.bumpScale,p.side===er&&(v.bumpScale.value*=-1)),p.normalMap&&(v.normalMap.value=p.normalMap,t(p.normalMap,v.normalMapTransform),v.normalScale.value.copy(p.normalScale),p.side===er&&v.normalScale.value.negate()),p.displacementMap&&(v.displacementMap.value=p.displacementMap,t(p.displacementMap,v.displacementMapTransform),v.displacementScale.value=p.displacementScale,v.displacementBias.value=p.displacementBias),p.emissiveMap&&(v.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,v.emissiveMapTransform)),p.specularMap&&(v.specularMap.value=p.specularMap,t(p.specularMap,v.specularMapTransform)),p.alphaTest>0&&(v.alphaTest.value=p.alphaTest);const A=e.get(p).envMap;if(A&&(v.envMap.value=A,v.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=p.reflectivity,v.ior.value=p.ior,v.refractionRatio.value=p.refractionRatio),p.lightMap){v.lightMap.value=p.lightMap;const y=n.useLegacyLights===!0?Math.PI:1;v.lightMapIntensity.value=p.lightMapIntensity*y,t(p.lightMap,v.lightMapTransform)}p.aoMap&&(v.aoMap.value=p.aoMap,v.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,v.aoMapTransform))}function o(v,p){v.diffuse.value.copy(p.color),v.opacity.value=p.opacity,p.map&&(v.map.value=p.map,t(p.map,v.mapTransform))}function a(v,p){v.dashSize.value=p.dashSize,v.totalSize.value=p.dashSize+p.gapSize,v.scale.value=p.scale}function l(v,p,A,y){v.diffuse.value.copy(p.color),v.opacity.value=p.opacity,v.size.value=p.size*A,v.scale.value=y*.5,p.map&&(v.map.value=p.map,t(p.map,v.uvTransform)),p.alphaMap&&(v.alphaMap.value=p.alphaMap,t(p.alphaMap,v.alphaMapTransform)),p.alphaTest>0&&(v.alphaTest.value=p.alphaTest)}function c(v,p){v.diffuse.value.copy(p.color),v.opacity.value=p.opacity,v.rotation.value=p.rotation,p.map&&(v.map.value=p.map,t(p.map,v.mapTransform)),p.alphaMap&&(v.alphaMap.value=p.alphaMap,t(p.alphaMap,v.alphaMapTransform)),p.alphaTest>0&&(v.alphaTest.value=p.alphaTest)}function u(v,p){v.specular.value.copy(p.specular),v.shininess.value=Math.max(p.shininess,1e-4)}function f(v,p){p.gradientMap&&(v.gradientMap.value=p.gradientMap)}function h(v,p){v.metalness.value=p.metalness,p.metalnessMap&&(v.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,v.metalnessMapTransform)),v.roughness.value=p.roughness,p.roughnessMap&&(v.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,v.roughnessMapTransform)),e.get(p).envMap&&(v.envMapIntensity.value=p.envMapIntensity)}function d(v,p,A){v.ior.value=p.ior,p.sheen>0&&(v.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),v.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(v.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,v.sheenColorMapTransform)),p.sheenRoughnessMap&&(v.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,v.sheenRoughnessMapTransform))),p.clearcoat>0&&(v.clearcoat.value=p.clearcoat,v.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(v.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,v.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(v.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===er&&v.clearcoatNormalScale.value.negate())),p.iridescence>0&&(v.iridescence.value=p.iridescence,v.iridescenceIOR.value=p.iridescenceIOR,v.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(v.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,v.iridescenceMapTransform)),p.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),p.transmission>0&&(v.transmission.value=p.transmission,v.transmissionSamplerMap.value=A.texture,v.transmissionSamplerSize.value.set(A.width,A.height),p.transmissionMap&&(v.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,v.transmissionMapTransform)),v.thickness.value=p.thickness,p.thicknessMap&&(v.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=p.attenuationDistance,v.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(v.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(v.anisotropyMap.value=p.anisotropyMap,t(p.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=p.specularIntensity,v.specularColor.value.copy(p.specularColor),p.specularColorMap&&(v.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,v.specularColorMapTransform)),p.specularIntensityMap&&(v.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,v.specularIntensityMapTransform))}function m(v,p){p.matcap&&(v.matcap.value=p.matcap)}function g(v,p){const A=e.get(p).light;v.referencePosition.value.setFromMatrixPosition(A.matrixWorld),v.nearDistance.value=A.shadow.camera.near,v.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function hae(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(A,y){const w=y.program;i.uniformBlockBinding(A,w)}function c(A,y){let w=r[A.id];w===void 0&&(m(A),w=u(A),r[A.id]=w,A.addEventListener("dispose",v));const S=y.program;i.updateUBOMapping(A,S);const C=e.render.frame;s[A.id]!==C&&(h(A),s[A.id]=C)}function u(A){const y=f();A.__bindingPointIndex=y;const w=n.createBuffer(),S=A.__size,C=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,S,C),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,y,w),w}function f(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(A){const y=r[A.id],w=A.uniforms,S=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,y);for(let C=0,b=w.length;C<b;C++){const M=w[C];if(d(M,C,S)===!0){const I=M.__offset,T=Array.isArray(M.value)?M.value:[M.value];let D=0;for(let R=0;R<T.length;R++){const z=T[R],L=g(z);typeof z=="number"?(M.__data[0]=z,n.bufferSubData(n.UNIFORM_BUFFER,I+D,M.__data)):z.isMatrix3?(M.__data[0]=z.elements[0],M.__data[1]=z.elements[1],M.__data[2]=z.elements[2],M.__data[3]=z.elements[0],M.__data[4]=z.elements[3],M.__data[5]=z.elements[4],M.__data[6]=z.elements[5],M.__data[7]=z.elements[0],M.__data[8]=z.elements[6],M.__data[9]=z.elements[7],M.__data[10]=z.elements[8],M.__data[11]=z.elements[0]):(z.toArray(M.__data,D),D+=L.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,I,M.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function d(A,y,w){const S=A.value;if(w[y]===void 0){if(typeof S=="number")w[y]=S;else{const C=Array.isArray(S)?S:[S],b=[];for(let M=0;M<C.length;M++)b.push(C[M].clone());w[y]=b}return!0}else if(typeof S=="number"){if(w[y]!==S)return w[y]=S,!0}else{const C=Array.isArray(w[y])?w[y]:[w[y]],b=Array.isArray(S)?S:[S];for(let M=0;M<C.length;M++){const I=C[M];if(I.equals(b[M])===!1)return I.copy(b[M]),!0}}return!1}function m(A){const y=A.uniforms;let w=0;const S=16;let C=0;for(let b=0,M=y.length;b<M;b++){const I=y[b],T={boundary:0,storage:0},D=Array.isArray(I.value)?I.value:[I.value];for(let R=0,z=D.length;R<z;R++){const L=D[R],H=g(L);T.boundary+=H.boundary,T.storage+=H.storage}if(I.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=w,b>0){C=w%S;const R=S-C;C!==0&&R-T.boundary<0&&(w+=S-C,I.__offset=w)}w+=T.storage}return C=w%S,C>0&&(w+=S-C),A.__size=w,A.__cache={},this}function g(A){const y={boundary:0,storage:0};return typeof A=="number"?(y.boundary=4,y.storage=4):A.isVector2?(y.boundary=8,y.storage=8):A.isVector3||A.isColor?(y.boundary=16,y.storage=12):A.isVector4?(y.boundary=16,y.storage=16):A.isMatrix3?(y.boundary=48,y.storage=48):A.isMatrix4?(y.boundary=64,y.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),y}function v(A){const y=A.target;y.removeEventListener("dispose",v);const w=o.indexOf(y.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}function p(){for(const A in r)n.deleteBuffer(r[A]);o=[],r={},s={}}return{bind:l,update:c,dispose:p}}function dae(){const n=BA("canvas");return n.style.display="block",n}class vE{constructor(e={}){const{canvas:t=dae(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let h;i!==null?h=i.getContextAttributes().alpha:h=o;const d=new Uint32Array(4),m=new Int32Array(4);let g=null,v=null;const p=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=En,this.useLegacyLights=!0,this.toneMapping=ma,this.toneMappingExposure=1;const y=this;let w=!1,S=0,C=0,b=null,M=-1,I=null;const T=new sn,D=new sn;let R=null;const z=new et(0);let L=0,H=t.width,J=t.height,Z=1,U=null,X=null;const Y=new sn(0,0,H,J),O=new sn(0,0,H,J);let W=!1;const $=new l0;let k=!1,V=!1,Q=null;const j=new He,oe=new Se,xe=new F,pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function de(){return b===null?Z:1}let te=i;function Ee(G,re){for(let he=0;he<G.length;he++){const le=G[he],me=t.getContext(le,re);if(me!==null)return me}return null}try{const G={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${il}`),t.addEventListener("webglcontextlost",_e,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",at,!1),te===null){const re=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&re.shift(),te=Ee(re,G),te===null)throw Ee(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&te instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),te.getShaderPrecisionFormat===void 0&&(te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let ue,ve,ye,Be,ae,ie,be,Re,ct,se,ee,Ae,Ue,Ce,ke,We,Xe,Oe,ft,lt,st,ce,De,$e;function Ye(){ue=new Ise(te),ve=new Ese(te,ue,e),ue.init(ve),ce=new OH(te,ue,ve),ye=new aae(te,ue,ve),Be=new Pse(te),ae=new qoe,ie=new lae(te,ue,ye,ae,ve,ce,Be),be=new Sse(y),Re=new Mse(y),ct=new Gne(te,ve),De=new xse(te,ue,ct,ve),se=new Tse(te,ct,Be,De),ee=new Fse(te,se,ct,Be),ft=new Lse(te,ve,ie),We=new wse(ae),Ae=new Xoe(y,be,Re,ue,ve,De,We),Ue=new fae(y,ae),Ce=new Koe,ke=new iae(ue,ve),Oe=new yse(y,be,Re,ye,ee,h,l),Xe=new oae(y,ee,ve),$e=new hae(te,Be,ve,ye),lt=new _se(te,ue,Be,ve),st=new Bse(te,ue,Be,ve),Be.programs=Ae.programs,y.capabilities=ve,y.extensions=ue,y.properties=ae,y.renderLists=Ce,y.shadowMap=Xe,y.state=ye,y.info=Be}Ye();const fe=new uae(y,te);this.xr=fe,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const G=ue.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=ue.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(G){G!==void 0&&(Z=G,this.setSize(H,J,!1))},this.getSize=function(G){return G.set(H,J)},this.setSize=function(G,re,he=!0){if(fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=G,J=re,t.width=Math.floor(G*Z),t.height=Math.floor(re*Z),he===!0&&(t.style.width=G+"px",t.style.height=re+"px"),this.setViewport(0,0,G,re)},this.getDrawingBufferSize=function(G){return G.set(H*Z,J*Z).floor()},this.setDrawingBufferSize=function(G,re,he){H=G,J=re,Z=he,t.width=Math.floor(G*he),t.height=Math.floor(re*he),this.setViewport(0,0,G,re)},this.getCurrentViewport=function(G){return G.copy(T)},this.getViewport=function(G){return G.copy(Y)},this.setViewport=function(G,re,he,le){G.isVector4?Y.set(G.x,G.y,G.z,G.w):Y.set(G,re,he,le),ye.viewport(T.copy(Y).multiplyScalar(Z).floor())},this.getScissor=function(G){return G.copy(O)},this.setScissor=function(G,re,he,le){G.isVector4?O.set(G.x,G.y,G.z,G.w):O.set(G,re,he,le),ye.scissor(D.copy(O).multiplyScalar(Z).floor())},this.getScissorTest=function(){return W},this.setScissorTest=function(G){ye.setScissorTest(W=G)},this.setOpaqueSort=function(G){U=G},this.setTransparentSort=function(G){X=G},this.getClearColor=function(G){return G.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(G=!0,re=!0,he=!0){let le=0;if(G){let me=!1;if(b!==null){const Ge=b.texture.format;me=Ge===Hh||Ge===rv||Ge===uE}if(me){const Ge=b.texture.type,Qe=Ge===hi||Ge===ps||Ge===Af||Ge===ju||Ge===hT||Ge===dT,Ke=Oe.getClearColor(),Ne=Oe.getClearAlpha(),Je=Ke.r,Te=Ke.g,pt=Ke.b;Qe?(d[0]=Je,d[1]=Te,d[2]=pt,d[3]=Ne,te.clearBufferuiv(te.COLOR,0,d)):(m[0]=Je,m[1]=Te,m[2]=pt,m[3]=Ne,te.clearBufferiv(te.COLOR,0,m))}else le|=te.COLOR_BUFFER_BIT}re&&(le|=te.DEPTH_BUFFER_BIT),he&&(le|=te.STENCIL_BUFFER_BIT),te.clear(le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",_e,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",at,!1),Ce.dispose(),ke.dispose(),ae.dispose(),be.dispose(),Re.dispose(),ee.dispose(),De.dispose(),$e.dispose(),Ae.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",qe),fe.removeEventListener("sessionend",ut),Q&&(Q.dispose(),Q=null),Mt.stop()};function _e(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const G=Be.autoReset,re=Xe.enabled,he=Xe.autoUpdate,le=Xe.needsUpdate,me=Xe.type;Ye(),Be.autoReset=G,Xe.enabled=re,Xe.autoUpdate=he,Xe.needsUpdate=le,Xe.type=me}function at(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function ot(G){const re=G.target;re.removeEventListener("dispose",ot),yt(re)}function yt(G){we(G),ae.remove(G)}function we(G){const re=ae.get(G).programs;re!==void 0&&(re.forEach(function(he){Ae.releaseProgram(he)}),G.isShaderMaterial&&Ae.releaseShaderCache(G))}this.renderBufferDirect=function(G,re,he,le,me,Ge){re===null&&(re=pe);const Qe=me.isMesh&&me.matrixWorld.determinant()<0,Ke=un(G,re,he,le,me);ye.setMaterial(le,Qe);let Ne=he.index,Je=1;le.wireframe===!0&&(Ne=se.getWireframeAttribute(he),Je=2);const Te=he.drawRange,pt=he.attributes.position;let At=Te.start*Je,vt=(Te.start+Te.count)*Je;Ge!==null&&(At=Math.max(At,Ge.start*Je),vt=Math.min(vt,(Ge.start+Ge.count)*Je)),Ne!==null?(At=Math.max(At,0),vt=Math.min(vt,Ne.count)):pt!=null&&(At=Math.max(At,0),vt=Math.min(vt,pt.count));const Nt=vt-At;if(Nt<0||Nt===1/0)return;De.setup(me,le,Ke,he,Ne);let Kt,Vt=lt;if(Ne!==null&&(Kt=ct.get(Ne),Vt=st,Vt.setIndex(Kt)),me.isMesh)le.wireframe===!0?(ye.setLineWidth(le.wireframeLinewidth*de()),Vt.setMode(te.LINES)):Vt.setMode(te.TRIANGLES);else if(me.isLine){let Pt=le.linewidth;Pt===void 0&&(Pt=1),ye.setLineWidth(Pt*de()),me.isLineSegments?Vt.setMode(te.LINES):me.isLineLoop?Vt.setMode(te.LINE_LOOP):Vt.setMode(te.LINE_STRIP)}else me.isPoints?Vt.setMode(te.POINTS):me.isSprite&&Vt.setMode(te.TRIANGLES);if(me.isInstancedMesh)Vt.renderInstances(At,Nt,me.count);else if(he.isInstancedBufferGeometry){const Pt=he._maxInstanceCount!==void 0?he._maxInstanceCount:1/0,Zt=Math.min(he.instanceCount,Pt);Vt.renderInstances(At,Nt,Zt)}else Vt.render(At,Nt)},this.compile=function(G,re){function he(le,me,Ge){le.transparent===!0&&le.side===ni&&le.forceSinglePass===!1?(le.side=er,le.needsUpdate=!0,wn(le,me,Ge),le.side=Rs,le.needsUpdate=!0,wn(le,me,Ge),le.side=ni):wn(le,me,Ge)}v=ke.get(G),v.init(),A.push(v),G.traverseVisible(function(le){le.isLight&&le.layers.test(re.layers)&&(v.pushLight(le),le.castShadow&&v.pushShadow(le))}),v.setupLights(y.useLegacyLights),G.traverse(function(le){const me=le.material;if(me)if(Array.isArray(me))for(let Ge=0;Ge<me.length;Ge++){const Qe=me[Ge];he(Qe,G,le)}else he(me,G,le)}),A.pop(),v=null};let Ie=null;function Fe(G){Ie&&Ie(G)}function qe(){Mt.stop()}function ut(){Mt.start()}const Mt=new PH;Mt.setAnimationLoop(Fe),typeof self<"u"&&Mt.setContext(self),this.setAnimationLoop=function(G){Ie=G,fe.setAnimationLoop(G),G===null?Mt.stop():Mt.start()},fe.addEventListener("sessionstart",qe),fe.addEventListener("sessionend",ut),this.render=function(G,re){if(re!==void 0&&re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),re.parent===null&&re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),fe.enabled===!0&&fe.isPresenting===!0&&(fe.cameraAutoUpdate===!0&&fe.updateCamera(re),re=fe.getCamera()),G.isScene===!0&&G.onBeforeRender(y,G,re,b),v=ke.get(G,A.length),v.init(),A.push(v),j.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),$.setFromProjectionMatrix(j),V=this.localClippingEnabled,k=We.init(this.clippingPlanes,V),g=Ce.get(G,p.length),g.init(),p.push(g),It(G,re,0,y.sortObjects),g.finish(),y.sortObjects===!0&&g.sort(U,X),this.info.render.frame++,k===!0&&We.beginShadows();const he=v.state.shadowsArray;if(Xe.render(he,G,re),k===!0&&We.endShadows(),this.info.autoReset===!0&&this.info.reset(),Oe.render(g,G),v.setupLights(y.useLegacyLights),re.isArrayCamera){const le=re.cameras;for(let me=0,Ge=le.length;me<Ge;me++){const Qe=le[me];wt(g,G,Qe,Qe.viewport)}}else wt(g,G,re);b!==null&&(ie.updateMultisampleRenderTarget(b),ie.updateRenderTargetMipmap(b)),G.isScene===!0&&G.onAfterRender(y,G,re),De.resetDefaultState(),M=-1,I=null,A.pop(),A.length>0?v=A[A.length-1]:v=null,p.pop(),p.length>0?g=p[p.length-1]:g=null};function It(G,re,he,le){if(G.visible===!1)return;if(G.layers.test(re.layers)){if(G.isGroup)he=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(re);else if(G.isLight)v.pushLight(G),G.castShadow&&v.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||$.intersectsSprite(G)){le&&xe.setFromMatrixPosition(G.matrixWorld).applyMatrix4(j);const Qe=ee.update(G),Ke=G.material;Ke.visible&&g.push(G,Qe,Ke,he,xe.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||$.intersectsObject(G))){const Qe=ee.update(G),Ke=G.material;if(le&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),xe.copy(G.boundingSphere.center)):(Qe.boundingSphere===null&&Qe.computeBoundingSphere(),xe.copy(Qe.boundingSphere.center)),xe.applyMatrix4(G.matrixWorld).applyMatrix4(j)),Array.isArray(Ke)){const Ne=Qe.groups;for(let Je=0,Te=Ne.length;Je<Te;Je++){const pt=Ne[Je],At=Ke[pt.materialIndex];At&&At.visible&&g.push(G,Qe,At,he,xe.z,pt)}}else Ke.visible&&g.push(G,Qe,Ke,he,xe.z,null)}}const Ge=G.children;for(let Qe=0,Ke=Ge.length;Qe<Ke;Qe++)It(Ge[Qe],re,he,le)}function wt(G,re,he,le){const me=G.opaque,Ge=G.transmissive,Qe=G.transparent;v.setupLightsView(he),k===!0&&We.setGlobalState(y.clippingPlanes,he),Ge.length>0&&Ht(me,Ge,re,he),le&&ye.viewport(T.copy(le)),me.length>0&&zt(me,re,he),Ge.length>0&&zt(Ge,re,he),Qe.length>0&&zt(Qe,re,he),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Ht(G,re,he,le){const me=ve.isWebGL2;Q===null&&(Q=new Qn(1,1,{generateMipmaps:!0,type:ue.has("EXT_color_buffer_half_float")?jn:hi,minFilter:bo,samples:me?4:0})),y.getDrawingBufferSize(oe),me?Q.setSize(oe.x,oe.y):Q.setSize(c3(oe.x),c3(oe.y));const Ge=y.getRenderTarget();y.setRenderTarget(Q),y.getClearColor(z),L=y.getClearAlpha(),L<1&&y.setClearColor(16777215,.5),y.clear();const Qe=y.toneMapping;y.toneMapping=ma,zt(G,he,le),ie.updateMultisampleRenderTarget(Q),ie.updateRenderTargetMipmap(Q);let Ke=!1;for(let Ne=0,Je=re.length;Ne<Je;Ne++){const Te=re[Ne],pt=Te.object,At=Te.geometry,vt=Te.material,Nt=Te.group;if(vt.side===ni&&pt.layers.test(le.layers)){const Kt=vt.side;vt.side=er,vt.needsUpdate=!0,Fn(pt,he,le,At,vt,Nt),vt.side=Kt,vt.needsUpdate=!0,Ke=!0}}Ke===!0&&(ie.updateMultisampleRenderTarget(Q),ie.updateRenderTargetMipmap(Q)),y.setRenderTarget(Ge),y.setClearColor(z,L),y.toneMapping=Qe}function zt(G,re,he){const le=re.isScene===!0?re.overrideMaterial:null;for(let me=0,Ge=G.length;me<Ge;me++){const Qe=G[me],Ke=Qe.object,Ne=Qe.geometry,Je=le===null?Qe.material:le,Te=Qe.group;Ke.layers.test(he.layers)&&Fn(Ke,re,he,Ne,Je,Te)}}function Fn(G,re,he,le,me,Ge){G.onBeforeRender(y,re,he,le,me,Ge),G.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),me.onBeforeRender(y,re,he,le,G,Ge),me.transparent===!0&&me.side===ni&&me.forceSinglePass===!1?(me.side=er,me.needsUpdate=!0,y.renderBufferDirect(he,re,le,me,G,Ge),me.side=Rs,me.needsUpdate=!0,y.renderBufferDirect(he,re,le,me,G,Ge),me.side=ni):y.renderBufferDirect(he,re,le,me,G,Ge),G.onAfterRender(y,re,he,le,me,Ge)}function wn(G,re,he){re.isScene!==!0&&(re=pe);const le=ae.get(G),me=v.state.lights,Ge=v.state.shadowsArray,Qe=me.state.version,Ke=Ae.getParameters(G,me.state,Ge,re,he),Ne=Ae.getProgramCacheKey(Ke);let Je=le.programs;le.environment=G.isMeshStandardMaterial?re.environment:null,le.fog=re.fog,le.envMap=(G.isMeshStandardMaterial?Re:be).get(G.envMap||le.environment),Je===void 0&&(G.addEventListener("dispose",ot),Je=new Map,le.programs=Je);let Te=Je.get(Ne);if(Te!==void 0){if(le.currentProgram===Te&&le.lightsStateVersion===Qe)return ht(G,Ke),Te}else Ke.uniforms=Ae.getUniforms(G),G.onBuild(he,Ke,y),G.onBeforeCompile(Ke,y),Te=Ae.acquireProgram(Ke,Ne),Je.set(Ne,Te),le.uniforms=Ke.uniforms;const pt=le.uniforms;(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(pt.clippingPlanes=We.uniform),ht(G,Ke),le.needsLights=ne(G),le.lightsStateVersion=Qe,le.needsLights&&(pt.ambientLightColor.value=me.state.ambient,pt.lightProbe.value=me.state.probe,pt.directionalLights.value=me.state.directional,pt.directionalLightShadows.value=me.state.directionalShadow,pt.spotLights.value=me.state.spot,pt.spotLightShadows.value=me.state.spotShadow,pt.rectAreaLights.value=me.state.rectArea,pt.ltc_1.value=me.state.rectAreaLTC1,pt.ltc_2.value=me.state.rectAreaLTC2,pt.pointLights.value=me.state.point,pt.pointLightShadows.value=me.state.pointShadow,pt.hemisphereLights.value=me.state.hemi,pt.directionalShadowMap.value=me.state.directionalShadowMap,pt.directionalShadowMatrix.value=me.state.directionalShadowMatrix,pt.spotShadowMap.value=me.state.spotShadowMap,pt.spotLightMatrix.value=me.state.spotLightMatrix,pt.spotLightMap.value=me.state.spotLightMap,pt.pointShadowMap.value=me.state.pointShadowMap,pt.pointShadowMatrix.value=me.state.pointShadowMatrix);const At=Te.getUniforms(),vt=u_.seqWithValue(At.seq,pt);return le.currentProgram=Te,le.uniformsList=vt,Te}function ht(G,re){const he=ae.get(G);he.outputColorSpace=re.outputColorSpace,he.instancing=re.instancing,he.skinning=re.skinning,he.morphTargets=re.morphTargets,he.morphNormals=re.morphNormals,he.morphColors=re.morphColors,he.morphTargetsCount=re.morphTargetsCount,he.numClippingPlanes=re.numClippingPlanes,he.numIntersection=re.numClipIntersection,he.vertexAlphas=re.vertexAlphas,he.vertexTangents=re.vertexTangents,he.toneMapping=re.toneMapping}function un(G,re,he,le,me){re.isScene!==!0&&(re=pe),ie.resetTextureUnits();const Ge=re.fog,Qe=le.isMeshStandardMaterial?re.environment:null,Ke=b===null?y.outputColorSpace:b.isXRRenderTarget===!0?b.texture.colorSpace:ro,Ne=(le.isMeshStandardMaterial?Re:be).get(le.envMap||Qe),Je=le.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,Te=!!he.attributes.tangent&&(!!le.normalMap||le.anisotropy>0),pt=!!he.morphAttributes.position,At=!!he.morphAttributes.normal,vt=!!he.morphAttributes.color,Nt=le.toneMapped?y.toneMapping:ma,Kt=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,Vt=Kt!==void 0?Kt.length:0,Pt=ae.get(le),Zt=v.state.lights;if(k===!0&&(V===!0||G!==I)){const cn=G===I&&le.id===M;We.setState(le,G,cn)}let kt=!1;le.version===Pt.__version?(Pt.needsLights&&Pt.lightsStateVersion!==Zt.state.version||Pt.outputColorSpace!==Ke||me.isInstancedMesh&&Pt.instancing===!1||!me.isInstancedMesh&&Pt.instancing===!0||me.isSkinnedMesh&&Pt.skinning===!1||!me.isSkinnedMesh&&Pt.skinning===!0||Pt.envMap!==Ne||le.fog===!0&&Pt.fog!==Ge||Pt.numClippingPlanes!==void 0&&(Pt.numClippingPlanes!==We.numPlanes||Pt.numIntersection!==We.numIntersection)||Pt.vertexAlphas!==Je||Pt.vertexTangents!==Te||Pt.morphTargets!==pt||Pt.morphNormals!==At||Pt.morphColors!==vt||Pt.toneMapping!==Nt||ve.isWebGL2===!0&&Pt.morphTargetsCount!==Vt)&&(kt=!0):(kt=!0,Pt.__version=le.version);let ln=Pt.currentProgram;kt===!0&&(ln=wn(le,re,me));let Yn=!1,on=!1,Xn=!1;const Pn=ln.getUniforms(),Kn=Pt.uniforms;if(ye.useProgram(ln.program)&&(Yn=!0,on=!0,Xn=!0),le.id!==M&&(M=le.id,on=!0),Yn||I!==G){if(Pn.setValue(te,"projectionMatrix",G.projectionMatrix),ve.logarithmicDepthBuffer&&Pn.setValue(te,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),I!==G&&(I=G,on=!0,Xn=!0),le.isShaderMaterial||le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshStandardMaterial||le.envMap){const cn=Pn.map.cameraPosition;cn!==void 0&&cn.setValue(te,xe.setFromMatrixPosition(G.matrixWorld))}(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial)&&Pn.setValue(te,"isOrthographic",G.isOrthographicCamera===!0),(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial||le.isShadowMaterial||me.isSkinnedMesh)&&Pn.setValue(te,"viewMatrix",G.matrixWorldInverse)}if(me.isSkinnedMesh){Pn.setOptional(te,me,"bindMatrix"),Pn.setOptional(te,me,"bindMatrixInverse");const cn=me.skeleton;cn&&(ve.floatVertexTextures?(cn.boneTexture===null&&cn.computeBoneTexture(),Pn.setValue(te,"boneTexture",cn.boneTexture,ie),Pn.setValue(te,"boneTextureSize",cn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ui=he.morphAttributes;if((ui.position!==void 0||ui.normal!==void 0||ui.color!==void 0&&ve.isWebGL2===!0)&&ft.update(me,he,ln),(on||Pt.receiveShadow!==me.receiveShadow)&&(Pt.receiveShadow=me.receiveShadow,Pn.setValue(te,"receiveShadow",me.receiveShadow)),le.isMeshGouraudMaterial&&le.envMap!==null&&(Kn.envMap.value=Ne,Kn.flipEnvMap.value=Ne.isCubeTexture&&Ne.isRenderTargetTexture===!1?-1:1),on&&(Pn.setValue(te,"toneMappingExposure",y.toneMappingExposure),Pt.needsLights&&Jn(Kn,Xn),Ge&&le.fog===!0&&Ue.refreshFogUniforms(Kn,Ge),Ue.refreshMaterialUniforms(Kn,le,Z,J,Q),u_.upload(te,Pt.uniformsList,Kn,ie)),le.isShaderMaterial&&le.uniformsNeedUpdate===!0&&(u_.upload(te,Pt.uniformsList,Kn,ie),le.uniformsNeedUpdate=!1),le.isSpriteMaterial&&Pn.setValue(te,"center",me.center),Pn.setValue(te,"modelViewMatrix",me.modelViewMatrix),Pn.setValue(te,"normalMatrix",me.normalMatrix),Pn.setValue(te,"modelMatrix",me.matrixWorld),le.isShaderMaterial||le.isRawShaderMaterial){const cn=le.uniformsGroups;for(let di=0,Hn=cn.length;di<Hn;di++)if(ve.isWebGL2){const pn=cn[di];$e.update(pn,ln),$e.bind(pn,ln)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ln}function Jn(G,re){G.ambientLightColor.needsUpdate=re,G.lightProbe.needsUpdate=re,G.directionalLights.needsUpdate=re,G.directionalLightShadows.needsUpdate=re,G.pointLights.needsUpdate=re,G.pointLightShadows.needsUpdate=re,G.spotLights.needsUpdate=re,G.spotLightShadows.needsUpdate=re,G.rectAreaLights.needsUpdate=re,G.hemisphereLights.needsUpdate=re}function ne(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(G,re,he){ae.get(G.texture).__webglTexture=re,ae.get(G.depthTexture).__webglTexture=he;const le=ae.get(G);le.__hasExternalTextures=!0,le.__hasExternalTextures&&(le.__autoAllocateDepthBuffer=he===void 0,le.__autoAllocateDepthBuffer||ue.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),le.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(G,re){const he=ae.get(G);he.__webglFramebuffer=re,he.__useDefaultFramebuffer=re===void 0},this.setRenderTarget=function(G,re=0,he=0){b=G,S=re,C=he;let le=!0,me=null,Ge=!1,Qe=!1;if(G){const Ne=ae.get(G);Ne.__useDefaultFramebuffer!==void 0?(ye.bindFramebuffer(te.FRAMEBUFFER,null),le=!1):Ne.__webglFramebuffer===void 0?ie.setupRenderTarget(G):Ne.__hasExternalTextures&&ie.rebindTextures(G,ae.get(G.texture).__webglTexture,ae.get(G.depthTexture).__webglTexture);const Je=G.texture;(Je.isData3DTexture||Je.isDataArrayTexture||Je.isCompressedArrayTexture)&&(Qe=!0);const Te=ae.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(me=Te[re],Ge=!0):ve.isWebGL2&&G.samples>0&&ie.useMultisampledRTT(G)===!1?me=ae.get(G).__webglMultisampledFramebuffer:me=Te,T.copy(G.viewport),D.copy(G.scissor),R=G.scissorTest}else T.copy(Y).multiplyScalar(Z).floor(),D.copy(O).multiplyScalar(Z).floor(),R=W;if(ye.bindFramebuffer(te.FRAMEBUFFER,me)&&ve.drawBuffers&&le&&ye.drawBuffers(G,me),ye.viewport(T),ye.scissor(D),ye.setScissorTest(R),Ge){const Ne=ae.get(G.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+re,Ne.__webglTexture,he)}else if(Qe){const Ne=ae.get(G.texture),Je=re||0;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ne.__webglTexture,he||0,Je)}M=-1},this.readRenderTargetPixels=function(G,re,he,le,me,Ge,Qe){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ke=ae.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&Qe!==void 0&&(Ke=Ke[Qe]),Ke){ye.bindFramebuffer(te.FRAMEBUFFER,Ke);try{const Ne=G.texture,Je=Ne.format,Te=Ne.type;if(Je!==Vn&&ce.convert(Je)!==te.getParameter(te.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const pt=Te===jn&&(ue.has("EXT_color_buffer_half_float")||ve.isWebGL2&&ue.has("EXT_color_buffer_float"));if(Te!==hi&&ce.convert(Te)!==te.getParameter(te.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Te===Ln&&(ve.isWebGL2||ue.has("OES_texture_float")||ue.has("WEBGL_color_buffer_float")))&&!pt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}re>=0&&re<=G.width-le&&he>=0&&he<=G.height-me&&te.readPixels(re,he,le,me,ce.convert(Je),ce.convert(Te),Ge)}finally{const Ne=b!==null?ae.get(b).__webglFramebuffer:null;ye.bindFramebuffer(te.FRAMEBUFFER,Ne)}}},this.copyFramebufferToTexture=function(G,re,he=0){const le=Math.pow(2,-he),me=Math.floor(re.image.width*le),Ge=Math.floor(re.image.height*le);ie.setTexture2D(re,0),te.copyTexSubImage2D(te.TEXTURE_2D,he,0,0,G.x,G.y,me,Ge),ye.unbindTexture()},this.copyTextureToTexture=function(G,re,he,le=0){const me=re.image.width,Ge=re.image.height,Qe=ce.convert(he.format),Ke=ce.convert(he.type);ie.setTexture2D(he,0),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,he.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,he.unpackAlignment),re.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,le,G.x,G.y,me,Ge,Qe,Ke,re.image.data):re.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,le,G.x,G.y,re.mipmaps[0].width,re.mipmaps[0].height,Qe,re.mipmaps[0].data):te.texSubImage2D(te.TEXTURE_2D,le,G.x,G.y,Qe,Ke,re.image),le===0&&he.generateMipmaps&&te.generateMipmap(te.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(G,re,he,le,me=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ge=G.max.x-G.min.x+1,Qe=G.max.y-G.min.y+1,Ke=G.max.z-G.min.z+1,Ne=ce.convert(le.format),Je=ce.convert(le.type);let Te;if(le.isData3DTexture)ie.setTexture3D(le,0),Te=te.TEXTURE_3D;else if(le.isDataArrayTexture)ie.setTexture2DArray(le,0),Te=te.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,le.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,le.unpackAlignment);const pt=te.getParameter(te.UNPACK_ROW_LENGTH),At=te.getParameter(te.UNPACK_IMAGE_HEIGHT),vt=te.getParameter(te.UNPACK_SKIP_PIXELS),Nt=te.getParameter(te.UNPACK_SKIP_ROWS),Kt=te.getParameter(te.UNPACK_SKIP_IMAGES),Vt=he.isCompressedTexture?he.mipmaps[0]:he.image;te.pixelStorei(te.UNPACK_ROW_LENGTH,Vt.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Vt.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,G.min.x),te.pixelStorei(te.UNPACK_SKIP_ROWS,G.min.y),te.pixelStorei(te.UNPACK_SKIP_IMAGES,G.min.z),he.isDataTexture||he.isData3DTexture?te.texSubImage3D(Te,me,re.x,re.y,re.z,Ge,Qe,Ke,Ne,Je,Vt.data):he.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),te.compressedTexSubImage3D(Te,me,re.x,re.y,re.z,Ge,Qe,Ke,Ne,Vt.data)):te.texSubImage3D(Te,me,re.x,re.y,re.z,Ge,Qe,Ke,Ne,Je,Vt),te.pixelStorei(te.UNPACK_ROW_LENGTH,pt),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,At),te.pixelStorei(te.UNPACK_SKIP_PIXELS,vt),te.pixelStorei(te.UNPACK_SKIP_ROWS,Nt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Kt),me===0&&le.generateMipmaps&&te.generateMipmap(Te),ye.unbindTexture()},this.initTexture=function(G){G.isCubeTexture?ie.setTextureCube(G,0):G.isData3DTexture?ie.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?ie.setTexture2DArray(G,0):ie.setTexture2D(G,0),ye.unbindTexture()},this.resetState=function(){S=0,C=0,b=null,ye.reset(),De.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Dl}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===En?Wu:AT}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Wu?En:ro}}class UH extends vE{}UH.prototype.isWebGL1Renderer=!0;class yE{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new et(e),this.density=t}clone(){return new yE(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class xE{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new et(e),this.near=t,this.far=i}clone(){return new xE(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Mo extends Jt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class av{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=IA,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=So()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=So()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=So()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ws=new F;class Js{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ws.fromBufferAttribute(this,t),ws.applyMatrix4(e),this.setXYZ(t,ws.x,ws.y,ws.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ws.fromBufferAttribute(this,t),ws.applyNormalMatrix(e),this.setXYZ(t,ws.x,ws.y,ws.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ws.fromBufferAttribute(this,t),ws.transformDirection(e),this.setXYZ(t,ws.x,ws.y,ws.z);return this}setX(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=xo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=xo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=xo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=xo(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=In(t,this.array),i=In(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=In(t,this.array),i=In(i,this.array),r=In(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=In(t,this.array),i=In(i,this.array),r=In(r,this.array),s=In(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new qt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Js(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class CT extends ur{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Qd;const r1=new F,Vd=new F,jd=new F,Wd=new Se,s1=new Se,kH=new He,p2=new F,o1=new F,m2=new F,IR=new Se,MS=new Se,TR=new Se;class NH extends Jt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Qd===void 0){Qd=new Gt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new av(t,5);Qd.setIndex([0,1,2,0,2,3]),Qd.setAttribute("position",new Js(i,3,0,!1)),Qd.setAttribute("uv",new Js(i,2,3,!1))}this.geometry=Qd,this.material=e!==void 0?e:new CT,this.center=new Se(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Vd.setFromMatrixScale(this.matrixWorld),kH.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),jd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Vd.multiplyScalar(-jd.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;g2(p2.set(-.5,-.5,0),jd,o,Vd,r,s),g2(o1.set(.5,-.5,0),jd,o,Vd,r,s),g2(m2.set(.5,.5,0),jd,o,Vd,r,s),IR.set(0,0),MS.set(1,0),TR.set(1,1);let a=e.ray.intersectTriangle(p2,o1,m2,!1,r1);if(a===null&&(g2(o1.set(-.5,.5,0),jd,o,Vd,r,s),MS.set(0,1),a=e.ray.intersectTriangle(p2,m2,o1,!1,r1),a===null))return;const l=e.ray.origin.distanceTo(r1);l<e.near||l>e.far||t.push({distance:l,point:r1.clone(),uv:vr.getInterpolation(r1,p2,o1,m2,IR,MS,TR,new Se),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function g2(n,e,t,i,r,s){Wd.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(s1.x=s*Wd.x-r*Wd.y,s1.y=r*Wd.x+s*Wd.y):s1.copy(Wd),n.copy(e),n.x+=s1.x,n.y+=s1.y,n.applyMatrix4(kH)}const A2=new F,BR=new F;class GH extends Jt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){A2.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(A2);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){A2.setFromMatrixPosition(e.matrixWorld),BR.setFromMatrixPosition(this.matrixWorld);const i=A2.distanceTo(BR)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const PR=new F,RR=new sn,DR=new sn,pae=new F,LR=new He,Yd=new F,IS=new Bi,FR=new He,TS=new xa;class lv extends gt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new He,this.bindMatrixInverse=new He,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Gn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Yd.fromBufferAttribute(t,i),this.applyBoneTransform(i,Yd),this.boundingBox.expandByPoint(Yd)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Bi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Yd.fromBufferAttribute(t,i),this.applyBoneTransform(i,Yd),this.boundingSphere.expandByPoint(Yd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),IS.copy(this.boundingSphere),IS.applyMatrix4(r),e.ray.intersectsSphere(IS)!==!1&&(FR.copy(r).invert(),TS.copy(e.ray).applyMatrix4(FR),!(this.boundingBox!==null&&TS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,TS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;RR.fromBufferAttribute(r.attributes.skinIndex,e),DR.fromBufferAttribute(r.attributes.skinWeight,e),PR.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=DR.getComponent(s);if(o!==0){const a=RR.getComponent(s);LR.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(pae.copy(PR).applyMatrix4(LR),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Vm extends Jt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class io extends Nn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=dn,u=dn,f,h){super(null,o,a,l,c,u,r,s,f,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const OR=new He,mae=new He;class f0{constructor(e=[],t=[]){this.uuid=So(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new He)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new He;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:mae;OR.multiplyMatrices(a,t[s]),OR.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new f0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=MH(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new io(t,e,e,Vn,Ln);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Vm),this.bones.push(o),this.boneInverses.push(new He().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class el extends qt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Xd=new He,zR=new He,v2=[],UR=new Gn,gae=new He,a1=new gt,l1=new Bi;class cv extends gt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new el(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,gae)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Gn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Xd),UR.copy(e.boundingBox).applyMatrix4(Xd),this.boundingBox.union(UR)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Bi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Xd),l1.copy(e.boundingSphere).applyMatrix4(Xd),this.boundingSphere.union(l1)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(a1.geometry=this.geometry,a1.material=this.material,a1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),l1.copy(this.boundingSphere),l1.applyMatrix4(i),e.ray.intersectsSphere(l1)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Xd),zR.multiplyMatrices(i,Xd),a1.matrixWorld=zR,a1.raycast(e,v2);for(let o=0,a=v2.length;o<a;o++){const l=v2[o];l.instanceId=s,l.object=this,t.push(l)}v2.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new el(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class tr extends ur{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const kR=new F,NR=new F,GR=new He,BS=new xa,y2=new Bi;let vn=class extends Jt{constructor(e=new Gt,t=new tr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)kR.fromBufferAttribute(t,r-1),NR.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=kR.distanceTo(NR);e.setAttribute("lineDistance",new Et(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),y2.copy(i.boundingSphere),y2.applyMatrix4(r),y2.radius+=s,e.ray.intersectsSphere(y2)===!1)return;GR.copy(r).invert(),BS.copy(e.ray).applyMatrix4(GR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new F,u=new F,f=new F,h=new F,d=this.isLineSegments?2:1,m=i.index,v=i.attributes.position;if(m!==null){const p=Math.max(0,o.start),A=Math.min(m.count,o.start+o.count);for(let y=p,w=A-1;y<w;y+=d){const S=m.getX(y),C=m.getX(y+1);if(c.fromBufferAttribute(v,S),u.fromBufferAttribute(v,C),BS.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(h);M<e.near||M>e.far||t.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const p=Math.max(0,o.start),A=Math.min(v.count,o.start+o.count);for(let y=p,w=A-1;y<w;y+=d){if(c.fromBufferAttribute(v,y),u.fromBufferAttribute(v,y+1),BS.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(h);C<e.near||C>e.far||t.push({distance:C,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const HR=new F,QR=new F;class rl extends vn{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)HR.fromBufferAttribute(t,r),QR.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+HR.distanceTo(QR);e.setAttribute("lineDistance",new Et(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class bT extends vn{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class uv extends ur{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const VR=new He,TM=new xa,x2=new Bi,_2=new F;let MT=class extends Jt{constructor(e=new Gt,t=new uv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),x2.copy(i.boundingSphere),x2.applyMatrix4(r),x2.radius+=s,e.ray.intersectsSphere(x2)===!1)return;VR.copy(r).invert(),TM.copy(e.ray).applyMatrix4(VR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const h=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let m=h,g=d;m<g;m++){const v=c.getX(m);_2.fromBufferAttribute(f,v),jR(_2,v,l,r,e,t,this)}}else{const h=Math.max(0,o.start),d=Math.min(f.count,o.start+o.count);for(let m=h,g=d;m<g;m++)_2.fromBufferAttribute(f,m),jR(_2,m,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function jR(n,e,t,i,r,s,o){const a=TM.distanceSqToPoint(n);if(a<t){const l=new F;TM.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}let HH=class extends Nn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Xt,this.magFilter=s!==void 0?s:Xt,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}};class Aae extends Nn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=dn,this.minFilter=dn,this.generateMipmaps=!1,this.needsUpdate=!0}}class nd extends Nn{constructor(e,t,i,r,s,o,a,l,c,u,f,h){super(null,o,a,l,c,u,r,s,f,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}let vae=class extends nd{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=li}};class _E extends Nn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class _a{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],h=i[r+1]-u,d=(o-u)/h;return(r+d)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Se:new F);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new F,r=[],s=[],o=[],a=new F,l=new He;for(let d=0;d<=e;d++){const m=d/e;r[d]=this.getTangentAt(m,new F)}s[0]=new F,o[0]=new F;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos($i(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,m))}o[d].crossVectors(r[d],s[d])}if(t===!0){let d=Math.acos($i(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(r[m],d*m)),o[m].crossVectors(r[m],s[m])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Bh extends _a{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new Se,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,d=c-this.aY;l=h*u-d*f+this.aX,c=h*f+d*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class QH extends Bh{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function IT(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,d=(a-o)/u-(l-o)/(u+f)+(l-a)/f;h*=u,d*=u,r(o,a,h,d)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const E2=new F,PS=new IT,RS=new IT,DS=new IT;class EE extends _a{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new F){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(E2.subVectors(r[0],r[1]).add(r[0]),c=E2);const f=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(E2.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=E2),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(f),d),g=Math.pow(f.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(u),d);g<1e-4&&(g=1),m<1e-4&&(m=g),v<1e-4&&(v=g),PS.initNonuniformCatmullRom(c.x,f.x,h.x,u.x,m,g,v),RS.initNonuniformCatmullRom(c.y,f.y,h.y,u.y,m,g,v),DS.initNonuniformCatmullRom(c.z,f.z,h.z,u.z,m,g,v)}else this.curveType==="catmullrom"&&(PS.initCatmullRom(c.x,f.x,h.x,u.x,this.tension),RS.initCatmullRom(c.y,f.y,h.y,u.y,this.tension),DS.initCatmullRom(c.z,f.z,h.z,u.z,this.tension));return i.set(PS.calc(l),RS.calc(l),DS.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new F().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function WR(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function yae(n,e){const t=1-n;return t*t*e}function xae(n,e){return 2*(1-n)*n*e}function _ae(n,e){return n*n*e}function Ug(n,e,t,i){return yae(n,e)+xae(n,t)+_ae(n,i)}function Eae(n,e){const t=1-n;return t*t*t*e}function wae(n,e){const t=1-n;return 3*t*t*n*e}function Sae(n,e){return 3*(1-n)*n*n*e}function Cae(n,e){return n*n*n*e}function kg(n,e,t,i,r){return Eae(n,e)+wae(n,t)+Sae(n,i)+Cae(n,r)}class TT extends _a{constructor(e=new Se,t=new Se,i=new Se,r=new Se){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Se){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(kg(e,r.x,s.x,o.x,a.x),kg(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class BT extends _a{constructor(e=new F,t=new F,i=new F,r=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new F){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(kg(e,r.x,s.x,o.x,a.x),kg(e,r.y,s.y,o.y,a.y),kg(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class wE extends _a{constructor(e=new Se,t=new Se){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Se){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Se){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VH extends _a{constructor(e=new F,t=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new F){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new F){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PT extends _a{constructor(e=new Se,t=new Se,i=new Se){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Se){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Ug(e,r.x,s.x,o.x),Ug(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SE extends _a{constructor(e=new F,t=new F,i=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new F){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Ug(e,r.x,s.x,o.x),Ug(e,r.y,s.y,o.y),Ug(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RT extends _a{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Se){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(WR(a,l.x,c.x,u.x,f.x),WR(a,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Se().fromArray(r))}return this}}var DT=Object.freeze({__proto__:null,ArcCurve:QH,CatmullRomCurve3:EE,CubicBezierCurve:TT,CubicBezierCurve3:BT,EllipseCurve:Bh,LineCurve:wE,LineCurve3:VH,QuadraticBezierCurve:PT,QuadraticBezierCurve3:SE,SplineCurve:RT});class LT extends _a{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new wE(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new DT[r.type]().fromJSON(r))}return this}}class Xu extends LT{constructor(e){super(),this.type="Path",this.currentPoint=new Se,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new wE(this.currentPoint.clone(),new Se(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new PT(this.currentPoint.clone(),new Se(e,t),new Se(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new TT(this.currentPoint.clone(),new Se(e,t),new Se(i,r),new Se(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new RT(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new Bh(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class fv extends Gt{constructor(e=[new Se(0,-.5),new Se(.5,0),new Se(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=$i(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new F,h=new Se,d=new F,m=new F,g=new F;let v=0,p=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:v=e[A+1].x-e[A].x,p=e[A+1].y-e[A].y,d.x=p*1,d.y=-v,d.z=p*0,g.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:v=e[A+1].x-e[A].x,p=e[A+1].y-e[A].y,d.x=p*1,d.y=-v,d.z=p*0,m.copy(d),d.x+=g.x,d.y+=g.y,d.z+=g.z,d.normalize(),l.push(d.x,d.y,d.z),g.copy(m)}for(let A=0;A<=t;A++){const y=i+A*u*r,w=Math.sin(y),S=Math.cos(y);for(let C=0;C<=e.length-1;C++){f.x=e[C].x*w,f.y=e[C].y,f.z=e[C].x*S,o.push(f.x,f.y,f.z),h.x=A/t,h.y=C/(e.length-1),a.push(h.x,h.y);const b=l[3*C+0]*w,M=l[3*C+1],I=l[3*C+0]*S;c.push(b,M,I)}}for(let A=0;A<t;A++)for(let y=0;y<e.length-1;y++){const w=y+A*e.length,S=w,C=w+e.length,b=w+e.length+1,M=w+1;s.push(S,C,M),s.push(b,M,C)}this.setIndex(s),this.setAttribute("position",new Et(o,3)),this.setAttribute("uv",new Et(a,2)),this.setAttribute("normal",new Et(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fv(e.points,e.segments,e.phiStart,e.phiLength)}}class CE extends fv{constructor(e=1,t=1,i=4,r=8){const s=new Xu;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new CE(e.radius,e.length,e.capSegments,e.radialSegments)}}class bE extends Gt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new F,u=new Se;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=t;f++,h+=3){const d=i+f/t*r;c.x=e*Math.cos(d),c.y=e*Math.sin(d),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Et(o,3)),this.setAttribute("normal",new Et(a,3)),this.setAttribute("uv",new Et(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Nr extends Gt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],h=[],d=[];let m=0;const g=[],v=i/2;let p=0;A(),o===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new Et(f,3)),this.setAttribute("normal",new Et(h,3)),this.setAttribute("uv",new Et(d,2));function A(){const w=new F,S=new F;let C=0;const b=(t-e)/i;for(let M=0;M<=s;M++){const I=[],T=M/s,D=T*(t-e)+e;for(let R=0;R<=r;R++){const z=R/r,L=z*l+a,H=Math.sin(L),J=Math.cos(L);S.x=D*H,S.y=-T*i+v,S.z=D*J,f.push(S.x,S.y,S.z),w.set(H,b,J).normalize(),h.push(w.x,w.y,w.z),d.push(z,1-T),I.push(m++)}g.push(I)}for(let M=0;M<r;M++)for(let I=0;I<s;I++){const T=g[I][M],D=g[I+1][M],R=g[I+1][M+1],z=g[I][M+1];u.push(T,D,z),u.push(D,R,z),C+=6}c.addGroup(p,C,0),p+=C}function y(w){const S=m,C=new Se,b=new F;let M=0;const I=w===!0?e:t,T=w===!0?1:-1;for(let R=1;R<=r;R++)f.push(0,v*T,0),h.push(0,T,0),d.push(.5,.5),m++;const D=m;for(let R=0;R<=r;R++){const L=R/r*l+a,H=Math.cos(L),J=Math.sin(L);b.x=I*J,b.y=v*T,b.z=I*H,f.push(b.x,b.y,b.z),h.push(0,T,0),C.x=H*.5+.5,C.y=J*.5*T+.5,d.push(C.x,C.y),m++}for(let R=0;R<r;R++){const z=S+R,L=D+R;w===!0?u.push(L,L+1,z):u.push(L+1,L,z),M+=3}c.addGroup(p,M,w===!0?1:2),p+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nr(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ME extends Nr{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new ME(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xf extends Gt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new Et(s,3)),this.setAttribute("normal",new Et(s.slice(),3)),this.setAttribute("uv",new Et(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const y=new F,w=new F,S=new F;for(let C=0;C<t.length;C+=3)d(t[C+0],y),d(t[C+1],w),d(t[C+2],S),l(y,w,S,A)}function l(A,y,w,S){const C=S+1,b=[];for(let M=0;M<=C;M++){b[M]=[];const I=A.clone().lerp(w,M/C),T=y.clone().lerp(w,M/C),D=C-M;for(let R=0;R<=D;R++)R===0&&M===C?b[M][R]=I:b[M][R]=I.clone().lerp(T,R/D)}for(let M=0;M<C;M++)for(let I=0;I<2*(C-M)-1;I++){const T=Math.floor(I/2);I%2===0?(h(b[M][T+1]),h(b[M+1][T]),h(b[M][T])):(h(b[M][T+1]),h(b[M+1][T+1]),h(b[M+1][T]))}}function c(A){const y=new F;for(let w=0;w<s.length;w+=3)y.x=s[w+0],y.y=s[w+1],y.z=s[w+2],y.normalize().multiplyScalar(A),s[w+0]=y.x,s[w+1]=y.y,s[w+2]=y.z}function u(){const A=new F;for(let y=0;y<s.length;y+=3){A.x=s[y+0],A.y=s[y+1],A.z=s[y+2];const w=v(A)/2/Math.PI+.5,S=p(A)/Math.PI+.5;o.push(w,1-S)}m(),f()}function f(){for(let A=0;A<o.length;A+=6){const y=o[A+0],w=o[A+2],S=o[A+4],C=Math.max(y,w,S),b=Math.min(y,w,S);C>.9&&b<.1&&(y<.2&&(o[A+0]+=1),w<.2&&(o[A+2]+=1),S<.2&&(o[A+4]+=1))}}function h(A){s.push(A.x,A.y,A.z)}function d(A,y){const w=A*3;y.x=e[w+0],y.y=e[w+1],y.z=e[w+2]}function m(){const A=new F,y=new F,w=new F,S=new F,C=new Se,b=new Se,M=new Se;for(let I=0,T=0;I<s.length;I+=9,T+=6){A.set(s[I+0],s[I+1],s[I+2]),y.set(s[I+3],s[I+4],s[I+5]),w.set(s[I+6],s[I+7],s[I+8]),C.set(o[T+0],o[T+1]),b.set(o[T+2],o[T+3]),M.set(o[T+4],o[T+5]),S.copy(A).add(y).add(w).divideScalar(3);const D=v(S);g(C,T+0,A,D),g(b,T+2,y,D),g(M,T+4,w,D)}}function g(A,y,w,S){S<0&&A.x===1&&(o[y]=A.x-1),w.x===0&&w.z===0&&(o[y]=S/2/Math.PI+.5)}function v(A){return Math.atan2(A.z,-A.x)}function p(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xf(e.vertices,e.indices,e.radius,e.details)}}class IE extends xf{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new IE(e.radius,e.detail)}}const w2=new F,S2=new F,LS=new F,C2=new vr;class FT extends Gt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Ih*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),h={},d=[];for(let m=0;m<l;m+=3){o?(c[0]=o.getX(m),c[1]=o.getX(m+1),c[2]=o.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:g,b:v,c:p}=C2;if(g.fromBufferAttribute(a,c[0]),v.fromBufferAttribute(a,c[1]),p.fromBufferAttribute(a,c[2]),C2.getNormal(LS),f[0]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,f[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,f[2]=`${Math.round(p.x*r)},${Math.round(p.y*r)},${Math.round(p.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let A=0;A<3;A++){const y=(A+1)%3,w=f[A],S=f[y],C=C2[u[A]],b=C2[u[y]],M=`${w}_${S}`,I=`${S}_${w}`;I in h&&h[I]?(LS.dot(h[I].normal)<=s&&(d.push(C.x,C.y,C.z),d.push(b.x,b.y,b.z)),h[I]=null):M in h||(h[M]={index0:c[A],index1:c[y],normal:LS.clone()})}}for(const m in h)if(h[m]){const{index0:g,index1:v}=h[m];w2.fromBufferAttribute(a,g),S2.fromBufferAttribute(a,v),d.push(w2.x,w2.y,w2.z),d.push(S2.x,S2.y,S2.z)}this.setAttribute("position",new Et(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Cc=class extends Xu{constructor(e){super(e),this.uuid=So(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Xu().fromJSON(r))}return this}};const bae={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=jH(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,h,d;if(i&&(s=Pae(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let m=t;m<r;m+=t)f=n[m],h=n[m+1],f<a&&(a=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);d=Math.max(c-a,u-l),d=d!==0?32767/d:0}return PA(s,o,t,a,l,d,0),o}};function jH(n,e,t,i,r){let s,o;if(r===Hae(n,e,t,i)>0)for(s=e;s<t;s+=i)o=YR(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=YR(s,n[s],n[s+1],o);return o&&TE(o,o.next)&&(DA(o),o=o.next),o}function Vh(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(TE(t,t.next)||Hi(t.prev,t,t.next)===0)){if(DA(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function PA(n,e,t,i,r,s,o){if(!n)return;!o&&s&&Oae(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Iae(n,i,r,s):Mae(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),DA(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=Tae(Vh(n),e,t),PA(n,e,t,i,r,s,2)):o===2&&Bae(n,e,t,i,r,s):PA(Vh(n),e,t,i,r,s,1);break}}}function Mae(n){const e=n.prev,t=n,i=n.next;if(Hi(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,h=r>s?r>o?r:o:s>o?s:o,d=a>l?a>c?a:c:l>c?l:c;let m=i.next;for(;m!==e;){if(m.x>=u&&m.x<=h&&m.y>=f&&m.y<=d&&cm(r,a,s,l,o,c,m.x,m.y)&&Hi(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Iae(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Hi(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,f=s.y,h=o.y,d=a<l?a<c?a:c:l<c?l:c,m=u<f?u<h?u:h:f<h?f:h,g=a>l?a>c?a:c:l>c?l:c,v=u>f?u>h?u:h:f>h?f:h,p=BM(d,m,e,t,i),A=BM(g,v,e,t,i);let y=n.prevZ,w=n.nextZ;for(;y&&y.z>=p&&w&&w.z<=A;){if(y.x>=d&&y.x<=g&&y.y>=m&&y.y<=v&&y!==r&&y!==o&&cm(a,u,l,f,c,h,y.x,y.y)&&Hi(y.prev,y,y.next)>=0||(y=y.prevZ,w.x>=d&&w.x<=g&&w.y>=m&&w.y<=v&&w!==r&&w!==o&&cm(a,u,l,f,c,h,w.x,w.y)&&Hi(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;y&&y.z>=p;){if(y.x>=d&&y.x<=g&&y.y>=m&&y.y<=v&&y!==r&&y!==o&&cm(a,u,l,f,c,h,y.x,y.y)&&Hi(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=A;){if(w.x>=d&&w.x<=g&&w.y>=m&&w.y<=v&&w!==r&&w!==o&&cm(a,u,l,f,c,h,w.x,w.y)&&Hi(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Tae(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!TE(r,s)&&WH(r,i,i.next,s)&&RA(r,s)&&RA(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),DA(i),DA(i.next),i=n=s),i=i.next}while(i!==n);return Vh(i)}function Bae(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&kae(o,a)){let l=YH(o,a);o=Vh(o,o.next),l=Vh(l,l.next),PA(o,e,t,i,r,s,0),PA(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function Pae(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=jH(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Uae(c));for(r.sort(Rae),s=0;s<r.length;s++)t=Dae(r[s],t);return t}function Rae(n,e){return n.x-e.x}function Dae(n,e){const t=Lae(n,e);if(!t)return e;const i=YH(t,n);return Vh(i,i.next),Vh(t,t.next)}function Lae(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>i&&(i=h,r=t.x<t.next.x?t:t.next,h===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&cm(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),RA(t,n)&&(f<u||f===u&&(t.x>r.x||t.x===r.x&&Fae(r,t)))&&(r=t,u=f)),t=t.next;while(t!==a);return r}function Fae(n,e){return Hi(n.prev,n,e.prev)<0&&Hi(e.next,n,n.next)<0}function Oae(n,e,t,i){let r=n;do r.z===0&&(r.z=BM(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,zae(r)}function zae(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function BM(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Uae(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function cm(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function kae(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Nae(n,e)&&(RA(n,e)&&RA(e,n)&&Gae(n,e)&&(Hi(n.prev,n,e.prev)||Hi(n,e.prev,e))||TE(n,e)&&Hi(n.prev,n,n.next)>0&&Hi(e.prev,e,e.next)>0)}function Hi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function TE(n,e){return n.x===e.x&&n.y===e.y}function WH(n,e,t,i){const r=M2(Hi(n,e,t)),s=M2(Hi(n,e,i)),o=M2(Hi(t,i,n)),a=M2(Hi(t,i,e));return!!(r!==s&&o!==a||r===0&&b2(n,t,e)||s===0&&b2(n,i,e)||o===0&&b2(t,n,i)||a===0&&b2(t,e,i))}function b2(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function M2(n){return n>0?1:n<0?-1:0}function Nae(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&WH(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function RA(n,e){return Hi(n.prev,n,n.next)<0?Hi(n,e,n.next)>=0&&Hi(n,n.prev,e)>=0:Hi(n,e,n.prev)<0||Hi(n,n.next,e)<0}function Gae(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function YH(n,e){const t=new PM(n.i,n.x,n.y),i=new PM(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function YR(n,e,t,i){const r=new PM(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function DA(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function PM(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hae(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Ka{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Ka.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];XR(e),qR(i,e);let o=e.length;t.forEach(XR);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,qR(i,t[l]);const a=bae.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function XR(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function qR(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class hv extends Gt{constructor(e=new Cc([new Se(.5,.5),new Se(-.5,.5),new Se(-.5,-.5),new Se(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Et(r,3)),this.setAttribute("uv",new Et(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:d-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const p=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:Qae;let y,w=!1,S,C,b,M;p&&(y=p.getSpacedPoints(u),w=!0,h=!1,S=p.computeFrenetFrames(u,!1),C=new F,b=new F,M=new F),h||(v=0,d=0,m=0,g=0);const I=a.extractPoints(c);let T=I.shape;const D=I.holes;if(!Ka.isClockWise(T)){T=T.reverse();for(let te=0,Ee=D.length;te<Ee;te++){const ue=D[te];Ka.isClockWise(ue)&&(D[te]=ue.reverse())}}const z=Ka.triangulateShape(T,D),L=T;for(let te=0,Ee=D.length;te<Ee;te++){const ue=D[te];T=T.concat(ue)}function H(te,Ee,ue){return Ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),te.clone().addScaledVector(Ee,ue)}const J=T.length,Z=z.length;function U(te,Ee,ue){let ve,ye,Be;const ae=te.x-Ee.x,ie=te.y-Ee.y,be=ue.x-te.x,Re=ue.y-te.y,ct=ae*ae+ie*ie,se=ae*Re-ie*be;if(Math.abs(se)>Number.EPSILON){const ee=Math.sqrt(ct),Ae=Math.sqrt(be*be+Re*Re),Ue=Ee.x-ie/ee,Ce=Ee.y+ae/ee,ke=ue.x-Re/Ae,We=ue.y+be/Ae,Xe=((ke-Ue)*Re-(We-Ce)*be)/(ae*Re-ie*be);ve=Ue+ae*Xe-te.x,ye=Ce+ie*Xe-te.y;const Oe=ve*ve+ye*ye;if(Oe<=2)return new Se(ve,ye);Be=Math.sqrt(Oe/2)}else{let ee=!1;ae>Number.EPSILON?be>Number.EPSILON&&(ee=!0):ae<-Number.EPSILON?be<-Number.EPSILON&&(ee=!0):Math.sign(ie)===Math.sign(Re)&&(ee=!0),ee?(ve=-ie,ye=ae,Be=Math.sqrt(ct)):(ve=ae,ye=ie,Be=Math.sqrt(ct/2))}return new Se(ve/Be,ye/Be)}const X=[];for(let te=0,Ee=L.length,ue=Ee-1,ve=te+1;te<Ee;te++,ue++,ve++)ue===Ee&&(ue=0),ve===Ee&&(ve=0),X[te]=U(L[te],L[ue],L[ve]);const Y=[];let O,W=X.concat();for(let te=0,Ee=D.length;te<Ee;te++){const ue=D[te];O=[];for(let ve=0,ye=ue.length,Be=ye-1,ae=ve+1;ve<ye;ve++,Be++,ae++)Be===ye&&(Be=0),ae===ye&&(ae=0),O[ve]=U(ue[ve],ue[Be],ue[ae]);Y.push(O),W=W.concat(O)}for(let te=0;te<v;te++){const Ee=te/v,ue=d*Math.cos(Ee*Math.PI/2),ve=m*Math.sin(Ee*Math.PI/2)+g;for(let ye=0,Be=L.length;ye<Be;ye++){const ae=H(L[ye],X[ye],ve);j(ae.x,ae.y,-ue)}for(let ye=0,Be=D.length;ye<Be;ye++){const ae=D[ye];O=Y[ye];for(let ie=0,be=ae.length;ie<be;ie++){const Re=H(ae[ie],O[ie],ve);j(Re.x,Re.y,-ue)}}}const $=m+g;for(let te=0;te<J;te++){const Ee=h?H(T[te],W[te],$):T[te];w?(b.copy(S.normals[0]).multiplyScalar(Ee.x),C.copy(S.binormals[0]).multiplyScalar(Ee.y),M.copy(y[0]).add(b).add(C),j(M.x,M.y,M.z)):j(Ee.x,Ee.y,0)}for(let te=1;te<=u;te++)for(let Ee=0;Ee<J;Ee++){const ue=h?H(T[Ee],W[Ee],$):T[Ee];w?(b.copy(S.normals[te]).multiplyScalar(ue.x),C.copy(S.binormals[te]).multiplyScalar(ue.y),M.copy(y[te]).add(b).add(C),j(M.x,M.y,M.z)):j(ue.x,ue.y,f/u*te)}for(let te=v-1;te>=0;te--){const Ee=te/v,ue=d*Math.cos(Ee*Math.PI/2),ve=m*Math.sin(Ee*Math.PI/2)+g;for(let ye=0,Be=L.length;ye<Be;ye++){const ae=H(L[ye],X[ye],ve);j(ae.x,ae.y,f+ue)}for(let ye=0,Be=D.length;ye<Be;ye++){const ae=D[ye];O=Y[ye];for(let ie=0,be=ae.length;ie<be;ie++){const Re=H(ae[ie],O[ie],ve);w?j(Re.x,Re.y+y[u-1].y,y[u-1].x+ue):j(Re.x,Re.y,f+ue)}}}k(),V();function k(){const te=r.length/3;if(h){let Ee=0,ue=J*Ee;for(let ve=0;ve<Z;ve++){const ye=z[ve];oe(ye[2]+ue,ye[1]+ue,ye[0]+ue)}Ee=u+v*2,ue=J*Ee;for(let ve=0;ve<Z;ve++){const ye=z[ve];oe(ye[0]+ue,ye[1]+ue,ye[2]+ue)}}else{for(let Ee=0;Ee<Z;Ee++){const ue=z[Ee];oe(ue[2],ue[1],ue[0])}for(let Ee=0;Ee<Z;Ee++){const ue=z[Ee];oe(ue[0]+J*u,ue[1]+J*u,ue[2]+J*u)}}i.addGroup(te,r.length/3-te,0)}function V(){const te=r.length/3;let Ee=0;Q(L,Ee),Ee+=L.length;for(let ue=0,ve=D.length;ue<ve;ue++){const ye=D[ue];Q(ye,Ee),Ee+=ye.length}i.addGroup(te,r.length/3-te,1)}function Q(te,Ee){let ue=te.length;for(;--ue>=0;){const ve=ue;let ye=ue-1;ye<0&&(ye=te.length-1);for(let Be=0,ae=u+v*2;Be<ae;Be++){const ie=J*Be,be=J*(Be+1),Re=Ee+ve+ie,ct=Ee+ye+ie,se=Ee+ye+be,ee=Ee+ve+be;xe(Re,ct,se,ee)}}}function j(te,Ee,ue){l.push(te),l.push(Ee),l.push(ue)}function oe(te,Ee,ue){pe(te),pe(Ee),pe(ue);const ve=r.length/3,ye=A.generateTopUV(i,r,ve-3,ve-2,ve-1);de(ye[0]),de(ye[1]),de(ye[2])}function xe(te,Ee,ue,ve){pe(te),pe(Ee),pe(ve),pe(Ee),pe(ue),pe(ve);const ye=r.length/3,Be=A.generateSideWallUV(i,r,ye-6,ye-3,ye-2,ye-1);de(Be[0]),de(Be[1]),de(Be[3]),de(Be[1]),de(Be[2]),de(Be[3])}function pe(te){r.push(l[te*3+0]),r.push(l[te*3+1]),r.push(l[te*3+2])}function de(te){s.push(te.x),s.push(te.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Vae(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new DT[r.type]().fromJSON(r)),new hv(i,e.options)}}const Qae={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Se(s,o),new Se(a,l),new Se(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],h=e[r*3],d=e[r*3+1],m=e[r*3+2],g=e[s*3],v=e[s*3+1],p=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Se(o,1-l),new Se(c,1-f),new Se(h,1-m),new Se(g,1-p)]:[new Se(a,1-l),new Se(u,1-f),new Se(d,1-m),new Se(v,1-p)]}};function Vae(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class dv extends xf{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dv(e.radius,e.detail)}}class Jo extends xf{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Jo(e.radius,e.detail)}}class BE extends Gt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let f=e;const h=(t-e)/r,d=new F,m=new Se;for(let g=0;g<=r;g++){for(let v=0;v<=i;v++){const p=s+v/i*o;d.x=f*Math.cos(p),d.y=f*Math.sin(p),l.push(d.x,d.y,d.z),c.push(0,0,1),m.x=(d.x/t+1)/2,m.y=(d.y/t+1)/2,u.push(m.x,m.y)}f+=h}for(let g=0;g<r;g++){const v=g*(i+1);for(let p=0;p<i;p++){const A=p+v,y=A,w=A+i+1,S=A+i+2,C=A+1;a.push(y,w,C),a.push(w,S,C)}}this.setIndex(a),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(c,3)),this.setAttribute("uv",new Et(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class PE extends Gt{constructor(e=new Cc([new Se(0,.5),new Se(-.5,-.5),new Se(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Et(r,3)),this.setAttribute("normal",new Et(s,3)),this.setAttribute("uv",new Et(o,2));function c(u){const f=r.length/3,h=u.extractPoints(t);let d=h.shape;const m=h.holes;Ka.isClockWise(d)===!1&&(d=d.reverse());for(let v=0,p=m.length;v<p;v++){const A=m[v];Ka.isClockWise(A)===!0&&(m[v]=A.reverse())}const g=Ka.triangulateShape(d,m);for(let v=0,p=m.length;v<p;v++){const A=m[v];d=d.concat(A)}for(let v=0,p=d.length;v<p;v++){const A=d[v];r.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let v=0,p=g.length;v<p;v++){const A=g[v],y=A[0]+f,w=A[1]+f,S=A[2]+f;i.push(y,w,S),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return jae(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new PE(i,e.curveSegments)}}function jae(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class id extends Gt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new F,h=new F,d=[],m=[],g=[],v=[];for(let p=0;p<=i;p++){const A=[],y=p/i;let w=0;p===0&&o===0?w=.5/t:p===i&&l===Math.PI&&(w=-.5/t);for(let S=0;S<=t;S++){const C=S/t;f.x=-e*Math.cos(r+C*s)*Math.sin(o+y*a),f.y=e*Math.cos(o+y*a),f.z=e*Math.sin(r+C*s)*Math.sin(o+y*a),m.push(f.x,f.y,f.z),h.copy(f).normalize(),g.push(h.x,h.y,h.z),v.push(C+w,1-y),A.push(c++)}u.push(A)}for(let p=0;p<i;p++)for(let A=0;A<t;A++){const y=u[p][A+1],w=u[p][A],S=u[p+1][A],C=u[p+1][A+1];(p!==0||o>0)&&d.push(y,w,C),(p!==i-1||l<Math.PI)&&d.push(w,S,C)}this.setIndex(d),this.setAttribute("position",new Et(m,3)),this.setAttribute("normal",new Et(g,3)),this.setAttribute("uv",new Et(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new id(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class RE extends xf{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new RE(e.radius,e.detail)}}class Cu extends Gt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new F,f=new F,h=new F;for(let d=0;d<=i;d++)for(let m=0;m<=r;m++){const g=m/r*s,v=d/i*Math.PI*2;f.x=(e+t*Math.cos(v))*Math.cos(g),f.y=(e+t*Math.cos(v))*Math.sin(g),f.z=t*Math.sin(v),a.push(f.x,f.y,f.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),h.subVectors(f,u).normalize(),l.push(h.x,h.y,h.z),c.push(m/r),c.push(d/i)}for(let d=1;d<=i;d++)for(let m=1;m<=r;m++){const g=(r+1)*d+m-1,v=(r+1)*(d-1)+m-1,p=(r+1)*(d-1)+m,A=(r+1)*d+m;o.push(g,v,A),o.push(v,p,A)}this.setIndex(o),this.setAttribute("position",new Et(a,3)),this.setAttribute("normal",new Et(l,3)),this.setAttribute("uv",new Et(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class DE extends Gt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],f=new F,h=new F,d=new F,m=new F,g=new F,v=new F,p=new F;for(let y=0;y<=i;++y){const w=y/i*s*Math.PI*2;A(w,s,o,e,d),A(w+.01,s,o,e,m),v.subVectors(m,d),p.addVectors(m,d),g.crossVectors(v,p),p.crossVectors(g,v),g.normalize(),p.normalize();for(let S=0;S<=r;++S){const C=S/r*Math.PI*2,b=-t*Math.cos(C),M=t*Math.sin(C);f.x=d.x+(b*p.x+M*g.x),f.y=d.y+(b*p.y+M*g.y),f.z=d.z+(b*p.z+M*g.z),l.push(f.x,f.y,f.z),h.subVectors(f,d).normalize(),c.push(h.x,h.y,h.z),u.push(y/i),u.push(S/r)}}for(let y=1;y<=i;y++)for(let w=1;w<=r;w++){const S=(r+1)*(y-1)+(w-1),C=(r+1)*y+(w-1),b=(r+1)*y+w,M=(r+1)*(y-1)+w;a.push(S,C,M),a.push(C,b,M)}this.setIndex(a),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(c,3)),this.setAttribute("uv",new Et(u,2));function A(y,w,S,C,b){const M=Math.cos(y),I=Math.sin(y),T=S/w*y,D=Math.cos(T);b.x=C*(2+D)*.5*M,b.y=C*(2+D)*I*.5,b.z=C*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DE(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class LE extends Gt{constructor(e=new SE(new F(-1,-1,0),new F(-1,1,0),new F(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new F,l=new F,c=new Se;let u=new F;const f=[],h=[],d=[],m=[];g(),this.setIndex(m),this.setAttribute("position",new Et(f,3)),this.setAttribute("normal",new Et(h,3)),this.setAttribute("uv",new Et(d,2));function g(){for(let y=0;y<t;y++)v(y);v(s===!1?t:0),A(),p()}function v(y){u=e.getPointAt(y/t,u);const w=o.normals[y],S=o.binormals[y];for(let C=0;C<=r;C++){const b=C/r*Math.PI*2,M=Math.sin(b),I=-Math.cos(b);l.x=I*w.x+M*S.x,l.y=I*w.y+M*S.y,l.z=I*w.z+M*S.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function p(){for(let y=1;y<=t;y++)for(let w=1;w<=r;w++){const S=(r+1)*(y-1)+(w-1),C=(r+1)*y+(w-1),b=(r+1)*y+w,M=(r+1)*(y-1)+w;m.push(S,C,M),m.push(C,b,M)}}function A(){for(let y=0;y<=t;y++)for(let w=0;w<=r;w++)c.x=y/t,c.y=w/r,d.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new LE(new DT[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class OT extends Gt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new F,s=new F;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],h=f.start,d=f.count;for(let m=h,g=h+d;m<g;m+=3)for(let v=0;v<3;v++){const p=a.getX(m+v),A=a.getX(m+(v+1)%3);r.fromBufferAttribute(o,p),s.fromBufferAttribute(o,A),JR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),JR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Et(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function JR(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var KR=Object.freeze({__proto__:null,BoxGeometry:Ms,CapsuleGeometry:CE,CircleGeometry:bE,ConeGeometry:ME,CylinderGeometry:Nr,DodecahedronGeometry:IE,EdgesGeometry:FT,ExtrudeGeometry:hv,IcosahedronGeometry:dv,LatheGeometry:fv,OctahedronGeometry:Jo,PlaneGeometry:br,PolyhedronGeometry:xf,RingGeometry:BE,ShapeGeometry:PE,SphereGeometry:id,TetrahedronGeometry:RE,TorusGeometry:Cu,TorusKnotGeometry:DE,TubeGeometry:LE,WireframeGeometry:OT});class XH extends ur{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new et(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class qH extends Wn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class rd extends ur{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Fs extends rd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Se(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $i(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new et(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Ng extends ur{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new et(16777215),this.specular=new et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class JH extends ur{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class zT extends ur{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class pv extends ur{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class KH extends ur{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $H extends tr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function qo(n,e,t){return UT(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function xh(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function UT(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function ZH(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function RM(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function kT(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function Wae(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],h=[];for(let d=0;d<c.times.length;++d){const m=c.times[d]*r;if(!(m<t||m>=i)){f.push(c.times[d]);for(let g=0;g<u;++g)h.push(c.values[d*u+g])}}f.length!==0&&(c.times=xh(f,c.times.constructor),c.values=xh(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Yae(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(p){return p.name===a.name&&p.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const m=a.times.length-1;let g;if(s<=a.times[0]){const p=u,A=f-u;g=qo(a.values,p,A)}else if(s>=a.times[m]){const p=m*f+u,A=p+f-u;g=qo(a.values,p,A)}else{const p=a.createInterpolant(),A=u,y=f-u;p.evaluate(s),g=qo(p.resultBuffer,A,y)}l==="quaternion"&&new Lt().fromArray(g).normalize().conjugate().toArray(g);const v=c.times.length;for(let p=0;p<v;++p){const A=p*d+h;if(l==="quaternion")Lt.multiplyQuaternionsFlat(c.values,A,g,0,c.values,A);else{const y=d-h*2;for(let w=0;w<y;++w)c.values[A+w]-=g[w]}}}return n.blendMode=mT,n}const Xae={arraySlice:qo,convertArray:xh,isTypedArray:UT,getKeyframeOrder:ZH,sortedArray:RM,flattenJSON:kT,subclip:Wae,makeClipAdditive:Yae};class h0{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class eQ extends h0{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ah,endingEnd:Ah}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case vh:s=e,a=2*t-i;break;case MA:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case vh:o=e,l=2*i-t;break;case MA:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,d=this._weightNext,m=(i-t)/(r-t),g=m*m,v=g*m,p=-h*v+2*h*g-h*m,A=(1+h)*v+(-1.5-2*h)*g+(-.5+h)*m+1,y=(-1-d)*v+(1.5+d)*g+.5*m,w=d*v-d*g;for(let S=0;S!==a;++S)s[S]=p*o[u+S]+A*o[c+S]+y*o[l+S]+w*o[f+S];return s}}class NT extends h0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),f=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*f+o[l+h]*u;return s}}class tQ extends h0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class sl{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xh(t,this.TimeBufferType),this.values=xh(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:xh(e.times,Array),values:xh(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new tQ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new NT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new eQ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Gm:t=this.InterpolantFactoryMethodDiscrete;break;case Qh:t=this.InterpolantFactoryMethodLinear;break;case a_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gm;case this.InterpolantFactoryMethodLinear:return Qh;case this.InterpolantFactoryMethodSmooth:return a_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=qo(i,s,o),this.values=qo(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&UT(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=qo(this.times),t=qo(this.values),i=this.getValueSize(),r=this.getInterpolation()===a_,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,h=f-i,d=f+i;for(let m=0;m!==i;++m){const g=t[f+m];if(g!==t[h+m]||g!==t[d+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,h=o*i;for(let d=0;d!==i;++d)t[h+d]=t[f+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=qo(e,0,o),this.values=qo(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=qo(this.times,0),t=qo(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}sl.prototype.TimeBufferType=Float32Array;sl.prototype.ValueBufferType=Float32Array;sl.prototype.DefaultInterpolation=Qh;class sd extends sl{}sd.prototype.ValueTypeName="bool";sd.prototype.ValueBufferType=Array;sd.prototype.DefaultInterpolation=Gm;sd.prototype.InterpolantFactoryMethodLinear=void 0;sd.prototype.InterpolantFactoryMethodSmooth=void 0;class GT extends sl{}GT.prototype.ValueTypeName="color";class lf extends sl{}lf.prototype.ValueTypeName="number";class nQ extends h0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Lt.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Ul extends sl{InterpolantFactoryMethodLinear(e){return new nQ(this.times,this.values,this.getValueSize(),e)}}Ul.prototype.ValueTypeName="quaternion";Ul.prototype.DefaultInterpolation=Qh;Ul.prototype.InterpolantFactoryMethodSmooth=void 0;class od extends sl{}od.prototype.ValueTypeName="string";od.prototype.ValueBufferType=Array;od.prototype.DefaultInterpolation=Gm;od.prototype.InterpolantFactoryMethodLinear=void 0;od.prototype.InterpolantFactoryMethodSmooth=void 0;class Oc extends sl{}Oc.prototype.ValueTypeName="vector";class cf{constructor(e,t=-1,i,r=fE){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=So(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Jae(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(sl.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=ZH(l);l=RM(l,1,u),c=RM(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new lf(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let h=r[f];h||(r[f]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,h,d,m,g){if(d.length!==0){const v=[],p=[];kT(d,v,p,m),v.length!==0&&g.push(new f(h,v,p))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const h=c[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let g=0;g<h[m].morphTargets.length;g++)d[h[m].morphTargets[g]]=-1;for(const g in d){const v=[],p=[];for(let A=0;A!==h[m].morphTargets.length;++A){const y=h[m];v.push(y.time),p.push(y.morphTarget===g?1:0)}r.push(new lf(".morphTargetInfluence["+g+"]",v,p))}l=d.length*o}else{const d=".bones["+t[f].name+"]";i(Oc,d+".position",h,"pos",r),i(Ul,d+".quaternion",h,"rot",r),i(Oc,d+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function qae(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lf;case"vector":case"vector2":case"vector3":case"vector4":return Oc;case"color":return GT;case"quaternion":return Ul;case"bool":case"boolean":return sd;case"string":return od}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Jae(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=qae(n.type);if(n.times===void 0){const t=[],i=[];kT(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const jh={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class FE{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const d=c[f],m=c[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return m}return null}}}const bu=new FE;let nr=class{constructor(e){this.manager=e!==void 0?e:bu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};nr.DEFAULT_MATERIAL_NAME="__DEFAULT";const rc={};class Kae extends Error{constructor(e,t){super(e),this.response=t}}class ji extends nr{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=jh.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(rc[e]!==void 0){rc[e].push({onLoad:t,onProgress:i,onError:r});return}rc[e]=[],rc[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=rc[e],f=c.body.getReader(),h=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),d=h?parseInt(h):0,m=d!==0;let g=0;const v=new ReadableStream({start(p){A();function A(){f.read().then(({done:y,value:w})=>{if(y)p.close();else{g+=w.byteLength;const S=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:d});for(let C=0,b=u.length;C<b;C++){const M=u[C];M.onProgress&&M.onProgress(S)}p.enqueue(w),A()}})}}});return new Response(v)}else throw new Kae(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,d=new TextDecoder(h);return c.arrayBuffer().then(m=>d.decode(m))}}}).then(c=>{jh.add(e,c);const u=rc[e];delete rc[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onLoad&&d.onLoad(c)}}).catch(c=>{const u=rc[e];if(u===void 0)throw this.manager.itemError(e),c;delete rc[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class $ae extends nr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ji(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=cf.parse(e[i]);t.push(r)}return t}}class Zae extends nr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new nd,l=new ji(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(h){const d=s.parse(h,!0);o[f]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},c+=1,c===6&&(d.mipmapCount===1&&(a.minFilter=Xt),a.image=o,a.format=d.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)u(f);else l.load(e,function(f){const h=s.parse(f,!0);if(h.isCubemap){const d=h.mipmaps.length/h.mipmapCount;for(let m=0;m<d;m++){o[m]={mipmaps:[]};for(let g=0;g<h.mipmapCount;g++)o[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+g]),o[m].format=h.format,o[m].width=h.width,o[m].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Xt),a.format=h.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class LA extends nr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=jh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=BA("img");function l(){u(),jh.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class OE extends nr{constructor(e){super(e)}load(e,t,i,r){const s=new sv;s.colorSpace=En;const o=new LA(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class zE extends nr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new io,a=new ji(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:li,o.wrapT=c.wrapT!==void 0?c.wrapT:li,o.magFilter=c.magFilter!==void 0?c.magFilter:Xt,o.minFilter=c.minFilter!==void 0?c.minFilter:Xt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=bo),c.mipmapCount===1&&(o.minFilter=Xt),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},i,r),o}}class kl extends nr{constructor(e){super(e)}load(e,t,i,r){const s=new Nn,o=new LA(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class _f extends Jt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class iQ extends _f{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Jt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const FS=new He,$R=new F,ZR=new F;class HT{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Se(512,512),this.map=null,this.mapPass=null,this.matrix=new He,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new l0,this._frameExtents=new Se(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;$R.setFromMatrixPosition(e.matrixWorld),t.position.copy($R),ZR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ZR),t.updateMatrixWorld(),FS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(FS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}let ele=class extends HT{constructor(){super(new mn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Hm*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},UE=class extends _f{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Jt.DEFAULT_UP),this.updateMatrix(),this.target=new Jt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new ele}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};const eD=new He,c1=new F,OS=new F;class tle extends HT{constructor(){super(new mn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Se(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),c1.setFromMatrixPosition(e.matrixWorld),i.position.copy(c1),OS.copy(i.position),OS.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(OS),i.updateMatrixWorld(),r.makeTranslation(-c1.x,-c1.y,-c1.z),eD.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eD)}}class FA extends _f{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new tle}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class nle extends HT{constructor(){super(new ti(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class kE extends _f{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Jt.DEFAULT_UP),this.updateMatrix(),this.target=new Jt,this.shadow=new nle}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class QT extends _f{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class rQ extends _f{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class sQ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new F)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class NE extends _f{constructor(e=new sQ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class GE extends nr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new ji(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=GE.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new et().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new et().setHex(o.value);break;case"v2":r.uniforms[s].value=new Se().fromArray(o.value);break;case"v3":r.uniforms[s].value=new F().fromArray(o.value);break;case"v4":r.uniforms[s].value=new sn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new tn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new He().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Se().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Se().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:XH,SpriteMaterial:CT,RawShaderMaterial:qH,ShaderMaterial:Wn,PointsMaterial:uv,MeshPhysicalMaterial:Fs,MeshStandardMaterial:rd,MeshPhongMaterial:Ng,MeshToonMaterial:JH,MeshNormalMaterial:zT,MeshLambertMaterial:pv,MeshDepthMaterial:ov,MeshDistanceMaterial:AE,MeshBasicMaterial:Ir,MeshMatcapMaterial:KH,LineDashedMaterial:$H,LineBasicMaterial:tr,Material:ur};return new t[e]}}class bc{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class mv extends Gt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class oQ extends nr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ji(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(d,m){if(t[m]!==void 0)return t[m];const v=d.interleavedBuffers[m],p=s(d,v.buffer),A=am(v.type,p),y=new av(A,v.stride);return y.uuid=v.uuid,t[m]=y,y}function s(d,m){if(i[m]!==void 0)return i[m];const v=d.arrayBuffers[m],p=new Uint32Array(v).buffer;return i[m]=p,p}const o=e.isInstancedBufferGeometry?new mv:new Gt,a=e.data.index;if(a!==void 0){const d=am(a.type,a.array);o.setIndex(new qt(d,1))}const l=e.data.attributes;for(const d in l){const m=l[d];let g;if(m.isInterleavedBufferAttribute){const v=r(e.data,m.data);g=new Js(v,m.itemSize,m.offset,m.normalized)}else{const v=am(m.type,m.array),p=m.isInstancedBufferAttribute?el:qt;g=new p(v,m.itemSize,m.normalized)}m.name!==void 0&&(g.name=m.name),m.usage!==void 0&&g.setUsage(m.usage),m.updateRange!==void 0&&(g.updateRange.offset=m.updateRange.offset,g.updateRange.count=m.updateRange.count),o.setAttribute(d,g)}const c=e.data.morphAttributes;if(c)for(const d in c){const m=c[d],g=[];for(let v=0,p=m.length;v<p;v++){const A=m[v];let y;if(A.isInterleavedBufferAttribute){const w=r(e.data,A.data);y=new Js(w,A.itemSize,A.offset,A.normalized)}else{const w=am(A.type,A.array);y=new qt(w,A.itemSize,A.normalized)}A.name!==void 0&&(y.name=A.name),g.push(y)}o.morphAttributes[d]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let d=0,m=f.length;d!==m;++d){const g=f[d];o.addGroup(g.start,g.count,g.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const d=new F;h.center!==void 0&&d.fromArray(h.center),o.boundingSphere=new Bi(d,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class ile extends nr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?bc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ji(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?bc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ji(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let f=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Cc().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new f0().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new oQ;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in KR?a=KR[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new GE;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=cf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:am(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new FE(t);s=new LA(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],h=f.url;if(Array.isArray(h)){const d=[];for(let m=0,g=h.length;m<g;m++){const v=h[m],p=a(v);p!==null&&(p instanceof HTMLImageElement?d.push(p):d.push(new io(p.data,p.width,p.height)))}r[f.uuid]=new yh(d)}else{const d=a(f.url);r[f.uuid]=new yh(d)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:am(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new LA(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f],m=await s(d);m!==null&&(m instanceof HTMLImageElement?u.push(m):u.push(new io(m.data,m.width,m.height)))}i[l.uuid]=new yh(u)}else{const u=await s(l.url);i[l.uuid]=new yh(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new sv,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new io:u=new Nn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,rle)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],tD),u.wrapT=i(a.wrap[1],tD)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,nD)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,nD)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const d=[];for(let m=0,g=h.length;m<g;m++){const v=h[m];i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),d.push(i[v])}return d}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let u,f;switch(e.type){case"Scene":o=new Mo,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new et(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new xE(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new yE(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new mn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ti(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new QT(e.color,e.intensity);break;case"DirectionalLight":o=new kE(e.color,e.intensity);break;case"PointLight":o=new FA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new rQ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new UE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new iQ(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new NE().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new lv(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new gt(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const h=e.count,d=e.instanceMatrix,m=e.instanceColor;o=new cv(u,f,h),o.instanceMatrix=new el(new Float32Array(d.array),16),m!==void 0&&(o.instanceColor=new el(new Float32Array(m.array),m.itemSize));break;case"LOD":o=new GH;break;case"Line":o=new vn(a(e.geometry),l(e.material));break;case"LineLoop":o=new bT(a(e.geometry),l(e.material));break;case"LineSegments":o=new rl(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new MT(a(e.geometry),l(e.material));break;case"Sprite":o=new NH(l(e.material));break;case"Group":o=new qs;break;case"Bone":o=new Vm;break;default:o=new Jt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let d=0;d<h.length;d++)o.add(this.parseObject(h[d],t,i,r,s))}if(e.animations!==void 0){const h=e.animations;for(let d=0;d<h.length;d++){const m=h[d];o.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let d=0;d<h.length;d++){const m=h[d],g=o.getObjectByProperty("uuid",m.object);g!==void 0&&o.addLevel(g,m.distance,m.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const rle={UVMapping:sf,CubeReflectionMapping:zl,CubeRefractionMapping:of,EquirectangularReflectionMapping:af,EquirectangularRefractionMapping:wA,CubeUVReflectionMapping:o0},tD={RepeatWrapping:Wr,ClampToEdgeWrapping:li,MirroredRepeatWrapping:Nm},nD={NearestFilter:dn,NearestMipmapNearestFilter:SA,NearestMipmapLinearFilter:ym,LinearFilter:Xt,LinearMipmapNearestFilter:lE,LinearMipmapLinearFilter:bo};class aQ extends nr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=jh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){jh.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let I2;class VT{static getContext(){return I2===void 0&&(I2=new(window.AudioContext||window.webkitAudioContext)),I2}static setContext(e){I2=e}}class lQ extends nr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ji(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);VT.getContext().decodeAudioData(c,function(f){t(f)},a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}class sle extends NE{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new et().set(e),s=new et().set(t),o=new F(r.r,r.g,r.b),a=new F(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class ole extends NE{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new et().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const iD=new He,rD=new He,Qf=new He;class ale{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new mn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new mn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Qf.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Ih*t.fov*.5)/t.zoom;let a,l;rD.elements[12]=-r,iD.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Qf.elements[0]=2*t.near/(l-a),Qf.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Qf),a=-o*t.aspect-s,l=o*t.aspect-s,Qf.elements[0]=2*t.near/(l-a),Qf.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Qf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(rD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(iD)}}class d0{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=sD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=sD();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function sD(){return(typeof performance>"u"?Date:performance).now()}const Vf=new F,oD=new Lt,lle=new F,jf=new F;class cQ extends Jt{constructor(){super(),this.type="AudioListener",this.context=VT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new d0}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Vf,oD,lle),jf.set(0,0,-1).applyQuaternion(oD),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Vf.x,r),t.positionY.linearRampToValueAtTime(Vf.y,r),t.positionZ.linearRampToValueAtTime(Vf.z,r),t.forwardX.linearRampToValueAtTime(jf.x,r),t.forwardY.linearRampToValueAtTime(jf.y,r),t.forwardZ.linearRampToValueAtTime(jf.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Vf.x,Vf.y,Vf.z),t.setOrientation(jf.x,jf.y,jf.z,i.x,i.y,i.z)}}class uQ extends Jt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Wf=new F,aD=new Lt,cle=new F,Yf=new F;let ule=class extends uQ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Wf,aD,cle),Yf.set(0,0,1).applyQuaternion(aD);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Wf.x,i),t.positionY.linearRampToValueAtTime(Wf.y,i),t.positionZ.linearRampToValueAtTime(Wf.z,i),t.orientationX.linearRampToValueAtTime(Yf.x,i),t.orientationY.linearRampToValueAtTime(Yf.y,i),t.orientationZ.linearRampToValueAtTime(Yf.z,i)}else t.setPosition(Wf.x,Wf.y,Wf.z),t.setOrientation(Yf.x,Yf.y,Yf.z)}};class fle{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class fQ{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Lt.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Lt.multiplyQuaternionsFlat(e,o,e,t,e,i),Lt.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const jT="\\[\\]\\.:\\/",hle=new RegExp("["+jT+"]","g"),WT="[^"+jT+"]",dle="[^"+jT.replace("\\.","")+"]",ple=/((?:WC+[\/:])*)/.source.replace("WC",WT),mle=/(WCOD+)?/.source.replace("WCOD",dle),gle=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",WT),Ale=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",WT),vle=new RegExp("^"+ple+mle+gle+Ale+"$"),yle=["material","materials","bones","map"];class xle{constructor(e,t,i){const r=i||Dn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Dn{constructor(e,t,i){this.path=t,this.parsedPath=i||Dn.parseTrackName(t),this.node=Dn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Dn.Composite(e,t,i):new Dn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(hle,"")}static parseTrackName(e){const t=vle.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);yle.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Dn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Dn.Composite=xle;Dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Dn.prototype.GetterByBindingType=[Dn.prototype._getValue_direct,Dn.prototype._getValue_array,Dn.prototype._getValue_arrayElement,Dn.prototype._getValue_toArray];Dn.prototype.SetterByBindingTypeAndVersioning=[[Dn.prototype._setValue_direct,Dn.prototype._setValue_direct_setNeedsUpdate,Dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_array,Dn.prototype._setValue_array_setNeedsUpdate,Dn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_arrayElement,Dn.prototype._setValue_arrayElement_setNeedsUpdate,Dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_fromArray,Dn.prototype._setValue_fromArray_setNeedsUpdate,Dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _le{constructor(){this.isAnimationObjectGroup=!0,this.uuid=So(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const h=arguments[u],d=h.uuid;let m=t[d];if(m===void 0){m=l++,t[d]=m,e.push(h);for(let g=0,v=o;g!==v;++g)s[g].push(new Dn(h,i[g],r[g]))}else if(m<c){a=e[m];const g=--c,v=e[g];t[v.uuid]=m,e[m]=v,t[d]=g,e[g]=h;for(let p=0,A=o;p!==A;++p){const y=s[p],w=y[g];let S=y[m];y[m]=w,S===void 0&&(S=new Dn(h,i[p],r[p])),y[g]=S}}else e[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,h=e[f];t[h.uuid]=u,e[u]=h,t[c]=f,e[f]=l;for(let d=0,m=r;d!==m;++d){const g=i[d],v=g[f],p=g[u];g[u]=v,g[f]=p}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const h=--s,d=e[h],m=--o,g=e[m];t[d.uuid]=f,e[f]=d,t[g.uuid]=h,e[h]=g,e.pop();for(let v=0,p=r;v!==p;++v){const A=i[v],y=A[h],w=A[m];A[f]=y,A[h]=w,A.pop()}}else{const h=--o,d=e[h];h>0&&(t[d.uuid]=f),e[f]=d,e.pop();for(let m=0,g=r;m!==g;++m){const v=i[m];v[f]=v[h],v.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let h=u,d=l.length;h!==d;++h){const m=l[h];f[h]=new Dn(m,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class hQ{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Ah,endingEnd:Ah};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=hH,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case mT:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case fE:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===dH;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===fH){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=vh,r.endingEnd=vh):(e?r.endingStart=this.zeroSlopeAtStart?vh:Ah:r.endingStart=MA,t?r.endingEnd=this.zeroSlopeAtEnd?vh:Ah:r.endingEnd=MA)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const Ele=new Float32Array(1);class YT extends Yr{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const h=r[f],d=h.name;let m=u[d];if(m!==void 0)++m.referenceCount,o[f]=m;else{if(m=o[f],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,d));continue}const g=t&&t._propertyBindings[f].binding.parsedPath;m=new fQ(Dn.create(i,d,g),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,d),o[f]=m}a[f].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new NT(new Float32Array(2),new Float32Array(2),1,Ele),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?cf.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=fE),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new hQ(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?cf.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class es{constructor(e){this.value=e}clone(){return new es(this.value.clone===void 0?this.value:this.value.clone())}}let wle=0;class Sle extends Yr{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:wle++}),this.name="",this.usage=IA,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class u3 extends av{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Cle{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Ef{constructor(e,t,i=0,r=1/0){this.ray=new xa(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Th,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return DM(e,this,i,t),i.sort(lD),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)DM(e[r],this,i,t);return i.sort(lD),i}}function lD(n,e){return n.distance-e.distance}function DM(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)DM(r[s],e,t,!0)}}class Wh{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos($i(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class ble{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const cD=new Se;class dQ{constructor(e=new Se(1/0,1/0),t=new Se(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=cD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,cD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const uD=new F,T2=new F;class $a{constructor(e=new F,t=new F){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){uD.subVectors(e,this.start),T2.subVectors(this.end,this.start);const i=T2.dot(T2);let s=T2.dot(uD)/i;return t&&(s=$i(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const fD=new F;class Mle extends Jt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Gt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new Et(r,3));const s=new tr({fog:!1,toneMapped:!1});this.cone=new rl(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),fD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(fD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const lu=new F,B2=new He,zS=new He;class pQ extends rl{constructor(e){const t=mQ(e),i=new Gt,r=[],s=[],o=new et(0,0,1),a=new et(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Et(r,3)),i.setAttribute("color",new Et(s,3));const l=new tr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");zS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(B2.multiplyMatrices(zS,a.matrixWorld),lu.setFromMatrixPosition(B2),r.setXYZ(o,lu.x,lu.y,lu.z),B2.multiplyMatrices(zS,a.parent.matrixWorld),lu.setFromMatrixPosition(B2),r.setXYZ(o+1,lu.x,lu.y,lu.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function mQ(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,mQ(n.children[t]));return e}class Ile extends gt{constructor(e,t,i){const r=new id(t,4,2),s=new Ir({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Tle=new F,hD=new et,dD=new et;class Ble extends Jt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Jo(t);r.rotateY(Math.PI*.5),this.material=new Ir({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new qt(o,3)),this.add(new gt(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");hD.copy(this.light.color),dD.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?hD:dD;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Tle.setFromMatrixPosition(this.light.matrixWorld).negate())}}class gQ extends rl{constructor(e=10,t=10,i=4473924,r=8947848){i=new et(i),r=new et(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,d=0,m=-a;h<=t;h++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const g=h===s?i:r;g.toArray(c,d),d+=3,g.toArray(c,d),d+=3,g.toArray(c,d),d+=3,g.toArray(c,d),d+=3}const u=new Gt;u.setAttribute("position",new Et(l,3)),u.setAttribute("color",new Et(c,3));const f=new tr({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ple extends rl{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new et(s),o=new et(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const h=f/t*(Math.PI*2),d=Math.sin(h)*e,m=Math.cos(h)*e;a.push(0,0,0),a.push(d,0,m);const g=f&1?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let f=0;f<i;f++){const h=f&1?s:o,d=e-e/i*f;for(let m=0;m<r;m++){let g=m/r*(Math.PI*2),v=Math.sin(g)*d,p=Math.cos(g)*d;a.push(v,0,p),l.push(h.r,h.g,h.b),g=(m+1)/r*(Math.PI*2),v=Math.sin(g)*d,p=Math.cos(g)*d,a.push(v,0,p),l.push(h.r,h.g,h.b)}}const c=new Gt;c.setAttribute("position",new Et(a,3)),c.setAttribute("color",new Et(l,3));const u=new tr({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const pD=new F,P2=new F,mD=new F;class Rle extends Jt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Gt;r.setAttribute("position",new Et([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new tr({fog:!1,toneMapped:!1});this.lightPlane=new vn(r,s),this.add(this.lightPlane),r=new Gt,r.setAttribute("position",new Et([0,0,0,0,0,1],3)),this.targetLine=new vn(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),pD.setFromMatrixPosition(this.light.matrixWorld),P2.setFromMatrixPosition(this.light.target.matrixWorld),mD.subVectors(P2,pD),this.lightPlane.lookAt(P2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(P2),this.targetLine.scale.z=mD.length()}}const R2=new F,Xi=new yf;class AQ extends rl{constructor(e){const t=new Gt,i=new tr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,g){l(m),l(g)}function l(m){r.push(0,0,0),s.push(0,0,0),o[m]===void 0&&(o[m]=[]),o[m].push(r.length/3-1)}t.setAttribute("position",new Et(r,3)),t.setAttribute("color",new Et(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new et(16755200),u=new et(16711680),f=new et(43775),h=new et(16777215),d=new et(3355443);this.setColors(c,u,f,h,d)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Xi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ar("c",t,e,Xi,0,0,-1),ar("t",t,e,Xi,0,0,1),ar("n1",t,e,Xi,-i,-r,-1),ar("n2",t,e,Xi,i,-r,-1),ar("n3",t,e,Xi,-i,r,-1),ar("n4",t,e,Xi,i,r,-1),ar("f1",t,e,Xi,-i,-r,1),ar("f2",t,e,Xi,i,-r,1),ar("f3",t,e,Xi,-i,r,1),ar("f4",t,e,Xi,i,r,1),ar("u1",t,e,Xi,i*.7,r*1.1,-1),ar("u2",t,e,Xi,-i*.7,r*1.1,-1),ar("u3",t,e,Xi,0,r*2,-1),ar("cf1",t,e,Xi,-i,0,1),ar("cf2",t,e,Xi,i,0,1),ar("cf3",t,e,Xi,0,-r,1),ar("cf4",t,e,Xi,0,r,1),ar("cn1",t,e,Xi,-i,0,-1),ar("cn2",t,e,Xi,i,0,-1),ar("cn3",t,e,Xi,0,-r,-1),ar("cn4",t,e,Xi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ar(n,e,t,i,r,s,o){R2.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],R2.x,R2.y,R2.z)}}const D2=new Gn;class Dle extends rl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Gt;s.setIndex(new qt(i,1)),s.setAttribute("position",new qt(r,3)),super(s,new tr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&D2.setFromObject(this.object),D2.isEmpty())return;const t=D2.min,i=D2.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Lle extends rl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Gt;s.setIndex(new qt(i,1)),s.setAttribute("position",new Et(r,3)),super(s,new tr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Fle extends vn{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Gt;o.setAttribute("position",new Et(s,3)),o.computeBoundingSphere(),super(o,new tr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Gt;l.setAttribute("position",new Et(a,3)),l.computeBoundingSphere(),this.add(new gt(l,new Ir({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const gD=new F;let L2,US;class Ole extends Jt{constructor(e=new F(0,0,1),t=new F(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",L2===void 0&&(L2=new Gt,L2.setAttribute("position",new Et([0,0,0,0,1,0],3)),US=new Nr(0,.5,1,5,1),US.translate(0,-.5,0)),this.position.copy(t),this.line=new vn(L2,new tr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new gt(US,new Ir({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{gD.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(gD,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class zle extends rl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Gt;r.setAttribute("position",new Et(t,3)),r.setAttribute("color",new Et(i,3));const s=new tr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new et,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dc{constructor(){this.type="ShapePath",this.color=new et,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Xu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(p){const A=[];for(let y=0,w=p.length;y<w;y++){const S=p[y],C=new Cc;C.curves=S.curves,A.push(C)}return A}function i(p,A){const y=A.length;let w=!1;for(let S=y-1,C=0;C<y;S=C++){let b=A[S],M=A[C],I=M.x-b.x,T=M.y-b.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(b=A[C],I=-I,M=A[S],T=-T),p.y<b.y||p.y>M.y)continue;if(p.y===b.y){if(p.x===b.x)return!0}else{const D=T*(p.x-b.x)-I*(p.y-b.y);if(D===0)return!0;if(D<0)continue;w=!w}}else{if(p.y!==b.y)continue;if(M.x<=p.x&&p.x<=b.x||b.x<=p.x&&p.x<=M.x)return!0}}return w}const r=Ka.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Cc,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const f=[],h=[];let d=[],m=0,g;h[m]=void 0,d[m]=[];for(let p=0,A=s.length;p<A;p++)a=s[p],g=a.getPoints(),o=r(g),o=e?!o:o,o?(!u&&h[m]&&m++,h[m]={s:new Cc,p:g},h[m].s.curves=a.curves,u&&m++,d[m]=[]):d[m].push({h:a,p:g[0]});if(!h[0])return t(s);if(h.length>1){let p=!1,A=0;for(let y=0,w=h.length;y<w;y++)f[y]=[];for(let y=0,w=h.length;y<w;y++){const S=d[y];for(let C=0;C<S.length;C++){const b=S[C];let M=!0;for(let I=0;I<h.length;I++)i(b.p,h[I].p)&&(y!==I&&A++,M?(M=!1,f[I].push(b)):p=!0);M&&f[y].push(b)}}A>0&&p===!1&&(d=f)}let v;for(let p=0,A=h.length;p<A;p++){l=h[p].s,c.push(l),v=d[p];for(let y=0,w=v.length;y<w;y++)l.holes.push(v[y].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:il}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=il);const HE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:fT,AddEquation:ah,AddOperation:nH,AdditiveAnimationBlendMode:mT,AdditiveBlending:e3,AlphaFormat:aH,AlwaysCompare:bH,AlwaysDepth:qG,AlwaysStencilFunc:yT,AmbientLight:QT,AmbientLightProbe:ole,AnimationAction:hQ,AnimationClip:cf,AnimationLoader:$ae,AnimationMixer:YT,AnimationObjectGroup:_le,AnimationUtils:Xae,ArcCurve:QH,ArrayCamera:zH,ArrowHelper:Ole,Audio:uQ,AudioAnalyser:fle,AudioContext:VT,AudioListener:cQ,AudioLoader:lQ,AxesHelper:zle,BackSide:er,BasicDepthPacking:mH,BasicShadowMap:zG,Bone:Vm,BooleanKeyframeTrack:sd,Box2:dQ,Box3:Gn,Box3Helper:Lle,BoxGeometry:Ms,BoxHelper:Dle,BufferAttribute:qt,BufferGeometry:Gt,BufferGeometryLoader:oQ,ByteType:CA,Cache:jh,Camera:yf,CameraHelper:AQ,CanvasTexture:_E,CapsuleGeometry:CE,CatmullRomCurve3:EE,CineonToneMapping:sH,CircleGeometry:bE,ClampToEdgeWrapping:li,Clock:d0,Color:et,ColorKeyframeTrack:GT,ColorManagement:jo,CompressedArrayTexture:vae,CompressedTexture:nd,CompressedTextureLoader:Zae,ConeGeometry:ME,CubeCamera:mE,CubeReflectionMapping:zl,CubeRefractionMapping:of,CubeTexture:sv,CubeTextureLoader:OE,CubeUVReflectionMapping:o0,CubicBezierCurve:TT,CubicBezierCurve3:BT,CubicInterpolant:eQ,CullFaceBack:nM,CullFaceFront:OG,CullFaceFrontBack:wte,CullFaceNone:FG,Curve:_a,CurvePath:LT,CustomBlending:sE,CustomToneMapping:oH,CylinderGeometry:Nr,Cylindrical:ble,Data3DTexture:ET,DataArrayTexture:dE,DataTexture:io,DataTextureLoader:zE,DataUtils:ja,DecrementStencilOp:Bte,DecrementWrapStencilOp:Rte,DefaultLoadingManager:bu,DepthFormat:Ja,DepthStencilFormat:Gh,DepthTexture:u0,DirectionalLight:kE,DirectionalLightHelper:Rle,DiscreteInterpolant:tQ,DisplayP3ColorSpace:vT,DodecahedronGeometry:IE,DoubleSide:ni,DstAlphaFactor:QG,DstColorFactor:jG,DynamicCopyUsage:Vte,DynamicDrawUsage:ms,DynamicReadUsage:Gte,EdgesGeometry:FT,EllipseCurve:Bh,EqualCompare:_H,EqualDepth:KG,EqualStencilFunc:AH,EquirectangularReflectionMapping:af,EquirectangularRefractionMapping:wA,Euler:Qr,EventDispatcher:Yr,ExtrudeGeometry:hv,FileLoader:ji,Float16BufferAttribute:Rne,Float32BufferAttribute:Et,Float64BufferAttribute:Dne,FloatType:Ln,Fog:xE,FogExp2:yE,FramebufferTexture:Aae,FrontSide:Rs,Frustum:l0,GLBufferAttribute:Cle,GLSL1:Wte,GLSL3:CM,GreaterCompare:wH,GreaterDepth:ZG,GreaterEqualCompare:CH,GreaterEqualDepth:$G,GreaterEqualStencilFunc:Ute,GreaterStencilFunc:zte,GridHelper:gQ,Group:qs,HalfFloatType:jn,HemisphereLight:iQ,HemisphereLightHelper:Ble,HemisphereLightProbe:sle,IcosahedronGeometry:dv,ImageBitmapLoader:aQ,ImageLoader:LA,ImageUtils:_T,IncrementStencilOp:Tte,IncrementWrapStencilOp:Pte,InstancedBufferAttribute:el,InstancedBufferGeometry:mv,InstancedInterleavedBuffer:u3,InstancedMesh:cv,Int16BufferAttribute:Bne,Int32BufferAttribute:Pne,Int8BufferAttribute:Mne,IntType:bh,InterleavedBuffer:av,InterleavedBufferAttribute:Js,Interpolant:h0,InterpolateDiscrete:Gm,InterpolateLinear:Qh,InterpolateSmooth:a_,InvertStencilOp:Dte,KeepStencilOp:Mh,KeyframeTrack:sl,LOD:GH,LatheGeometry:fv,Layers:Th,LessCompare:xH,LessDepth:JG,LessEqualCompare:EH,LessEqualDepth:t3,LessEqualStencilFunc:Ote,LessStencilFunc:Fte,Light:_f,LightProbe:NE,Line:vn,Line3:$a,LineBasicMaterial:tr,LineCurve:wE,LineCurve3:VH,LineDashedMaterial:$H,LineLoop:bT,LineSegments:rl,LinearEncoding:AT,LinearFilter:Xt,LinearInterpolant:NT,LinearMipMapLinearFilter:aM,LinearMipMapNearestFilter:Mte,LinearMipmapLinearFilter:bo,LinearMipmapNearestFilter:lE,LinearSRGBColorSpace:ro,LinearToneMapping:iH,Loader:nr,LoaderUtils:bc,LoadingManager:FE,LoopOnce:fH,LoopPingPong:dH,LoopRepeat:hH,LuminanceAlphaFormat:cH,LuminanceFormat:lH,MOUSE:na,Material:ur,MaterialLoader:GE,MathUtils:jt,Matrix3:tn,Matrix4:He,MaxEquation:oM,Mesh:gt,MeshBasicMaterial:Ir,MeshDepthMaterial:ov,MeshDistanceMaterial:AE,MeshLambertMaterial:pv,MeshMatcapMaterial:KH,MeshNormalMaterial:zT,MeshPhongMaterial:Ng,MeshPhysicalMaterial:Fs,MeshStandardMaterial:rd,MeshToonMaterial:JH,MinEquation:sM,MirroredRepeatWrapping:Nm,MixOperation:tH,MultiplyBlending:rM,MultiplyOperation:iv,NearestFilter:dn,NearestMipMapLinearFilter:bte,NearestMipMapNearestFilter:Cte,NearestMipmapLinearFilter:ym,NearestMipmapNearestFilter:SA,NeverCompare:yH,NeverDepth:XG,NeverStencilFunc:Lte,NoBlending:pa,NoColorSpace:Yu,NoToneMapping:ma,NormalAnimationBlendMode:fE,NormalBlending:Vu,NotEqualCompare:SH,NotEqualDepth:eH,NotEqualStencilFunc:vH,NumberKeyframeTrack:lf,Object3D:Jt,ObjectLoader:ile,ObjectSpaceNormalMap:gH,OctahedronGeometry:Jo,OneFactor:oE,OneMinusDstAlphaFactor:VG,OneMinusDstColorFactor:WG,OneMinusSrcAlphaFactor:uT,OneMinusSrcColorFactor:HG,OrthographicCamera:ti,PCFShadowMap:rE,PCFSoftShadowMap:Rg,PMREMGenerator:MM,Path:Xu,PerspectiveCamera:mn,Plane:Hr,PlaneGeometry:br,PlaneHelper:Fle,PointLight:FA,PointLightHelper:Ile,Points:MT,PointsMaterial:uv,PolarGridHelper:Ple,PolyhedronGeometry:xf,PositionalAudio:ule,PropertyBinding:Dn,PropertyMixer:fQ,QuadraticBezierCurve:PT,QuadraticBezierCurve3:SE,Quaternion:Lt,QuaternionKeyframeTrack:Ul,QuaternionLinearInterpolant:nQ,RED_GREEN_RGTC2_Format:wM,RED_RGTC1_Format:uH,REVISION:il,RGBADepthPacking:hE,RGBAFormat:Vn,RGBAIntegerFormat:Hh,RGBA_ASTC_10x10_Format:yM,RGBA_ASTC_10x5_Format:gM,RGBA_ASTC_10x6_Format:AM,RGBA_ASTC_10x8_Format:vM,RGBA_ASTC_12x10_Format:xM,RGBA_ASTC_12x12_Format:_M,RGBA_ASTC_4x4_Format:o3,RGBA_ASTC_5x4_Format:uM,RGBA_ASTC_5x5_Format:fM,RGBA_ASTC_6x5_Format:hM,RGBA_ASTC_6x6_Format:bA,RGBA_ASTC_8x5_Format:dM,RGBA_ASTC_8x6_Format:pM,RGBA_ASTC_8x8_Format:mM,RGBA_BPTC_Format:Fg,RGBA_ETC2_EAC_Format:s3,RGBA_PVRTC_2BPPV1_Format:cM,RGBA_PVRTC_4BPPV1_Format:i3,RGBA_S3TC_DXT1_Format:s_,RGBA_S3TC_DXT3_Format:o_,RGBA_S3TC_DXT5_Format:Lg,RGB_ETC1_Format:pT,RGB_ETC2_Format:r3,RGB_PVRTC_2BPPV1_Format:lM,RGB_PVRTC_4BPPV1_Format:n3,RGB_S3TC_DXT1_Format:Dg,RGFormat:Su,RGIntegerFormat:rv,RawShaderMaterial:qH,Ray:xa,Raycaster:Ef,RectAreaLight:rQ,RedFormat:la,RedIntegerFormat:uE,ReinhardToneMapping:rH,RepeatWrapping:Wr,ReplaceStencilOp:l_,ReverseSubtractEquation:kG,RingGeometry:BE,SIGNED_RED_GREEN_RGTC2_Format:SM,SIGNED_RED_RGTC1_Format:EM,SRGBColorSpace:En,Scene:Mo,ShaderChunk:rn,ShaderLib:Ga,ShaderMaterial:Wn,ShadowMaterial:XH,Shape:Cc,ShapeGeometry:PE,ShapePath:dc,ShapeUtils:Ka,ShortType:cE,Skeleton:f0,SkeletonHelper:pQ,SkinnedMesh:lv,Source:yh,Sphere:Bi,SphereGeometry:id,Spherical:Wh,SphericalHarmonics3:sQ,SplineCurve:RT,SpotLight:UE,SpotLightHelper:Mle,Sprite:NH,SpriteMaterial:CT,SrcAlphaFactor:aE,SrcAlphaSaturateFactor:YG,SrcColorFactor:GG,StaticCopyUsage:Qte,StaticDrawUsage:IA,StaticReadUsage:Nte,StereoCamera:ale,StreamCopyUsage:jte,StreamDrawUsage:kte,StreamReadUsage:Hte,StringKeyframeTrack:od,SubtractEquation:UG,SubtractiveBlending:iM,TOUCH:vc,TangentSpaceNormalMap:vf,TetrahedronGeometry:RE,Texture:Nn,TextureLoader:kl,TorusGeometry:Cu,TorusKnotGeometry:DE,Triangle:vr,TriangleFanDrawMode:a3,TriangleStripDrawMode:gT,TrianglesDrawMode:pH,TubeGeometry:LE,TwoPassDoubleSide:Ste,UVMapping:sf,Uint16BufferAttribute:pE,Uint32BufferAttribute:wT,Uint8BufferAttribute:Ine,Uint8ClampedBufferAttribute:Tne,Uniform:es,UniformsGroup:Sle,UniformsLib:Ct,UniformsUtils:va,UnsignedByteType:hi,UnsignedInt248Type:ju,UnsignedIntType:ps,UnsignedShort4444Type:hT,UnsignedShort5551Type:dT,UnsignedShortType:Af,VSMShadowMap:za,Vector2:Se,Vector3:F,Vector4:sn,VectorKeyframeTrack:Oc,VideoTexture:HH,WebGL1Renderer:UH,WebGL3DRenderTarget:gne,WebGLArrayRenderTarget:mne,WebGLCoordinateSystem:Dl,WebGLCubeRenderTarget:a0,WebGLMultipleRenderTargets:Ane,WebGLRenderTarget:Qn,WebGLRenderer:vE,WebGLUtils:OH,WebGPUCoordinateSystem:TA,WireframeGeometry:OT,WrapAroundEnding:MA,ZeroCurvatureEnding:Ah,ZeroFactor:NG,ZeroSlopeEnding:vh,ZeroStencilOp:Ite,_SRGBAFormat:l3,sRGBEncoding:Wu},Symbol.toStringTag,{value:"Module"}));var vQ={exports:{}},ad={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ad.ConcurrentRoot=1;ad.ContinuousEventPriority=4;ad.DefaultEventPriority=16;ad.DiscreteEventPriority=1;ad.IdleEventPriority=536870912;ad.LegacyRoot=0;vQ.exports=ad;var um=vQ.exports;function Ule(n){let e;const t=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const h=e;e=u?f:Object.assign({},e,f),t.forEach(d=>d(e,h))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function d(){const m=u(e);if(!f(h,m)){const g=h;c(h=m,g)}}return t.add(d),()=>t.delete(d)},l={setState:i,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const kle=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),AD=kle?E.useEffect:E.useLayoutEffect;function QE(n){const e=typeof n=="function"?Ule(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=E.useReducer(v=>v+1,0),o=e.getState(),a=E.useRef(o),l=E.useRef(i),c=E.useRef(r),u=E.useRef(!1),f=E.useRef();f.current===void 0&&(f.current=i(o));let h,d=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(h=i(o),d=!r(f.current,h)),AD(()=>{d&&(f.current=h),a.current=o,l.current=i,c.current=r,u.current=!1});const m=E.useRef(o);AD(()=>{const v=()=>{try{const A=e.getState(),y=l.current(A);c.current(f.current,y)||(a.current=A,f.current=y,s())}catch{u.current=!0,s()}},p=e.subscribe(v);return e.getState()!==m.current&&v(),p},[]);const g=d?h:f.current;return E.useDebugValue(g),g};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var yQ={exports:{}},xQ={exports:{}},_Q={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,X){var Y=U.length;U.push(X);e:for(;0<Y;){var O=Y-1>>>1,W=U[O];if(0<r(W,X))U[O]=X,U[Y]=W,Y=O;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var X=U[0],Y=U.pop();if(Y!==X){U[0]=Y;e:for(var O=0,W=U.length,$=W>>>1;O<$;){var k=2*(O+1)-1,V=U[k],Q=k+1,j=U[Q];if(0>r(V,Y))Q<W&&0>r(j,V)?(U[O]=j,U[Q]=Y,O=Q):(U[O]=V,U[k]=Y,O=k);else if(Q<W&&0>r(j,Y))U[O]=j,U[Q]=Y,O=Q;else break e}}return X}function r(U,X){var Y=U.sortIndex-X.sortIndex;return Y!==0?Y:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,d=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(U){for(var X=t(c);X!==null;){if(X.callback===null)i(c);else if(X.startTime<=U)i(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function w(U){if(g=!1,y(U),!m)if(t(l)!==null)m=!0,J(S);else{var X=t(c);X!==null&&Z(w,X.startTime-U)}}function S(U,X){m=!1,g&&(g=!1,p(M),M=-1),d=!0;var Y=h;try{for(y(X),f=t(l);f!==null&&(!(f.expirationTime>X)||U&&!D());){var O=f.callback;if(typeof O=="function"){f.callback=null,h=f.priorityLevel;var W=O(f.expirationTime<=X);X=n.unstable_now(),typeof W=="function"?f.callback=W:f===t(l)&&i(l),y(X)}else i(l);f=t(l)}if(f!==null)var $=!0;else{var k=t(c);k!==null&&Z(w,k.startTime-X),$=!1}return $}finally{f=null,h=Y,d=!1}}var C=!1,b=null,M=-1,I=5,T=-1;function D(){return!(n.unstable_now()-T<I)}function R(){if(b!==null){var U=n.unstable_now();T=U;var X=!0;try{X=b(!0,U)}finally{X?z():(C=!1,b=null)}}else C=!1}var z;if(typeof A=="function")z=function(){A(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=R,z=function(){H.postMessage(null)}}else z=function(){v(R,0)};function J(U){b=U,C||(C=!0,z())}function Z(U,X){M=v(function(){U(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){m||d||(m=!0,J(S))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var Y=h;h=X;try{return U()}finally{h=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=h;h=U;try{return X()}finally{h=Y}},n.unstable_scheduleCallback=function(U,X,Y){var O=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?O+Y:O):Y=O,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Y+W,U={id:u++,callback:X,priorityLevel:U,startTime:Y,expirationTime:W,sortIndex:-1},Y>O?(U.sortIndex=Y,e(c,U),t(l)===null&&U===t(c)&&(g?(p(M),M=-1):g=!0,Z(w,Y-O))):(U.sortIndex=W,e(l,U),m||d||(m=!0,J(S))),U},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(U){var X=h;return function(){var Y=h;h=X;try{return U.apply(this,arguments)}finally{h=Y}}}})(_Q);xQ.exports=_Q;var LM=xQ.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nle=function(e){var t={},i=E,r=LM,s=Object.assign;function o(x){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+x,B=1;B<arguments.length;B++)_+="&args[]="+encodeURIComponent(arguments[B]);return"Minified React error #"+x+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(x){return x===null||typeof x!="object"?null:(x=S&&x[S]||x["@@iterator"],typeof x=="function"?x:null)}function b(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case p:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case m:return(x.displayName||"Context")+".Consumer";case d:return(x._context.displayName||"Context")+".Provider";case g:var _=x.render;return x=x.displayName,x||(x=_.displayName||_.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case A:return _=x.displayName||null,_!==null?_:b(x.type)||"Memo";case y:_=x._payload,x=x._init;try{return b(x(_))}catch{}}return null}function M(x){var _=x.type;switch(x.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=_.render,x=x.displayName||x.name||"",_.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b(_);case 8:return _===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function I(x){var _=x,B=x;if(x.alternate)for(;_.return;)_=_.return;else{x=_;do _=x,_.flags&4098&&(B=_.return),x=_.return;while(x)}return _.tag===3?B:null}function T(x){if(I(x)!==x)throw Error(o(188))}function D(x){var _=x.alternate;if(!_){if(_=I(x),_===null)throw Error(o(188));return _!==x?null:x}for(var B=x,P=_;;){var N=B.return;if(N===null)break;var K=N.alternate;if(K===null){if(P=N.return,P!==null){B=P;continue}break}if(N.child===K.child){for(K=N.child;K;){if(K===B)return T(N),x;if(K===P)return T(N),_;K=K.sibling}throw Error(o(188))}if(B.return!==P.return)B=N,P=K;else{for(var ge=!1,Le=N.child;Le;){if(Le===B){ge=!0,B=N,P=K;break}if(Le===P){ge=!0,P=N,B=K;break}Le=Le.sibling}if(!ge){for(Le=K.child;Le;){if(Le===B){ge=!0,B=K,P=N;break}if(Le===P){ge=!0,P=K,B=N;break}Le=Le.sibling}if(!ge)throw Error(o(189))}}if(B.alternate!==P)throw Error(o(190))}if(B.tag!==3)throw Error(o(188));return B.stateNode.current===B?x:_}function R(x){return x=D(x),x!==null?z(x):null}function z(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var _=z(x);if(_!==null)return _;x=x.sibling}return null}function L(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var _=L(x);if(_!==null)return _}x=x.sibling}return null}var H=Array.isArray,J=e.getPublicInstance,Z=e.getRootHostContext,U=e.getChildHostContext,X=e.prepareForCommit,Y=e.resetAfterCommit,O=e.createInstance,W=e.appendInitialChild,$=e.finalizeInitialChildren,k=e.prepareUpdate,V=e.shouldSetTextContent,Q=e.createTextInstance,j=e.scheduleTimeout,oe=e.cancelTimeout,xe=e.noTimeout,pe=e.isPrimaryRenderer,de=e.supportsMutation,te=e.supportsPersistence,Ee=e.supportsHydration,ue=e.getInstanceFromNode,ve=e.preparePortalMount,ye=e.getCurrentEventPriority,Be=e.detachDeletedInstance,ae=e.supportsMicrotasks,ie=e.scheduleMicrotask,be=e.supportsTestSelectors,Re=e.findFiberRoot,ct=e.getBoundingRect,se=e.getTextContent,ee=e.isHiddenSubtree,Ae=e.matchAccessibilityRole,Ue=e.setFocusIfFocusable,Ce=e.setupIntersectionObserver,ke=e.appendChild,We=e.appendChildToContainer,Xe=e.commitTextUpdate,Oe=e.commitMount,ft=e.commitUpdate,lt=e.insertBefore,st=e.insertInContainerBefore,ce=e.removeChild,De=e.removeChildFromContainer,$e=e.resetTextContent,Ye=e.hideInstance,fe=e.hideTextInstance,_e=e.unhideInstance,Me=e.unhideTextInstance,at=e.clearContainer,ot=e.cloneInstance,yt=e.createContainerChildSet,we=e.appendChildToContainerChildSet,Ie=e.finalizeContainerChildren,Fe=e.replaceContainerChildren,qe=e.cloneHiddenInstance,ut=e.cloneHiddenTextInstance,Mt=e.canHydrateInstance,It=e.canHydrateTextInstance,wt=e.canHydrateSuspenseInstance,Ht=e.isSuspenseInstancePending,zt=e.isSuspenseInstanceFallback,Fn=e.registerSuspenseInstanceRetry,wn=e.getNextHydratableSibling,ht=e.getFirstHydratableChild,un=e.getFirstHydratableChildWithinContainer,Jn=e.getFirstHydratableChildWithinSuspenseInstance,ne=e.hydrateInstance,G=e.hydrateTextInstance,re=e.hydrateSuspenseInstance,he=e.getNextHydratableInstanceAfterSuspenseInstance,le=e.commitHydratedContainer,me=e.commitHydratedSuspenseInstance,Ge=e.clearSuspenseBoundary,Qe=e.clearSuspenseBoundaryFromContainer,Ke=e.shouldDeleteUnhydratedTailInstances,Ne=e.didNotMatchHydratedContainerTextInstance,Je=e.didNotMatchHydratedTextInstance,Te;function pt(x){if(Te===void 0)try{throw Error()}catch(B){var _=B.stack.trim().match(/\n( *(at )?)/);Te=_&&_[1]||""}return`
`+Te+x}var At=!1;function vt(x,_){if(!x||At)return"";At=!0;var B=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(xt){var P=xt}Reflect.construct(x,[],_)}else{try{_.call()}catch(xt){P=xt}x.call(_.prototype)}else{try{throw Error()}catch(xt){P=xt}x()}}catch(xt){if(xt&&P&&typeof xt.stack=="string"){for(var N=xt.stack.split(`
`),K=P.stack.split(`
`),ge=N.length-1,Le=K.length-1;1<=ge&&0<=Le&&N[ge]!==K[Le];)Le--;for(;1<=ge&&0<=Le;ge--,Le--)if(N[ge]!==K[Le]){if(ge!==1||Le!==1)do if(ge--,Le--,0>Le||N[ge]!==K[Le]){var nt=`
`+N[ge].replace(" at new "," at ");return x.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",x.displayName)),nt}while(1<=ge&&0<=Le);break}}}finally{At=!1,Error.prepareStackTrace=B}return(x=x?x.displayName||x.name:"")?pt(x):""}var Nt=Object.prototype.hasOwnProperty,Kt=[],Vt=-1;function Pt(x){return{current:x}}function Zt(x){0>Vt||(x.current=Kt[Vt],Kt[Vt]=null,Vt--)}function kt(x,_){Vt++,Kt[Vt]=x.current,x.current=_}var ln={},Yn=Pt(ln),on=Pt(!1),Xn=ln;function Pn(x,_){var B=x.type.contextTypes;if(!B)return ln;var P=x.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===_)return P.__reactInternalMemoizedMaskedChildContext;var N={},K;for(K in B)N[K]=_[K];return P&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=_,x.__reactInternalMemoizedMaskedChildContext=N),N}function Kn(x){return x=x.childContextTypes,x!=null}function ui(){Zt(on),Zt(Yn)}function cn(x,_,B){if(Yn.current!==ln)throw Error(o(168));kt(Yn,_),kt(on,B)}function di(x,_,B){var P=x.stateNode;if(_=_.childContextTypes,typeof P.getChildContext!="function")return B;P=P.getChildContext();for(var N in P)if(!(N in _))throw Error(o(108,M(x)||"Unknown",N));return s({},B,P)}function Hn(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||ln,Xn=Yn.current,kt(Yn,x),kt(on,on.current),!0}function pn(x,_,B){var P=x.stateNode;if(!P)throw Error(o(169));B?(x=di(x,_,Xn),P.__reactInternalMemoizedMergedChildContext=x,Zt(on),Zt(Yn),kt(Yn,x)):Zt(on),kt(on,B)}var vi=Math.clz32?Math.clz32:so,Us=Math.log,ir=Math.LN2;function so(x){return x>>>=0,x===0?32:31-(Us(x)/ir|0)|0}var Hl=64,Ql=4194304;function Vl(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function Sf(x,_){var B=x.pendingLanes;if(B===0)return 0;var P=0,N=x.suspendedLanes,K=x.pingedLanes,ge=B&268435455;if(ge!==0){var Le=ge&~N;Le!==0?P=Vl(Le):(K&=ge,K!==0&&(P=Vl(K)))}else ge=B&~N,ge!==0?P=Vl(ge):K!==0&&(P=Vl(K));if(P===0)return 0;if(_!==0&&_!==P&&!(_&N)&&(N=P&-P,K=_&-_,N>=K||N===16&&(K&4194240)!==0))return _;if(P&4&&(P|=B&16),_=x.entangledLanes,_!==0)for(x=x.entanglements,_&=P;0<_;)B=31-vi(_),N=1<<B,P|=x[B],_&=~N;return P}function Dv(x,_){switch(x){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y0(x,_){for(var B=x.suspendedLanes,P=x.pingedLanes,N=x.expirationTimes,K=x.pendingLanes;0<K;){var ge=31-vi(K),Le=1<<ge,nt=N[ge];nt===-1?(!(Le&B)||Le&P)&&(N[ge]=Dv(Le,_)):nt<=_&&(x.expiredLanes|=Le),K&=~Le}}function jl(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function fd(x){for(var _=[],B=0;31>B;B++)_.push(x);return _}function ol(x,_,B){x.pendingLanes|=_,_!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,_=31-vi(_),x[_]=B}function Wc(x,_){var B=x.pendingLanes&~_;x.pendingLanes=_,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=_,x.mutableReadLanes&=_,x.entangledLanes&=_,_=x.entanglements;var P=x.eventTimes;for(x=x.expirationTimes;0<B;){var N=31-vi(B),K=1<<N;_[N]=0,P[N]=-1,x[N]=-1,B&=~K}}function al(x,_){var B=x.entangledLanes|=_;for(x=x.entanglements;B;){var P=31-vi(B),N=1<<P;N&_|x[P]&_&&(x[P]|=_),B&=~N}}var Rn=0;function x0(x){return x&=-x,1<x?4<x?x&268435455?16:536870912:4:1}var Wl=r.unstable_scheduleCallback,hd=r.unstable_cancelCallback,_0=r.unstable_shouldYield,Lv=r.unstable_requestPaint,zi=r.unstable_now,Cf=r.unstable_ImmediatePriority,Fv=r.unstable_UserBlockingPriority,As=r.unstable_NormalPriority,E0=r.unstable_IdlePriority,bf=null,oo=null;function w0(x){if(oo&&typeof oo.onCommitFiberRoot=="function")try{oo.onCommitFiberRoot(bf,x,void 0,(x.current.flags&128)===128)}catch{}}function Ov(x,_){return x===_&&(x!==0||1/x===1/_)||x!==x&&_!==_}var ao=typeof Object.is=="function"?Object.is:Ov,vs=null,ll=!1,Ro=!1;function S0(x){vs===null?vs=[x]:vs.push(x)}function C0(x){ll=!0,S0(x)}function ks(){if(!Ro&&vs!==null){Ro=!0;var x=0,_=Rn;try{var B=vs;for(Rn=1;x<B.length;x++){var P=B[x];do P=P(!0);while(P!==null)}vs=null,ll=!1}catch(N){throw vs!==null&&(vs=vs.slice(x+1)),Wl(Cf,ks),N}finally{Rn=_,Ro=!1}}return null}var Mf=a.ReactCurrentBatchConfig;function If(x,_){if(ao(x,_))return!0;if(typeof x!="object"||x===null||typeof _!="object"||_===null)return!1;var B=Object.keys(x),P=Object.keys(_);if(B.length!==P.length)return!1;for(P=0;P<B.length;P++){var N=B[P];if(!Nt.call(_,N)||!ao(x[N],_[N]))return!1}return!0}function Tf(x){switch(x.tag){case 5:return pt(x.type);case 16:return pt("Lazy");case 13:return pt("Suspense");case 19:return pt("SuspenseList");case 0:case 2:case 15:return x=vt(x.type,!1),x;case 11:return x=vt(x.type.render,!1),x;case 1:return x=vt(x.type,!0),x;default:return""}}function ys(x,_){if(x&&x.defaultProps){_=s({},_),x=x.defaultProps;for(var B in x)_[B]===void 0&&(_[B]=x[B]);return _}return _}var Lr=Pt(null),dd=null,Ea=null,Yc=null;function pd(){Yc=Ea=dd=null}function zv(x,_,B){pe?(kt(Lr,_._currentValue),_._currentValue=B):(kt(Lr,_._currentValue2),_._currentValue2=B)}function Fr(x){var _=Lr.current;Zt(Lr),pe?x._currentValue=_:x._currentValue2=_}function xs(x,_,B){for(;x!==null;){var P=x.alternate;if((x.childLanes&_)!==_?(x.childLanes|=_,P!==null&&(P.childLanes|=_)):P!==null&&(P.childLanes&_)!==_&&(P.childLanes|=_),x===B)break;x=x.return}}function rr(x,_){dd=x,Yc=Ea=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&_&&(fo=!0),x.firstContext=null)}function sr(x){var _=pe?x._currentValue:x._currentValue2;if(Yc!==x)if(x={context:x,memoizedValue:_,next:null},Ea===null){if(dd===null)throw Error(o(308));Ea=x,dd.dependencies={lanes:0,firstContext:x}}else Ea=Ea.next=x;return _}var lo=null,Xc=!1;function Rw(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m9(x,_){x=x.updateQueue,_.updateQueue===x&&(_.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function Yl(x,_){return{eventTime:x,lane:_,tag:0,payload:null,callback:null,next:null}}function qc(x,_){var B=x.updateQueue;B!==null&&(B=B.shared,fr!==null&&x.mode&1&&!(Bn&2)?(x=B.interleaved,x===null?(_.next=_,lo===null?lo=[B]:lo.push(B)):(_.next=x.next,x.next=_),B.interleaved=_):(x=B.pending,x===null?_.next=_:(_.next=x.next,x.next=_),B.pending=_))}function Uv(x,_,B){if(_=_.updateQueue,_!==null&&(_=_.shared,(B&4194240)!==0)){var P=_.lanes;P&=x.pendingLanes,B|=P,_.lanes=B,al(x,B)}}function g9(x,_){var B=x.updateQueue,P=x.alternate;if(P!==null&&(P=P.updateQueue,B===P)){var N=null,K=null;if(B=B.firstBaseUpdate,B!==null){do{var ge={eventTime:B.eventTime,lane:B.lane,tag:B.tag,payload:B.payload,callback:B.callback,next:null};K===null?N=K=ge:K=K.next=ge,B=B.next}while(B!==null);K===null?N=K=_:K=K.next=_}else N=K=_;B={baseState:P.baseState,firstBaseUpdate:N,lastBaseUpdate:K,shared:P.shared,effects:P.effects},x.updateQueue=B;return}x=B.lastBaseUpdate,x===null?B.firstBaseUpdate=_:x.next=_,B.lastBaseUpdate=_}function kv(x,_,B,P){var N=x.updateQueue;Xc=!1;var K=N.firstBaseUpdate,ge=N.lastBaseUpdate,Le=N.shared.pending;if(Le!==null){N.shared.pending=null;var nt=Le,xt=nt.next;nt.next=null,ge===null?K=xt:ge.next=xt,ge=nt;var Ut=x.alternate;Ut!==null&&(Ut=Ut.updateQueue,Le=Ut.lastBaseUpdate,Le!==ge&&(Le===null?Ut.firstBaseUpdate=xt:Le.next=xt,Ut.lastBaseUpdate=nt))}if(K!==null){var xn=N.baseState;ge=0,Ut=xt=nt=null,Le=K;do{var nn=Le.lane,pi=Le.eventTime;if((P&nn)===nn){Ut!==null&&(Ut=Ut.next={eventTime:pi,lane:0,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null});e:{var Yt=x,as=Le;switch(nn=_,pi=B,as.tag){case 1:if(Yt=as.payload,typeof Yt=="function"){xn=Yt.call(pi,xn,nn);break e}xn=Yt;break e;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=as.payload,nn=typeof Yt=="function"?Yt.call(pi,xn,nn):Yt,nn==null)break e;xn=s({},xn,nn);break e;case 2:Xc=!0}}Le.callback!==null&&Le.lane!==0&&(x.flags|=64,nn=N.effects,nn===null?N.effects=[Le]:nn.push(Le))}else pi={eventTime:pi,lane:nn,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null},Ut===null?(xt=Ut=pi,nt=xn):Ut=Ut.next=pi,ge|=nn;if(Le=Le.next,Le===null){if(Le=N.shared.pending,Le===null)break;nn=Le,Le=nn.next,nn.next=null,N.lastBaseUpdate=nn,N.shared.pending=null}}while(!0);if(Ut===null&&(nt=xn),N.baseState=nt,N.firstBaseUpdate=xt,N.lastBaseUpdate=Ut,_=N.shared.interleaved,_!==null){N=_;do ge|=N.lane,N=N.next;while(N!==_)}else K===null&&(N.shared.lanes=0);wd|=ge,x.lanes=ge,x.memoizedState=xn}}function A9(x,_,B){if(x=_.effects,_.effects=null,x!==null)for(_=0;_<x.length;_++){var P=x[_],N=P.callback;if(N!==null){if(P.callback=null,P=B,typeof N!="function")throw Error(o(191,N));N.call(P)}}}var v9=new i.Component().refs;function Dw(x,_,B,P){_=x.memoizedState,B=B(P,_),B=B==null?_:s({},_,B),x.memoizedState=B,x.lanes===0&&(x.updateQueue.baseState=B)}var Nv={isMounted:function(x){return(x=x._reactInternals)?I(x)===x:!1},enqueueSetState:function(x,_,B){x=x._reactInternals;var P=Es(),N=$c(x),K=Yl(P,N);K.payload=_,B!=null&&(K.callback=B),qc(x,K),_=zo(x,N,P),_!==null&&Uv(_,x,N)},enqueueReplaceState:function(x,_,B){x=x._reactInternals;var P=Es(),N=$c(x),K=Yl(P,N);K.tag=1,K.payload=_,B!=null&&(K.callback=B),qc(x,K),_=zo(x,N,P),_!==null&&Uv(_,x,N)},enqueueForceUpdate:function(x,_){x=x._reactInternals;var B=Es(),P=$c(x),N=Yl(B,P);N.tag=2,_!=null&&(N.callback=_),qc(x,N),_=zo(x,P,B),_!==null&&Uv(_,x,P)}};function y9(x,_,B,P,N,K,ge){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(P,K,ge):_.prototype&&_.prototype.isPureReactComponent?!If(B,P)||!If(N,K):!0}function x9(x,_,B){var P=!1,N=ln,K=_.contextType;return typeof K=="object"&&K!==null?K=sr(K):(N=Kn(_)?Xn:Yn.current,P=_.contextTypes,K=(P=P!=null)?Pn(x,N):ln),_=new _(B,K),x.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Nv,x.stateNode=_,_._reactInternals=x,P&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=N,x.__reactInternalMemoizedMaskedChildContext=K),_}function _9(x,_,B,P){x=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(B,P),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(B,P),_.state!==x&&Nv.enqueueReplaceState(_,_.state,null)}function Lw(x,_,B,P){var N=x.stateNode;N.props=B,N.state=x.memoizedState,N.refs=v9,Rw(x);var K=_.contextType;typeof K=="object"&&K!==null?N.context=sr(K):(K=Kn(_)?Xn:Yn.current,N.context=Pn(x,K)),N.state=x.memoizedState,K=_.getDerivedStateFromProps,typeof K=="function"&&(Dw(x,_,K,B),N.state=x.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(_=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),_!==N.state&&Nv.enqueueReplaceState(N,N.state,null),kv(x,B,N,P),N.state=x.memoizedState),typeof N.componentDidMount=="function"&&(x.flags|=4194308)}var md=[],gd=0,Gv=null,Hv=0,Do=[],Lo=0,Bf=null,Xl=1,ql="";function Pf(x,_){md[gd++]=Hv,md[gd++]=Gv,Gv=x,Hv=_}function E9(x,_,B){Do[Lo++]=Xl,Do[Lo++]=ql,Do[Lo++]=Bf,Bf=x;var P=Xl;x=ql;var N=32-vi(P)-1;P&=~(1<<N),B+=1;var K=32-vi(_)+N;if(30<K){var ge=N-N%5;K=(P&(1<<ge)-1).toString(32),P>>=ge,N-=ge,Xl=1<<32-vi(_)+N|B<<N|P,ql=K+x}else Xl=1<<K|B<<N|P,ql=x}function Fw(x){x.return!==null&&(Pf(x,1),E9(x,1,0))}function Ow(x){for(;x===Gv;)Gv=md[--gd],md[gd]=null,Hv=md[--gd],md[gd]=null;for(;x===Bf;)Bf=Do[--Lo],Do[Lo]=null,ql=Do[--Lo],Do[Lo]=null,Xl=Do[--Lo],Do[Lo]=null}var co=null,uo=null,Ri=!1,b0=!1,wa=null;function w9(x,_){var B=Uo(5,null,null,0);B.elementType="DELETED",B.stateNode=_,B.return=x,_=x.deletions,_===null?(x.deletions=[B],x.flags|=16):_.push(B)}function S9(x,_){switch(x.tag){case 5:return _=Mt(_,x.type,x.pendingProps),_!==null?(x.stateNode=_,co=x,uo=ht(_),!0):!1;case 6:return _=It(_,x.pendingProps),_!==null?(x.stateNode=_,co=x,uo=null,!0):!1;case 13:if(_=wt(_),_!==null){var B=Bf!==null?{id:Xl,overflow:ql}:null;return x.memoizedState={dehydrated:_,treeContext:B,retryLane:1073741824},B=Uo(18,null,null,0),B.stateNode=_,B.return=x,x.child=B,co=x,uo=null,!0}return!1;default:return!1}}function zw(x){return(x.mode&1)!==0&&(x.flags&128)===0}function Uw(x){if(Ri){var _=uo;if(_){var B=_;if(!S9(x,_)){if(zw(x))throw Error(o(418));_=wn(B);var P=co;_&&S9(x,_)?w9(P,B):(x.flags=x.flags&-4097|2,Ri=!1,co=x)}}else{if(zw(x))throw Error(o(418));x.flags=x.flags&-4097|2,Ri=!1,co=x}}}function C9(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;co=x}function M0(x){if(!Ee||x!==co)return!1;if(!Ri)return C9(x),Ri=!0,!1;if(x.tag!==3&&(x.tag!==5||Ke(x.type)&&!V(x.type,x.memoizedProps))){var _=uo;if(_){if(zw(x)){for(x=uo;x;)x=wn(x);throw Error(o(418))}for(;_;)w9(x,_),_=wn(_)}}if(C9(x),x.tag===13){if(!Ee)throw Error(o(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));uo=he(x)}else uo=co?wn(x.stateNode):null;return!0}function Ad(){Ee&&(uo=co=null,b0=Ri=!1)}function kw(x){wa===null?wa=[x]:wa.push(x)}function I0(x,_,B){if(x=B.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(B._owner){if(B=B._owner,B){if(B.tag!==1)throw Error(o(309));var P=B.stateNode}if(!P)throw Error(o(147,x));var N=P,K=""+x;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===K?_.ref:(_=function(ge){var Le=N.refs;Le===v9&&(Le=N.refs={}),ge===null?delete Le[K]:Le[K]=ge},_._stringRef=K,_)}if(typeof x!="string")throw Error(o(284));if(!B._owner)throw Error(o(290,x))}return x}function Qv(x,_){throw x=Object.prototype.toString.call(_),Error(o(31,x==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":x))}function b9(x){var _=x._init;return _(x._payload)}function M9(x){function _(je,ze){if(x){var Ze=je.deletions;Ze===null?(je.deletions=[ze],je.flags|=16):Ze.push(ze)}}function B(je,ze){if(!x)return null;for(;ze!==null;)_(je,ze),ze=ze.sibling;return null}function P(je,ze){for(je=new Map;ze!==null;)ze.key!==null?je.set(ze.key,ze):je.set(ze.index,ze),ze=ze.sibling;return je}function N(je,ze){return je=eu(je,ze),je.index=0,je.sibling=null,je}function K(je,ze,Ze){return je.index=Ze,x?(Ze=je.alternate,Ze!==null?(Ze=Ze.index,Ze<ze?(je.flags|=2,ze):Ze):(je.flags|=2,ze)):(je.flags|=1048576,ze)}function ge(je){return x&&je.alternate===null&&(je.flags|=2),je}function Le(je,ze,Ze,Dt){return ze===null||ze.tag!==6?(ze=E4(Ze,je.mode,Dt),ze.return=je,ze):(ze=N(ze,Ze),ze.return=je,ze)}function nt(je,ze,Ze,Dt){var Wt=Ze.type;return Wt===u?Ut(je,ze,Ze.props.children,Dt,Ze.key):ze!==null&&(ze.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===y&&b9(Wt)===ze.type)?(Dt=N(ze,Ze.props),Dt.ref=I0(je,ze,Ze),Dt.return=je,Dt):(Dt=xy(Ze.type,Ze.key,Ze.props,null,je.mode,Dt),Dt.ref=I0(je,ze,Ze),Dt.return=je,Dt)}function xt(je,ze,Ze,Dt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==Ze.containerInfo||ze.stateNode.implementation!==Ze.implementation?(ze=w4(Ze,je.mode,Dt),ze.return=je,ze):(ze=N(ze,Ze.children||[]),ze.return=je,ze)}function Ut(je,ze,Ze,Dt,Wt){return ze===null||ze.tag!==7?(ze=Uf(Ze,je.mode,Dt,Wt),ze.return=je,ze):(ze=N(ze,Ze),ze.return=je,ze)}function xn(je,ze,Ze){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=E4(""+ze,je.mode,Ze),ze.return=je,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return Ze=xy(ze.type,ze.key,ze.props,null,je.mode,Ze),Ze.ref=I0(je,null,ze),Ze.return=je,Ze;case c:return ze=w4(ze,je.mode,Ze),ze.return=je,ze;case y:var Dt=ze._init;return xn(je,Dt(ze._payload),Ze)}if(H(ze)||C(ze))return ze=Uf(ze,je.mode,Ze,null),ze.return=je,ze;Qv(je,ze)}return null}function nn(je,ze,Ze,Dt){var Wt=ze!==null?ze.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Wt!==null?null:Le(je,ze,""+Ze,Dt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case l:return Ze.key===Wt?nt(je,ze,Ze,Dt):null;case c:return Ze.key===Wt?xt(je,ze,Ze,Dt):null;case y:return Wt=Ze._init,nn(je,ze,Wt(Ze._payload),Dt)}if(H(Ze)||C(Ze))return Wt!==null?null:Ut(je,ze,Ze,Dt,null);Qv(je,Ze)}return null}function pi(je,ze,Ze,Dt,Wt){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number")return je=je.get(Ze)||null,Le(ze,je,""+Dt,Wt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case l:return je=je.get(Dt.key===null?Ze:Dt.key)||null,nt(ze,je,Dt,Wt);case c:return je=je.get(Dt.key===null?Ze:Dt.key)||null,xt(ze,je,Dt,Wt);case y:var Mn=Dt._init;return pi(je,ze,Ze,Mn(Dt._payload),Wt)}if(H(Dt)||C(Dt))return je=je.get(Ze)||null,Ut(ze,je,Dt,Wt,null);Qv(ze,Dt)}return null}function Yt(je,ze,Ze,Dt){for(var Wt=null,Mn=null,_n=ze,$n=ze=0,zr=null;_n!==null&&$n<Ze.length;$n++){_n.index>$n?(zr=_n,_n=null):zr=_n.sibling;var Zn=nn(je,_n,Ze[$n],Dt);if(Zn===null){_n===null&&(_n=zr);break}x&&_n&&Zn.alternate===null&&_(je,_n),ze=K(Zn,ze,$n),Mn===null?Wt=Zn:Mn.sibling=Zn,Mn=Zn,_n=zr}if($n===Ze.length)return B(je,_n),Ri&&Pf(je,$n),Wt;if(_n===null){for(;$n<Ze.length;$n++)_n=xn(je,Ze[$n],Dt),_n!==null&&(ze=K(_n,ze,$n),Mn===null?Wt=_n:Mn.sibling=_n,Mn=_n);return Ri&&Pf(je,$n),Wt}for(_n=P(je,_n);$n<Ze.length;$n++)zr=pi(_n,je,$n,Ze[$n],Dt),zr!==null&&(x&&zr.alternate!==null&&_n.delete(zr.key===null?$n:zr.key),ze=K(zr,ze,$n),Mn===null?Wt=zr:Mn.sibling=zr,Mn=zr);return x&&_n.forEach(function(tu){return _(je,tu)}),Ri&&Pf(je,$n),Wt}function as(je,ze,Ze,Dt){var Wt=C(Ze);if(typeof Wt!="function")throw Error(o(150));if(Ze=Wt.call(Ze),Ze==null)throw Error(o(151));for(var Mn=Wt=null,_n=ze,$n=ze=0,zr=null,Zn=Ze.next();_n!==null&&!Zn.done;$n++,Zn=Ze.next()){_n.index>$n?(zr=_n,_n=null):zr=_n.sibling;var tu=nn(je,_n,Zn.value,Dt);if(tu===null){_n===null&&(_n=zr);break}x&&_n&&tu.alternate===null&&_(je,_n),ze=K(tu,ze,$n),Mn===null?Wt=tu:Mn.sibling=tu,Mn=tu,_n=zr}if(Zn.done)return B(je,_n),Ri&&Pf(je,$n),Wt;if(_n===null){for(;!Zn.done;$n++,Zn=Ze.next())Zn=xn(je,Zn.value,Dt),Zn!==null&&(ze=K(Zn,ze,$n),Mn===null?Wt=Zn:Mn.sibling=Zn,Mn=Zn);return Ri&&Pf(je,$n),Wt}for(_n=P(je,_n);!Zn.done;$n++,Zn=Ze.next())Zn=pi(_n,je,$n,Zn.value,Dt),Zn!==null&&(x&&Zn.alternate!==null&&_n.delete(Zn.key===null?$n:Zn.key),ze=K(Zn,ze,$n),Mn===null?Wt=Zn:Mn.sibling=Zn,Mn=Zn);return x&&_n.forEach(function(sq){return _(je,sq)}),Ri&&Pf(je,$n),Wt}function ko(je,ze,Ze,Dt){if(typeof Ze=="object"&&Ze!==null&&Ze.type===u&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case l:e:{for(var Wt=Ze.key,Mn=ze;Mn!==null;){if(Mn.key===Wt){if(Wt=Ze.type,Wt===u){if(Mn.tag===7){B(je,Mn.sibling),ze=N(Mn,Ze.props.children),ze.return=je,je=ze;break e}}else if(Mn.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===y&&b9(Wt)===Mn.type){B(je,Mn.sibling),ze=N(Mn,Ze.props),ze.ref=I0(je,Mn,Ze),ze.return=je,je=ze;break e}B(je,Mn);break}else _(je,Mn);Mn=Mn.sibling}Ze.type===u?(ze=Uf(Ze.props.children,je.mode,Dt,Ze.key),ze.return=je,je=ze):(Dt=xy(Ze.type,Ze.key,Ze.props,null,je.mode,Dt),Dt.ref=I0(je,ze,Ze),Dt.return=je,je=Dt)}return ge(je);case c:e:{for(Mn=Ze.key;ze!==null;){if(ze.key===Mn)if(ze.tag===4&&ze.stateNode.containerInfo===Ze.containerInfo&&ze.stateNode.implementation===Ze.implementation){B(je,ze.sibling),ze=N(ze,Ze.children||[]),ze.return=je,je=ze;break e}else{B(je,ze);break}else _(je,ze);ze=ze.sibling}ze=w4(Ze,je.mode,Dt),ze.return=je,je=ze}return ge(je);case y:return Mn=Ze._init,ko(je,ze,Mn(Ze._payload),Dt)}if(H(Ze))return Yt(je,ze,Ze,Dt);if(C(Ze))return as(je,ze,Ze,Dt);Qv(je,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"?(Ze=""+Ze,ze!==null&&ze.tag===6?(B(je,ze.sibling),ze=N(ze,Ze),ze.return=je,je=ze):(B(je,ze),ze=E4(Ze,je.mode,Dt),ze.return=je,je=ze),ge(je)):B(je,ze)}return ko}var vd=M9(!0),I9=M9(!1),T0={},Fo=Pt(T0),B0=Pt(T0),yd=Pt(T0);function cl(x){if(x===T0)throw Error(o(174));return x}function Nw(x,_){kt(yd,_),kt(B0,x),kt(Fo,T0),x=Z(_),Zt(Fo),kt(Fo,x)}function xd(){Zt(Fo),Zt(B0),Zt(yd)}function T9(x){var _=cl(yd.current),B=cl(Fo.current);_=U(B,x.type,_),B!==_&&(kt(B0,x),kt(Fo,_))}function Gw(x){B0.current===x&&(Zt(Fo),Zt(B0))}var Ui=Pt(0);function Vv(x){for(var _=x;_!==null;){if(_.tag===13){var B=_.memoizedState;if(B!==null&&(B=B.dehydrated,B===null||Ht(B)||zt(B)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===x)break;for(;_.sibling===null;){if(_.return===null||_.return===x)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Hw=[];function Qw(){for(var x=0;x<Hw.length;x++){var _=Hw[x];pe?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}Hw.length=0}var jv=a.ReactCurrentDispatcher,Oo=a.ReactCurrentBatchConfig,_d=0,Yi=null,rs=null,Or=null,Wv=!1,P0=!1,R0=0,BX=0;function ss(){throw Error(o(321))}function Vw(x,_){if(_===null)return!1;for(var B=0;B<_.length&&B<x.length;B++)if(!ao(x[B],_[B]))return!1;return!0}function jw(x,_,B,P,N,K){if(_d=K,Yi=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,jv.current=x===null||x.memoizedState===null?LX:FX,x=B(P,N),P0){K=0;do{if(P0=!1,R0=0,25<=K)throw Error(o(301));K+=1,Or=rs=null,_.updateQueue=null,jv.current=OX,x=B(P,N)}while(P0)}if(jv.current=Kv,_=rs!==null&&rs.next!==null,_d=0,Or=rs=Yi=null,Wv=!1,_)throw Error(o(300));return x}function Ww(){var x=R0!==0;return R0=0,x}function Jl(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?Yi.memoizedState=Or=x:Or=Or.next=x,Or}function ul(){if(rs===null){var x=Yi.alternate;x=x!==null?x.memoizedState:null}else x=rs.next;var _=Or===null?Yi.memoizedState:Or.next;if(_!==null)Or=_,rs=x;else{if(x===null)throw Error(o(310));rs=x,x={memoizedState:rs.memoizedState,baseState:rs.baseState,baseQueue:rs.baseQueue,queue:rs.queue,next:null},Or===null?Yi.memoizedState=Or=x:Or=Or.next=x}return Or}function Rf(x,_){return typeof _=="function"?_(x):_}function Yv(x){var _=ul(),B=_.queue;if(B===null)throw Error(o(311));B.lastRenderedReducer=x;var P=rs,N=P.baseQueue,K=B.pending;if(K!==null){if(N!==null){var ge=N.next;N.next=K.next,K.next=ge}P.baseQueue=N=K,B.pending=null}if(N!==null){K=N.next,P=P.baseState;var Le=ge=null,nt=null,xt=K;do{var Ut=xt.lane;if((_d&Ut)===Ut)nt!==null&&(nt=nt.next={lane:0,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null}),P=xt.hasEagerState?xt.eagerState:x(P,xt.action);else{var xn={lane:Ut,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null};nt===null?(Le=nt=xn,ge=P):nt=nt.next=xn,Yi.lanes|=Ut,wd|=Ut}xt=xt.next}while(xt!==null&&xt!==K);nt===null?ge=P:nt.next=Le,ao(P,_.memoizedState)||(fo=!0),_.memoizedState=P,_.baseState=ge,_.baseQueue=nt,B.lastRenderedState=P}if(x=B.interleaved,x!==null){N=x;do K=N.lane,Yi.lanes|=K,wd|=K,N=N.next;while(N!==x)}else N===null&&(B.lanes=0);return[_.memoizedState,B.dispatch]}function Xv(x){var _=ul(),B=_.queue;if(B===null)throw Error(o(311));B.lastRenderedReducer=x;var P=B.dispatch,N=B.pending,K=_.memoizedState;if(N!==null){B.pending=null;var ge=N=N.next;do K=x(K,ge.action),ge=ge.next;while(ge!==N);ao(K,_.memoizedState)||(fo=!0),_.memoizedState=K,_.baseQueue===null&&(_.baseState=K),B.lastRenderedState=K}return[K,P]}function B9(){}function P9(x,_){var B=Yi,P=ul(),N=_(),K=!ao(P.memoizedState,N);if(K&&(P.memoizedState=N,fo=!0),P=P.queue,L0(L9.bind(null,B,P,x),[x]),P.getSnapshot!==_||K||Or!==null&&Or.memoizedState.tag&1){if(B.flags|=2048,D0(9,D9.bind(null,B,P,N,_),void 0,null),fr===null)throw Error(o(349));_d&30||R9(B,_,N)}return N}function R9(x,_,B){x.flags|=16384,x={getSnapshot:_,value:B},_=Yi.updateQueue,_===null?(_={lastEffect:null,stores:null},Yi.updateQueue=_,_.stores=[x]):(B=_.stores,B===null?_.stores=[x]:B.push(x))}function D9(x,_,B,P){_.value=B,_.getSnapshot=P,F9(_)&&zo(x,1,-1)}function L9(x,_,B){return B(function(){F9(_)&&zo(x,1,-1)})}function F9(x){var _=x.getSnapshot;x=x.value;try{var B=_();return!ao(x,B)}catch{return!0}}function Yw(x){var _=Jl();return typeof x=="function"&&(x=x()),_.memoizedState=_.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rf,lastRenderedState:x},_.queue=x,x=x.dispatch=DX.bind(null,Yi,x),[_.memoizedState,x]}function D0(x,_,B,P){return x={tag:x,create:_,destroy:B,deps:P,next:null},_=Yi.updateQueue,_===null?(_={lastEffect:null,stores:null},Yi.updateQueue=_,_.lastEffect=x.next=x):(B=_.lastEffect,B===null?_.lastEffect=x.next=x:(P=B.next,B.next=x,x.next=P,_.lastEffect=x)),x}function O9(){return ul().memoizedState}function qv(x,_,B,P){var N=Jl();Yi.flags|=x,N.memoizedState=D0(1|_,B,void 0,P===void 0?null:P)}function Jv(x,_,B,P){var N=ul();P=P===void 0?null:P;var K=void 0;if(rs!==null){var ge=rs.memoizedState;if(K=ge.destroy,P!==null&&Vw(P,ge.deps)){N.memoizedState=D0(_,B,K,P);return}}Yi.flags|=x,N.memoizedState=D0(1|_,B,K,P)}function Xw(x,_){return qv(8390656,8,x,_)}function L0(x,_){return Jv(2048,8,x,_)}function z9(x,_){return Jv(4,2,x,_)}function U9(x,_){return Jv(4,4,x,_)}function k9(x,_){if(typeof _=="function")return x=x(),_(x),function(){_(null)};if(_!=null)return x=x(),_.current=x,function(){_.current=null}}function N9(x,_,B){return B=B!=null?B.concat([x]):null,Jv(4,4,k9.bind(null,_,x),B)}function qw(){}function G9(x,_){var B=ul();_=_===void 0?null:_;var P=B.memoizedState;return P!==null&&_!==null&&Vw(_,P[1])?P[0]:(B.memoizedState=[x,_],x)}function H9(x,_){var B=ul();_=_===void 0?null:_;var P=B.memoizedState;return P!==null&&_!==null&&Vw(_,P[1])?P[0]:(x=x(),B.memoizedState=[x,_],x)}function PX(x,_){var B=Rn;Rn=B!==0&&4>B?B:4,x(!0);var P=Oo.transition;Oo.transition={};try{x(!1),_()}finally{Rn=B,Oo.transition=P}}function Q9(){return ul().memoizedState}function RX(x,_,B){var P=$c(x);B={lane:P,action:B,hasEagerState:!1,eagerState:null,next:null},V9(x)?j9(_,B):(W9(x,_,B),B=Es(),x=zo(x,P,B),x!==null&&Y9(x,_,P))}function DX(x,_,B){var P=$c(x),N={lane:P,action:B,hasEagerState:!1,eagerState:null,next:null};if(V9(x))j9(_,N);else{W9(x,_,N);var K=x.alternate;if(x.lanes===0&&(K===null||K.lanes===0)&&(K=_.lastRenderedReducer,K!==null))try{var ge=_.lastRenderedState,Le=K(ge,B);if(N.hasEagerState=!0,N.eagerState=Le,ao(Le,ge))return}catch{}finally{}B=Es(),x=zo(x,P,B),x!==null&&Y9(x,_,P)}}function V9(x){var _=x.alternate;return x===Yi||_!==null&&_===Yi}function j9(x,_){P0=Wv=!0;var B=x.pending;B===null?_.next=_:(_.next=B.next,B.next=_),x.pending=_}function W9(x,_,B){fr!==null&&x.mode&1&&!(Bn&2)?(x=_.interleaved,x===null?(B.next=B,lo===null?lo=[_]:lo.push(_)):(B.next=x.next,x.next=B),_.interleaved=B):(x=_.pending,x===null?B.next=B:(B.next=x.next,x.next=B),_.pending=B)}function Y9(x,_,B){if(B&4194240){var P=_.lanes;P&=x.pendingLanes,B|=P,_.lanes=B,al(x,B)}}var Kv={readContext:sr,useCallback:ss,useContext:ss,useEffect:ss,useImperativeHandle:ss,useInsertionEffect:ss,useLayoutEffect:ss,useMemo:ss,useReducer:ss,useRef:ss,useState:ss,useDebugValue:ss,useDeferredValue:ss,useTransition:ss,useMutableSource:ss,useSyncExternalStore:ss,useId:ss,unstable_isNewReconciler:!1},LX={readContext:sr,useCallback:function(x,_){return Jl().memoizedState=[x,_===void 0?null:_],x},useContext:sr,useEffect:Xw,useImperativeHandle:function(x,_,B){return B=B!=null?B.concat([x]):null,qv(4194308,4,k9.bind(null,_,x),B)},useLayoutEffect:function(x,_){return qv(4194308,4,x,_)},useInsertionEffect:function(x,_){return qv(4,2,x,_)},useMemo:function(x,_){var B=Jl();return _=_===void 0?null:_,x=x(),B.memoizedState=[x,_],x},useReducer:function(x,_,B){var P=Jl();return _=B!==void 0?B(_):_,P.memoizedState=P.baseState=_,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:_},P.queue=x,x=x.dispatch=RX.bind(null,Yi,x),[P.memoizedState,x]},useRef:function(x){var _=Jl();return x={current:x},_.memoizedState=x},useState:Yw,useDebugValue:qw,useDeferredValue:function(x){var _=Yw(x),B=_[0],P=_[1];return Xw(function(){var N=Oo.transition;Oo.transition={};try{P(x)}finally{Oo.transition=N}},[x]),B},useTransition:function(){var x=Yw(!1),_=x[0];return x=PX.bind(null,x[1]),Jl().memoizedState=x,[_,x]},useMutableSource:function(){},useSyncExternalStore:function(x,_,B){var P=Yi,N=Jl();if(Ri){if(B===void 0)throw Error(o(407));B=B()}else{if(B=_(),fr===null)throw Error(o(349));_d&30||R9(P,_,B)}N.memoizedState=B;var K={value:B,getSnapshot:_};return N.queue=K,Xw(L9.bind(null,P,K,x),[x]),P.flags|=2048,D0(9,D9.bind(null,P,K,B,_),void 0,null),B},useId:function(){var x=Jl(),_=fr.identifierPrefix;if(Ri){var B=ql,P=Xl;B=(P&~(1<<32-vi(P)-1)).toString(32)+B,_=":"+_+"R"+B,B=R0++,0<B&&(_+="H"+B.toString(32)),_+=":"}else B=BX++,_=":"+_+"r"+B.toString(32)+":";return x.memoizedState=_},unstable_isNewReconciler:!1},FX={readContext:sr,useCallback:G9,useContext:sr,useEffect:L0,useImperativeHandle:N9,useInsertionEffect:z9,useLayoutEffect:U9,useMemo:H9,useReducer:Yv,useRef:O9,useState:function(){return Yv(Rf)},useDebugValue:qw,useDeferredValue:function(x){var _=Yv(Rf),B=_[0],P=_[1];return L0(function(){var N=Oo.transition;Oo.transition={};try{P(x)}finally{Oo.transition=N}},[x]),B},useTransition:function(){var x=Yv(Rf)[0],_=ul().memoizedState;return[x,_]},useMutableSource:B9,useSyncExternalStore:P9,useId:Q9,unstable_isNewReconciler:!1},OX={readContext:sr,useCallback:G9,useContext:sr,useEffect:L0,useImperativeHandle:N9,useInsertionEffect:z9,useLayoutEffect:U9,useMemo:H9,useReducer:Xv,useRef:O9,useState:function(){return Xv(Rf)},useDebugValue:qw,useDeferredValue:function(x){var _=Xv(Rf),B=_[0],P=_[1];return L0(function(){var N=Oo.transition;Oo.transition={};try{P(x)}finally{Oo.transition=N}},[x]),B},useTransition:function(){var x=Xv(Rf)[0],_=ul().memoizedState;return[x,_]},useMutableSource:B9,useSyncExternalStore:P9,useId:Q9,unstable_isNewReconciler:!1};function Jw(x,_){try{var B="",P=_;do B+=Tf(P),P=P.return;while(P);var N=B}catch(K){N=`
Error generating stack: `+K.message+`
`+K.stack}return{value:x,source:_,stack:N}}function Kw(x,_){try{console.error(_.value)}catch(B){setTimeout(function(){throw B})}}var zX=typeof WeakMap=="function"?WeakMap:Map;function X9(x,_,B){B=Yl(-1,B),B.tag=3,B.payload={element:null};var P=_.value;return B.callback=function(){dy||(dy=!0,m4=P),Kw(x,_)},B}function q9(x,_,B){B=Yl(-1,B),B.tag=3;var P=x.type.getDerivedStateFromError;if(typeof P=="function"){var N=_.value;B.payload=function(){return P(N)},B.callback=function(){Kw(x,_)}}var K=x.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(B.callback=function(){Kw(x,_),typeof P!="function"&&(Jc===null?Jc=new Set([this]):Jc.add(this));var ge=_.stack;this.componentDidCatch(_.value,{componentStack:ge!==null?ge:""})}),B}function J9(x,_,B){var P=x.pingCache;if(P===null){P=x.pingCache=new zX;var N=new Set;P.set(_,N)}else N=P.get(_),N===void 0&&(N=new Set,P.set(_,N));N.has(B)||(N.add(B),x=KX.bind(null,x,_,B),_.then(x,x))}function K9(x){do{var _;if((_=x.tag===13)&&(_=x.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return x;x=x.return}while(x!==null);return null}function $9(x,_,B,P,N){return x.mode&1?(x.flags|=65536,x.lanes=N,x):(x===_?x.flags|=65536:(x.flags|=128,B.flags|=131072,B.flags&=-52805,B.tag===1&&(B.alternate===null?B.tag=17:(_=Yl(-1,1),_.tag=2,qc(B,_))),B.lanes|=1),x)}function fl(x){x.flags|=4}function Z9(x,_){if(x!==null&&x.child===_.child)return!0;if(_.flags&16)return!1;for(x=_.child;x!==null;){if(x.flags&12854||x.subtreeFlags&12854)return!1;x=x.sibling}return!0}var F0,O0,$v,Zv;if(de)F0=function(x,_){for(var B=_.child;B!==null;){if(B.tag===5||B.tag===6)W(x,B.stateNode);else if(B.tag!==4&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===_)break;for(;B.sibling===null;){if(B.return===null||B.return===_)return;B=B.return}B.sibling.return=B.return,B=B.sibling}},O0=function(){},$v=function(x,_,B,P,N){if(x=x.memoizedProps,x!==P){var K=_.stateNode,ge=cl(Fo.current);B=k(K,B,x,P,N,ge),(_.updateQueue=B)&&fl(_)}},Zv=function(x,_,B,P){B!==P&&fl(_)};else if(te){F0=function(x,_,B,P){for(var N=_.child;N!==null;){if(N.tag===5){var K=N.stateNode;B&&P&&(K=qe(K,N.type,N.memoizedProps,N)),W(x,K)}else if(N.tag===6)K=N.stateNode,B&&P&&(K=ut(K,N.memoizedProps,N)),W(x,K);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)K=N.child,K!==null&&(K.return=N),F0(x,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===_)break;for(;N.sibling===null;){if(N.return===null||N.return===_)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var eB=function(x,_,B,P){for(var N=_.child;N!==null;){if(N.tag===5){var K=N.stateNode;B&&P&&(K=qe(K,N.type,N.memoizedProps,N)),we(x,K)}else if(N.tag===6)K=N.stateNode,B&&P&&(K=ut(K,N.memoizedProps,N)),we(x,K);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)K=N.child,K!==null&&(K.return=N),eB(x,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===_)break;for(;N.sibling===null;){if(N.return===null||N.return===_)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};O0=function(x,_){var B=_.stateNode;if(!Z9(x,_)){x=B.containerInfo;var P=yt(x);eB(P,_,!1,!1),B.pendingChildren=P,fl(_),Ie(x,P)}},$v=function(x,_,B,P,N){var K=x.stateNode,ge=x.memoizedProps;if((x=Z9(x,_))&&ge===P)_.stateNode=K;else{var Le=_.stateNode,nt=cl(Fo.current),xt=null;ge!==P&&(xt=k(Le,B,ge,P,N,nt)),x&&xt===null?_.stateNode=K:(K=ot(K,xt,B,ge,P,_,x,Le),$(K,B,P,N,nt)&&fl(_),_.stateNode=K,x?fl(_):F0(K,_,!1,!1))}},Zv=function(x,_,B,P){B!==P?(x=cl(yd.current),B=cl(Fo.current),_.stateNode=Q(P,x,B,_),fl(_)):_.stateNode=x.stateNode}}else O0=function(){},$v=function(){},Zv=function(){};function z0(x,_){if(!Ri)switch(x.tailMode){case"hidden":_=x.tail;for(var B=null;_!==null;)_.alternate!==null&&(B=_),_=_.sibling;B===null?x.tail=null:B.sibling=null;break;case"collapsed":B=x.tail;for(var P=null;B!==null;)B.alternate!==null&&(P=B),B=B.sibling;P===null?_||x.tail===null?x.tail=null:x.tail.sibling=null:P.sibling=null}}function os(x){var _=x.alternate!==null&&x.alternate.child===x.child,B=0,P=0;if(_)for(var N=x.child;N!==null;)B|=N.lanes|N.childLanes,P|=N.subtreeFlags&14680064,P|=N.flags&14680064,N.return=x,N=N.sibling;else for(N=x.child;N!==null;)B|=N.lanes|N.childLanes,P|=N.subtreeFlags,P|=N.flags,N.return=x,N=N.sibling;return x.subtreeFlags|=P,x.childLanes=B,_}function UX(x,_,B){var P=_.pendingProps;switch(Ow(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(_),null;case 1:return Kn(_.type)&&ui(),os(_),null;case 3:return P=_.stateNode,xd(),Zt(on),Zt(Yn),Qw(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(x===null||x.child===null)&&(M0(_)?fl(_):x===null||x.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,wa!==null&&(v4(wa),wa=null))),O0(x,_),os(_),null;case 5:Gw(_),B=cl(yd.current);var N=_.type;if(x!==null&&_.stateNode!=null)$v(x,_,N,P,B),x.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!P){if(_.stateNode===null)throw Error(o(166));return os(_),null}if(x=cl(Fo.current),M0(_)){if(!Ee)throw Error(o(175));x=ne(_.stateNode,_.type,_.memoizedProps,B,x,_,!b0),_.updateQueue=x,x!==null&&fl(_)}else{var K=O(N,P,B,x,_);F0(K,_,!1,!1),_.stateNode=K,$(K,N,P,B,x)&&fl(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return os(_),null;case 6:if(x&&_.stateNode!=null)Zv(x,_,x.memoizedProps,P);else{if(typeof P!="string"&&_.stateNode===null)throw Error(o(166));if(x=cl(yd.current),B=cl(Fo.current),M0(_)){if(!Ee)throw Error(o(176));if(x=_.stateNode,P=_.memoizedProps,(B=G(x,P,_,!b0))&&(N=co,N!==null))switch(K=(N.mode&1)!==0,N.tag){case 3:Ne(N.stateNode.containerInfo,x,P,K);break;case 5:Je(N.type,N.memoizedProps,N.stateNode,x,P,K)}B&&fl(_)}else _.stateNode=Q(P,x,B,_)}return os(_),null;case 13:if(Zt(Ui),P=_.memoizedState,Ri&&uo!==null&&_.mode&1&&!(_.flags&128)){for(x=uo;x;)x=wn(x);return Ad(),_.flags|=98560,_}if(P!==null&&P.dehydrated!==null){if(P=M0(_),x===null){if(!P)throw Error(o(318));if(!Ee)throw Error(o(344));if(x=_.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));re(x,_)}else Ad(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;return os(_),null}return wa!==null&&(v4(wa),wa=null),_.flags&128?(_.lanes=B,_):(P=P!==null,B=!1,x===null?M0(_):B=x.memoizedState!==null,P&&!B&&(_.child.flags|=8192,_.mode&1&&(x===null||Ui.current&1?Er===0&&(Er=3):x4())),_.updateQueue!==null&&(_.flags|=4),os(_),null);case 4:return xd(),O0(x,_),x===null&&ve(_.stateNode.containerInfo),os(_),null;case 10:return Fr(_.type._context),os(_),null;case 17:return Kn(_.type)&&ui(),os(_),null;case 19:if(Zt(Ui),N=_.memoizedState,N===null)return os(_),null;if(P=(_.flags&128)!==0,K=N.rendering,K===null)if(P)z0(N,!1);else{if(Er!==0||x!==null&&x.flags&128)for(x=_.child;x!==null;){if(K=Vv(x),K!==null){for(_.flags|=128,z0(N,!1),x=K.updateQueue,x!==null&&(_.updateQueue=x,_.flags|=4),_.subtreeFlags=0,x=B,P=_.child;P!==null;)B=P,N=x,B.flags&=14680066,K=B.alternate,K===null?(B.childLanes=0,B.lanes=N,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=K.childLanes,B.lanes=K.lanes,B.child=K.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=K.memoizedProps,B.memoizedState=K.memoizedState,B.updateQueue=K.updateQueue,B.type=K.type,N=K.dependencies,B.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),P=P.sibling;return kt(Ui,Ui.current&1|2),_.child}x=x.sibling}N.tail!==null&&zi()>p4&&(_.flags|=128,P=!0,z0(N,!1),_.lanes=4194304)}else{if(!P)if(x=Vv(K),x!==null){if(_.flags|=128,P=!0,x=x.updateQueue,x!==null&&(_.updateQueue=x,_.flags|=4),z0(N,!0),N.tail===null&&N.tailMode==="hidden"&&!K.alternate&&!Ri)return os(_),null}else 2*zi()-N.renderingStartTime>p4&&B!==1073741824&&(_.flags|=128,P=!0,z0(N,!1),_.lanes=4194304);N.isBackwards?(K.sibling=_.child,_.child=K):(x=N.last,x!==null?x.sibling=K:_.child=K,N.last=K)}return N.tail!==null?(_=N.tail,N.rendering=_,N.tail=_.sibling,N.renderingStartTime=zi(),_.sibling=null,x=Ui.current,kt(Ui,P?x&1|2:x&1),_):(os(_),null);case 22:case 23:return y4(),P=_.memoizedState!==null,x!==null&&x.memoizedState!==null!==P&&(_.flags|=8192),P&&_.mode&1?ho&1073741824&&(os(_),de&&_.subtreeFlags&6&&(_.flags|=8192)):os(_),null;case 24:return null;case 25:return null}throw Error(o(156,_.tag))}var kX=a.ReactCurrentOwner,fo=!1;function _s(x,_,B,P){_.child=x===null?I9(_,null,B,P):vd(_,x.child,B,P)}function tB(x,_,B,P,N){B=B.render;var K=_.ref;return rr(_,N),P=jw(x,_,B,P,K,N),B=Ww(),x!==null&&!fo?(_.updateQueue=x.updateQueue,_.flags&=-2053,x.lanes&=~N,Kl(x,_,N)):(Ri&&B&&Fw(_),_.flags|=1,_s(x,_,P,N),_.child)}function nB(x,_,B,P,N){if(x===null){var K=B.type;return typeof K=="function"&&!_4(K)&&K.defaultProps===void 0&&B.compare===null&&B.defaultProps===void 0?(_.tag=15,_.type=K,iB(x,_,K,P,N)):(x=xy(B.type,null,P,_,_.mode,N),x.ref=_.ref,x.return=_,_.child=x)}if(K=x.child,!(x.lanes&N)){var ge=K.memoizedProps;if(B=B.compare,B=B!==null?B:If,B(ge,P)&&x.ref===_.ref)return Kl(x,_,N)}return _.flags|=1,x=eu(K,P),x.ref=_.ref,x.return=_,_.child=x}function iB(x,_,B,P,N){if(x!==null&&If(x.memoizedProps,P)&&x.ref===_.ref)if(fo=!1,(x.lanes&N)!==0)x.flags&131072&&(fo=!0);else return _.lanes=x.lanes,Kl(x,_,N);return $w(x,_,B,P,N)}function rB(x,_,B){var P=_.pendingProps,N=P.children,K=x!==null?x.memoizedState:null;if(P.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null},kt(Ed,ho),ho|=B;else if(B&1073741824)_.memoizedState={baseLanes:0,cachePool:null},P=K!==null?K.baseLanes:B,kt(Ed,ho),ho|=P;else return x=K!==null?K.baseLanes|B:B,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:x,cachePool:null},_.updateQueue=null,kt(Ed,ho),ho|=x,null;else K!==null?(P=K.baseLanes|B,_.memoizedState=null):P=B,kt(Ed,ho),ho|=P;return _s(x,_,N,B),_.child}function sB(x,_){var B=_.ref;(x===null&&B!==null||x!==null&&x.ref!==B)&&(_.flags|=512,_.flags|=2097152)}function $w(x,_,B,P,N){var K=Kn(B)?Xn:Yn.current;return K=Pn(_,K),rr(_,N),B=jw(x,_,B,P,K,N),P=Ww(),x!==null&&!fo?(_.updateQueue=x.updateQueue,_.flags&=-2053,x.lanes&=~N,Kl(x,_,N)):(Ri&&P&&Fw(_),_.flags|=1,_s(x,_,B,N),_.child)}function oB(x,_,B,P,N){if(Kn(B)){var K=!0;Hn(_)}else K=!1;if(rr(_,N),_.stateNode===null)x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),x9(_,B,P),Lw(_,B,P,N),P=!0;else if(x===null){var ge=_.stateNode,Le=_.memoizedProps;ge.props=Le;var nt=ge.context,xt=B.contextType;typeof xt=="object"&&xt!==null?xt=sr(xt):(xt=Kn(B)?Xn:Yn.current,xt=Pn(_,xt));var Ut=B.getDerivedStateFromProps,xn=typeof Ut=="function"||typeof ge.getSnapshotBeforeUpdate=="function";xn||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Le!==P||nt!==xt)&&_9(_,ge,P,xt),Xc=!1;var nn=_.memoizedState;ge.state=nn,kv(_,P,ge,N),nt=_.memoizedState,Le!==P||nn!==nt||on.current||Xc?(typeof Ut=="function"&&(Dw(_,B,Ut,P),nt=_.memoizedState),(Le=Xc||y9(_,B,Le,P,nn,nt,xt))?(xn||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount()),typeof ge.componentDidMount=="function"&&(_.flags|=4194308)):(typeof ge.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=P,_.memoizedState=nt),ge.props=P,ge.state=nt,ge.context=xt,P=Le):(typeof ge.componentDidMount=="function"&&(_.flags|=4194308),P=!1)}else{ge=_.stateNode,m9(x,_),Le=_.memoizedProps,xt=_.type===_.elementType?Le:ys(_.type,Le),ge.props=xt,xn=_.pendingProps,nn=ge.context,nt=B.contextType,typeof nt=="object"&&nt!==null?nt=sr(nt):(nt=Kn(B)?Xn:Yn.current,nt=Pn(_,nt));var pi=B.getDerivedStateFromProps;(Ut=typeof pi=="function"||typeof ge.getSnapshotBeforeUpdate=="function")||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Le!==xn||nn!==nt)&&_9(_,ge,P,nt),Xc=!1,nn=_.memoizedState,ge.state=nn,kv(_,P,ge,N);var Yt=_.memoizedState;Le!==xn||nn!==Yt||on.current||Xc?(typeof pi=="function"&&(Dw(_,B,pi,P),Yt=_.memoizedState),(xt=Xc||y9(_,B,xt,P,nn,Yt,nt)||!1)?(Ut||typeof ge.UNSAFE_componentWillUpdate!="function"&&typeof ge.componentWillUpdate!="function"||(typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate(P,Yt,nt),typeof ge.UNSAFE_componentWillUpdate=="function"&&ge.UNSAFE_componentWillUpdate(P,Yt,nt)),typeof ge.componentDidUpdate=="function"&&(_.flags|=4),typeof ge.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof ge.componentDidUpdate!="function"||Le===x.memoizedProps&&nn===x.memoizedState||(_.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Le===x.memoizedProps&&nn===x.memoizedState||(_.flags|=1024),_.memoizedProps=P,_.memoizedState=Yt),ge.props=P,ge.state=Yt,ge.context=nt,P=xt):(typeof ge.componentDidUpdate!="function"||Le===x.memoizedProps&&nn===x.memoizedState||(_.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Le===x.memoizedProps&&nn===x.memoizedState||(_.flags|=1024),P=!1)}return Zw(x,_,B,P,K,N)}function Zw(x,_,B,P,N,K){sB(x,_);var ge=(_.flags&128)!==0;if(!P&&!ge)return N&&pn(_,B,!1),Kl(x,_,K);P=_.stateNode,kX.current=_;var Le=ge&&typeof B.getDerivedStateFromError!="function"?null:P.render();return _.flags|=1,x!==null&&ge?(_.child=vd(_,x.child,null,K),_.child=vd(_,null,Le,K)):_s(x,_,Le,K),_.memoizedState=P.state,N&&pn(_,B,!0),_.child}function aB(x){var _=x.stateNode;_.pendingContext?cn(x,_.pendingContext,_.pendingContext!==_.context):_.context&&cn(x,_.context,!1),Nw(x,_.containerInfo)}function lB(x,_,B,P,N){return Ad(),kw(N),_.flags|=256,_s(x,_,B,P),_.child}var ey={dehydrated:null,treeContext:null,retryLane:0};function ty(x){return{baseLanes:x,cachePool:null}}function cB(x,_,B){var P=_.pendingProps,N=Ui.current,K=!1,ge=(_.flags&128)!==0,Le;if((Le=ge)||(Le=x!==null&&x.memoizedState===null?!1:(N&2)!==0),Le?(K=!0,_.flags&=-129):(x===null||x.memoizedState!==null)&&(N|=1),kt(Ui,N&1),x===null)return Uw(_),x=_.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?(_.mode&1?zt(x)?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(N=P.children,x=P.fallback,K?(P=_.mode,K=_.child,N={mode:"hidden",children:N},!(P&1)&&K!==null?(K.childLanes=0,K.pendingProps=N):K=_y(N,P,0,null),x=Uf(x,P,B,null),K.return=_,x.return=_,K.sibling=x,_.child=K,_.child.memoizedState=ty(B),_.memoizedState=ey,x):e4(_,N));if(N=x.memoizedState,N!==null){if(Le=N.dehydrated,Le!==null){if(ge)return _.flags&256?(_.flags&=-257,ny(x,_,B,Error(o(422)))):_.memoizedState!==null?(_.child=x.child,_.flags|=128,null):(K=P.fallback,N=_.mode,P=_y({mode:"visible",children:P.children},N,0,null),K=Uf(K,N,B,null),K.flags|=2,P.return=_,K.return=_,P.sibling=K,_.child=P,_.mode&1&&vd(_,x.child,null,B),_.child.memoizedState=ty(B),_.memoizedState=ey,K);if(!(_.mode&1))_=ny(x,_,B,null);else if(zt(Le))_=ny(x,_,B,Error(o(419)));else if(P=(B&x.childLanes)!==0,fo||P){if(P=fr,P!==null){switch(B&-B){case 4:K=2;break;case 16:K=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:K=32;break;case 536870912:K=268435456;break;default:K=0}P=K&(P.suspendedLanes|B)?0:K,P!==0&&P!==N.retryLane&&(N.retryLane=P,zo(x,P,-1))}x4(),_=ny(x,_,B,Error(o(421)))}else Ht(Le)?(_.flags|=128,_.child=x.child,_=$X.bind(null,x),Fn(Le,_),_=null):(B=N.treeContext,Ee&&(uo=Jn(Le),co=_,Ri=!0,wa=null,b0=!1,B!==null&&(Do[Lo++]=Xl,Do[Lo++]=ql,Do[Lo++]=Bf,Xl=B.id,ql=B.overflow,Bf=_)),_=e4(_,_.pendingProps.children),_.flags|=4096);return _}return K?(P=fB(x,_,P.children,P.fallback,B),K=_.child,N=x.child.memoizedState,K.memoizedState=N===null?ty(B):{baseLanes:N.baseLanes|B,cachePool:null},K.childLanes=x.childLanes&~B,_.memoizedState=ey,P):(B=uB(x,_,P.children,B),_.memoizedState=null,B)}return K?(P=fB(x,_,P.children,P.fallback,B),K=_.child,N=x.child.memoizedState,K.memoizedState=N===null?ty(B):{baseLanes:N.baseLanes|B,cachePool:null},K.childLanes=x.childLanes&~B,_.memoizedState=ey,P):(B=uB(x,_,P.children,B),_.memoizedState=null,B)}function e4(x,_){return _=_y({mode:"visible",children:_},x.mode,0,null),_.return=x,x.child=_}function uB(x,_,B,P){var N=x.child;return x=N.sibling,B=eu(N,{mode:"visible",children:B}),!(_.mode&1)&&(B.lanes=P),B.return=_,B.sibling=null,x!==null&&(P=_.deletions,P===null?(_.deletions=[x],_.flags|=16):P.push(x)),_.child=B}function fB(x,_,B,P,N){var K=_.mode;x=x.child;var ge=x.sibling,Le={mode:"hidden",children:B};return!(K&1)&&_.child!==x?(B=_.child,B.childLanes=0,B.pendingProps=Le,_.deletions=null):(B=eu(x,Le),B.subtreeFlags=x.subtreeFlags&14680064),ge!==null?P=eu(ge,P):(P=Uf(P,K,N,null),P.flags|=2),P.return=_,B.return=_,B.sibling=P,_.child=B,P}function ny(x,_,B,P){return P!==null&&kw(P),vd(_,x.child,null,B),x=e4(_,_.pendingProps.children),x.flags|=2,_.memoizedState=null,x}function hB(x,_,B){x.lanes|=_;var P=x.alternate;P!==null&&(P.lanes|=_),xs(x.return,_,B)}function t4(x,_,B,P,N){var K=x.memoizedState;K===null?x.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:P,tail:B,tailMode:N}:(K.isBackwards=_,K.rendering=null,K.renderingStartTime=0,K.last=P,K.tail=B,K.tailMode=N)}function dB(x,_,B){var P=_.pendingProps,N=P.revealOrder,K=P.tail;if(_s(x,_,P.children,B),P=Ui.current,P&2)P=P&1|2,_.flags|=128;else{if(x!==null&&x.flags&128)e:for(x=_.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&hB(x,B,_);else if(x.tag===19)hB(x,B,_);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===_)break e;for(;x.sibling===null;){if(x.return===null||x.return===_)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}P&=1}if(kt(Ui,P),!(_.mode&1))_.memoizedState=null;else switch(N){case"forwards":for(B=_.child,N=null;B!==null;)x=B.alternate,x!==null&&Vv(x)===null&&(N=B),B=B.sibling;B=N,B===null?(N=_.child,_.child=null):(N=B.sibling,B.sibling=null),t4(_,!1,N,B,K);break;case"backwards":for(B=null,N=_.child,_.child=null;N!==null;){if(x=N.alternate,x!==null&&Vv(x)===null){_.child=N;break}x=N.sibling,N.sibling=B,B=N,N=x}t4(_,!0,B,null,K);break;case"together":t4(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Kl(x,_,B){if(x!==null&&(_.dependencies=x.dependencies),wd|=_.lanes,!(B&_.childLanes))return null;if(x!==null&&_.child!==x.child)throw Error(o(153));if(_.child!==null){for(x=_.child,B=eu(x,x.pendingProps),_.child=B,B.return=_;x.sibling!==null;)x=x.sibling,B=B.sibling=eu(x,x.pendingProps),B.return=_;B.sibling=null}return _.child}function NX(x,_,B){switch(_.tag){case 3:aB(_),Ad();break;case 5:T9(_);break;case 1:Kn(_.type)&&Hn(_);break;case 4:Nw(_,_.stateNode.containerInfo);break;case 10:zv(_,_.type._context,_.memoizedProps.value);break;case 13:var P=_.memoizedState;if(P!==null)return P.dehydrated!==null?(kt(Ui,Ui.current&1),_.flags|=128,null):B&_.child.childLanes?cB(x,_,B):(kt(Ui,Ui.current&1),x=Kl(x,_,B),x!==null?x.sibling:null);kt(Ui,Ui.current&1);break;case 19:if(P=(B&_.childLanes)!==0,x.flags&128){if(P)return dB(x,_,B);_.flags|=128}var N=_.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),kt(Ui,Ui.current),P)break;return null;case 22:case 23:return _.lanes=0,rB(x,_,B)}return Kl(x,_,B)}function GX(x,_){switch(Ow(_),_.tag){case 1:return Kn(_.type)&&ui(),x=_.flags,x&65536?(_.flags=x&-65537|128,_):null;case 3:return xd(),Zt(on),Zt(Yn),Qw(),x=_.flags,x&65536&&!(x&128)?(_.flags=x&-65537|128,_):null;case 5:return Gw(_),null;case 13:if(Zt(Ui),x=_.memoizedState,x!==null&&x.dehydrated!==null){if(_.alternate===null)throw Error(o(340));Ad()}return x=_.flags,x&65536?(_.flags=x&-65537|128,_):null;case 19:return Zt(Ui),null;case 4:return xd(),null;case 10:return Fr(_.type._context),null;case 22:case 23:return y4(),null;case 24:return null;default:return null}}var iy=!1,Df=!1,HX=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function ry(x,_){var B=x.ref;if(B!==null)if(typeof B=="function")try{B(null)}catch(P){Hs(x,_,P)}else B.current=null}function n4(x,_,B){try{B()}catch(P){Hs(x,_,P)}}var pB=!1;function QX(x,_){for(X(x.containerInfo),Rt=_;Rt!==null;)if(x=Rt,_=x.child,(x.subtreeFlags&1028)!==0&&_!==null)_.return=x,Rt=_;else for(;Rt!==null;){x=Rt;try{var B=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var P=B.memoizedProps,N=B.memoizedState,K=x.stateNode,ge=K.getSnapshotBeforeUpdate(x.elementType===x.type?P:ys(x.type,P),N);K.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:de&&at(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Le){Hs(x,x.return,Le)}if(_=x.sibling,_!==null){_.return=x.return,Rt=_;break}Rt=x.return}return B=pB,pB=!1,B}function Lf(x,_,B){var P=_.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var N=P=P.next;do{if((N.tag&x)===x){var K=N.destroy;N.destroy=void 0,K!==void 0&&n4(_,B,K)}N=N.next}while(N!==P)}}function U0(x,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var B=_=_.next;do{if((B.tag&x)===x){var P=B.create;B.destroy=P()}B=B.next}while(B!==_)}}function i4(x){var _=x.ref;if(_!==null){var B=x.stateNode;switch(x.tag){case 5:x=J(B);break;default:x=B}typeof _=="function"?_(x):_.current=x}}function mB(x,_,B){if(oo&&typeof oo.onCommitFiberUnmount=="function")try{oo.onCommitFiberUnmount(bf,_)}catch{}switch(_.tag){case 0:case 11:case 14:case 15:if(x=_.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var P=x=x.next;do{var N=P,K=N.destroy;N=N.tag,K!==void 0&&(N&2||N&4)&&n4(_,B,K),P=P.next}while(P!==x)}break;case 1:if(ry(_,B),x=_.stateNode,typeof x.componentWillUnmount=="function")try{x.props=_.memoizedProps,x.state=_.memoizedState,x.componentWillUnmount()}catch(ge){Hs(_,B,ge)}break;case 5:ry(_,B);break;case 4:de?_B(x,_,B):te&&te&&(_=_.stateNode.containerInfo,B=yt(_),Fe(_,B))}}function gB(x,_,B){for(var P=_;;)if(mB(x,P,B),P.child===null||de&&P.tag===4){if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return}P.sibling.return=P.return,P=P.sibling}else P.child.return=P,P=P.child}function AB(x){var _=x.alternate;_!==null&&(x.alternate=null,AB(_)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(_=x.stateNode,_!==null&&Be(_)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function vB(x){return x.tag===5||x.tag===3||x.tag===4}function yB(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||vB(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function xB(x){if(de){e:{for(var _=x.return;_!==null;){if(vB(_))break e;_=_.return}throw Error(o(160))}var B=_;switch(B.tag){case 5:_=B.stateNode,B.flags&32&&($e(_),B.flags&=-33),B=yB(x),s4(x,B,_);break;case 3:case 4:_=B.stateNode.containerInfo,B=yB(x),r4(x,B,_);break;default:throw Error(o(161))}}}function r4(x,_,B){var P=x.tag;if(P===5||P===6)x=x.stateNode,_?st(B,x,_):We(B,x);else if(P!==4&&(x=x.child,x!==null))for(r4(x,_,B),x=x.sibling;x!==null;)r4(x,_,B),x=x.sibling}function s4(x,_,B){var P=x.tag;if(P===5||P===6)x=x.stateNode,_?lt(B,x,_):ke(B,x);else if(P!==4&&(x=x.child,x!==null))for(s4(x,_,B),x=x.sibling;x!==null;)s4(x,_,B),x=x.sibling}function _B(x,_,B){for(var P=_,N=!1,K,ge;;){if(!N){N=P.return;e:for(;;){if(N===null)throw Error(o(160));switch(K=N.stateNode,N.tag){case 5:ge=!1;break e;case 3:K=K.containerInfo,ge=!0;break e;case 4:K=K.containerInfo,ge=!0;break e}N=N.return}N=!0}if(P.tag===5||P.tag===6)gB(x,P,B),ge?De(K,P.stateNode):ce(K,P.stateNode);else if(P.tag===18)ge?Qe(K,P.stateNode):Ge(K,P.stateNode);else if(P.tag===4){if(P.child!==null){K=P.stateNode.containerInfo,ge=!0,P.child.return=P,P=P.child;continue}}else if(mB(x,P,B),P.child!==null){P.child.return=P,P=P.child;continue}if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return,P.tag===4&&(N=!1)}P.sibling.return=P.return,P=P.sibling}}function o4(x,_){if(de){switch(_.tag){case 0:case 11:case 14:case 15:Lf(3,_,_.return),U0(3,_),Lf(5,_,_.return);return;case 1:return;case 5:var B=_.stateNode;if(B!=null){var P=_.memoizedProps;x=x!==null?x.memoizedProps:P;var N=_.type,K=_.updateQueue;_.updateQueue=null,K!==null&&ft(B,K,N,x,P,_)}return;case 6:if(_.stateNode===null)throw Error(o(162));B=_.memoizedProps,Xe(_.stateNode,x!==null?x.memoizedProps:B,B);return;case 3:Ee&&x!==null&&x.memoizedState.isDehydrated&&le(_.stateNode.containerInfo);return;case 12:return;case 13:sy(_);return;case 19:sy(_);return;case 17:return}throw Error(o(163))}switch(_.tag){case 0:case 11:case 14:case 15:Lf(3,_,_.return),U0(3,_),Lf(5,_,_.return);return;case 12:return;case 13:sy(_);return;case 19:sy(_);return;case 3:Ee&&x!==null&&x.memoizedState.isDehydrated&&le(_.stateNode.containerInfo);break;case 22:case 23:return}e:if(te){switch(_.tag){case 1:case 5:case 6:break e;case 3:case 4:_=_.stateNode,Fe(_.containerInfo,_.pendingChildren);break e}throw Error(o(163))}}function sy(x){var _=x.updateQueue;if(_!==null){x.updateQueue=null;var B=x.stateNode;B===null&&(B=x.stateNode=new HX),_.forEach(function(P){var N=ZX.bind(null,x,P);B.has(P)||(B.add(P),P.then(N,N))})}}function VX(x,_){for(Rt=_;Rt!==null;){_=Rt;var B=_.deletions;if(B!==null)for(var P=0;P<B.length;P++){var N=B[P];try{var K=x;de?_B(K,N,_):gB(K,N,_);var ge=N.alternate;ge!==null&&(ge.return=null),N.return=null}catch(Wt){Hs(N,_,Wt)}}if(B=_.child,_.subtreeFlags&12854&&B!==null)B.return=_,Rt=B;else for(;Rt!==null;){_=Rt;try{var Le=_.flags;if(Le&32&&de&&$e(_.stateNode),Le&512){var nt=_.alternate;if(nt!==null){var xt=nt.ref;xt!==null&&(typeof xt=="function"?xt(null):xt.current=null)}}if(Le&8192)switch(_.tag){case 13:if(_.memoizedState!==null){var Ut=_.alternate;(Ut===null||Ut.memoizedState===null)&&(d4=zi())}break;case 22:var xn=_.memoizedState!==null,nn=_.alternate,pi=nn!==null&&nn.memoizedState!==null;if(B=_,de){e:if(P=B,N=xn,K=null,de)for(var Yt=P;;){if(Yt.tag===5){if(K===null){K=Yt;var as=Yt.stateNode;N?Ye(as):_e(Yt.stateNode,Yt.memoizedProps)}}else if(Yt.tag===6){if(K===null){var ko=Yt.stateNode;N?fe(ko):Me(ko,Yt.memoizedProps)}}else if((Yt.tag!==22&&Yt.tag!==23||Yt.memoizedState===null||Yt===P)&&Yt.child!==null){Yt.child.return=Yt,Yt=Yt.child;continue}if(Yt===P)break;for(;Yt.sibling===null;){if(Yt.return===null||Yt.return===P)break e;K===Yt&&(K=null),Yt=Yt.return}K===Yt&&(K=null),Yt.sibling.return=Yt.return,Yt=Yt.sibling}}if(xn&&!pi&&B.mode&1){Rt=B;for(var je=B.child;je!==null;){for(B=Rt=je;Rt!==null;){P=Rt;var ze=P.child;switch(P.tag){case 0:case 11:case 14:case 15:Lf(4,P,P.return);break;case 1:ry(P,P.return);var Ze=P.stateNode;if(typeof Ze.componentWillUnmount=="function"){var Dt=P.return;try{Ze.props=P.memoizedProps,Ze.state=P.memoizedState,Ze.componentWillUnmount()}catch(Wt){Hs(P,Dt,Wt)}}break;case 5:ry(P,P.return);break;case 22:if(P.memoizedState!==null){SB(B);continue}}ze!==null?(ze.return=P,Rt=ze):SB(B)}je=je.sibling}}}switch(Le&4102){case 2:xB(_),_.flags&=-3;break;case 6:xB(_),_.flags&=-3,o4(_.alternate,_);break;case 4096:_.flags&=-4097;break;case 4100:_.flags&=-4097,o4(_.alternate,_);break;case 4:o4(_.alternate,_)}}catch(Wt){Hs(_,_.return,Wt)}if(B=_.sibling,B!==null){B.return=_.return,Rt=B;break}Rt=_.return}}}function jX(x,_,B){Rt=x,EB(x)}function EB(x,_,B){for(var P=(x.mode&1)!==0;Rt!==null;){var N=Rt,K=N.child;if(N.tag===22&&P){var ge=N.memoizedState!==null||iy;if(!ge){var Le=N.alternate,nt=Le!==null&&Le.memoizedState!==null||Df;Le=iy;var xt=Df;if(iy=ge,(Df=nt)&&!xt)for(Rt=N;Rt!==null;)ge=Rt,nt=ge.child,ge.tag===22&&ge.memoizedState!==null?CB(N):nt!==null?(nt.return=ge,Rt=nt):CB(N);for(;K!==null;)Rt=K,EB(K),K=K.sibling;Rt=N,iy=Le,Df=xt}wB(x)}else N.subtreeFlags&8772&&K!==null?(K.return=N,Rt=K):wB(x)}}function wB(x){for(;Rt!==null;){var _=Rt;if(_.flags&8772){var B=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:Df||U0(5,_);break;case 1:var P=_.stateNode;if(_.flags&4&&!Df)if(B===null)P.componentDidMount();else{var N=_.elementType===_.type?B.memoizedProps:ys(_.type,B.memoizedProps);P.componentDidUpdate(N,B.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var K=_.updateQueue;K!==null&&A9(_,K,P);break;case 3:var ge=_.updateQueue;if(ge!==null){if(B=null,_.child!==null)switch(_.child.tag){case 5:B=J(_.child.stateNode);break;case 1:B=_.child.stateNode}A9(_,ge,B)}break;case 5:var Le=_.stateNode;B===null&&_.flags&4&&Oe(Le,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(Ee&&_.memoizedState===null){var nt=_.alternate;if(nt!==null){var xt=nt.memoizedState;if(xt!==null){var Ut=xt.dehydrated;Ut!==null&&me(Ut)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Df||_.flags&512&&i4(_)}catch(xn){Hs(_,_.return,xn)}}if(_===x){Rt=null;break}if(B=_.sibling,B!==null){B.return=_.return,Rt=B;break}Rt=_.return}}function SB(x){for(;Rt!==null;){var _=Rt;if(_===x){Rt=null;break}var B=_.sibling;if(B!==null){B.return=_.return,Rt=B;break}Rt=_.return}}function CB(x){for(;Rt!==null;){var _=Rt;try{switch(_.tag){case 0:case 11:case 15:var B=_.return;try{U0(4,_)}catch(nt){Hs(_,B,nt)}break;case 1:var P=_.stateNode;if(typeof P.componentDidMount=="function"){var N=_.return;try{P.componentDidMount()}catch(nt){Hs(_,N,nt)}}var K=_.return;try{i4(_)}catch(nt){Hs(_,K,nt)}break;case 5:var ge=_.return;try{i4(_)}catch(nt){Hs(_,ge,nt)}}}catch(nt){Hs(_,_.return,nt)}if(_===x){Rt=null;break}var Le=_.sibling;if(Le!==null){Le.return=_.return,Rt=Le;break}Rt=_.return}}var oy=0,ay=1,ly=2,cy=3,uy=4;if(typeof Symbol=="function"&&Symbol.for){var k0=Symbol.for;oy=k0("selector.component"),ay=k0("selector.has_pseudo_class"),ly=k0("selector.role"),cy=k0("selector.test_id"),uy=k0("selector.text")}function a4(x){var _=ue(x);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(o(364));return _}if(x=Re(x),x===null)throw Error(o(362));return x.stateNode.current}function l4(x,_){switch(_.$$typeof){case oy:if(x.type===_.value)return!0;break;case ay:e:{_=_.value,x=[x,0];for(var B=0;B<x.length;){var P=x[B++],N=x[B++],K=_[N];if(P.tag!==5||!ee(P)){for(;K!=null&&l4(P,K);)N++,K=_[N];if(N===_.length){_=!0;break e}else for(P=P.child;P!==null;)x.push(P,N),P=P.sibling}}_=!1}return _;case ly:if(x.tag===5&&Ae(x.stateNode,_.value))return!0;break;case uy:if((x.tag===5||x.tag===6)&&(x=se(x),x!==null&&0<=x.indexOf(_.value)))return!0;break;case cy:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function c4(x){switch(x.$$typeof){case oy:return"<"+(b(x.value)||"Unknown")+">";case ay:return":has("+(c4(x)||"")+")";case ly:return'[role="'+x.value+'"]';case uy:return'"'+x.value+'"';case cy:return'[data-testname="'+x.value+'"]';default:throw Error(o(365))}}function bB(x,_){var B=[];x=[x,0];for(var P=0;P<x.length;){var N=x[P++],K=x[P++],ge=_[K];if(N.tag!==5||!ee(N)){for(;ge!=null&&l4(N,ge);)K++,ge=_[K];if(K===_.length)B.push(N);else for(N=N.child;N!==null;)x.push(N,K),N=N.sibling}}return B}function u4(x,_){if(!be)throw Error(o(363));x=a4(x),x=bB(x,_),_=[],x=Array.from(x);for(var B=0;B<x.length;){var P=x[B++];if(P.tag===5)ee(P)||_.push(P.stateNode);else for(P=P.child;P!==null;)x.push(P),P=P.sibling}return _}var WX=Math.ceil,fy=a.ReactCurrentDispatcher,f4=a.ReactCurrentOwner,or=a.ReactCurrentBatchConfig,Bn=0,fr=null,hr=null,Xr=0,ho=0,Ed=Pt(0),Er=0,N0=null,wd=0,hy=0,h4=0,G0=null,Ns=null,d4=0,p4=1/0;function Sd(){p4=zi()+500}var dy=!1,m4=null,Jc=null,py=!1,Kc=null,my=0,H0=0,g4=null,gy=-1,Ay=0;function Es(){return Bn&6?zi():gy!==-1?gy:gy=zi()}function $c(x){return x.mode&1?Bn&2&&Xr!==0?Xr&-Xr:Mf.transition!==null?(Ay===0&&(x=Hl,Hl<<=1,!(Hl&4194240)&&(Hl=64),Ay=x),Ay):(x=Rn,x!==0?x:ye()):1}function zo(x,_,B){if(50<H0)throw H0=0,g4=null,Error(o(185));var P=vy(x,_);return P===null?null:(ol(P,_,B),(!(Bn&2)||P!==fr)&&(P===fr&&(!(Bn&2)&&(hy|=_),Er===4&&Zc(P,Xr)),Gs(P,B),_===1&&Bn===0&&!(x.mode&1)&&(Sd(),ll&&ks())),P)}function vy(x,_){x.lanes|=_;var B=x.alternate;for(B!==null&&(B.lanes|=_),B=x,x=x.return;x!==null;)x.childLanes|=_,B=x.alternate,B!==null&&(B.childLanes|=_),B=x,x=x.return;return B.tag===3?B.stateNode:null}function Gs(x,_){var B=x.callbackNode;y0(x,_);var P=Sf(x,x===fr?Xr:0);if(P===0)B!==null&&hd(B),x.callbackNode=null,x.callbackPriority=0;else if(_=P&-P,x.callbackPriority!==_){if(B!=null&&hd(B),_===1)x.tag===0?C0(IB.bind(null,x)):S0(IB.bind(null,x)),ae?ie(function(){Bn===0&&ks()}):Wl(Cf,ks),B=null;else{switch(x0(P)){case 1:B=Cf;break;case 4:B=Fv;break;case 16:B=As;break;case 536870912:B=E0;break;default:B=As}B=zB(B,MB.bind(null,x))}x.callbackPriority=_,x.callbackNode=B}}function MB(x,_){if(gy=-1,Ay=0,Bn&6)throw Error(o(327));var B=x.callbackNode;if(zf()&&x.callbackNode!==B)return null;var P=Sf(x,x===fr?Xr:0);if(P===0)return null;if(P&30||P&x.expiredLanes||_)_=yy(x,P);else{_=P;var N=Bn;Bn|=2;var K=PB();(fr!==x||Xr!==_)&&(Sd(),Ff(x,_));do try{qX();break}catch(Le){BB(x,Le)}while(!0);pd(),fy.current=K,Bn=N,hr!==null?_=0:(fr=null,Xr=0,_=Er)}if(_!==0){if(_===2&&(N=jl(x),N!==0&&(P=N,_=A4(x,N))),_===1)throw B=N0,Ff(x,0),Zc(x,P),Gs(x,zi()),B;if(_===6)Zc(x,P);else{if(N=x.current.alternate,!(P&30)&&!YX(N)&&(_=yy(x,P),_===2&&(K=jl(x),K!==0&&(P=K,_=A4(x,K))),_===1))throw B=N0,Ff(x,0),Zc(x,P),Gs(x,zi()),B;switch(x.finishedWork=N,x.finishedLanes=P,_){case 0:case 1:throw Error(o(345));case 2:Of(x,Ns);break;case 3:if(Zc(x,P),(P&130023424)===P&&(_=d4+500-zi(),10<_)){if(Sf(x,0)!==0)break;if(N=x.suspendedLanes,(N&P)!==P){Es(),x.pingedLanes|=x.suspendedLanes&N;break}x.timeoutHandle=j(Of.bind(null,x,Ns),_);break}Of(x,Ns);break;case 4:if(Zc(x,P),(P&4194240)===P)break;for(_=x.eventTimes,N=-1;0<P;){var ge=31-vi(P);K=1<<ge,ge=_[ge],ge>N&&(N=ge),P&=~K}if(P=N,P=zi()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*WX(P/1960))-P,10<P){x.timeoutHandle=j(Of.bind(null,x,Ns),P);break}Of(x,Ns);break;case 5:Of(x,Ns);break;default:throw Error(o(329))}}}return Gs(x,zi()),x.callbackNode===B?MB.bind(null,x):null}function A4(x,_){var B=G0;return x.current.memoizedState.isDehydrated&&(Ff(x,_).flags|=256),x=yy(x,_),x!==2&&(_=Ns,Ns=B,_!==null&&v4(_)),x}function v4(x){Ns===null?Ns=x:Ns.push.apply(Ns,x)}function YX(x){for(var _=x;;){if(_.flags&16384){var B=_.updateQueue;if(B!==null&&(B=B.stores,B!==null))for(var P=0;P<B.length;P++){var N=B[P],K=N.getSnapshot;N=N.value;try{if(!ao(K(),N))return!1}catch{return!1}}}if(B=_.child,_.subtreeFlags&16384&&B!==null)B.return=_,_=B;else{if(_===x)break;for(;_.sibling===null;){if(_.return===null||_.return===x)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Zc(x,_){for(_&=~h4,_&=~hy,x.suspendedLanes|=_,x.pingedLanes&=~_,x=x.expirationTimes;0<_;){var B=31-vi(_),P=1<<B;x[B]=-1,_&=~P}}function IB(x){if(Bn&6)throw Error(o(327));zf();var _=Sf(x,0);if(!(_&1))return Gs(x,zi()),null;var B=yy(x,_);if(x.tag!==0&&B===2){var P=jl(x);P!==0&&(_=P,B=A4(x,P))}if(B===1)throw B=N0,Ff(x,0),Zc(x,_),Gs(x,zi()),B;if(B===6)throw Error(o(345));return x.finishedWork=x.current.alternate,x.finishedLanes=_,Of(x,Ns),Gs(x,zi()),null}function TB(x){Kc!==null&&Kc.tag===0&&!(Bn&6)&&zf();var _=Bn;Bn|=1;var B=or.transition,P=Rn;try{if(or.transition=null,Rn=1,x)return x()}finally{Rn=P,or.transition=B,Bn=_,!(Bn&6)&&ks()}}function y4(){ho=Ed.current,Zt(Ed)}function Ff(x,_){x.finishedWork=null,x.finishedLanes=0;var B=x.timeoutHandle;if(B!==xe&&(x.timeoutHandle=xe,oe(B)),hr!==null)for(B=hr.return;B!==null;){var P=B;switch(Ow(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&ui();break;case 3:xd(),Zt(on),Zt(Yn),Qw();break;case 5:Gw(P);break;case 4:xd();break;case 13:Zt(Ui);break;case 19:Zt(Ui);break;case 10:Fr(P.type._context);break;case 22:case 23:y4()}B=B.return}if(fr=x,hr=x=eu(x.current,null),Xr=ho=_,Er=0,N0=null,h4=hy=wd=0,Ns=G0=null,lo!==null){for(_=0;_<lo.length;_++)if(B=lo[_],P=B.interleaved,P!==null){B.interleaved=null;var N=P.next,K=B.pending;if(K!==null){var ge=K.next;K.next=N,P.next=ge}B.pending=P}lo=null}return x}function BB(x,_){do{var B=hr;try{if(pd(),jv.current=Kv,Wv){for(var P=Yi.memoizedState;P!==null;){var N=P.queue;N!==null&&(N.pending=null),P=P.next}Wv=!1}if(_d=0,Or=rs=Yi=null,P0=!1,R0=0,f4.current=null,B===null||B.return===null){Er=1,N0=_,hr=null;break}e:{var K=x,ge=B.return,Le=B,nt=_;if(_=Xr,Le.flags|=32768,nt!==null&&typeof nt=="object"&&typeof nt.then=="function"){var xt=nt,Ut=Le,xn=Ut.tag;if(!(Ut.mode&1)&&(xn===0||xn===11||xn===15)){var nn=Ut.alternate;nn?(Ut.updateQueue=nn.updateQueue,Ut.memoizedState=nn.memoizedState,Ut.lanes=nn.lanes):(Ut.updateQueue=null,Ut.memoizedState=null)}var pi=K9(ge);if(pi!==null){pi.flags&=-257,$9(pi,ge,Le,K,_),pi.mode&1&&J9(K,xt,_),_=pi,nt=xt;var Yt=_.updateQueue;if(Yt===null){var as=new Set;as.add(nt),_.updateQueue=as}else Yt.add(nt);break e}else{if(!(_&1)){J9(K,xt,_),x4();break e}nt=Error(o(426))}}else if(Ri&&Le.mode&1){var ko=K9(ge);if(ko!==null){!(ko.flags&65536)&&(ko.flags|=256),$9(ko,ge,Le,K,_),kw(nt);break e}}K=nt,Er!==4&&(Er=2),G0===null?G0=[K]:G0.push(K),nt=Jw(nt,Le),Le=ge;do{switch(Le.tag){case 3:Le.flags|=65536,_&=-_,Le.lanes|=_;var je=X9(Le,nt,_);g9(Le,je);break e;case 1:K=nt;var ze=Le.type,Ze=Le.stateNode;if(!(Le.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||Ze!==null&&typeof Ze.componentDidCatch=="function"&&(Jc===null||!Jc.has(Ze)))){Le.flags|=65536,_&=-_,Le.lanes|=_;var Dt=q9(Le,K,_);g9(Le,Dt);break e}}Le=Le.return}while(Le!==null)}DB(B)}catch(Wt){_=Wt,hr===B&&B!==null&&(hr=B=B.return);continue}break}while(!0)}function PB(){var x=fy.current;return fy.current=Kv,x===null?Kv:x}function x4(){(Er===0||Er===3||Er===2)&&(Er=4),fr===null||!(wd&268435455)&&!(hy&268435455)||Zc(fr,Xr)}function yy(x,_){var B=Bn;Bn|=2;var P=PB();fr===x&&Xr===_||Ff(x,_);do try{XX();break}catch(N){BB(x,N)}while(!0);if(pd(),Bn=B,fy.current=P,hr!==null)throw Error(o(261));return fr=null,Xr=0,Er}function XX(){for(;hr!==null;)RB(hr)}function qX(){for(;hr!==null&&!_0();)RB(hr)}function RB(x){var _=OB(x.alternate,x,ho);x.memoizedProps=x.pendingProps,_===null?DB(x):hr=_,f4.current=null}function DB(x){var _=x;do{var B=_.alternate;if(x=_.return,_.flags&32768){if(B=GX(B,_),B!==null){B.flags&=32767,hr=B;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{Er=6,hr=null;return}}else if(B=UX(B,_,ho),B!==null){hr=B;return}if(_=_.sibling,_!==null){hr=_;return}hr=_=x}while(_!==null);Er===0&&(Er=5)}function Of(x,_){var B=Rn,P=or.transition;try{or.transition=null,Rn=1,JX(x,_,B)}finally{or.transition=P,Rn=B}return null}function JX(x,_,B){do zf();while(Kc!==null);if(Bn&6)throw Error(o(327));var P=x.finishedWork,N=x.finishedLanes;if(P===null)return null;if(x.finishedWork=null,x.finishedLanes=0,P===x.current)throw Error(o(177));x.callbackNode=null,x.callbackPriority=0;var K=P.lanes|P.childLanes;if(Wc(x,K),x===fr&&(hr=fr=null,Xr=0),!(P.subtreeFlags&2064)&&!(P.flags&2064)||py||(py=!0,zB(As,function(){return zf(),null})),K=(P.flags&15990)!==0,P.subtreeFlags&15990||K){K=or.transition,or.transition=null;var ge=Rn;Rn=1;var Le=Bn;Bn|=4,f4.current=null,QX(x,P),VX(x,P),Y(x.containerInfo),x.current=P,jX(P),Lv(),Bn=Le,Rn=ge,or.transition=K}else x.current=P;if(py&&(py=!1,Kc=x,my=N),K=x.pendingLanes,K===0&&(Jc=null),w0(P.stateNode),Gs(x,zi()),_!==null)for(B=x.onRecoverableError,P=0;P<_.length;P++)B(_[P]);if(dy)throw dy=!1,x=m4,m4=null,x;return my&1&&x.tag!==0&&zf(),K=x.pendingLanes,K&1?x===g4?H0++:(H0=0,g4=x):H0=0,ks(),null}function zf(){if(Kc!==null){var x=x0(my),_=or.transition,B=Rn;try{if(or.transition=null,Rn=16>x?16:x,Kc===null)var P=!1;else{if(x=Kc,Kc=null,my=0,Bn&6)throw Error(o(331));var N=Bn;for(Bn|=4,Rt=x.current;Rt!==null;){var K=Rt,ge=K.child;if(Rt.flags&16){var Le=K.deletions;if(Le!==null){for(var nt=0;nt<Le.length;nt++){var xt=Le[nt];for(Rt=xt;Rt!==null;){var Ut=Rt;switch(Ut.tag){case 0:case 11:case 15:Lf(8,Ut,K)}var xn=Ut.child;if(xn!==null)xn.return=Ut,Rt=xn;else for(;Rt!==null;){Ut=Rt;var nn=Ut.sibling,pi=Ut.return;if(AB(Ut),Ut===xt){Rt=null;break}if(nn!==null){nn.return=pi,Rt=nn;break}Rt=pi}}}var Yt=K.alternate;if(Yt!==null){var as=Yt.child;if(as!==null){Yt.child=null;do{var ko=as.sibling;as.sibling=null,as=ko}while(as!==null)}}Rt=K}}if(K.subtreeFlags&2064&&ge!==null)ge.return=K,Rt=ge;else e:for(;Rt!==null;){if(K=Rt,K.flags&2048)switch(K.tag){case 0:case 11:case 15:Lf(9,K,K.return)}var je=K.sibling;if(je!==null){je.return=K.return,Rt=je;break e}Rt=K.return}}var ze=x.current;for(Rt=ze;Rt!==null;){ge=Rt;var Ze=ge.child;if(ge.subtreeFlags&2064&&Ze!==null)Ze.return=ge,Rt=Ze;else e:for(ge=ze;Rt!==null;){if(Le=Rt,Le.flags&2048)try{switch(Le.tag){case 0:case 11:case 15:U0(9,Le)}}catch(Wt){Hs(Le,Le.return,Wt)}if(Le===ge){Rt=null;break e}var Dt=Le.sibling;if(Dt!==null){Dt.return=Le.return,Rt=Dt;break e}Rt=Le.return}}if(Bn=N,ks(),oo&&typeof oo.onPostCommitFiberRoot=="function")try{oo.onPostCommitFiberRoot(bf,x)}catch{}P=!0}return P}finally{Rn=B,or.transition=_}}return!1}function LB(x,_,B){_=Jw(B,_),_=X9(x,_,1),qc(x,_),_=Es(),x=vy(x,1),x!==null&&(ol(x,1,_),Gs(x,_))}function Hs(x,_,B){if(x.tag===3)LB(x,x,B);else for(;_!==null;){if(_.tag===3){LB(_,x,B);break}else if(_.tag===1){var P=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(Jc===null||!Jc.has(P))){x=Jw(B,x),x=q9(_,x,1),qc(_,x),x=Es(),_=vy(_,1),_!==null&&(ol(_,1,x),Gs(_,x));break}}_=_.return}}function KX(x,_,B){var P=x.pingCache;P!==null&&P.delete(_),_=Es(),x.pingedLanes|=x.suspendedLanes&B,fr===x&&(Xr&B)===B&&(Er===4||Er===3&&(Xr&130023424)===Xr&&500>zi()-d4?Ff(x,0):h4|=B),Gs(x,_)}function FB(x,_){_===0&&(x.mode&1?(_=Ql,Ql<<=1,!(Ql&130023424)&&(Ql=4194304)):_=1);var B=Es();x=vy(x,_),x!==null&&(ol(x,_,B),Gs(x,B))}function $X(x){var _=x.memoizedState,B=0;_!==null&&(B=_.retryLane),FB(x,B)}function ZX(x,_){var B=0;switch(x.tag){case 13:var P=x.stateNode,N=x.memoizedState;N!==null&&(B=N.retryLane);break;case 19:P=x.stateNode;break;default:throw Error(o(314))}P!==null&&P.delete(_),FB(x,B)}var OB;OB=function(x,_,B){if(x!==null)if(x.memoizedProps!==_.pendingProps||on.current)fo=!0;else{if(!(x.lanes&B)&&!(_.flags&128))return fo=!1,NX(x,_,B);fo=!!(x.flags&131072)}else fo=!1,Ri&&_.flags&1048576&&E9(_,Hv,_.index);switch(_.lanes=0,_.tag){case 2:var P=_.type;x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),x=_.pendingProps;var N=Pn(_,Yn.current);rr(_,B),N=jw(null,_,P,x,N,B);var K=Ww();return _.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Kn(P)?(K=!0,Hn(_)):K=!1,_.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Rw(_),N.updater=Nv,_.stateNode=N,N._reactInternals=_,Lw(_,P,x,B),_=Zw(null,_,P,!0,K,B)):(_.tag=0,Ri&&K&&Fw(_),_s(null,_,N,B),_=_.child),_;case 16:P=_.elementType;e:{switch(x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),x=_.pendingProps,N=P._init,P=N(P._payload),_.type=P,N=_.tag=tq(P),x=ys(P,x),N){case 0:_=$w(null,_,P,x,B);break e;case 1:_=oB(null,_,P,x,B);break e;case 11:_=tB(null,_,P,x,B);break e;case 14:_=nB(null,_,P,ys(P.type,x),B);break e}throw Error(o(306,P,""))}return _;case 0:return P=_.type,N=_.pendingProps,N=_.elementType===P?N:ys(P,N),$w(x,_,P,N,B);case 1:return P=_.type,N=_.pendingProps,N=_.elementType===P?N:ys(P,N),oB(x,_,P,N,B);case 3:e:{if(aB(_),x===null)throw Error(o(387));P=_.pendingProps,K=_.memoizedState,N=K.element,m9(x,_),kv(_,P,null,B);var ge=_.memoizedState;if(P=ge.element,Ee&&K.isDehydrated)if(K={element:P,isDehydrated:!1,cache:ge.cache,transitions:ge.transitions},_.updateQueue.baseState=K,_.memoizedState=K,_.flags&256){N=Error(o(423)),_=lB(x,_,P,B,N);break e}else if(P!==N){N=Error(o(424)),_=lB(x,_,P,B,N);break e}else for(Ee&&(uo=un(_.stateNode.containerInfo),co=_,Ri=!0,wa=null,b0=!1),B=I9(_,null,P,B),_.child=B;B;)B.flags=B.flags&-3|4096,B=B.sibling;else{if(Ad(),P===N){_=Kl(x,_,B);break e}_s(x,_,P,B)}_=_.child}return _;case 5:return T9(_),x===null&&Uw(_),P=_.type,N=_.pendingProps,K=x!==null?x.memoizedProps:null,ge=N.children,V(P,N)?ge=null:K!==null&&V(P,K)&&(_.flags|=32),sB(x,_),_s(x,_,ge,B),_.child;case 6:return x===null&&Uw(_),null;case 13:return cB(x,_,B);case 4:return Nw(_,_.stateNode.containerInfo),P=_.pendingProps,x===null?_.child=vd(_,null,P,B):_s(x,_,P,B),_.child;case 11:return P=_.type,N=_.pendingProps,N=_.elementType===P?N:ys(P,N),tB(x,_,P,N,B);case 7:return _s(x,_,_.pendingProps,B),_.child;case 8:return _s(x,_,_.pendingProps.children,B),_.child;case 12:return _s(x,_,_.pendingProps.children,B),_.child;case 10:e:{if(P=_.type._context,N=_.pendingProps,K=_.memoizedProps,ge=N.value,zv(_,P,ge),K!==null)if(ao(K.value,ge)){if(K.children===N.children&&!on.current){_=Kl(x,_,B);break e}}else for(K=_.child,K!==null&&(K.return=_);K!==null;){var Le=K.dependencies;if(Le!==null){ge=K.child;for(var nt=Le.firstContext;nt!==null;){if(nt.context===P){if(K.tag===1){nt=Yl(-1,B&-B),nt.tag=2;var xt=K.updateQueue;if(xt!==null){xt=xt.shared;var Ut=xt.pending;Ut===null?nt.next=nt:(nt.next=Ut.next,Ut.next=nt),xt.pending=nt}}K.lanes|=B,nt=K.alternate,nt!==null&&(nt.lanes|=B),xs(K.return,B,_),Le.lanes|=B;break}nt=nt.next}}else if(K.tag===10)ge=K.type===_.type?null:K.child;else if(K.tag===18){if(ge=K.return,ge===null)throw Error(o(341));ge.lanes|=B,Le=ge.alternate,Le!==null&&(Le.lanes|=B),xs(ge,B,_),ge=K.sibling}else ge=K.child;if(ge!==null)ge.return=K;else for(ge=K;ge!==null;){if(ge===_){ge=null;break}if(K=ge.sibling,K!==null){K.return=ge.return,ge=K;break}ge=ge.return}K=ge}_s(x,_,N.children,B),_=_.child}return _;case 9:return N=_.type,P=_.pendingProps.children,rr(_,B),N=sr(N),P=P(N),_.flags|=1,_s(x,_,P,B),_.child;case 14:return P=_.type,N=ys(P,_.pendingProps),N=ys(P.type,N),nB(x,_,P,N,B);case 15:return iB(x,_,_.type,_.pendingProps,B);case 17:return P=_.type,N=_.pendingProps,N=_.elementType===P?N:ys(P,N),x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),_.tag=1,Kn(P)?(x=!0,Hn(_)):x=!1,rr(_,B),x9(_,P,N),Lw(_,P,N,B),Zw(null,_,P,!0,x,B);case 19:return dB(x,_,B);case 22:return rB(x,_,B)}throw Error(o(156,_.tag))};function zB(x,_){return Wl(x,_)}function eq(x,_,B,P){this.tag=x,this.key=B,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uo(x,_,B,P){return new eq(x,_,B,P)}function _4(x){return x=x.prototype,!(!x||!x.isReactComponent)}function tq(x){if(typeof x=="function")return _4(x)?1:0;if(x!=null){if(x=x.$$typeof,x===g)return 11;if(x===A)return 14}return 2}function eu(x,_){var B=x.alternate;return B===null?(B=Uo(x.tag,_,x.key,x.mode),B.elementType=x.elementType,B.type=x.type,B.stateNode=x.stateNode,B.alternate=x,x.alternate=B):(B.pendingProps=_,B.type=x.type,B.flags=0,B.subtreeFlags=0,B.deletions=null),B.flags=x.flags&14680064,B.childLanes=x.childLanes,B.lanes=x.lanes,B.child=x.child,B.memoizedProps=x.memoizedProps,B.memoizedState=x.memoizedState,B.updateQueue=x.updateQueue,_=x.dependencies,B.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},B.sibling=x.sibling,B.index=x.index,B.ref=x.ref,B}function xy(x,_,B,P,N,K){var ge=2;if(P=x,typeof x=="function")_4(x)&&(ge=1);else if(typeof x=="string")ge=5;else e:switch(x){case u:return Uf(B.children,N,K,_);case f:ge=8,N|=8;break;case h:return x=Uo(12,B,_,N|2),x.elementType=h,x.lanes=K,x;case v:return x=Uo(13,B,_,N),x.elementType=v,x.lanes=K,x;case p:return x=Uo(19,B,_,N),x.elementType=p,x.lanes=K,x;case w:return _y(B,N,K,_);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case d:ge=10;break e;case m:ge=9;break e;case g:ge=11;break e;case A:ge=14;break e;case y:ge=16,P=null;break e}throw Error(o(130,x==null?x:typeof x,""))}return _=Uo(ge,B,_,N),_.elementType=x,_.type=P,_.lanes=K,_}function Uf(x,_,B,P){return x=Uo(7,x,P,_),x.lanes=B,x}function _y(x,_,B,P){return x=Uo(22,x,P,_),x.elementType=w,x.lanes=B,x.stateNode={},x}function E4(x,_,B){return x=Uo(6,x,null,_),x.lanes=B,x}function w4(x,_,B){return _=Uo(4,x.children!==null?x.children:[],x.key,_),_.lanes=B,_.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},_}function nq(x,_,B,P,N){this.tag=_,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fd(0),this.expirationTimes=fd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fd(0),this.identifierPrefix=P,this.onRecoverableError=N,Ee&&(this.mutableSourceEagerHydrationData=null)}function UB(x,_,B,P,N,K,ge,Le,nt){return x=new nq(x,_,B,Le,nt),_===1?(_=1,K===!0&&(_|=8)):_=0,K=Uo(3,null,null,_),x.current=K,K.stateNode=x,K.memoizedState={element:P,isDehydrated:B,cache:null,transitions:null},Rw(K),x}function kB(x){if(!x)return ln;x=x._reactInternals;e:{if(I(x)!==x||x.tag!==1)throw Error(o(170));var _=x;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Kn(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(o(171))}if(x.tag===1){var B=x.type;if(Kn(B))return di(x,B,_)}return _}function NB(x){var _=x._reactInternals;if(_===void 0)throw typeof x.render=="function"?Error(o(188)):(x=Object.keys(x).join(","),Error(o(268,x)));return x=R(_),x===null?null:x.stateNode}function GB(x,_){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var B=x.retryLane;x.retryLane=B!==0&&B<_?B:_}}function S4(x,_){GB(x,_),(x=x.alternate)&&GB(x,_)}function iq(x){return x=R(x),x===null?null:x.stateNode}function rq(){return null}return t.attemptContinuousHydration=function(x){if(x.tag===13){var _=Es();zo(x,134217728,_),S4(x,134217728)}},t.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var _=Es(),B=$c(x);zo(x,B,_),S4(x,B)}},t.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var _=x.stateNode;if(_.current.memoizedState.isDehydrated){var B=Vl(_.pendingLanes);B!==0&&(al(_,B|1),Gs(_,zi()),!(Bn&6)&&(Sd(),ks()))}break;case 13:var P=Es();TB(function(){return zo(x,1,P)}),S4(x,1)}},t.batchedUpdates=function(x,_){var B=Bn;Bn|=1;try{return x(_)}finally{Bn=B,Bn===0&&(Sd(),ll&&ks())}},t.createComponentSelector=function(x){return{$$typeof:oy,value:x}},t.createContainer=function(x,_,B,P,N,K,ge){return UB(x,_,!1,null,B,P,N,K,ge)},t.createHasPseudoClassSelector=function(x){return{$$typeof:ay,value:x}},t.createHydrationContainer=function(x,_,B,P,N,K,ge,Le,nt){return x=UB(B,P,!0,x,N,K,ge,Le,nt),x.context=kB(null),B=x.current,P=Es(),N=$c(B),K=Yl(P,N),K.callback=_??null,qc(B,K),x.current.lanes=N,ol(x,N,P),Gs(x,P),x},t.createPortal=function(x,_,B){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:P==null?null:""+P,children:x,containerInfo:_,implementation:B}},t.createRoleSelector=function(x){return{$$typeof:ly,value:x}},t.createTestNameSelector=function(x){return{$$typeof:cy,value:x}},t.createTextSelector=function(x){return{$$typeof:uy,value:x}},t.deferredUpdates=function(x){var _=Rn,B=or.transition;try{return or.transition=null,Rn=16,x()}finally{Rn=_,or.transition=B}},t.discreteUpdates=function(x,_,B,P,N){var K=Rn,ge=or.transition;try{return or.transition=null,Rn=1,x(_,B,P,N)}finally{Rn=K,or.transition=ge,Bn===0&&Sd()}},t.findAllNodes=u4,t.findBoundingRects=function(x,_){if(!be)throw Error(o(363));_=u4(x,_),x=[];for(var B=0;B<_.length;B++)x.push(ct(_[B]));for(_=x.length-1;0<_;_--){B=x[_];for(var P=B.x,N=P+B.width,K=B.y,ge=K+B.height,Le=_-1;0<=Le;Le--)if(_!==Le){var nt=x[Le],xt=nt.x,Ut=xt+nt.width,xn=nt.y,nn=xn+nt.height;if(P>=xt&&K>=xn&&N<=Ut&&ge<=nn){x.splice(_,1);break}else if(P!==xt||B.width!==nt.width||nn<K||xn>ge){if(!(K!==xn||B.height!==nt.height||Ut<P||xt>N)){xt>P&&(nt.width+=xt-P,nt.x=P),Ut<N&&(nt.width=N-xt),x.splice(_,1);break}}else{xn>K&&(nt.height+=xn-K,nt.y=K),nn<ge&&(nt.height=ge-xn),x.splice(_,1);break}}}return x},t.findHostInstance=NB,t.findHostInstanceWithNoPortals=function(x){return x=D(x),x=x!==null?L(x):null,x===null?null:x.stateNode},t.findHostInstanceWithWarning=function(x){return NB(x)},t.flushControlled=function(x){var _=Bn;Bn|=1;var B=or.transition,P=Rn;try{or.transition=null,Rn=1,x()}finally{Rn=P,or.transition=B,Bn=_,Bn===0&&(Sd(),ks())}},t.flushPassiveEffects=zf,t.flushSync=TB,t.focusWithin=function(x,_){if(!be)throw Error(o(363));for(x=a4(x),_=bB(x,_),_=Array.from(_),x=0;x<_.length;){var B=_[x++];if(!ee(B)){if(B.tag===5&&Ue(B.stateNode))return!0;for(B=B.child;B!==null;)_.push(B),B=B.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Rn},t.getFindAllNodesFailureDescription=function(x,_){if(!be)throw Error(o(363));var B=0,P=[];x=[a4(x),0];for(var N=0;N<x.length;){var K=x[N++],ge=x[N++],Le=_[ge];if((K.tag!==5||!ee(K))&&(l4(K,Le)&&(P.push(c4(Le)),ge++,ge>B&&(B=ge)),ge<_.length))for(K=K.child;K!==null;)x.push(K,ge),K=K.sibling}if(B<_.length){for(x=[];B<_.length;B++)x.push(c4(_[B]));return`findAllNodes was able to match part of the selector:
  `+(P.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},t.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return J(x.child.stateNode);default:return x.child.stateNode}},t.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:iq,findFiberByHostInstance:x.findFiberByHostInstance||rq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")x=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)x=!0;else{try{bf=_.inject(x),oo=_}catch{}x=!!_.checkDCE}}return x},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(x,_,B,P){if(!be)throw Error(o(363));x=u4(x,_);var N=Ce(x,B,P).disconnect;return{disconnect:function(){N()}}},t.registerMutableSourceForHydration=function(x,_){var B=_._getVersion;B=B(_._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[_,B]:x.mutableSourceEagerHydrationData.push(_,B)},t.runWithPriority=function(x,_){var B=Rn;try{return Rn=x,_()}finally{Rn=B}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(x,_,B,P){var N=_.current,K=Es(),ge=$c(N);return B=kB(B),_.context===null?_.context=B:_.pendingContext=B,_=Yl(K,ge),_.payload={element:x},P=P===void 0?null:P,P!==null&&(_.callback=P),qc(N,_),x=zo(N,ge,K),x!==null&&Uv(x,N,ge),ge},t};yQ.exports=Nle;var Gle=yQ.exports;const Hle=Zh(Gle),Qle=n=>typeof n=="object"&&typeof n.then=="function",_h=[];function EQ(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function wQ(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of _h)if(EQ(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=_h.indexOf(r);s!==-1&&_h.splice(s,1)},promise:(Qle(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(_h.push(r),!t)throw r.promise}const Qc=(n,e,t)=>wQ(n,e,!1,t),SQ=(n,e,t)=>void wQ(n,e,!0,t),VE=n=>{if(n===void 0||n.length===0)_h.splice(0,_h.length);else{const e=_h.find(t=>EQ(n,t.keys,t.equal));e&&e.remove()}};var Vle=Object.freeze({__proto__:null});const XT={},Ai=n=>void Object.assign(XT,n);function jle(n,e){function t(u,{args:f=[],attach:h,...d},m){let g=`${u[0].toUpperCase()}${u.slice(1)}`,v;if(u==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const p=d.object;v=zp(p,{type:u,root:m,attach:h,primitive:!0})}else{const p=XT[g];if(!p)throw new Error(`R3F: ${g} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");v=zp(new p(...f),{type:u,root:m,attach:h,memoizedProps:{args:f}})}return v.__r3f.attach===void 0&&(v instanceof Gt?v.__r3f.attach="geometry":v instanceof ur&&(v.__r3f.attach="material")),g!=="inject"&&GS(v,d),v}function i(u,f){let h=!1;if(f){var d,m;(d=f.__r3f)!=null&&d.attach?NS(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),h=!0),h||(m=u.__r3f)==null||m.objects.push(f),f.__r3f||zp(f,{}),f.__r3f.parent=u,OM(f),Up(f)}}function r(u,f,h){let d=!1;if(f){var m,g;if((m=f.__r3f)!=null&&m.attach)NS(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const v=u.children.filter(A=>A!==f),p=v.indexOf(h);u.children=[...v.slice(0,p),f,...v.slice(p)],d=!0}d||(g=u.__r3f)==null||g.objects.push(f),f.__r3f||zp(f,{}),f.__r3f.parent=u,OM(f),Up(f)}}function s(u,f,h=!1){u&&[...u].forEach(d=>o(f,d,h))}function o(u,f,h){if(f){var d,m,g;if(f.__r3f&&(f.__r3f.parent=null),(d=u.__r3f)!=null&&d.objects&&(u.__r3f.objects=u.__r3f.objects.filter(w=>w!==f)),(m=f.__r3f)!=null&&m.attach)ED(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var v;u.remove(f),(v=f.__r3f)!=null&&v.root&&Kle(f_(f),f)}const A=(g=f.__r3f)==null?void 0:g.primitive,y=!A&&(h===void 0?f.dispose!==null:h);if(!A){var p;s((p=f.__r3f)==null?void 0:p.objects,f,y),s(f.children,f,y)}if(delete f.__r3f,y&&f.dispose&&f.type!=="Scene"){const w=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?LM.unstable_scheduleCallback(LM.unstable_IdlePriority,w):w()}Up(u)}}function a(u,f,h,d){var m;const g=(m=u.__r3f)==null?void 0:m.parent;if(!g)return;const v=t(f,h,u.__r3f.root);if(u.children){for(const p of u.children)p.__r3f&&i(v,p);u.children=u.children.filter(p=>!p.__r3f)}u.__r3f.objects.forEach(p=>i(v,p)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(g,u),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),i(g,v),v.raycast&&v.__r3f.eventCount&&f_(v).getState().internal.interaction.push(v),[d,d.alternate].forEach(p=>{p!==null&&(p.stateNode=v,p.ref&&(typeof p.ref=="function"?p.ref(v):p.ref.current=v))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Hle({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const h=u.getState().scene;h.__r3f&&(h.__r3f.root=u,i(h,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,h)=>{if(!f||!h)return;const d=u.getState().scene;d.__r3f&&r(d,f,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,h,d){var m;if(((m=u==null?void 0:u.__r3f)!=null?m:{}).primitive&&d.object&&d.object!==u)return[!0];{const{args:v=[],children:p,...A}=d,{args:y=[],children:w,...S}=h;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((b,M)=>b!==y[M]))return[!0];const C=RQ(u,A,S,!0);return C.changes.length?[!1,C]:null}},commitUpdate(u,[f,h],d,m,g,v){f?a(u,d,g,v):GS(u,h)},commitMount(u,f,h,d){var m;const g=(m=u.__r3f)!=null?m:{};u.raycast&&g.handlers&&g.eventCount&&f_(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>zp(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:h,parent:d}=(f=u.__r3f)!=null?f:{};h&&d&&ED(d,u,h),u.isObject3D&&(u.visible=!1),Up(u)},unhideInstance(u,f){var h;const{attach:d,parent:m}=(h=u.__r3f)!=null?h:{};d&&m&&NS(m,u,d),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),Up(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():um.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&xi.fun(performance.now)?performance.now:xi.fun(Date.now)?Date.now:()=>0,scheduleTimeout:xi.fun(setTimeout)?setTimeout:void 0,cancelTimeout:xi.fun(clearTimeout)?clearTimeout:void 0}),applyProps:GS}}var vD,yD;const kS=n=>"colorSpace"in n||"outputColorSpace"in n,CQ=()=>{var n;return(n=XT.ColorManagement)!=null?n:null},bQ=n=>n&&n.isOrthographicCamera,Wle=n=>n&&n.hasOwnProperty("current"),p0=typeof window<"u"&&((vD=window.document)!=null&&vD.createElement||((yD=window.navigator)==null?void 0:yD.product)==="ReactNative")?E.useLayoutEffect:E.useEffect;function MQ(n){const e=E.useRef(n);return p0(()=>void(e.current=n),[n]),e}function Yle({set:n}){return p0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class IQ extends E.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}IQ.getDerivedStateFromError=()=>({error:!0});const TQ="__default",xD=new Map,Xle=n=>n&&!!n.memoized&&!!n.changes;function BQ(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Op=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function f_(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const xi={obj:n=>n===Object(n)&&!xi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(xi.str(n)||xi.num(n)||xi.boo(n))return n===e;const s=xi.obj(n);if(s&&i==="reference")return n===e;const o=xi.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!xi.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(xi.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function qT(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function PQ(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function zp(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function FM(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const _D=/-\d+$/;function NS(n,e,t){if(xi.str(t)){if(_D.test(t)){const s=t.replace(_D,""),{target:o,key:a}=FM(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=FM(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function ED(n,e,t){var i,r;if(xi.str(t)){const{target:s,key:o}=FM(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function RQ(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,f=Object.entries(r),h=[];if(c){const m=Object.keys(l);for(let g=0;g<m.length;g++)r.hasOwnProperty(m[g])||f.unshift([m[g],TQ+"remove"])}f.forEach(([m,g])=>{var v;if((v=n.__r3f)!=null&&v.primitive&&m==="object"||xi.equ(g,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return h.push([m,g,!0,[]]);let p=[];m.includes("-")&&(p=m.split("-")),h.push([m,g,!1,p]);for(const A in r){const y=r[A];A.startsWith(`${m}-`)&&h.push([A,y,!1,A.split("-")])}});const d={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(d.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(d.attach=u.memoizedProps.attach),{memoized:d,changes:h}}const qle=typeof process<"u"&&!1;function GS(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=Xle(e)?e:RQ(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let u=0;u<a.length;u++){let[f,h,d,m]=a[u];if(kS(n)){const A="srgb",y="srgb-linear";f==="encoding"?(f="colorSpace",h=h===3001?A:y):f==="outputEncoding"&&(f="outputColorSpace",h=h===3001?A:y)}let g=n,v=g[f];if(m.length&&(v=m.reduce((p,A)=>p[A],n),!(v&&v.set))){const[p,...A]=m.reverse();g=A.reverse().reduce((y,w)=>y[w],n),f=p}if(h===TQ+"remove")if(g.constructor){let p=xD.get(g.constructor);p||(p=new g.constructor,xD.set(g.constructor,p)),h=p[f]}else h=0;if(d&&i)h?i.handlers[f]=h:delete i.handlers[f],i.eventCount=Object.keys(i.handlers).length;else if(v&&v.set&&(v.copy||v instanceof Th)){if(Array.isArray(h))v.fromArray?v.fromArray(h):v.set(...h);else if(v.copy&&h&&h.constructor&&(qle?v.constructor.name===h.constructor.name:v.constructor===h.constructor))v.copy(h);else if(h!==void 0){const p=v instanceof et;!p&&v.setScalar?v.setScalar(h):v instanceof Th&&h instanceof Th?v.mask=h.mask:v.set(h),!CQ()&&s&&!s.linear&&p&&v.convertSRGBToLinear()}}else if(g[f]=h,g[f]instanceof Nn&&g[f].format===Vn&&g[f].type===hi&&s){const p=g[f];kS(p)&&kS(s.gl)?p.colorSpace=s.gl.outputColorSpace:p.encoding=s.gl.outputEncoding}Up(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const u=f_(n).getState().internal,f=u.interaction.indexOf(n);f>-1&&u.interaction.splice(f,1),i.eventCount&&u.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&OM(n),n}function Up(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function OM(n){n.onUpdate==null||n.onUpdate(n)}function DQ(n,e){n.manual||(bQ(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function F2(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Jle(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return um.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return um.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return um.ContinuousEventPriority;default:return um.DefaultEventPriority}}function LQ(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Kle(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{LQ(t.capturedMap,e,i,r)})}function FQ(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),f=new Set,h=[],d=c?c(u.internal.interaction):u.internal.interaction;for(let p=0;p<d.length;p++){const A=Op(d[p]);A&&(A.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function m(p){const A=Op(p);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var y;A.events.compute==null||A.events.compute(l,A,(y=A.previousRoot)==null?void 0:y.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(p,!0):[]}let g=d.flatMap(m).sort((p,A)=>{const y=Op(p.object),w=Op(A.object);return!y||!w?p.distance-A.distance:w.events.priority-y.events.priority||p.distance-A.distance}).filter(p=>{const A=F2(p);return f.has(A)?!1:(f.add(A),!0)});u.events.filter&&(g=u.events.filter(g,u));for(const p of g){let A=p.object;for(;A;){var v;(v=A.__r3f)!=null&&v.eventCount&&h.push({...p,eventObject:A}),A=A.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let p of u.internal.capturedMap.get(l.pointerId).values())f.has(F2(p.intersection))||h.push(p.intersection);return h}function r(l,c,u,f){const h=n.getState();if(l.length){const d={stopped:!1};for(const m of l){const g=Op(m.object)||h,{raycaster:v,pointer:p,camera:A,internal:y}=g,w=new F(p.x,p.y,0).unproject(A),S=T=>{var D,R;return(D=(R=y.capturedMap.get(T))==null?void 0:R.has(m.eventObject))!=null?D:!1},C=T=>{const D={intersection:m,target:c.target};y.capturedMap.has(T)?y.capturedMap.get(T).set(m.eventObject,D):y.capturedMap.set(T,new Map([[m.eventObject,D]])),c.target.setPointerCapture(T)},b=T=>{const D=y.capturedMap.get(T);D&&LQ(y.capturedMap,m.eventObject,D,T)};let M={};for(let T in c){let D=c[T];typeof D!="function"&&(M[T]=D)}let I={...m,...M,pointer:p,intersections:l,stopped:d.stopped,delta:u,unprojectedPoint:w,ray:v.ray,camera:A,stopPropagation(){const T="pointerId"in c&&y.capturedMap.get(c.pointerId);if((!T||T.has(m.eventObject))&&(I.stopped=d.stopped=!0,y.hovered.size&&Array.from(y.hovered.values()).find(D=>D.eventObject===m.eventObject))){const D=l.slice(0,l.indexOf(m));s([...D,m])}},target:{hasPointerCapture:S,setPointerCapture:C,releasePointerCapture:b},currentTarget:{hasPointerCapture:S,setPointerCapture:C,releasePointerCapture:b},nativeEvent:c};if(f(I),d.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const h=u.eventObject.__r3f,d=h==null?void 0:h.handlers;if(c.hovered.delete(F2(u)),h!=null&&h.eventCount){const m={...u,intersections:l};d.onPointerOut==null||d.onPointerOut(m),d.onPointerLeave==null||d.onPointerLeave(m)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:h}=n.getState();h.lastEvent.current=u;const d=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=i(u,d?t:void 0),p=m?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=v.map(y=>y.eventObject)),m&&!v.length&&p<=2&&(o(u,h.interaction),f&&f(u)),d&&s(v);function A(y){const w=y.eventObject,S=w.__r3f,C=S==null?void 0:S.handlers;if(S!=null&&S.eventCount)if(d){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const b=F2(y),M=h.hovered.get(b);M?M.stopped&&y.stopPropagation():(h.hovered.set(b,y),C.onPointerOver==null||C.onPointerOver(y),C.onPointerEnter==null||C.onPointerEnter(y))}C.onPointerMove==null||C.onPointerMove(y)}else{const b=C[l];b?(!m||h.initialHits.includes(w))&&(o(u,h.interaction.filter(M=>!h.initialHits.includes(M))),b(y)):m&&h.initialHits.includes(w)&&o(u,h.interaction.filter(M=>!h.initialHits.includes(M)))}}r(v,u,p,A)}}return{handlePointer:a}}const $le=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],OQ=n=>!!(n!=null&&n.render),Yh=E.createContext(null),Zle=(n,e)=>{const t=QE((a,l)=>{const c=new F,u=new F,f=new F;function h(p=l().camera,A=u,y=l().size){const{width:w,height:S,top:C,left:b}=y,M=w/S;A instanceof F?f.copy(A):f.set(...A);const I=p.getWorldPosition(c).distanceTo(f);if(bQ(p))return{width:w/p.zoom,height:S/p.zoom,top:C,left:b,factor:1,distance:I,aspect:M};{const T=p.fov*Math.PI/180,D=2*Math.tan(T/2)*I,R=D*(w/S);return{width:R,height:D,top:C,left:b,factor:w/R,distance:I,aspect:M}}}let d;const m=p=>a(A=>({performance:{...A.performance,current:p}})),g=new Se;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(p=1)=>n(l(),p),advance:(p,A)=>e(p,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new d0,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const p=l();d&&clearTimeout(d),p.performance.current!==p.performance.min&&m(p.performance.min),d=setTimeout(()=>m(l().performance.max),p.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:p=>a(A=>({...A,events:{...A.events,...p}})),setSize:(p,A,y,w,S)=>{const C=l().camera,b={width:p,height:A,top:w||0,left:S||0,updateStyle:y};a(M=>({size:b,viewport:{...M.viewport,...h(C,u,b)}}))},setDpr:p=>a(A=>{const y=BQ(p);return{viewport:{...A.viewport,dpr:y,initialDpr:A.viewport.initialDpr||y}}}),setFrameloop:(p="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,p!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:p}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:E.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(p,A,y)=>{const w=l().internal;return w.priority=w.priority+(A>0?1:0),w.subscribers.push({ref:p,priority:A,store:y}),w.subscribers=w.subscribers.sort((S,C)=>S.priority-C.priority),()=>{const S=l().internal;S!=null&&S.subscribers&&(S.priority=S.priority-(A>0?1:0),S.subscribers=S.subscribers.filter(C=>C.ref!==p))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var h;r=l,s=c.dpr,DQ(a,l),u.setPixelRatio(c.dpr);const d=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,d)}a!==o&&(o=a,f(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function JT(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let O2,zQ=new Set,UQ=new Set,kQ=new Set;const gv=n=>JT(n,zQ),jE=n=>JT(n,UQ),ece=n=>JT(n,kQ);function HS(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function kp(n,e){switch(n){case"before":return HS(zQ,e);case"after":return HS(UQ,e);case"tail":return HS(kQ,e)}}let QS,VS;function jS(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),QS=e.internal.subscribers,O2=0;O2<QS.length;O2++)VS=QS[O2],VS.ref.current(VS.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function tce(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,kp("before",c),t=!0;for(const f of n.values()){var u;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(i+=jS(c,s))}if(t=!1,kp("after",c),i===0)return kp("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,u=1){var f;if(!c)return n.forEach(h=>a(h.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,f,h){if(u&&kp("before",c),f)jS(c,f,h);else for(const d of n.values())jS(c,d.store.getState());u&&kp("after",c)}return{loop:o,invalidate:a,advance:l}}function nce(n){const e=E.useRef(null);return p0(()=>void(e.current=n.current.__r3f),[n]),e}function WE(){const n=E.useContext(Yh);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Pe(n=t=>t,e){return WE()(n,e)}function Bt(n,e=0){const t=WE(),i=t.getState().internal.subscribe,r=MQ(n);return p0(()=>i(r,e,t),[e,i,t]),null}function ice(n){return E.useMemo(()=>qT(n),[n])}const wD=new WeakMap;function NQ(n,e){return function(t,...i){let r=wD.get(t);return r||(r=new t,wD.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,qT(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Pi(n,e,t,i){const r=Array.isArray(e)?e:[e],s=Qc(NQ(t,i),[n,...r],{equal:xi.equ});return Array.isArray(e)?s:s[0]}Pi.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return SQ(NQ(t),[n,...i])};Pi.clear=function(n,e){const t=Array.isArray(e)?e:[e];return VE([n,...t])};const Xh=new Map,{invalidate:zM,advance:UM}=tce(Xh),{reconciler:jm,applyProps:yr}=jle(Xh,Jle),qd={objects:"shallow",strict:!1},rce=(n,e)=>{const t=typeof n=="function"?n(e):n;return OQ(t)?t:new vE({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function sce(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function KT(n){const e=Xh.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Zle(zM,UM),o=t||jm.createContainer(s,um.ConcurrentRoot,null,!1,null,"",r,null);e||Xh.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:h,scene:d,events:m,onCreated:g,shadows:v=!1,linear:p=!1,flat:A=!1,legacy:y=!1,orthographic:w=!1,frameloop:S="always",dpr:C=[1,2],performance:b,raycaster:M,camera:I,onPointerMissed:T}=u,D=s.getState(),R=D.gl;D.gl||D.set({gl:R=rce(f,n)});let z=D.raycaster;z||D.set({raycaster:z=new Ef});const{params:L,...H}=M||{};if(xi.equ(H,z,qd)||yr(z,{...H}),xi.equ(L,z.params,qd)||yr(z,{params:{...z.params,...L}}),!D.camera||D.camera===c&&!xi.equ(c,I,qd)){c=I;const Y=I instanceof yf,O=Y?I:w?new ti(0,0,0,0,.1,1e3):new mn(75,0,.1,1e3);Y||(O.position.z=5,I&&(yr(O,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(O.manual=!0,O.updateProjectionMatrix())),!D.camera&&!(I!=null&&I.rotation)&&O.lookAt(0,0,0)),D.set({camera:O}),z.camera=O}if(!D.scene){let Y;d instanceof Mo?Y=d:(Y=new Mo,d&&yr(Y,d)),D.set({scene:zp(Y)})}if(!D.xr){var J;const Y=($,k)=>{const V=s.getState();V.frameloop!=="never"&&UM($,!0,V,k)},O=()=>{const $=s.getState();$.gl.xr.enabled=$.gl.xr.isPresenting,$.gl.xr.setAnimationLoop($.gl.xr.isPresenting?Y:null),$.gl.xr.isPresenting||zM($)},W={connect(){const $=s.getState().gl;$.xr.addEventListener("sessionstart",O),$.xr.addEventListener("sessionend",O)},disconnect(){const $=s.getState().gl;$.xr.removeEventListener("sessionstart",O),$.xr.removeEventListener("sessionend",O)}};typeof((J=R.xr)==null?void 0:J.addEventListener)=="function"&&W.connect(),D.set({xr:W})}if(R.shadowMap){const Y=R.shadowMap.enabled,O=R.shadowMap.type;if(R.shadowMap.enabled=!!v,xi.boo(v))R.shadowMap.type=Rg;else if(xi.str(v)){var Z;const W={basic:zG,percentage:rE,soft:Rg,variance:za};R.shadowMap.type=(Z=W[v])!=null?Z:Rg}else xi.obj(v)&&Object.assign(R.shadowMap,v);(Y!==R.shadowMap.enabled||O!==R.shadowMap.type)&&(R.shadowMap.needsUpdate=!0)}const U=CQ();U&&("enabled"in U?U.enabled=!y:"legacyMode"in U&&(U.legacyMode=y)),l||yr(R,{outputEncoding:p?3e3:3001,toneMapping:A?ma:fT}),D.legacy!==y&&D.set(()=>({legacy:y})),D.linear!==p&&D.set(()=>({linear:p})),D.flat!==A&&D.set(()=>({flat:A})),f&&!xi.fun(f)&&!OQ(f)&&!xi.equ(f,R,qd)&&yr(R,f),m&&!D.events.handlers&&D.set({events:m(s)});const X=sce(n,h);return xi.equ(X,D.size,qd)||D.setSize(X.width,X.height,X.updateStyle,X.top,X.left),C&&D.viewport.dpr!==BQ(C)&&D.setDpr(C),D.frameloop!==S&&D.setFrameloop(S),D.onPointerMissed||D.set({onPointerMissed:T}),b&&!xi.equ(b,D.performance,qd)&&D.set(Y=>({performance:{...Y.performance,...b}})),a=g,l=!0,this},render(u){return l||this.configure(),jm.updateContainer(q.jsx(ace,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){$T(n)}}}function oce(n,e,t){console.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const i=KT(e);return i.configure(t),i.render(n)}function ace({store:n,children:e,onCreated:t,rootElement:i}){return p0(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),q.jsx(Yh.Provider,{value:n,children:e})}function $T(n,e){const t=Xh.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),jm.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),PQ(r),Xh.delete(n),e&&e(n)}catch{}},500)})}}function Vc(n,e,t){return q.jsx(lce,{children:n,container:e,state:t},e.uuid)}function lce({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=WE(),[a]=E.useState(()=>new Ef),[l]=E.useState(()=>new Se),c=E.useCallback((f,h)=>{const d={...f};Object.keys(f).forEach(g=>{($le.includes(g)||f[g]!==h[g]&&h[g])&&delete d[g]});let m;if(h&&r){const g=h.camera;m=f.viewport.getCurrentViewport(g,new F,r),g!==f.camera&&DQ(g,r)}return{...d,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...h==null?void 0:h.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...m},...s}},[n]),[u]=E.useState(()=>{const f=o.getState();return QE((d,m)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:d,get:m,setEvents:g=>d(v=>({...v,events:{...v.events,...g}}))}))});return E.useEffect(()=>{const f=o.subscribe(h=>u.setState(d=>c(h,d)));return()=>{f()}},[c]),E.useEffect(()=>{u.setState(f=>c(o.getState(),f))},[c]),E.useEffect(()=>()=>{u.destroy()},[]),q.jsx(q.Fragment,{children:jm.createPortal(q.jsx(Yh.Provider,{value:u,children:e}),u,null)})}jm.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:E.version});const cce=E.unstable_act;function kM(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,t||(a=n.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var u=t&&!i;return i||(i=setTimeout(l,e)),u&&(a=n.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}kM.debounce=kM;var uce=kM;const SD=Zh(uce);function fce(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=E.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=E.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,f=E.useRef(!1);E.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[h,d,m]=E.useMemo(()=>{const A=()=>{if(!l.current.element)return;const{left:y,top:w,width:S,height:C,bottom:b,right:M,x:I,y:T}=l.current.element.getBoundingClientRect(),D={left:y,top:w,width:S,height:C,bottom:b,right:M,x:I,y:T};l.current.element instanceof HTMLElement&&r&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),f.current&&!mce(l.current.lastBounds,D)&&a(l.current.lastBounds=D)};return[A,u?SD(A,u):A,c?SD(A,c):A]},[a,r,c,u]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",m,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function v(){l.current.element&&(l.current.resizeObserver=new s(m),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(A=>A.addEventListener("scroll",m,{capture:!0,passive:!0})))}const p=A=>{!A||A===l.current.element||(g(),l.current.element=A,l.current.scrollContainers=GQ(A),v())};return dce(m,!!t),hce(d),E.useEffect(()=>{g(),v()},[t,m,d]),E.useEffect(()=>g,[]),[p,o,h]}function hce(n){E.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function dce(n,e){E.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function GQ(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...GQ(n.parentElement)]}const pce=["x","y","top","bottom","left","right","width","height"],mce=(n,e)=>pce.every(t=>n[t]===e[t]);var gce=Object.defineProperty,Ace=Object.defineProperties,vce=Object.getOwnPropertyDescriptors,CD=Object.getOwnPropertySymbols,yce=Object.prototype.hasOwnProperty,xce=Object.prototype.propertyIsEnumerable,bD=(n,e,t)=>e in n?gce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,MD=(n,e)=>{for(var t in e||(e={}))yce.call(e,t)&&bD(n,t,e[t]);if(CD)for(var t of CD(e))xce.call(e,t)&&bD(n,t,e[t]);return n},_ce=(n,e)=>Ace(n,vce(e)),ID,TD;typeof window<"u"&&((ID=window.document)!=null&&ID.createElement||((TD=window.navigator)==null?void 0:TD.product)==="ReactNative")?E.useLayoutEffect:E.useEffect;function HQ(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=HQ(i,e,t);if(r)return r;i=i.sibling}}function QQ(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const BD=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=BD;return}return BD.apply(this,arguments)};const ZT=QQ(E.createContext(null));class VQ extends E.Component{render(){return E.createElement(ZT.Provider,{value:this._reactInternals},this.props.children)}}function Ece(){const n=E.useContext(ZT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=E.useId();return E.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=HQ(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function wce(){const n=Ece(),[e]=E.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==ZT&&!e.has(r)&&e.set(r,E.useContext(QQ(r)))}t=t.return}return e}function Sce(){const n=wce();return E.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>E.createElement(e,null,E.createElement(t.Provider,_ce(MD({},i),{value:n.get(t)}))),e=>E.createElement(VQ,MD({},e))),[n])}const WS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function jQ(n){const{handlePointer:e}=FQ(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(WS).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=WS[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=WS[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const Cce=E.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=jQ,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:h,orthographic:d,frameloop:m,dpr:g,performance:v,raycaster:p,camera:A,scene:y,onPointerMissed:w,onCreated:S,...C},b){E.useMemo(()=>Ai(HE),[]);const M=Sce(),[I,T]=fce({scroll:!0,debounce:{scroll:50,resize:0},...i}),D=E.useRef(null),R=E.useRef(null);E.useImperativeHandle(b,()=>D.current);const z=MQ(w),[L,H]=E.useState(!1),[J,Z]=E.useState(!1);if(L)throw L;if(J)throw J;const U=E.useRef(null);p0(()=>{const Y=D.current;T.width>0&&T.height>0&&Y&&(U.current||(U.current=KT(Y)),U.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:h,orthographic:d,frameloop:m,dpr:g,performance:v,raycaster:p,camera:A,scene:y,size:T,onPointerMissed:(...O)=>z.current==null?void 0:z.current(...O),onCreated:O=>{O.events.connect==null||O.events.connect(a?Wle(a)?a.current:a:R.current),l&&O.setEvents({compute:(W,$)=>{const k=W[l+"X"],V=W[l+"Y"];$.pointer.set(k/$.size.width*2-1,-(V/$.size.height)*2+1),$.raycaster.setFromCamera($.pointer,$.camera)}}),S==null||S(O)}}),U.current.render(q.jsx(M,{children:q.jsx(IQ,{set:Z,children:q.jsx(E.Suspense,{fallback:q.jsx(Yle,{set:H}),children:e})})})))}),E.useEffect(()=>{const Y=D.current;if(Y)return()=>$T(Y)},[]);const X=a?"none":"auto";return q.jsx("div",{ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:X,...r},...C,children:q.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:q.jsx("canvas",{ref:D,style:{display:"block"},children:t})})})}),WQ=E.forwardRef(function(e,t){return q.jsx(VQ,{children:q.jsx(Cce,{...e,ref:t})})}),bce=Object.freeze(Object.defineProperty({__proto__:null,Canvas:WQ,ReactThreeFiber:Vle,_roots:Xh,act:cce,addAfterEffect:jE,addEffect:gv,addTail:ece,advance:UM,applyProps:yr,buildGraph:qT,context:Yh,createEvents:FQ,createPortal:Vc,createRoot:KT,dispose:PQ,events:jQ,extend:Ai,flushGlobalEffects:kp,getRootState:Op,invalidate:zM,reconciler:jm,render:oce,unmountComponentAtNode:$T,useFrame:Bt,useGraph:ice,useInstanceHandle:nce,useLoader:Pi,useStore:WE,useThree:Pe},Symbol.toStringTag,{value:"Module"}));var Mce=Object.defineProperty,Ice=(n,e)=>{for(var t in e)Mce(n,t,{get:e[t],enumerable:!0})},ya={};Ice(ya,{assign:()=>eV,colors:()=>qu,createStringInterpolator:()=>o8,skipAnimation:()=>ZQ,to:()=>$Q,willAdvance:()=>a8});var e8=vv(),gn=n=>Av(n,e8),t8=vv();gn.write=n=>Av(n,t8);var YE=vv();gn.onStart=n=>Av(n,YE);var n8=vv();gn.onFrame=n=>Av(n,n8);var i8=vv();gn.onFinish=n=>Av(n,i8);var _m=[];gn.setTimeout=(n,e)=>{const t=gn.now()+e,i=()=>{const s=_m.findIndex(o=>o.cancel==i);~s&&_m.splice(s,1),Iu-=~s?1:0},r={time:t,handler:n,cancel:i};return _m.splice(YQ(t),0,r),Iu+=1,XQ(),r};var YQ=n=>~(~_m.findIndex(e=>e.time>n)||~_m.length);gn.cancel=n=>{YE.delete(n),n8.delete(n),i8.delete(n),e8.delete(n),t8.delete(n)};gn.sync=n=>{NM=!0,gn.batchedUpdates(n),NM=!1};gn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,gn.onStart(t)}return i.handler=n,i.cancel=()=>{YE.delete(t),e=null},i};var r8=typeof window<"u"?window.requestAnimationFrame:()=>{};gn.use=n=>r8=n;gn.now=typeof performance<"u"?()=>performance.now():Date.now;gn.batchedUpdates=n=>n();gn.catch=console.error;gn.frameLoop="always";gn.advance=()=>{gn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):JQ()};var Mu=-1,Iu=0,NM=!1;function Av(n,e){NM?(e.delete(n),n(0)):(e.add(n),XQ())}function XQ(){Mu<0&&(Mu=0,gn.frameLoop!=="demand"&&r8(qQ))}function Tce(){Mu=-1}function qQ(){~Mu&&(r8(qQ),gn.batchedUpdates(JQ))}function JQ(){const n=Mu;Mu=gn.now();const e=YQ(Mu);if(e&&(KQ(_m.splice(0,e),t=>t.handler()),Iu-=e),!Iu){Tce();return}YE.flush(),e8.flush(n?Math.min(64,Mu-n):16.667),n8.flush(),t8.flush(),i8.flush()}function vv(){let n=new Set,e=n;return{add(t){Iu+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Iu-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Iu-=e.size,KQ(e,i=>i(t)&&n.add(i)),Iu+=n.size,e=n)}}}function KQ(n,e){n.forEach(t=>{try{e(t)}catch(i){gn.catch(i)}})}function GM(){}var Bce=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),dt={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function pc(n,e){if(dt.arr(n)){if(!dt.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var an=(n,e)=>n.forEach(e);function zc(n,e,t){if(dt.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var Ks=n=>dt.und(n)?[]:dt.arr(n)?n:[n];function Gg(n,e){if(n.size){const t=Array.from(n);n.clear(),an(t,e)}}var dg=(n,...e)=>Gg(n,t=>t(...e)),s8=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),o8,$Q,qu=null,ZQ=!1,a8=GM,eV=n=>{n.to&&($Q=n.to),n.now&&(gn.now=n.now),n.colors!==void 0&&(qu=n.colors),n.skipAnimation!=null&&(ZQ=n.skipAnimation),n.createStringInterpolator&&(o8=n.createStringInterpolator),n.requestAnimationFrame&&gn.use(n.requestAnimationFrame),n.batchedUpdates&&(gn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(a8=n.willAdvance),n.frameLoop&&(gn.frameLoop=n.frameLoop)},Hg=new Set,ra=[],YS=[],f3=0,yv={get idle(){return!Hg.size&&!ra.length},start(n){f3>n.priority?(Hg.add(n),gn.onStart(Pce)):(tV(n),gn(HM))},advance:HM,sort(n){if(f3)gn.onFrame(()=>yv.sort(n));else{const e=ra.indexOf(n);~e&&(ra.splice(e,1),nV(n))}},clear(){ra=[],Hg.clear()}};function Pce(){Hg.forEach(tV),Hg.clear(),gn(HM)}function tV(n){ra.includes(n)||nV(n)}function nV(n){ra.splice(Rce(ra,e=>e.priority>n.priority),0,n)}function HM(n){const e=YS;for(let t=0;t<ra.length;t++){const i=ra[t];f3=i.priority,i.idle||(a8(i),i.advance(n),i.idle||e.push(i))}return f3=0,YS=ra,YS.length=0,ra=e,ra.length>0}function Rce(n,e){const t=n.findIndex(e);return t<0?n.length:t}var Dce=(n,e,t)=>Math.min(Math.max(t,n),e),Lce={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Wa="[-+]?\\d*\\.?\\d+",h3=Wa+"%";function XE(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var Fce=new RegExp("rgb"+XE(Wa,Wa,Wa)),Oce=new RegExp("rgba"+XE(Wa,Wa,Wa,Wa)),zce=new RegExp("hsl"+XE(Wa,h3,h3)),Uce=new RegExp("hsla"+XE(Wa,h3,h3,Wa)),kce=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Nce=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Gce=/^#([0-9a-fA-F]{6})$/,Hce=/^#([0-9a-fA-F]{8})$/;function Qce(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=Gce.exec(n))?parseInt(e[1]+"ff",16)>>>0:qu&&qu[n]!==void 0?qu[n]:(e=Fce.exec(n))?(Jd(e[1])<<24|Jd(e[2])<<16|Jd(e[3])<<8|255)>>>0:(e=Oce.exec(n))?(Jd(e[1])<<24|Jd(e[2])<<16|Jd(e[3])<<8|DD(e[4]))>>>0:(e=kce.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Hce.exec(n))?parseInt(e[1],16)>>>0:(e=Nce.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=zce.exec(n))?(PD(RD(e[1]),z2(e[2]),z2(e[3]))|255)>>>0:(e=Uce.exec(n))?(PD(RD(e[1]),z2(e[2]),z2(e[3]))|DD(e[4]))>>>0:null}function XS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function PD(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=XS(r,i,n+1/3),o=XS(r,i,n),a=XS(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Jd(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function RD(n){return(parseFloat(n)%360+360)%360/360}function DD(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function z2(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function LD(n){let e=Qce(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var Wm=(n,e,t)=>{if(dt.fun(n))return n;if(dt.arr(n))return Wm({range:n,output:e,extrapolate:t});if(dt.str(n.output[0]))return o8(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=jce(c,s);return Vce(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Vce(n,e,t,i,r,s,o,a,l){let c=l?l(n):n;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>t){if(a==="identity")return c;a==="clamp"&&(c=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function jce(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var Wce=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const i=t*n,r=e==="end"?Math.floor(i):Math.ceil(i);return Dce(0,1,r/n)},d3=1.70158,U2=d3*1.525,FD=d3+1,OD=2*Math.PI/3,zD=2*Math.PI/4.5,k2=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,iV={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>FD*n*n*n-d3*n*n,easeOutBack:n=>1+FD*Math.pow(n-1,3)+d3*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((U2+1)*2*n-U2)/2:(Math.pow(2*n-2,2)*((U2+1)*(n*2-2)+U2)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*OD),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*OD)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*zD))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*zD)/2+1,easeInBounce:n=>1-k2(1-n),easeOutBounce:k2,easeInOutBounce:n=>n<.5?(1-k2(1-2*n))/2:(1+k2(2*n-1))/2,steps:Wce},OA=Symbol.for("FluidValue.get"),Ym=Symbol.for("FluidValue.observers"),bl=n=>!!(n&&n[OA]),Ko=n=>n&&n[OA]?n[OA]():n,UD=n=>n[Ym]||null;function Yce(n,e){n.eventObserved?n.eventObserved(e):n(e)}function p3(n,e){const t=n[Ym];t&&t.forEach(i=>{Yce(i,e)})}var Xce=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");qce(this,e)}},qce=(n,e)=>rV(n,OA,e);function xv(n,e){if(n[OA]){let t=n[Ym];t||rV(n,Ym,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function m3(n,e){const t=n[Ym];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[Ym]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var rV=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),h_=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Jce=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,kD=new RegExp(`(${h_.source})(%|[a-z]+)`,"i"),Kce=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,qE=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,sV=n=>{const[e,t]=$ce(n);if(!e||s8())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&qE.test(t))return sV(t);if(t)return t}return n},$ce=n=>{const e=qE.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},qS,Zce=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,oV=n=>{qS||(qS=qu?new RegExp(`(${Object.keys(qu).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>Ko(s).replace(qE,sV).replace(Jce,LD).replace(qS,LD)),t=e.map(s=>s.match(h_).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Wm({...n,output:s}));return s=>{var l;const o=!kD.test(e[0])&&((l=e.find(c=>kD.test(c)))==null?void 0:l.replace(h_,""));let a=0;return e[0].replace(h_,()=>`${r[a++](s)}${o||""}`).replace(Kce,Zce)}},l8="react-spring: ",aV=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${l8}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},eue=aV(console.warn);function lV(){eue(`${l8}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var tue=aV(console.warn);function nue(){tue(`${l8}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function JE(n){return dt.str(n)&&(n[0]=="#"||/\d/.test(n)||!s8()&&qE.test(n)||n in(qu||{}))}var Kd,d_=new WeakMap,iue=n=>n.forEach(({target:e,contentRect:t})=>{var i;return(i=d_.get(e))==null?void 0:i.forEach(r=>r(t))});function rue(n,e){Kd||typeof ResizeObserver<"u"&&(Kd=new ResizeObserver(iue));let t=d_.get(e);return t||(t=new Set,d_.set(e,t)),t.add(n),Kd&&Kd.observe(e),()=>{const i=d_.get(e);i&&(i.delete(n),!i.size&&Kd&&Kd.unobserve(e))}}var p_=new Set,u1,sue=()=>{const n=()=>{p_.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},oue=n=>(p_.add(n),u1||(u1=sue()),()=>{p_.delete(n),!p_.size&&u1&&(u1(),u1=void 0)}),cV=(n,{container:e=document.documentElement}={})=>e===document.documentElement?oue(n):rue(n,e),aue=(n,e,t)=>e-n===0?1:(t-n)/(e-n),lue={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},cue=class{constructor(n,e){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=t=>{const i=this.info[t],{length:r,position:s}=lue[t];i.current=this.container[`scroll${s}`],i.scrollLength=this.container["scroll"+r]-this.container["client"+r],i.progress=aue(0,i.scrollLength,i.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=n,this.container=e,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},f1=new WeakMap,ND=new WeakMap,JS=new WeakMap,GD=n=>n===document.documentElement?window:n,uue=(n,{container:e=document.documentElement}={})=>{let t=JS.get(e);t||(t=new Set,JS.set(e,t));const i=new cue(n,e);if(t.add(i),!f1.has(e)){const s=()=>(t==null||t.forEach(a=>a.advance()),!0);f1.set(e,s);const o=GD(e);window.addEventListener("resize",s,{passive:!0}),e!==document.documentElement&&ND.set(e,cV(s,{container:e})),o.addEventListener("scroll",s,{passive:!0})}const r=f1.get(e);return gn(r),()=>{var a;gn.cancel(r);const s=JS.get(e);if(!s||(s.delete(i),s.size))return;const o=f1.get(e);f1.delete(e),o&&(GD(e).removeEventListener("scroll",o),window.removeEventListener("resize",o),(a=ND.get(e))==null||a())}};function fue(n){const e=E.useRef(null);return e.current===null&&(e.current=n()),e.current}var $s=s8()?E.useEffect:E.useLayoutEffect,hue=()=>{const n=E.useRef(!1);return $s(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function c8(){const n=E.useState()[1],e=hue();return()=>{e.current&&n(Math.random())}}function due(n,e){const[t]=E.useState(()=>({inputs:e,result:n()})),i=E.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&pue(e,s.inputs)||(s={inputs:e,result:n()}):s=t,E.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function pue(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var KE=n=>E.useEffect(n,mue),mue=[];function QM(n){const e=E.useRef();return E.useEffect(()=>{e.current=n}),e.current}var gue=()=>{const[n,e]=E.useState(null);return $s(()=>{const t=window.matchMedia("(prefers-reduced-motion)"),i=r=>{e(r.matches),eV({skipAnimation:r.matches})};return i(t),t.addEventListener("change",i),()=>{t.removeEventListener("change",i)}},[]),n},zA=Symbol.for("Animated:node"),Aue=n=>!!n&&n[zA]===n,wl=n=>n&&n[zA],u8=(n,e)=>Bce(n,zA,e),$E=n=>n&&n[zA]&&n[zA].getPayload(),uV=class{constructor(){u8(this,this)}getPayload(){return this.payload||[]}},_v=class extends uV{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,dt.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new _v(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return dt.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,dt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},UA=class extends _v{constructor(e){super(0),this._string=null,this._toString=Wm({output:[e,e]})}static create(e){return new UA(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(dt.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Wm({output:[this.getValue(),e]})),this._value=0,super.reset()}},g3={dependencies:null},f8=class extends uV{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return zc(this.source,(i,r)=>{Aue(i)?t[r]=i.getValue(e):bl(i)?t[r]=Ko(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&an(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return zc(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){g3.dependencies&&bl(e)&&g3.dependencies.add(e);const t=$E(e);t&&an(t,i=>this.add(i))}},fV=class extends f8{constructor(e){super(e)}static create(e){return new fV(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(vue)),!0)}};function vue(n){return(JE(n)?UA:_v).create(n)}function VM(n){const e=wl(n);return e?e.constructor:dt.arr(n)?fV:JE(n)?UA:_v}var HD=(n,e)=>{const t=!dt.fun(n)||n.prototype&&n.prototype.isReactComponent;return E.forwardRef((i,r)=>{const s=E.useRef(null),o=t&&E.useCallback(m=>{s.current=_ue(r,m)},[r]),[a,l]=xue(i,e),c=c8(),u=()=>{const m=s.current;if(t&&!m)return;(m?e.applyAnimatedValues(m,a.getValue(!0)):!1)===!1&&c()},f=new yue(u,l),h=E.useRef();$s(()=>(h.current=f,an(l,m=>xv(m,f)),()=>{h.current&&(an(h.current.deps,m=>m3(m,h.current)),gn.cancel(h.current.update))})),E.useEffect(u,[]),KE(()=>()=>{const m=h.current;an(m.deps,g=>m3(g,m))});const d=e.getComponentProps(a.getValue());return E.createElement(n,{...d,ref:o})})},yue=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&gn.write(this.update)}};function xue(n,e){const t=new Set;return g3.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new f8(n),g3.dependencies=null,[n,t]}function _ue(n,e){return n&&(dt.fun(n)?n(e):n.current=e),e}var QD=Symbol.for("AnimatedComponent"),Eue=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new f8(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=VD(o)||"Anonymous";return dt.str(o)?o=s[o]||(s[o]=HD(o,r)):o=o[QD]||(o[QD]=HD(o,r)),o.displayName=`Animated(${a})`,o};return zc(n,(o,a)=>{dt.arr(n)&&(a=VD(o)),s[a]=s(o)}),{animated:s}},VD=n=>dt.str(n)?n:n&&dt.str(n.displayName)?n.displayName:dt.fun(n)&&n.name||null,wue=class{};function Is(n,...e){return dt.fun(n)?n(...e):n}var Qg=(n,e)=>n===!0||!!(e&&n&&(dt.fun(n)?n(e):Ks(n).includes(e))),hV=(n,e)=>dt.obj(n)?e&&n[e]:n,dV=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,Sue=n=>n,ZE=(n,e=Sue)=>{let t=Cue;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);dt.und(s)||(i[r]=s)}return i},Cue=["config","onProps","onStart","onChange","onPause","onResume","onRest"],bue={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Mue(n){const e={};let t=0;if(zc(n,(i,r)=>{bue[r]||(e[r]=i,t++)}),t)return e}function ew(n){const e=Mue(n);if(e){const t={to:e};return zc(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function kA(n){return n=Ko(n),dt.arr(n)?n.map(kA):JE(n)?ya.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function pV(n){for(const e in n)return!0;return!1}function jM(n){return dt.fun(n)||dt.arr(n)&&dt.obj(n[0])}function WM(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function h8(n,e){var t;e&&n.ref!==e&&((t=n.ref)==null||t.delete(n),e.add(n),n.ref=e)}function Iue(n,e,t=1e3){$s(()=>{if(e){let i=0;an(n,(r,s)=>{const o=r.current;if(o.length){let a=t*e[s];isNaN(a)?a=i:i=a,an(o,l=>{an(l.queue,c=>{const u=c.delay;c.delay=f=>a+Is(u||0,f)})}),r.start()}})}else{let i=Promise.resolve();an(n,r=>{const s=r.current;if(s.length){const o=s.map(a=>{const l=a.queue;return a.queue=[],l});i=i.then(()=>(an(s,(a,l)=>an(o[l]||[],c=>a.queue.push(c))),Promise.all(r.start())))}})}})}var mV={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},YM={...mV.default,mass:1,damping:1,easing:iV.linear,clamp:!1},Tue=class{constructor(){this.velocity=0,Object.assign(this,YM)}};function Bue(n,e,t){t&&(t={...t},jD(t,e),e={...t,...e}),jD(n,e),Object.assign(n,e);for(const o in YM)n[o]==null&&(n[o]=YM[o]);let{frequency:i,damping:r}=n;const{mass:s}=n;return dt.und(i)||(i<.01&&(i=.01),r<0&&(r=0),n.tension=Math.pow(2*Math.PI/i,2)*s,n.friction=4*Math.PI*r*s/i),n}function jD(n,e){if(!dt.und(e.decay))n.duration=void 0;else{const t=!dt.und(e.tension)||!dt.und(e.friction);(t||!dt.und(e.frequency)||!dt.und(e.damping)||!dt.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var WD=[],Pue=class{constructor(){this.changed=!1,this.values=WD,this.toValues=null,this.fromValues=WD,this.config=new Tue,this.immediate=!1}};function gV(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=Qg(t.cancel??(i==null?void 0:i.cancel),e);if(u)d();else{dt.und(t.pause)||(r.paused=Qg(t.pause,e));let m=i==null?void 0:i.pause;m!==!0&&(m=r.paused||Qg(m,e)),l=Is(t.delay||0,e),m?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function f(){r.resumeQueue.add(h),r.timeouts.delete(c),c.cancel(),l=c.time-gn.now()}function h(){l>0&&!ya.skipAnimation?(r.delayed=!0,c=gn.setTimeout(d,l),r.pauseQueue.add(f),r.timeouts.add(c)):d()}function d(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(f),r.timeouts.delete(c),n<=(r.cancelId||0)&&(u=!0);try{s.start({...t,callId:n,cancel:u},o)}catch(m){a(m)}}})}var d8=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?Em(n.get()):e.every(t=>t.noop)?AV(n.get()):Ha(n.get(),e.every(t=>t.finished)),AV=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),Ha=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),Em=n=>({value:n,cancelled:!0,finished:!1});function vV(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const c=ZE(e,(v,p)=>p==="onRest"?void 0:v);let u,f;const h=new Promise((v,p)=>(u=v,f=p)),d=v=>{const p=r<=(t.cancelId||0)&&Em(i)||r!==t.asyncId&&Ha(i,!1);if(p)throw v.result=p,f(v),v},m=(v,p)=>{const A=new XM,y=new YD;return(async()=>{if(ya.skipAnimation)throw NA(t),y.result=Ha(i,!1),f(y),y;d(A);const w=dt.obj(v)?{...v}:{...p,to:v};w.parentId=r,zc(c,(C,b)=>{dt.und(w[b])&&(w[b]=C)});const S=await i.start(w);return d(A),t.paused&&await new Promise(C=>{t.resumeQueue.add(C)}),S})()};let g;if(ya.skipAnimation)return NA(t),Ha(i,!1);try{let v;dt.arr(n)?v=(async p=>{for(const A of p)await m(A)})(n):v=Promise.resolve(n(m,i.stop.bind(i))),await Promise.all([v.then(u),h]),g=Ha(i.get(),!0,!1)}catch(v){if(v instanceof XM)g=v.result;else if(v instanceof YD)g=v.result;else throw v}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return dt.fun(o)&&gn.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function NA(n,e){Gg(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var XM=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},YD=class extends Error{constructor(){super("SkipAnimationSignal")}},qM=n=>n instanceof tw,Rue=1,tw=class extends Xce{constructor(){super(...arguments),this.id=Rue++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=wl(this);return e&&e.getValue()}to(...e){return ya.to(this,e)}interpolate(...e){return lV(),ya.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){p3(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||yv.sort(this),p3(this,{type:"priority",parent:this,priority:e})}},qh=Symbol.for("SpringPhase"),yV=1,JM=2,KM=4,KS=n=>(n[qh]&yV)>0,cu=n=>(n[qh]&JM)>0,h1=n=>(n[qh]&KM)>0,XD=(n,e)=>e?n[qh]|=JM|yV:n[qh]&=~JM,qD=(n,e)=>e?n[qh]|=KM:n[qh]&=~KM,p8=class extends tw{constructor(e,t){if(super(),this.animation=new Pue,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!dt.und(e)||!dt.und(t)){const i=dt.obj(e)?{...e}:{...t,from:e};dt.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(cu(this)||this._state.asyncTo)||h1(this)}get goal(){return Ko(this.animation.to)}get velocity(){const e=wl(this);return e instanceof _v?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return KS(this)}get isAnimating(){return cu(this)}get isPaused(){return h1(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1;const r=this.animation;let{toValues:s}=r;const{config:o}=r,a=$E(r.to);!a&&bl(r.to)&&(s=Ks(Ko(r.to))),r.values.forEach((u,f)=>{if(u.done)return;const h=u.constructor==UA?1:a?a[f].lastPosition:s[f];let d=r.immediate,m=h;if(!d){if(m=u.lastPosition,o.tension<=0){u.done=!0;return}let g=u.elapsedTime+=e;const v=r.fromValues[f],p=u.v0!=null?u.v0:u.v0=dt.arr(o.velocity)?o.velocity[f]:o.velocity;let A;const y=o.precision||(v==h?.005:Math.min(1,Math.abs(h-v)*.001));if(dt.und(o.duration))if(o.decay){const w=o.decay===!0?.998:o.decay,S=Math.exp(-(1-w)*g);m=v+p/(1-w)*(1-S),d=Math.abs(u.lastPosition-m)<=y,A=p*S}else{A=u.lastVelocity==null?p:u.lastVelocity;const w=o.restVelocity||y/10,S=o.clamp?0:o.bounce,C=!dt.und(S),b=v==h?u.v0>0:v<h;let M,I=!1;const T=1,D=Math.ceil(e/T);for(let R=0;R<D&&(M=Math.abs(A)>w,!(!M&&(d=Math.abs(h-m)<=y,d)));++R){C&&(I=m==h||m>h==b,I&&(A=-A*S,m=h));const z=-o.tension*1e-6*(m-h),L=-o.friction*.001*A,H=(z+L)/o.mass;A=A+H*T,m=m+A*T}}else{let w=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,u.durationProgress>0&&(u.elapsedTime=o.duration*u.durationProgress,g=u.elapsedTime+=e)),w=(o.progress||0)+g/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),m=v+o.easing(w)*(h-v),A=(m-u.lastPosition)/e,d=w==1}u.lastVelocity=A,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),d=!0)}a&&!a[f].done&&(d=!1),d?u.done=!0:t=!1,u.setValue(m,o.round)&&(i=!0)});const l=wl(this),c=l.getValue();if(t){const u=Ko(r.to);(c!==u||i)&&!o.decay?(l.setValue(u),this._onChange(u)):i&&o.decay&&this._onChange(c),this._stop()}else i&&this._onChange(c)}set(e){return gn.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(cu(this)){const{to:e,config:t}=this.animation;gn.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return dt.und(e)?(i=this.queue||[],this.queue=[]):i=[dt.obj(e)?e:{...t,to:e}],Promise.all(i.map(r=>this._update(r))).then(r=>d8(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),NA(this._state,e&&this._lastCallId),gn.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:r}=e;i=dt.obj(i)?i[t]:i,(i==null||jM(i))&&(i=void 0),r=dt.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:i,from:r};return KS(this)||(e.reverse&&([i,r]=[r,i]),r=Ko(r),dt.und(r)?wl(this)||this._set(i):this._set(r)),s}_update({...e},t){const{key:i,defaultProps:r}=this;e.default&&Object.assign(r,ZE(e,(a,l)=>/^on/.test(l)?hV(a,i):a)),KD(this,e,"onProps"),p1(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return gV(++this._lastCallId,{key:i,props:e,defaultProps:r,state:o,actions:{pause:()=>{h1(this)||(qD(this,!0),dg(o.pauseQueue),p1(this,"onPause",Ha(this,d1(this,this.animation.to)),this))},resume:()=>{h1(this)&&(qD(this,!1),cu(this)&&this._resume(),dg(o.resumeQueue),p1(this,"onResume",Ha(this,d1(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(a=>{if(e.loop&&a.finished&&!(t&&a.noop)){const l=xV(e);if(l)return this._update(l,!0)}return a})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(Em(this));const r=!dt.und(e.to),s=!dt.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(Em(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:f=c,from:h=u}=e;s&&!r&&(!t.default||dt.und(f))&&(f=h),t.reverse&&([f,h]=[h,f]);const d=!pc(h,u);d&&(l.from=h),h=Ko(h);const m=!pc(f,c);m&&this._focus(f);const g=jM(t.to),{config:v}=l,{decay:p,velocity:A}=v;(r||s)&&(v.velocity=0),t.config&&!g&&Bue(v,Is(t.config,o),t.config!==a.config?Is(a.config,o):void 0);let y=wl(this);if(!y||dt.und(f))return i(Ha(this,!0));const w=dt.und(t.reset)?s&&!t.default:!dt.und(h)&&Qg(t.reset,o),S=w?h:this.get(),C=kA(f),b=dt.num(C)||dt.arr(C)||JE(C),M=!g&&(!b||Qg(a.immediate||t.immediate,o));if(m){const R=VM(f);if(R!==y.constructor)if(M)y=this._set(C);else throw Error(`Cannot animate between ${y.constructor.name} and ${R.name}, as the "to" prop suggests`)}const I=y.constructor;let T=bl(f),D=!1;if(!T){const R=w||!KS(this)&&d;(m||R)&&(D=pc(kA(S),C),T=!D),(!pc(l.immediate,M)&&!M||!pc(v.decay,p)||!pc(v.velocity,A))&&(T=!0)}if(D&&cu(this)&&(l.changed&&!w?T=!0:T||this._stop(c)),!g&&((T||bl(c))&&(l.values=y.getPayload(),l.toValues=bl(f)?null:I==UA?[1]:Ks(C)),l.immediate!=M&&(l.immediate=M,!M&&!w&&this._set(c)),T)){const{onRest:R}=l;an(Lue,L=>KD(this,t,L));const z=Ha(this,d1(this,c));dg(this._pendingCalls,z),this._pendingCalls.add(i),l.changed&&gn.batchedUpdates(()=>{var L;l.changed=!w,R==null||R(z,this),w?Is(a.onRest,z):(L=l.onStart)==null||L.call(l,z,this)})}w&&this._set(S),g?i(vV(t.to,t,this._state,this)):T?this._start():cu(this)&&!m?this._pendingCalls.add(i):i(AV(S))}_focus(e){const t=this.animation;e!==t.to&&(UD(this)&&this._detach(),t.to=e,UD(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;bl(t)&&(xv(t,this),qM(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;bl(e)&&m3(e,this)}_set(e,t=!0){const i=Ko(e);if(!dt.und(i)){const r=wl(this);if(!r||!pc(i,r.getValue())){const s=VM(i);!r||r.constructor!=s?u8(this,s.create(i)):r.setValue(i),r&&gn.batchedUpdates(()=>{this._onChange(i,t)})}}return wl(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,p1(this,"onStart",Ha(this,d1(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Is(this.animation.onChange,e,this)),Is(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;wl(this).reset(Ko(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),cu(this)||(XD(this,!0),h1(this)||this._resume())}_resume(){ya.skipAnimation?this.finish():yv.start(this)}_stop(e,t){if(cu(this)){XD(this,!1);const i=this.animation;an(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),p3(this,{type:"idle",parent:this});const r=t?Em(this.get()):Ha(this.get(),d1(this,e??i.to));dg(this._pendingCalls,r),i.changed&&(i.changed=!1,p1(this,"onRest",r,this))}}};function d1(n,e){const t=kA(e),i=kA(n.get());return pc(i,t)}function xV(n,e=n.loop,t=n.to){const i=Is(e);if(i){const r=i!==!0&&ew(i),s=(r||n).reverse,o=!r||r.reset;return GA({...n,loop:e,default:!1,pause:void 0,to:!s||jM(t)?t:void 0,from:o?n.from:void 0,reset:o,...r})}}function GA(n){const{to:e,from:t}=n=ew(n),i=new Set;return dt.obj(e)&&JD(e,i),dt.obj(t)&&JD(t,i),n.keys=i.size?Array.from(i):null,n}function Due(n){const e=GA(n);return dt.und(e.default)&&(e.default=ZE(e)),e}function JD(n,e){zc(n,(t,i)=>t!=null&&e.add(i))}var Lue=["onStart","onRest","onChange","onPause","onResume"];function KD(n,e,t){n.animation[t]=e[t]!==dV(e,t)?hV(e[t],n.key):void 0}function p1(n,e,...t){var i,r,s,o;(r=(i=n.animation)[e])==null||r.call(i,...t),(o=(s=n.defaultProps)[e])==null||o.call(s,...t)}var Fue=["onStart","onChange","onRest"],Oue=1,m8=class{constructor(e,t){this.id=Oue++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(const t in e){const i=e[t];dt.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push(GA(e)),this}start(e){let{queue:t}=this;return e?t=Ks(e).map(GA):this.queue=[],this._flush?this._flush(this,t):(CV(this,t),$M(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const i=this.springs;an(Ks(t),r=>i[r].stop(!!e))}else NA(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(dt.und(e))this.start({pause:!0});else{const t=this.springs;an(Ks(e),i=>t[i].pause())}return this}resume(e){if(dt.und(e))this.start({pause:!1});else{const t=this.springs;an(Ks(e),i=>t[i].resume())}return this}each(e){zc(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Gg(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&t.size&&Gg(t,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,Gg(i,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;gn.onFrame(this._onFrame)}};function $M(n,e){return Promise.all(e.map(t=>_V(n,t))).then(t=>d8(n,t))}async function _V(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=dt.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=dt.arr(r)||dt.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):an(Fue,g=>{const v=e[g];if(dt.fun(v)){const p=n._events[g];e[g]=({finished:A,cancelled:y})=>{const w=p.get(v);w?(A||(w.finished=!1),y&&(w.cancelled=!0)):p.set(v,{value:null,finished:A||!1,cancelled:y||!1})},c&&(c[g]=e[g])}});const f=n._state;e.pause===!f.paused?(f.paused=e.pause,dg(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const h=(i||Object.keys(n.springs)).map(g=>n.springs[g].start(e)),d=e.cancel===!0||dV(e,"cancel")===!0;(u||d&&f.asyncId)&&h.push(gV(++n._lastAsyncId,{props:e,state:f,actions:{pause:GM,resume:GM,start(g,v){d?(NA(f,n._lastAsyncId),v(Em(n))):(g.onRest=a,v(vV(u,g,f,n)))}}})),f.paused&&await new Promise(g=>{f.resumeQueue.add(g)});const m=d8(n,await Promise.all(h));if(o&&m.finished&&!(t&&m.noop)){const g=xV(e,o,r);if(g)return CV(n,[g]),_V(n,g,!0)}return l&&gn.batchedUpdates(()=>l(m,n,n.item)),m}function ZM(n,e){const t={...n.springs};return e&&an(Ks(e),i=>{dt.und(i.keys)&&(i=GA(i)),dt.obj(i.to)||(i={...i,to:void 0}),SV(t,i,r=>wV(r))}),EV(n,t),t}function EV(n,e){zc(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,xv(t,n))})}function wV(n,e){const t=new p8;return t.key=n,e&&xv(t,e),t}function SV(n,e,t){e.keys&&an(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function CV(n,e){an(e,t=>{SV(n.springs,t,i=>wV(i,n))})}var m0=({children:n,...e})=>{const t=E.useContext(A3),i=e.pause||!!t.pause,r=e.immediate||!!t.immediate;e=due(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=A3;return E.createElement(s,{value:e},n)},A3=zue(m0,{});m0.Provider=A3.Provider;m0.Consumer=A3.Consumer;function zue(n,e){return Object.assign(n,E.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var nw=()=>{const n=[],e=function(i){nue();const r=[];return an(n,(s,o)=>{if(dt.und(i))r.push(s.start());else{const a=t(i,s,o);a&&r.push(s.start(a))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return an(n,i=>i.pause(...arguments)),this},e.resume=function(){return an(n,i=>i.resume(...arguments)),this},e.set=function(i){an(n,(r,s)=>{const o=dt.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return an(n,(s,o)=>{if(dt.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return an(n,i=>i.stop(...arguments)),this},e.update=function(i){return an(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(i,r,s){return dt.fun(i)?i(s,r):i};return e._getProps=t,e};function g8(n,e,t){const i=dt.fun(e)&&e;i&&!t&&(t=[]);const r=E.useMemo(()=>i||arguments.length==3?nw():void 0,[]),s=E.useRef(0),o=c8(),a=E.useMemo(()=>({ctrls:[],queue:[],flush(p,A){const y=ZM(p,A);return s.current>0&&!a.queue.length&&!Object.keys(y).some(S=>!p.springs[S])?$M(p,A):new Promise(S=>{EV(p,y),a.queue.push(()=>{S($M(p,A))}),o()})}}),[]),l=E.useRef([...a.ctrls]),c=[],u=QM(n)||0;E.useMemo(()=>{an(l.current.slice(n,u),p=>{WM(p,r),p.stop(!0)}),l.current.length=n,f(u,n)},[n]),E.useMemo(()=>{f(0,Math.min(u,n))},t);function f(p,A){for(let y=p;y<A;y++){const w=l.current[y]||(l.current[y]=new m8(null,a.flush)),S=i?i(y,w):e[y];S&&(c[y]=Due(S))}}const h=l.current.map((p,A)=>ZM(p,c[A])),d=E.useContext(m0),m=QM(d),g=d!==m&&pV(d);$s(()=>{s.current++,a.ctrls=l.current;const{queue:p}=a;p.length&&(a.queue=[],an(p,A=>A())),an(l.current,(A,y)=>{r==null||r.add(A),g&&A.start({default:d});const w=c[y];w&&(h8(A,w.ref),A.ref?A.queue.push(w):A.start(w))})}),KE(()=>()=>{an(a.ctrls,p=>p.stop(!0))});const v=h.map(p=>({...p}));return r?[v,r]:v}function Jh(n,e){const t=dt.fun(n),[[i],r]=g8(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[i,r]:i}var Uue=()=>nw(),kue=()=>E.useState(Uue)[0],Nue=(n,e)=>{const t=fue(()=>new p8(n,e));return KE(()=>()=>{t.stop()}),t};function bV(n,e,t){const i=dt.fun(e)&&e;i&&!t&&(t=[]);let r=!0,s;const o=g8(n,(a,l)=>{const c=i?i(a,l):e;return s=c.ref,r=r&&c.reverse,c},t||[{}]);if($s(()=>{an(o[1].current,(a,l)=>{const c=o[1].current[l+(r?1:-1)];if(h8(a,s),a.ref){c&&a.update({to:c.springs});return}c?a.start({to:c.springs}):a.start()})},t),i||arguments.length==3){const a=s??o[1];return a._getProps=(l,c,u)=>{const f=dt.fun(l)?l(u,c):l;if(f){const h=a.current[u+(f.reverse?1:-1)];return h&&(f.to=h.springs),f}},o}return o[0]}function MV(n,e,t){const i=dt.fun(e)&&e,{reset:r,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:c,ref:u,config:f}=i?i():e,h=E.useMemo(()=>i||arguments.length==3?nw():void 0,[]),d=Ks(n),m=[],g=E.useRef(null),v=r?null:g.current;$s(()=>{g.current=m}),KE(()=>(an(m,L=>{h==null||h.add(L.ctrl),L.ctrl.ref=h}),()=>{an(g.current,L=>{L.expired&&clearTimeout(L.expirationId),WM(L.ctrl,h),L.ctrl.stop(!0)})}));const p=Hue(d,i?i():e,v),A=r&&g.current||[];$s(()=>an(A,({ctrl:L,item:H,key:J})=>{WM(L,h),Is(c,H,J)}));const y=[];if(v&&an(v,(L,H)=>{L.expired?(clearTimeout(L.expirationId),A.push(L)):(H=y[H]=p.indexOf(L.key),~H&&(m[H]=L))}),an(d,(L,H)=>{m[H]||(m[H]={key:p[H],item:L,phase:"mount",ctrl:new m8},m[H].ctrl.item=L)}),y.length){let L=-1;const{leave:H}=i?i():e;an(y,(J,Z)=>{const U=v[Z];~J?(L=m.indexOf(U),m[L]={...U,item:d[J]}):H&&m.splice(++L,0,U)})}dt.fun(s)&&m.sort((L,H)=>s(L.item,H.item));let w=-o;const S=c8(),C=ZE(e),b=new Map,M=E.useRef(new Map),I=E.useRef(!1);an(m,(L,H)=>{const J=L.key,Z=L.phase,U=i?i():e;let X,Y;const O=Is(U.delay||0,J);if(Z=="mount")X=U.enter,Y="enter";else{const V=p.indexOf(J)<0;if(Z!="leave")if(V)X=U.leave,Y="leave";else if(X=U.update)Y="update";else return;else if(!V)X=U.enter,Y="enter";else return}if(X=Is(X,L.item,H),X=dt.obj(X)?ew(X):{to:X},!X.config){const V=f||C.config;X.config=Is(V,L.item,H,Y)}w+=o;const W={...C,delay:O+w,ref:u,immediate:U.immediate,reset:!1,...X};if(Y=="enter"&&dt.und(W.from)){const V=i?i():e,Q=dt.und(V.initial)||v?V.from:V.initial;W.from=Is(Q,L.item,H)}const{onResolve:$}=W;W.onResolve=V=>{Is($,V);const Q=g.current,j=Q.find(oe=>oe.key===J);if(j&&!(V.cancelled&&j.phase!="update")&&j.ctrl.idle){const oe=Q.every(xe=>xe.ctrl.idle);if(j.phase=="leave"){const xe=Is(a,j.item);if(xe!==!1){const pe=xe===!0?0:xe;if(j.expired=!0,!oe&&pe>0){pe<=2147483647&&(j.expirationId=setTimeout(S,pe));return}}}oe&&Q.some(xe=>xe.expired)&&(M.current.delete(j),l&&(I.current=!0),S())}};const k=ZM(L.ctrl,W);Y==="leave"&&l?M.current.set(L,{phase:Y,springs:k,payload:W}):b.set(L,{phase:Y,springs:k,payload:W})});const T=E.useContext(m0),D=QM(T),R=T!==D&&pV(T);$s(()=>{R&&an(m,L=>{L.ctrl.start({default:T})})},[T]),an(b,(L,H)=>{if(M.current.size){const J=m.findIndex(Z=>Z.key===H.key);m.splice(J,1)}}),$s(()=>{an(M.current.size?M.current:b,({phase:L,payload:H},J)=>{const{ctrl:Z}=J;J.phase=L,h==null||h.add(Z),R&&L=="enter"&&Z.start({default:T}),H&&(h8(Z,H.ref),(Z.ref||h)&&!I.current?Z.update(H):(Z.start(H),I.current&&(I.current=!1)))})},r?void 0:t);const z=L=>E.createElement(E.Fragment,null,m.map((H,J)=>{const{springs:Z}=b.get(H)||H.ctrl,U=L({...Z},H.item,H,J);return U&&U.type?E.createElement(U.type,{...U.props,key:dt.str(H.key)||dt.num(H.key)?H.key:H.ctrl.id,ref:U.ref}):U}));return h?[z,h]:z}var Gue=1;function Hue(n,{key:e,keys:t=e},i){if(t===null){const r=new Set;return n.map(s=>{const o=i&&i.find(a=>a.item===s&&a.phase!=="leave"&&!r.has(a));return o?(r.add(o),o.key):Gue++})}return dt.und(t)?n:dt.fun(t)?n.map(t):Ks(t)}var Que=({container:n,...e}={})=>{const[t,i]=Jh(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...e}),[]);return $s(()=>{const r=uue(({x:s,y:o})=>{i.start({scrollX:s.current,scrollXProgress:s.progress,scrollY:o.current,scrollYProgress:o.progress})},{container:(n==null?void 0:n.current)||void 0});return()=>{an(Object.values(t),s=>s.stop()),r()}},[]),t},Vue=({container:n,...e})=>{const[t,i]=Jh(()=>({width:0,height:0,...e}),[]);return $s(()=>{const r=cV(({width:s,height:o})=>{i.start({width:s,height:o,immediate:t.width.get()===0||t.height.get()===0})},{container:(n==null?void 0:n.current)||void 0});return()=>{an(Object.values(t),s=>s.stop()),r()}},[]),t},jue={any:0,all:1};function Wue(n,e){const[t,i]=E.useState(!1),r=E.useRef(),s=dt.fun(n)&&n,o=s?s():{},{to:a={},from:l={},...c}=o,u=s?e:n,[f,h]=Jh(()=>({from:l,...c}),[]);return $s(()=>{const d=r.current,{root:m,once:g,amount:v="any",...p}=u??{};if(!d||g&&t||typeof IntersectionObserver>"u")return;const A=new WeakMap,y=()=>(a&&h.start(a),i(!0),g?void 0:()=>{l&&h.start(l),i(!1)}),w=C=>{C.forEach(b=>{const M=A.get(b.target);if(b.isIntersecting!==!!M)if(b.isIntersecting){const I=y();dt.fun(I)?A.set(b.target,I):S.unobserve(b.target)}else M&&(M(),A.delete(b.target))})},S=new IntersectionObserver(w,{root:m&&m.current||void 0,threshold:typeof v=="number"||Array.isArray(v)?v:jue[v],...p});return S.observe(d),()=>S.unobserve(d)},[u]),s?[r,f]:[r,t]}function Yue({children:n,...e}){return n(Jh(e))}function Xue({items:n,children:e,...t}){const i=bV(n.length,t);return n.map((r,s)=>{const o=e(r,s);return dt.fun(o)?o(i[s]):o})}function que({items:n,children:e,...t}){return MV(n,t)(e)}var iw=class extends tw{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Wm(...t);const i=this._get(),r=VM(i);u8(this,r.create(i))}advance(e){const t=this._get(),i=this.get();pc(t,i)||(wl(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&$D(this._active)&&$S(this)}_get(){const e=dt.arr(this.source)?this.source.map(Ko):Ks(Ko(this.source));return this.calc(...e)}_start(){this.idle&&!$D(this._active)&&(this.idle=!1,an($E(this),e=>{e.done=!1}),ya.skipAnimation?(gn.batchedUpdates(()=>this.advance()),$S(this)):yv.start(this))}_attach(){let e=1;an(Ks(this.source),t=>{bl(t)&&xv(t,this),qM(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){an(Ks(this.source),e=>{bl(e)&&m3(e,this)}),this._active.clear(),$S(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Ks(this.source).reduce((t,i)=>Math.max(t,(qM(i)?i.priority:0)+1),0))}};function Jue(n){return n.idle!==!1}function $D(n){return!n.size||Array.from(n).every(Jue)}function $S(n){n.idle||(n.idle=!0,an($E(n),e=>{e.done=!0}),p3(n,{type:"idle",parent:n}))}var Kue=(n,...e)=>new iw(n,e),$ue=(n,...e)=>(lV(),new iw(n,e));ya.assign({createStringInterpolator:oV,to:(n,e)=>new iw(n,e)});var Zue=yv.advance,efe=["primitive"].concat(Object.keys(HE).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));ya.assign({createStringInterpolator:oV,colors:Lce,frameLoop:"demand"});gv(()=>{gn.advance()});var tfe=Eue(efe,{applyAnimatedValues:yr}),e6=tfe.animated;const nfe=Object.freeze(Object.defineProperty({__proto__:null,Any:wue,BailSignal:XM,Controller:m8,FrameValue:tw,Globals:ya,Interpolation:iw,Spring:Yue,SpringContext:m0,SpringRef:nw,SpringValue:p8,Trail:Xue,Transition:que,a:e6,animated:e6,config:mV,createInterpolator:Wm,easings:iV,inferTo:ew,interpolate:$ue,to:Kue,update:Zue,useChain:Iue,useInView:Wue,useIsomorphicLayoutEffect:$s,useReducedMotion:gue,useResize:Vue,useScroll:Que,useSpring:Jh,useSpringRef:kue,useSpringValue:Nue,useSprings:g8,useTrail:bV,useTransition:MV},Symbol.toStringTag,{value:"Module"}));var ife=Object.create,rw=Object.defineProperty,rfe=Object.defineProperties,sfe=Object.getOwnPropertyDescriptor,ofe=Object.getOwnPropertyDescriptors,afe=Object.getOwnPropertyNames,v3=Object.getOwnPropertySymbols,lfe=Object.getPrototypeOf,A8=Object.prototype.hasOwnProperty,IV=Object.prototype.propertyIsEnumerable,ZD=(n,e,t)=>e in n?rw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gi=(n,e)=>{for(var t in e||(e={}))A8.call(e,t)&&ZD(n,t,e[t]);if(v3)for(var t of v3(e))IV.call(e,t)&&ZD(n,t,e[t]);return n},uf=(n,e)=>rfe(n,ofe(e)),ff=(n,e)=>{var t={};for(var i in n)A8.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&v3)for(var i of v3(n))e.indexOf(i)<0&&IV.call(n,i)&&(t[i]=n[i]);return t},Ev=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),jc=(n,e)=>{for(var t in e)rw(n,t,{get:e[t],enumerable:!0})},cfe=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of afe(e))!A8.call(n,r)&&r!==t&&rw(n,r,{get:()=>e[r],enumerable:!(i=sfe(e,r))||i.enumerable});return n},ufe=(n,e,t)=>(t=n!=null?ife(lfe(n)):{},cfe(!n||!n.__esModule?rw(t,"default",{value:n,enumerable:!0}):t,n)),eL=(n,e,t)=>new Promise((i,r)=>{var s=l=>{try{a(t.next(l))}catch(c){r(c)}},o=l=>{try{a(t.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())}),ffe=Ev((n,e)=>{e.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,i=>`%${i.charCodeAt(0).toString(16).toUpperCase()}`)}),hfe=Ev((n,e)=>{var t="%[a-f0-9]{2}",i=new RegExp("("+t+")|([^%]+?)","gi"),r=new RegExp("("+t+")+","gi");function s(l,c){try{return[decodeURIComponent(l.join(""))]}catch{}if(l.length===1)return l;c=c||1;var u=l.slice(0,c),f=l.slice(c);return Array.prototype.concat.call([],s(u),s(f))}function o(l){try{return decodeURIComponent(l)}catch{for(var c=l.match(i)||[],u=1;u<c.length;u++)l=s(c,u).join(""),c=l.match(i)||[];return l}}function a(l){for(var c={"%FE%FF":"��","%FF%FE":"��"},u=r.exec(l);u;){try{c[u[0]]=decodeURIComponent(u[0])}catch{var f=o(u[0]);f!==u[0]&&(c[u[0]]=f)}u=r.exec(l)}c["%C2"]="�";for(var h=Object.keys(c),d=0;d<h.length;d++){var m=h[d];l=l.replace(new RegExp(m,"g"),c[m])}return l}e.exports=function(l){if(typeof l!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof l+"`");try{return l=l.replace(/\+/g," "),decodeURIComponent(l)}catch{return a(l)}}}),dfe=Ev((n,e)=>{e.exports=(t,i)=>{if(!(typeof t=="string"&&typeof i=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(i==="")return[t];let r=t.indexOf(i);return r===-1?[t]:[t.slice(0,r),t.slice(r+i.length)]}}),pfe=Ev((n,e)=>{e.exports=function(t,i){for(var r={},s=Object.keys(t),o=Array.isArray(i),a=0;a<s.length;a++){var l=s[a],c=t[l];(o?i.indexOf(l)!==-1:i(l,c,t))&&(r[l]=c)}return r}}),mfe=Ev(n=>{var e=ffe(),t=hfe(),i=dfe(),r=pfe(),s=A=>A==null,o=Symbol("encodeFragmentIdentifier");function a(A){switch(A.arrayFormat){case"index":return y=>(w,S)=>{let C=w.length;return S===void 0||A.skipNull&&S===null||A.skipEmptyString&&S===""?w:S===null?[...w,[u(y,A),"[",C,"]"].join("")]:[...w,[u(y,A),"[",u(C,A),"]=",u(S,A)].join("")]};case"bracket":return y=>(w,S)=>S===void 0||A.skipNull&&S===null||A.skipEmptyString&&S===""?w:S===null?[...w,[u(y,A),"[]"].join("")]:[...w,[u(y,A),"[]=",u(S,A)].join("")];case"colon-list-separator":return y=>(w,S)=>S===void 0||A.skipNull&&S===null||A.skipEmptyString&&S===""?w:S===null?[...w,[u(y,A),":list="].join("")]:[...w,[u(y,A),":list=",u(S,A)].join("")];case"comma":case"separator":case"bracket-separator":{let y=A.arrayFormat==="bracket-separator"?"[]=":"=";return w=>(S,C)=>C===void 0||A.skipNull&&C===null||A.skipEmptyString&&C===""?S:(C=C===null?"":C,S.length===0?[[u(w,A),y,u(C,A)].join("")]:[[S,u(C,A)].join(A.arrayFormatSeparator)])}default:return y=>(w,S)=>S===void 0||A.skipNull&&S===null||A.skipEmptyString&&S===""?w:S===null?[...w,u(y,A)]:[...w,[u(y,A),"=",u(S,A)].join("")]}}function l(A){let y;switch(A.arrayFormat){case"index":return(w,S,C)=>{if(y=/\[(\d*)\]$/.exec(w),w=w.replace(/\[\d*\]$/,""),!y){C[w]=S;return}C[w]===void 0&&(C[w]={}),C[w][y[1]]=S};case"bracket":return(w,S,C)=>{if(y=/(\[\])$/.exec(w),w=w.replace(/\[\]$/,""),!y){C[w]=S;return}if(C[w]===void 0){C[w]=[S];return}C[w]=[].concat(C[w],S)};case"colon-list-separator":return(w,S,C)=>{if(y=/(:list)$/.exec(w),w=w.replace(/:list$/,""),!y){C[w]=S;return}if(C[w]===void 0){C[w]=[S];return}C[w]=[].concat(C[w],S)};case"comma":case"separator":return(w,S,C)=>{let b=typeof S=="string"&&S.includes(A.arrayFormatSeparator),M=typeof S=="string"&&!b&&f(S,A).includes(A.arrayFormatSeparator);S=M?f(S,A):S;let I=b||M?S.split(A.arrayFormatSeparator).map(T=>f(T,A)):S===null?S:f(S,A);C[w]=I};case"bracket-separator":return(w,S,C)=>{let b=/(\[\])$/.test(w);if(w=w.replace(/\[\]$/,""),!b){C[w]=S&&f(S,A);return}let M=S===null?[]:S.split(A.arrayFormatSeparator).map(I=>f(I,A));if(C[w]===void 0){C[w]=M;return}C[w]=[].concat(C[w],M)};default:return(w,S,C)=>{if(C[w]===void 0){C[w]=S;return}C[w]=[].concat(C[w],S)}}}function c(A){if(typeof A!="string"||A.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(A,y){return y.encode?y.strict?e(A):encodeURIComponent(A):A}function f(A,y){return y.decode?t(A):A}function h(A){return Array.isArray(A)?A.sort():typeof A=="object"?h(Object.keys(A)).sort((y,w)=>Number(y)-Number(w)).map(y=>A[y]):A}function d(A){let y=A.indexOf("#");return y!==-1&&(A=A.slice(0,y)),A}function m(A){let y="",w=A.indexOf("#");return w!==-1&&(y=A.slice(w)),y}function g(A){A=d(A);let y=A.indexOf("?");return y===-1?"":A.slice(y+1)}function v(A,y){return y.parseNumbers&&!Number.isNaN(Number(A))&&typeof A=="string"&&A.trim()!==""?A=Number(A):y.parseBooleans&&A!==null&&(A.toLowerCase()==="true"||A.toLowerCase()==="false")&&(A=A.toLowerCase()==="true"),A}function p(A,y){y=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},y),c(y.arrayFormatSeparator);let w=l(y),S=Object.create(null);if(typeof A!="string"||(A=A.trim().replace(/^[?#&]/,""),!A))return S;for(let C of A.split("&")){if(C==="")continue;let[b,M]=i(y.decode?C.replace(/\+/g," "):C,"=");M=M===void 0?null:["comma","separator","bracket-separator"].includes(y.arrayFormat)?M:f(M,y),w(f(b,y),M,S)}for(let C of Object.keys(S)){let b=S[C];if(typeof b=="object"&&b!==null)for(let M of Object.keys(b))b[M]=v(b[M],y);else S[C]=v(b,y)}return y.sort===!1?S:(y.sort===!0?Object.keys(S).sort():Object.keys(S).sort(y.sort)).reduce((C,b)=>{let M=S[b];return M&&typeof M=="object"&&!Array.isArray(M)?C[b]=h(M):C[b]=M,C},Object.create(null))}n.extract=g,n.parse=p,n.stringify=(A,y)=>{if(!A)return"";y=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},y),c(y.arrayFormatSeparator);let w=M=>y.skipNull&&s(A[M])||y.skipEmptyString&&A[M]==="",S=a(y),C={};for(let M of Object.keys(A))w(M)||(C[M]=A[M]);let b=Object.keys(C);return y.sort!==!1&&b.sort(y.sort),b.map(M=>{let I=A[M];return I===void 0?"":I===null?u(M,y):Array.isArray(I)?I.length===0&&y.arrayFormat==="bracket-separator"?u(M,y)+"[]":I.reduce(S(M),[]).join("&"):u(M,y)+"="+u(I,y)}).filter(M=>M.length>0).join("&")},n.parseUrl=(A,y)=>{y=Object.assign({decode:!0},y);let[w,S]=i(A,"#");return Object.assign({url:w.split("?")[0]||"",query:p(g(A),y)},y&&y.parseFragmentIdentifier&&S?{fragmentIdentifier:f(S,y)}:{})},n.stringifyUrl=(A,y)=>{y=Object.assign({encode:!0,strict:!0,[o]:!0},y);let w=d(A.url).split("?")[0]||"",S=n.extract(A.url),C=n.parse(S,{sort:!1}),b=Object.assign(C,A.query),M=n.stringify(b,y);M&&(M=`?${M}`);let I=m(A.url);return A.fragmentIdentifier&&(I=`#${y[o]?u(A.fragmentIdentifier,y):A.fragmentIdentifier}`),`${w}${M}${I}`},n.pick=(A,y,w)=>{w=Object.assign({parseFragmentIdentifier:!0,[o]:!1},w);let{url:S,query:C,fragmentIdentifier:b}=n.parseUrl(A,w);return n.stringifyUrl({url:S,query:r(C,y),fragmentIdentifier:b},w)},n.exclude=(A,y,w)=>{let S=Array.isArray(y)?C=>!y.includes(C):(C,b)=>!y(C,b);return n.pick(A,S,w)}}),gfe=(n,e)=>({dpr:n,camera:{fov:e},linear:!0,flat:!0,gl:{preserveDrawingBuffer:!0}}),Afe=1,vfe=14,tL={zoom:1,distance:14},nL={zoom:5,distance:14},yfe={meshDelay:0,meshDur:0,rotDelay:1.7,rotDur:1,posDelay:1.3,posDur:2.2,logoTransition:3.1,text:2.5,to:1},ZS="https://ruucm.github.io/shadergradient/shadergradient@1.0.0/hdr/",xfe=[{title:"Halo",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.2&cAzimuthAngle=180&cDistance=3.6&cPolarAngle=90&cameraZoom=1&color1=%23ff5005&color2=%23dbba95&color3=%23d0bce1&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=3d&pixelDensity=1&fov=45&positionX=-1.4&positionY=0&positionZ=0&reflection=0.1&rotationX=0&rotationY=10&rotationZ=50&shader=defaults&type=plane&uDensity=1.3&uSpeed=0.4&uStrength=4&uTime=0&uFrequency=5.5&wireframe=false"},{title:"Pensive",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.5&cAzimuthAngle=250&cDistance=1.5&cPolarAngle=140&cameraZoom=12.5&color1=%23809bd6&color2=%23910aff&color3=%23af38ff&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0&positionZ=0&reflection=0.5&rotationX=0&rotationY=0&rotationZ=140&shader=defaults&type=sphere&uAmplitude=7&uDensity=0.8&uFrequency=5.5&uSpeed=0.3&uStrength=0.4&uTime=0&wireframe=false"},{title:"Mint",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.2&cAzimuthAngle=170&cDistance=4.4&cPolarAngle=70&cameraZoom=1&color1=%2394ffd1&color2=%236bf5ff&color3=%23ffffff&embedMode=off&envPreset=city&gizmoHelper=hide&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0.9&positionZ=-0.3&reflection=0.1&rotationX=45&rotationY=0&rotationZ=0&type=waterPlane&uAmplitude=0&uDensity=1.2&uFrequency=0&uSpeed=0.2&uStrength=3.4&uTime=0&wireframe=false&shader=defaults"},{title:"Interstella",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=0.8&cAzimuthAngle=270&cDistance=0.5&cPolarAngle=180&cameraZoom=15.1&color1=%2373bfc4&color2=%23ff810a&color3=%238da0ce&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=env&pixelDensity=1&fov=45&positionX=-0.1&positionY=0&positionZ=0&reflection=0.4&rotationX=0&rotationY=130&rotationZ=70&shader=defaults&type=sphere&uAmplitude=3.2&uDensity=0.8&uFrequency=5.5&uSpeed=0.3&uStrength=0.3&uTime=0&wireframe=false"},{title:"Nighty night",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1&cAzimuthAngle=180&cDistance=2.8&cPolarAngle=80&cameraZoom=9.1&color1=%23606080&color2=%238d7dca&color3=%23212121&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0&positionZ=0&reflection=0.1&rotationX=50&rotationY=0&rotationZ=-60&shader=defaults&type=waterPlane&uAmplitude=0&uDensity=1.5&uFrequency=0&uSpeed=0.3&uStrength=1.5&uTime=8&wireframe=false"},{title:"Viola orientalis",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&brightness=1.1&cAzimuthAngle=0&cDistance=7.1&cPolarAngle=140&cameraZoom=17.3&color1=%23ffffff&color2=%23ffbb00&color3=%230700ff&embedMode=off&envPreset=city&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=0&type=sphere&uAmplitude=1.4&uDensity=1.1&uSpeed=0.1&uStrength=1&uTime=0&wireframe=false&uFrequency=5.5&shader=defaults"},{title:"Universe",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&brightness=1.1&cAzimuthAngle=180&cDistance=3.9&cPolarAngle=115&cameraZoom=1&color1=%235606FF&color2=%23FE8989&color3=%23000000&embedMode=off&envPreset=city&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=-0.5&positionY=0.1&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=235&type=waterPlane&uAmplitude=0&uDensity=1.1&uSpeed=0.1&uStrength=2.4&uTime=0.2&uFrequency=5.5&wireframe=false&shader=defaults"},{title:"Sunset",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&bgColor1=%23000000&bgColor2=%23000000&brightness=1.5&cAzimuthAngle=60&cDistance=7.1&cPolarAngle=90&cameraZoom=15.3&color1=%23ff7a33&color2=%2333a0ff&color3=%23ffc53d&embedMode=off&envPreset=dawn&grain=off&http%3A%2F%2Flocalhost%3A3002%2Fcustomize%3Fanimate=on&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=-0.15&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=0&shader=defaults&type=sphere&uAmplitude=1.4&uDensity=1.1&uSpeed=0.1&uStrength=0.4&uTime=0&uFrequency=5.5&wireframe=false"},{title:"Mandarin",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&bgColor1=%23000000&bgColor2=%23000000&brightness=1.2&cAzimuthAngle=180&cDistance=2.4&cPolarAngle=95&cameraZoom=1&color1=%23ff6a1a&color2=%23c73c00&color3=%23FD4912&embedMode=off&envPreset=city&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=-2.1&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=225&shader=defaults&type=waterPlane&uAmplitude=0&uFrequency=5.5&uDensity=1.8&uSpeed=0.2&uStrength=3&uTime=0.2&wireframe=false"},{title:"Cotton Candy",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.2&cAzimuthAngle=180&cDistance=2.9&cPolarAngle=120&cameraZoom=1&color1=%23ebedff&color2=%23f3f2f8&color3=%23dbf8ff&embedMode=off&envPreset=city&gizmoHelper=hide&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=1.8&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=-90&type=waterPlane&uDensity=1&uSpeed=0.3&uStrength=3&uTime=0.2&uFrequency=5.5&wireframe=false&shader=defaults"}];function _fe(){let[n,e]=E.useState(-1);return[n,t=>{let i=t.gl.domElement,r=a=>{a.preventDefault(),e(1),console.log("[Context Lost]")},s=a=>{e(0),console.log("[Context Restored]")},o=a=>{e(2),console.log("[Context Error]")};return i.addEventListener("webglcontextlost",r),i.addEventListener("webglcontextrestored",s),i.addEventListener("webglcontextcreationerror",o),()=>{i.removeEventListener("webglcontextlost",r),i.removeEventListener("webglcontextrestored",s),i.removeEventListener("webglcontextcreationerror",o)}}]}function Efe({title:n="",color1:e="#ff7e5f",color2:t="#feb47b"}){return q.jsx("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:`linear-gradient(to right, ${e}, ${t})`,color:"white",fontSize:"20px",textAlign:"center",padding:"20px",fontFamily:"Inter",fontWeight:"500"},children:q.jsx("p",{children:n})})}function wfe(n){var e=n,{children:t,pointerEvents:i="none",pixelDensity:r=1,fov:s=45}=e,o=ff(e,["children","pointerEvents","pixelDensity","fov"]);let[a,l]=_fe();return a===1?q.jsx(Efe,{title:"The graphics context has been lost. Please wait while we try to restore it..."}):q.jsx(q.Fragment,{children:q.jsx(WQ,uf(gi(uf(gi({id:"gradientCanvas",resize:{offsetSize:!0}},gfe(r,s)),{style:{pointerEvents:i},onCreated:l}),o),{children:t}),r+s)})}var sw=class{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},Sfe=new ti(-1,1,1,-1,0,1),v8=new Gt;v8.setAttribute("position",new Et([-1,3,0,-1,-1,0,3,-1,0],3));v8.setAttribute("uv",new Et([0,2,0,0,2,0],2));var Cfe=class{constructor(n){this._mesh=new gt(v8,n)}dispose(){this._mesh.geometry.dispose()}render(n){n.render(this._mesh,Sfe)}get material(){return this._mesh.material}set material(n){this._mesh.material=n}},iL=class extends sw{constructor(n,e){super(),this.scene=n,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(n,e,t){let i=n.getContext(),r=n.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);let s,o;this.inverse?(s=0,o=1):(s=1,o=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,s,4294967295),r.buffers.stencil.setClear(o),r.buffers.stencil.setLocked(!0),n.setRenderTarget(t),this.clear&&n.clear(),n.render(this.scene,this.camera),n.setRenderTarget(e),this.clear&&n.clear(),n.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}},bfe=class extends sw{constructor(){super(),this.needsSwap=!1}render(n){n.state.buffers.stencil.setLocked(!1),n.state.buffers.stencil.setTest(!1)}},rL=class extends sw{constructor(n,e){super(),this.textureID=e!==void 0?e:"tDiffuse",n instanceof Wn?(this.uniforms=n.uniforms,this.material=n):n&&(this.uniforms=va.clone(n.uniforms),this.material=new Wn({defines:Object.assign({},n.defines),uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader})),this.fsQuad=new Cfe(this.material)}render(n,e,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(n.setRenderTarget(null),this.fsQuad.render(n)):(n.setRenderTarget(e),this.clear&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),this.fsQuad.render(n))}},sL={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;

		}`},Mfe=class{constructor(n,e){if(this.renderer=n,e===void 0){let t={minFilter:Xt,magFilter:Xt,format:Vn},i=n.getSize(new Se);this._pixelRatio=n.getPixelRatio(),this._width=i.width,this._height=i.height,e=new Qn(this._width*this._pixelRatio,this._height*this._pixelRatio,t),e.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],sL===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),rL===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new rL(sL),this.clock=new d0}swapBuffers(){let n=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=n}addPass(n){this.passes.push(n),n.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(n,e){this.passes.splice(e,0,n),n.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(n){let e=this.passes.indexOf(n);e!==-1&&this.passes.splice(e,1)}isLastEnabledPass(n){for(let e=n+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(n){n===void 0&&(n=this.clock.getDelta());let e=this.renderer.getRenderTarget(),t=!1;for(let i=0,r=this.passes.length;i<r;i++){let s=this.passes[i];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),s.render(this.renderer,this.writeBuffer,this.readBuffer,n,t),s.needsSwap){if(t){let o=this.renderer.getContext(),a=this.renderer.state.buffers.stencil;a.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,n),a.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}iL!==void 0&&(s instanceof iL?t=!0:s instanceof bfe&&(t=!1))}}this.renderer.setRenderTarget(e)}reset(n){if(n===void 0){let e=this.renderer.getSize(new Se);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,n=this.renderTarget1.clone(),n.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=n,this.renderTarget2=n.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(n,e){this._width=n,this._height=e;let t=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(t,i),this.renderTarget2.setSize(t,i);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(t,i)}setPixelRatio(n){this._pixelRatio=n,this.setSize(this._width,this._height)}};new ti(-1,1,1,-1,0,1);var TV=new Gt;TV.setAttribute("position",new Et([-1,3,0,-1,-1,0,3,-1,0],3));TV.setAttribute("uv",new Et([0,2,0,0,2,0],2));var Ife=class extends sw{constructor(n,e,t,i,r){super(),this.scene=n,this.camera=e,this.overrideMaterial=t,this.clearColor=i,this.clearAlpha=r!==void 0?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new et}render(n,e,t){let i=n.autoClear;n.autoClear=!1;let r,s;this.overrideMaterial!==void 0&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(n.getClearColor(this._oldClearColor),r=n.getClearAlpha(),n.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&n.clearDepth(),n.setRenderTarget(this.renderToScreen?null:t),this.clear&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),n.render(this.scene,this.camera),this.clearColor&&n.setClearColor(this._oldClearColor,r),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=s),n.autoClear=i}},pr={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},Tfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",Bfe="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",Pfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",Rfe="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Dfe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Lfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Ffe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Ofe="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",zfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Ufe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",kfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Nfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Gfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Hfe="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Qfe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Vfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",jfe="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Wfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",Yfe=new Map([[pr.SKIP,null],[pr.ADD,Tfe],[pr.ALPHA,Bfe],[pr.AVERAGE,Pfe],[pr.COLOR_BURN,Rfe],[pr.COLOR_DODGE,Dfe],[pr.DARKEN,Lfe],[pr.DIFFERENCE,Ffe],[pr.EXCLUSION,zfe],[pr.LIGHTEN,Ufe],[pr.MULTIPLY,kfe],[pr.DIVIDE,Ofe],[pr.NEGATION,Nfe],[pr.NORMAL,Gfe],[pr.OVERLAY,Hfe],[pr.REFLECT,Qfe],[pr.SCREEN,Vfe],[pr.SOFT_LIGHT,jfe],[pr.SUBTRACT,Wfe]]),Xfe=class extends Yr{constructor(n,e=1){super(),this.blendFunction=n,this.opacity=new es(e)}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n,this.dispatchEvent({type:"change"})}getShaderCode(){return Yfe.get(this.blendFunction)}},$d={uniforms:{tDiffuse:{value:null},shape:{value:1},radius:{value:2},rotateR:{value:Math.PI/12*1},rotateG:{value:Math.PI/12*2},rotateB:{value:Math.PI/12*3},scatter:{value:1},width:{value:20},height:{value:20},blending:{value:1},blendingMode:{value:1},greyscale:{value:!1},disable:{value:!1}},vertexShader:`

		varying vec2 vUV;
		varying vec3 vPosition;

		void main() {

			vUV = uv;
			vPosition = position;

			gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

		}`,fragmentShader:`

		#define SQRT2_MINUS_ONE 0.41421356
		#define SQRT2_HALF_MINUS_ONE 0.20710678
		#define PI2 6.28318531
		#define SHAPE_DOT 1
		#define SHAPE_ELLIPSE 2
		#define SHAPE_LINE 3
		#define SHAPE_SQUARE 4
		#define BLENDING_LINEAR 1
		#define BLENDING_MULTIPLY 2
		#define BLENDING_ADD 3
		#define BLENDING_LIGHTER 4
		#define BLENDING_DARKER 5
		uniform sampler2D tDiffuse;
		uniform float radius;
		uniform float rotateR;
		uniform float rotateG;
		uniform float rotateB;
		uniform float scatter;
		uniform float width;
		uniform float height;
		uniform int shape;
		uniform bool disable;
		uniform float blending;
		uniform int blendingMode;
		varying vec2 vUV;
		varying vec3 vPosition;
		uniform bool greyscale;
		const int samples = 8;

		float blend( float a, float b, float t ) {

		// linear blend
			return a * ( 1.0 - t ) + b * t;

		}

		float hypot( float x, float y ) {

		// vector magnitude
			return sqrt( x * x + y * y );

		}

		float rand( vec2 seed ){

		// get pseudo-random number
			return fract( sin( dot( seed.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );

		}

		float distanceToDotRadius( float channel, vec2 coord, vec2 normal, vec2 p, float angle, float rad_max ) {

		// apply shape-specific transforms
			float dist = hypot( coord.x - p.x, coord.y - p.y );
			float rad = channel;

			if ( shape == SHAPE_DOT ) {

				rad = pow( abs( rad ), 1.125 ) * rad_max;

			} else if ( shape == SHAPE_ELLIPSE ) {

				rad = pow( abs( rad ), 1.125 ) * rad_max;

				if ( dist != 0.0 ) {
					float dot_p = abs( ( p.x - coord.x ) / dist * normal.x + ( p.y - coord.y ) / dist * normal.y );
					dist = ( dist * ( 1.0 - SQRT2_HALF_MINUS_ONE ) ) + dot_p * dist * SQRT2_MINUS_ONE;
				}

			} else if ( shape == SHAPE_LINE ) {

				rad = pow( abs( rad ), 1.5) * rad_max;
				float dot_p = ( p.x - coord.x ) * normal.x + ( p.y - coord.y ) * normal.y;
				dist = hypot( normal.x * dot_p, normal.y * dot_p );

			} else if ( shape == SHAPE_SQUARE ) {

				float theta = atan( p.y - coord.y, p.x - coord.x ) - angle;
				float sin_t = abs( sin( theta ) );
				float cos_t = abs( cos( theta ) );
				rad = pow( abs( rad ), 1.4 );
				rad = rad_max * ( rad + ( ( sin_t > cos_t ) ? rad - sin_t * rad : rad - cos_t * rad ) );

			}

			return rad - dist;

		}

		struct Cell {

		// grid sample positions
			vec2 normal;
			vec2 p1;
			vec2 p2;
			vec2 p3;
			vec2 p4;
			float samp2;
			float samp1;
			float samp3;
			float samp4;

		};

		vec4 getSample( vec2 point ) {

		// multi-sampled point
			vec4 tex = texture2D( tDiffuse, vec2( point.x / width, point.y / height ) );
			float base = rand( vec2( floor( point.x ), floor( point.y ) ) ) * PI2;
			float step = PI2 / float( samples );
			// float dist = radius * 0.66;
			float dist = radius * 0.0;

			for ( int i = 0; i < samples; ++i ) {

				float r = base + step * float( i );
				vec2 coord = point + vec2( cos( r ) * dist, sin( r ) * dist );
				tex += texture2D( tDiffuse, vec2( coord.x / width, coord.y / height ) );

			}

			tex /= float( samples ) + 1.0;
			return tex;

		}

		float getDotColour( Cell c, vec2 p, int channel, float angle, float aa ) {

		// get colour for given point
			float dist_c_1, dist_c_2, dist_c_3, dist_c_4, res;

			if ( channel == 0 ) {

				c.samp1 = getSample( c.p1 ).r;
				c.samp2 = getSample( c.p2 ).r;
				c.samp3 = getSample( c.p3 ).r;
				c.samp4 = getSample( c.p4 ).r;

			} else if (channel == 1) {

				c.samp1 = getSample( c.p1 ).g;
				c.samp2 = getSample( c.p2 ).g;
				c.samp3 = getSample( c.p3 ).g;
				c.samp4 = getSample( c.p4 ).g;

			} else {

				c.samp1 = getSample( c.p1 ).b;
				c.samp3 = getSample( c.p3 ).b;
				c.samp2 = getSample( c.p2 ).b;
				c.samp4 = getSample( c.p4 ).b;

			}

			dist_c_1 = distanceToDotRadius( c.samp1, c.p1, c.normal, p, angle, radius );
			dist_c_2 = distanceToDotRadius( c.samp2, c.p2, c.normal, p, angle, radius );
			dist_c_3 = distanceToDotRadius( c.samp3, c.p3, c.normal, p, angle, radius );
			dist_c_4 = distanceToDotRadius( c.samp4, c.p4, c.normal, p, angle, radius );
			res = ( dist_c_1 > 0.0 ) ? clamp( dist_c_1 / aa, 0.0, 1.0 ) : 0.0;
			// res = 0.0;
			res += ( dist_c_2 > 0.0 ) ? clamp( dist_c_2 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_3 > 0.0 ) ? clamp( dist_c_3 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_4 > 0.0 ) ? clamp( dist_c_4 / aa, 0.0, 1.0 ) : 0.0;
			res = clamp( res, 0.0, 1.0 );

			return res;
			// return 2

		}

		Cell getReferenceCell( vec2 p, vec2 origin, float grid_angle, float step ) {

		// get containing cell
			Cell c;

		// calc grid
			vec2 n = vec2( cos( grid_angle ), sin( grid_angle ) );
			float threshold = step * 0.5;
			float dot_normal = n.x * ( p.x - origin.x ) + n.y * ( p.y - origin.y );
			float dot_line = -n.y * ( p.x - origin.x ) + n.x * ( p.y - origin.y );
			vec2 offset = vec2( n.x * dot_normal, n.y * dot_normal );
			float offset_normal = mod( hypot( offset.x, offset.y ), step );
			float normal_dir = ( dot_normal < 0.0 ) ? 1.0 : -1.0;
			float normal_scale = ( ( offset_normal < threshold ) ? -offset_normal : step - offset_normal ) * normal_dir;
			float offset_line = mod( hypot( ( p.x - offset.x ) - origin.x, ( p.y - offset.y ) - origin.y ), step );
			float line_dir = ( dot_line < 0.0 ) ? 1.0 : -1.0;
			float line_scale = ( ( offset_line < threshold ) ? -offset_line : step - offset_line ) * line_dir;

		// get closest corner
			c.normal = n;
			c.p1.x = p.x - n.x * normal_scale + n.y * line_scale;
			c.p1.y = p.y - n.y * normal_scale - n.x * line_scale;

		// scatter
			if ( scatter != 0.0 ) {

				float off_mag = scatter * threshold * 0.5;
				float off_angle = rand( vec2( floor( c.p1.x ), floor( c.p1.y ) ) ) * PI2;
				c.p1.x += cos( off_angle ) * off_mag;
				c.p1.y += sin( off_angle ) * off_mag;

			}

		// find corners
			float normal_step = normal_dir * ( ( offset_normal < threshold ) ? step : -step );
			float line_step = line_dir * ( ( offset_line < threshold ) ? step : -step );
			c.p2.x = c.p1.x - n.x * normal_step;
			c.p2.y = c.p1.y - n.y * normal_step;
			c.p3.x = c.p1.x + n.y * line_step;
			c.p3.y = c.p1.y - n.x * line_step;
			c.p4.x = c.p1.x - n.x * normal_step + n.y * line_step;
			c.p4.y = c.p1.y - n.y * normal_step - n.x * line_step;

			return c;

		}

		float blendColour( float a, float b, float t ) {

		// blend colours
			if ( blendingMode == BLENDING_LINEAR ) {
				return blend( a, b, 1.0 - t );
			} else if ( blendingMode == BLENDING_ADD ) {
				return blend( a, min( 1.0, a + b ), t );
			} else if ( blendingMode == BLENDING_MULTIPLY ) {
				return blend( a, max( 0.0, a * b ), t );
			} else if ( blendingMode == BLENDING_LIGHTER ) {
				return blend( a, max( a, b ), t );
			} else if ( blendingMode == BLENDING_DARKER ) {
				return blend( a, min( a, b ), t );
			} else {
				return blend( a, b, 1.0 - t );
			}

		}

		void main() {

			if ( ! disable ) {

		// setup
				vec2 p = vec2( vUV.x * width, vUV.y * height ) - vec2(vPosition.x, vPosition.y) * 3.0; // - position values to remove black borders.
				vec2 origin = vec2( 0, 0 );
				float aa = ( radius < 2.5 ) ? radius * 0.5 : 1.25;
				// float aa = 0.0;

		// get channel samples
				Cell cell_r = getReferenceCell( p, origin, rotateR, radius );
				Cell cell_g = getReferenceCell( p, origin, rotateG, radius );
				Cell cell_b = getReferenceCell( p, origin, rotateB, radius );
				float r = getDotColour( cell_r, p, 0, rotateR, aa );
				float g = getDotColour( cell_g, p, 1, rotateG, aa );
				float b = getDotColour( cell_b, p, 2, rotateB, aa );

		// blend with original
				vec4 colour = texture2D( tDiffuse, vUV );
				
				// add masking before blendColour
				if (colour.r == 0.0) {
					r = 0.0;
				} else {
					r = blendColour( r, colour.r, blending );
				}

				if (colour.g == 0.0) {
					g = 0.0;
				} else {
					g = blendColour( g, colour.g, blending );
				}

				if (colour.b == 0.0) {
					b = 0.0;
				} else {
					b = blendColour( b, colour.b, blending );
				}
				
				
				

				if ( greyscale ) {
					r = g = b = (r + b + g) / 3.0;
				}

				// add alpha channel to each r, g, b colors
				vec4 vR;
				vec4 vG;
				vec4 vB;
	
				// apply transparent to outside of mesh
				if (r == 0.0 && colour.r == 0.0) {
					vR = vec4( 0, 0, 0, 0 );
				} else {
					vR = vec4( r, 0, 0, 1 );
				}
	
				if (g == 0.0 && colour.g == 0.0) {
					vG = vec4( 0, 0, 0, 0 );
				} else {
					vG = vec4( 0, g, 0, 1 );
				}
	
				if (b == 0.0 && colour.b == 0.0) {
					vB = vec4( 0, 0, 0, 0 );
				} else {
					vB = vec4( 0, 0, b, 1 );
				}

				// gl_FragColor = vec4( r, g, b, 1.0 );
				gl_FragColor = vR + vG + vB;

			} else {

				gl_FragColor = texture2D( tDiffuse, vUV );

			}

		}`},qfe=class{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},Jfe=new ti(-1,1,1,-1,0,1),y8=new Gt;y8.setAttribute("position",new Et([-1,3,0,-1,-1,0,3,-1,0],3));y8.setAttribute("uv",new Et([0,2,0,0,2,0],2));var Kfe=class{constructor(n){this._mesh=new gt(y8,n)}dispose(){this._mesh.geometry.dispose()}render(n){n.render(this._mesh,Jfe)}get material(){return this._mesh.material}set material(n){this._mesh.material=n}},$fe=class extends qfe{constructor(n,e,t){super(),$d===void 0&&console.error("THREE.HalftonePass requires HalftoneShader"),this.uniforms=va.clone($d.uniforms),this.material=new Wn({uniforms:this.uniforms,fragmentShader:$d.fragmentShader,vertexShader:$d.vertexShader}),this.uniforms.width.value=n,this.uniforms.height.value=e,this.uniforms.disable.value=t.disable,this.uniforms.blending.value=t.blending,this.fsQuad=new Kfe(this.material),this.blendMode=new Xfe(pr.SCREEN),this.extensions=null}render(n,e,t){this.material.uniforms.tDiffuse.value=t.texture,this.renderToScreen?(n.setRenderTarget(null),this.fsQuad.render(n)):(n.setRenderTarget(e),this.clear&&n.clear(),this.fsQuad.render(n))}setSize(n,e){this.uniforms.width.value=n,this.uniforms.height.value=e}initialize(n,e,t){}addEventListener(){}getAttributes(){return this.attributes}getFragmentShader(){return $d.fragmentShader}getVertexShader(){return $d.vertexShader}update(n,e,t){}};function Zfe(n,e){let{gl:t,scene:i,camera:r,size:s}=Pe(),o=E.useMemo(()=>{let a=new Mfe(t);a.addPass(new Ife(i,r));let l={shape:1,radius:2,rotateR:Math.PI/12,rotateB:Math.PI/12*2,rotateG:Math.PI/12*3,scatter:1,blending:e,blendingMode:1,greyscale:!1,disable:n},c=new $fe(s.width,s.height,l);return a.addPass(c),a},[t,i,r,s,n,e]);E.useEffect(()=>o==null?void 0:o.setSize(s.width,s.height),[o,s]),Bt((a,l)=>(t.autoClear=!0,void o.render(l)),1)}function ehe(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var the=ehe;function nhe(n,e,t){let{gl:i,size:r,viewport:s}=Pe(),o=typeof n=="number"?n:r.width*s.dpr,a=r.height*s.dpr,l=(typeof n=="number"?t:n)||{},{samples:c}=l,u=ff(l,["samples"]),f=E.useMemo(()=>{let h;return h=new Qn(o,a,gi({minFilter:Xt,magFilter:Xt,encoding:i.outputEncoding,type:jn},u)),h.samples=c,h},[]);return E.useLayoutEffect(()=>{f.setSize(o,a),c&&(f.samples=c)},[c,f,o,a]),E.useEffect(()=>()=>f.dispose(),[]),f}var ihe=n=>typeof n=="function",rhe=E.forwardRef((n,e)=>{var t=n,{envMap:i,resolution:r=256,frames:s=1/0,children:o,makeDefault:a}=t,l=ff(t,["envMap","resolution","frames","children","makeDefault"]);let c=Pe(({set:A})=>A),u=Pe(({camera:A})=>A),f=Pe(({size:A})=>A),h=E.useRef(null),d=E.useRef(null),m=nhe(r);E.useLayoutEffect(()=>{l.manual||h.current.updateProjectionMatrix()},[f,l]),E.useLayoutEffect(()=>{h.current.updateProjectionMatrix()}),E.useLayoutEffect(()=>{if(a){let A=u;return c(()=>({camera:h.current})),()=>c(()=>({camera:A}))}},[h,a,c]);let g=0,v=null,p=ihe(o);return Bt(A=>{p&&(s===1/0||g<s)&&(d.current.visible=!1,A.gl.setRenderTarget(m),v=A.scene.background,i&&(A.scene.background=i),A.gl.render(A.scene,h.current),A.scene.background=v,A.gl.setRenderTarget(null),d.current.visible=!0,g++)}),q.jsxs(q.Fragment,{children:[q.jsx("orthographicCamera",uf(gi({left:f.width/-2,right:f.width/2,top:f.height/2,bottom:f.height/-2,ref:the([h,e])},l),{children:!p&&o})),q.jsx("group",{ref:d,children:p&&o(m.texture)})]})});function she(n,e){let t=Pe(r=>r.pointer),[i]=E.useState(()=>{let r=new Ef;return function(s,o){r.setFromCamera(t,n instanceof yf?n:n.current);let a=this.constructor.prototype.raycast.bind(this);a&&a(r,o)}});return i}var BV=E.createContext({}),ohe=()=>E.useContext(BV),ahe=2*Math.PI,oL=new Jt,aL=new He,[Zd,eC]=[new Lt,new Lt],lL=new F,cL=new F,lhe=n=>"minPolarAngle"in n,che=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=0,autoClear:i=!0,onUpdate:r,onTarget:s,children:o})=>{let a=Pe(({size:R})=>R),l=Pe(({camera:R})=>R),c=Pe(({controls:R})=>R),u=Pe(({gl:R})=>R),f=Pe(({scene:R})=>R),h=Pe(({invalidate:R})=>R),d=E.useRef(),m=E.useRef(),g=E.useRef(null),[v]=E.useState(()=>new Mo),p=E.useRef(!1),A=E.useRef(0),y=E.useRef(new F(0,0,0)),w=E.useRef(new F(0,0,0));E.useEffect(()=>{w.current.copy(l.up)},[l]);let S=E.useCallback(R=>{p.current=!0,(c||s)&&(y.current=(c==null?void 0:c.target)||(s==null?void 0:s())),A.current=l.position.distanceTo(lL),Zd.copy(l.quaternion),cL.copy(R).multiplyScalar(A.current).add(lL),oL.lookAt(cL),eC.copy(oL.quaternion),h()},[c,l,s,h]);E.useEffect(()=>(f.background&&(d.current=f.background,f.background=null,v.background=d.current),()=>{d.current&&(f.background=d.current)}),[]),Bt((R,z)=>{var L;if(g.current&&m.current){if(p.current)if(Zd.angleTo(eC)<.01)p.current=!1,lhe(c)&&l.up.copy(w.current);else{let H=z*ahe;Zd.rotateTowards(eC,H),l.position.set(0,0,1).applyQuaternion(Zd).multiplyScalar(A.current).add(y.current),l.up.set(0,1,0).applyQuaternion(Zd).normalize(),l.quaternion.copy(Zd),r?r():c&&c.update(),h()}aL.copy(l.matrix).invert(),(L=m.current)==null||L.quaternion.setFromRotationMatrix(aL),i&&(u.autoClear=!1),u.clearDepth(),u.render(v,g.current)}},t);let C=she(g),b=E.useMemo(()=>({tweenCamera:S,raycast:C}),[S]),[M,I]=e,T=n.endsWith("-center")?0:n.endsWith("-left")?-a.width/2+M:a.width/2-M,D=n.startsWith("center-")?0:n.startsWith("top-")?a.height/2-I:-a.height/2+I;return Vc(q.jsxs(BV.Provider,{value:b,children:[q.jsx(rhe,{ref:g,position:[0,0,200]}),q.jsx("group",{ref:m,position:[T,D,0],children:o})]}),v)};function tC({scale:n=[.8,.05,.05],color:e,rotation:t}){return q.jsx("group",{rotation:t,children:q.jsxs("mesh",{position:[.4,0,0],children:[q.jsx("boxGeometry",{args:n}),q.jsx("meshBasicMaterial",{color:e,toneMapped:!1})]})})}function ep(n){var e=n,{onClick:t,font:i,disabled:r,arcStyle:s,label:o,labelColor:a,axisHeadScale:l=1}=e,c=ff(e,["onClick","font","disabled","arcStyle","label","labelColor","axisHeadScale"]);let u=Pe(g=>g.gl),f=E.useMemo(()=>{let g=document.createElement("canvas");g.width=64,g.height=64;let v=g.getContext("2d");return v.beginPath(),v.arc(32,32,16,0,2*Math.PI),v.closePath(),v.fillStyle=s,v.fill(),o&&(v.font=i,v.textAlign="center",v.fillStyle=a,v.fillText(o,32,41)),new _E(g)},[s,o,a,i]),[h,d]=E.useState(!1),m=(o?1:.75)*(h?1.2:1)*l;return q.jsx("sprite",uf(gi({scale:m,onPointerOver:r?void 0:g=>{g.stopPropagation(),d(!0)},onPointerOut:r?void 0:t||(g=>{g.stopPropagation(),d(!1)})},c),{children:q.jsx("spriteMaterial",{map:f,"map-encoding":u.outputEncoding,"map-anisotropy":u.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:o?1:.75,toneMapped:!1})}))}var uhe=n=>{var e=n,{hideNegativeAxes:t,hideAxisHeads:i,disabled:r,font:s="18px Inter var, Arial, sans-serif",axisColors:o=["#ff2060","#20df80","#2080ff"],axisHeadScale:a=1,axisScale:l,labels:c=["X","Y","Z"],labelColor:u="#000",onClick:f}=e,h=ff(e,["hideNegativeAxes","hideAxisHeads","disabled","font","axisColors","axisHeadScale","axisScale","labels","labelColor","onClick"]);let[d,m,g]=o,{tweenCamera:v,raycast:p}=ohe(),A={font:s,disabled:r,labelColor:u,raycast:p,onClick:f,axisHeadScale:a,onPointerDown:r?void 0:y=>{v(y.object.position),y.stopPropagation()}};return q.jsxs("group",uf(gi({scale:40},h),{children:[q.jsx(tC,{color:d,rotation:[0,0,0],scale:l}),q.jsx(tC,{color:m,rotation:[0,0,Math.PI/2],scale:l}),q.jsx(tC,{color:g,rotation:[0,-Math.PI/2,0],scale:l}),!i&&q.jsxs(q.Fragment,{children:[q.jsx(ep,gi({arcStyle:d,position:[1,0,0],label:c[0]},A)),q.jsx(ep,gi({arcStyle:m,position:[0,1,0],label:c[1]},A)),q.jsx(ep,gi({arcStyle:g,position:[0,0,1],label:c[2]},A)),!t&&q.jsxs(q.Fragment,{children:[q.jsx(ep,gi({arcStyle:d,position:[-1,0,0]},A)),q.jsx(ep,gi({arcStyle:m,position:[0,-1,0]},A)),q.jsx(ep,gi({arcStyle:g,position:[0,0,-1]},A))]})]}),q.jsx("ambientLight",{intensity:.5}),q.jsx("pointLight",{position:[10,10,10],intensity:.5})]}))};function fhe({isFigmaPlugin:n}){return q.jsx(q.Fragment,{children:q.jsx(che,{alignment:"bottom-right",margin:n?[25,25]:[65,110],renderPriority:2,children:q.jsx(uhe,{axisColors:["#FF430A","#FF430A","#FF430A"],labelColor:"white",hideNegativeAxes:!0,axisHeadScale:.8})})})}var kr={LEFT:1,RIGHT:2,MIDDLE:4},Tt=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function Xf(n){return n.isPerspectiveCamera}function mu(n){return n.isOrthographicCamera}var tp=Math.PI*2,uL=Math.PI/2,PV=1e-5;function Li(n,e=PV){return Math.abs(n)<e}function Di(n,e,t=PV){return Li(n-e,t)}function fL(n,e){return Math.round(n/e)*e}function m1(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function g1(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function nC(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function iC(n,e){return mu(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}function hL(n){return n.invert?n.invert():n.inverse(),n}var hhe=class{constructor(){this._listeners={}}addEventListener(n,e){let t=this._listeners;t[n]===void 0&&(t[n]=[]),t[n].indexOf(e)===-1&&t[n].push(e)}removeEventListener(n,e){let t=this._listeners[n];if(t!==void 0){let i=t.indexOf(e);i!==-1&&t.splice(i,1)}}removeAllEventListeners(n){if(!n){this._listeners={};return}Array.isArray(this._listeners[n])&&(this._listeners[n].length=0)}dispatchEvent(n){let e=this._listeners[n.type];if(e!==void 0){n.target=this;let t=e.slice(0);for(let i=0,r=t.length;i<r;i++)t[i].call(this,n)}}},RV=typeof window<"u",dhe=RV&&/Mac/.test(navigator.platform),dL=!(RV&&"PointerEvent"in window),N2=1/8,en,pL,G2,rC,Qs,On,fi,np,dl,pl,qf,mL,gL,Ia,A1,wm,AL,sC,vL,oC,aC,H2,yL=class extends hhe{constructor(n,e){if(super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=0,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.dampingFactor=.05,this.draggingDampingFactor=.25,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Tt.NONE,this._viewport=null,this._dollyControlAmount=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._activePointers=[],this._truckInternal=(t,i,r)=>{if(Xf(this._camera)){let s=On.copy(this._camera.position).sub(this._target),o=this._camera.getEffectiveFOV()*en.MathUtils.DEG2RAD,a=s.length()*Math.tan(o*.5),l=this.truckSpeed*t*a/this._elementRect.height,c=this.truckSpeed*i*a/this._elementRect.height;this.verticalDragToForward?(r?this.setFocalOffset(this._focalOffsetEnd.x+l,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(l,0,!0),this.forward(-c,!0)):r?this.setFocalOffset(this._focalOffsetEnd.x+l,this._focalOffsetEnd.y+c,this._focalOffsetEnd.z,!0):this.truck(l,c,!0)}else if(mu(this._camera)){let s=this._camera,o=t*(s.right-s.left)/s.zoom/this._elementRect.width,a=i*(s.top-s.bottom)/s.zoom/this._elementRect.height;r?this.setFocalOffset(this._focalOffsetEnd.x+o,this._focalOffsetEnd.y+a,this._focalOffsetEnd.z,!0):this.truck(o,a,!0)}},this._rotateInternal=(t,i)=>{let r=tp*this.azimuthRotateSpeed*t/this._elementRect.height,s=tp*this.polarRotateSpeed*i/this._elementRect.height;this.rotate(r,s,!0)},this._dollyInternal=(t,i,r)=>{let s=Math.pow(.95,-t*this.dollySpeed),o=this._sphericalEnd.radius*s,a=this._sphericalEnd.radius,l=a*(t>=0?-1:1);this.dollyTo(o),this.infinityDolly&&(o<this.minDistance||this.maxDistance===this.minDistance)&&(this._camera.getWorldDirection(On),this._targetEnd.add(On.normalize().multiplyScalar(l)),this._target.add(On.normalize().multiplyScalar(l))),this.dollyToCursor&&(this._dollyControlAmount+=this._sphericalEnd.radius-a,this.infinityDolly&&(o<this.minDistance||this.maxDistance===this.minDistance)&&(this._dollyControlAmount-=l),this._dollyControlCoord.set(i,r))},this._zoomInternal=(t,i,r)=>{let s=Math.pow(.95,t*this.dollySpeed),o=this._zoomEnd;this.zoomTo(this._zoom*s),this.dollyToCursor&&(this._dollyControlAmount+=this._zoomEnd-o,this._dollyControlCoord.set(i,r))},typeof en>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=n,this._yAxisUpSpace=new en.Quaternion().setFromUnitVectors(this._camera.up,G2),this._yAxisUpSpaceInverse=hL(this._yAxisUpSpace.clone()),this._state=Tt.NONE,this._domElement=e,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._target=new en.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new en.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new en.Spherical().setFromVector3(On.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._nearPlaneCorners=[new en.Vector3,new en.Vector3,new en.Vector3,new en.Vector3],this._updateNearPlaneCorners(),this._boundary=new en.Box3(new en.Vector3(-1/0,-1/0,-1/0),new en.Vector3(1/0,1/0,1/0)),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlAmount=0,this._dollyControlCoord=new en.Vector2,this.mouseButtons={left:Tt.ROTATE,middle:Tt.DOLLY,right:Tt.TRUCK,wheel:Xf(this._camera)?Tt.DOLLY:mu(this._camera)?Tt.ZOOM:Tt.NONE},this.touches={one:Tt.TOUCH_ROTATE,two:Xf(this._camera)?Tt.TOUCH_DOLLY_TRUCK:mu(this._camera)?Tt.TOUCH_ZOOM_TRUCK:Tt.NONE,three:Tt.TOUCH_TRUCK},this._domElement){let t=new en.Vector2,i=new en.Vector2,r=new en.Vector2,s=w=>{if(!this._enabled)return;let S={pointerId:w.pointerId,clientX:w.clientX,clientY:w.clientY,deltaX:0,deltaY:0};this._activePointers.push(S),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",f),p(w)},o=w=>{if(!this._enabled)return;let S={pointerId:0,clientX:w.clientX,clientY:w.clientY,deltaX:0,deltaY:0};this._activePointers.push(S),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.addEventListener("mousemove",c),this._domElement.ownerDocument.addEventListener("mouseup",h),p(w)},a=w=>{this._enabled&&(w.preventDefault(),Array.prototype.forEach.call(w.changedTouches,S=>{let C={pointerId:S.identifier,clientX:S.clientX,clientY:S.clientY,deltaX:0,deltaY:0};this._activePointers.push(C)}),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",d),this._domElement.ownerDocument.addEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.addEventListener("touchend",d),p(w))},l=w=>{w.cancelable&&w.preventDefault();let S=w.pointerId,C=this._findPointerById(S);if(C){if(C.clientX=w.clientX,C.clientY=w.clientY,C.deltaX=w.movementX,C.deltaY=w.movementY,w.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=0,(w.buttons&kr.LEFT)===kr.LEFT&&(this._state=this._state|this.mouseButtons.left),(w.buttons&kr.MIDDLE)===kr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(w.buttons&kr.RIGHT)===kr.RIGHT&&(this._state=this._state|this.mouseButtons.right);A()}},c=w=>{let S=this._findPointerById(0);S&&(S.clientX=w.clientX,S.clientY=w.clientY,S.deltaX=w.movementX,S.deltaY=w.movementY,this._state=0,(w.buttons&kr.LEFT)===kr.LEFT&&(this._state=this._state|this.mouseButtons.left),(w.buttons&kr.MIDDLE)===kr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(w.buttons&kr.RIGHT)===kr.RIGHT&&(this._state=this._state|this.mouseButtons.right),A())},u=w=>{w.cancelable&&w.preventDefault(),Array.prototype.forEach.call(w.changedTouches,S=>{let C=S.identifier,b=this._findPointerById(C);b&&(b.clientX=S.clientX,b.clientY=S.clientY)}),A()},f=w=>{let S=w.pointerId,C=this._findPointerById(S);if(C&&this._activePointers.splice(this._activePointers.indexOf(C),1),w.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Tt.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Tt.NONE;y()},h=()=>{let w=this._findPointerById(0);w&&this._activePointers.splice(this._activePointers.indexOf(w),1),this._state=Tt.NONE,y()},d=w=>{switch(Array.prototype.forEach.call(w.changedTouches,S=>{let C=S.identifier,b=this._findPointerById(C);b&&this._activePointers.splice(this._activePointers.indexOf(b),1)}),this._activePointers.length){case 0:this._state=Tt.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}y()},m=-1,g=w=>{if(!this._enabled||this.mouseButtons.wheel===Tt.NONE)return;if(w.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Tt.ROTATE||this.mouseButtons.wheel===Tt.TRUCK){let I=performance.now();m-I<1e3&&this._getClientRect(this._elementRect),m=I}let S=dhe?-1:-3,C=w.deltaMode===1?w.deltaY/S:w.deltaY/(S*10),b=this.dollyToCursor?(w.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(w.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Tt.ROTATE:{this._rotateInternal(w.deltaX,w.deltaY);break}case Tt.TRUCK:{this._truckInternal(w.deltaX,w.deltaY,!1);break}case Tt.OFFSET:{this._truckInternal(w.deltaX,w.deltaY,!0);break}case Tt.DOLLY:{this._dollyInternal(-C,b,M);break}case Tt.ZOOM:{this._zoomInternal(-C,b,M);break}}this.dispatchEvent({type:"control"})},v=w=>{this._enabled&&w.preventDefault()},p=w=>{if(this._enabled){if(nC(this._activePointers,Qs),this._getClientRect(this._elementRect),t.copy(Qs),i.copy(Qs),this._activePointers.length>=2){let S=Qs.x-this._activePointers[1].clientX,C=Qs.y-this._activePointers[1].clientY,b=Math.sqrt(S*S+C*C);r.set(0,b);let M=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,I=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;i.set(M,I)}if("touches"in w||"pointerType"in w&&w.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=0,(w.buttons&kr.LEFT)===kr.LEFT&&(this._state=this._state|this.mouseButtons.left),(w.buttons&kr.MIDDLE)===kr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(w.buttons&kr.RIGHT)===kr.RIGHT&&(this._state=this._state|this.mouseButtons.right);this.dispatchEvent({type:"controlstart"})}},A=()=>{if(!this._enabled)return;nC(this._activePointers,Qs);let w=this._domElement&&document.pointerLockElement===this._domElement,S=w?-this._activePointers[0].deltaX:i.x-Qs.x,C=w?-this._activePointers[0].deltaY:i.y-Qs.y;if(i.copy(Qs),((this._state&Tt.ROTATE)===Tt.ROTATE||(this._state&Tt.TOUCH_ROTATE)===Tt.TOUCH_ROTATE||(this._state&Tt.TOUCH_DOLLY_ROTATE)===Tt.TOUCH_DOLLY_ROTATE||(this._state&Tt.TOUCH_ZOOM_ROTATE)===Tt.TOUCH_ZOOM_ROTATE)&&this._rotateInternal(S,C),(this._state&Tt.DOLLY)===Tt.DOLLY||(this._state&Tt.ZOOM)===Tt.ZOOM){let b=this.dollyToCursor?(t.x-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(t.y-this._elementRect.y)/this._elementRect.height*-2+1:0;this._state===Tt.DOLLY?this._dollyInternal(C*N2,b,M):this._zoomInternal(C*N2,b,M)}if((this._state&Tt.TOUCH_DOLLY)===Tt.TOUCH_DOLLY||(this._state&Tt.TOUCH_ZOOM)===Tt.TOUCH_ZOOM||(this._state&Tt.TOUCH_DOLLY_TRUCK)===Tt.TOUCH_DOLLY_TRUCK||(this._state&Tt.TOUCH_ZOOM_TRUCK)===Tt.TOUCH_ZOOM_TRUCK||(this._state&Tt.TOUCH_DOLLY_OFFSET)===Tt.TOUCH_DOLLY_OFFSET||(this._state&Tt.TOUCH_ZOOM_OFFSET)===Tt.TOUCH_ZOOM_OFFSET||(this._state&Tt.TOUCH_DOLLY_ROTATE)===Tt.TOUCH_DOLLY_ROTATE||(this._state&Tt.TOUCH_ZOOM_ROTATE)===Tt.TOUCH_ZOOM_ROTATE){let b=Qs.x-this._activePointers[1].clientX,M=Qs.y-this._activePointers[1].clientY,I=Math.sqrt(b*b+M*M),T=r.y-I;r.set(0,I);let D=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;this._state===Tt.TOUCH_DOLLY||this._state===Tt.TOUCH_DOLLY_ROTATE||this._state===Tt.TOUCH_DOLLY_TRUCK||this._state===Tt.TOUCH_DOLLY_OFFSET?this._dollyInternal(T*N2,D,R):this._zoomInternal(T*N2,D,R)}((this._state&Tt.TRUCK)===Tt.TRUCK||(this._state&Tt.TOUCH_TRUCK)===Tt.TOUCH_TRUCK||(this._state&Tt.TOUCH_DOLLY_TRUCK)===Tt.TOUCH_DOLLY_TRUCK||(this._state&Tt.TOUCH_ZOOM_TRUCK)===Tt.TOUCH_ZOOM_TRUCK)&&this._truckInternal(S,C,!1),((this._state&Tt.OFFSET)===Tt.OFFSET||(this._state&Tt.TOUCH_OFFSET)===Tt.TOUCH_OFFSET||(this._state&Tt.TOUCH_DOLLY_OFFSET)===Tt.TOUCH_DOLLY_OFFSET||(this._state&Tt.TOUCH_ZOOM_OFFSET)===Tt.TOUCH_ZOOM_OFFSET)&&this._truckInternal(S,C,!0),this.dispatchEvent({type:"control"})},y=()=>{nC(this._activePointers,Qs),i.copy(Qs),this._activePointers.length===0&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",d),this.dispatchEvent({type:"controlend"}))};this._domElement.addEventListener("pointerdown",s),dL&&this._domElement.addEventListener("mousedown",o),dL&&this._domElement.addEventListener("touchstart",a),this._domElement.addEventListener("pointercancel",f),this._domElement.addEventListener("wheel",g,{passive:!1}),this._domElement.addEventListener("contextmenu",v),this._removeAllEventListeners=()=>{this._domElement.removeEventListener("pointerdown",s),this._domElement.removeEventListener("mousedown",o),this._domElement.removeEventListener("touchstart",a),this._domElement.removeEventListener("pointercancel",f),this._domElement.removeEventListener("wheel",g,{passive:!1}),this._domElement.removeEventListener("contextmenu",v),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.removeEventListener("touchend",d)},this.cancel=()=>{this._state!==Tt.NONE&&(this._state=Tt.NONE,this._activePointers.length=0,y())}}this.update(0)}static install(n){en=n.THREE,pL=Object.freeze(new en.Vector3(0,0,0)),G2=Object.freeze(new en.Vector3(0,1,0)),rC=Object.freeze(new en.Vector3(0,0,1)),Qs=new en.Vector2,On=new en.Vector3,fi=new en.Vector3,np=new en.Vector3,dl=new en.Vector3,pl=new en.Vector3,qf=new en.Vector3,mL=new en.Vector3,gL=new en.Vector3,Ia=new en.Spherical,A1=new en.Spherical,wm=new en.Box3,AL=new en.Box3,sC=new en.Sphere,vL=new en.Quaternion,oC=new en.Quaternion,aC=new en.Matrix4,H2=new en.Raycaster}static get ACTION(){return Tt}get camera(){return this._camera}set camera(n){this._camera=n,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(n){this._enabled=n,n?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="")}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(n){this._spherical.radius===n&&this._sphericalEnd.radius===n||(this._spherical.radius=n,this._sphericalEnd.radius=n,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(n){this._spherical.theta===n&&this._sphericalEnd.theta===n||(this._spherical.theta=n,this._sphericalEnd.theta=n,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(n){this._spherical.phi===n&&this._sphericalEnd.phi===n||(this._spherical.phi=n,this._sphericalEnd.phi=n,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(n){this._boundaryEnclosesCamera=n,this._needsUpdate=!0}addEventListener(n,e){super.addEventListener(n,e)}removeEventListener(n,e){super.removeEventListener(n,e)}rotate(n,e,t=!1){return this.rotateTo(this._sphericalEnd.theta+n,this._sphericalEnd.phi+e,t)}rotateAzimuthTo(n,e=!1){return this.rotateTo(n,this._sphericalEnd.phi,e)}rotatePolarTo(n,e=!1){return this.rotateTo(this._sphericalEnd.theta,n,e)}rotateTo(n,e,t=!1){let i=en.MathUtils.clamp(n,this.minAzimuthAngle,this.maxAzimuthAngle),r=en.MathUtils.clamp(e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=r,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,t||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);let s=!t||Di(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Di(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(s)}dolly(n,e=!1){return this.dollyTo(this._sphericalEnd.radius-n,e)}dollyTo(n,e=!1){let t=this._sphericalEnd.radius,i=en.MathUtils.clamp(n,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){let s=this._collisionTest(),o=Di(s,this._spherical.radius);if(!(t>i)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(i,s)}else this._sphericalEnd.radius=i;this._needsUpdate=!0,e||(this._spherical.radius=this._sphericalEnd.radius);let r=!e||Di(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}zoom(n,e=!1){return this.zoomTo(this._zoomEnd+n,e)}zoomTo(n,e=!1){this._zoomEnd=en.MathUtils.clamp(n,this.minZoom,this.maxZoom),this._needsUpdate=!0,e||(this._zoom=this._zoomEnd);let t=!e||Di(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(t)}pan(n,e,t=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(n,e,t)}truck(n,e,t=!1){this._camera.updateMatrix(),dl.setFromMatrixColumn(this._camera.matrix,0),pl.setFromMatrixColumn(this._camera.matrix,1),dl.multiplyScalar(n),pl.multiplyScalar(-e);let i=On.copy(dl).add(pl),r=fi.copy(this._targetEnd).add(i);return this.moveTo(r.x,r.y,r.z,t)}forward(n,e=!1){On.setFromMatrixColumn(this._camera.matrix,0),On.crossVectors(this._camera.up,On),On.multiplyScalar(n);let t=fi.copy(this._targetEnd).add(On);return this.moveTo(t.x,t.y,t.z,e)}moveTo(n,e,t,i=!1){let r=On.set(n,e,t).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,r,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);let s=!i||Di(this._target.x,this._targetEnd.x,this.restThreshold)&&Di(this._target.y,this._targetEnd.y,this.restThreshold)&&Di(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}fitToBox(n,e,{cover:t=!1,paddingLeft:i=0,paddingRight:r=0,paddingBottom:s=0,paddingTop:o=0}={}){let a=[],l=n.isBox3?wm.copy(n):wm.setFromObject(n);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());let c=fL(this._sphericalEnd.theta,uL),u=fL(this._sphericalEnd.phi,uL);a.push(this.rotateTo(c,u,e));let f=On.setFromSpherical(this._sphericalEnd).normalize(),h=vL.setFromUnitVectors(f,rC),d=Di(Math.abs(f.y),1);d&&h.multiply(oC.setFromAxisAngle(G2,c)),h.multiply(this._yAxisUpSpaceInverse);let m=AL.makeEmpty();fi.copy(l.min).applyQuaternion(h),m.expandByPoint(fi),fi.copy(l.min).setX(l.max.x).applyQuaternion(h),m.expandByPoint(fi),fi.copy(l.min).setY(l.max.y).applyQuaternion(h),m.expandByPoint(fi),fi.copy(l.max).setZ(l.min.z).applyQuaternion(h),m.expandByPoint(fi),fi.copy(l.min).setZ(l.max.z).applyQuaternion(h),m.expandByPoint(fi),fi.copy(l.max).setY(l.min.y).applyQuaternion(h),m.expandByPoint(fi),fi.copy(l.max).setX(l.min.x).applyQuaternion(h),m.expandByPoint(fi),fi.copy(l.max).applyQuaternion(h),m.expandByPoint(fi),m.min.x-=i,m.min.y-=s,m.max.x+=r,m.max.y+=o,h.setFromUnitVectors(rC,f),d&&h.premultiply(oC.invert()),h.premultiply(this._yAxisUpSpace);let g=m.getSize(On),v=m.getCenter(fi).applyQuaternion(h);if(Xf(this._camera)){let p=this.getDistanceToFitBox(g.x,g.y,g.z,t);a.push(this.moveTo(v.x,v.y,v.z,e)),a.push(this.dollyTo(p,e)),a.push(this.setFocalOffset(0,0,0,e))}else if(mu(this._camera)){let p=this._camera,A=p.right-p.left,y=p.top-p.bottom,w=t?Math.max(A/g.x,y/g.y):Math.min(A/g.x,y/g.y);a.push(this.moveTo(v.x,v.y,v.z,e)),a.push(this.zoomTo(w,e)),a.push(this.setFocalOffset(0,0,0,e))}return Promise.all(a)}fitToSphere(n,e){let t=[],i=n instanceof en.Sphere?sC.copy(n):phe(n,sC);if(t.push(this.moveTo(i.center.x,i.center.y,i.center.z,e)),Xf(this._camera)){let r=this.getDistanceToFitSphere(i.radius);t.push(this.dollyTo(r,e))}else if(mu(this._camera)){let r=this._camera.right-this._camera.left,s=this._camera.top-this._camera.bottom,o=2*i.radius,a=Math.min(r/o,s/o);t.push(this.zoomTo(a,e))}return t.push(this.setFocalOffset(0,0,0,e)),Promise.all(t)}setLookAt(n,e,t,i,r,s,o=!1){let a=fi.set(i,r,s),l=On.set(n,e,t);this._targetEnd.copy(a),this._sphericalEnd.setFromVector3(l.sub(a).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let c=!o||Di(this._target.x,this._targetEnd.x,this.restThreshold)&&Di(this._target.y,this._targetEnd.y,this.restThreshold)&&Di(this._target.z,this._targetEnd.z,this.restThreshold)&&Di(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Di(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Di(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(c)}lerpLookAt(n,e,t,i,r,s,o,a,l,c,u,f,h,d=!1){let m=On.set(i,r,s),g=fi.set(n,e,t);Ia.setFromVector3(g.sub(m).applyQuaternion(this._yAxisUpSpace));let v=np.set(c,u,f),p=fi.set(o,a,l);A1.setFromVector3(p.sub(v).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(m.lerp(v,h));let A=A1.theta-Ia.theta,y=A1.phi-Ia.phi,w=A1.radius-Ia.radius;this._sphericalEnd.set(Ia.radius+w*h,Ia.phi+y*h,Ia.theta+A*h),this.normalizeRotations(),this._needsUpdate=!0,d||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let S=!d||Di(this._target.x,this._targetEnd.x,this.restThreshold)&&Di(this._target.y,this._targetEnd.y,this.restThreshold)&&Di(this._target.z,this._targetEnd.z,this.restThreshold)&&Di(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Di(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Di(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(S)}setPosition(n,e,t,i=!1){return this.setLookAt(n,e,t,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(n,e,t,i=!1){let r=this.getPosition(On);return this.setLookAt(r.x,r.y,r.z,n,e,t,i)}setFocalOffset(n,e,t,i=!1){this._focalOffsetEnd.set(n,e,t),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd);let r=!i||Di(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Di(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Di(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}setOrbitPoint(n,e,t){this._camera.updateMatrixWorld(),dl.setFromMatrixColumn(this._camera.matrixWorldInverse,0),pl.setFromMatrixColumn(this._camera.matrixWorldInverse,1),qf.setFromMatrixColumn(this._camera.matrixWorldInverse,2);let i=On.set(n,e,t),r=i.distanceTo(this._camera.position),s=i.sub(this._camera.position);dl.multiplyScalar(s.x),pl.multiplyScalar(s.y),qf.multiplyScalar(s.z),On.copy(dl).add(pl).add(qf),On.z=On.z+r,this.dollyTo(r,!1),this.setFocalOffset(-On.x,On.y,-On.z,!1),this.moveTo(n,e,t,!1)}setBoundary(n){if(!n){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(n),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(n,e,t,i){if(n===null){this._viewport=null;return}this._viewport=this._viewport||new en.Vector4,typeof n=="number"?this._viewport.set(n,e,t,i):this._viewport.copy(n)}getDistanceToFitBox(n,e,t,i=!1){if(iC(this._camera,"getDistanceToFitBox"))return this._spherical.radius;let r=n/e,s=this._camera.getEffectiveFOV()*en.MathUtils.DEG2RAD,o=this._camera.aspect;return((i?r>o:r<o)?e:n/o)*.5/Math.tan(s*.5)+t*.5}getDistanceToFitSphere(n){if(iC(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;let e=this._camera.getEffectiveFOV()*en.MathUtils.DEG2RAD,t=Math.atan(Math.tan(e*.5)*this._camera.aspect)*2,i=1<this._camera.aspect?e:t;return n/Math.sin(i*.5)}getTarget(n){return(n&&n.isVector3?n:new en.Vector3).copy(this._targetEnd)}getPosition(n){return(n&&n.isVector3?n:new en.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(n){return(n&&n.isVector3?n:new en.Vector3).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%tp,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=tp),this._spherical.theta+=tp*Math.round((this._sphericalEnd.theta-this._spherical.theta)/tp)}reset(n=!1){let e=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,n),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,n),this.zoomTo(this._zoom0,n)];return Promise.all(e)}saveState(){this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,G2),hL(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))}update(n){let e=this._state===Tt.NONE?this.dampingFactor:this.draggingDampingFactor,t=Math.min(e*n*60,1),i=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,o=mL.subVectors(this._targetEnd,this._target),a=gL.subVectors(this._focalOffsetEnd,this._focalOffset);if(!Li(i)||!Li(r)||!Li(s)||!Li(o.x)||!Li(o.y)||!Li(o.z)||!Li(a.x)||!Li(a.y)||!Li(a.z)?(this._spherical.set(this._spherical.radius+s*t,this._spherical.phi+r*t,this._spherical.theta+i*t),this._target.add(o.multiplyScalar(t)),this._focalOffset.add(a.multiplyScalar(t)),this._needsUpdate=!0):(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)),this._dollyControlAmount!==0){if(Xf(this._camera)){let f=this._camera,h=On.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),d=fi.copy(h).cross(f.up).normalize();d.lengthSq()===0&&(d.x=1);let m=np.crossVectors(d,h),g=this._sphericalEnd.radius*Math.tan(f.getEffectiveFOV()*en.MathUtils.DEG2RAD*.5),v=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,p=On.copy(this._targetEnd).add(d.multiplyScalar(this._dollyControlCoord.x*g*f.aspect)).add(m.multiplyScalar(this._dollyControlCoord.y*g));this._targetEnd.lerp(p,v)}else if(mu(this._camera)){let f=this._camera,h=f.getWorldDirection(On.clone()),d=this._targetEnd.x*h.x+this._targetEnd.y*h.y+this._targetEnd.z*h.z,m=On.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(f.near+f.far)/(f.near-f.far)).unproject(f),g=fi.set(0,0,-1).applyQuaternion(f.quaternion),v=np.copy(m).add(g.multiplyScalar(-m.dot(f.up))),p=-(this._zoom-this._dollyControlAmount-this._zoomEnd)/this._zoom;this._targetEnd.lerp(v,p);let A=this._targetEnd.x*h.x+this._targetEnd.y*h.y+this._targetEnd.z*h.z,y=h.multiplyScalar(A-d);this._targetEnd.sub(y)}this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._dollyControlAmount=0}let l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Li(this._focalOffset.x)||!Li(this._focalOffset.y)||!Li(this._focalOffset.z))&&(this._camera.updateMatrix(),dl.setFromMatrixColumn(this._camera.matrix,0),pl.setFromMatrixColumn(this._camera.matrix,1),qf.setFromMatrixColumn(this._camera.matrix,2),dl.multiplyScalar(this._focalOffset.x),pl.multiplyScalar(-this._focalOffset.y),qf.multiplyScalar(this._focalOffset.z),On.copy(dl).add(pl).add(qf),this._camera.position.add(On)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),On.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);let c=this._zoomEnd-this._zoom;this._zoom+=c*t,this._camera.zoom!==this._zoom&&(Li(c)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);let u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Li(i,this.restThreshold)&&Li(r,this.restThreshold)&&Li(s,this.restThreshold)&&Li(o.x,this.restThreshold)&&Li(o.y,this.restThreshold)&&Li(o.z,this.restThreshold)&&Li(a.x,this.restThreshold)&&Li(a.y,this.restThreshold)&&Li(a.z,this.restThreshold)&&Li(c,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:m1(this.maxDistance),minZoom:this.minZoom,maxZoom:m1(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:m1(this.maxPolarAngle),minAzimuthAngle:m1(this.minAzimuthAngle),maxAzimuthAngle:m1(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:On.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(n,e=!1){let t=JSON.parse(n),i=On.fromArray(t.position);this.enabled=t.enabled,this.minDistance=t.minDistance,this.maxDistance=g1(t.maxDistance),this.minZoom=t.minZoom,this.maxZoom=g1(t.maxZoom),this.minPolarAngle=t.minPolarAngle,this.maxPolarAngle=g1(t.maxPolarAngle),this.minAzimuthAngle=g1(t.minAzimuthAngle),this.maxAzimuthAngle=g1(t.maxAzimuthAngle),this.dampingFactor=t.dampingFactor,this.draggingDampingFactor=t.draggingDampingFactor,this.dollySpeed=t.dollySpeed,this.truckSpeed=t.truckSpeed,this.dollyToCursor=t.dollyToCursor,this.verticalDragToForward=t.verticalDragToForward,this._target0.fromArray(t.target0),this._position0.fromArray(t.position0),this._zoom0=t.zoom0,this._focalOffset0.fromArray(t.focalOffset0),this.moveTo(t.target[0],t.target[1],t.target[2],e),Ia.setFromVector3(i.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Ia.theta,Ia.phi,e),this.zoomTo(t.zoom,e),this.setFocalOffset(t.focalOffset[0],t.focalOffset[1],t.focalOffset[2],e),this._needsUpdate=!0}dispose(){this._removeAllEventListeners()}_findPointerById(n){let e=null;return this._activePointers.some(t=>t.pointerId===n?(e=t,!0):!1),e}_encloseToBoundary(n,e,t){let i=e.lengthSq();if(i===0)return n;let r=fi.copy(e).add(n),s=this._boundary.clampPoint(r,np).sub(r),o=s.lengthSq();if(o===0)return n.add(e);if(o===i)return n;if(t===0)return n.add(e).add(s);{let a=1+t*o/e.dot(s);return n.add(fi.copy(e).multiplyScalar(a)).add(s.multiplyScalar(1-t))}}_updateNearPlaneCorners(){if(Xf(this._camera)){let n=this._camera,e=n.near,t=n.getEffectiveFOV()*en.MathUtils.DEG2RAD,i=Math.tan(t*.5)*e,r=i*n.aspect;this._nearPlaneCorners[0].set(-r,-i,0),this._nearPlaneCorners[1].set(r,-i,0),this._nearPlaneCorners[2].set(r,i,0),this._nearPlaneCorners[3].set(-r,i,0)}else if(mu(this._camera)){let n=this._camera,e=1/n.zoom,t=n.left*e,i=n.right*e,r=n.top*e,s=n.bottom*e;this._nearPlaneCorners[0].set(t,r,0),this._nearPlaneCorners[1].set(i,r,0),this._nearPlaneCorners[2].set(i,s,0),this._nearPlaneCorners[3].set(t,s,0)}}_collisionTest(){let n=1/0;if(!(this.colliderMeshes.length>=1)||iC(this._camera,"_collisionTest"))return n;let e=On.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);aC.lookAt(pL,e,this._camera.up);for(let t=0;t<4;t++){let i=fi.copy(this._nearPlaneCorners[t]);i.applyMatrix4(aC);let r=np.addVectors(this._target,i);H2.set(r,e),H2.far=this._spherical.radius+1;let s=H2.intersectObjects(this.colliderMeshes);s.length!==0&&s[0].distance<n&&(n=s[0].distance)}return n}_getClientRect(n){let e=this._domElement.getBoundingClientRect();return n.x=e.left,n.y=e.top,this._viewport?(n.x+=this._viewport.x,n.y+=e.height-this._viewport.w-this._viewport.y,n.width=this._viewport.z,n.height=this._viewport.w):(n.width=e.width,n.height=e.height),n}_createOnRestPromise(n){return n?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(e=>{let t=()=>{this.removeEventListener("rest",t),e()};this.addEventListener("rest",t)}))}_removeAllEventListeners(){}};function phe(n,e){let t=e,i=t.center;wm.makeEmpty(),n.traverseVisible(s=>{s.isMesh&&wm.expandByObject(s)}),wm.getCenter(i);let r=0;return n.traverseVisible(s=>{if(!s.isMesh)return;let o=s,a=o.geometry.clone();if(a.applyMatrix4(o.matrixWorld),a.isBufferGeometry){let l=a.attributes.position;for(let c=0,u=l.count;c<u;c++)On.fromBufferAttribute(l,c),r=Math.max(r,i.distanceToSquared(On))}else{let l=a.attributes.position,c=new en.Vector3;for(let u=0,f=l.count;u<f;u++)c.fromBufferAttribute(l,u),r=Math.max(r,i.distanceToSquared(c))}}),t.radius=Math.sqrt(r),t}function t6(n){return n/180*Math.PI}function xL(n){return n.map(e=>t6(e))}function DV(n){return n.replace("http://localhost:3001/customize","").replace("https://shadergradient.co/customize","").replace("https://www.shadergradient.co/customize","")}function mhe({type:n,cAzimuthAngle:e,cPolarAngle:t,cDistance:i,cameraZoom:r,zoomOut:s,enableTransition:o}){let a=E.useRef(),l=a.current;return Bt((c,u)=>a.current.update(u)),E.useEffect(()=>{l==null||l.rotateTo(t6(e),t6(t),o)},[l,e,t]),E.useEffect(()=>{s?n==="sphere"?(l==null||l.dollyTo(nL.distance,o),l==null||l.zoomTo(nL.zoom,o)):(l==null||l.dollyTo(tL.distance,o),l==null||l.zoomTo(tL.zoom,o)):n==="sphere"?(l==null||l.zoomTo(r,o),l==null||l.dollyTo(vfe,o)):(l==null||l.dollyTo(i,o),l==null||l.zoomTo(Afe,o))},[l,s,n,r,i]),a}function ghe(n){var e=n,{dampingFactor:t=.05}=e,i=ff(e,["dampingFactor"]);yL.install({THREE:HE}),Ai({CameraControls:yL});let r=Pe(a=>a.camera),s=Pe(a=>a.gl),o=mhe(i);return q.jsx("cameraControls",{ref:o,args:[r,s.domElement],enableDamping:!0,dampingFactor:t,zoomSpeed:10,dollySpeed:10,restThreshold:0})}var Ahe=class extends zE{constructor(n){super(n),this.type=jn}parse(n){let e=function(v,p){switch(v){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(p||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(p||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(p||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(p||""))}},t=`
`,i=function(v,p,A){p=p||1024;let y=v.pos,w=-1,S=0,C="",b=String.fromCharCode.apply(null,new Uint16Array(v.subarray(y,y+128)));for(;0>(w=b.indexOf(t))&&S<p&&y<v.byteLength;)C+=b,S+=b.length,y+=128,b+=String.fromCharCode.apply(null,new Uint16Array(v.subarray(y,y+128)));return-1<w?(v.pos+=S+w+1,C+b.slice(0,w)):!1},r=function(v){let p=/^#\?(\S+)/,A=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,w=/^\s*FORMAT=(\S+)\s*$/,S=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,C={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0},b,M;for((v.pos>=v.byteLength||!(b=i(v)))&&e(1,"no header found"),(M=b.match(p))||e(3,"bad initial token"),C.valid|=1,C.programtype=M[1],C.string+=b+`
`;b=i(v),b!==!1;){if(C.string+=b+`
`,b.charAt(0)==="#"){C.comments+=b+`
`;continue}if((M=b.match(A))&&(C.gamma=parseFloat(M[1])),(M=b.match(y))&&(C.exposure=parseFloat(M[1])),(M=b.match(w))&&(C.valid|=2,C.format=M[1]),(M=b.match(S))&&(C.valid|=4,C.height=parseInt(M[1],10),C.width=parseInt(M[2],10)),C.valid&2&&C.valid&4)break}return C.valid&2||e(3,"missing format specifier"),C.valid&4||e(3,"missing image size specifier"),C},s=function(v,p,A){let y=p;if(y<8||y>32767||v[0]!==2||v[1]!==2||v[2]&128)return new Uint8Array(v);y!==(v[2]<<8|v[3])&&e(3,"wrong scanline width");let w=new Uint8Array(4*p*A);w.length||e(4,"unable to allocate buffer space");let S=0,C=0,b=4*y,M=new Uint8Array(4),I=new Uint8Array(b),T=A;for(;T>0&&C<v.byteLength;){C+4>v.byteLength&&e(1),M[0]=v[C++],M[1]=v[C++],M[2]=v[C++],M[3]=v[C++],(M[0]!=2||M[1]!=2||(M[2]<<8|M[3])!=y)&&e(3,"bad rgbe scanline format");let D=0,R;for(;D<b&&C<v.byteLength;){R=v[C++];let L=R>128;if(L&&(R-=128),(R===0||D+R>b)&&e(3,"bad scanline data"),L){let H=v[C++];for(let J=0;J<R;J++)I[D++]=H}else I.set(v.subarray(C,C+R),D),D+=R,C+=R}let z=y;for(let L=0;L<z;L++){let H=0;w[S]=I[L+H],H+=y,w[S+1]=I[L+H],H+=y,w[S+2]=I[L+H],H+=y,w[S+3]=I[L+H],S+=4}T--}return w},o=function(v,p,A,y){let w=v[p+3],S=Math.pow(2,w-128)/255;A[y+0]=v[p+0]*S,A[y+1]=v[p+1]*S,A[y+2]=v[p+2]*S,A[y+3]=1},a=function(v,p,A,y){let w=v[p+3],S=Math.pow(2,w-128)/255;A[y+0]=ja.toHalfFloat(Math.min(v[p+0]*S,65504)),A[y+1]=ja.toHalfFloat(Math.min(v[p+1]*S,65504)),A[y+2]=ja.toHalfFloat(Math.min(v[p+2]*S,65504)),A[y+3]=ja.toHalfFloat(1)},l=new Uint8Array(n);l.pos=0;let c=r(l),u=c.width,f=c.height,h=s(l.subarray(l.pos),u,f),d,m,g;switch(this.type){case Ln:g=h.length/4;let v=new Float32Array(g*4);for(let A=0;A<g;A++)o(h,A*4,v,A*4);d=v,m=Ln;break;case jn:g=h.length/4;let p=new Uint16Array(g*4);for(let A=0;A<g;A++)a(h,A*4,p,A*4);d=p,m=jn;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:u,height:f,data:d,header:c.string,gamma:c.gamma,exposure:c.exposure,type:m}}setDataType(n){return this.type=n,this}load(n,e,t,i){function r(s,o){switch(s.type){case Ln:case jn:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=Xt,s.magFilter=Xt,s.generateMipmaps=!1,s.flipY=!0;break}e&&e(s,o)}return super.load(n,r,t,i)}};function lC(n,{path:e}){return Pi(Ahe,n,t=>t.setPath(e))}var vhe=n=>n.current&&n.current.isScene,yhe=n=>vhe(n)?n.current:n;function xhe({background:n=!1,envPreset:e}){let t=lC("city.hdr",{path:ZS}),i=lC("dawn.hdr",{path:ZS}),r=lC("lobby.hdr",{path:ZS}),s={city:t,dawn:i,lobby:r}[e],o=Pe(l=>l.scene);_t.useLayoutEffect(()=>{if(s){let l=yhe(o);l.background;let c=l.environment;return n!=="only"&&(l.environment=s),n&&(l.background=s),()=>{n!=="only"&&(l.environment=c),n&&(l.background="black")}}},[o,s,n]);let a=s;return a.mapping=af,null}var cC=0;function _he(){let[n,e]=E.useState({});return bu.onLoad=()=>{e(t=>uf(gi({},t),{active:!1}))},bu.onProgress=(t,i,r)=>{i===r&&(cC=r);let s=(i-cC)/(r-cC)*100||100;e(o=>uf(gi({},o),{active:!0,item:t,loaded:i,total:r,progress:s}))},n}function Ehe({lightType:n,brightness:e,envPreset:t}){return q.jsxs(q.Fragment,{children:[n==="3d"&&q.jsx("ambientLight",{intensity:e||1}),n==="env"&&q.jsx(E.Suspense,{fallback:q.jsx(whe,{}),children:q.jsx(xhe,{envPreset:t,background:!1,loadingCallback:()=>{}})})]})}function whe(){let{progress:n}=_he();return E.useEffect(()=>{let e=document.getElementById("LoaderRoot");e&&n&&(n===100?(e.innerHTML="Ligths are loaded",setTimeout(()=>{e.innerHTML=""},1e3)):e.innerHTML="Loading lights...")},[n]),q.jsx("ambientLight",{intensity:.4})}function She(n,e,t){return class extends tr{constructor(){let i=Object.entries(n),r=i.reduce((s,[o,a])=>{let l=va.clone({[o]:{value:a}});return gi(gi({},s),l)},{});super({color:"#ffffff",linewidth:5,userData:r,onBeforeCompile:s=>{s.uniforms=gi(gi({},s.uniforms),r),s.vertexShader=e}}),i.forEach(([s])=>Object.defineProperty(this,s,{get:()=>this.uniforms[s].value,set:o=>this.uniforms[s].value=o}))}}}rn.uv2_pars_vertex="";rn.uv2_vertex="";rn.uv2_pars_fragment="";rn.encodings_fragment="";function Che(n,e,t,i){return class extends Fs{constructor(){let r=Object.entries(n),s=n.colors,o=uC(s[0]),a=uC(s[1]),l=uC(s[2]),c={uC1r:{value:sc(o==null?void 0:o.r)},uC1g:{value:sc(o==null?void 0:o.g)},uC1b:{value:sc(o==null?void 0:o.b)},uC2r:{value:sc(a==null?void 0:a.r)},uC2g:{value:sc(a==null?void 0:a.g)},uC2b:{value:sc(a==null?void 0:a.b)},uC3r:{value:sc(l==null?void 0:l.r)},uC3g:{value:sc(l==null?void 0:l.g)},uC3b:{value:sc(l==null?void 0:l.b)}},u=r.reduce((f,[h,d])=>{let m=va.clone({[h]:{value:d}});return gi(gi({},f),m)},{});super({metalness:.2,userData:u,side:ni,onBeforeCompile:f=>{f.uniforms=gi(gi(gi({},f.uniforms),u),c),f.vertexShader=e,f.fragmentShader=t}}),r.forEach(([f])=>Object.defineProperty(this,f,{get:()=>this.uniforms[f].value,set:h=>this.uniforms[f].value=h}))}}}function uC(n){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function sc(n=0){return n/255}var LV={};jc(LV,{defaults:()=>x8,positionMix:()=>UV});var x8={};jc(x8,{plane:()=>FV,sphere:()=>OV,waterPlane:()=>zV});var FV={};jc(FV,{fragment:()=>bhe,vertex:()=>Mhe});var bhe=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
vec4 diffuseColor=vec4(mix(mix(color1,color2,smoothstep(-3.0,3.0,vPos.x)),color3,vPos.z),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
gl_FragColor=vec4(outgoingLight,diffuseColor.a);}`,Mhe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
vUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,OV={};jc(OV,{fragment:()=>Ihe,vertex:()=>The});var Ihe=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;varying float distanceToCenter;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
float distanceToCenter=distance(vPos,vec3(0,0,0));vec4 diffuseColor=vec4(mix(color3,mix(color2,color1,smoothstep(-1.0,1.0,vPos.y)),distanceToCenter),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
gl_FragColor=vec4(outgoingLight,diffuseColor.a);
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
}`,The=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}varying vec3 vNormal;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;uniform float uFrequency;uniform float uAmplitude;varying vec3 vPos;varying float vDistort;varying vec2 vUv;varying vec3 vViewPosition;
#define STANDARD
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
float t=uTime*uSpeed;float distortion=pnoise((normal+t)*uNoiseDensity,vec3(10.0))*uNoiseStrength;vec3 pos=position+(normal*distortion);float angle=sin(uv.y*uFrequency+t)*uAmplitude;pos=rotateY(pos,angle);vPos=pos;vDistort=distortion;vNormal=normal;vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,zV={};jc(zV,{fragment:()=>Bhe,vertex:()=>Phe});var Bhe=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
vec4 diffuseColor=vec4(mix(mix(color1,color2,smoothstep(-3.0,3.0,vPos.x)),color3,vPos.z),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
gl_FragColor=vec4(outgoingLight,diffuseColor.a);}`,Phe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,UV={};jc(UV,{plane:()=>kV,sphere:()=>NV,waterPlane:()=>GV});var kV={};jc(kV,{fragment:()=>Rhe,vertex:()=>Dhe});var Rhe="uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 vNormal;varying vec3 vPos;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);gl_FragColor=vec4(color1*vPos.x+color2*vPos.y+color3*vPos.z,1.);}",Dhe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
vUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,NV={};jc(NV,{fragment:()=>Lhe,vertex:()=>Fhe});var Lhe=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;varying float distanceToCenter;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
float distanceToCenter=distance(vPos,vec3(0,0,0));vec4 diffuseColor=vec4(mix(color3,mix(color2,color1,smoothstep(-1.0,1.0,vPos.y)),distanceToCenter),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
gl_FragColor=vec4(outgoingLight,diffuseColor.a);
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
}`,Fhe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}varying vec3 vNormal;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;uniform float uFrequency;uniform float uAmplitude;varying vec3 vPos;varying float vDistort;varying vec2 vUv;varying vec3 vViewPosition;
#define STANDARD
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
float t=uTime*uSpeed;float distortion=pnoise((normal+t)*uNoiseDensity,vec3(10.0))*uNoiseStrength;vec3 pos=position+(normal*distortion);float angle=sin(uv.y*uFrequency+t)*uAmplitude;pos=rotateY(pos,angle);vPos=pos;vDistort=distortion;vNormal=normal;vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,GV={};jc(GV,{fragment:()=>Ohe,vertex:()=>zhe});var Ohe="uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 vNormal;varying vec3 vPos;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);gl_FragColor=vec4(color1*vPos.x+color2*vPos.y+color3*vPos.z,1.);}",zhe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
vUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`;function Uhe({type:n,shader:e,color1:t,color2:i,color3:r,uTime:s,uSpeed:o,uDensity:a,uStrength:l,uFrequency:c,uAmplitude:u}){let[f,h]=E.useState(!1),d=n??"plane",m=x8[d];e&&e!=="defaults"&&(m=LV[e][d]);let g=Che({colors:[t,i,r],uTime:s,uSpeed:o,uLoadingTime:0,uNoiseDensity:a,uNoiseStrength:l,uFrequency:c,uAmplitude:u,uIntensity:.5},m.vertex,m.fragment),v=She({uTime:s,uSpeed:o,uNoiseDensity:a,uNoiseStrength:l,uFrequency:c,uAmplitude:u,uIntensity:.5},m.vertex);return Ai({ColorShiftMaterial:g}),Ai({HoveredLineMaterial:v}),E.useEffect(()=>{h(!0)},[]),f}var{to:_L,rotDur:WSe,meshDur:fC,rotDelay:YSe,meshDelay:hC}=yfe,dC=new d0,khe=20;function Nhe({animate:n,range:e,rangeStart:t,rangeEnd:i}){let r=E.useRef(),s=E.useRef(),o=0;return Bt((a,l)=>{if(r.current){let c=dC.getElapsedTime();if(e==="enabled"&&(c=t,c=c+dC.getElapsedTime(),c>=i&&(c=t,dC.start())),c>hC){let u=r.current.userData.uLoadingTime.value,f=c<fC+hC?Math.easeInOutCubic(o,u,_L-u,fC*1e3):_L;r.current.userData.uLoadingTime.value=f,c<fC+hC&&(o+=khe)}n==="on"&&(r.current.userData.uTime.value=c,s.current!==void 0&&(s.current.userData.uTime.value=c))}}),{material:r,linemat:s}}Math.easeInOutCubic=function(n,e,t,i){return n/=i/2,n<1?t/2*n*n*n+e:(n-=2,t/2*(n*n*n+2)+e)};var Q2=192,V2=36,Ghe=({type:n,animate:e,range:t,rangeStart:i,rangeEnd:r,uTime:s,uSpeed:o,uStrength:a,uDensity:l,uFrequency:c,uAmplitude:u,positionX:f,positionY:h,positionZ:d,rotationX:m,rotationY:g,rotationZ:v,color1:p,color2:A,color3:y,reflection:w,wireframe:S,shader:C,rotSpringOption:b=({rotation:I})=>({to:(T,D)=>eL(void 0,null,function*(){yield T({animatedRotation:I})}),from:{rotation:xL([0,0,0])},config:{duration:300}}),posSpringOption:M=({position:I})=>({to:(T,D)=>eL(void 0,null,function*(){yield T({animatedPosition:I})}),from:{position:[0,0,0]},config:{duration:300}})})=>{let I=Uhe({type:n,shader:C,color1:p,color2:A,color3:y,uTime:s,uSpeed:o,uDensity:l,uStrength:a,uFrequency:c,uAmplitude:u}),{material:T,linemat:D}=Nhe({animate:e,range:t,rangeStart:i,rangeEnd:r}),R=[f,h,d],z=xL([m,g,v]),{animatedPosition:L}=Jh(M({position:R})),{animatedRotation:H}=Jh(b({rotation:z}));return q.jsxs("group",{children:[q.jsxs(e6.mesh,{position:L,rotation:H,name:"shadergradient-mesh",children:[n==="plane"&&q.jsx("planeGeometry",{args:[10,10,1,Q2]}),n==="sphere"&&q.jsx("icosahedronGeometry",{args:[1,Q2/3]}),n==="waterPlane"&&q.jsx("planeGeometry",{args:[10,10,Q2,Q2]}),I&&q.jsx("colorShiftMaterial",{ref:T,roughness:1-w})]}),q.jsx("mesh",{children:q.jsxs("lineSegments",{renderOrder:1,position:R,rotation:z,visible:!1,children:[n==="plane"&&q.jsx("planeGeometry",{args:[10,10,1,V2]}),n==="sphere"&&q.jsx("icosahedronGeometry",{args:[1,V2/3]}),n==="waterPlane"&&q.jsx("planeGeometry",{args:[10,10,V2,V2]}),I&&q.jsx("hoveredLineMaterial",{ref:D})]})})]})},HV=ufe(mfe()),Hhe=HV.parse(DV(xfe[0].url),{parseNumbers:!0,parseBooleans:!0,arrayFormat:"index"});function Qhe(n){var e=n,{control:t="props",dampingFactor:i,rotSpringOption:r,posSpringOption:s,isFigmaPlugin:o=!1,enableTransition:a=!0}=e,l=ff(e,["control","dampingFactor","rotSpringOption","posSpringOption","isFigmaPlugin","enableTransition"]);let c=gi(gi({},Hhe),l);t==="query"&&(c=HV.parse(DV(l.urlString),{parseNumbers:!0,parseBooleans:!0,arrayFormat:"index"}));let u=c,{lightType:f,envPreset:h,brightness:d,grain:m,grainBlending:g,toggleAxis:v}=u,p=ff(u,["lightType","envPreset","brightness","grain","grainBlending","toggleAxis"]);return Zfe(m==="off",g||1),q.jsxs(q.Fragment,{children:[q.jsx(Ehe,{lightType:f,brightness:d,envPreset:h}),q.jsx(Ghe,uf(gi({},p),{rotSpringOption:r,posSpringOption:s}),JSON.stringify(p)),v&&q.jsx(fhe,{isFigmaPlugin:o}),q.jsx(ghe,gi({dampingFactor:i,enableTransition:a},p))]})}/*! Bundled license information:

camera-controls/dist/camera-controls.module.js:
  (*!
   * camera-controls
   * https://github.com/yomotsu/camera-controls
   * (c) 2017 @yomotsu
   * Released under the MIT License.
   *)
*/function tt(){return tt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},tt.apply(null,arguments)}const wv=new F,_8=new F,Vhe=new F,EL=new Se;function jhe(n,e,t){const i=wv.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function Whe(n,e){const t=wv.setFromMatrixPosition(n.matrixWorld),i=_8.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(Vhe);return r.angleTo(s)>Math.PI/2}function Yhe(n,e,t,i){const r=wv.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),EL.set(s.x,s.y),t.setFromCamera(EL,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function Xhe(n,e){if(e instanceof ti)return e.zoom;if(e instanceof mn){const t=wv.setFromMatrixPosition(n.matrixWorld),i=_8.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function qhe(n,e,t){if(e instanceof mn||e instanceof ti){const i=wv.setFromMatrixPosition(n.matrixWorld),r=_8.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const n6=n=>Math.abs(n)<1e-10?0:n;function QV(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=n6(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const Jhe=(n=>e=>QV(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Khe=(n=>(e,t)=>QV(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function $he(n){return n&&typeof n=="object"&&"current"in n}const Sv=E.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:h,castShadow:d,receiveShadow:m,material:g,geometry:v,zIndexRange:p=[16777271,0],calculatePosition:A=jhe,as:y="div",wrapperClass:w,pointerEvents:S="auto",...C},b)=>{const{gl:M,camera:I,scene:T,size:D,raycaster:R,events:z,viewport:L}=Pe(),[H]=E.useState(()=>document.createElement(y)),J=E.useRef(),Z=E.useRef(null),U=E.useRef(0),X=E.useRef([0,0]),Y=E.useRef(null),O=E.useRef(null),W=(a==null?void 0:a.current)||z.connected||M.domElement.parentNode,$=E.useRef(null),k=E.useRef(!1),V=E.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&$he(f[0]),[f]);E.useLayoutEffect(()=>{const pe=M.domElement;f&&f==="blending"?(pe.style.zIndex=`${Math.floor(p[0]/2)}`,pe.style.position="absolute",pe.style.pointerEvents="none"):(pe.style.zIndex=null,pe.style.position=null,pe.style.pointerEvents=null)},[f]),E.useLayoutEffect(()=>{if(Z.current){const pe=J.current=QI(H);if(T.updateMatrixWorld(),u)H.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const de=A(Z.current,I,D);H.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${de[0]}px,${de[1]}px,0);transform-origin:0 0;`}return W&&(r?W.prepend(H):W.appendChild(H)),()=>{W&&W.removeChild(H),pe.unmount()}}},[W,u]),E.useLayoutEffect(()=>{w&&(H.className=w)},[w]);const Q=E.useMemo(()=>u?{position:"absolute",top:0,left:0,width:D.width,height:D.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-D.height/2,left:-D.width/2,width:D.width,height:D.height},...t},[t,s,o,D,u]),j=E.useMemo(()=>({position:"absolute",pointerEvents:S}),[S]);E.useLayoutEffect(()=>{if(k.current=!1,u){var pe;(pe=J.current)==null||pe.render(E.createElement("div",{ref:Y,style:Q},E.createElement("div",{ref:O,style:j},E.createElement("div",{ref:b,className:i,style:t,children:n}))))}else{var de;(de=J.current)==null||de.render(E.createElement("div",{ref:b,style:Q,className:i,children:n}))}});const oe=E.useRef(!0);Bt(pe=>{if(Z.current){I.updateMatrixWorld(),Z.current.updateWorldMatrix(!0,!1);const de=u?X.current:A(Z.current,I,D);if(u||Math.abs(U.current-I.zoom)>e||Math.abs(X.current[0]-de[0])>e||Math.abs(X.current[1]-de[1])>e){const te=Whe(Z.current,I);let Ee=!1;V&&(Array.isArray(f)?Ee=f.map(Be=>Be.current):f!=="blending"&&(Ee=[T]));const ue=oe.current;if(Ee){const Be=Yhe(Z.current,I,R,Ee);oe.current=Be&&!te}else oe.current=!te;ue!==oe.current&&(h?h(!oe.current):H.style.display=oe.current?"block":"none");const ve=Math.floor(p[0]/2),ye=f?V?[p[0],ve]:[ve-1,0]:p;if(H.style.zIndex=`${qhe(Z.current,I,ye)}`,u){const[Be,ae]=[D.width/2,D.height/2],ie=I.projectionMatrix.elements[5]*ae,{isOrthographicCamera:be,top:Re,left:ct,bottom:se,right:ee}=I,Ae=Jhe(I.matrixWorldInverse),Ue=be?`scale(${ie})translate(${n6(-(ee+ct)/2)}px,${n6((Re+se)/2)}px)`:`translateZ(${ie}px)`;let Ce=Z.current.matrixWorld;c&&(Ce=I.matrixWorldInverse.clone().transpose().copyPosition(Ce).scale(Z.current.scale),Ce.elements[3]=Ce.elements[7]=Ce.elements[11]=0,Ce.elements[15]=1),H.style.width=D.width+"px",H.style.height=D.height+"px",H.style.perspective=be?"":`${ie}px`,Y.current&&O.current&&(Y.current.style.transform=`${Ue}${Ae}translate(${Be}px,${ae}px)`,O.current.style.transform=Khe(Ce,1/((l||10)/400)))}else{const Be=l===void 0?1:Xhe(Z.current,I)*l;H.style.transform=`translate3d(${de[0]}px,${de[1]}px,0) scale(${Be})`}X.current=de,U.current=I.zoom}}if(!V&&$.current&&!k.current)if(u){if(Y.current){const de=Y.current.children[0];if(de!=null&&de.clientWidth&&de!=null&&de.clientHeight){const{isOrthographicCamera:te}=I;if(te||v)C.scale&&(Array.isArray(C.scale)?C.scale instanceof F?$.current.scale.copy(C.scale.clone().divideScalar(1)):$.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):$.current.scale.setScalar(1/C.scale));else{const Ee=(l||10)/400,ue=de.clientWidth*Ee,ve=de.clientHeight*Ee;$.current.scale.set(ue,ve,1)}k.current=!0}}}else{const de=H.children[0];if(de!=null&&de.clientWidth&&de!=null&&de.clientHeight){const te=1/L.factor,Ee=de.clientWidth*te,ue=de.clientHeight*te;$.current.scale.set(Ee,ue,1),k.current=!0}$.current.lookAt(pe.camera.position)}});const xe=E.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return E.createElement("group",tt({},C,{ref:Z}),f&&!V&&E.createElement("mesh",{castShadow:d,receiveShadow:m,ref:$},v||E.createElement("planeGeometry",null),g||E.createElement("shaderMaterial",{side:ni,vertexShader:xe.vertexShader,fragmentShader:xe.fragmentShader})))});function Zhe({onChanged:n,portal:e,preventDefault:t=!0,scroll:i=!0,keyCode:r=9}){const s=E.useRef(0),o=Pe(c=>c.setEvents),a=Pe(c=>c.get),l=Pe(c=>c.gl);return E.useEffect(()=>{var c;let u=[],f;const h=a().events.filter,d=(c=e==null?void 0:e.current)!==null&&c!==void 0?c:l.domElement.parentNode,m=()=>d&&n&&n(u,Math.round(s.current)%u.length);o({filter:(y,w)=>{let S=[...y];(S.length!==u.length||!u.every(C=>S.map(b=>b.object.uuid).includes(C.object.uuid)))&&(s.current=0,u=S,m()),h&&(S=h(S,w));for(let C=0;C<Math.round(s.current)%S.length;C++){const b=S.shift();S=[...S,b]}return S}});const g=y=>{var w,S;s.current=y(s.current),(w=a().events.handlers)==null||w.onPointerCancel(void 0),(S=a().events.handlers)==null||S.onPointerMove(f),m()},v=y=>{(y.keyCode||y.which)===r&&(t&&y.preventDefault(),u.length>1&&g(w=>w+1))},p=y=>{t&&y.preventDefault();let w=0;y||(y=window.event),y.wheelDelta?w=y.wheelDelta/120:y.detail&&(w=-y.detail/3),u.length>1&&g(S=>Math.abs(S-w))},A=y=>f=y;return document.addEventListener("pointermove",A,{passive:!0}),i&&document.addEventListener("wheel",p),r!==void 0&&document.addEventListener("keydown",v),()=>{o({filter:h}),r!==void 0&&document.removeEventListener("keydown",v),i&&document.removeEventListener("wheel",p),document.removeEventListener("pointermove",A)}},[l,a,o,t,i,r]),null}function ede(n,e="pointer",t="auto",i=document.body){E.useEffect(()=>{if(n)return i.style.cursor=e,()=>void(i.style.cursor=t)},[n])}let v1=0;const E8=QE(n=>(bu.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-v1)/(i-v1)*100})},bu.onLoad=()=>{n({active:!1})},bu.onError=e=>n(t=>({errors:[...t.errors,e]})),bu.onProgress=(e,t,i)=>{t===i&&(v1=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-v1)/(i-v1)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function tde({children:n}){const e=E8();return E.createElement(E.Fragment,null,n==null?void 0:n(e))}const nde=n=>`Loading ${n.toFixed(2)}%`;function ide({containerStyles:n,innerStyles:e,barStyles:t,dataStyles:i,dataInterpolation:r=nde,initialState:s=o=>o}){const{active:o,progress:a}=E8(),l=E.useRef(0),c=E.useRef(0),u=E.useRef(null),[f,h]=E.useState(s(o));E.useEffect(()=>{let m;return o!==f&&(m=setTimeout(()=>h(o),300)),()=>clearTimeout(m)},[f,o]);const d=E.useCallback(()=>{u.current&&(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),u.current.innerText=r(l.current),l.current<a&&(c.current=requestAnimationFrame(d)))},[r,a]);return E.useEffect(()=>(d(),()=>cancelAnimationFrame(c.current)),[d]),f?E.createElement("div",{style:{...j2.container,opacity:o?1:0,...n}},E.createElement("div",null,E.createElement("div",{style:{...j2.inner,...e}},E.createElement("div",{style:{...j2.bar,transform:`scaleX(${a/100})`,...t}}),E.createElement("span",{ref:u,style:{...j2.data,...i}})))):null}const j2={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function rde(n,e,t){return Math.max(e,Math.min(n,t))}const Ii={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function wL(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function SL(n,e,t,i=.15){return i===0?rde(n,e,t):n<e?-wL(e-n,t-e,i)+e:n>t?+wL(n-t,t-e,i)+t:n}function sde(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[SL(e,s,o,i),SL(t,a,l,r)]}function ode(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ade(n){var e=ode(n,"string");return typeof e=="symbol"?e:String(e)}function Ar(n,e,t){return e=ade(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function CL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Qi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CL(Object(t),!0).forEach(function(i){Ar(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):CL(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const VV={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function bL(n){return n?n[0].toUpperCase()+n.slice(1):""}const lde=["enter","leave"];function cde(n=!1,e){return n&&!lde.includes(e)}function ude(n,e="",t=!1){const i=VV[n],r=i&&i[e]||e;return"on"+bL(n)+bL(r)+(cde(t,r)?"Capture":"")}const fde=["gotpointercapture","lostpointercapture"];function hde(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=fde.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function dde(n,e=""){const t=VV[n],i=t&&t[e]||e;return n+i}function ow(n){return"touches"in n}function jV(n){return ow(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function pde(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function mde(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function WV(n){return ow(n)?mde(n)[0]:n}function i6(n,e){try{const t=e.clientX-n.clientX,i=e.clientY-n.clientY,r=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,o=Math.hypot(t,i);return{angle:-(Math.atan2(t,i)*180)/Math.PI,distance:o,origin:[r,s]}}catch{}return null}function gde(n){return pde(n).map(e=>e.identifier)}function ML(n,e){const[t,i]=Array.from(n.touches).filter(r=>e.includes(r.identifier));return i6(t,i)}function pC(n){const e=WV(n);return ow(n)?e.identifier:e.pointerId}function Xm(n){const e=WV(n);return[e.clientX,e.clientY]}const IL=40,TL=800;function YV(n){let{deltaX:e,deltaY:t,deltaMode:i}=n;return i===1?(e*=IL,t*=IL):i===2&&(e*=TL,t*=TL),[e,t]}function Ade(n){var e,t;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:o}=n.currentTarget;return[(e=i??s)!==null&&e!==void 0?e:0,(t=r??o)!==null&&t!==void 0?t:0]}function vde(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function y3(n,...e){return typeof n=="function"?n(...e):n}function yde(){}function xde(...n){return n.length===0?yde:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function BL(n,e){return Object.assign({},e,n||{})}const _de=32;class XV{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?y3(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,vde(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const C=t._delta.map(Math.abs);Ii.addTo(t._distance,C)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=i.threshold,{_step:u,values:f}=t;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const h=[0,0];if(i.hasCustomTransform){const[C,b]=f;h[0]=u[0]!==!1?C-u[0]:0,h[1]=u[1]!==!1?b-u[1]:0}else h[0]=u[0]!==!1?o-u[0]:0,h[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const d=t.offset,m=t._active&&!t._blocked||t.active;m&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=y3(i.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[g,v]=t.offset,[[p,A],[y,w]]=t._bounds;t.overflow=[g<p?-1:g>A?1:0,v<y?-1:v>w?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const S=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=sde(t._bounds,t.offset,S),t.delta=Ii.sub(t.offset,d),this.computeMovement(),m&&(!t.last||s>_de)){t.delta=Ii.sub(t.offset,d);const C=t.delta.map(Math.abs);Ii.addTo(t.distance,C),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[C[0]/s,C[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Qi(Qi(Qi({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Ede([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class Cv extends XV{constructor(...e){super(...e),Ar(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ii.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ii.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[jV(e)]:i.axisThreshold;t.axis=Ede(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const wde=n=>n,PL=.15,qV={enabled(n=!0){return n},eventOptions(n,e,t){return Qi(Qi({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[PL,PL];case!1:return[0,0];default:return Ii.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Ii.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||wde},threshold(n){return Ii.toVector(n,0)}},Sde=0,ld=Qi(Qi({},qV),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=Sde){return n},bounds(n={}){if(typeof n=="function")return s=>ld.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),RL={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class Cde extends Cv{constructor(...e){super(...e),Ar(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=ld.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=pC(e),i._pointerActive=!0,this.computeValues(Xm(e)),this.computeInitial(),t.preventScrollAxis&&jV(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=pC(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=Xm(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Ii.sub(s,t._values),this.computeValues(s)),Ii.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=pC(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[f,h]=i.swipe.velocity,[d,m]=i.swipe.distance,g=i.swipe.duration;if(t.elapsedTime<g){const v=Math.abs(a/t.timeDelta),p=Math.abs(l/t.timeDelta);v>f&&Math.abs(c)>d&&(t.swipe[0]=Math.sign(a)),p>h&&Math.abs(u)>m&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,bde(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=RL[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,Ii.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in RL&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function bde(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const bv=typeof window<"u"&&window.document&&window.document.createElement;function JV(){return bv&&"ontouchstart"in window}function Mde(){return JV()||bv&&window.navigator.maxTouchPoints>1}function Ide(){return bv&&"onpointerdown"in window}function Tde(){return bv&&"exitPointerLock"in window.document}function Bde(){try{return"constructor"in GestureEvent}catch{return!1}}const ia={isBrowser:bv,gesture:Bde(),touch:JV(),touchscreen:Mde(),pointer:Ide(),pointerLock:Tde()},Pde=250,Rde=180,Dde=.5,Lde=50,Fde=250,Ode=10,DL={mouse:0,touch:0,pen:8},zde=Qi(Qi({},ld),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&ia.pointerLock,ia.touch&&t?"touch":this.pointerLock?"mouse":ia.pointer&&!r?"pointer":ia.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?Pde:void 0,!(!ia.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=Ii.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=Dde,distance:e=Lde,duration:t=Fde}={}){return{velocity:this.transform(Ii.toVector(n)),distance:this.transform(Ii.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return Rde;case!1:return 0;default:return n}},axisThreshold(n){return n?Qi(Qi({},DL),n):DL},keyboardDisplacement(n=Ode){return n}});function KV(n){const[e,t]=n.overflow,[i,r]=n._delta,[s,o]=n._direction;(e<0&&i>0&&s<0||e>0&&i<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&r>0&&o<0||t>0&&r<0&&o>0)&&(n._movement[1]=n._movementBound[1])}const Ude=30,kde=100;class Nde extends XV{constructor(...e){super(...e),Ar(this,"ingKey","pinching"),Ar(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=Ii.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const r=Math.abs(t)*Ude-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const r=ML(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(o=>r.has(o))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=i6(...Array.from(i.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=ML(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=i6(...Array.from(t.values()));i&&this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,r=i._values[1],s=t.angle-r;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),i.origin=t.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Ii.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(i=>e[i]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-YV(e)[1]/kde*i.offset[0],0],Ii.addTo(i._movement,i._delta),KV(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const Gde=Qi(Qi({},qV),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!ia.touch&&ia.gesture)return"gesture";if(ia.touch&&i)return"touch";if(ia.touchscreen){if(ia.pointer)return"pointer";if(ia.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=BL(y3(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=BL(y3(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Ii.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class Hde extends Cv{constructor(...e){super(...e),Ar(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Xm(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=Xm(e),i=this.state;i._delta=Ii.sub(t,i._values),Ii.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const Qde=Qi(Qi({},ld),{},{mouseOnly:(n=!0)=>n});class Vde extends Cv{constructor(...e){super(...e),Ar(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=Ade(e);t._delta=Ii.sub(i,t._values),Ii.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const jde=ld;class Wde extends Cv{constructor(...e){super(...e),Ar(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=YV(e),Ii.addTo(t._movement,t._delta),KV(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const Yde=ld;class Xde extends Cv{constructor(...e){super(...e),Ar(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Xm(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=Xm(e);t._movement=t._delta=Ii.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const qde=Qi(Qi({},ld),{},{mouseOnly:(n=!0)=>n}),w8=new Map,r6=new Map;function Jde(n){w8.set(n.key,n.engine),r6.set(n.key,n.resolver)}const Kde={key:"drag",engine:Cde,resolver:zde},$de={key:"hover",engine:Xde,resolver:qde},Zde={key:"move",engine:Hde,resolver:Qde},epe={key:"pinch",engine:Nde,resolver:Gde},tpe={key:"scroll",engine:Vde,resolver:jde},npe={key:"wheel",engine:Wde,resolver:Yde};function ipe(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function rpe(n,e){if(n==null)return{};var t=ipe(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const spe={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=ia.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},ope=["target","eventOptions","window","enabled","transform"];function m_(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=m_(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function ape(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,c=rpe(i,ope);if(t.shared=m_({target:r,eventOptions:s,window:o,enabled:a,transform:l},spe),e){const u=r6.get(e);t[e]=m_(Qi({shared:t.shared},c),u)}else for(const u in c){const f=r6.get(u);f&&(t[u]=m_(Qi({shared:t.shared},c[u]),f))}return t}class $V{constructor(e,t){Ar(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=dde(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Qi(Qi({},l),s);e.addEventListener(a,r,c);const u=()=>{e.removeEventListener(a,r,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class lpe{constructor(){Ar(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}let cpe=class{constructor(e){Ar(this,"gestures",new Set),Ar(this,"_targetEventStore",new $V(this)),Ar(this,"gestureEventStores",{}),Ar(this,"gestureTimeoutStores",{}),Ar(this,"handlers",{}),Ar(this,"config",{}),Ar(this,"pointerIds",new Set),Ar(this,"touchIds",new Set),Ar(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),upe(this,e)}setEventIds(e){if(ow(e))return this.touchIds=new Set(gde(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=ape(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=LL(i,a.eventOptions,!!r);if(a.enabled){const c=w8.get(o);new c(this,e,o).bind(l)}}const s=LL(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Qi(Qi({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=xde(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=hde(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}};function ip(n,e){n.gestures.add(e),n.gestureEventStores[e]=new $V(n,e),n.gestureTimeoutStores[e]=new lpe}function upe(n,e){e.drag&&ip(n,"drag"),e.wheel&&ip(n,"wheel"),e.scroll&&ip(n,"scroll"),e.move&&ip(n,"move"),e.pinch&&ip(n,"pinch"),e.hover&&ip(n,"hover")}const LL=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let h=a?i:ude(i,r,u);t&&f&&(h+="Passive"),n[h]=n[h]||[],n[h].push(s)},fpe=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function hpe(n){const e={},t={},i=new Set;for(let r in n)fpe.test(r)?(i.add(RegExp.lastMatch),t[r]=n[r]):e[r]=n[r];return[t,e,i]}function rp(n,e,t,i,r,s){if(!n.has(t)||!w8.has(i))return;const o=t+"Start",a=t+"End",l=c=>{let u;return c.first&&o in e&&e[o](c),t in e&&(u=e[t](c)),c.last&&a in e&&e[a](c),u};r[i]=l,s[i]=s[i]||{}}function dpe(n,e){const[t,i,r]=hpe(n),s={};return rp(r,t,"onDrag","drag",s,e),rp(r,t,"onWheel","wheel",s,e),rp(r,t,"onScroll","scroll",s,e),rp(r,t,"onPinch","pinch",s,e),rp(r,t,"onMove","move",s,e),rp(r,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function ppe(n,e={},t,i){const r=_t.useMemo(()=>new cpe(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),_t.useEffect(r.effect.bind(r)),_t.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function mpe(n){return n.forEach(Jde),function(t,i){const{handlers:r,nativeHandlers:s,config:o}=dpe(t,i||{});return ppe(r,o,void 0,s)}}function ZV(n,e){return mpe([Kde,epe,tpe,npe,Zde,$de])(n,e||{})}const mC=new F,FL=new Se,Jf=new F,W2=new F,y1=new F,OL=new Hr,gpe=E.forwardRef(({autoTransform:n=!0,matrix:e,axisLock:t,dragLimits:i,onHover:r,onDragStart:s,onDrag:o,onDragEnd:a,children:l,dragConfig:c,...u},f)=>{const h=Pe(y=>y.controls),{camera:d,size:m,raycaster:g,invalidate:v}=Pe(),p=E.useRef(null),A=ZV({onHover:({hovering:y})=>r&&r(y??!1),onDragStart:({event:y})=>{h&&(h.enabled=!1);const{point:w}=y;p.current.matrix.decompose(mC,new Lt,new F),Jf.copy(w),W2.copy(Jf).sub(mC),s&&s(mC),v()},onDrag:({xy:[y,w],intentional:S})=>{if(!S)return;const C=(y-m.left)/m.width*2-1,b=-((w-m.top)/m.height)*2+1;if(FL.set(C,b),g.setFromCamera(FL,d),!t)d.getWorldDirection(y1).negate();else switch(t){case"x":y1.set(1,0,0);break;case"y":y1.set(0,1,0);break;case"z":y1.set(0,0,1);break}OL.setFromNormalAndCoplanarPoint(y1,Jf),g.ray.intersectPlane(OL,Jf);const M=p.current.matrix.clone(),I=p.current.matrixWorld.clone(),T=new F(Jf.x-W2.x,Jf.y-W2.y,Jf.z-W2.z);if(i&&(T.x=i[0]?Math.max(Math.min(T.x,i[0][1]),i[0][0]):T.x,T.y=i[1]?Math.max(Math.min(T.y,i[1][1]),i[1][0]):T.y,T.z=i[2]?Math.max(Math.min(T.z,i[2][1]),i[2][0]):T.z),n){p.current.matrix.setPosition(T);const D=p.current.matrix.clone().multiply(M.invert()),R=p.current.matrix.clone().multiply(I.invert());o&&o(p.current.matrix,D,p.current.matrixWorld,R)}else{const D=new He().copy(p.current.matrix);D.setPosition(T);const R=D.clone().multiply(M.invert()),z=D.clone().multiply(I.invert());o&&o(D,R,p.current.matrixWorld,z)}v()},onDragEnd:()=>{h&&(h.enabled=!0),a&&a(),v()}},{drag:{filterTaps:!0,threshold:1,...typeof c=="object"?c:{}}});return E.useImperativeHandle(f,()=>p.current,[]),E.useLayoutEffect(()=>{e&&(p.current.matrix=e)},[e]),E.createElement("group",tt({ref:p},A(),{matrix:e,matrixAutoUpdate:!1},u),l)});function Vg(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s6(n,e){return s6=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},s6(n,e)}function Ape(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vpe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8];return i*a*f+r*l*c+s*o*u-s*a*c-r*o*f-i*l*u}function zL(n,e){for(var t=[],i=n.toArray(),r=e.toArray(),s=0;s<i.length;s++)t[s]=i[s]+r[s];return new tn().fromArray(t)}function ype(n){if(Array.isArray(n))return n}function xpe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function o6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function ej(n,e){if(n){if(typeof n=="string")return o6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o6(n,e)}}function _pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ol(n,e){return ype(n)||xpe(n,e)||ej(n,e)||_pe()}function Epe(n){if(Array.isArray(n))return o6(n)}function wpe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Spe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x3(n){return Epe(n)||wpe(n)||ej(n)||Spe()}function g_(n,e,t){return Ape()?g_=Reflect.construct:g_=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),c=new l;return o&&s6(c,o.prototype),c},g_.apply(null,arguments)}function Cpe(n){var e=Ol(n[0],2),t=e[0],i=e[1],r=Ol(n[1],2),s=r[0],o=r[1],a=Ol(n[2],2),l=a[0],c=a[1];return vpe(t,i,1,s,o,1,l,c,1)}function bpe(n){return Cpe(n)===0}var Mpe=new Se,Ipe=new Se;function UL(n){var e=n.map(function(c){return Array.isArray(c)?g_(Se,x3(c)):c}),t=Ol(e,3),i=t[0],r=t[1],s=t[2];if(bpe(n))return!1;var o=Mpe.subVectors(r,i),a=Ipe.subVectors(s,i),l=a.cross(o);return l>0}function tj(n,e,t){return Math.max(e,Math.min(t,n))}function nj(n,e){return tj(n-Math.floor(n/e)*e,0,e)}function ij(n,e){var t=nj(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function Tpe(n){return n/180*Math.PI}function Bpe(n){return n*180/Math.PI}function Ppe(n,e){for(var t=e.radius,i=t===void 0?1:t,r=n.length/3,s=2/r,o=Math.PI*(3-2.2360679775),a=0;a<n.length;a+=3){var l=a*s-1+s/2,c=Math.sqrt(1-Math.pow(l,2)),u=a%r*o,f=Math.cos(u)*c,h=Math.sin(u)*c;n[a]=f*i,n[a+1]=l*i,n[a+2]=h*i}}function Rpe(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(n.x-e.x)<t&&Math.abs(n.y-e.y)<t&&Math.abs(n.z-e.z)<t}function rj(n,e){return n.x===e.x?typeof n.z<"u"&&n.y===e.y?n.z-e.z:n.y-e.y:n.x-e.x}function Dpe(n){for(var e=n.sort(rj),t=[e[0],e[1]],i=2;i<e.length;i++)for(t.push(e[i]);t.length>2&&UL(x3(t.slice(-3)));)t.splice(t.length-2,1);for(var r=[e[e.length-1],e[e.length-2]],s=e.length-3;s>=0;s--)for(r.push(e[s]);r.length>2&&UL(x3(r.slice(-3)));)r.splice(r.length-2,1);r.splice(0,1),r.splice(r.length-1,1);var o=[].concat(t,r);return o}function Lpe(n,e,t){var i=Ol(e,2),r=i[0],s=i[1],o=Ol(t,2),a=o[0],l=o[1];return a+(n-r)*(l-a)/(s-r)}function Fpe(n){return n*n*n*(n*(n*6-15)+10)}function Ope(n,e,t){return n*(1-t)+e*t}function sj(n,e,t){return(t-n)/(e-n)}function zpe(n,e,t){var i=Math.sqrt(n*n+e*e+t*t);return[n/i,e/i,t/i]}function Upe(n,e,t){var i=n*n,r=e*e,s=t*t,o=n*Math.sqrt(1-(r+s)/2+r*s/3),a=e*Math.sqrt(1-(s+i)/2+s*i/3),l=t*Math.sqrt(1-(i+r)/2+i*r/3);return[o,a,l]}function oj(n,e){var t=new F().crossVectors(n,e),i=n.dot(e),r=new tn().identity(),s=new tn().set(0,-t.z,t.y,t.z,0,-t.x,-t.y,t.x,0),o=new tn().multiplyMatrices(s,s).multiplyScalar(1/(1+i)),a=zL(zL(r,s),o);return a}function kpe(n,e,t){var i=Math.asin(e),r=Math.atan2(n,-t);return[i,r]}function Npe(n,e){var t=Math.sin(n),i=Math.cos(n),r=Math.sin(e)*i,s=-Math.cos(e)*i;return[r,t,s]}function Gpe(n,e){var t=Ol(e,2),i=t[0],r=t[1],s=oj(n.normal,new F(0,1,0)),o=sj(i.clone().applyMatrix3(s).y,r.clone().applyMatrix3(s).y,0);return new F().lerpVectors(i,r,o)}function Hpe(n,e){var t=e.normal.dot(n);return t}function Qpe(n,e){var t=Ol(n,3),i=t[0],r=t[1],s=t[2],o=Ol(e,2),a=o[0],l=o[1];return s*a*l+r*a+i}function Vpe(n,e){var t=Ol(e,2),i=t[0],r=t[1],s=i*r,o=n/s,a=n-s*o,l=a/i,c=a%i;return[c,l,o]}function jpe(n,e){return n[0]+e[0]*n[1]}function Wpe(n,e){var t=n%e,i=Math.floor(n/e);return[t,i]}var gC=Object.freeze({__proto__:null,clamp:tj,repeat:nj,deltaAngle:ij,degToRad:Tpe,radToDeg:Bpe,fibonacciOnSphere:Ppe,vectorEquals:Rpe,lexicographic:rj,convexHull:Dpe,remap:Lpe,fade:Fpe,lerp:Ope,inverseLerp:sj,normalize:zpe,pointOnCubeToPointOnSphere:Upe,rotateVectorOnVector:oj,pointToCoordinate:kpe,coordinateToPoint:Npe,planeSegmentIntersection:Gpe,pointToPlaneDistance:Hpe,getIndexFrom3D:Qpe,get3DFromIndex:Vpe,getIndexFrom2D:jpe,get2DFromIndex:Wpe});function aj(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Go=function n(e,t,i){var r=this;aj(this,n),Vg(this,"dot2",function(s,o){return r.x*s+r.y*o}),Vg(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},Ype=[new Go(1,1,0),new Go(-1,1,0),new Go(1,-1,0),new Go(-1,-1,0),new Go(1,0,1),new Go(-1,0,1),new Go(1,0,-1),new Go(-1,0,-1),new Go(0,1,1),new Go(0,-1,1),new Go(0,1,-1),new Go(0,-1,-1)],kL=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],NL=new Array(512),GL=new Array(512),Xpe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=kL[t]^e&255:i=kL[t]^e>>8&255,NL[t]=NL[t+256]=i,GL[t]=GL[t+256]=Ype[i%12]}};Xpe(0);function qpe(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function HL(n){var e=qpe(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Jpe=function n(e){var t=this;aj(this,n),Vg(this,"seed",0),Vg(this,"init",function(i){t.seed=i,t.value=HL(i)}),Vg(this,"value",HL(this.seed)),this.init(e)};new Jpe(Math.random());var Kpe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},lj=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},$pe=function(e){return e},Zpe={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},eme={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},tme={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},nme={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},ime={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},rme={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Tr(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:lj,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=a)return n[e]=t,!1;i=Math.max(1e-4,i);var c=2/i,u=o(c*r),f=n[e]-t,h=t,d=s*i;f=Math.min(Math.max(f,-d),d),t=n[e]-f;var m=(n.__damp[l]+c*f)*r;n.__damp[l]=(n.__damp[l]-c*m)*u;var g=t+(f+m)*u;return h-n[e]>0==g>h&&(g=h,n.__damp[l]=(g-h)/r),n[e]=g,!0}var sme=function(e){return e&&e.isCamera},ome=function(e){return e&&e.isLight},x1=new F,QL=new Lt,VL=new Lt,_1=new He,AC=new F;function ame(n,e,t,i,r,s,o){typeof e=="number"?x1.setScalar(e):Array.isArray(e)?x1.set(e[0],e[1],e[2]):x1.copy(e);var a=n.parent;n.updateWorldMatrix(!0,!1),AC.setFromMatrixPosition(n.matrixWorld),sme(n)||ome(n)?_1.lookAt(AC,x1,n.up):_1.lookAt(x1,AC,n.up),_3(n.quaternion,VL.setFromRotationMatrix(_1),t,i,r,s,o),a&&(_1.extractRotation(a.matrixWorld),QL.setFromRotationMatrix(_1),_3(n.quaternion,VL.copy(n.quaternion).premultiply(QL.invert()),t,i,r,s,o))}function Sm(n,e,t,i,r,s,o,a){return Tr(n,e,n[e]+ij(n[e],t),i,r,s,o,a)}var E1=new Se,jL,WL;function lme(n,e,t,i,r,s,o){return typeof e=="number"?E1.setScalar(e):Array.isArray(e)?E1.set(e[0],e[1]):E1.copy(e),jL=Tr(n,"x",E1.x,t,i,r,s,o),WL=Tr(n,"y",E1.y,t,i,r,s,o),jL||WL}var sp=new F,YL,XL,qL;function a6(n,e,t,i,r,s,o){return typeof e=="number"?sp.setScalar(e):Array.isArray(e)?sp.set(e[0],e[1],e[2]):sp.copy(e),YL=Tr(n,"x",sp.x,t,i,r,s,o),XL=Tr(n,"y",sp.y,t,i,r,s,o),qL=Tr(n,"z",sp.z,t,i,r,s,o),YL||XL||qL}var Kf=new sn,JL,KL,$L,ZL;function cme(n,e,t,i,r,s,o){return typeof e=="number"?Kf.setScalar(e):Array.isArray(e)?Kf.set(e[0],e[1],e[2],e[3]):Kf.copy(e),JL=Tr(n,"x",Kf.x,t,i,r,s,o),KL=Tr(n,"y",Kf.y,t,i,r,s,o),$L=Tr(n,"z",Kf.z,t,i,r,s,o),ZL=Tr(n,"w",Kf.w,t,i,r,s,o),JL||KL||$L||ZL}var w1=new Qr,eF,tF,nF;function ume(n,e,t,i,r,s,o){return Array.isArray(e)?w1.set(e[0],e[1],e[2],e[3]):w1.copy(e),eF=Sm(n,"x",w1.x,t,i,r,s,o),tF=Sm(n,"y",w1.y,t,i,r,s,o),nF=Sm(n,"z",w1.z,t,i,r,s,o),eF||tF||nF}var op=new et,iF,rF,sF;function fme(n,e,t,i,r,s,o){return e instanceof et?op.copy(e):Array.isArray(e)?op.setRGB(e[0],e[1],e[2]):op.set(e),iF=Tr(n,"r",op.r,t,i,r,s,o),rF=Tr(n,"g",op.g,t,i,r,s,o),sF=Tr(n,"b",op.b,t,i,r,s,o),iF||rF||sF}var Ta=new Lt,oc=new sn,oF=new sn,S1=new sn,aF,lF,cF,uF;function _3(n,e,t,i,r,s,o){var a=n;Array.isArray(e)?Ta.set(e[0],e[1],e[2],e[3]):Ta.copy(e);var l=n.dot(Ta)>0?1:-1;return Ta.x*=l,Ta.y*=l,Ta.z*=l,Ta.w*=l,aF=Tr(n,"x",Ta.x,t,i,r,s,o),lF=Tr(n,"y",Ta.y,t,i,r,s,o),cF=Tr(n,"z",Ta.z,t,i,r,s,o),uF=Tr(n,"w",Ta.w,t,i,r,s,o),oc.set(n.x,n.y,n.z,n.w).normalize(),oF.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),S1.copy(oc).multiplyScalar(oF.dot(oc)/oc.dot(oc)),a.__damp.velocity_x-=S1.x,a.__damp.velocity_y-=S1.y,a.__damp.velocity_z-=S1.z,a.__damp.velocity_w-=S1.w,n.set(oc.x,oc.y,oc.z,oc.w),aF||lF||cF||uF}var C1=new Wh,fF,hF,dF;function hme(n,e,t,i,r,s,o){return Array.isArray(e)?C1.set(e[0],e[1],e[2]):C1.copy(e),fF=Tr(n,"radius",C1.radius,t,i,r,s,o),hF=Sm(n,"phi",C1.phi,t,i,r,s,o),dF=Sm(n,"theta",C1.theta,t,i,r,s,o),fF||hF||dF}var Y2=new He,pF=new F,mF=new Lt,gF=new F,AF,vF,yF;function dme(n,e,t,i,r,s,o){var a=n;return a.__damp===void 0&&(a.__damp={position:new F,rotation:new Lt,scale:new F},n.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?Y2.set.apply(Y2,x3(e)):Y2.copy(e),Y2.decompose(pF,mF,gF),AF=a6(a.__damp.position,pF,t,i,r,s,o),vF=_3(a.__damp.rotation,mF,t,i,r,s,o),yF=a6(a.__damp.scale,gF,t,i,r,s,o),n.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),AF||vF||yF}var qm=Object.freeze({__proto__:null,rsqw:Kpe,exp:lj,linear:$pe,sine:Zpe,cubic:eme,quint:tme,circ:nme,quart:ime,expo:rme,damp:Tr,dampLookAt:ame,dampAngle:Sm,damp2:lme,damp3:a6,damp4:cme,dampE:ume,dampC:fme,dampQ:_3,dampS:hme,dampM:dme});const S8=E.createContext(null);function C8(){return E.useContext(S8)}function pme({eps:n=1e-5,enabled:e=!0,infinite:t,horizontal:i,pages:r=1,distance:s=1,damping:o=.25,maxSpeed:a=1/0,prepend:l=!1,style:c={},children:u}){const{get:f,setEvents:h,gl:d,size:m,invalidate:g,events:v}=Pe(),[p]=E.useState(()=>document.createElement("div")),[A]=E.useState(()=>document.createElement("div")),[y]=E.useState(()=>document.createElement("div")),w=d.domElement.parentNode,S=E.useRef(0),C=E.useMemo(()=>({el:p,eps:n,fill:A,fixed:y,horizontal:i,damping:o,offset:0,delta:0,scroll:S,pages:r,range(I,T,D=0){const R=I-D,z=R+T+D*2;return this.offset<R?0:this.offset>z?1:(this.offset-R)/(z-R)},curve(I,T,D=0){return Math.sin(this.range(I,T,D)*Math.PI)},visible(I,T,D=0){const R=I-D,z=R+T+D*2;return this.offset>=R&&this.offset<=z}}),[n,o,i,r]);E.useEffect(()=>{p.style.position="absolute",p.style.width="100%",p.style.height="100%",p.style[i?"overflowX":"overflowY"]="auto",p.style[i?"overflowY":"overflowX"]="hidden",p.style.top="0px",p.style.left="0px";for(const T in c)p.style[T]=c[T];y.style.position="sticky",y.style.top="0px",y.style.left="0px",y.style.width="100%",y.style.height="100%",y.style.overflow="hidden",p.appendChild(y),A.style.height=i?"100%":`${r*s*100}%`,A.style.width=i?`${r*s*100}%`:"100%",A.style.pointerEvents="none",p.appendChild(A),l?w.prepend(p):w.appendChild(p),p[i?"scrollLeft":"scrollTop"]=1;const M=v.connected||d.domElement;requestAnimationFrame(()=>v.connect==null?void 0:v.connect(p));const I=f().events.compute;return h({compute(T,D){const{left:R,top:z}=w.getBoundingClientRect(),L=T.clientX-R,H=T.clientY-z;D.pointer.set(L/D.size.width*2-1,-(H/D.size.height)*2+1),D.raycaster.setFromCamera(D.pointer,D.camera)}}),()=>{w.removeChild(p),h({compute:I}),v.connect==null||v.connect(M)}},[r,s,i,p,A,y,w]),E.useEffect(()=>{if(v.connected===p){const M=m[i?"width":"height"],I=p[i?"scrollWidth":"scrollHeight"],T=I-M;let D=0,R=!0,z=!0;const L=()=>{if(!(!e||z)&&(g(),D=p[i?"scrollLeft":"scrollTop"],S.current=D/T,t)){if(!R){if(D>=T){const J=1-C.offset;p[i?"scrollLeft":"scrollTop"]=1,S.current=C.offset=-J,R=!0}else if(D<=0){const J=1+C.offset;p[i?"scrollLeft":"scrollTop"]=I,S.current=C.offset=J,R=!0}}R&&setTimeout(()=>R=!1,40)}};p.addEventListener("scroll",L,{passive:!0}),requestAnimationFrame(()=>z=!1);const H=J=>p.scrollLeft+=J.deltaY/2;return i&&p.addEventListener("wheel",H,{passive:!0}),()=>{p.removeEventListener("scroll",L),i&&p.removeEventListener("wheel",H)}}},[p,v,m,t,C,g,i,e]);let b=0;return Bt((M,I)=>{b=C.offset,qm.damp(C,"offset",S.current,o,I,a,void 0,n),qm.damp(C,"delta",Math.abs(b-C.offset),o,I,a,void 0,n),C.delta>n&&g()}),E.createElement(S8.Provider,{value:C},u)}const mme=E.forwardRef(({children:n},e)=>{const t=E.useRef(null);E.useImperativeHandle(e,()=>t.current,[]);const i=C8(),{width:r,height:s}=Pe(o=>o.viewport);return Bt(()=>{t.current.position.x=i.horizontal?-r*(i.pages-1)*i.offset:0,t.current.position.y=i.horizontal?0:s*(i.pages-1)*i.offset}),E.createElement("group",{ref:t},n)}),gme=E.forwardRef(({children:n,style:e,...t},i)=>{const r=C8(),s=E.useRef(null);E.useImperativeHandle(i,()=>s.current,[]);const{width:o,height:a}=Pe(u=>u.size),l=E.useContext(Yh),c=E.useMemo(()=>QI(r.fixed),[r.fixed]);return Bt(()=>{r.delta>r.eps&&(s.current.style.transform=`translate3d(${r.horizontal?-o*(r.pages-1)*r.offset:0}px,${r.horizontal?0:a*(r.pages-1)*-r.offset}px,0)`)}),c.render(E.createElement("div",tt({ref:s,style:{...e,position:"absolute",top:0,left:0,willChange:"transform"}},t),E.createElement(S8.Provider,{value:r},E.createElement(Yh.Provider,{value:l},n)))),null}),Ame=E.forwardRef(({html:n,...e},t)=>{const i=n?gme:mme;return E.createElement(i,tt({ref:t},e))});let b8=Iv();const yn=n=>Mv(n,b8);let M8=Iv();yn.write=n=>Mv(n,M8);let aw=Iv();yn.onStart=n=>Mv(n,aw);let I8=Iv();yn.onFrame=n=>Mv(n,I8);let T8=Iv();yn.onFinish=n=>Mv(n,T8);let Cm=[];yn.setTimeout=(n,e)=>{let t=yn.now()+e,i=()=>{let s=Cm.findIndex(o=>o.cancel==i);~s&&Cm.splice(s,1),Bu-=~s?1:0},r={time:t,handler:n,cancel:i};return Cm.splice(cj(t),0,r),Bu+=1,uj(),r};let cj=n=>~(~Cm.findIndex(e=>e.time>n)||~Cm.length);yn.cancel=n=>{aw.delete(n),I8.delete(n),T8.delete(n),b8.delete(n),M8.delete(n)};yn.sync=n=>{l6=!0,yn.batchedUpdates(n),l6=!1};yn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,yn.onStart(t)}return i.handler=n,i.cancel=()=>{aw.delete(t),e=null},i};let B8=typeof window<"u"?window.requestAnimationFrame:()=>{};yn.use=n=>B8=n;yn.now=typeof performance<"u"?()=>performance.now():Date.now;yn.batchedUpdates=n=>n();yn.catch=console.error;yn.frameLoop="always";yn.advance=()=>{yn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):hj()};let Tu=-1,Bu=0,l6=!1;function Mv(n,e){l6?(e.delete(n),n(0)):(e.add(n),uj())}function uj(){Tu<0&&(Tu=0,yn.frameLoop!=="demand"&&B8(fj))}function vme(){Tu=-1}function fj(){~Tu&&(B8(fj),yn.batchedUpdates(hj))}function hj(){let n=Tu;Tu=yn.now();let e=cj(Tu);if(e&&(dj(Cm.splice(0,e),t=>t.handler()),Bu-=e),!Bu){vme();return}aw.flush(),b8.flush(n?Math.min(64,Tu-n):16.667),I8.flush(),M8.flush(),T8.flush()}function Iv(){let n=new Set,e=n;return{add(t){Bu+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Bu-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Bu-=e.size,dj(e,i=>i(t)&&n.add(i)),Bu+=n.size,e=n)}}}function dj(n,e){n.forEach(t=>{try{e(t)}catch(i){yn.catch(i)}})}function c6(){}const yme=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),bt={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function mc(n,e){if(bt.arr(n)){if(!bt.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}const si=(n,e)=>n.forEach(e);function Uc(n,e,t){if(bt.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}const ca=n=>bt.und(n)?[]:bt.arr(n)?n:[n];function jg(n,e){if(n.size){const t=Array.from(n);n.clear(),si(t,e)}}const pg=(n,...e)=>jg(n,t=>t(...e)),P8=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let R8,pj,Ju=null,mj=!1,D8=c6;const xme=n=>{n.to&&(pj=n.to),n.now&&(yn.now=n.now),n.colors!==void 0&&(Ju=n.colors),n.skipAnimation!=null&&(mj=n.skipAnimation),n.createStringInterpolator&&(R8=n.createStringInterpolator),n.requestAnimationFrame&&yn.use(n.requestAnimationFrame),n.batchedUpdates&&(yn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(D8=n.willAdvance),n.frameLoop&&(yn.frameLoop=n.frameLoop)};var Nl=Object.freeze({__proto__:null,get createStringInterpolator(){return R8},get to(){return pj},get colors(){return Ju},get skipAnimation(){return mj},get willAdvance(){return D8},assign:xme});const Wg=new Set;let sa=[],vC=[],E3=0;const lw={get idle(){return!Wg.size&&!sa.length},start(n){E3>n.priority?(Wg.add(n),yn.onStart(_me)):(gj(n),yn(u6))},advance:u6,sort(n){if(E3)yn.onFrame(()=>lw.sort(n));else{const e=sa.indexOf(n);~e&&(sa.splice(e,1),Aj(n))}},clear(){sa=[],Wg.clear()}};function _me(){Wg.forEach(gj),Wg.clear(),yn(u6)}function gj(n){sa.includes(n)||Aj(n)}function Aj(n){sa.splice(Eme(sa,e=>e.priority>n.priority),0,n)}function u6(n){const e=vC;for(let t=0;t<sa.length;t++){const i=sa[t];E3=i.priority,i.idle||(D8(i),i.advance(n),i.idle||e.push(i))}return E3=0,vC=sa,vC.length=0,sa=e,sa.length>0}function Eme(n,e){const t=n.findIndex(e);return t<0?n.length:t}const wme=(n,e,t)=>Math.min(Math.max(t,n),e),Sme={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ya="[-+]?\\d*\\.?\\d+",w3=Ya+"%";function cw(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}const Cme=new RegExp("rgb"+cw(Ya,Ya,Ya)),bme=new RegExp("rgba"+cw(Ya,Ya,Ya,Ya)),Mme=new RegExp("hsl"+cw(Ya,w3,w3)),Ime=new RegExp("hsla"+cw(Ya,w3,w3,Ya)),Tme=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Bme=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Pme=/^#([0-9a-fA-F]{6})$/,Rme=/^#([0-9a-fA-F]{8})$/;function Dme(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=Pme.exec(n))?parseInt(e[1]+"ff",16)>>>0:Ju&&Ju[n]!==void 0?Ju[n]:(e=Cme.exec(n))?(ap(e[1])<<24|ap(e[2])<<16|ap(e[3])<<8|255)>>>0:(e=bme.exec(n))?(ap(e[1])<<24|ap(e[2])<<16|ap(e[3])<<8|EF(e[4]))>>>0:(e=Tme.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Rme.exec(n))?parseInt(e[1],16)>>>0:(e=Bme.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Mme.exec(n))?(xF(_F(e[1]),X2(e[2]),X2(e[3]))|255)>>>0:(e=Ime.exec(n))?(xF(_F(e[1]),X2(e[2]),X2(e[3]))|EF(e[4]))>>>0:null}function yC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function xF(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=yC(r,i,n+1/3),o=yC(r,i,n),a=yC(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function ap(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function _F(n){return(parseFloat(n)%360+360)%360/360}function EF(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function X2(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function wF(n){let e=Dme(n);if(e===null)return n;e=e||0;let t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}const HA=(n,e,t)=>{if(bt.fun(n))return n;if(bt.arr(n))return HA({range:n,output:e,extrapolate:t});if(bt.str(n.output[0]))return R8(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Fme(c,s);return Lme(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Lme(n,e,t,i,r,s,o,a,l){let c=l?l(n):n;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>t){if(a==="identity")return c;a==="clamp"&&(c=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Fme(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}const Ome=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const i=t*n,r=e==="end"?Math.floor(i):Math.ceil(i);return wme(0,1,r/n)},S3=1.70158,q2=S3*1.525,SF=S3+1,CF=2*Math.PI/3,bF=2*Math.PI/4.5,J2=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,zme={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>SF*n*n*n-S3*n*n,easeOutBack:n=>1+SF*Math.pow(n-1,3)+S3*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((q2+1)*2*n-q2)/2:(Math.pow(2*n-2,2)*((q2+1)*(n*2-2)+q2)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*CF),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*CF)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*bF))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*bF)/2+1,easeInBounce:n=>1-J2(1-n),easeOutBounce:J2,easeInOutBounce:n=>n<.5?(1-J2(1-2*n))/2:(1+J2(2*n-1))/2,steps:Ome};function f6(){return f6=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},f6.apply(this,arguments)}const Jm=Symbol.for("FluidValue.get"),Kh=Symbol.for("FluidValue.observers"),Ml=n=>!!(n&&n[Jm]),$o=n=>n&&n[Jm]?n[Jm]():n,MF=n=>n[Kh]||null;function Ume(n,e){n.eventObserved?n.eventObserved(e):n(e)}function C3(n,e){let t=n[Kh];t&&t.forEach(i=>{Ume(i,e)})}class kme{constructor(e){if(this[Jm]=void 0,this[Kh]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");Nme(this,e)}}const Nme=(n,e)=>vj(n,Jm,e);function Tv(n,e){if(n[Jm]){let t=n[Kh];t||vj(n,Kh,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function b3(n,e){let t=n[Kh];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[Kh]=null,n.observerRemoved&&n.observerRemoved(i,e)}}const vj=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),A_=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Gme=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,IF=new RegExp(`(${A_.source})(%|[a-z]+)`,"i"),Hme=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,uw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,yj=n=>{const[e,t]=Qme(n);if(!e||P8())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&uw.test(t))return yj(t);if(t)return t}return n},Qme=n=>{const e=uw.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]};let xC;const Vme=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,xj=n=>{xC||(xC=Ju?new RegExp(`(${Object.keys(Ju).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>$o(s).replace(uw,yj).replace(Gme,wF).replace(xC,wF)),t=e.map(s=>s.match(A_).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>HA(f6({},n,{output:s})));return s=>{var o;const a=!IF.test(e[0])&&((o=e.find(c=>IF.test(c)))==null?void 0:o.replace(A_,""));let l=0;return e[0].replace(A_,()=>`${r[l++](s)}${a||""}`).replace(Hme,Vme)}},L8="react-spring: ",_j=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${L8}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},jme=_j(console.warn);function Wme(){jme(`${L8}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const Yme=_j(console.warn);function Xme(){Yme(`${L8}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function fw(n){return bt.str(n)&&(n[0]=="#"||/\d/.test(n)||!P8()&&uw.test(n)||n in(Ju||{}))}const F8=P8()?E.useEffect:E.useLayoutEffect,qme=()=>{const n=E.useRef(!1);return F8(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function Ej(){const n=E.useState()[1],e=qme();return()=>{e.current&&n(Math.random())}}function Jme(n,e){const[t]=E.useState(()=>({inputs:e,result:n()})),i=E.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Kme(e,s.inputs)||(s={inputs:e,result:n()}):s=t,E.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function Kme(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}const wj=n=>E.useEffect(n,$me),$me=[];function TF(n){const e=E.useRef();return E.useEffect(()=>{e.current=n}),e.current}const QA=Symbol.for("Animated:node"),Zme=n=>!!n&&n[QA]===n,Sl=n=>n&&n[QA],O8=(n,e)=>yme(n,QA,e),hw=n=>n&&n[QA]&&n[QA].getPayload();class Sj{constructor(){this.payload=void 0,O8(this,this)}getPayload(){return this.payload||[]}}class g0 extends Sj{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,bt.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new g0(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return bt.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,bt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class Km extends g0{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=HA({output:[e,e]})}static create(e){return new Km(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(bt.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=HA({output:[this.getValue(),e]})),this._value=0,super.reset()}}const M3={dependencies:null};class z8 extends Sj{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Uc(this.source,(i,r)=>{Zme(i)?t[r]=i.getValue(e):Ml(i)?t[r]=$o(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&si(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Uc(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){M3.dependencies&&Ml(e)&&M3.dependencies.add(e);const t=hw(e);t&&si(t,i=>this.add(i))}}class U8 extends z8{constructor(e){super(e)}static create(e){return new U8(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(e0e)),!0)}}function e0e(n){return(fw(n)?Km:g0).create(n)}function h6(n){const e=Sl(n);return e?e.constructor:bt.arr(n)?U8:fw(n)?Km:g0}function I3(){return I3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},I3.apply(this,arguments)}const BF=(n,e)=>{const t=!bt.fun(n)||n.prototype&&n.prototype.isReactComponent;return E.forwardRef((i,r)=>{const s=E.useRef(null),o=t&&E.useCallback(m=>{s.current=i0e(r,m)},[r]),[a,l]=n0e(i,e),c=Ej(),u=()=>{const m=s.current;if(t&&!m)return;(m?e.applyAnimatedValues(m,a.getValue(!0)):!1)===!1&&c()},f=new t0e(u,l),h=E.useRef();F8(()=>(h.current=f,si(l,m=>Tv(m,f)),()=>{h.current&&(si(h.current.deps,m=>b3(m,h.current)),yn.cancel(h.current.update))})),E.useEffect(u,[]),wj(()=>()=>{const m=h.current;si(m.deps,g=>b3(g,m))});const d=e.getComponentProps(a.getValue());return E.createElement(n,I3({},d,{ref:o}))})};class t0e{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&yn.write(this.update)}}function n0e(n,e){const t=new Set;return M3.dependencies=t,n.style&&(n=I3({},n,{style:e.createAnimatedStyle(n.style)})),n=new z8(n),M3.dependencies=null,[n,t]}function i0e(n,e){return n&&(bt.fun(n)?n(e):n.current=e),e}const PF=Symbol.for("AnimatedComponent"),r0e=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new z8(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=RF(o)||"Anonymous";return bt.str(o)?o=s[o]||(s[o]=BF(o,r)):o=o[PF]||(o[PF]=BF(o,r)),o.displayName=`Animated(${a})`,o};return Uc(n,(o,a)=>{bt.arr(n)&&(a=RF(o)),s[a]=s(o)}),{animated:s}},RF=n=>bt.str(n)?n:n&&bt.str(n.displayName)?n.displayName:bt.fun(n)&&n.name||null;function Vr(){return Vr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Vr.apply(this,arguments)}function ch(n,...e){return bt.fun(n)?n(...e):n}const Yg=(n,e)=>n===!0||!!(e&&n&&(bt.fun(n)?n(e):ca(n).includes(e))),Cj=(n,e)=>bt.obj(n)?e&&n[e]:n,bj=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,s0e=n=>n,k8=(n,e=s0e)=>{let t=o0e;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);bt.und(s)||(i[r]=s)}return i},o0e=["config","onProps","onStart","onChange","onPause","onResume","onRest"],a0e={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function l0e(n){const e={};let t=0;if(Uc(n,(i,r)=>{a0e[r]||(e[r]=i,t++)}),t)return e}function Mj(n){const e=l0e(n);if(e){const t={to:e};return Uc(n,(i,r)=>r in e||(t[r]=i)),t}return Vr({},n)}function VA(n){return n=$o(n),bt.arr(n)?n.map(VA):fw(n)?Nl.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function c0e(n){for(const e in n)return!0;return!1}function d6(n){return bt.fun(n)||bt.arr(n)&&bt.obj(n[0])}function u0e(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function f0e(n,e){if(e&&n.ref!==e){var t;(t=n.ref)==null||t.delete(n),e.add(n),n.ref=e}}const h0e={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},p6=Vr({},h0e.default,{mass:1,damping:1,easing:zme.linear,clamp:!1});class d0e{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,p6)}}function p0e(n,e,t){t&&(t=Vr({},t),DF(t,e),e=Vr({},t,e)),DF(n,e),Object.assign(n,e);for(const o in p6)n[o]==null&&(n[o]=p6[o]);let{mass:i,frequency:r,damping:s}=n;return bt.und(r)||(r<.01&&(r=.01),s<0&&(s=0),n.tension=Math.pow(2*Math.PI/r,2)*i,n.friction=4*Math.PI*s*i/r),n}function DF(n,e){if(!bt.und(e.decay))n.duration=void 0;else{const t=!bt.und(e.tension)||!bt.und(e.friction);(t||!bt.und(e.frequency)||!bt.und(e.damping)||!bt.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}const LF=[];class m0e{constructor(){this.changed=!1,this.values=LF,this.toValues=null,this.fromValues=LF,this.to=void 0,this.from=void 0,this.config=new d0e,this.immediate=!1}}function Ij(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{var l;let c,u,f=Yg((l=t.cancel)!=null?l:i==null?void 0:i.cancel,e);if(f)m();else{bt.und(t.pause)||(r.paused=Yg(t.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Yg(g,e)),c=ch(t.delay||0,e),g?(r.resumeQueue.add(d),s.pause()):(s.resume(),d())}function h(){r.resumeQueue.add(d),r.timeouts.delete(u),u.cancel(),c=u.time-yn.now()}function d(){c>0&&!Nl.skipAnimation?(r.delayed=!0,u=yn.setTimeout(m,c),r.pauseQueue.add(h),r.timeouts.add(u)):m()}function m(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(h),r.timeouts.delete(u),n<=(r.cancelId||0)&&(f=!0);try{s.start(Vr({},t,{callId:n,cancel:f}),o)}catch(g){a(g)}}})}const N8=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?bm(n.get()):e.every(t=>t.noop)?Tj(n.get()):Qa(n.get(),e.every(t=>t.finished)),Tj=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),Qa=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),bm=n=>({value:n,cancelled:!0,finished:!1});function Bj(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const c=k8(e,(v,p)=>p==="onRest"?void 0:v);let u,f;const h=new Promise((v,p)=>(u=v,f=p)),d=v=>{const p=r<=(t.cancelId||0)&&bm(i)||r!==t.asyncId&&Qa(i,!1);if(p)throw v.result=p,f(v),v},m=(v,p)=>{const A=new FF,y=new OF;return(async()=>{if(Nl.skipAnimation)throw jA(t),y.result=Qa(i,!1),f(y),y;d(A);const w=bt.obj(v)?Vr({},v):Vr({},p,{to:v});w.parentId=r,Uc(c,(C,b)=>{bt.und(w[b])&&(w[b]=C)});const S=await i.start(w);return d(A),t.paused&&await new Promise(C=>{t.resumeQueue.add(C)}),S})()};let g;if(Nl.skipAnimation)return jA(t),Qa(i,!1);try{let v;bt.arr(n)?v=(async p=>{for(const A of p)await m(A)})(n):v=Promise.resolve(n(m,i.stop.bind(i))),await Promise.all([v.then(u),h]),g=Qa(i.get(),!0,!1)}catch(v){if(v instanceof FF)g=v.result;else if(v instanceof OF)g=v.result;else throw v}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return bt.fun(o)&&yn.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function jA(n,e){jg(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}class FF extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class OF extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const m6=n=>n instanceof G8;let g0e=1;class G8 extends kme{constructor(...e){super(...e),this.id=g0e++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Sl(this);return e&&e.getValue()}to(...e){return Nl.to(this,e)}interpolate(...e){return Wme(),Nl.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){C3(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||lw.sort(this),C3(this,{type:"priority",parent:this,priority:e})}}const $h=Symbol.for("SpringPhase"),Pj=1,g6=2,A6=4,_C=n=>(n[$h]&Pj)>0,uu=n=>(n[$h]&g6)>0,b1=n=>(n[$h]&A6)>0,zF=(n,e)=>e?n[$h]|=g6|Pj:n[$h]&=~g6,UF=(n,e)=>e?n[$h]|=A6:n[$h]&=~A6;class A0e extends G8{constructor(e,t){if(super(),this.key=void 0,this.animation=new m0e,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!bt.und(e)||!bt.und(t)){const i=bt.obj(e)?Vr({},e):Vr({},t,{from:e});bt.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(uu(this)||this._state.asyncTo)||b1(this)}get goal(){return $o(this.animation.to)}get velocity(){const e=Sl(this);return e instanceof g0?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return _C(this)}get isAnimating(){return uu(this)}get isPaused(){return b1(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1;const r=this.animation;let{config:s,toValues:o}=r;const a=hw(r.to);!a&&Ml(r.to)&&(o=ca($o(r.to))),r.values.forEach((u,f)=>{if(u.done)return;const h=u.constructor==Km?1:a?a[f].lastPosition:o[f];let d=r.immediate,m=h;if(!d){if(m=u.lastPosition,s.tension<=0){u.done=!0;return}let g=u.elapsedTime+=e;const v=r.fromValues[f],p=u.v0!=null?u.v0:u.v0=bt.arr(s.velocity)?s.velocity[f]:s.velocity;let A;const y=s.precision||(v==h?.005:Math.min(1,Math.abs(h-v)*.001));if(bt.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,S=Math.exp(-(1-w)*g);m=v+p/(1-w)*(1-S),d=Math.abs(u.lastPosition-m)<=y,A=p*S}else{A=u.lastVelocity==null?p:u.lastVelocity;const w=s.restVelocity||y/10,S=s.clamp?0:s.bounce,C=!bt.und(S),b=v==h?u.v0>0:v<h;let M,I=!1;const T=1,D=Math.ceil(e/T);for(let R=0;R<D&&(M=Math.abs(A)>w,!(!M&&(d=Math.abs(h-m)<=y,d)));++R){C&&(I=m==h||m>h==b,I&&(A=-A*S,m=h));const z=-s.tension*1e-6*(m-h),L=-s.friction*.001*A,H=(z+L)/s.mass;A=A+H*T,m=m+A*T}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,g=u.elapsedTime+=e)),w=(s.progress||0)+g/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),m=v+s.easing(w)*(h-v),A=(m-u.lastPosition)/e,d=w==1}u.lastVelocity=A,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),d=!0)}a&&!a[f].done&&(d=!1),d?u.done=!0:t=!1,u.setValue(m,s.round)&&(i=!0)});const l=Sl(this),c=l.getValue();if(t){const u=$o(r.to);(c!==u||i)&&!s.decay?(l.setValue(u),this._onChange(u)):i&&s.decay&&this._onChange(c),this._stop()}else i&&this._onChange(c)}set(e){return yn.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(uu(this)){const{to:e,config:t}=this.animation;yn.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return bt.und(e)?(i=this.queue||[],this.queue=[]):i=[bt.obj(e)?e:Vr({},t,{to:e})],Promise.all(i.map(r=>this._update(r))).then(r=>N8(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),jA(this._state,e&&this._lastCallId),yn.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:r}=e;i=bt.obj(i)?i[t]:i,(i==null||d6(i))&&(i=void 0),r=bt.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:i,from:r};return _C(this)||(e.reverse&&([i,r]=[r,i]),r=$o(r),bt.und(r)?Sl(this)||this._set(i):this._set(r)),s}_update(e,t){let i=Vr({},e);const{key:r,defaultProps:s}=this;i.default&&Object.assign(s,k8(i,(l,c)=>/^on/.test(c)?Cj(l,r):l)),NF(this,i,"onProps"),I1(this,"onProps",i,this);const o=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return Ij(++this._lastCallId,{key:r,props:i,defaultProps:s,state:a,actions:{pause:()=>{b1(this)||(UF(this,!0),pg(a.pauseQueue),I1(this,"onPause",Qa(this,M1(this,this.animation.to)),this))},resume:()=>{b1(this)&&(UF(this,!1),uu(this)&&this._resume(),pg(a.resumeQueue),I1(this,"onResume",Qa(this,M1(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(i.loop&&l.finished&&!(t&&l.noop)){const c=Rj(i);if(c)return this._update(c,!0)}return l})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(bm(this));const r=!bt.und(e.to),s=!bt.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(bm(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:f=c,from:h=u}=e;s&&!r&&(!t.default||bt.und(f))&&(f=h),t.reverse&&([f,h]=[h,f]);const d=!mc(h,u);d&&(l.from=h),h=$o(h);const m=!mc(f,c);m&&this._focus(f);const g=d6(t.to),{config:v}=l,{decay:p,velocity:A}=v;(r||s)&&(v.velocity=0),t.config&&!g&&p0e(v,ch(t.config,o),t.config!==a.config?ch(a.config,o):void 0);let y=Sl(this);if(!y||bt.und(f))return i(Qa(this,!0));const w=bt.und(t.reset)?s&&!t.default:!bt.und(h)&&Yg(t.reset,o),S=w?h:this.get(),C=VA(f),b=bt.num(C)||bt.arr(C)||fw(C),M=!g&&(!b||Yg(a.immediate||t.immediate,o));if(m){const R=h6(f);if(R!==y.constructor)if(M)y=this._set(C);else throw Error(`Cannot animate between ${y.constructor.name} and ${R.name}, as the "to" prop suggests`)}const I=y.constructor;let T=Ml(f),D=!1;if(!T){const R=w||!_C(this)&&d;(m||R)&&(D=mc(VA(S),C),T=!D),(!mc(l.immediate,M)&&!M||!mc(v.decay,p)||!mc(v.velocity,A))&&(T=!0)}if(D&&uu(this)&&(l.changed&&!w?T=!0:T||this._stop(c)),!g&&((T||Ml(c))&&(l.values=y.getPayload(),l.toValues=Ml(f)?null:I==Km?[1]:ca(C)),l.immediate!=M&&(l.immediate=M,!M&&!w&&this._set(c)),T)){const{onRest:R}=l;si(y0e,L=>NF(this,t,L));const z=Qa(this,M1(this,c));pg(this._pendingCalls,z),this._pendingCalls.add(i),l.changed&&yn.batchedUpdates(()=>{l.changed=!w,R==null||R(z,this),w?ch(a.onRest,z):l.onStart==null||l.onStart(z,this)})}w&&this._set(S),g?i(Bj(t.to,t,this._state,this)):T?this._start():uu(this)&&!m?this._pendingCalls.add(i):i(Tj(S))}_focus(e){const t=this.animation;e!==t.to&&(MF(this)&&this._detach(),t.to=e,MF(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Ml(t)&&(Tv(t,this),m6(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Ml(e)&&b3(e,this)}_set(e,t=!0){const i=$o(e);if(!bt.und(i)){const r=Sl(this);if(!r||!mc(i,r.getValue())){const s=h6(i);!r||r.constructor!=s?O8(this,s.create(i)):r.setValue(i),r&&yn.batchedUpdates(()=>{this._onChange(i,t)})}}return Sl(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,I1(this,"onStart",Qa(this,M1(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),ch(this.animation.onChange,e,this)),ch(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Sl(this).reset($o(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),uu(this)||(zF(this,!0),b1(this)||this._resume())}_resume(){Nl.skipAnimation?this.finish():lw.start(this)}_stop(e,t){if(uu(this)){zF(this,!1);const i=this.animation;si(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),C3(this,{type:"idle",parent:this});const r=t?bm(this.get()):Qa(this.get(),M1(this,e??i.to));pg(this._pendingCalls,r),i.changed&&(i.changed=!1,I1(this,"onRest",r,this))}}}function M1(n,e){const t=VA(e),i=VA(n.get());return mc(i,t)}function Rj(n,e=n.loop,t=n.to){let i=ch(e);if(i){const r=i!==!0&&Mj(i),s=(r||n).reverse,o=!r||r.reset;return WA(Vr({},n,{loop:e,default:!1,pause:void 0,to:!s||d6(t)?t:void 0,from:o?n.from:void 0,reset:o},r))}}function WA(n){const{to:e,from:t}=n=Mj(n),i=new Set;return bt.obj(e)&&kF(e,i),bt.obj(t)&&kF(t,i),n.keys=i.size?Array.from(i):null,n}function v0e(n){const e=WA(n);return bt.und(e.default)&&(e.default=k8(e)),e}function kF(n,e){Uc(n,(t,i)=>t!=null&&e.add(i))}const y0e=["onStart","onRest","onChange","onPause","onResume"];function NF(n,e,t){n.animation[t]=e[t]!==bj(e,t)?Cj(e[t],n.key):void 0}function I1(n,e,...t){var i,r,s,o;(i=(r=n.animation)[e])==null||i.call(r,...t),(s=(o=n.defaultProps)[e])==null||s.call(o,...t)}const x0e=["onStart","onChange","onRest"];let _0e=1;class E0e{constructor(e,t){this.id=_0e++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(Vr({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(const t in e){const i=e[t];bt.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push(WA(e)),this}start(e){let{queue:t}=this;return e?t=ca(e).map(WA):this.queue=[],this._flush?this._flush(this,t):(zj(this,t),v6(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const i=this.springs;si(ca(t),r=>i[r].stop(!!e))}else jA(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(bt.und(e))this.start({pause:!0});else{const t=this.springs;si(ca(e),i=>t[i].pause())}return this}resume(e){if(bt.und(e))this.start({pause:!1});else{const t=this.springs;si(ca(e),i=>t[i].resume())}return this}each(e){Uc(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,jg(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&t.size&&jg(t,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,jg(i,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;yn.onFrame(this._onFrame)}}function v6(n,e){return Promise.all(e.map(t=>Dj(n,t))).then(t=>N8(n,t))}async function Dj(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=bt.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=bt.arr(r)||bt.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):si(x0e,g=>{const v=e[g];if(bt.fun(v)){const p=n._events[g];e[g]=({finished:A,cancelled:y})=>{const w=p.get(v);w?(A||(w.finished=!1),y&&(w.cancelled=!0)):p.set(v,{value:null,finished:A||!1,cancelled:y||!1})},c&&(c[g]=e[g])}});const f=n._state;e.pause===!f.paused?(f.paused=e.pause,pg(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const h=(i||Object.keys(n.springs)).map(g=>n.springs[g].start(e)),d=e.cancel===!0||bj(e,"cancel")===!0;(u||d&&f.asyncId)&&h.push(Ij(++n._lastAsyncId,{props:e,state:f,actions:{pause:c6,resume:c6,start(g,v){d?(jA(f,n._lastAsyncId),v(bm(n))):(g.onRest=a,v(Bj(u,g,f,n)))}}})),f.paused&&await new Promise(g=>{f.resumeQueue.add(g)});const m=N8(n,await Promise.all(h));if(o&&m.finished&&!(t&&m.noop)){const g=Rj(e,o,r);if(g)return zj(n,[g]),Dj(n,g,!0)}return l&&yn.batchedUpdates(()=>l(m,n,n.item)),m}function GF(n,e){const t=Vr({},n.springs);return e&&si(ca(e),i=>{bt.und(i.keys)&&(i=WA(i)),bt.obj(i.to)||(i=Vr({},i,{to:void 0})),Oj(t,i,r=>Fj(r))}),Lj(n,t),t}function Lj(n,e){Uc(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,Tv(t,n))})}function Fj(n,e){const t=new A0e;return t.key=n,e&&Tv(t,e),t}function Oj(n,e,t){e.keys&&si(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function zj(n,e){si(e,t=>{Oj(n.springs,t,i=>Fj(i,n))})}function w0e(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}const S0e=["children"],dw=n=>{let{children:e}=n,t=w0e(n,S0e);const i=E.useContext(T3),r=t.pause||!!i.pause,s=t.immediate||!!i.immediate;t=Jme(()=>({pause:r,immediate:s}),[r,s]);const{Provider:o}=T3;return E.createElement(o,{value:t},e)},T3=C0e(dw,{});dw.Provider=T3.Provider;dw.Consumer=T3.Consumer;function C0e(n,e){return Object.assign(n,E.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}const b0e=()=>{const n=[],e=function(r){Xme();const s=[];return si(n,(o,a)=>{if(bt.und(r))s.push(o.start());else{const l=t(r,o,a);l&&s.push(o.start(l))}}),s};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return si(n,i=>i.pause(...arguments)),this},e.resume=function(){return si(n,i=>i.resume(...arguments)),this},e.set=function(i){si(n,r=>r.set(i))},e.start=function(i){const r=[];return si(n,(s,o)=>{if(bt.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return si(n,i=>i.stop(...arguments)),this},e.update=function(i){return si(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(r,s,o){return bt.fun(r)?r(o,s):r};return e._getProps=t,e};function M0e(n,e,t){const i=bt.fun(e)&&e;i&&!t&&(t=[]);const r=E.useMemo(()=>i||arguments.length==3?b0e():void 0,[]),s=E.useRef(0),o=Ej(),a=E.useMemo(()=>({ctrls:[],queue:[],flush(p,A){const y=GF(p,A);return s.current>0&&!a.queue.length&&!Object.keys(y).some(S=>!p.springs[S])?v6(p,A):new Promise(S=>{Lj(p,y),a.queue.push(()=>{S(v6(p,A))}),o()})}}),[]),l=E.useRef([...a.ctrls]),c=[],u=TF(n)||0;E.useMemo(()=>{si(l.current.slice(n,u),p=>{u0e(p,r),p.stop(!0)}),l.current.length=n,f(u,n)},[n]),E.useMemo(()=>{f(0,Math.min(u,n))},t);function f(p,A){for(let y=p;y<A;y++){const w=l.current[y]||(l.current[y]=new E0e(null,a.flush)),S=i?i(y,w):e[y];S&&(c[y]=v0e(S))}}const h=l.current.map((p,A)=>GF(p,c[A])),d=E.useContext(dw),m=TF(d),g=d!==m&&c0e(d);F8(()=>{s.current++,a.ctrls=l.current;const{queue:p}=a;p.length&&(a.queue=[],si(p,A=>A())),si(l.current,(A,y)=>{r==null||r.add(A),g&&A.start({default:d});const w=c[y];w&&(f0e(A,w.ref),A.ref?A.queue.push(w):A.start(w))})}),wj(()=>()=>{si(a.ctrls,p=>p.stop(!0))});const v=h.map(p=>Vr({},p));return r?[v,r]:v}function I0e(n,e){const t=bt.fun(n),[[i],r]=M0e(1,t?n:[n],t?[]:e);return t||arguments.length==2?[i,r]:i}let HF;(function(n){n.MOUNT="mount",n.ENTER="enter",n.UPDATE="update",n.LEAVE="leave"})(HF||(HF={}));class T0e extends G8{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=HA(...t);const i=this._get(),r=h6(i);O8(this,r.create(i))}advance(e){const t=this._get(),i=this.get();mc(t,i)||(Sl(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&QF(this._active)&&EC(this)}_get(){const e=bt.arr(this.source)?this.source.map($o):ca($o(this.source));return this.calc(...e)}_start(){this.idle&&!QF(this._active)&&(this.idle=!1,si(hw(this),e=>{e.done=!1}),Nl.skipAnimation?(yn.batchedUpdates(()=>this.advance()),EC(this)):lw.start(this))}_attach(){let e=1;si(ca(this.source),t=>{Ml(t)&&Tv(t,this),m6(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){si(ca(this.source),e=>{Ml(e)&&b3(e,this)}),this._active.clear(),EC(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ca(this.source).reduce((t,i)=>Math.max(t,(m6(i)?i.priority:0)+1),0))}}function B0e(n){return n.idle!==!1}function QF(n){return!n.size||Array.from(n).every(B0e)}function EC(n){n.idle||(n.idle=!0,si(hw(n),e=>{e.done=!0}),C3(n,{type:"idle",parent:n}))}Nl.assign({createStringInterpolator:xj,to:(n,e)=>new T0e(n,e)});const P0e=["primitive"].concat(Object.keys(HE).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Nl.assign({createStringInterpolator:xj,colors:Sme,frameLoop:"demand"});gv(()=>{yn.advance()});const R0e=r0e(P0e,{applyAnimatedValues:yr}),D0e=R0e.animated;function L0e({enabled:n=!0,snap:e,global:t,domElement:i,cursor:r=!0,children:s,speed:o=1,rotation:a=[0,0,0],zoom:l=1,polar:c=[0,Math.PI/2],azimuth:u=[-1/0,1/0],config:f={mass:1,tension:170,friction:26}}){const h=Pe(C=>C.events),d=Pe(C=>C.gl),m=i||h.connected||d.domElement,{size:g}=Pe(),v=E.useMemo(()=>[a[0]+c[0],a[0]+c[1]],[a[0],c[0],c[1]]),p=E.useMemo(()=>[a[1]+u[0],a[1]+u[1]],[a[1],u[0],u[1]]),A=E.useMemo(()=>[jt.clamp(a[0],...v),jt.clamp(a[1],...p),a[2]],[a[0],a[1],a[2],v,p]),[y,w]=I0e(()=>({scale:1,rotation:A,config:f}));E.useEffect(()=>void w.start({scale:1,rotation:A,config:f}),[A]),E.useEffect(()=>{if(t&&r&&n)return m.style.cursor="grab",d.domElement.style.cursor="",()=>{m.style.cursor="default",d.domElement.style.cursor="default"}},[t,r,m,n]);const S=ZV({onHover:({last:C})=>{r&&!t&&n&&(m.style.cursor=C?"auto":"grab")},onDrag:({down:C,delta:[b,M],memo:[I,T]=y.rotation.animation.to||A})=>{if(!n)return[M,b];r&&(m.style.cursor=C?"grabbing":"grab"),b=jt.clamp(T+b/g.width*Math.PI*o,...p),M=jt.clamp(I+M/g.height*Math.PI*o,...v);const D=e&&!C&&typeof e!="boolean"?e:f;return w.start({scale:C&&M>v[1]/2?l:1,rotation:e&&!C?A:[M,b,0],config:R=>R==="scale"?{...D,friction:D.friction*3}:D}),[M,b]}},{target:t?m:void 0});return E.createElement(D0e.group,tt({},S==null?void 0:S(),y),s)}const F0e=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let f=o(i.getState());c=h=>{const d=o(h);if(!u(f,d)){const m=f;a(f=d,m)}},l!=null&&l.fireImmediately&&a(f,f)}return r(c)},n(e,t,i)},Uj=E.createContext(null);function O0e({map:n,children:e,onChange:t,domElement:i}){const r=n.map(l=>l.name+l.keys).join("-"),s=E.useMemo(()=>QE(F0e(()=>n.reduce((l,c)=>({...l,[c.name]:!1}),{}))),[r]),o=E.useMemo(()=>[s.subscribe,s.getState,s],[r]),a=s.setState;return E.useEffect(()=>{const c=n.map(({name:d,keys:m,up:g})=>({keys:m,up:g,fn:v=>{a({[d]:v}),t&&t(d,v,o[1]())}})).reduce((d,{keys:m,fn:g,up:v=!0})=>(m.forEach(p=>d[p]={fn:g,pressed:!1,up:v}),d),{}),u=({key:d,code:m})=>{const g=c[d]||c[m];if(!g)return;const{fn:v,pressed:p,up:A}=g;g.pressed=!0,(A||!p)&&v(!0)},f=({key:d,code:m})=>{const g=c[d]||c[m];if(!g)return;const{fn:v,up:p}=g;g.pressed=!1,p&&v(!1)},h=i||window;return h.addEventListener("keydown",u,{passive:!0}),h.addEventListener("keyup",f,{passive:!0}),()=>{h.removeEventListener("keydown",u),h.removeEventListener("keyup",f)}},[i,r]),E.createElement(Uj.Provider,{value:o,children:e})}function z0e(n){const[e,t,i]=E.useContext(Uj);return n?i(n):[e,t]}var U0e=Object.defineProperty,k0e=(n,e,t)=>e in n?U0e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,T1=(n,e,t)=>(k0e(n,typeof e!="symbol"?e+"":e,t),t);const Np=4,Mm=1024,Bl=4,N0e=(n=1)=>{const e=new Float32Array(Mm*Bl*n*Np),t=new io(e,Mm,Bl*n,Vn,Ln);return t.wrapS=Wr,t.wrapT=Wr,t.magFilter=dn,t.needsUpdate=!0,t},G0e=(n,e,t=0)=>{const i=Math.floor(Mm*(Bl/4));e.arcLengthDivisions=i/2,e.updateArcLengths();const r=e.getSpacedPoints(i),s=e.computeFrenetFrames(i,!0);for(let o=0;o<i;o++){const a=Math.floor(o/Mm),l=o%Mm;let c=r[o];K2(n,l,c.x,c.y,c.z,0+a+Bl*t),c=s.tangents[o],K2(n,l,c.x,c.y,c.z,1+a+Bl*t),c=s.normals[o],K2(n,l,c.x,c.y,c.z,2+a+Bl*t),c=s.binormals[o],K2(n,l,c.x,c.y,c.z,3+a+Bl*t)}n.needsUpdate=!0},K2=(n,e,t,i,r,s)=>{const o=n.image,{data:a}=o,l=Np*Mm*s;a[e*Np+l+0]=t,a[e*Np+l+1]=i,a[e*Np+l+2]=r,a[e*Np+l+3]=1},H0e=n=>({spineTexture:{value:n},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function Q0e(n,e,t=1){n.__ok||(n.__ok=!0,n.onBeforeCompile=i=>{if(i.__modified)return;i.__modified=!0,Object.assign(i.uniforms,e);const r=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${Bl*t}.;
		float textureStacks = ${Bl/4}.;

		${i.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${Bl}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);i.vertexShader=r})}class V0e{constructor(e,t=1){T1(this,"curveArray"),T1(this,"curveLengthArray"),T1(this,"object3D"),T1(this,"splineTexure"),T1(this,"uniforms");const i=e.clone(),r=N0e(t),s=H0e(r);i.traverse(o=>{(o instanceof gt||o instanceof cv)&&(o.material=o.material.clone(),Q0e(o.material,s,t))}),this.curveArray=new Array(t),this.curveLengthArray=new Array(t),this.object3D=i,this.splineTexure=r,this.uniforms=s}updateCurve(e,t){if(e>=this.curveArray.length)throw Error("Index out of range for Flow");const i=t.getLength();this.uniforms.spineLength.value=i,this.curveLengthArray[e]=i,this.curveArray[e]=t,G0e(this.splineTexure,t,e)}moveAlongCurve(e){this.uniforms.pathOffset.value+=e}}new He;function j0e(n,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},i=n.getIndex(),r=n.getAttribute("position"),s=i?i.count:r.count;let o=0;const a=Object.keys(n.attributes),l={},c={},u=[],f=["getX","getY","getZ","getW"];for(let g=0,v=a.length;g<v;g++){const p=a[g];l[p]=[];const A=n.morphAttributes[p];A&&(c[p]=new Array(A.length).fill(0).map(()=>[]))}const h=Math.log10(1/e),d=Math.pow(10,h);for(let g=0;g<s;g++){const v=i?i.getX(g):g;let p="";for(let A=0,y=a.length;A<y;A++){const w=a[A],S=n.getAttribute(w),C=S.itemSize;for(let b=0;b<C;b++)p+=`${~~(S[f[b]](v)*d)},`}if(p in t)u.push(t[p]);else{for(let A=0,y=a.length;A<y;A++){const w=a[A],S=n.getAttribute(w),C=n.morphAttributes[w],b=S.itemSize,M=l[w],I=c[w];for(let T=0;T<b;T++){const D=f[T];if(M.push(S[D](v)),C)for(let R=0,z=C.length;R<z;R++)I[R].push(C[R][D](v))}}t[p]=o,u.push(o),o++}}const m=n.clone();for(let g=0,v=a.length;g<v;g++){const p=a[g],A=n.getAttribute(p),y=new A.array.constructor(l[p]),w=new qt(y,A.itemSize,A.normalized);if(m.setAttribute(p,w),p in c)for(let S=0;S<c[p].length;S++){const C=n.morphAttributes[p][S],b=new C.array.constructor(c[p][S]),M=new qt(b,C.itemSize,C.normalized);m.morphAttributes[p][S]=M}}return m.setIndex(u),m}function VF(n,e){if(e===pH)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===a3||e===gT){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===a3)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function kj(n,e=Math.PI/3){const t=Math.cos(e),i=(1+1e-10)*100,r=[new F,new F,new F],s=new F,o=new F,a=new F,l=new F;function c(g){const v=~~(g.x*i),p=~~(g.y*i),A=~~(g.z*i);return`${v},${p},${A}`}const u=n.index?n.toNonIndexed():n,f=u.attributes.position,h={};for(let g=0,v=f.count/3;g<v;g++){const p=3*g,A=r[0].fromBufferAttribute(f,p+0),y=r[1].fromBufferAttribute(f,p+1),w=r[2].fromBufferAttribute(f,p+2);s.subVectors(w,y),o.subVectors(A,y);const S=new F().crossVectors(s,o).normalize();for(let C=0;C<3;C++){const b=r[C],M=c(b);M in h||(h[M]=[]),h[M].push(S)}}const d=new Float32Array(f.count*3),m=new qt(d,3,!1);for(let g=0,v=f.count/3;g<v;g++){const p=3*g,A=r[0].fromBufferAttribute(f,p+0),y=r[1].fromBufferAttribute(f,p+1),w=r[2].fromBufferAttribute(f,p+2);s.subVectors(w,y),o.subVectors(A,y),a.crossVectors(s,o).normalize();for(let S=0;S<3;S++){const C=r[S],b=c(C),M=h[b];l.set(0,0,0);for(let I=0,T=M.length;I<T;I++){const D=M[I];a.dot(D)>t&&l.add(D)}l.normalize(),m.setXYZ(p+S,l.x,l.y,l.z)}}return u.setAttribute("normal",m),u}const Nj=parseInt(il.replace(/\D+/g,""));var oa=Uint8Array,Pu=Uint16Array,y6=Uint32Array,Gj=new oa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hj=new oa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),W0e=new oa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qj=function(n,e){for(var t=new Pu(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new y6(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},Vj=Qj(Gj,2),jj=Vj[0],Y0e=Vj[1];jj[28]=258,Y0e[258]=28;var X0e=Qj(Hj,0),q0e=X0e[0],x6=new Pu(32768);for(var Ci=0;Ci<32768;++Ci){var fu=(Ci&43690)>>>1|(Ci&21845)<<1;fu=(fu&52428)>>>2|(fu&13107)<<2,fu=(fu&61680)>>>4|(fu&3855)<<4,x6[Ci]=((fu&65280)>>>8|(fu&255)<<8)>>>1}var Xg=function(n,e,t){for(var i=n.length,r=0,s=new Pu(e);r<i;++r)++s[n[r]-1];var o=new Pu(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new Pu(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],f=o[n[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)a[x6[f]>>>l]=c}else for(a=new Pu(i),r=0;r<i;++r)n[r]&&(a[r]=x6[o[n[r]-1]++]>>>15-n[r]);return a},Bv=new oa(288);for(var Ci=0;Ci<144;++Ci)Bv[Ci]=8;for(var Ci=144;Ci<256;++Ci)Bv[Ci]=9;for(var Ci=256;Ci<280;++Ci)Bv[Ci]=7;for(var Ci=280;Ci<288;++Ci)Bv[Ci]=8;var Wj=new oa(32);for(var Ci=0;Ci<32;++Ci)Wj[Ci]=5;var J0e=Xg(Bv,9,1),K0e=Xg(Wj,5,1),wC=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Ba=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},SC=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},$0e=function(n){return(n/8|0)+(n&7&&1)},Z0e=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Pu?Pu:n instanceof y6?y6:oa)(t-e);return i.set(n.subarray(e,t)),i},e1e=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new oa(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new oa(i*3));var o=function(Q){var j=e.length;if(Q>j){var oe=new oa(Math.max(j*2,Q));oe.set(e),e=oe}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,f=t.d,h=t.m,d=t.n,m=i*8;do{if(!u){t.f=a=Ba(n,l,1);var g=Ba(n,l+1,3);if(l+=3,g)if(g==1)u=J0e,f=K0e,h=9,d=5;else if(g==2){var y=Ba(n,l,31)+257,w=Ba(n,l+10,15)+4,S=y+Ba(n,l+5,31)+1;l+=14;for(var C=new oa(S),b=new oa(19),M=0;M<w;++M)b[W0e[M]]=Ba(n,l+M*3,7);l+=w*3;for(var I=wC(b),T=(1<<I)-1,D=Xg(b,I,1),M=0;M<S;){var R=D[Ba(n,l,T)];l+=R&15;var v=R>>>4;if(v<16)C[M++]=v;else{var z=0,L=0;for(v==16?(L=3+Ba(n,l,3),l+=2,z=C[M-1]):v==17?(L=3+Ba(n,l,7),l+=3):v==18&&(L=11+Ba(n,l,127),l+=7);L--;)C[M++]=z}}var H=C.subarray(0,y),J=C.subarray(y);h=wC(H),d=wC(J),u=Xg(H,h,1),f=Xg(J,d,1)}else throw"invalid block type";else{var v=$0e(l)+4,p=n[v-4]|n[v-3]<<8,A=v+p;if(A>i){if(s)throw"unexpected EOF";break}r&&o(c+p),e.set(n.subarray(v,A),c),t.b=c+=p,t.p=l=A*8;continue}if(l>m){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var Z=(1<<h)-1,U=(1<<d)-1,X=l;;X=l){var z=u[SC(n,l)&Z],Y=z>>>4;if(l+=z&15,l>m){if(s)throw"unexpected EOF";break}if(!z)throw"invalid length/literal";if(Y<256)e[c++]=Y;else if(Y==256){X=l,u=null;break}else{var O=Y-254;if(Y>264){var M=Y-257,W=Gj[M];O=Ba(n,l,(1<<W)-1)+jj[M],l+=W}var $=f[SC(n,l)&U],k=$>>>4;if(!$)throw"invalid distance";l+=$&15;var J=q0e[k];if(k>3){var W=Hj[k];J+=SC(n,l)&(1<<W)-1,l+=W}if(l>m){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var V=c+O;c<V;c+=4)e[c]=e[c-J],e[c+1]=e[c+1-J],e[c+2]=e[c+2-J],e[c+3]=e[c+3-J];c=V}}t.l=u,t.p=X,t.b=c,u&&(a=1,t.m=h,t.d=f,t.n=d)}while(!a);return c==e.length?e:Z0e(e,0,c)},t1e=new oa(0),n1e=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function mg(n,e){return e1e((n1e(n),n.subarray(2,-4)),e)}var i1e=typeof TextDecoder<"u"&&new TextDecoder,r1e=0;try{i1e.decode(t1e,{stream:!0}),r1e=1}catch{}let s1e=class extends gt{constructor(e,t,i=!1,r=!1,s=1e4){const o=new Gt;super(o,t),this.isMarchingCubes=!0;const a=this,l=new Float32Array(12*3),c=new Float32Array(12*3),u=new Float32Array(12*3);this.enableUvs=i,this.enableColors=r,this.init=function(A){this.resolution=A,this.isolation=80,this.size=A,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const y=s*3;this.positionArray=new Float32Array(y*3);const w=new qt(this.positionArray,3);w.setUsage(ms),o.setAttribute("position",w),this.normalArray=new Float32Array(y*3);const S=new qt(this.normalArray,3);if(S.setUsage(ms),o.setAttribute("normal",S),this.enableUvs){this.uvArray=new Float32Array(y*2);const C=new qt(this.uvArray,2);C.setUsage(ms),o.setAttribute("uv",C)}if(this.enableColors){this.colorArray=new Float32Array(y*3);const C=new qt(this.colorArray,3);C.setUsage(ms),o.setAttribute("color",C)}o.boundingSphere=new Bi(new F,1)};function f(A,y,w){return A+(y-A)*w}function h(A,y,w,S,C,b,M,I,T,D){const R=(w-M)/(I-M),z=a.normal_cache;l[y+0]=S+R*a.delta,l[y+1]=C,l[y+2]=b,c[y+0]=f(z[A+0],z[A+3],R),c[y+1]=f(z[A+1],z[A+4],R),c[y+2]=f(z[A+2],z[A+5],R),u[y+0]=f(a.palette[T*3+0],a.palette[D*3+0],R),u[y+1]=f(a.palette[T*3+1],a.palette[D*3+1],R),u[y+2]=f(a.palette[T*3+2],a.palette[D*3+2],R)}function d(A,y,w,S,C,b,M,I,T,D){const R=(w-M)/(I-M),z=a.normal_cache;l[y+0]=S,l[y+1]=C+R*a.delta,l[y+2]=b;const L=A+a.yd*3;c[y+0]=f(z[A+0],z[L+0],R),c[y+1]=f(z[A+1],z[L+1],R),c[y+2]=f(z[A+2],z[L+2],R),u[y+0]=f(a.palette[T*3+0],a.palette[D*3+0],R),u[y+1]=f(a.palette[T*3+1],a.palette[D*3+1],R),u[y+2]=f(a.palette[T*3+2],a.palette[D*3+2],R)}function m(A,y,w,S,C,b,M,I,T,D){const R=(w-M)/(I-M),z=a.normal_cache;l[y+0]=S,l[y+1]=C,l[y+2]=b+R*a.delta;const L=A+a.zd*3;c[y+0]=f(z[A+0],z[L+0],R),c[y+1]=f(z[A+1],z[L+1],R),c[y+2]=f(z[A+2],z[L+2],R),u[y+0]=f(a.palette[T*3+0],a.palette[D*3+0],R),u[y+1]=f(a.palette[T*3+1],a.palette[D*3+1],R),u[y+2]=f(a.palette[T*3+2],a.palette[D*3+2],R)}function g(A){const y=A*3;a.normal_cache[y]===0&&(a.normal_cache[y+0]=a.field[A-1]-a.field[A+1],a.normal_cache[y+1]=a.field[A-a.yd]-a.field[A+a.yd],a.normal_cache[y+2]=a.field[A-a.zd]-a.field[A+a.zd])}function v(A,y,w,S,C){const b=S+1,M=S+a.yd,I=S+a.zd,T=b+a.yd,D=b+a.zd,R=S+a.yd+a.zd,z=b+a.yd+a.zd;let L=0;const H=a.field[S],J=a.field[b],Z=a.field[M],U=a.field[T],X=a.field[I],Y=a.field[D],O=a.field[R],W=a.field[z];H<C&&(L|=1),J<C&&(L|=2),Z<C&&(L|=8),U<C&&(L|=4),X<C&&(L|=16),Y<C&&(L|=32),O<C&&(L|=128),W<C&&(L|=64);const $=o1e[L];if($===0)return 0;const k=a.delta,V=A+k,Q=y+k,j=w+k;$&1&&(g(S),g(b),h(S*3,0,C,A,y,w,H,J,S,b)),$&2&&(g(b),g(T),d(b*3,3,C,V,y,w,J,U,b,T)),$&4&&(g(M),g(T),h(M*3,6,C,A,Q,w,Z,U,M,T)),$&8&&(g(S),g(M),d(S*3,9,C,A,y,w,H,Z,S,M)),$&16&&(g(I),g(D),h(I*3,12,C,A,y,j,X,Y,I,D)),$&32&&(g(D),g(z),d(D*3,15,C,V,y,j,Y,W,D,z)),$&64&&(g(R),g(z),h(R*3,18,C,A,Q,j,O,W,R,z)),$&128&&(g(I),g(R),d(I*3,21,C,A,y,j,X,O,I,R)),$&256&&(g(S),g(I),m(S*3,24,C,A,y,w,H,X,S,I)),$&512&&(g(b),g(D),m(b*3,27,C,V,y,w,J,Y,b,D)),$&1024&&(g(T),g(z),m(T*3,30,C,V,Q,w,U,W,T,z)),$&2048&&(g(M),g(R),m(M*3,33,C,A,Q,w,Z,O,M,R)),L<<=4;let oe,xe,pe,de=0,te=0;for(;$2[L+te]!=-1;)oe=L+te,xe=oe+1,pe=oe+2,p(l,c,u,3*$2[oe],3*$2[xe],3*$2[pe]),te+=3,de++;return de}function p(A,y,w,S,C,b){const M=a.count*3;if(a.positionArray[M+0]=A[S],a.positionArray[M+1]=A[S+1],a.positionArray[M+2]=A[S+2],a.positionArray[M+3]=A[C],a.positionArray[M+4]=A[C+1],a.positionArray[M+5]=A[C+2],a.positionArray[M+6]=A[b],a.positionArray[M+7]=A[b+1],a.positionArray[M+8]=A[b+2],a.material.flatShading===!0){const I=(y[S+0]+y[C+0]+y[b+0])/3,T=(y[S+1]+y[C+1]+y[b+1])/3,D=(y[S+2]+y[C+2]+y[b+2])/3;a.normalArray[M+0]=I,a.normalArray[M+1]=T,a.normalArray[M+2]=D,a.normalArray[M+3]=I,a.normalArray[M+4]=T,a.normalArray[M+5]=D,a.normalArray[M+6]=I,a.normalArray[M+7]=T,a.normalArray[M+8]=D}else a.normalArray[M+0]=y[S+0],a.normalArray[M+1]=y[S+1],a.normalArray[M+2]=y[S+2],a.normalArray[M+3]=y[C+0],a.normalArray[M+4]=y[C+1],a.normalArray[M+5]=y[C+2],a.normalArray[M+6]=y[b+0],a.normalArray[M+7]=y[b+1],a.normalArray[M+8]=y[b+2];if(a.enableUvs){const I=a.count*2;a.uvArray[I+0]=A[S+0],a.uvArray[I+1]=A[S+2],a.uvArray[I+2]=A[C+0],a.uvArray[I+3]=A[C+2],a.uvArray[I+4]=A[b+0],a.uvArray[I+5]=A[b+2]}a.enableColors&&(a.colorArray[M+0]=w[S+0],a.colorArray[M+1]=w[S+1],a.colorArray[M+2]=w[S+2],a.colorArray[M+3]=w[C+0],a.colorArray[M+4]=w[C+1],a.colorArray[M+5]=w[C+2],a.colorArray[M+6]=w[b+0],a.colorArray[M+7]=w[b+1],a.colorArray[M+8]=w[b+2]),a.count+=3}this.addBall=function(A,y,w,S,C,b){const M=Math.sign(S);S=Math.abs(S);const I=b!=null;let T=new et(A,y,w);if(I)try{T=b instanceof et?b:Array.isArray(b)?new et(Math.min(Math.abs(b[0]),1),Math.min(Math.abs(b[1]),1),Math.min(Math.abs(b[2]),1)):new et(b)}catch{T=new et(A,y,w)}const D=this.size*Math.sqrt(S/C),R=w*this.size,z=y*this.size,L=A*this.size;let H=Math.floor(R-D);H<1&&(H=1);let J=Math.floor(R+D);J>this.size-1&&(J=this.size-1);let Z=Math.floor(z-D);Z<1&&(Z=1);let U=Math.floor(z+D);U>this.size-1&&(U=this.size-1);let X=Math.floor(L-D);X<1&&(X=1);let Y=Math.floor(L+D);Y>this.size-1&&(Y=this.size-1);let O,W,$,k,V,Q,j,oe,xe,pe,de;for($=H;$<J;$++)for(V=this.size2*$,oe=$/this.size-w,xe=oe*oe,W=Z;W<U;W++)for(k=V+this.size*W,j=W/this.size-y,pe=j*j,O=X;O<Y;O++)if(Q=O/this.size-A,de=S/(1e-6+Q*Q+pe+xe)-C,de>0){this.field[k+O]+=de*M;const te=Math.sqrt((O-L)*(O-L)+(W-z)*(W-z)+($-R)*($-R))/D,Ee=1-te*te*te*(te*(te*6-15)+10);this.palette[(k+O)*3+0]+=T.r*Ee,this.palette[(k+O)*3+1]+=T.g*Ee,this.palette[(k+O)*3+2]+=T.b*Ee}},this.addPlaneX=function(A,y){const w=this.size,S=this.yd,C=this.zd,b=this.field;let M,I,T,D,R,z,L,H=w*Math.sqrt(A/y);for(H>w&&(H=w),M=0;M<H;M++)if(z=M/w,D=z*z,R=A/(1e-4+D)-y,R>0)for(I=0;I<w;I++)for(L=M+I*S,T=0;T<w;T++)b[C*T+L]+=R},this.addPlaneY=function(A,y){const w=this.size,S=this.yd,C=this.zd,b=this.field;let M,I,T,D,R,z,L,H,J=w*Math.sqrt(A/y);for(J>w&&(J=w),I=0;I<J;I++)if(z=I/w,D=z*z,R=A/(1e-4+D)-y,R>0)for(L=I*S,M=0;M<w;M++)for(H=L+M,T=0;T<w;T++)b[C*T+H]+=R},this.addPlaneZ=function(A,y){const w=this.size,S=this.yd,C=this.zd,b=this.field;let M,I,T,D,R,z,L,H,J=w*Math.sqrt(A/y);for(J>w&&(J=w),T=0;T<J;T++)if(z=T/w,D=z*z,R=A/(1e-4+D)-y,R>0)for(L=C*T,I=0;I<w;I++)for(H=L+I*S,M=0;M<w;M++)b[H+M]+=R},this.setCell=function(A,y,w,S){const C=this.size2*w+this.size*y+A;this.field[C]=S},this.getCell=function(A,y,w){const S=this.size2*w+this.size*y+A;return this.field[S]},this.blur=function(A=1){const y=this.field,w=y.slice(),S=this.size,C=this.size2;for(let b=0;b<S;b++)for(let M=0;M<S;M++)for(let I=0;I<S;I++){const T=C*I+S*M+b;let D=w[T],R=1;for(let z=-1;z<=1;z+=2){const L=z+b;if(!(L<0||L>=S))for(let H=-1;H<=1;H+=2){const J=H+M;if(!(J<0||J>=S))for(let Z=-1;Z<=1;Z+=2){const U=Z+I;if(U<0||U>=S)continue;const X=C*U+S*J+L,Y=w[X];R++,D+=A*(Y-D)/R}}}y[T]=D}},this.reset=function(){for(let A=0;A<this.size3;A++)this.normal_cache[A*3]=0,this.field[A]=0,this.palette[A*3]=this.palette[A*3+1]=this.palette[A*3+2]=0},this.update=function(){this.count=0;const A=this.size-2;for(let y=1;y<A;y++){const w=this.size2*y,S=(y-this.halfsize)/this.halfsize;for(let C=1;C<A;C++){const b=w+this.size*C,M=(C-this.halfsize)/this.halfsize;for(let I=1;I<A;I++){const T=(I-this.halfsize)/this.halfsize,D=b+I;v(T,M,S,D,this.isolation)}}}this.geometry.setDrawRange(0,this.count),o.getAttribute("position").needsUpdate=!0,o.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(o.getAttribute("uv").needsUpdate=!0),this.enableColors&&(o.getAttribute("color").needsUpdate=!0),this.count/3>s&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}};const o1e=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),$2=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);var a1e=Object.defineProperty,l1e=(n,e,t)=>e in n?a1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Pa=(n,e,t)=>(l1e(n,typeof e!="symbol"?e+"":e,t),t);class CC{constructor(e=Math){Pa(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),Pa(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),Pa(this,"p",[]),Pa(this,"perm",[]),Pa(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),Pa(this,"dot",(t,i,r)=>t[0]*i+t[1]*r),Pa(this,"dot3",(t,i,r,s)=>t[0]*i+t[1]*r+t[2]*s),Pa(this,"dot4",(t,i,r,s,o)=>t[0]*i+t[1]*r+t[2]*s+t[3]*o),Pa(this,"noise",(t,i)=>{let r,s,o;const a=.5*(Math.sqrt(3)-1),l=(t+i)*a,c=Math.floor(t+l),u=Math.floor(i+l),f=(3-Math.sqrt(3))/6,h=(c+u)*f,d=c-h,m=u-h,g=t-d,v=i-m;let p=0,A=1;g>v&&(p=1,A=0);const y=g-p+f,w=v-A+f,S=g-1+2*f,C=v-1+2*f,b=c&255,M=u&255,I=this.perm[b+this.perm[M]]%12,T=this.perm[b+p+this.perm[M+A]]%12,D=this.perm[b+1+this.perm[M+1]]%12;let R=.5-g*g-v*v;R<0?r=0:(R*=R,r=R*R*this.dot(this.grad3[I],g,v));let z=.5-y*y-w*w;z<0?s=0:(z*=z,s=z*z*this.dot(this.grad3[T],y,w));let L=.5-S*S-C*C;return L<0?o=0:(L*=L,o=L*L*this.dot(this.grad3[D],S,C)),70*(r+s+o)}),Pa(this,"noise3d",(t,i,r)=>{let s,o,a,l;const u=(t+i+r)*.3333333333333333,f=Math.floor(t+u),h=Math.floor(i+u),d=Math.floor(r+u),m=1/6,g=(f+h+d)*m,v=f-g,p=h-g,A=d-g,y=t-v,w=i-p,S=r-A;let C,b,M,I,T,D;y>=w?w>=S?(C=1,b=0,M=0,I=1,T=1,D=0):y>=S?(C=1,b=0,M=0,I=1,T=0,D=1):(C=0,b=0,M=1,I=1,T=0,D=1):w<S?(C=0,b=0,M=1,I=0,T=1,D=1):y<S?(C=0,b=1,M=0,I=0,T=1,D=1):(C=0,b=1,M=0,I=1,T=1,D=0);const R=y-C+m,z=w-b+m,L=S-M+m,H=y-I+2*m,J=w-T+2*m,Z=S-D+2*m,U=y-1+3*m,X=w-1+3*m,Y=S-1+3*m,O=f&255,W=h&255,$=d&255,k=this.perm[O+this.perm[W+this.perm[$]]]%12,V=this.perm[O+C+this.perm[W+b+this.perm[$+M]]]%12,Q=this.perm[O+I+this.perm[W+T+this.perm[$+D]]]%12,j=this.perm[O+1+this.perm[W+1+this.perm[$+1]]]%12;let oe=.6-y*y-w*w-S*S;oe<0?s=0:(oe*=oe,s=oe*oe*this.dot3(this.grad3[k],y,w,S));let xe=.6-R*R-z*z-L*L;xe<0?o=0:(xe*=xe,o=xe*xe*this.dot3(this.grad3[V],R,z,L));let pe=.6-H*H-J*J-Z*Z;pe<0?a=0:(pe*=pe,a=pe*pe*this.dot3(this.grad3[Q],H,J,Z));let de=.6-U*U-X*X-Y*Y;return de<0?l=0:(de*=de,l=de*de*this.dot3(this.grad3[j],U,X,Y)),32*(s+o+a+l)}),Pa(this,"noise4d",(t,i,r,s)=>{const o=this.grad4,a=this.simplex,l=this.perm,c=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;let f,h,d,m,g;const v=(t+i+r+s)*c,p=Math.floor(t+v),A=Math.floor(i+v),y=Math.floor(r+v),w=Math.floor(s+v),S=(p+A+y+w)*u,C=p-S,b=A-S,M=y-S,I=w-S,T=t-C,D=i-b,R=r-M,z=s-I,L=T>D?32:0,H=T>R?16:0,J=D>R?8:0,Z=T>z?4:0,U=D>z?2:0,X=R>z?1:0,Y=L+H+J+Z+U+X;let O,W,$,k,V,Q,j,oe,xe,pe,de,te;O=a[Y][0]>=3?1:0,W=a[Y][1]>=3?1:0,$=a[Y][2]>=3?1:0,k=a[Y][3]>=3?1:0,V=a[Y][0]>=2?1:0,Q=a[Y][1]>=2?1:0,j=a[Y][2]>=2?1:0,oe=a[Y][3]>=2?1:0,xe=a[Y][0]>=1?1:0,pe=a[Y][1]>=1?1:0,de=a[Y][2]>=1?1:0,te=a[Y][3]>=1?1:0;const Ee=T-O+u,ue=D-W+u,ve=R-$+u,ye=z-k+u,Be=T-V+2*u,ae=D-Q+2*u,ie=R-j+2*u,be=z-oe+2*u,Re=T-xe+3*u,ct=D-pe+3*u,se=R-de+3*u,ee=z-te+3*u,Ae=T-1+4*u,Ue=D-1+4*u,Ce=R-1+4*u,ke=z-1+4*u,We=p&255,Xe=A&255,Oe=y&255,ft=w&255,lt=l[We+l[Xe+l[Oe+l[ft]]]]%32,st=l[We+O+l[Xe+W+l[Oe+$+l[ft+k]]]]%32,ce=l[We+V+l[Xe+Q+l[Oe+j+l[ft+oe]]]]%32,De=l[We+xe+l[Xe+pe+l[Oe+de+l[ft+te]]]]%32,$e=l[We+1+l[Xe+1+l[Oe+1+l[ft+1]]]]%32;let Ye=.6-T*T-D*D-R*R-z*z;Ye<0?f=0:(Ye*=Ye,f=Ye*Ye*this.dot4(o[lt],T,D,R,z));let fe=.6-Ee*Ee-ue*ue-ve*ve-ye*ye;fe<0?h=0:(fe*=fe,h=fe*fe*this.dot4(o[st],Ee,ue,ve,ye));let _e=.6-Be*Be-ae*ae-ie*ie-be*be;_e<0?d=0:(_e*=_e,d=_e*_e*this.dot4(o[ce],Be,ae,ie,be));let Me=.6-Re*Re-ct*ct-se*se-ee*ee;Me<0?m=0:(Me*=Me,m=Me*Me*this.dot4(o[De],Re,ct,se,ee));let at=.6-Ae*Ae-Ue*Ue-Ce*Ce-ke*ke;return at<0?g=0:(at*=at,g=at*at*this.dot4(o[$e],Ae,Ue,Ce,ke)),27*(f+h+d+m+g)});for(let t=0;t<256;t++)this.p[t]=Math.floor(e.random()*256);for(let t=0;t<512;t++)this.perm[t]=this.p[t&255]}}var c1e=Object.defineProperty,u1e=(n,e,t)=>e in n?c1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Yj=(n,e,t)=>(u1e(n,typeof e!="symbol"?e+"":e,t),t);const v_={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new F},up:{value:new F(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${Nj>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},Xj=new Wn({name:"SkyShader",fragmentShader:v_.fragmentShader,vertexShader:v_.vertexShader,uniforms:va.clone(v_.uniforms),side:er,depthWrite:!1});let H8=class extends gt{constructor(){super(new Ms(1,1,1),Xj)}};Yj(H8,"SkyShader",v_);Yj(H8,"material",Xj);const f1e=n=>n&&n.isCubeTexture;class h1e extends gt{constructor(e,t){var i,r;const s=f1e(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,h=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,m=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(il.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,g={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},v=new dv(1,16),p=new Wn({uniforms:g,fragmentShader:m,vertexShader:d,side:ni});super(v,p)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function qj(n,e,t={}){const i=new F,r=new Lt,s=new F,o=new He,a=new He,l=new He;t.preserveMatrix=t.preserveMatrix!==void 0?t.preserveMatrix:!0,t.preservePosition=t.preservePosition!==void 0?t.preservePosition:!0,t.preserveHipPosition=t.preserveHipPosition!==void 0?t.preserveHipPosition:!1,t.useTargetMatrix=t.useTargetMatrix!==void 0?t.useTargetMatrix:!1,t.hip=t.hip!==void 0?t.hip:"hip",t.names=t.names||{};const c=e.isObject3D?e.skeleton.bones:B3(e),u=n.isObject3D?n.skeleton.bones:B3(n);let f,h,d,m,g;if(n.isObject3D?n.skeleton.pose():(t.useTargetMatrix=!0,t.preserveMatrix=!1),t.preservePosition){g=[];for(let v=0;v<u.length;v++)g.push(u[v].position.clone())}if(t.preserveMatrix){n.updateMatrixWorld(),n.matrixWorld.identity();for(let v=0;v<n.children.length;++v)n.children[v].updateMatrixWorld(!0)}if(t.offsets){f=[];for(let v=0;v<u.length;++v)h=u[v],d=t.names[h.name]||h.name,t.offsets[d]&&(h.matrix.multiply(t.offsets[d]),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld()),f.push(h.matrixWorld.clone())}for(let v=0;v<u.length;++v){if(h=u[v],d=t.names[h.name]||h.name,m=Jj(d,c),l.copy(h.matrixWorld),m){if(m.updateMatrixWorld(),t.useTargetMatrix?a.copy(m.matrixWorld):(a.copy(n.matrixWorld).invert(),a.multiply(m.matrixWorld)),s.setFromMatrixScale(a),a.scale(s.set(1/s.x,1/s.y,1/s.z)),l.makeRotationFromQuaternion(r.setFromRotationMatrix(a)),n.isObject3D){const p=u.indexOf(h),A=f?f[p]:o.copy(n.skeleton.boneInverses[p]).invert();l.multiply(A)}l.copyPosition(a)}h.parent&&h.parent.isBone?(h.matrix.copy(h.parent.matrixWorld).invert(),h.matrix.multiply(l)):h.matrix.copy(l),t.preserveHipPosition&&d===t.hip&&h.matrix.setPosition(i.set(0,h.position.y,0)),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld()}if(t.preservePosition)for(let v=0;v<u.length;++v)h=u[v],d=t.names[h.name]||h.name,d!==t.hip&&h.position.copy(g[v]);t.preserveMatrix&&n.updateMatrixWorld(!0)}function d1e(n,e,t,i={}){i.useFirstFramePosition=i.useFirstFramePosition!==void 0?i.useFirstFramePosition:!1,i.fps=i.fps!==void 0?i.fps:30,i.names=i.names||[],e.isObject3D||(e=m1e(e));const r=Math.round(t.duration*(i.fps/1e3)*1e3),s=1/i.fps,o=[],a=new YT(e),l=B3(n.skeleton),c=[];let u,f,h,d,m;a.clipAction(t).play(),a.update(0),e.updateMatrixWorld();for(let g=0;g<r;++g){const v=g*s;qj(n,e,i);for(let p=0;p<l.length;++p)m=i.names[l[p].name]||l[p].name,h=Jj(m,e.skeleton),h&&(f=l[p],d=c[p]=c[p]||{bone:f},i.hip===m&&(d.pos||(d.pos={times:new Float32Array(r),values:new Float32Array(r*3)}),i.useFirstFramePosition&&(g===0&&(u=f.position.clone()),f.position.sub(u)),d.pos.times[g]=v,f.position.toArray(d.pos.values,g*3)),d.quat||(d.quat={times:new Float32Array(r),values:new Float32Array(r*4)}),d.quat.times[g]=v,f.quaternion.toArray(d.quat.values,g*4));a.update(s),e.updateMatrixWorld()}for(let g=0;g<c.length;++g)d=c[g],d&&(d.pos&&o.push(new Oc(".bones["+d.bone.name+"].position",d.pos.times,d.pos.values)),o.push(new Ul(".bones["+d.bone.name+"].quaternion",d.quat.times,d.quat.values)));return a.uncacheAction(t),new cf(t.name,-1,o)}function p1e(n){const e=new Map,t=new Map,i=n.clone();return Kj(n,i,function(r,s){e.set(s,r),t.set(r,s)}),i.traverse(function(r){if(!r.isSkinnedMesh)return;const s=r,o=e.get(r),a=o.skeleton.bones;s.skeleton=o.skeleton.clone(),s.bindMatrix.copy(o.bindMatrix),s.skeleton.bones=a.map(function(l){return t.get(l)}),s.bind(s.skeleton,s.bindMatrix)}),i}function Jj(n,e){for(let t=0,i=B3(e);t<i.length;t++)if(n===i[t].name)return i[t]}function B3(n){return Array.isArray(n)?n:n.bones}function m1e(n){const e=new pQ(n.bones[0]);return e.skeleton=n,e}function Kj(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)Kj(n.children[i],e.children[i],t)}const g1e={retarget:qj,retargetClip:d1e,clone:p1e},qr=new vr,Z2=new F;class A1e{constructor(e){let t=e.geometry;t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){const e=this.positionAttribute,t=this.weightAttribute,i=new Float32Array(e.count/3);for(let s=0;s<e.count;s+=3){let o=1;t&&(o=t.getX(s)+t.getX(s+1)+t.getX(s+2)),qr.a.fromBufferAttribute(e,s),qr.b.fromBufferAttribute(e,s+1),qr.c.fromBufferAttribute(e,s+2),o*=qr.getArea(),i[s/3]=o}this.distribution=new Float32Array(e.count/3);let r=0;for(let s=0;s<i.length;s++)r+=i[s],this.distribution[s]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,i){const r=this.sampleFaceIndex();return this.sampleFace(r,e,t,i)}sampleFaceIndex(){const e=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*e)}binarySearch(e){const t=this.distribution;let i=0,r=t.length-1,s=-1;for(;i<=r;){const o=Math.ceil((i+r)/2);if(o===0||t[o-1]<=e&&t[o]>e){s=o;break}else e<t[o]?r=o-1:i=o+1}return s}sampleFace(e,t,i,r){let s=this.randomFunction(),o=this.randomFunction();return s+o>1&&(s=1-s,o=1-o),qr.a.fromBufferAttribute(this.positionAttribute,e*3),qr.b.fromBufferAttribute(this.positionAttribute,e*3+1),qr.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(qr.a,s).addScaledVector(qr.b,o).addScaledVector(qr.c,1-(s+o)),i!==void 0&&qr.getNormal(i),r!==void 0&&this.colorAttribute!==void 0&&(qr.a.fromBufferAttribute(this.colorAttribute,e*3),qr.b.fromBufferAttribute(this.colorAttribute,e*3+1),qr.c.fromBufferAttribute(this.colorAttribute,e*3+2),Z2.set(0,0,0).addScaledVector(qr.a,s).addScaledVector(qr.b,o).addScaledVector(qr.c,1-(s+o)),r.r=Z2.x,r.g=Z2.y,r.b=Z2.z),this}}var v1e=Object.defineProperty,y1e=(n,e,t)=>e in n?v1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,An=(n,e,t)=>(y1e(n,typeof e!="symbol"?e+"":e,t),t);const jF=new F;let x1e=class extends Yr{constructor(e,t){super(),An(this,"object"),An(this,"domElement"),An(this,"enabled",!0),An(this,"movementSpeed",1),An(this,"lookSpeed",.005),An(this,"lookVertical",!0),An(this,"autoForward",!1),An(this,"activeLook",!0),An(this,"heightSpeed",!1),An(this,"heightCoef",1),An(this,"heightMin",0),An(this,"heightMax",1),An(this,"constrainVertical",!1),An(this,"verticalMin",0),An(this,"verticalMax",Math.PI),An(this,"mouseDragOn",!1),An(this,"autoSpeedFactor",0),An(this,"mouseX",0),An(this,"mouseY",0),An(this,"moveForward",!1),An(this,"moveBackward",!1),An(this,"moveLeft",!1),An(this,"moveRight",!1),An(this,"moveUp",!1),An(this,"moveDown",!1),An(this,"viewHalfX",0),An(this,"viewHalfY",0),An(this,"lat",0),An(this,"lon",0),An(this,"lookDirection",new F),An(this,"spherical",new Wh),An(this,"target",new F),An(this,"connect",i=>{i.setAttribute("tabindex","-1"),i.style.touchAction="none",i.addEventListener("contextmenu",this.contextmenu),i.addEventListener("mousemove",this.onMouseMove),i.addEventListener("mousedown",this.onMouseDown),i.addEventListener("mouseup",this.onMouseUp),this.domElement=i,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),An(this,"dispose",()=>{var i,r,s,o;(i=this.domElement)==null||i.removeEventListener("contextmenu",this.contextmenu),(r=this.domElement)==null||r.removeEventListener("mousedown",this.onMouseDown),(s=this.domElement)==null||s.removeEventListener("mousemove",this.onMouseMove),(o=this.domElement)==null||o.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),An(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),An(this,"onMouseDown",i=>{var r;if((r=this.domElement)==null||r.focus(),this.activeLook)switch(i.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),An(this,"onMouseUp",i=>{if(this.activeLook)switch(i.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),An(this,"onMouseMove",i=>{this.domElement&&(this.mouseX=i.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=i.pageY-this.domElement.offsetTop-this.viewHalfY)}),An(this,"onKeyDown",i=>{switch(i.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),An(this,"onKeyUp",i=>{switch(i.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),An(this,"lookAt",(i,r,s)=>(i instanceof F?this.target.copy(i):r&&s&&this.target.set(i,r,s),this.object.lookAt(this.target),this.setOrientation(),this)),An(this,"update",i=>{if(!this.enabled)return;if(this.heightSpeed){const f=jt.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=i*(f*this.heightCoef)}else this.autoSpeedFactor=0;const r=i*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(r+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(r),this.moveLeft&&this.object.translateX(-r),this.moveRight&&this.object.translateX(r),this.moveUp&&this.object.translateY(r),this.moveDown&&this.object.translateY(-r);let s=i*this.lookSpeed;this.activeLook||(s=0);let o=1;this.constrainVertical&&(o=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*s,this.lookVertical&&(this.lat-=this.mouseY*s*o),this.lat=Math.max(-85,Math.min(85,this.lat));let a=jt.degToRad(90-this.lat);const l=jt.degToRad(this.lon);this.constrainVertical&&(a=jt.mapLinear(a,0,Math.PI,this.verticalMin,this.verticalMax));const c=this.object.position;jF.setFromSphericalCoords(1,a,l).add(c),this.object.lookAt(jF)}),An(this,"contextmenu",i=>i.preventDefault()),An(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-jt.radToDeg(this.spherical.phi),this.lon=jt.radToDeg(this.spherical.theta)}),this.object=e,this.domElement=t,this.setOrientation(),t&&this.connect(t)}};var _1e=Object.defineProperty,E1e=(n,e,t)=>e in n?_1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,it=(n,e,t)=>(E1e(n,typeof e!="symbol"?e+"":e,t),t);let w1e=class extends Jt{constructor(e,t){super(),it(this,"isTransformControls",!0),it(this,"visible",!1),it(this,"domElement"),it(this,"raycaster",new Ef),it(this,"gizmo"),it(this,"plane"),it(this,"tempVector",new F),it(this,"tempVector2",new F),it(this,"tempQuaternion",new Lt),it(this,"unit",{X:new F(1,0,0),Y:new F(0,1,0),Z:new F(0,0,1)}),it(this,"pointStart",new F),it(this,"pointEnd",new F),it(this,"offset",new F),it(this,"rotationAxis",new F),it(this,"startNorm",new F),it(this,"endNorm",new F),it(this,"rotationAngle",0),it(this,"cameraPosition",new F),it(this,"cameraQuaternion",new Lt),it(this,"cameraScale",new F),it(this,"parentPosition",new F),it(this,"parentQuaternion",new Lt),it(this,"parentQuaternionInv",new Lt),it(this,"parentScale",new F),it(this,"worldPositionStart",new F),it(this,"worldQuaternionStart",new Lt),it(this,"worldScaleStart",new F),it(this,"worldPosition",new F),it(this,"worldQuaternion",new Lt),it(this,"worldQuaternionInv",new Lt),it(this,"worldScale",new F),it(this,"eye",new F),it(this,"positionStart",new F),it(this,"quaternionStart",new Lt),it(this,"scaleStart",new F),it(this,"camera"),it(this,"object"),it(this,"enabled",!0),it(this,"axis",null),it(this,"mode","translate"),it(this,"translationSnap",null),it(this,"rotationSnap",null),it(this,"scaleSnap",null),it(this,"space","world"),it(this,"size",1),it(this,"dragging",!1),it(this,"showX",!0),it(this,"showY",!0),it(this,"showZ",!0),it(this,"changeEvent",{type:"change"}),it(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),it(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),it(this,"objectChangeEvent",{type:"objectChange"}),it(this,"intersectObjectWithRay",(r,s,o)=>{const a=s.intersectObject(r,!0);for(let l=0;l<a.length;l++)if(a[l].object.visible||o)return a[l];return!1}),it(this,"attach",r=>(this.object=r,this.visible=!0,this)),it(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),it(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),it(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),it(this,"pointerHover",r=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(r,this.camera);const s=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);s?this.axis=s.object.name:this.axis=null}),it(this,"pointerDown",r=>{if(!(this.object===void 0||this.dragging===!0||r.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(r,this.camera);const s=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(s){let o=this.space;if(this.mode==="scale"?o="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(o="world"),o==="local"&&this.mode==="rotate"){const a=this.rotationSnap;this.axis==="X"&&a&&(this.object.rotation.x=Math.round(this.object.rotation.x/a)*a),this.axis==="Y"&&a&&(this.object.rotation.y=Math.round(this.object.rotation.y/a)*a),this.axis==="Z"&&a&&(this.object.rotation.z=Math.round(this.object.rotation.z/a)*a)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(s.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),it(this,"pointerMove",r=>{const s=this.axis,o=this.mode,a=this.object;let l=this.space;if(o==="scale"?l="local":(s==="E"||s==="XYZE"||s==="XYZ")&&(l="world"),a===void 0||s===null||this.dragging===!1||r.button!==-1)return;this.raycaster.setFromCamera(r,this.camera);const c=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(c){if(this.pointEnd.copy(c.point).sub(this.worldPositionStart),o==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),l==="local"&&s!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),s.indexOf("X")===-1&&(this.offset.x=0),s.indexOf("Y")===-1&&(this.offset.y=0),s.indexOf("Z")===-1&&(this.offset.z=0),l==="local"&&s!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),a.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(l==="local"&&(a.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),s.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),s.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),s.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.position.applyQuaternion(this.quaternionStart)),l==="world"&&(a.parent&&a.position.add(this.tempVector.setFromMatrixPosition(a.parent.matrixWorld)),s.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),s.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),s.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.parent&&a.position.sub(this.tempVector.setFromMatrixPosition(a.parent.matrixWorld))));else if(o==="scale"){if(s.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),this.tempVector2.set(u,u,u)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),s.search("X")===-1&&(this.tempVector2.x=1),s.search("Y")===-1&&(this.tempVector2.y=1),s.search("Z")===-1&&(this.tempVector2.z=1);a.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(s.search("X")!==-1&&(this.object.scale.x=Math.round(a.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),s.search("Y")!==-1&&(a.scale.y=Math.round(a.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),s.search("Z")!==-1&&(a.scale.z=Math.round(a.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(o==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));s==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):s==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*u):(s==="X"||s==="Y"||s==="Z")&&(this.rotationAxis.copy(this.unit[s]),this.tempVector.copy(this.unit[s]),l==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),l==="local"&&s!=="E"&&s!=="XYZE"?(a.quaternion.copy(this.quaternionStart),a.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),a.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),a.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),it(this,"pointerUp",r=>{r.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),it(this,"getPointer",r=>{var s;if(this.domElement&&((s=this.domElement.ownerDocument)!=null&&s.pointerLockElement))return{x:0,y:0,button:r.button};{const o=r.changedTouches?r.changedTouches[0]:r,a=this.domElement.getBoundingClientRect();return{x:(o.clientX-a.left)/a.width*2-1,y:-(o.clientY-a.top)/a.height*2+1,button:r.button}}}),it(this,"onPointerHover",r=>{if(this.enabled)switch(r.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(r));break}}),it(this,"onPointerDown",r=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(r)),this.pointerDown(this.getPointer(r)))}),it(this,"onPointerMove",r=>{this.enabled&&this.pointerMove(this.getPointer(r))}),it(this,"onPointerUp",r=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(r)))}),it(this,"getMode",()=>this.mode),it(this,"setMode",r=>{this.mode=r}),it(this,"setTranslationSnap",r=>{this.translationSnap=r}),it(this,"setRotationSnap",r=>{this.rotationSnap=r}),it(this,"setScaleSnap",r=>{this.scaleSnap=r}),it(this,"setSize",r=>{this.size=r}),it(this,"setSpace",r=>{this.space=r}),it(this,"update",()=>{console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),it(this,"connect",r=>{r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),it(this,"dispose",()=>{var r,s,o,a,l,c;(r=this.domElement)==null||r.removeEventListener("pointerdown",this.onPointerDown),(s=this.domElement)==null||s.removeEventListener("pointermove",this.onPointerHover),(a=(o=this.domElement)==null?void 0:o.ownerDocument)==null||a.removeEventListener("pointermove",this.onPointerMove),(c=(l=this.domElement)==null?void 0:l.ownerDocument)==null||c.removeEventListener("pointerup",this.onPointerUp),this.traverse(u=>{const f=u;f.geometry&&f.geometry.dispose(),f.material&&f.material.dispose()})}),this.domElement=t,this.camera=e,this.gizmo=new S1e,this.add(this.gizmo),this.plane=new C1e,this.add(this.plane);const i=(r,s)=>{let o=s;Object.defineProperty(this,r,{get:function(){return o!==void 0?o:s},set:function(a){o!==a&&(o=a,this.plane[r]=a,this.gizmo[r]=a,this.dispatchEvent({type:r+"-changed",value:a}),this.dispatchEvent(this.changeEvent))}}),this[r]=s,this.plane[r]=s,this.gizmo[r]=s};i("camera",this.camera),i("object",this.object),i("enabled",this.enabled),i("axis",this.axis),i("mode",this.mode),i("translationSnap",this.translationSnap),i("rotationSnap",this.rotationSnap),i("scaleSnap",this.scaleSnap),i("space",this.space),i("size",this.size),i("dragging",this.dragging),i("showX",this.showX),i("showY",this.showY),i("showZ",this.showZ),i("worldPosition",this.worldPosition),i("worldPositionStart",this.worldPositionStart),i("worldQuaternion",this.worldQuaternion),i("worldQuaternionStart",this.worldQuaternionStart),i("cameraPosition",this.cameraPosition),i("cameraQuaternion",this.cameraQuaternion),i("pointStart",this.pointStart),i("pointEnd",this.pointEnd),i("rotationAxis",this.rotationAxis),i("rotationAngle",this.rotationAngle),i("eye",this.eye),t!==void 0&&this.connect(t)}};class S1e extends Jt{constructor(){super(),it(this,"isTransformControlsGizmo",!0),it(this,"type","TransformControlsGizmo"),it(this,"tempVector",new F(0,0,0)),it(this,"tempEuler",new Qr),it(this,"alignVector",new F(0,1,0)),it(this,"zeroVector",new F(0,0,0)),it(this,"lookAtMatrix",new He),it(this,"tempQuaternion",new Lt),it(this,"tempQuaternion2",new Lt),it(this,"identityQuaternion",new Lt),it(this,"unitX",new F(1,0,0)),it(this,"unitY",new F(0,1,0)),it(this,"unitZ",new F(0,0,1)),it(this,"gizmo"),it(this,"picker"),it(this,"helper"),it(this,"rotationAxis",new F),it(this,"cameraPosition",new F),it(this,"worldPositionStart",new F),it(this,"worldQuaternionStart",new Lt),it(this,"worldPosition",new F),it(this,"worldQuaternion",new Lt),it(this,"eye",new F),it(this,"camera",null),it(this,"enabled",!0),it(this,"axis",null),it(this,"mode","translate"),it(this,"space","world"),it(this,"size",1),it(this,"dragging",!1),it(this,"showX",!0),it(this,"showY",!0),it(this,"showZ",!0),it(this,"updateMatrixWorld",()=>{let Y=this.space;this.mode==="scale"&&(Y="local");const O=Y==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let W=[];W=W.concat(this.picker[this.mode].children),W=W.concat(this.gizmo[this.mode].children),W=W.concat(this.helper[this.mode].children);for(let $=0;$<W.length;$++){const k=W[$];k.visible=!0,k.rotation.set(0,0,0),k.position.copy(this.worldPosition);let V;if(this.camera.isOrthographicCamera?V=(this.camera.top-this.camera.bottom)/this.camera.zoom:V=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),k.scale.set(1,1,1).multiplyScalar(V*this.size/7),k.tag==="helper"){k.visible=!1,k.name==="AXIS"?(k.position.copy(this.worldPositionStart),k.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),k.quaternion.copy(O).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(O).dot(this.eye))>.9&&(k.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),k.quaternion.copy(O).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(O).dot(this.eye))>.9&&(k.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),k.quaternion.copy(O).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(O).dot(this.eye))>.9&&(k.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),k.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),k.quaternion.multiply(this.tempQuaternion),k.visible=this.dragging),this.axis==="E"&&(k.visible=!1)):k.name==="START"?(k.position.copy(this.worldPositionStart),k.visible=this.dragging):k.name==="END"?(k.position.copy(this.worldPosition),k.visible=this.dragging):k.name==="DELTA"?(k.position.copy(this.worldPositionStart),k.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),k.scale.copy(this.tempVector),k.visible=this.dragging):(k.quaternion.copy(O),this.dragging?k.position.copy(this.worldPositionStart):k.position.copy(this.worldPosition),this.axis&&(k.visible=this.axis.search(k.name)!==-1));continue}k.quaternion.copy(O),this.mode==="translate"||this.mode==="scale"?((k.name==="X"||k.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(O).dot(this.eye))>.99&&(k.scale.set(1e-10,1e-10,1e-10),k.visible=!1),(k.name==="Y"||k.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(O).dot(this.eye))>.99&&(k.scale.set(1e-10,1e-10,1e-10),k.visible=!1),(k.name==="Z"||k.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(O).dot(this.eye))>.99&&(k.scale.set(1e-10,1e-10,1e-10),k.visible=!1),k.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(O).dot(this.eye))<.2&&(k.scale.set(1e-10,1e-10,1e-10),k.visible=!1),k.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(O).dot(this.eye))<.2&&(k.scale.set(1e-10,1e-10,1e-10),k.visible=!1),k.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(O).dot(this.eye))<.2&&(k.scale.set(1e-10,1e-10,1e-10),k.visible=!1),k.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(O).dot(this.eye)<0?k.tag==="fwd"?k.visible=!1:k.scale.x*=-1:k.tag==="bwd"&&(k.visible=!1)),k.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(O).dot(this.eye)<0?k.tag==="fwd"?k.visible=!1:k.scale.y*=-1:k.tag==="bwd"&&(k.visible=!1)),k.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(O).dot(this.eye)<0?k.tag==="fwd"?k.visible=!1:k.scale.z*=-1:k.tag==="bwd"&&(k.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(O),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(O).invert()),k.name.search("E")!==-1&&k.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),k.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),k.quaternion.copy(this.tempQuaternion)),k.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),k.quaternion.copy(this.tempQuaternion)),k.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),k.quaternion.copy(this.tempQuaternion))),k.visible=k.visible&&(k.name.indexOf("X")===-1||this.showX),k.visible=k.visible&&(k.name.indexOf("Y")===-1||this.showY),k.visible=k.visible&&(k.name.indexOf("Z")===-1||this.showZ),k.visible=k.visible&&(k.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),k.material.tempOpacity=k.material.tempOpacity||k.material.opacity,k.material.tempColor=k.material.tempColor||k.material.color.clone(),k.material.color.copy(k.material.tempColor),k.material.opacity=k.material.tempOpacity,this.enabled?this.axis&&(k.name===this.axis?(k.material.opacity=1,k.material.color.lerp(new et(1,1,1),.5)):this.axis.split("").some(function(Q){return k.name===Q})?(k.material.opacity=1,k.material.color.lerp(new et(1,1,1),.5)):(k.material.opacity*=.25,k.material.color.lerp(new et(1,1,1),.5))):(k.material.opacity*=.5,k.material.color.lerp(new et(1,1,1),.5))}super.updateMatrixWorld()});const e=new Ir({depthTest:!1,depthWrite:!1,transparent:!0,side:ni,fog:!1,toneMapped:!1}),t=new tr({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),i=e.clone();i.opacity=.15;const r=e.clone();r.opacity=.33;const s=e.clone();s.color.set(16711680);const o=e.clone();o.color.set(65280);const a=e.clone();a.color.set(255);const l=e.clone();l.opacity=.25;const c=l.clone();c.color.set(16776960);const u=l.clone();u.color.set(65535);const f=l.clone();f.color.set(16711935),e.clone().color.set(16776960);const d=t.clone();d.color.set(16711680);const m=t.clone();m.color.set(65280);const g=t.clone();g.color.set(255);const v=t.clone();v.color.set(65535);const p=t.clone();p.color.set(16711935);const A=t.clone();A.color.set(16776960);const y=t.clone();y.color.set(7895160);const w=A.clone();w.opacity=.25;const S=new Nr(0,.05,.2,12,1,!1),C=new Ms(.125,.125,.125),b=new Gt;b.setAttribute("position",new Et([0,0,0,1,0,0],3));const M=(Y,O)=>{const W=new Gt,$=[];for(let k=0;k<=64*O;++k)$.push(0,Math.cos(k/32*Math.PI)*Y,Math.sin(k/32*Math.PI)*Y);return W.setAttribute("position",new Et($,3)),W},I=()=>{const Y=new Gt;return Y.setAttribute("position",new Et([0,0,0,1,1,1],3)),Y},T={X:[[new gt(S,s),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new gt(S,s),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new vn(b,d)]],Y:[[new gt(S,o),[0,1,0],null,null,"fwd"],[new gt(S,o),[0,1,0],[Math.PI,0,0],null,"bwd"],[new vn(b,m),null,[0,0,Math.PI/2]]],Z:[[new gt(S,a),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new gt(S,a),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new vn(b,g),null,[0,-Math.PI/2,0]]],XYZ:[[new gt(new Jo(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new gt(new br(.295,.295),c.clone()),[.15,.15,0]],[new vn(b,A),[.18,.3,0],null,[.125,1,1]],[new vn(b,A),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new gt(new br(.295,.295),u.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new vn(b,v),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new vn(b,v),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new gt(new br(.295,.295),f.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new vn(b,p),[.18,0,.3],null,[.125,1,1]],[new vn(b,p),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},D={X:[[new gt(new Nr(.2,0,1,4,1,!1),i),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new gt(new Nr(.2,0,1,4,1,!1),i),[0,.6,0]]],Z:[[new gt(new Nr(.2,0,1,4,1,!1),i),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new gt(new Jo(.2,0),i)]],XY:[[new gt(new br(.4,.4),i),[.2,.2,0]]],YZ:[[new gt(new br(.4,.4),i),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new gt(new br(.4,.4),i),[.2,0,.2],[-Math.PI/2,0,0]]]},R={START:[[new gt(new Jo(.01,2),r),null,null,null,"helper"]],END:[[new gt(new Jo(.01,2),r),null,null,null,"helper"]],DELTA:[[new vn(I(),r),null,null,null,"helper"]],X:[[new vn(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new vn(b,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new vn(b,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},z={X:[[new vn(M(1,.5),d)],[new gt(new Jo(.04,0),s),[0,0,.99],null,[1,3,1]]],Y:[[new vn(M(1,.5),m),null,[0,0,-Math.PI/2]],[new gt(new Jo(.04,0),o),[0,0,.99],null,[3,1,1]]],Z:[[new vn(M(1,.5),g),null,[0,Math.PI/2,0]],[new gt(new Jo(.04,0),a),[.99,0,0],null,[1,3,1]]],E:[[new vn(M(1.25,1),w),null,[0,Math.PI/2,0]],[new gt(new Nr(.03,0,.15,4,1,!1),w),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new gt(new Nr(.03,0,.15,4,1,!1),w),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new gt(new Nr(.03,0,.15,4,1,!1),w),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new gt(new Nr(.03,0,.15,4,1,!1),w),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new vn(M(1,1),y),null,[0,Math.PI/2,0]]]},L={AXIS:[[new vn(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},H={X:[[new gt(new Cu(1,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new gt(new Cu(1,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new gt(new Cu(1,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new gt(new Cu(1.25,.1,2,24),i)]],XYZE:[[new gt(new id(.7,10,8),i)]]},J={X:[[new gt(C,s),[.8,0,0],[0,0,-Math.PI/2]],[new vn(b,d),null,null,[.8,1,1]]],Y:[[new gt(C,o),[0,.8,0]],[new vn(b,m),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new gt(C,a),[0,0,.8],[Math.PI/2,0,0]],[new vn(b,g),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new gt(C,c),[.85,.85,0],null,[2,2,.2]],[new vn(b,A),[.855,.98,0],null,[.125,1,1]],[new vn(b,A),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new gt(C,u),[0,.85,.85],null,[.2,2,2]],[new vn(b,v),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new vn(b,v),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new gt(C,f),[.85,0,.85],null,[2,.2,2]],[new vn(b,p),[.855,0,.98],null,[.125,1,1]],[new vn(b,p),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new gt(new Ms(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new gt(new Ms(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new gt(new Ms(.125,.125,.125),l.clone()),[0,0,1.1]]]},Z={X:[[new gt(new Nr(.2,0,.8,4,1,!1),i),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new gt(new Nr(.2,0,.8,4,1,!1),i),[0,.5,0]]],Z:[[new gt(new Nr(.2,0,.8,4,1,!1),i),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new gt(C,i),[.85,.85,0],null,[3,3,.2]]],YZ:[[new gt(C,i),[0,.85,.85],null,[.2,3,3]]],XZ:[[new gt(C,i),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new gt(new Ms(.2,.2,.2),i),[1.1,0,0]]],XYZY:[[new gt(new Ms(.2,.2,.2),i),[0,1.1,0]]],XYZZ:[[new gt(new Ms(.2,.2,.2),i),[0,0,1.1]]]},U={X:[[new vn(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new vn(b,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new vn(b,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},X=Y=>{const O=new Jt;for(let W in Y)for(let $=Y[W].length;$--;){const k=Y[W][$][0].clone(),V=Y[W][$][1],Q=Y[W][$][2],j=Y[W][$][3],oe=Y[W][$][4];k.name=W,k.tag=oe,V&&k.position.set(V[0],V[1],V[2]),Q&&k.rotation.set(Q[0],Q[1],Q[2]),j&&k.scale.set(j[0],j[1],j[2]),k.updateMatrix();const xe=k.geometry.clone();xe.applyMatrix4(k.matrix),k.geometry=xe,k.renderOrder=1/0,k.position.set(0,0,0),k.rotation.set(0,0,0),k.scale.set(1,1,1),O.add(k)}return O};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=X(T)),this.add(this.gizmo.rotate=X(z)),this.add(this.gizmo.scale=X(J)),this.add(this.picker.translate=X(D)),this.add(this.picker.rotate=X(H)),this.add(this.picker.scale=X(Z)),this.add(this.helper.translate=X(R)),this.add(this.helper.rotate=X(L)),this.add(this.helper.scale=X(U)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class C1e extends gt{constructor(){super(new br(1e5,1e5,2,2),new Ir({visible:!1,wireframe:!0,side:ni,transparent:!0,opacity:.1,toneMapped:!1})),it(this,"isTransformControlsPlane",!0),it(this,"type","TransformControlsPlane"),it(this,"unitX",new F(1,0,0)),it(this,"unitY",new F(0,1,0)),it(this,"unitZ",new F(0,0,1)),it(this,"tempVector",new F),it(this,"dirVector",new F),it(this,"alignVector",new F),it(this,"tempMatrix",new He),it(this,"identityQuaternion",new Lt),it(this,"cameraQuaternion",new Lt),it(this,"worldPosition",new F),it(this,"worldQuaternion",new Lt),it(this,"eye",new F),it(this,"axis",null),it(this,"mode","translate"),it(this,"space","world"),it(this,"updateMatrixWorld",()=>{let e=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(e="local"),this.unitX.set(1,0,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}}var b1e=Object.defineProperty,M1e=(n,e,t)=>e in n?b1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wr=(n,e,t)=>(M1e(n,typeof e!="symbol"?e+"":e,t),t);const lp=new Qr(0,0,0,"YXZ"),cp=new F,I1e={type:"change"},T1e={type:"lock"},B1e={type:"unlock"},WF=Math.PI/2;let P1e=class extends Yr{constructor(e,t){super(),wr(this,"camera"),wr(this,"domElement"),wr(this,"isLocked"),wr(this,"minPolarAngle"),wr(this,"maxPolarAngle"),wr(this,"pointerSpeed"),wr(this,"onMouseMove",i=>{if(!this.domElement||this.isLocked===!1)return;const r=i.movementX||i.mozMovementX||i.webkitMovementX||0,s=i.movementY||i.mozMovementY||i.webkitMovementY||0;lp.setFromQuaternion(this.camera.quaternion),lp.y-=r*.002*this.pointerSpeed,lp.x-=s*.002*this.pointerSpeed,lp.x=Math.max(WF-this.maxPolarAngle,Math.min(WF-this.minPolarAngle,lp.x)),this.camera.quaternion.setFromEuler(lp),this.dispatchEvent(I1e)}),wr(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(T1e),this.isLocked=!0):(this.dispatchEvent(B1e),this.isLocked=!1))}),wr(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),wr(this,"connect",i=>{this.domElement=i||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),wr(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),wr(this,"dispose",()=>{this.disconnect()}),wr(this,"getObject",()=>this.camera),wr(this,"direction",new F(0,0,-1)),wr(this,"getDirection",i=>i.copy(this.direction).applyQuaternion(this.camera.quaternion)),wr(this,"moveForward",i=>{cp.setFromMatrixColumn(this.camera.matrix,0),cp.crossVectors(this.camera.up,cp),this.camera.position.addScaledVector(cp,i)}),wr(this,"moveRight",i=>{cp.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(cp,i)}),wr(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),wr(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,t&&this.connect(t)}};var R1e=Object.defineProperty,D1e=(n,e,t)=>e in n?R1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Sr=(n,e,t)=>(D1e(n,typeof e!="symbol"?e+"":e,t),t);let L1e=class extends Yr{constructor(e){super(),Sr(this,"object"),Sr(this,"changeEvent",{type:"change"}),Sr(this,"EPS",1e-6),Sr(this,"enabled",!0),Sr(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),Sr(this,"screenOrientation",0),Sr(this,"alphaOffset",0),Sr(this,"onDeviceOrientationChangeEvent",t=>{this.deviceOrientation=t}),Sr(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),Sr(this,"zee",new F(0,0,1)),Sr(this,"euler",new Qr),Sr(this,"q0",new Lt),Sr(this,"q1",new Lt(-Math.sqrt(.5),0,0,Math.sqrt(.5))),Sr(this,"setObjectQuaternion",(t,i,r,s,o)=>{this.euler.set(r,i,-s,"YXZ"),t.setFromEuler(this.euler),t.multiply(this.q1),t.multiply(this.q0.setFromAxisAngle(this.zee,-o))}),Sr(this,"connect",()=>{this.onScreenOrientationChangeEvent(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(t=>{t=="granted"&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(t=>{console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",t)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),Sr(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),Sr(this,"lastQuaternion",new Lt),Sr(this,"update",()=>{if(this.enabled===!1)return;const t=this.deviceOrientation;if(t){const i=t.alpha?jt.degToRad(t.alpha)+this.alphaOffset:0,r=t.beta?jt.degToRad(t.beta):0,s=t.gamma?jt.degToRad(t.gamma):0,o=this.screenOrientation?jt.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,i,r,s,o),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),Sr(this,"dispose",()=>this.disconnect()),this.object=e,this.object.rotation.reorder("YXZ"),this.connect()}};var F1e=Object.defineProperty,O1e=(n,e,t)=>e in n?F1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,St=(n,e,t)=>(O1e(n,typeof e!="symbol"?e+"":e,t),t);let z1e=class extends Yr{constructor(e,t){super(),St(this,"enabled",!0),St(this,"screen",{left:0,top:0,width:0,height:0}),St(this,"rotateSpeed",1),St(this,"zoomSpeed",1.2),St(this,"panSpeed",.3),St(this,"noRotate",!1),St(this,"noZoom",!1),St(this,"noPan",!1),St(this,"staticMoving",!1),St(this,"dynamicDampingFactor",.2),St(this,"minDistance",0),St(this,"maxDistance",1/0),St(this,"keys",["KeyA","KeyS","KeyD"]),St(this,"mouseButtons",{LEFT:na.ROTATE,MIDDLE:na.DOLLY,RIGHT:na.PAN}),St(this,"object"),St(this,"domElement"),St(this,"cursorZoom",!1),St(this,"target",new F),St(this,"mousePosition",new Se),St(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),St(this,"EPS",1e-6),St(this,"lastZoom",1),St(this,"lastPosition",new F),St(this,"cursorVector",new F),St(this,"targetVector",new F),St(this,"_state",this.STATE.NONE),St(this,"_keyState",this.STATE.NONE),St(this,"_eye",new F),St(this,"_movePrev",new Se),St(this,"_moveCurr",new Se),St(this,"_lastAxis",new F),St(this,"_lastAngle",0),St(this,"_zoomStart",new Se),St(this,"_zoomEnd",new Se),St(this,"_touchZoomDistanceStart",0),St(this,"_touchZoomDistanceEnd",0),St(this,"_panStart",new Se),St(this,"_panEnd",new Se),St(this,"target0"),St(this,"position0"),St(this,"up0"),St(this,"zoom0"),St(this,"changeEvent",{type:"change"}),St(this,"startEvent",{type:"start"}),St(this,"endEvent",{type:"end"}),St(this,"onScreenVector",new Se),St(this,"getMouseOnScreen",(i,r)=>(this.onScreenVector.set((i-this.screen.left)/this.screen.width,(r-this.screen.top)/this.screen.height),this.onScreenVector)),St(this,"onCircleVector",new Se),St(this,"getMouseOnCircle",(i,r)=>(this.onCircleVector.set((i-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-r))/this.screen.width),this.onCircleVector)),St(this,"axis",new F),St(this,"quaternion",new Lt),St(this,"eyeDirection",new F),St(this,"objectUpDirection",new F),St(this,"objectSidewaysDirection",new F),St(this,"moveDirection",new F),St(this,"angle",0),St(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),St(this,"zoomCamera",()=>{let i;if(this._state===this.STATE.TOUCH_ZOOM_PAN)i=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(i):this.object.isOrthographicCamera?(this.object.zoom/=i,this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type");else{if(i=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(i-1)>this.EPS&&i>0&&(this.object.isPerspectiveCamera?(i>1&&this._eye.length()>=this.maxDistance-this.EPS&&(i=1),this._eye.multiplyScalar(i)):this.object.isOrthographicCamera?(i>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(i=1),this.object.zoom/=i):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let r=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(r,this.target,i)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),St(this,"mouseChange",new Se),St(this,"objectUp",new F),St(this,"pan",new F),St(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const i=this.object,r=(i.right-i.left)/this.object.zoom,s=(i.top-i.bottom)/this.object.zoom;this.mouseChange.x*=r,this.mouseChange.y*=s}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),St(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),St(this,"handleResize",()=>{if(!this.domElement)return;const i=this.domElement.getBoundingClientRect(),r=this.domElement.ownerDocument.documentElement;this.screen.left=i.left+window.pageXOffset-r.clientLeft,this.screen.top=i.top+window.pageYOffset-r.clientTop,this.screen.width=i.width,this.screen.height=i.height}),St(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")}),St(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),St(this,"keydown",i=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(i.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:i.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:i.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),St(this,"onPointerDown",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseDown(i);break}}),St(this,"onPointerMove",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseMove(i);break}}),St(this,"onPointerUp",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),St(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),St(this,"onMouseDown",i=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(i.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break}const r=this._keyState!==this.STATE.NONE?this._keyState:this._state;r===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr)):r===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(i.pageX,i.pageY)),this._zoomEnd.copy(this._zoomStart)):r===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(i.pageX,i.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),St(this,"onMouseMove",i=>{if(this.enabled===!1)return;const r=this._keyState!==this.STATE.NONE?this._keyState:this._state;r===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(i.pageX,i.pageY))):r===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(i.pageX,i.pageY)):r===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(i.pageX,i.pageY))}),St(this,"onMouseUp",()=>{this.domElement&&this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),St(this,"mousewheel",i=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(i.preventDefault(),i.deltaMode){case 2:this._zoomStart.y-=i.deltaY*.025;break;case 1:this._zoomStart.y-=i.deltaY*.01;break;default:this._zoomStart.y-=i.deltaY*25e-5;break}this.mousePosition.x=i.offsetX/this.screen.width*2-1,this.mousePosition.y=-(i.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),St(this,"touchstart",i=>{if(this.enabled!==!1){switch(i.preventDefault(),i.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const r=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(r*r+s*s);const o=(i.touches[0].pageX+i.touches[1].pageX)/2,a=(i.touches[0].pageY+i.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(o,a)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),St(this,"touchmove",i=>{if(this.enabled!==!1)switch(i.preventDefault(),i.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY));break;default:const r=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(r*r+s*s);const o=(i.touches[0].pageX+i.touches[1].pageX)/2,a=(i.touches[0].pageY+i.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(o,a));break}}),St(this,"touchend",i=>{if(this.enabled!==!1){switch(i.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),St(this,"contextmenu",i=>{this.enabled!==!1&&i.preventDefault()}),St(this,"connect",i=>{i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=i,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),St(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,t!==void 0&&this.connect(t),this.update()}};var U1e=Object.defineProperty,k1e=(n,e,t)=>e in n?U1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fn=(n,e,t)=>(k1e(n,typeof e!="symbol"?e+"":e,t),t);const ex=new xa,YF=new Hr,N1e=Math.cos(70*(Math.PI/180)),XF=(n,e)=>(n%e+e)%e;let $j=class extends Yr{constructor(e,t){super(),fn(this,"object"),fn(this,"domElement"),fn(this,"enabled",!0),fn(this,"target",new F),fn(this,"minDistance",0),fn(this,"maxDistance",1/0),fn(this,"minZoom",0),fn(this,"maxZoom",1/0),fn(this,"minPolarAngle",0),fn(this,"maxPolarAngle",Math.PI),fn(this,"minAzimuthAngle",-1/0),fn(this,"maxAzimuthAngle",1/0),fn(this,"enableDamping",!1),fn(this,"dampingFactor",.05),fn(this,"enableZoom",!0),fn(this,"zoomSpeed",1),fn(this,"enableRotate",!0),fn(this,"rotateSpeed",1),fn(this,"enablePan",!0),fn(this,"panSpeed",1),fn(this,"screenSpacePanning",!0),fn(this,"keyPanSpeed",7),fn(this,"zoomToCursor",!1),fn(this,"autoRotate",!1),fn(this,"autoRotateSpeed",2),fn(this,"reverseOrbit",!1),fn(this,"reverseHorizontalOrbit",!1),fn(this,"reverseVerticalOrbit",!1),fn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),fn(this,"mouseButtons",{LEFT:na.ROTATE,MIDDLE:na.DOLLY,RIGHT:na.PAN}),fn(this,"touches",{ONE:vc.ROTATE,TWO:vc.DOLLY_PAN}),fn(this,"target0"),fn(this,"position0"),fn(this,"zoom0"),fn(this,"_domElementKeyEvents",null),fn(this,"getPolarAngle"),fn(this,"getAzimuthalAngle"),fn(this,"setPolarAngle"),fn(this,"setAzimuthalAngle"),fn(this,"getDistance"),fn(this,"listenToKeyEvents"),fn(this,"stopListenToKeyEvents"),fn(this,"saveState"),fn(this,"reset"),fn(this,"update"),fn(this,"connect"),fn(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=ce=>{let De=XF(ce,2*Math.PI),$e=u.phi;$e<0&&($e+=2*Math.PI),De<0&&(De+=2*Math.PI);let Ye=Math.abs(De-$e);2*Math.PI-Ye<Ye&&(De<$e?De+=2*Math.PI:$e+=2*Math.PI),f.phi=De-$e,i.update()},this.setAzimuthalAngle=ce=>{let De=XF(ce,2*Math.PI),$e=u.theta;$e<0&&($e+=2*Math.PI),De<0&&(De+=2*Math.PI);let Ye=Math.abs(De-$e);2*Math.PI-Ye<Ye&&(De<$e?De+=2*Math.PI:$e+=2*Math.PI),f.theta=De-$e,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ce=>{ce.addEventListener("keydown",Ce),this._domElementKeyEvents=ce},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ce),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const ce=new F,De=new F(0,1,0),$e=new Lt().setFromUnitVectors(e.up,De),Ye=$e.clone().invert(),fe=new F,_e=new Lt,Me=2*Math.PI;return function(){const ot=i.object.position;$e.setFromUnitVectors(e.up,De),Ye.copy($e).invert(),ce.copy(ot).sub(i.target),ce.applyQuaternion($e),u.setFromVector3(ce),i.autoRotate&&l===a.NONE&&L(R()),i.enableDamping?(u.theta+=f.theta*i.dampingFactor,u.phi+=f.phi*i.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let yt=i.minAzimuthAngle,we=i.maxAzimuthAngle;isFinite(yt)&&isFinite(we)&&(yt<-Math.PI?yt+=Me:yt>Math.PI&&(yt-=Me),we<-Math.PI?we+=Me:we>Math.PI&&(we-=Me),yt<=we?u.theta=Math.max(yt,Math.min(we,u.theta)):u.theta=u.theta>(yt+we)/2?Math.max(yt,u.theta):Math.min(we,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),i.zoomToCursor&&I||i.object.isOrthographicCamera?u.radius=W(u.radius):u.radius=W(u.radius*h),ce.setFromSpherical(u),ce.applyQuaternion(Ye),ot.copy(i.target).add(ce),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),d.set(0,0,0));let Ie=!1;if(i.zoomToCursor&&I){let Fe=null;if(i.object instanceof mn&&i.object.isPerspectiveCamera){const qe=ce.length();Fe=W(qe*h);const ut=qe-Fe;i.object.position.addScaledVector(b,ut),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const qe=new F(M.x,M.y,0);qe.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix(),Ie=!0;const ut=new F(M.x,M.y,0);ut.unproject(i.object),i.object.position.sub(ut).add(qe),i.object.updateMatrixWorld(),Fe=ce.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Fe!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Fe).add(i.object.position):(ex.origin.copy(i.object.position),ex.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(ex.direction))<N1e?e.lookAt(i.target):(YF.setFromNormalAndCoplanarPoint(i.object.up,i.target),ex.intersectPlane(YF,i.target))))}else i.object instanceof ti&&i.object.isOrthographicCamera&&(Ie=h!==1,Ie&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix()));return h=1,I=!1,Ie||fe.distanceToSquared(i.object.position)>c||8*(1-_e.dot(i.object.quaternion))>c?(i.dispatchEvent(r),fe.copy(i.object.position),_e.copy(i.object.quaternion),Ie=!1,!0):!1}})(),this.connect=ce=>{ce===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=ce,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Xe),i.domElement.addEventListener("pointerdown",Re),i.domElement.addEventListener("pointercancel",se),i.domElement.addEventListener("wheel",Ue)},this.dispose=()=>{var ce,De,$e,Ye,fe,_e;i.domElement&&(i.domElement.style.touchAction="auto"),(ce=i.domElement)==null||ce.removeEventListener("contextmenu",Xe),(De=i.domElement)==null||De.removeEventListener("pointerdown",Re),($e=i.domElement)==null||$e.removeEventListener("pointercancel",se),(Ye=i.domElement)==null||Ye.removeEventListener("wheel",Ue),(fe=i.domElement)==null||fe.ownerDocument.removeEventListener("pointermove",ct),(_e=i.domElement)==null||_e.ownerDocument.removeEventListener("pointerup",se),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Ce)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new Wh,f=new Wh;let h=1;const d=new F,m=new Se,g=new Se,v=new Se,p=new Se,A=new Se,y=new Se,w=new Se,S=new Se,C=new Se,b=new F,M=new Se;let I=!1;const T=[],D={};function R(){return 2*Math.PI/60/60*i.autoRotateSpeed}function z(){return Math.pow(.95,i.zoomSpeed)}function L(ce){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=ce:f.theta-=ce}function H(ce){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=ce:f.phi-=ce}const J=(()=>{const ce=new F;return function($e,Ye){ce.setFromMatrixColumn(Ye,0),ce.multiplyScalar(-$e),d.add(ce)}})(),Z=(()=>{const ce=new F;return function($e,Ye){i.screenSpacePanning===!0?ce.setFromMatrixColumn(Ye,1):(ce.setFromMatrixColumn(Ye,0),ce.crossVectors(i.object.up,ce)),ce.multiplyScalar($e),d.add(ce)}})(),U=(()=>{const ce=new F;return function($e,Ye){const fe=i.domElement;if(fe&&i.object instanceof mn&&i.object.isPerspectiveCamera){const _e=i.object.position;ce.copy(_e).sub(i.target);let Me=ce.length();Me*=Math.tan(i.object.fov/2*Math.PI/180),J(2*$e*Me/fe.clientHeight,i.object.matrix),Z(2*Ye*Me/fe.clientHeight,i.object.matrix)}else fe&&i.object instanceof ti&&i.object.isOrthographicCamera?(J($e*(i.object.right-i.object.left)/i.object.zoom/fe.clientWidth,i.object.matrix),Z(Ye*(i.object.top-i.object.bottom)/i.object.zoom/fe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function X(ce){i.object instanceof mn&&i.object.isPerspectiveCamera||i.object instanceof ti&&i.object.isOrthographicCamera?h/=ce:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Y(ce){i.object instanceof mn&&i.object.isPerspectiveCamera||i.object instanceof ti&&i.object.isOrthographicCamera?h*=ce:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O(ce){if(!i.zoomToCursor||!i.domElement)return;I=!0;const De=i.domElement.getBoundingClientRect(),$e=ce.clientX-De.left,Ye=ce.clientY-De.top,fe=De.width,_e=De.height;M.x=$e/fe*2-1,M.y=-(Ye/_e)*2+1,b.set(M.x,M.y,1).unproject(i.object).sub(i.object.position).normalize()}function W(ce){return Math.max(i.minDistance,Math.min(i.maxDistance,ce))}function $(ce){m.set(ce.clientX,ce.clientY)}function k(ce){O(ce),w.set(ce.clientX,ce.clientY)}function V(ce){p.set(ce.clientX,ce.clientY)}function Q(ce){g.set(ce.clientX,ce.clientY),v.subVectors(g,m).multiplyScalar(i.rotateSpeed);const De=i.domElement;De&&(L(2*Math.PI*v.x/De.clientHeight),H(2*Math.PI*v.y/De.clientHeight)),m.copy(g),i.update()}function j(ce){S.set(ce.clientX,ce.clientY),C.subVectors(S,w),C.y>0?X(z()):C.y<0&&Y(z()),w.copy(S),i.update()}function oe(ce){A.set(ce.clientX,ce.clientY),y.subVectors(A,p).multiplyScalar(i.panSpeed),U(y.x,y.y),p.copy(A),i.update()}function xe(ce){O(ce),ce.deltaY<0?Y(z()):ce.deltaY>0&&X(z()),i.update()}function pe(ce){let De=!1;switch(ce.code){case i.keys.UP:U(0,i.keyPanSpeed),De=!0;break;case i.keys.BOTTOM:U(0,-i.keyPanSpeed),De=!0;break;case i.keys.LEFT:U(i.keyPanSpeed,0),De=!0;break;case i.keys.RIGHT:U(-i.keyPanSpeed,0),De=!0;break}De&&(ce.preventDefault(),i.update())}function de(){if(T.length==1)m.set(T[0].pageX,T[0].pageY);else{const ce=.5*(T[0].pageX+T[1].pageX),De=.5*(T[0].pageY+T[1].pageY);m.set(ce,De)}}function te(){if(T.length==1)p.set(T[0].pageX,T[0].pageY);else{const ce=.5*(T[0].pageX+T[1].pageX),De=.5*(T[0].pageY+T[1].pageY);p.set(ce,De)}}function Ee(){const ce=T[0].pageX-T[1].pageX,De=T[0].pageY-T[1].pageY,$e=Math.sqrt(ce*ce+De*De);w.set(0,$e)}function ue(){i.enableZoom&&Ee(),i.enablePan&&te()}function ve(){i.enableZoom&&Ee(),i.enableRotate&&de()}function ye(ce){if(T.length==1)g.set(ce.pageX,ce.pageY);else{const $e=st(ce),Ye=.5*(ce.pageX+$e.x),fe=.5*(ce.pageY+$e.y);g.set(Ye,fe)}v.subVectors(g,m).multiplyScalar(i.rotateSpeed);const De=i.domElement;De&&(L(2*Math.PI*v.x/De.clientHeight),H(2*Math.PI*v.y/De.clientHeight)),m.copy(g)}function Be(ce){if(T.length==1)A.set(ce.pageX,ce.pageY);else{const De=st(ce),$e=.5*(ce.pageX+De.x),Ye=.5*(ce.pageY+De.y);A.set($e,Ye)}y.subVectors(A,p).multiplyScalar(i.panSpeed),U(y.x,y.y),p.copy(A)}function ae(ce){const De=st(ce),$e=ce.pageX-De.x,Ye=ce.pageY-De.y,fe=Math.sqrt($e*$e+Ye*Ye);S.set(0,fe),C.set(0,Math.pow(S.y/w.y,i.zoomSpeed)),X(C.y),w.copy(S)}function ie(ce){i.enableZoom&&ae(ce),i.enablePan&&Be(ce)}function be(ce){i.enableZoom&&ae(ce),i.enableRotate&&ye(ce)}function Re(ce){var De,$e;i.enabled!==!1&&(T.length===0&&((De=i.domElement)==null||De.ownerDocument.addEventListener("pointermove",ct),($e=i.domElement)==null||$e.ownerDocument.addEventListener("pointerup",se)),Oe(ce),ce.pointerType==="touch"?ke(ce):ee(ce))}function ct(ce){i.enabled!==!1&&(ce.pointerType==="touch"?We(ce):Ae(ce))}function se(ce){var De,$e,Ye;ft(ce),T.length===0&&((De=i.domElement)==null||De.releasePointerCapture(ce.pointerId),($e=i.domElement)==null||$e.ownerDocument.removeEventListener("pointermove",ct),(Ye=i.domElement)==null||Ye.ownerDocument.removeEventListener("pointerup",se)),i.dispatchEvent(o),l=a.NONE}function ee(ce){let De;switch(ce.button){case 0:De=i.mouseButtons.LEFT;break;case 1:De=i.mouseButtons.MIDDLE;break;case 2:De=i.mouseButtons.RIGHT;break;default:De=-1}switch(De){case na.DOLLY:if(i.enableZoom===!1)return;k(ce),l=a.DOLLY;break;case na.ROTATE:if(ce.ctrlKey||ce.metaKey||ce.shiftKey){if(i.enablePan===!1)return;V(ce),l=a.PAN}else{if(i.enableRotate===!1)return;$(ce),l=a.ROTATE}break;case na.PAN:if(ce.ctrlKey||ce.metaKey||ce.shiftKey){if(i.enableRotate===!1)return;$(ce),l=a.ROTATE}else{if(i.enablePan===!1)return;V(ce),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ae(ce){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Q(ce);break;case a.DOLLY:if(i.enableZoom===!1)return;j(ce);break;case a.PAN:if(i.enablePan===!1)return;oe(ce);break}}function Ue(ce){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ce.preventDefault(),i.dispatchEvent(s),xe(ce),i.dispatchEvent(o))}function Ce(ce){i.enabled===!1||i.enablePan===!1||pe(ce)}function ke(ce){switch(lt(ce),T.length){case 1:switch(i.touches.ONE){case vc.ROTATE:if(i.enableRotate===!1)return;de(),l=a.TOUCH_ROTATE;break;case vc.PAN:if(i.enablePan===!1)return;te(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case vc.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ue(),l=a.TOUCH_DOLLY_PAN;break;case vc.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ve(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function We(ce){switch(lt(ce),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;ye(ce),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Be(ce),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ie(ce),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;be(ce),i.update();break;default:l=a.NONE}}function Xe(ce){i.enabled!==!1&&ce.preventDefault()}function Oe(ce){T.push(ce)}function ft(ce){delete D[ce.pointerId];for(let De=0;De<T.length;De++)if(T[De].pointerId==ce.pointerId){T.splice(De,1);return}}function lt(ce){let De=D[ce.pointerId];De===void 0&&(De=new Se,D[ce.pointerId]=De),De.set(ce.pageX,ce.pageY)}function st(ce){const De=ce.pointerId===T[0].pointerId?T[1]:T[0];return D[De.pointerId]}t!==void 0&&this.connect(t),this.update()}},G1e=class extends $j{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=na.PAN,this.mouseButtons.RIGHT=na.ROTATE,this.touches.ONE=vc.PAN,this.touches.TWO=vc.DOLLY_ROTATE}};var H1e=Object.defineProperty,Q1e=(n,e,t)=>e in n?H1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ve=(n,e,t)=>(Q1e(n,typeof e!="symbol"?e+"":e,t),t);const $t={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},oi={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},Sn={x:0,y:0},go={camera:new He,gizmos:new He},Ei={type:"change"},Ra={type:"start"},Ho={type:"end"};let V1e=class extends Yr{constructor(e,t=null,i=null){super(),Ve(this,"camera"),Ve(this,"domElement"),Ve(this,"scene"),Ve(this,"mouseActions"),Ve(this,"_mouseOp"),Ve(this,"_v2_1"),Ve(this,"_v3_1"),Ve(this,"_v3_2"),Ve(this,"_m4_1"),Ve(this,"_m4_2"),Ve(this,"_quat"),Ve(this,"_translationMatrix"),Ve(this,"_rotationMatrix"),Ve(this,"_scaleMatrix"),Ve(this,"_rotationAxis"),Ve(this,"_cameraMatrixState"),Ve(this,"_cameraProjectionState"),Ve(this,"_fovState"),Ve(this,"_upState"),Ve(this,"_zoomState"),Ve(this,"_nearPos"),Ve(this,"_farPos"),Ve(this,"_gizmoMatrixState"),Ve(this,"_up0"),Ve(this,"_zoom0"),Ve(this,"_fov0"),Ve(this,"_initialNear"),Ve(this,"_nearPos0"),Ve(this,"_initialFar"),Ve(this,"_farPos0"),Ve(this,"_cameraMatrixState0"),Ve(this,"_gizmoMatrixState0"),Ve(this,"_button"),Ve(this,"_touchStart"),Ve(this,"_touchCurrent"),Ve(this,"_input"),Ve(this,"_switchSensibility"),Ve(this,"_startFingerDistance"),Ve(this,"_currentFingerDistance"),Ve(this,"_startFingerRotation"),Ve(this,"_currentFingerRotation"),Ve(this,"_devPxRatio"),Ve(this,"_downValid"),Ve(this,"_nclicks"),Ve(this,"_downEvents"),Ve(this,"_clickStart"),Ve(this,"_maxDownTime"),Ve(this,"_maxInterval"),Ve(this,"_posThreshold"),Ve(this,"_movementThreshold"),Ve(this,"_currentCursorPosition"),Ve(this,"_startCursorPosition"),Ve(this,"_grid"),Ve(this,"_gridPosition"),Ve(this,"_gizmos"),Ve(this,"_curvePts"),Ve(this,"_timeStart"),Ve(this,"_animationId"),Ve(this,"focusAnimationTime"),Ve(this,"_timePrev"),Ve(this,"_timeCurrent"),Ve(this,"_anglePrev"),Ve(this,"_angleCurrent"),Ve(this,"_cursorPosPrev"),Ve(this,"_cursorPosCurr"),Ve(this,"_wPrev"),Ve(this,"_wCurr"),Ve(this,"adjustNearFar"),Ve(this,"scaleFactor"),Ve(this,"dampingFactor"),Ve(this,"wMax"),Ve(this,"enableAnimations"),Ve(this,"enableGrid"),Ve(this,"cursorZoom"),Ve(this,"minFov"),Ve(this,"maxFov"),Ve(this,"enabled"),Ve(this,"enablePan"),Ve(this,"enableRotate"),Ve(this,"enableZoom"),Ve(this,"minDistance"),Ve(this,"maxDistance"),Ve(this,"minZoom"),Ve(this,"maxZoom"),Ve(this,"target"),Ve(this,"_currentTarget"),Ve(this,"_tbRadius"),Ve(this,"_state"),Ve(this,"onWindowResize",()=>{const r=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const c=this.calculateTbRadius(this.camera);c!==void 0&&(this._tbRadius=c)}const s=this._tbRadius/r,a=new Bh(0,0,s,s).getPoints(this._curvePts),l=new Gt().setFromPoints(a);for(const c in this._gizmos.children){const u=this._gizmos.children[c];u.geometry=l}this.dispatchEvent(Ei)}),Ve(this,"onContextMenu",r=>{if(this.enabled){for(let s=0;s<this.mouseActions.length;s++)if(this.mouseActions[s].mouse==2){r.preventDefault();break}}}),Ve(this,"onPointerCancel",()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=oi.NONE}),Ve(this,"onPointerDown",r=>{if(r.button==0&&r.isPrimary?(this._downValid=!0,this._downEvents.push(r)):this._downValid=!1,r.pointerType=="touch"&&this._input!=oi.CURSOR)switch(this._touchStart.push(r),this._touchCurrent.push(r),this._input){case oi.NONE:this._input=oi.ONE_FINGER,this.onSinglePanStart(r,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case oi.ONE_FINGER:case oi.ONE_FINGER_SWITCHED:this._input=oi.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case oi.TWO_FINGER:this._input=oi.MULT_FINGER,this.onTriplePanStart();break}else if(r.pointerType!="touch"&&this._input==oi.NONE){let s=null;r.ctrlKey||r.metaKey?s="CTRL":r.shiftKey&&(s="SHIFT"),this._mouseOp=this.getOpFromAction(r.button,s),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=oi.CURSOR,this._button=r.button,this.onSinglePanStart(r,this._mouseOp))}}),Ve(this,"onPointerMove",r=>{if(r.pointerType=="touch"&&this._input!=oi.CURSOR)switch(this._input){case oi.ONE_FINGER:this.updateTouchEvent(r),this.onSinglePanMove(r,$t.ROTATE);break;case oi.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],r)*this._devPxRatio>=this._switchSensibility){this._input=oi.ONE_FINGER,this.updateTouchEvent(r),this.onSinglePanStart(r,"ROTATE");break}break;case oi.TWO_FINGER:this.updateTouchEvent(r),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case oi.MULT_FINGER:this.updateTouchEvent(r),this.onTriplePanMove();break}else if(r.pointerType!="touch"&&this._input==oi.CURSOR){let s=null;r.ctrlKey||r.metaKey?s="CTRL":r.shiftKey&&(s="SHIFT");const o=this.getOpStateFromAction(this._button,s);o&&this.onSinglePanMove(r,o)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],r)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}),Ve(this,"onPointerUp",r=>{if(r.pointerType=="touch"&&this._input!=oi.CURSOR){const s=this._touchCurrent.length;for(let o=0;o<s;o++)if(this._touchCurrent[o].pointerId==r.pointerId){this._touchCurrent.splice(o,1),this._touchStart.splice(o,1);break}switch(this._input){case oi.ONE_FINGER:case oi.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=oi.NONE,this.onSinglePanEnd();break;case oi.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=oi.ONE_FINGER_SWITCHED;break;case oi.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=oi.NONE,this.onTriplePanEnd());break}}else r.pointerType!="touch"&&this._input==oi.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=oi.NONE,this.onSinglePanEnd(),this._button=-1);if(r.isPrimary)if(this._downValid)if(r.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{const o=r.timeStamp-this._clickStart,a=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;o<=this._maxInterval&&a<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(r)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}),Ve(this,"onWheel",r=>{var s,o;if(this.enabled&&this.enableZoom&&this.domElement){let a=null;r.ctrlKey||r.metaKey?a="CTRL":r.shiftKey&&(a="SHIFT");const l=this.getOpFromAction("WHEEL",a);if(l){r.preventDefault(),this.dispatchEvent(Ra);const c=125;let u=r.deltaY/c,f=1;switch(u>0?f=1/this.scaleFactor:u<0&&(f=this.scaleFactor),l){case"ZOOM":if(this.updateTbState($t.SCALE,!0),u>0?f=1/Math.pow(this.scaleFactor,u):u<0&&(f=Math.pow(this.scaleFactor,-u)),this.cursorZoom&&this.enablePan){let h;this.camera instanceof ti&&(h=(s=this.unprojectOnTbPlane(this.camera,r.clientX,r.clientY,this.domElement))==null?void 0:s.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)),this.camera instanceof mn&&(h=(o=this.unprojectOnTbPlane(this.camera,r.clientX,r.clientY,this.domElement))==null?void 0:o.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),h!==void 0&&this.applyTransformMatrix(this.applyScale(f,h))}else this.applyTransformMatrix(this.applyScale(f,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState($t.IDLE,!1),this.dispatchEvent(Ei),this.dispatchEvent(Ho);break;case"FOV":if(this.camera instanceof mn){this.updateTbState($t.FOV,!0),r.deltaX!=0&&(u=r.deltaX/c,f=1,u>0?f=1/Math.pow(this.scaleFactor,u):u<0&&(f=Math.pow(this.scaleFactor,-u))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const h=this._v3_1.distanceTo(this._gizmos.position);let d=h/f;d=jt.clamp(d,this.minDistance,this.maxDistance);const m=h*Math.tan(jt.DEG2RAD*this.camera.fov*.5);let g=jt.RAD2DEG*(Math.atan(m/d)*2);g>this.maxFov?g=this.maxFov:g<this.minFov&&(g=this.minFov);const v=m/Math.tan(jt.DEG2RAD*(g/2));f=h/v,this.setFov(g),this.applyTransformMatrix(this.applyScale(f,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState($t.IDLE,!1),this.dispatchEvent(Ei),this.dispatchEvent(Ho);break}}}}),Ve(this,"onSinglePanStart",(r,s)=>{if(this.enabled&&this.domElement)switch(this.dispatchEvent(Ra),this.setCenter(r.clientX,r.clientY),s){case"PAN":if(!this.enablePan)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Ei)),this.camera){this.updateTbState($t.PAN,!0);const o=this.unprojectOnTbPlane(this.camera,Sn.x,Sn.y,this.domElement);o!==void 0&&this._startCursorPosition.copy(o),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(Ei))}break;case"ROTATE":if(!this.enableRotate)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState($t.ROTATE,!0);const o=this.unprojectOnTbSurface(this.camera,Sn.x,Sn.y,this.domElement,this._tbRadius);o!==void 0&&this._startCursorPosition.copy(o),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(Ei);break;case"FOV":if(!this.enableZoom)return;this.camera instanceof mn&&(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Ei)),this.updateTbState($t.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(Sn.x,Sn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Ei)),this.updateTbState($t.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(Sn.x,Sn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}),Ve(this,"onSinglePanMove",(r,s)=>{if(this.enabled&&this.domElement){const o=s!=this._state;switch(this.setCenter(r.clientX,r.clientY),s){case $t.PAN:if(this.enablePan&&this.camera)if(o){this.dispatchEvent(Ho),this.dispatchEvent(Ra),this.updateTbState(s,!0);const a=this.unprojectOnTbPlane(this.camera,Sn.x,Sn.y,this.domElement);a!==void 0&&this._startCursorPosition.copy(a),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const a=this.unprojectOnTbPlane(this.camera,Sn.x,Sn.y,this.domElement);a!==void 0&&this._currentCursorPosition.copy(a),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case $t.ROTATE:if(this.enableRotate&&this.camera)if(o){this.dispatchEvent(Ho),this.dispatchEvent(Ra),this.updateTbState(s,!0);const a=this.unprojectOnTbSurface(this.camera,Sn.x,Sn.y,this.domElement,this._tbRadius);a!==void 0&&this._startCursorPosition.copy(a),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const a=this.unprojectOnTbSurface(this.camera,Sn.x,Sn.y,this.domElement,this._tbRadius);a!==void 0&&this._currentCursorPosition.copy(a);const l=this._startCursorPosition.distanceTo(this._currentCursorPosition),c=this._startCursorPosition.angleTo(this._currentCursorPosition),u=Math.max(l/this._tbRadius,c);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),u)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=u,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case $t.SCALE:if(this.enableZoom)if(o)this.dispatchEvent(Ho),this.dispatchEvent(Ra),this.updateTbState(s,!0),this._startCursorPosition.setY(this.getCursorNDC(Sn.x,Sn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(Sn.x,Sn.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*8):l>0&&(c=Math.pow(this.scaleFactor,l*8)),this.applyTransformMatrix(this.applyScale(c,this._gizmos.position))}break;case $t.FOV:if(this.enableZoom&&this.camera instanceof mn)if(o)this.dispatchEvent(Ho),this.dispatchEvent(Ra),this.updateTbState(s,!0),this._startCursorPosition.setY(this.getCursorNDC(Sn.x,Sn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(Sn.x,Sn.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*8):l>0&&(c=Math.pow(this.scaleFactor,l*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const u=this._v3_1.distanceTo(this._gizmos.position);let f=u/c;f=jt.clamp(f,this.minDistance,this.maxDistance);const h=u*Math.tan(jt.DEG2RAD*this._fovState*.5);let d=jt.RAD2DEG*(Math.atan(h/f)*2);d=jt.clamp(d,this.minFov,this.maxFov);const m=h/Math.tan(jt.DEG2RAD*(d/2));c=u/m,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.applyScale(c,this._v3_2,!1));const g=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(m/u);this._m4_1.makeTranslation(g.x,g.y,g.z)}break}this.dispatchEvent(Ei)}}),Ve(this,"onSinglePanEnd",()=>{if(this._state==$t.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const s=Math.abs((this._wPrev+this._wCurr)/2),o=this;this._animationId=window.requestAnimationFrame(function(a){o.updateTbState($t.ANIMATION_ROTATE,!0);const l=o.calculateRotationAxis(o._cursorPosPrev,o._cursorPosCurr);o.onRotationAnim(a,l,Math.min(s,o.wMax))})}else this.updateTbState($t.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Ei);else this.updateTbState($t.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Ei)}else(this._state==$t.PAN||this._state==$t.IDLE)&&(this.updateTbState($t.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(Ei));this.dispatchEvent(Ho)}),Ve(this,"onDoubleTap",r=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(Ra),this.setCenter(r.clientX,r.clientY);const s=this.unprojectOnObj(this.getCursorNDC(Sn.x,Sn.y,this.domElement),this.camera);if(s&&this.enableAnimations){const o=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(a){o.updateTbState($t.ANIMATION_FOCUS,!0),o.onFocusAnim(a,s,o._cameraMatrixState,o._gizmoMatrixState)})}else s&&!this.enableAnimations&&(this.updateTbState($t.FOCUS,!0),this.focus(s,this.scaleFactor),this.updateTbState($t.IDLE,!1),this.dispatchEvent(Ei))}this.dispatchEvent(Ho)}),Ve(this,"onDoublePanStart",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(Ra),this.updateTbState($t.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const r=this.unprojectOnTbPlane(this.camera,Sn.x,Sn.y,this.domElement,!0);r!==void 0&&this._startCursorPosition.copy(r),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}}),Ve(this,"onDoublePanMove",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=$t.PAN&&(this.updateTbState($t.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const r=this.unprojectOnTbPlane(this.camera,Sn.x,Sn.y,this.domElement,!0);r!==void 0&&this._currentCursorPosition.copy(r),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(Ei)}}),Ve(this,"onDoublePanEnd",()=>{this.updateTbState($t.IDLE,!1),this.dispatchEvent(Ho)}),Ve(this,"onRotateStart",()=>{var r;this.enabled&&this.enableRotate&&(this.dispatchEvent(Ra),this.updateTbState($t.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,(r=this.camera)==null||r.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}),Ve(this,"onRotateMove",()=>{var r;if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let s;this._state!=$t.ZROTATE&&(this.updateTbState($t.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?this.camera&&(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),s=(r=this.unprojectOnTbPlane(this.camera,Sn.x,Sn.y,this.domElement))==null?void 0:r.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):s=new F().setFromMatrixPosition(this._gizmoMatrixState);const o=jt.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);s!==void 0&&this.applyTransformMatrix(this.zRotate(s,o)),this.dispatchEvent(Ei)}}),Ve(this,"onRotateEnd",()=>{this.updateTbState($t.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Ho)}),Ve(this,"onPinchStart",()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(Ra),this.updateTbState($t.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}),Ve(this,"onPinchMove",()=>{var r,s;if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const o=12;this._state!=$t.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState($t.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),o*this._devPxRatio);const a=this._currentFingerDistance/this._startFingerDistance;let l;this.enablePan?this.camera instanceof ti?l=(r=this.unprojectOnTbPlane(this.camera,Sn.x,Sn.y,this.domElement))==null?void 0:r.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera instanceof mn&&(l=(s=this.unprojectOnTbPlane(this.camera,Sn.x,Sn.y,this.domElement))==null?void 0:s.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):l=this._gizmos.position,l!==void 0&&this.applyTransformMatrix(this.applyScale(a,l)),this.dispatchEvent(Ei)}}),Ve(this,"onPinchEnd",()=>{this.updateTbState($t.IDLE,!1),this.dispatchEvent(Ho)}),Ve(this,"onTriplePanStart",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(Ra),this.updateTbState($t.SCALE,!0);let r=0,s=0;const o=this._touchCurrent.length;for(let a=0;a<o;a++)r+=this._touchCurrent[a].clientX,s+=this._touchCurrent[a].clientY;this.setCenter(r/o,s/o),this._startCursorPosition.setY(this.getCursorNDC(Sn.x,Sn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}),Ve(this,"onTriplePanMove",()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let r=0,s=0;const o=this._touchCurrent.length;for(let v=0;v<o;v++)r+=this._touchCurrent[v].clientX,s+=this._touchCurrent[v].clientY;this.setCenter(r/o,s/o);const a=8;this._currentCursorPosition.setY(this.getCursorNDC(Sn.x,Sn.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*a):l>0&&(c=Math.pow(this.scaleFactor,l*a)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const u=this._v3_1.distanceTo(this._gizmos.position);let f=u/c;f=jt.clamp(f,this.minDistance,this.maxDistance);const h=u*Math.tan(jt.DEG2RAD*this._fovState*.5);let d=jt.RAD2DEG*(Math.atan(h/f)*2);d=jt.clamp(d,this.minFov,this.maxFov);const m=h/Math.tan(jt.DEG2RAD*(d/2));c=u/m,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.applyScale(c,this._v3_2,!1));const g=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(m/u);this._m4_1.makeTranslation(g.x,g.y,g.z),this.dispatchEvent(Ei)}}),Ve(this,"onTriplePanEnd",()=>{this.updateTbState($t.IDLE,!1),this.dispatchEvent(Ho)}),Ve(this,"setCenter",(r,s)=>{Sn.x=r,Sn.y=s}),Ve(this,"initializeMouseActions",()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}),Ve(this,"setMouseAction",(r,s,o=null)=>{const a=["PAN","ROTATE","ZOOM","FOV"],l=[0,1,2,"WHEEL"],c=["CTRL","SHIFT",null];let u;if(!a.includes(r)||!l.includes(s)||!c.includes(o)||s=="WHEEL"&&r!="ZOOM"&&r!="FOV")return!1;switch(r){case"PAN":u=$t.PAN;break;case"ROTATE":u=$t.ROTATE;break;case"ZOOM":u=$t.SCALE;break;case"FOV":u=$t.FOV;break}const f={operation:r,mouse:s,key:o,state:u};for(let h=0;h<this.mouseActions.length;h++)if(this.mouseActions[h].mouse==f.mouse&&this.mouseActions[h].key==f.key)return this.mouseActions.splice(h,1,f),!0;return this.mouseActions.push(f),!0}),Ve(this,"getOpFromAction",(r,s)=>{let o;for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==s)return o.operation;if(s){for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==null)return o.operation}return null}),Ve(this,"getOpStateFromAction",(r,s)=>{let o;for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==s)return o.state;if(s){for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==null)return o.state}return null}),Ve(this,"getAngle",(r,s)=>Math.atan2(s.clientY-r.clientY,s.clientX-r.clientX)*180/Math.PI),Ve(this,"updateTouchEvent",r=>{for(let s=0;s<this._touchCurrent.length;s++)if(this._touchCurrent[s].pointerId==r.pointerId){this._touchCurrent.splice(s,1,r);break}}),Ve(this,"calculateAngularSpeed",(r,s,o,a)=>{const l=s-r,c=(a-o)/1e3;return c==0?0:l/c}),Ve(this,"calculatePointersDistance",(r,s)=>Math.sqrt(Math.pow(s.clientX-r.clientX,2)+Math.pow(s.clientY-r.clientY,2))),Ve(this,"calculateRotationAxis",(r,s)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(r,s).applyQuaternion(this._quat),this._rotationAxis.normalize().clone())),Ve(this,"calculateTbRadius",r=>{const o=r.position.distanceTo(this._gizmos.position);if(r instanceof mn){const a=jt.DEG2RAD*r.fov*.5,l=Math.atan(r.aspect*Math.tan(a));return Math.tan(Math.min(a,l))*o*.67}else if(r instanceof ti)return Math.min(r.top,r.right)*.67}),Ve(this,"focus",(r,s,o=1)=>{if(this.camera){const a=r.clone();a.sub(this._gizmos.position).multiplyScalar(o),this._translationMatrix.makeTranslation(a.x,a.y,a.z);const l=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);const c=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(s,this._gizmos.position)),this._gizmoMatrixState.copy(l),this._cameraMatrixState.copy(c)}}),Ve(this,"drawGrid",()=>{if(this.scene){let o,a,l,c;if(this.camera instanceof ti){const u=this.camera.right-this.camera.left,f=this.camera.bottom-this.camera.top;l=Math.max(u,f),c=l/20,o=l/this.camera.zoom*3,a=o/c*this.camera.zoom}else if(this.camera instanceof mn){const u=this.camera.position.distanceTo(this._gizmos.position),f=jt.DEG2RAD*this.camera.fov*.5,h=Math.atan(this.camera.aspect*Math.tan(f));l=Math.tan(Math.max(f,h))*u*2,c=l/20,o=l*3,a=o/c}this._grid==null&&this.camera&&(this._grid=new gQ(o,a,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}),Ve(this,"connect",r=>{r===document&&console.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)}),Ve(this,"dispose",()=>{var r,s,o,a,l;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),(r=this.domElement)==null||r.removeEventListener("pointerdown",this.onPointerDown),(s=this.domElement)==null||s.removeEventListener("pointercancel",this.onPointerCancel),(o=this.domElement)==null||o.removeEventListener("wheel",this.onWheel),(a=this.domElement)==null||a.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),(l=this.scene)==null||l.remove(this._gizmos),this.disposeGrid()}),Ve(this,"disposeGrid",()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)}),Ve(this,"easeOutCubic",r=>1-Math.pow(1-r,3)),Ve(this,"activateGizmos",r=>{for(const s of this._gizmos.children)s.material.setValues({opacity:r?1:.6})}),Ve(this,"getCursorNDC",(r,s,o)=>{const a=o.getBoundingClientRect();return this._v2_1.setX((r-a.left)/a.width*2-1),this._v2_1.setY((a.bottom-s)/a.height*2-1),this._v2_1.clone()}),Ve(this,"getCursorPosition",(r,s,o)=>(this._v2_1.copy(this.getCursorNDC(r,s,o)),this.camera instanceof ti&&(this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5),this._v2_1.clone())),Ve(this,"setCamera",r=>{if(r){r.lookAt(this.target),r.updateMatrix(),r instanceof mn&&(this._fov0=r.fov,this._fovState=r.fov),this._cameraMatrixState0.copy(r.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(r.projectionMatrix),this._zoom0=r.zoom,this._zoomState=this._zoom0,this._initialNear=r.near,this._nearPos0=r.position.distanceTo(this.target)-r.near,this._nearPos=this._initialNear,this._initialFar=r.far,this._farPos0=r.position.distanceTo(this.target)-r.far,this._farPos=this._initialFar,this._up0.copy(r.up),this._upState.copy(r.up),this.camera=r,this.camera.updateProjectionMatrix();const s=this.calculateTbRadius(r);s!==void 0&&(this._tbRadius=s),this.makeGizmos(this.target,this._tbRadius)}}),Ve(this,"makeGizmos",(r,s)=>{const a=new Bh(0,0,s,s).getPoints(this._curvePts),l=new Gt().setFromPoints(a),c=new tr({color:16744576,fog:!1,transparent:!0,opacity:.6}),u=new tr({color:8454016,fog:!1,transparent:!0,opacity:.6}),f=new tr({color:8421631,fog:!1,transparent:!0,opacity:.6}),h=new vn(l,c),d=new vn(l,u),m=new vn(l,f),g=Math.PI*.5;if(h.rotation.x=g,d.rotation.y=g,this._gizmoMatrixState0.identity().setPosition(r),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&this.camera.zoom!=1){const v=1/this.camera.zoom;this._scaleMatrix.makeScale(v,v,v),this._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(r.x,r.y,r.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(h),this._gizmos.add(d),this._gizmos.add(m)}),Ve(this,"onFocusAnim",(r,s,o,a)=>{if(this._timeStart==-1&&(this._timeStart=r),this._state==$t.ANIMATION_FOCUS){const c=(r-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(a),c>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(s,this.scaleFactor),this._timeStart=-1,this.updateTbState($t.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Ei);else{const u=this.easeOutCubic(c),f=1-u+this.scaleFactor*u;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(s,f,u),this.dispatchEvent(Ei);const h=this;this._animationId=window.requestAnimationFrame(function(d){h.onFocusAnim(d,s,o,a.clone())})}}else this._animationId=-1,this._timeStart=-1}),Ve(this,"onRotationAnim",(r,s,o)=>{if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=r),this._state==$t.ANIMATION_ROTATE){const a=(r-this._timeStart)/1e3;if(o+-this.dampingFactor*a>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(a,2)+o*a+0,this.applyTransformMatrix(this.rotate(s,this._angleCurrent)),this.dispatchEvent(Ei);const c=this;this._animationId=window.requestAnimationFrame(function(u){c.onRotationAnim(u,s,o)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState($t.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Ei)}else this._animationId=-1,this._timeStart=-1,this._state!=$t.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(Ei))}),Ve(this,"pan",(r,s,o=!1)=>{if(this.camera){const a=r.clone().sub(s);if(this.camera instanceof ti&&a.multiplyScalar(1/this.camera.zoom),this.camera instanceof mn&&o){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const l=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);a.multiplyScalar(1/l)}this._v3_1.set(a.x,a.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return go}),Ve(this,"reset",()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera instanceof mn&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const r=this.calculateTbRadius(this.camera);r!==void 0&&(this._tbRadius=r),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState($t.IDLE,!1),this.dispatchEvent(Ei)}}),Ve(this,"rotate",(r,s)=>{const o=this._gizmos.position;return this._translationMatrix.makeTranslation(-o.x,-o.y,-o.z),this._rotationMatrix.makeRotationAxis(r,-s),this._m4_1.makeTranslation(o.x,o.y,o.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),go}),Ve(this,"copyState",()=>{if(this.camera){const r=JSON.stringify(this.camera instanceof ti?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(r)}}),Ve(this,"pasteState",()=>{const r=this;navigator.clipboard.readText().then(function(o){r.setStateFromJSON(o)})}),Ve(this,"saveState",()=>{this.camera&&(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera instanceof mn&&(this._fov0=this.camera.fov))}),Ve(this,"applyScale",(r,s,o=!0)=>{if(!this.camera)return;const a=s.clone();let l=1/r;if(this.camera instanceof ti){this.camera.zoom=this._zoomState,this.camera.zoom*=r,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,l=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,l=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(l,l,l),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),a.sub(this._v3_1);const c=a.clone().multiplyScalar(l);return a.sub(c),this._m4_1.makeTranslation(a.x,a.y,a.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),go}if(this.camera instanceof mn){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let c=this._v3_1.distanceTo(a),u=c-c*l;const f=c-u;f<this.minDistance?(l=this.minDistance/c,u=c-c*l):f>this.maxDistance&&(l=this.maxDistance/c,u=c-c*l);let h=a.clone().sub(this._v3_1).normalize().multiplyScalar(u);if(this._m4_1.makeTranslation(h.x,h.y,h.z),o){const d=this._v3_2;c=d.distanceTo(a),u=c-c*l,h=a.clone().sub(this._v3_2).normalize().multiplyScalar(u),this._translationMatrix.makeTranslation(d.x,d.y,d.z),this._scaleMatrix.makeScale(l,l,l),this._m4_2.makeTranslation(h.x,h.y,h.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-d.x,-d.y,-d.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return go}}),Ve(this,"setFov",r=>{this.camera instanceof mn&&(this.camera.fov=jt.clamp(r,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}),Ve(this,"setTarget",(r,s,o)=>{if(this.camera){this.target.set(r,s,o),this._gizmos.position.set(r,s,o);const a=this.calculateTbRadius(this.camera);a!==void 0&&(this._tbRadius=a),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}}),Ve(this,"zRotate",(r,s)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,s),this._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),this._m4_1.makeTranslation(r.x,r.y,r.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(r),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,s),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),go)),Ve(this,"unprojectOnObj",(r,s)=>{if(!this.scene)return null;const o=new Ef;o.near=s.near,o.far=s.far,o.setFromCamera(r,s);const a=o.intersectObjects(this.scene.children,!0);for(let l=0;l<a.length;l++)if(a[l].object.uuid!=this._gizmos.uuid&&a[l].face)return a[l].point.clone();return null}),Ve(this,"unprojectOnTbSurface",(r,s,o,a,l)=>{if(r instanceof ti){this._v2_1.copy(this.getCursorPosition(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const c=Math.pow(this._v2_1.x,2),u=Math.pow(this._v2_1.y,2),f=Math.pow(this._tbRadius,2);return c+u<=f*.5?this._v3_1.setZ(Math.sqrt(f-(c+u))):this._v3_1.setZ(f*.5/Math.sqrt(c+u)),this._v3_1}if(r instanceof mn){this._v2_1.copy(this.getCursorNDC(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(r.projectionMatrixInverse);const c=this._v3_1.clone().normalize(),u=r.position.distanceTo(this._gizmos.position),f=Math.pow(l,2),h=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(d==0)return c.set(this._v3_1.x,this._v3_1.y,l),c;const m=h/d,g=u;let v=Math.pow(m,2)+1,p=2*m*g,A=Math.pow(g,2)-f,y=Math.pow(p,2)-4*v*A;if(y>=0&&(this._v2_1.setX((-p-Math.sqrt(y))/(2*v)),this._v2_1.setY(m*this._v2_1.x+g),jt.RAD2DEG*this._v2_1.angle()>=45)){const C=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(C),c.z+=u,c}v=m,p=g,A=-f*.5,y=Math.pow(p,2)-4*v*A,this._v2_1.setX((-p-Math.sqrt(y))/(2*v)),this._v2_1.setY(m*this._v2_1.x+g);const w=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(w),c.z+=u,c}}),Ve(this,"unprojectOnTbPlane",(r,s,o,a,l=!1)=>{if(r instanceof ti)return this._v2_1.copy(this.getCursorPosition(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(r instanceof mn){this._v2_1.copy(this.getCursorNDC(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(r.projectionMatrixInverse);const c=this._v3_1.clone().normalize(),u=this._v3_1.z,f=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let h;if(l?h=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):h=r.position.distanceTo(this._gizmos.position),f==0)return c.set(0,0,0),c;const d=u/f,m=h,g=-m/d,v=Math.sqrt(Math.pow(m,2)+Math.pow(g,2));return c.multiplyScalar(v),c.z=0,c}}),Ve(this,"updateMatrixState",()=>{this.camera&&(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera instanceof ti&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera instanceof mn&&(this._fovState=this.camera.fov))}),Ve(this,"updateTbState",(r,s)=>{this._state=r,s&&this.updateMatrixState()}),Ve(this,"update",()=>{if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const s=this.calculateTbRadius(this.camera);s!==void 0&&(this._tbRadius=s),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(this.camera){if(this.camera instanceof ti&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const s=jt.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(s/this.camera.zoom,this._gizmos.position,!0))}if(this.camera instanceof mn){const s=this.camera.position.distanceTo(this._gizmos.position);if(s>this.maxDistance+1e-6||s<this.minDistance-1e-6){const l=jt.clamp(s,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(l/s,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=jt.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const o=this._tbRadius,a=this.calculateTbRadius(this.camera);if(a!==void 0&&(this._tbRadius=a),o<this._tbRadius-1e-6||o>this._tbRadius+1e-6){const l=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,c=this._tbRadius/l,f=new Bh(0,0,c,c).getPoints(this._curvePts),h=new Gt().setFromPoints(f);for(const d in this._gizmos.children){const m=this._gizmos.children[d];m.geometry=h}}}this.camera.lookAt(this._gizmos.position)}}),Ve(this,"setStateFromJSON",r=>{const s=JSON.parse(r);if(s.arcballState&&this.camera){this._cameraMatrixState.fromArray(s.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(s.arcballState.cameraUp),this.camera.near=s.arcballState.cameraNear,this.camera.far=s.arcballState.cameraFar,this.camera.zoom=s.arcballState.cameraZoom,this.camera instanceof mn&&(this.camera.fov=s.arcballState.cameraFov),this._gizmoMatrixState.fromArray(s.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const o=this.calculateTbRadius(this.camera);o!==void 0&&(this._tbRadius=o);const a=new He().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(a),this.camera.lookAt(this._gizmos.position),this.updateTbState($t.IDLE,!1),this.dispatchEvent(Ei)}}),this.camera=null,this.domElement=t,this.scene=i,this.mouseActions=[],this._mouseOp=null,this._v2_1=new Se,this._v3_1=new F,this._v3_2=new F,this._m4_1=new He,this._m4_2=new He,this._quat=new Lt,this._translationMatrix=new He,this._rotationMatrix=new He,this._scaleMatrix=new He,this._rotationAxis=new F,this._cameraMatrixState=new He,this._cameraProjectionState=new He,this._fovState=1,this._upState=new F,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new He,this._up0=new F,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new He,this._gizmoMatrixState0=new He,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=oi.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new F,this._startCursorPosition=new F,this._grid=null,this._gridPosition=new F,this._gizmos=new qs,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new F,this._cursorPosCurr=new F,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new F(0,0,0),this._currentTarget=new F(0,0,0),this._tbRadius=1,this._state=$t.IDLE,this.setCamera(e),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(e){if(e!=null&&e.camera&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==$t.ROTATE||this._state==$t.ZROTATE||this._state==$t.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),e!=null&&e.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==$t.SCALE||this._state==$t.FOCUS||this._state==$t.ANIMATION_FOCUS)&&this.camera){const t=this.calculateTbRadius(this.camera);if(t!==void 0&&(this._tbRadius=t),this.adjustNearFar){const i=this.camera.position.distanceTo(this._gizmos.position),r=new Gn;r.setFromObject(this._gizmos);const s=new Bi;r.getBoundingSphere(s);const o=Math.max(this._nearPos0,s.radius+s.center.length()),a=i-this._initialNear,l=Math.min(o,a);this.camera.near=i-l;const c=Math.min(this._farPos0,-s.radius+s.center.length()),u=i-this._initialFar,f=Math.min(c,u);this.camera.far=i-f,this.camera.updateProjectionMatrix()}else{let i=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,i=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,i=!0),i&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(Ei)}setTransformationMatrices(e=null,t=null){e?go.camera?go.camera.copy(e):go.camera=e.clone():go.camera=null,t?go.gizmos?go.gizmos.copy(t):go.gizmos=t.clone():go.gizmos=null}};var j1e=Object.defineProperty,W1e=(n,e,t)=>e in n?j1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mi=(n,e,t)=>(W1e(n,typeof e!="symbol"?e+"":e,t),t);function qF(n){n.preventDefault()}let Y1e=class extends Yr{constructor(e,t){super(),mi(this,"object"),mi(this,"domElement",null),mi(this,"movementSpeed",1),mi(this,"rollSpeed",.005),mi(this,"dragToLook",!1),mi(this,"autoForward",!1),mi(this,"changeEvent",{type:"change"}),mi(this,"EPS",1e-6),mi(this,"tmpQuaternion",new Lt),mi(this,"mouseStatus",0),mi(this,"movementSpeedMultiplier",1),mi(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),mi(this,"moveVector",new F(0,0,0)),mi(this,"rotationVector",new F(0,0,0)),mi(this,"keydown",i=>{if(!i.altKey){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}}),mi(this,"keyup",i=>{switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}),mi(this,"pointerdown",i=>{if(this.dragToLook)this.mouseStatus++;else{switch(i.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}),mi(this,"pointermove",i=>{if(!this.dragToLook||this.mouseStatus>0){const r=this.getContainerDimensions(),s=r.size[0]/2,o=r.size[1]/2;this.moveState.yawLeft=-(i.pageX-r.offset[0]-s)/s,this.moveState.pitchDown=(i.pageY-r.offset[1]-o)/o,this.updateRotationVector()}}),mi(this,"pointerup",i=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(i.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}),mi(this,"lastQuaternion",new Lt),mi(this,"lastPosition",new F),mi(this,"update",i=>{const r=i*this.movementSpeed,s=i*this.rollSpeed;this.object.translateX(this.moveVector.x*r),this.object.translateY(this.moveVector.y*r),this.object.translateZ(this.moveVector.z*r),this.tmpQuaternion.set(this.rotationVector.x*s,this.rotationVector.y*s,this.rotationVector.z*s,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),mi(this,"updateMovementVector",()=>{const i=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-i+this.moveState.back}),mi(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),mi(this,"getContainerDimensions",()=>this.domElement!=document&&!(this.domElement instanceof Document)?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}),mi(this,"connect",i=>{this.domElement=i,i instanceof Document||i.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",qF),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),mi(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",qF),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=e,t!==void 0&&this.connect(t),this.updateMovementVector(),this.updateRotationVector()}};var X1e=Object.defineProperty,q1e=(n,e,t)=>e in n?X1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Eh=(n,e,t)=>(q1e(n,typeof e!="symbol"?e+"":e,t),t);class pw{constructor(){Eh(this,"enabled",!0),Eh(this,"needsSwap",!0),Eh(this,"clear",!1),Eh(this,"renderToScreen",!1)}setSize(e,t){}render(e,t,i,r,s){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class xc{constructor(e){Eh(this,"camera",new ti(-1,1,1,-1,0,1)),Eh(this,"geometry",new br(2,2)),Eh(this,"mesh"),this.mesh=new gt(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}var J1e=Object.defineProperty,K1e=(n,e,t)=>e in n?J1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tx=(n,e,t)=>(K1e(n,typeof e!="symbol"?e+"":e,t),t);class _6 extends pw{constructor(e,t="tDiffuse"){super(),tx(this,"textureID"),tx(this,"uniforms"),tx(this,"material"),tx(this,"fsQuad"),this.textureID=t,e instanceof Wn?(this.uniforms=e.uniforms,this.material=e):(this.uniforms=va.clone(e.uniforms),this.material=new Wn({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new xc(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}const JF={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};var $1e=Object.defineProperty,Z1e=(n,e,t)=>e in n?$1e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bC=(n,e,t)=>(Z1e(n,typeof e!="symbol"?e+"":e,t),t);class KF extends pw{constructor(e,t){super(),bC(this,"scene"),bC(this,"camera"),bC(this,"inverse"),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class ege extends pw{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}var tge=Object.defineProperty,nge=(n,e,t)=>e in n?tge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qo=(n,e,t)=>(nge(n,typeof e!="symbol"?e+"":e,t),t);class ige{constructor(e,t){if(Qo(this,"renderer"),Qo(this,"_pixelRatio"),Qo(this,"_width"),Qo(this,"_height"),Qo(this,"renderTarget1"),Qo(this,"renderTarget2"),Qo(this,"writeBuffer"),Qo(this,"readBuffer"),Qo(this,"renderToScreen"),Qo(this,"passes",[]),Qo(this,"copyPass"),Qo(this,"clock"),this.renderer=e,t===void 0){const i={minFilter:Xt,magFilter:Xt,format:Vn},r=e.getSize(new Se);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,t=new Qn(this._width*this._pixelRatio,this._height*this._pixelRatio,i),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,JF===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),_6===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new _6(JF),this.copyPass.material.blending=pa,this.clock=new d0}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;const r=this.passes.length;for(let s=0;s<r;s++){const o=this.passes[s];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}KF!==void 0&&(o instanceof KF?i=!0:o instanceof ege&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Se);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}var rge=Object.defineProperty,sge=(n,e,t)=>e in n?rge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$f=(n,e,t)=>(sge(n,typeof e!="symbol"?e+"":e,t),t);class oge extends pw{constructor(e,t,i,r,s=0){super(),$f(this,"scene"),$f(this,"camera"),$f(this,"overrideMaterial"),$f(this,"clearColor"),$f(this,"clearAlpha"),$f(this,"clearDepth",!1),$f(this,"_oldClearColor",new et),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.needsSwap=!1}render(e,t,i){let r=e.autoClear;e.autoClear=!1;let s,o=null;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=r}}function $m(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const wh="srgb",Mc="srgb-linear",$F=3001,age=3e3;class Q8 extends nr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new hge(t)}),this.register(function(t){return new dge(t)}),this.register(function(t){return new Ege(t)}),this.register(function(t){return new wge(t)}),this.register(function(t){return new Sge(t)}),this.register(function(t){return new mge(t)}),this.register(function(t){return new gge(t)}),this.register(function(t){return new Age(t)}),this.register(function(t){return new vge(t)}),this.register(function(t){return new fge(t)}),this.register(function(t){return new yge(t)}),this.register(function(t){return new pge(t)}),this.register(function(t){return new _ge(t)}),this.register(function(t){return new xge(t)}),this.register(function(t){return new cge(t)}),this.register(function(t){return new Cge(t)}),this.register(function(t){return new bge(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=bc.extractUrlBase(e);o=bc.resolveURL(c,this.path)}else o=bc.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ji(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if($m(new Uint8Array(e.slice(0,4)))===Zj){try{o[Un.KHR_BINARY_GLTF]=new Mge(e)}catch(u){r&&r(u);return}s=JSON.parse(o[Un.KHR_BINARY_GLTF].content)}else s=JSON.parse($m(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Nge(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case Un.KHR_MATERIALS_UNLIT:o[u]=new uge;break;case Un.KHR_DRACO_MESH_COMPRESSION:o[u]=new Ige(s,this.dracoLoader);break;case Un.KHR_TEXTURE_TRANSFORM:o[u]=new Tge;break;case Un.KHR_MESH_QUANTIZATION:o[u]=new Bge;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function lge(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Un={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class cge{constructor(e){this.parser=e,this.name=Un.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new et(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Mc);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new kE(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new FA(u),c.distance=f;break;case"spot":c=new UE(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,gc(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class uge{constructor(){this.name=Un.KHR_MATERIALS_UNLIT}getMaterialType(){return Ir}extendParams(e,t,i){const r=[];e.color=new et(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Mc),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,wh))}return Promise.all(r)}}class fge{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class hge{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Se(a,a)}return Promise.all(s)}}class dge{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class pge{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class mge{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new et(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Mc)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,wh)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class gge{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Age{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new et().setRGB(a[0],a[1],a[2],Mc),Promise.all(s)}}class vge{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class yge{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new et().setRGB(a[0],a[1],a[2],Mc),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,wh)),Promise.all(s)}}class xge{constructor(e){this.parser=e,this.name=Un.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class _ge{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Ege{constructor(e){this.parser=e,this.name=Un.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class wge{constructor(e){this.parser=e,this.name=Un.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Sge{constructor(e){this.parser=e,this.name=Un.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Cge{constructor(e){this.name=Un.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,f=r.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,h,r.mode,r.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(d),u,f,h,r.mode,r.filter),d})})}else return null}}class bge{constructor(e){this.name=Un.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Yo.TRIANGLES&&c.mode!==Yo.TRIANGLE_STRIP&&c.mode!==Yo.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],h=c[0].count,d=[];for(const m of f){const g=new He,v=new F,p=new Lt,A=new F(1,1,1),y=new cv(m.geometry,m.material,h);for(let w=0;w<h;w++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&p.fromBufferAttribute(l.ROTATION,w),l.SCALE&&A.fromBufferAttribute(l.SCALE,w),y.setMatrixAt(w,g.compose(v,p,A));for(const w in l)if(w==="_COLOR_0"){const S=l[w];y.instanceColor=new el(S.array,S.itemSize,S.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&m.geometry.setAttribute(w,l[w]);Jt.prototype.copy.call(y,m),this.parser.assignFinalMaterial(y),d.push(y)}return u.isGroup?(u.clear(),u.add(...d),u):d[0]}))}}const Zj="glTF",B1=12,ZF={JSON:1313821514,BIN:5130562};class Mge{constructor(e){this.name=Un.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,B1);if(this.header={magic:$m(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Zj)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-B1,r=new DataView(e,B1);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===ZF.JSON){const l=new Uint8Array(e,B1+s,o);this.content=$m(l)}else if(a===ZF.BIN){const l=B1+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Ige{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Un.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=E6[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=E6[u]||u.toLowerCase();if(o[u]!==void 0){const h=i.accessors[e.attributes[u]],d=Im[h.componentType];c[f]=d.name,l[f]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f,h){r.decodeDracoFile(u,function(d){for(const m in d.attributes){const g=d.attributes[m],v=l[m];v!==void 0&&(g.normalized=v)}f(d)},a,c,Mc,h)})})}}class Tge{constructor(){this.name=Un.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Bge{constructor(){this.name=Un.KHR_MESH_QUANTIZATION}}class eW extends h0{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-t,f=(i-t)/u,h=f*f,d=h*f,m=e*c,g=m-c,v=-2*d+3*h,p=d-h,A=1-v,y=p-h+f;for(let w=0;w!==a;w++){const S=o[g+w+a],C=o[g+w+l]*u,b=o[m+w+a],M=o[m+w]*u;s[w]=A*S+y*C+v*b+p*M}return s}}const Pge=new Lt;class Rge extends eW{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return Pge.fromArray(s).normalize().toArray(s),s}}const Yo={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Im={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},eO={9728:dn,9729:Xt,9984:SA,9985:lE,9986:ym,9987:bo},tO={33071:li,33648:Nm,10497:Wr},MC={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},E6={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Nj>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},hu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Dge={CUBICSPLINE:void 0,LINEAR:Qh,STEP:Gm},IC={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Lge(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new rd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Rs})),n.DefaultMaterial}function Zf(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function gc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Fge(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(i){const h=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(h)}if(r){const h=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],h=c[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function Oge(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function zge(n){let e;const t=n.extensions&&n.extensions[Un.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+TC(t.attributes):e=n.indices+":"+TC(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+TC(n.targets[i]);return e}function TC(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function w6(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Uge(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const kge=new He;class Nge{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new lge,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new kl(this.options.manager):this.textureLoader=new aQ(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ji(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Zf(s,a,r),gc(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Un.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(bc.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=MC[r.type],a=Im[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new qt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=MC[r.type],c=Im[r.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,h=r.byteOffset||0,d=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,m=r.normalized===!0;let g,v;if(d&&d!==f){const p=Math.floor(h/d),A="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count;let y=t.cache.get(A);y||(g=new c(a,p*d,r.count*d/u),y=new av(g,d/u),t.cache.add(A,y)),v=new Js(y,l,h%d/u,m)}else a===null?g=new c(r.count*l):g=new c(a,h,r.count*l),v=new qt(g,l,m);if(r.sparse!==void 0){const p=MC.SCALAR,A=Im[r.sparse.indices.componentType],y=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,S=new A(o[1],y,r.sparse.count*p),C=new c(o[2],w,r.sparse.count*l);a!==null&&(v=new qt(v.array.slice(),v.itemSize,v.normalized));for(let b=0,M=S.length;b<M;b++){const I=S[b];if(v.setX(I,C[b*l]),l>=2&&v.setY(I,C[b*l+1]),l>=3&&v.setZ(I,C[b*l+2]),l>=4&&v.setW(I,C[b*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=eO[h.magFilter]||Xt,u.minFilter=eO[h.minFilter]||bo,u.wrapS=tO[h.wrapS]||Wr,u.wrapT=tO[h.wrapT]||Wr,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const h=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(h,d){let m=h;t.isImageBitmapLoader===!0&&(m=function(g){const v=new Nn(g);v.needsUpdate=!0,h(v)}),t.load(bc.resolveURL(f,s.path),m,void 0,d)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),gc(f,o),f.userData.mimeType=o.mimeType||Uge(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Un.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Un.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Un.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===$F?wh:Mc),"colorSpace"in o?o.colorSpace=r:o.encoding=r===wh?$F:age),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new uv,ur.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new tr,ur.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return rd}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Un.KHR_MATERIALS_UNLIT]){const f=r[Un.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new et(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Mc),a.opacity=h[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,wh)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=ni);const u=s.alphaMode||IC.OPAQUE;if(u===IC.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===IC.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ir&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Se(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==Ir&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ir){const f=s.emissiveFactor;a.emissive=new et().setRGB(f[0],f[1],f[2],Mc)}return s.emissiveTexture!==void 0&&o!==Ir&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,wh)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),gc(f,s),t.associations.set(f,{materials:e}),s.extensions&&Zf(r,f,s),f})}createUniqueName(e){const t=Dn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Un.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return nO(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=zge(c),f=r[u];if(f)o.push(f.promise);else{let h;c.extensions&&c.extensions[Un.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=nO(new Gt,c,t),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?Lge(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let d=0,m=u.length;d<m;d++){const g=u[d],v=o[d];let p;const A=c[d];if(v.mode===Yo.TRIANGLES||v.mode===Yo.TRIANGLE_STRIP||v.mode===Yo.TRIANGLE_FAN||v.mode===void 0)p=s.isSkinnedMesh===!0?new lv(g,A):new gt(g,A),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),v.mode===Yo.TRIANGLE_STRIP?p.geometry=VF(p.geometry,gT):v.mode===Yo.TRIANGLE_FAN&&(p.geometry=VF(p.geometry,a3));else if(v.mode===Yo.LINES)p=new rl(g,A);else if(v.mode===Yo.LINE_STRIP)p=new vn(g,A);else if(v.mode===Yo.LINE_LOOP)p=new bT(g,A);else if(v.mode===Yo.POINTS)p=new MT(g,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(p.geometry.morphAttributes).length>0&&Oge(p,s),p.name=t.createUniqueName(s.name||"mesh_"+e),gc(p,s),v.extensions&&Zf(r,p,v),t.assignFinalMaterial(p),f.push(p)}for(let d=0,m=f.length;d<m;d++)t.associations.set(f[d],{meshes:e,primitives:d});if(f.length===1)return s.extensions&&Zf(r,f[0],s),f[0];const h=new qs;s.extensions&&Zf(r,h,s),t.associations.set(h,{meshes:e});for(let d=0,m=f.length;d<m;d++)h.add(f[d]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new mn(jt.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new ti(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),gc(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const h=new He;s!==null&&h.fromArray(s.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new f0(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let f=0,h=r.channels.length;f<h;f++){const d=r.channels[f],m=r.samplers[d.sampler],g=d.target,v=g.node,p=r.parameters!==void 0?r.parameters[m.input]:m.input,A=r.parameters!==void 0?r.parameters[m.output]:m.output;g.node!==void 0&&(o.push(this.getDependency("node",v)),a.push(this.getDependency("accessor",p)),l.push(this.getDependency("accessor",A)),c.push(m),u.push(g))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const h=f[0],d=f[1],m=f[2],g=f[3],v=f[4],p=[];for(let A=0,y=h.length;A<y;A++){const w=h[A],S=d[A],C=m[A],b=g[A],M=v[A];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const I=i._createAnimationTracks(w,S,C,b,M);if(I)for(let T=0;T<I.length;T++)p.push(I[T])}return new cf(s,void 0,p)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],h=c[2];h!==null&&u.traverse(function(d){d.isSkinnedMesh&&d.bind(h,kge)});for(let d=0,m=f.length;d<m;d++)u.add(f[d]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new Vm:c.length>1?u=new qs:c.length===1?u=c[0]:u=new Jt,u!==c[0])for(let f=0,h=c.length;f<h;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),gc(u,s),s.extensions&&Zf(i,u,s),s.matrix!==void 0){const f=new He;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new qs;i.name&&(s.name=r.createUniqueName(i.name)),gc(s,i),i.extensions&&Zf(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[h,d]of r.associations)(h instanceof ur||h instanceof Nn)&&f.set(h,d);return u.traverse(h=>{const d=r.associations.get(h);d!=null&&f.set(h,d)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];hu[s.path]===hu.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch(hu[s.path]){case hu.weights:c=lf;break;case hu.rotation:c=Ul;break;case hu.position:case hu.scale:c=Oc;break;default:switch(i.itemSize){case 1:c=lf;break;case 2:case 3:default:c=Oc;break}break}const u=r.interpolation!==void 0?Dge[r.interpolation]:Qh,f=this._getArrayFromAccessor(i);for(let h=0,d=l.length;h<d;h++){const m=new c(l[h]+"."+hu[s.path],t.array,f,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=w6(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof Ul?Rge:eW;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Gge(n,e,t){const i=e.attributes,r=new Gn;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new F(l[0],l[1],l[2]),new F(c[0],c[1],c[2])),a.normalized){const u=w6(Im[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new F,l=new F;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const h=t.json.accessors[f.POSITION],d=h.min,m=h.max;if(d!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(m[2]))),h.normalized){const g=w6(Im[h.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Bi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function nO(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=E6[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return gc(n,e),Gge(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Fge(n,e.targets,t):n})}class Hge extends Gt{constructor(e,t,i,r){super();const s=[],o=[],a=[],l=new F,c=new He;c.makeRotationFromEuler(i),c.setPosition(t);const u=new He;u.copy(c).invert(),f(),this.setAttribute("position",new Et(s,3)),this.setAttribute("normal",new Et(o,3)),this.setAttribute("uv",new Et(a,2));function f(){let g,v=[];const p=new F,A=new F;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const y=e.geometry,w=y.attributes.position,S=y.attributes.normal;if(y.index!==null){const C=y.index;for(g=0;g<C.count;g++)p.fromBufferAttribute(w,C.getX(g)),A.fromBufferAttribute(S,C.getX(g)),h(v,p,A)}else for(g=0;g<w.count;g++)p.fromBufferAttribute(w,g),A.fromBufferAttribute(S,g),h(v,p,A);for(v=d(v,l.set(1,0,0)),v=d(v,l.set(-1,0,0)),v=d(v,l.set(0,1,0)),v=d(v,l.set(0,-1,0)),v=d(v,l.set(0,0,1)),v=d(v,l.set(0,0,-1)),g=0;g<v.length;g++){const C=v[g];a.push(.5+C.position.x/r.x,.5+C.position.y/r.y),C.position.applyMatrix4(c),s.push(C.position.x,C.position.y,C.position.z),o.push(C.normal.x,C.normal.y,C.normal.z)}}function h(g,v,p){v.applyMatrix4(e.matrixWorld),v.applyMatrix4(u),p.transformDirection(e.matrixWorld),g.push(new iO(v.clone(),p.clone()))}function d(g,v){const p=[],A=.5*Math.abs(r.dot(v));for(let y=0;y<g.length;y+=3){let w,S,C,b=0,M,I,T,D;const R=g[y+0].position.dot(v)-A,z=g[y+1].position.dot(v)-A,L=g[y+2].position.dot(v)-A;switch(w=R>0,S=z>0,C=L>0,b=(w?1:0)+(S?1:0)+(C?1:0),b){case 0:{p.push(g[y]),p.push(g[y+1]),p.push(g[y+2]);break}case 1:{if(w&&(M=g[y+1],I=g[y+2],T=m(g[y],M,v,A),D=m(g[y],I,v,A)),S){M=g[y],I=g[y+2],T=m(g[y+1],M,v,A),D=m(g[y+1],I,v,A),p.push(T),p.push(I.clone()),p.push(M.clone()),p.push(I.clone()),p.push(T.clone()),p.push(D);break}C&&(M=g[y],I=g[y+1],T=m(g[y+2],M,v,A),D=m(g[y+2],I,v,A)),p.push(M.clone()),p.push(I.clone()),p.push(T),p.push(D),p.push(T.clone()),p.push(I.clone());break}case 2:{w||(M=g[y].clone(),I=m(M,g[y+1],v,A),T=m(M,g[y+2],v,A),p.push(M),p.push(I),p.push(T)),S||(M=g[y+1].clone(),I=m(M,g[y+2],v,A),T=m(M,g[y],v,A),p.push(M),p.push(I),p.push(T)),C||(M=g[y+2].clone(),I=m(M,g[y],v,A),T=m(M,g[y+1],v,A),p.push(M),p.push(I),p.push(T));break}}}return p}function m(g,v,p,A){const y=g.position.dot(p)-A,w=v.position.dot(p)-A,S=y/(y-w);return new iO(new F(g.position.x+S*(v.position.x-g.position.x),g.position.y+S*(v.position.y-g.position.y),g.position.z+S*(v.position.z-g.position.z)),new F(g.normal.x+S*(v.normal.x-g.normal.x),g.normal.y+S*(v.normal.y-g.normal.y),g.normal.z+S*(v.normal.z-g.normal.z)))}}}class iO{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}class Qge extends hv{constructor(e,t={}){const{bevelEnabled:i=!1,bevelSize:r=8,bevelThickness:s=10,font:o,height:a=50,size:l=100,lineHeight:c=1,letterSpacing:u=0,...f}=t;if(o===void 0)super();else{const h=o.generateShapes(e,l,{lineHeight:c,letterSpacing:u});super(h,{...f,bevelEnabled:i,bevelSize:r,bevelThickness:s,depth:a})}this.type="TextGeometry"}}const Vge={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)},jge={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},Wge={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},BC=new l0,PC=new F,up=new F,Da=new F,ac=new F,ml=new F,lc=new F,cc=new F,P1=new F,R1=new F,D1=new F,nx=new F,L1=new F,F1=new F,O1=new F;class Yge{constructor(e,t,i){this.camera=e,this.scene=t,this.startPoint=new F,this.endPoint=new F,this.collection=[],this.deep=i||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(BC,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){up.copy(e),up.x=Math.min(e.x,t.x),up.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),Da.setFromMatrixPosition(this.camera.matrixWorld),ac.copy(up),ml.set(t.x,up.y,0),lc.copy(t),cc.set(up.x,t.y,0),ac.unproject(this.camera),ml.unproject(this.camera),lc.unproject(this.camera),cc.unproject(this.camera),L1.copy(ac).sub(Da),F1.copy(ml).sub(Da),O1.copy(lc).sub(Da),L1.normalize(),F1.normalize(),O1.normalize(),L1.multiplyScalar(this.deep),F1.multiplyScalar(this.deep),O1.multiplyScalar(this.deep),L1.add(Da),F1.add(Da),O1.add(Da);var i=BC.planes;i[0].setFromCoplanarPoints(Da,ac,ml),i[1].setFromCoplanarPoints(Da,ml,lc),i[2].setFromCoplanarPoints(lc,cc,Da),i[3].setFromCoplanarPoints(cc,ac,Da),i[4].setFromCoplanarPoints(ml,lc,cc),i[5].setFromCoplanarPoints(O1,F1,L1),i[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const r=Math.min(e.x,t.x),s=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);ac.set(r,s,-1),ml.set(o,s,-1),lc.set(o,a,-1),cc.set(r,a,-1),P1.set(r,s,1),R1.set(o,s,1),D1.set(o,a,1),nx.set(r,a,1),ac.unproject(this.camera),ml.unproject(this.camera),lc.unproject(this.camera),cc.unproject(this.camera),P1.unproject(this.camera),R1.unproject(this.camera),D1.unproject(this.camera),nx.unproject(this.camera);var i=BC.planes;i[0].setFromCoplanarPoints(ac,P1,R1),i[1].setFromCoplanarPoints(ml,R1,D1),i[2].setFromCoplanarPoints(D1,nx,cc),i[3].setFromCoplanarPoints(nx,P1,ac),i[4].setFromCoplanarPoints(ml,lc,cc),i[5].setFromCoplanarPoints(D1,R1,P1),i[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),PC.copy(t.geometry.boundingSphere.center),PC.applyMatrix4(t.matrixWorld),e.containsPoint(PC)&&this.collection.push(t)),t.children.length>0)for(let i=0;i<t.children.length;i++)this.searchChildInFrustum(e,t.children[i])}}class Xge{constructor(e,t=" .:-=+*#%@",i={}){const r=i.resolution||.15,s=i.scale||1,o=i.color||!1,a=i.alpha||!1,l=i.block||!1,c=i.invert||!1,u=i.strResolution||"low";let f,h;const d=document.createElement("div");d.style.cursor="default";const m=document.createElement("table");d.appendChild(m);let g,v,p;this.setSize=function(L,H){f=L,h=H,e.setSize(L,H),A()},this.render=function(L,H){e.render(L,H),z(m)},this.domElement=d;function A(){g=Math.floor(f*r),v=Math.floor(h*r),b.width=g,b.height=v,p=e.domElement,p.style.backgroundColor&&(m.rows[0].cells[0].style.backgroundColor=p.style.backgroundColor,m.rows[0].cells[0].style.color=p.style.color),m.cellSpacing=0,m.cellPadding=0;const L=m.style;L.whiteSpace="pre",L.margin="0px",L.padding="0px",L.letterSpacing=R+"px",L.fontFamily=S,L.fontSize=T+"px",L.lineHeight=D+"px",L.textAlign="left",L.textDecoration="none"}const y=" .,:;i1tfLCG08@".split(""),w=" CGO08@".split(""),S="courier new, monospace",C=e.domElement,b=document.createElement("canvas");if(!b.getContext)return;const M=b.getContext("2d");if(!M.getImageData)return;let I=o?w:y;t&&(I=t);const T=2/r*s,D=2/r*s;let R=0;if(u=="low")switch(s){case 1:R=-1;break;case 2:case 3:R=-2.1;break;case 4:R=-3.1;break;case 5:R=-4.15;break}if(u=="medium")switch(s){case 1:R=0;break;case 2:R=-1;break;case 3:R=-1.04;break;case 4:case 5:R=-2.1;break}if(u=="high")switch(s){case 1:case 2:R=0;break;case 3:case 4:case 5:R=-1;break}function z(L){M.clearRect(0,0,g,v),M.drawImage(C,0,0,g,v);const H=M.getImageData(0,0,g,v).data;let J="";for(let Z=0;Z<v;Z+=2){for(let U=0;U<g;U++){const X=(Z*g+U)*4,Y=H[X],O=H[X+1],W=H[X+2],$=H[X+3];let k,V;V=(.3*Y+.59*O+.11*W)/255,$==0&&(V=1),k=Math.floor((1-V)*(I.length-1)),c&&(k=I.length-k-1);let Q=I[k];(Q===void 0||Q==" ")&&(Q="&nbsp;"),o?J+="<span style='color:rgb("+Y+","+O+","+W+");"+(l?"background-color:rgb("+Y+","+O+","+W+");":"")+(a?"opacity:"+$/255+";":"")+"'>"+Q+"</span>":J+=Q}J+="<br/>"}L.innerHTML=`<tr><td style="display:block;width:${f}px;height:${h}px;overflow:hidden">${J}</td></tr>`}}}function tW(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,o=Math.floor((r+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function qge(n,e,t,i){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=t;++a){s[a]=e-i[n+1-a],o[a]=i[n+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],f=s[a-c],h=r[c]/(u+f);r[c]=l+u*h,l=f*h}r[a]=l}return r}function Jge(n,e,t,i){const r=tW(n,i,e),s=qge(r,i,n,e),o=new sn(0,0,0,0);for(let a=0;a<=n;++a){const l=t[r-n+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function Kge(n,e,t,i,r){const s=[];for(let f=0;f<=t;++f)s[f]=0;const o=[];for(let f=0;f<=i;++f)o[f]=s.slice(0);const a=[];for(let f=0;f<=t;++f)a[f]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let f=1;f<=t;++f){l[f]=e-r[n+1-f],c[f]=r[n+f]-e;let h=0;for(let d=0;d<f;++d){const m=c[d+1],g=l[f-d];a[f][d]=m+g;const v=a[d][f-1]/a[f][d];a[d][f]=h+m*v,h=g*v}a[f][f]=h}for(let f=0;f<=t;++f)o[0][f]=a[f][t];for(let f=0;f<=t;++f){let h=0,d=1;const m=[];for(let g=0;g<=t;++g)m[g]=s.slice(0);m[0][0]=1;for(let g=1;g<=i;++g){let v=0;const p=f-g,A=t-g;f>=g&&(m[d][0]=m[h][0]/a[A+1][p],v=m[d][0]*a[p][A]);const y=p>=-1?1:-p,w=f-1<=A?g-1:t-f;for(let C=y;C<=w;++C)m[d][C]=(m[h][C]-m[h][C-1])/a[A+1][p+C],v+=m[d][C]*a[p+C][A];f<=A&&(m[d][g]=-m[h][g-1]/a[A+1][f],v+=m[d][g]*a[f][A]),o[g][f]=v;const S=h;h=d,d=S}}let u=t;for(let f=1;f<=i;++f){for(let h=0;h<=t;++h)o[f][h]*=u;u*=t-f}return o}function $ge(n,e,t,i,r){const s=r<n?r:n,o=[],a=tW(n,i,e),l=Kge(a,i,n,s,e),c=[];for(let u=0;u<t.length;++u){const f=t[u].clone(),h=f.w;f.x*=h,f.y*=h,f.z*=h,c[u]=f}for(let u=0;u<=s;++u){const f=c[a-n].clone().multiplyScalar(l[u][0]);for(let h=1;h<=n;++h)f.add(c[a-n+h].clone().multiplyScalar(l[u][h]));o[u]=f}for(let u=s+1;u<=r+1;++u)o[u]=new sn(0,0,0);return o}function Zge(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function eAe(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new F(o.x,o.y,o.z),i[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(Zge(s,a)*i[a]));r[s]=o.divideScalar(i[0])}return r}function tAe(n,e,t,i,r){const s=$ge(n,e,t,i,r);return eAe(s)}class rO extends _a{constructor(e,t,i,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<i.length;++o){const a=i[o];this.controlPoints[o]=new sn(a.x,a.y,a.z,a.w)}}getPoint(e,t){const i=t||new F,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Jge(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t){const i=t||new F,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=tAe(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let zn,lr,Ws;class V8 extends nr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=s.path===""?bc.extractUrlBase(e):s.path,a=new ji(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,t){if(aAe(e))zn=new oAe().parse(e);else{const r=sW(e);if(!lAe(r))throw new Error("THREE.FBXLoader: Unknown format.");if(oO(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+oO(r));zn=new sAe().parse(r)}const i=new kl(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new nAe(i,this.manager).parse(zn)}}class nAe{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){lr=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=new iAe().parse(r);return this.parseScene(r,s,i),Ws}parseConnections(){const e=new Map;return"Connections"in zn&&zn.Connections.connections.forEach(function(i){const r=i[0],s=i[1],o=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in zn.Objects){const i=zn.Objects.Video;for(const r in i){const s=i[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in zn.Objects){const i=zn.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(i.wrapS=o===0?Wr:li,i.wrapT=a===0?Wr:li,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}return i}loadTexture(e,t){let i;const r=this.textureLoader.path,s=lr.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(i=t[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new Nn):(l.setPath(this.textureLoader.path),o=l.load(i))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new Nn):o=this.textureLoader.load(i);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in zn.Objects){const i=zn.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!lr.has(i))return null;const o=this.parseParameters(e,t,i);let a;switch(s.toLowerCase()){case"phong":a=new Ng;break;case"lambert":a=new pv;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new Ng;break}return a.setValues(o),a.name=r,a}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new et().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new et().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new et().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new et().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new et().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new et().fromArray(e.SpecularColor.value));const s=this;return lr.get(i).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,o.ID),r.map!==void 0&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,o.ID),r.emissiveMap!==void 0&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,o.ID),r.envMap!==void 0&&(r.envMap.mapping=af,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=s.getTexture(t,o.ID),r.specularMap!==void 0&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in zn.Objects&&t in zn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=lr.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in zn.Objects){const i=zn.Objects.Deformer;for(const r in i){const s=i[r],o=lr.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,i);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,i),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new He().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=lr.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,t,i){Ws=new qs;const r=this.parseModels(e.skeletons,t,i),s=zn.Objects.Model,o=this;r.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),lr.get(l.ID).parents.forEach(function(f){const h=r.get(f.ID);h!==void 0&&h.add(l)}),l.parent===null&&Ws.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),Ws.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=iW(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new rAe().parse();Ws.children.length===1&&Ws.children[0].isGroup&&(Ws.children[0].animations=a,Ws=Ws.children[0]),Ws.animations=a}parseModels(e,t,i){const r=new Map,s=zn.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=lr.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,i);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new Vm;break;case"Null":default:u=new qs;break}u.name=l.attrName?Dn.sanitizeNodeName(l.attrName):"",u.ID=a}this.getTransformData(u,l),r.set(a,u)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const f=s;s=new Vm,s.matrixWorld.copy(c.transformLink),s.name=r?Dn.sanitizeNodeName(r):"",s.ID=i,l.bones[u]=s,f!==null&&s.add(f)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=zn.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new Jt;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let o=1e3;i.FarPlane!==void 0&&(o=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);const c=a/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const f=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new mn(u,c,s,o),f!==null&&t.setFocalLength(f);break;case 1:t=new ti(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new Jt;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=zn.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new Jt;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new et().fromArray(i.Color.value));let o=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(o=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new FA(s,o,a,l);break;case 1:t=new kE(s,o);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=jt.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=jt.degToRad(i.OuterAngle.value),u=Math.max(u,1)),t=new UE(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new FA(s,o);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new Ng({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new lv(s,o),r.normalizeSkinWeights()):r=new gt(s,o),r}createCurve(e,t){const i=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),r=new tr({color:3342591,linewidth:1});return new vn(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=rW(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&lr.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=zn.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Ws.add(e.target)):e.lookAt(new F().fromArray(o))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const o=e[s];lr.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;lr.get(c).parents.forEach(function(f){i.has(f.ID)&&i.get(f.ID).bind(new f0(o.bones),r[f.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in zn.Objects){const t=zn.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new He().fromArray(s.Matrix.a)}):e[r.Node]=new He().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in zn&&"AmbientColor"in zn.GlobalSettings){const e=zn.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const s=new et(t,i,r);Ws.add(new QT(s,1))}}}}class iAe{parse(e){const t=new Map;if("Geometry"in zn.Objects){const i=zn.Objects.Geometry;for(const r in i){const s=lr.get(parseInt(r)),o=this.parseGeometry(s,i[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],o=e.parents.map(function(f){return zn.Objects.Model[f.ID]});if(o.length===0)return;const a=e.children.reduce(function(f,h){return r[h.ID]!==void 0&&(f=r[h.ID]),f},null);e.children.forEach(function(f){i.morphTargets[f.ID]!==void 0&&s.push(i.morphTargets[f.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=rW(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=iW(c);return this.genGeometry(t,a,s,u)}genGeometry(e,t,i,r){const s=new Gt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new Et(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new Et(a.colors,3)),t&&(s.setAttribute("skinIndex",new pE(a.weightsIndices,4)),s.setAttribute("skinWeight",new Et(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new tn().getNormalMatrix(r),u=new Et(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){let f="uv"+(u+1).toString();u===0&&(f="uv"),s.setAttribute(f,new Et(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(f,h){f!==c&&(s.addGroup(u,h-u,c),c=f,u=h)}),s.groups.length>0){const f=s.groups[s.groups.length-1],h=f.start+f.count;h!==a.materialIndex.length&&s.addGroup(h,a.materialIndex.length-h,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){i.weightTable[o]===void 0&&(i.weightTable[o]=[]),i.weightTable[o].push({id:s,weight:r.weights[a]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,o=[],a=[],l=[],c=[],u=[],f=[];const h=this;return e.vertexIndices.forEach(function(d,m){let g,v=!1;d<0&&(d=d^-1,v=!0);let p=[],A=[];if(o.push(d*3,d*3+1,d*3+2),e.color){const y=ix(m,i,d,e.color);l.push(y[0],y[1],y[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(y){A.push(y.weight),p.push(y.id)}),A.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const y=[0,0,0,0],w=[0,0,0,0];A.forEach(function(S,C){let b=S,M=p[C];w.forEach(function(I,T,D){if(b>I){D[T]=b,b=I;const R=y[T];y[T]=M,M=R}})}),p=y,A=w}for(;A.length<4;)A.push(0),p.push(0);for(let y=0;y<4;++y)u.push(A[y]),f.push(p[y])}if(e.normal){const y=ix(m,i,d,e.normal);a.push(y[0],y[1],y[2])}e.material&&e.material.mappingType!=="AllSame"&&(g=ix(m,i,d,e.material)[0]),e.uv&&e.uv.forEach(function(y,w){const S=ix(m,i,d,y);c[w]===void 0&&(c[w]=[]),c[w].push(S[0]),c[w].push(S[1])}),r++,v&&(h.genFace(t,e,o,g,a,l,c,u,f,r),i++,r=0,o=[],a=[],l=[],c=[],u=[],f=[])}),t}genFace(e,t,i,r,s,o,a,l,c,u){for(let f=2;f<u;f++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(f-1)*3]]),e.vertex.push(t.vertexPositions[i[(f-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(f-1)*3+2]]),e.vertex.push(t.vertexPositions[i[f*3]]),e.vertex.push(t.vertexPositions[i[f*3+1]]),e.vertex.push(t.vertexPositions[i[f*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(f-1)*4]),e.vertexWeights.push(l[(f-1)*4+1]),e.vertexWeights.push(l[(f-1)*4+2]),e.vertexWeights.push(l[(f-1)*4+3]),e.vertexWeights.push(l[f*4]),e.vertexWeights.push(l[f*4+1]),e.vertexWeights.push(l[f*4+2]),e.vertexWeights.push(l[f*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(f-1)*4]),e.weightsIndices.push(c[(f-1)*4+1]),e.weightsIndices.push(c[(f-1)*4+2]),e.weightsIndices.push(c[(f-1)*4+3]),e.weightsIndices.push(c[f*4]),e.weightsIndices.push(c[f*4+1]),e.weightsIndices.push(c[f*4+2]),e.weightsIndices.push(c[f*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(f-1)*3]),e.colors.push(o[(f-1)*3+1]),e.colors.push(o[(f-1)*3+2]),e.colors.push(o[f*3]),e.colors.push(o[f*3+1]),e.colors.push(o[f*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(f-1)*3]),e.normal.push(s[(f-1)*3+1]),e.normal.push(s[(f-1)*3+2]),e.normal.push(s[f*3]),e.normal.push(s[f*3+1]),e.normal.push(s[f*3+2])),t.uv&&t.uv.forEach(function(h,d){e.uvs[d]===void 0&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][(f-1)*2]),e.uvs[d].push(a[d][(f-1)*2+1]),e.uvs[d].push(a[d][f*2]),e.uvs[d].push(a[d][f*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(o){o.rawTargets.forEach(function(a){const l=zn.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,i,r,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let m=0;m<l.length;m++){const g=l[m]*3;u[g]=a[m*3],u[g+1]=a[m*3+1],u[g+2]=a[m*3+2]}const f={vertexIndices:o,vertexPositions:u},h=this.genBuffers(f),d=new Et(h.vertex,3);d.name=s||i.attrName,d.applyMatrix4(r),e.morphAttributes.position.push(d)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(rO===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Gt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Gt;const i=t-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let f=0,h=o.length;f<h;f+=4)s.push(new sn().fromArray(o,f));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let f=0;f<i;++f)s.push(s[f])}const u=new rO(i,r,s,a,l).getPoints(s.length*12);return new Gt().setFromPoints(u)}}class rAe{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(zn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=zn.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=zn.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(cAe),values:t[i].KeyValueFloat.a},s=lr.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const t=zn.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],o=lr.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const f=lr.get(l.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID;if(f!==void 0){const h=zn.Objects.Model[f.toString()];if(h===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const d={modelName:h.attrName?Dn.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Ws.traverse(function(m){m.ID===h.id&&(d.transform=m.matrix,m.userData.transformData&&(d.eulerOrder=m.userData.transformData.eulerOrder))}),d.transform||(d.transform=new He),"PreRotation"in h&&(d.preRotation=h.PreRotation.value),"PostRotation"in h&&(d.postRotation=h.PostRotation.value),s[c]=d}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const f=lr.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID,h=lr.get(f).parents[0].ID,d=lr.get(h).parents[0].ID,m=lr.get(d).parents[0].ID,g=zn.Objects.Model[m],v={modelName:g.attrName?Dn.sanitizeNodeName(g.attrName):"",morphName:zn.Objects.Deformer[f].attrName};s[c]=v}s[c][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=zn.Objects.AnimationStack,i={};for(const r in t){const s=lr.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:o}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new cf(e.name,-1,t)}generateTracks(e){const t=[];let i=new F,r=new Lt,s=new F;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new Qr().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,i);return new Oc(e+"."+r,s,o)}generateRotationTrack(e,t,i,r,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(jt.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(jt.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(jt.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,i);r!==void 0&&(r=r.map(jt.degToRad),r.push(o),r=new Qr().fromArray(r),r=new Lt().setFromEuler(r)),s!==void 0&&(s=s.map(jt.degToRad),s.push(o),s=new Qr().fromArray(s),s=new Lt().setFromEuler(s).invert());const c=new Lt,u=new Qr,f=[];for(let h=0;h<l.length;h+=3)u.set(l[h],l[h+1],l[h+2],o),c.setFromEuler(u),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(f,h/3*4);return new Ul(e+".quaternion",a,f)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=Ws.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new lf(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==r&&(t[i]=o,r=o,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const u=t.x.values[o];s.push(u),r[0]=u}else s.push(r[0]);if(a!==-1){const u=t.y.values[a];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=t.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],r=e.values[t]-i,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=i+a;const c=e.times[t-1],f=(e.times[t]-c)/o;let h=c+f;const d=[],m=[];for(;h<e.times[t];)d.push(h),h+=f,m.push(l),l+=a;e.times=aO(e.times,t,d),e.values=aO(e.values,t,m)}}}}class sAe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new nW,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):c?t.parseNodeProperty(r,c,i[++s]):u?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in a?(i==="PoseNode"?a.PoseNode.push(s):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),o.id!==""&&(a[i][o.id]=s)):typeof o.id=="number"?(a[i]={},a[i][o.id]=s):i!=="Properties70"&&(i==="PoseNode"?a[i]=[s]:a[i]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let f=s.split(",").slice(3);f=f.map(function(h){return h.trim().replace(/^"/,"")}),r="connections",s=[c,u],fAe(s,f),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=DC(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=DC(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=DC(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class oAe{parse(e){const t=new sO(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new nW;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",f=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const h=this.parseNode(e,t);h!==null&&this.parseSubNode(a,i,h)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),f!==""&&(i.attrType=f),a!==""&&(i.name=a),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){t[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const o=i.propertyList[2],a=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:s,type2:o,flag:a,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=mg(new Uint8Array(e.getArrayBuffer(o))),l=new sO(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class sO{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),$m(new Uint8Array(t))}}class nW{add(e,t){this[e]=t}}function aAe(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===sW(n,0,e.length)}function lAe(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function oO(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function cAe(n){return n/46186158e3}const uAe=[];function ix(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,o=s+i.dataSize;return hAe(uAe,i.buffer,s,o)}const RC=new Qr,fp=new F;function iW(n){const e=new He,t=new He,i=new He,r=new He,s=new He,o=new He,a=new He,l=new He,c=new He,u=new He,f=new He,h=new He,d=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(fp.fromArray(n.translation)),n.preRotation){const T=n.preRotation.map(jt.degToRad);T.push(n.eulerOrder),t.makeRotationFromEuler(RC.fromArray(T))}if(n.rotation){const T=n.rotation.map(jt.degToRad);T.push(n.eulerOrder),i.makeRotationFromEuler(RC.fromArray(T))}if(n.postRotation){const T=n.postRotation.map(jt.degToRad);T.push(n.eulerOrder),r.makeRotationFromEuler(RC.fromArray(T)),r.invert()}n.scale&&s.scale(fp.fromArray(n.scale)),n.scalingOffset&&a.setPosition(fp.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(fp.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(fp.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(fp.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(f.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const m=t.clone().multiply(i).multiply(r),g=new He;g.extractRotation(u);const v=new He;v.copyPosition(u);const p=v.clone().invert().multiply(u),A=g.clone().invert().multiply(p),y=s,w=new He;if(d===0)w.copy(g).multiply(m).multiply(A).multiply(y);else if(d===1)w.copy(g).multiply(A).multiply(m).multiply(y);else{const D=new He().scale(new F().setFromMatrixScale(f)).clone().invert(),R=A.clone().multiply(D);w.copy(g).multiply(m).multiply(R).multiply(y)}const S=c.clone().invert(),C=o.clone().invert();let b=e.clone().multiply(l).multiply(c).multiply(t).multiply(i).multiply(r).multiply(S).multiply(a).multiply(o).multiply(s).multiply(C);const M=new He().copyPosition(b),I=u.clone().multiply(M);return h.copyPosition(I),b=h.clone().multiply(w),b.premultiply(u.invert()),b}function rW(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function DC(n){return n.split(",").map(function(t){return parseFloat(t)})}function sW(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),$m(new Uint8Array(n,e,t))}function fAe(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function hAe(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}function aO(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}var dAe=Object.defineProperty,pAe=(n,e,t)=>e in n?dAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j8=(n,e,t)=>(pAe(n,typeof e!="symbol"?e+"":e,t),t);class mAe extends nr{constructor(e){super(e)}load(e,t,i,r){const s=new ji(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const a=JSON.parse(o),l=this.parse(a);t&&t(l)},i,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new W8(e)}}class W8{constructor(e){j8(this,"data"),this.data=e}generateShapes(e,t=100,i){const r=[],s={letterSpacing:0,lineHeight:1,...i},o=gAe(e,t,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(r,o[a].toShapes(!1));return r}}j8(W8,"isFont");j8(W8,"type");function gAe(n,e,t,i){const r=Array.from(n),s=e/t.resolution,o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,a=[];let l=0,c=0;for(let u=0;u<r.length;u++){const f=r[u];if(f===`
`)l=0,c-=o*i.lineHeight;else{const h=AAe(f,s,l,c,t);h&&(l+=h.offsetX+i.letterSpacing,a.push(h.path))}}return a}function AAe(n,e,t,i,r){const s=r.glyphs[n]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const o=new dc;let a,l,c,u,f,h,d,m;if(s.o){const g=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let v=0,p=g.length;v<p;)switch(g[v++]){case"m":a=parseInt(g[v++])*e+t,l=parseInt(g[v++])*e+i,o.moveTo(a,l);break;case"l":a=parseInt(g[v++])*e+t,l=parseInt(g[v++])*e+i,o.lineTo(a,l);break;case"q":c=parseInt(g[v++])*e+t,u=parseInt(g[v++])*e+i,f=parseInt(g[v++])*e+t,h=parseInt(g[v++])*e+i,o.quadraticCurveTo(f,h,c,u);break;case"b":c=parseInt(g[v++])*e+t,u=parseInt(g[v++])*e+i,f=parseInt(g[v++])*e+t,h=parseInt(g[v++])*e+i,d=parseInt(g[v++])*e+t,m=parseInt(g[v++])*e+i,o.bezierCurveTo(f,h,d,m,c,u);break}}return{offsetX:s.ha*e,path:o}}class vAe extends Nn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=dn,this.minFilter=dn,this.wrapR=li,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class yAe{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const i=this.workersResolve[e];if(i&&i(t),this.queue.length){const{resolve:r,msg:s,transfer:o}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,o)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(i=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=i,this.workers[r].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const oW=0,lO=2,xAe=0,_Ae=0,EAe=2,wAe=0,SAe=0,CAe=1,S6=2,bAe=0,aW=1,MAe=10,IAe=64,lW=0,cW=9,uW=15,fW=16,hW=22,dW=37,pW=43,mW=76,gW=83,AW=97,vW=100,yW=103,xW=109,_W=165,EW=166;class TAe{constructor(){this.vkFormat=lW,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=oW,this.levels=[],this.dataFormatDescriptor=[{vendorId:_Ae,descriptorType:xAe,descriptorBlockSize:0,versionNumber:EAe,colorModel:wAe,colorPrimaries:aW,transferFunction:S6,flags:SAe,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class z1{constructor(e,t,i,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian),i=e+2**32*t;return this._offset+=8,i}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){t===void 0&&(t=0);const i=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,r)}}const Ss=[171,75,84,88,32,50,48,187,13,10,26,10];function cO(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):Buffer.from(n).toString("utf8")}function BAe(n){const e=new Uint8Array(n.buffer,n.byteOffset,Ss.length);if(e[0]!==Ss[0]||e[1]!==Ss[1]||e[2]!==Ss[2]||e[3]!==Ss[3]||e[4]!==Ss[4]||e[5]!==Ss[5]||e[6]!==Ss[6]||e[7]!==Ss[7]||e[8]!==Ss[8]||e[9]!==Ss[9]||e[10]!==Ss[10]||e[11]!==Ss[11])throw new Error("Missing KTX 2.0 identifier.");const t=new TAe,i=17*Uint32Array.BYTES_PER_ELEMENT,r=new z1(n,Ss.length,i,!0);t.vkFormat=r._nextUint32(),t.typeSize=r._nextUint32(),t.pixelWidth=r._nextUint32(),t.pixelHeight=r._nextUint32(),t.pixelDepth=r._nextUint32(),t.layerCount=r._nextUint32(),t.faceCount=r._nextUint32();const s=r._nextUint32();t.supercompressionScheme=r._nextUint32();const o=r._nextUint32(),a=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),u=r._nextUint64(),f=r._nextUint64(),h=s*3*8,d=new z1(n,Ss.length+i,h,!0);for(let Y=0;Y<s;Y++)t.levels.push({levelData:new Uint8Array(n.buffer,n.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const m=new z1(n,o,a,!0),g={vendorId:m._skip(4)._nextUint16(),descriptorType:m._nextUint16(),versionNumber:m._nextUint16(),descriptorBlockSize:m._nextUint16(),colorModel:m._nextUint8(),colorPrimaries:m._nextUint8(),transferFunction:m._nextUint8(),flags:m._nextUint8(),texelBlockDimension:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],bytesPlane:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],samples:[]},A=(g.descriptorBlockSize/4-6)/4;for(let Y=0;Y<A;Y++){const O={bitOffset:m._nextUint16(),bitLength:m._nextUint8(),channelType:m._nextUint8(),samplePosition:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};O.channelType&IAe?(O.sampleLower=m._nextInt32(),O.sampleUpper=m._nextInt32()):(O.sampleLower=m._nextUint32(),O.sampleUpper=m._nextUint32()),g.samples[Y]=O}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(g);const y=new z1(n,l,c,!0);for(;y._offset<c;){const Y=y._nextUint32(),O=y._scan(Y),W=cO(O);if(t.keyValue[W]=y._nextUint8Array(Y-O.byteLength-1),W.match(/^ktx/i)){const k=cO(t.keyValue[W]);t.keyValue[W]=k.substring(0,k.lastIndexOf("\0"))}const $=Y%4?4-Y%4:0;y._skip($)}if(f<=0)return t;const w=new z1(n,u,f,!0),S=w._nextUint16(),C=w._nextUint16(),b=w._nextUint32(),M=w._nextUint32(),I=w._nextUint32(),T=w._nextUint32(),D=[];for(let Y=0;Y<s;Y++)D.push({imageFlags:w._nextUint32(),rgbSliceByteOffset:w._nextUint32(),rgbSliceByteLength:w._nextUint32(),alphaSliceByteOffset:w._nextUint32(),alphaSliceByteLength:w._nextUint32()});const R=u+w._offset,z=R+b,L=z+M,H=L+I,J=new Uint8Array(n.buffer,n.byteOffset+R,b),Z=new Uint8Array(n.buffer,n.byteOffset+z,M),U=new Uint8Array(n.buffer,n.byteOffset+L,I),X=new Uint8Array(n.buffer,n.byteOffset+H,T);return t.globalData={endpointCount:S,selectorCount:C,imageDescs:D,endpointsData:J,selectorsData:Z,tablesData:U,extendedData:X},t}let U1,uc,C6;const LC={env:{emscripten_notify_memory_growth:function(n){C6=new Uint8Array(uc.exports.memory.buffer)}}};class PAe{init(){return U1||(typeof fetch<"u"?U1=fetch("data:application/wasm;base64,"+uO).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,LC)).then(this._init):U1=WebAssembly.instantiate(Buffer.from(uO,"base64"),LC).then(this._init),U1)}_init(e){uc=e.instance,LC.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!uc)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,r=uc.exports.malloc(i);C6.set(e,r),t=t||Number(uc.exports.ZSTD_findDecompressedSize(r,i));const s=uc.exports.malloc(t),o=uc.exports.ZSTD_decompress(s,t,r,i),a=C6.slice(s,s+o);return uc.exports.free(r),uc.exports.free(s),a}}const uO="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";class RAe extends nd{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,zl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class DAe extends nd{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=li}}var LAe=Object.defineProperty,FAe=(n,e,t)=>e in n?LAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mw=(n,e,t)=>(FAe(n,typeof e!="symbol"?e+"":e,t),t);const wW=3e3,SW=3001,fO="",OAe="display-p3",zAe="display-p3-linear",UAe="srgb-linear",Y8="srgb",FC=new WeakMap;let OC=0,zC;const Ru=class extends nr{constructor(n){super(n),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new yAe,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(n){return this.transcoderPath=n,this}setWorkerLimit(n){return this.workerPool.setWorkerLimit(n),this}detectSupport(n){return this.workerConfig={astcSupported:n.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:n.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:n.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:n.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:n.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:n.extensions.has("WEBGL_compressed_texture_pvrtc")||n.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},n.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const n=new ji(this.manager);n.setPath(this.transcoderPath),n.setWithCredentials(this.withCredentials);const e=n.loadAsync("basis_transcoder.js"),t=new ji(this.manager);t.setPath(this.transcoderPath),t.setResponseType("arraybuffer"),t.setWithCredentials(this.withCredentials);const i=t.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([e,i]).then(([r,s])=>{const o=Ru.BasisWorker.toString(),a=["/* constants */","let _EngineFormat = "+JSON.stringify(Ru.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Ru.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Ru.BasisFormat),"/* basis_transcoder.js */",r,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a])),this.transcoderBinary=s,this.workerPool.setWorkerCreator(()=>{const l=new Worker(this.workerSourceURL),c=this.transcoderBinary.slice(0);return l.postMessage({type:"init",config:this.workerConfig,transcoderBinary:c},[c]),l})}),OC>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),OC++}return this.transcoderPending}load(n,e,t,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new ji(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(n,s=>{if(FC.has(s))return FC.get(s).promise.then(e).catch(i);this._createTexture(s).then(o=>e?e(o):null).catch(i)},t,i)}_createTextureFrom(n,e){const{faces:t,width:i,height:r,format:s,type:o,error:a,dfdFlags:l}=n;if(o==="error")return Promise.reject(a);let c;if(e.faceCount===6)c=new RAe(t,s,hi);else{const f=t[0].mipmaps;c=e.layerCount>1?new DAe(f,i,r,e.layerCount,s,hi):new nd(f,i,r,s,hi)}c.minFilter=t[0].mipmaps.length===1?Xt:bo,c.magFilter=Xt,c.generateMipmaps=!1,c.needsUpdate=!0;const u=CW(e);return"colorSpace"in c?c.colorSpace=u:c.encoding=u===Y8?SW:wW,c.premultiplyAlpha=!!(l&CAe),c}async _createTexture(n,e={}){const t=BAe(new Uint8Array(n));if(t.vkFormat!==lW)return NAe(t);const i=e,r=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:n,taskConfig:i},[n])).then(s=>this._createTextureFrom(s.data,t));return FC.set(n,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),OC--,this}};let cd=Ru;mw(cd,"BasisFormat",{ETC1S:0,UASTC_4x4:1});mw(cd,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16});mw(cd,"EngineFormat",{RGBAFormat:Vn,RGBA_ASTC_4x4_Format:o3,RGBA_BPTC_Format:Fg,RGBA_ETC2_EAC_Format:s3,RGBA_PVRTC_4BPPV1_Format:i3,RGBA_S3TC_DXT5_Format:Lg,RGB_ETC1_Format:pT,RGB_ETC2_Format:r3,RGB_PVRTC_4BPPV1_Format:n3,RGB_S3TC_DXT1_Format:Dg});mw(cd,"BasisWorker",function(){let n,e,t;const i=Ru.EngineFormat,r=Ru.TranscoderFormat,s=Ru.BasisFormat;self.addEventListener("message",function(m){const g=m.data;switch(g.type){case"init":n=g.config,o(g.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:v,buffers:p,width:A,height:y,hasAlpha:w,format:S,dfdFlags:C}=a(g.buffer);self.postMessage({type:"transcode",id:g.id,faces:v,width:A,height:y,hasAlpha:w,format:S,dfdFlags:C},p)}catch(v){console.error(v),self.postMessage({type:"error",id:g.id,error:v.message})}});break}});function o(m){e=new Promise(g=>{t={wasmBinary:m,onRuntimeInitialized:g},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function a(m){const g=new t.KTX2File(new Uint8Array(m));function v(){g.close(),g.delete()}if(!g.isValid())throw v(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const p=g.isUASTC()?s.UASTC_4x4:s.ETC1S,A=g.getWidth(),y=g.getHeight(),w=g.getLayers()||1,S=g.getLevels(),C=g.getFaces(),b=g.getHasAlpha(),M=g.getDFDFlags(),{transcoderFormat:I,engineFormat:T}=f(p,A,y,b);if(!A||!y||!S)throw v(),new Error("THREE.KTX2Loader:	Invalid texture");if(!g.startTranscoding())throw v(),new Error("THREE.KTX2Loader: .startTranscoding failed");const D=[],R=[];for(let z=0;z<C;z++){const L=[];for(let H=0;H<S;H++){const J=[];let Z,U;for(let Y=0;Y<w;Y++){const O=g.getImageLevelInfo(H,Y,z);z===0&&H===0&&Y===0&&(O.origWidth%4!==0||O.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),S>1?(Z=O.origWidth,U=O.origHeight):(Z=O.width,U=O.height);const W=new Uint8Array(g.getImageTranscodedSizeInBytes(H,Y,0,I));if(!g.transcodeImage(W,H,Y,z,I,0,-1,-1))throw v(),new Error("THREE.KTX2Loader: .transcodeImage failed.");J.push(W)}const X=d(J);L.push({data:X,width:Z,height:U}),R.push(X.buffer)}D.push({mipmaps:L,width:A,height:y,format:T})}return v(),{faces:D,buffers:R,width:A,height:y,hasAlpha:b,format:T,dfdFlags:M}}const l=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGB_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[i.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],c=l.sort(function(m,g){return m.priorityETC1S-g.priorityETC1S}),u=l.sort(function(m,g){return m.priorityUASTC-g.priorityUASTC});function f(m,g,v,p){let A,y;const w=m===s.ETC1S?c:u;for(let S=0;S<w.length;S++){const C=w[S];if(n[C.if]&&C.basisFormat.includes(m)&&!(p&&C.transcoderFormat.length<2)&&!(C.needsPowerOfTwo&&!(h(g)&&h(v))))return A=C.transcoderFormat[p?1:0],y=C.engineFormat[p?1:0],{transcoderFormat:A,engineFormat:y}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),A=r.RGBA32,y=i.RGBAFormat,{transcoderFormat:A,engineFormat:y}}function h(m){return m<=2?!0:(m&m-1)===0&&m!==0}function d(m){if(m.length===1)return m[0];let g=0;for(let A=0;A<m.length;A++){const y=m[A];g+=y.byteLength}const v=new Uint8Array(g);let p=0;for(let A=0;A<m.length;A++){const y=m[A];v.set(y,p),p+=y.byteLength}return v}});const kAe=new Set([Vn,Su,la]),UC={[xW]:Vn,[AW]:Vn,[dW]:Vn,[pW]:Vn,[yW]:Su,[gW]:Su,[fW]:Su,[hW]:Su,[vW]:la,[mW]:la,[uW]:la,[cW]:la,[EW]:bA,[_W]:bA},kC={[xW]:Ln,[AW]:jn,[dW]:hi,[pW]:hi,[yW]:Ln,[gW]:jn,[fW]:hi,[hW]:hi,[vW]:Ln,[mW]:jn,[uW]:hi,[cW]:hi,[EW]:hi,[_W]:hi};async function NAe(n){const{vkFormat:e}=n;if(UC[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let t;n.supercompressionScheme===lO&&(zC||(zC=new Promise(async o=>{const a=new PAe;await a.init(),o(a)})),t=await zC);const i=[];for(let o=0;o<n.levels.length;o++){const a=Math.max(1,n.pixelWidth>>o),l=Math.max(1,n.pixelHeight>>o),c=n.pixelDepth?Math.max(1,n.pixelDepth>>o):0,u=n.levels[o];let f;if(n.supercompressionScheme===oW)f=u.levelData;else if(n.supercompressionScheme===lO)f=t.decode(u.levelData,u.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let h;kC[e]===Ln?h=new Float32Array(f.buffer,f.byteOffset,f.byteLength/Float32Array.BYTES_PER_ELEMENT):kC[e]===jn?h=new Uint16Array(f.buffer,f.byteOffset,f.byteLength/Uint16Array.BYTES_PER_ELEMENT):h=f,i.push({data:h,width:a,height:l,depth:c})}let r;if(kAe.has(UC[e]))r=n.pixelDepth===0?new io(i[0].data,n.pixelWidth,n.pixelHeight):new vAe(i[0].data,n.pixelWidth,n.pixelHeight,n.pixelDepth);else{if(n.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");r=new nd(i,n.pixelWidth,n.pixelHeight)}r.mipmaps=i,r.type=kC[e],r.format=UC[e],r.needsUpdate=!0;const s=CW(n);return"colorSpace"in r?r.colorSpace=s:r.encoding=s===Y8?SW:wW,Promise.resolve(r)}function CW(n){const e=n.dataFormatDescriptor[0];return e.colorPrimaries===aW?e.transferFunction===S6?Y8:UAe:e.colorPrimaries===MAe?e.transferFunction===S6?OAe:zAe:(e.colorPrimaries===bAe||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),fO)}class GAe extends zE{constructor(e){super(e),this.type=jn}parse(e){const o=function(M,I){switch(M){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},u=`
`,f=function(M,I,T){I=I||1024;let R=M.pos,z=-1,L=0,H="",J=String.fromCharCode.apply(null,new Uint16Array(M.subarray(R,R+128)));for(;0>(z=J.indexOf(u))&&L<I&&R<M.byteLength;)H+=J,L+=J.length,R+=128,J+=String.fromCharCode.apply(null,new Uint16Array(M.subarray(R,R+128)));return-1<z?(M.pos+=L+z+1,H+J.slice(0,z)):!1},h=function(M){const I=/^#\?(\S+)/,T=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,D=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*FORMAT=(\S+)\s*$/,z=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,L={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let H,J;for((M.pos>=M.byteLength||!(H=f(M)))&&o(1,"no header found"),(J=H.match(I))||o(3,"bad initial token"),L.valid|=1,L.programtype=J[1],L.string+=H+`
`;H=f(M),H!==!1;){if(L.string+=H+`
`,H.charAt(0)==="#"){L.comments+=H+`
`;continue}if((J=H.match(T))&&(L.gamma=parseFloat(J[1])),(J=H.match(D))&&(L.exposure=parseFloat(J[1])),(J=H.match(R))&&(L.valid|=2,L.format=J[1]),(J=H.match(z))&&(L.valid|=4,L.height=parseInt(J[1],10),L.width=parseInt(J[2],10)),L.valid&2&&L.valid&4)break}return L.valid&2||o(3,"missing format specifier"),L.valid&4||o(3,"missing image size specifier"),L},d=function(M,I,T){const D=I;if(D<8||D>32767||M[0]!==2||M[1]!==2||M[2]&128)return new Uint8Array(M);D!==(M[2]<<8|M[3])&&o(3,"wrong scanline width");const R=new Uint8Array(4*I*T);R.length||o(4,"unable to allocate buffer space");let z=0,L=0;const H=4*D,J=new Uint8Array(4),Z=new Uint8Array(H);let U=T;for(;U>0&&L<M.byteLength;){L+4>M.byteLength&&o(1),J[0]=M[L++],J[1]=M[L++],J[2]=M[L++],J[3]=M[L++],(J[0]!=2||J[1]!=2||(J[2]<<8|J[3])!=D)&&o(3,"bad rgbe scanline format");let X=0,Y;for(;X<H&&L<M.byteLength;){Y=M[L++];const W=Y>128;if(W&&(Y-=128),(Y===0||X+Y>H)&&o(3,"bad scanline data"),W){const $=M[L++];for(let k=0;k<Y;k++)Z[X++]=$}else Z.set(M.subarray(L,L+Y),X),X+=Y,L+=Y}const O=D;for(let W=0;W<O;W++){let $=0;R[z]=Z[W+$],$+=D,R[z+1]=Z[W+$],$+=D,R[z+2]=Z[W+$],$+=D,R[z+3]=Z[W+$],z+=4}U--}return R},m=function(M,I,T,D){const R=M[I+3],z=Math.pow(2,R-128)/255;T[D+0]=M[I+0]*z,T[D+1]=M[I+1]*z,T[D+2]=M[I+2]*z,T[D+3]=1},g=function(M,I,T,D){const R=M[I+3],z=Math.pow(2,R-128)/255;T[D+0]=ja.toHalfFloat(Math.min(M[I+0]*z,65504)),T[D+1]=ja.toHalfFloat(Math.min(M[I+1]*z,65504)),T[D+2]=ja.toHalfFloat(Math.min(M[I+2]*z,65504)),T[D+3]=ja.toHalfFloat(1)},v=new Uint8Array(e);v.pos=0;const p=h(v),A=p.width,y=p.height,w=d(v.subarray(v.pos),A,y);let S,C,b;switch(this.type){case Ln:b=w.length/4;const M=new Float32Array(b*4);for(let T=0;T<b;T++)m(w,T*4,M,T*4);S=M,C=Ln;break;case jn:b=w.length/4;const I=new Uint16Array(b*4);for(let T=0;T<b;T++)g(w,T*4,I,T*4);S=I,C=jn;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:A,height:y,data:S,header:p.string,gamma:p.gamma,exposure:p.exposure,type:C}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case Ln:case jn:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Xt,o.magFilter=Xt,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const k1="colorSpace"in new Nn;class HAe extends zE{constructor(e){super(e),this.type=jn}parse(e){const I=Math.pow(2.7182818,2.2);function T(ne,G){for(var re=0,he=0;he<65536;++he)(he==0||ne[he>>3]&1<<(he&7))&&(G[re++]=he);for(var le=re-1;re<65536;)G[re++]=0;return le}function D(ne){for(var G=0;G<16384;G++)ne[G]={},ne[G].len=0,ne[G].lit=0,ne[G].p=null}const R={l:0,c:0,lc:0};function z(ne,G,re,he,le){for(;re<ne;)G=G<<8|ce(he,le),re+=8;re-=ne,R.l=G>>re&(1<<ne)-1,R.c=G,R.lc=re}const L=new Array(59);function H(ne){for(var G=0;G<=58;++G)L[G]=0;for(var G=0;G<65537;++G)L[ne[G]]+=1;for(var re=0,G=58;G>0;--G){var he=re+L[G]>>1;L[G]=re,re=he}for(var G=0;G<65537;++G){var le=ne[G];le>0&&(ne[G]=le|L[le]++<<6)}}function J(ne,G,re,he,le,me,Ge){for(var Qe=re,Ke=0,Ne=0;le<=me;le++){if(Qe.value-re.value>he)return!1;z(6,Ke,Ne,ne,Qe);var Je=R.l;if(Ke=R.c,Ne=R.lc,Ge[le]=Je,Je==63){if(Qe.value-re.value>he)throw"Something wrong with hufUnpackEncTable";z(8,Ke,Ne,ne,Qe);var Te=R.l+6;if(Ke=R.c,Ne=R.lc,le+Te>me+1)throw"Something wrong with hufUnpackEncTable";for(;Te--;)Ge[le++]=0;le--}else if(Je>=59){var Te=Je-59+2;if(le+Te>me+1)throw"Something wrong with hufUnpackEncTable";for(;Te--;)Ge[le++]=0;le--}}H(Ge)}function Z(ne){return ne&63}function U(ne){return ne>>6}function X(ne,G,re,he){for(;G<=re;G++){var le=U(ne[G]),me=Z(ne[G]);if(le>>me)throw"Invalid table entry";if(me>14){var Ge=he[le>>me-14];if(Ge.len)throw"Invalid table entry";if(Ge.lit++,Ge.p){var Qe=Ge.p;Ge.p=new Array(Ge.lit);for(var Ke=0;Ke<Ge.lit-1;++Ke)Ge.p[Ke]=Qe[Ke]}else Ge.p=new Array(1);Ge.p[Ge.lit-1]=G}else if(me)for(var Ne=0,Ke=1<<14-me;Ke>0;Ke--){var Ge=he[(le<<14-me)+Ne];if(Ge.len||Ge.p)throw"Invalid table entry";Ge.len=me,Ge.lit=G,Ne++}}return!0}const Y={c:0,lc:0};function O(ne,G,re,he){ne=ne<<8|ce(re,he),G+=8,Y.c=ne,Y.lc=G}const W={c:0,lc:0};function $(ne,G,re,he,le,me,Ge,Qe,Ke,Ne){if(ne==G){he<8&&(O(re,he,le,Ge),re=Y.c,he=Y.lc),he-=8;var Je=re>>he,Je=new Uint8Array([Je])[0];if(Ke.value+Je>Ne)return!1;for(var Te=Qe[Ke.value-1];Je-- >0;)Qe[Ke.value++]=Te}else if(Ke.value<Ne)Qe[Ke.value++]=ne;else return!1;W.c=re,W.lc=he}function k(ne){return ne&65535}function V(ne){var G=k(ne);return G>32767?G-65536:G}const Q={a:0,b:0};function j(ne,G){var re=V(ne),he=V(G),le=he,me=re+(le&1)+(le>>1),Ge=me,Qe=me-le;Q.a=Ge,Q.b=Qe}function oe(ne,G){var re=k(ne),he=k(G),le=re-(he>>1)&65535,me=he+le-32768&65535;Q.a=me,Q.b=le}function xe(ne,G,re,he,le,me,Ge){for(var Qe=Ge<16384,Ke=re>le?le:re,Ne=1,Je;Ne<=Ke;)Ne<<=1;for(Ne>>=1,Je=Ne,Ne>>=1;Ne>=1;){for(var Te=0,pt=Te+me*(le-Je),At=me*Ne,vt=me*Je,Nt=he*Ne,Kt=he*Je,Vt,Pt,Zt,kt;Te<=pt;Te+=vt){for(var ln=Te,Yn=Te+he*(re-Je);ln<=Yn;ln+=Kt){var on=ln+Nt,Xn=ln+At,Pn=Xn+Nt;Qe?(j(ne[ln+G],ne[Xn+G]),Vt=Q.a,Zt=Q.b,j(ne[on+G],ne[Pn+G]),Pt=Q.a,kt=Q.b,j(Vt,Pt),ne[ln+G]=Q.a,ne[on+G]=Q.b,j(Zt,kt),ne[Xn+G]=Q.a,ne[Pn+G]=Q.b):(oe(ne[ln+G],ne[Xn+G]),Vt=Q.a,Zt=Q.b,oe(ne[on+G],ne[Pn+G]),Pt=Q.a,kt=Q.b,oe(Vt,Pt),ne[ln+G]=Q.a,ne[on+G]=Q.b,oe(Zt,kt),ne[Xn+G]=Q.a,ne[Pn+G]=Q.b)}if(re&Ne){var Xn=ln+At;Qe?j(ne[ln+G],ne[Xn+G]):oe(ne[ln+G],ne[Xn+G]),Vt=Q.a,ne[Xn+G]=Q.b,ne[ln+G]=Vt}}if(le&Ne)for(var ln=Te,Yn=Te+he*(re-Je);ln<=Yn;ln+=Kt){var on=ln+Nt;Qe?j(ne[ln+G],ne[on+G]):oe(ne[ln+G],ne[on+G]),Vt=Q.a,ne[on+G]=Q.b,ne[ln+G]=Vt}Je=Ne,Ne>>=1}return Te}function pe(ne,G,re,he,le,me,Ge,Qe,Ke,Ne){for(var Je=0,Te=0,pt=Qe,At=Math.trunc(le.value+(me+7)/8);le.value<At;)for(O(Je,Te,re,le),Je=Y.c,Te=Y.lc;Te>=14;){var vt=Je>>Te-14&16383,Nt=G[vt];if(Nt.len)Te-=Nt.len,$(Nt.lit,Ge,Je,Te,re,he,le,Ke,Ne,pt),Je=W.c,Te=W.lc;else{if(!Nt.p)throw"hufDecode issues";var Kt;for(Kt=0;Kt<Nt.lit;Kt++){for(var Vt=Z(ne[Nt.p[Kt]]);Te<Vt&&le.value<At;)O(Je,Te,re,le),Je=Y.c,Te=Y.lc;if(Te>=Vt&&U(ne[Nt.p[Kt]])==(Je>>Te-Vt&(1<<Vt)-1)){Te-=Vt,$(Nt.p[Kt],Ge,Je,Te,re,he,le,Ke,Ne,pt),Je=W.c,Te=W.lc;break}}if(Kt==Nt.lit)throw"hufDecode issues"}}var Pt=8-me&7;for(Je>>=Pt,Te-=Pt;Te>0;){var Nt=G[Je<<14-Te&16383];if(Nt.len)Te-=Nt.len,$(Nt.lit,Ge,Je,Te,re,he,le,Ke,Ne,pt),Je=W.c,Te=W.lc;else throw"hufDecode issues"}return!0}function de(ne,G,re,he,le,me){var Ge={value:0},Qe=re.value,Ke=st(G,re),Ne=st(G,re);re.value+=4;var Je=st(G,re);if(re.value+=4,Ke<0||Ke>=65537||Ne<0||Ne>=65537)throw"Something wrong with HUF_ENCSIZE";var Te=new Array(65537),pt=new Array(16384);D(pt);var At=he-(re.value-Qe);if(J(ne,G,re,At,Ke,Ne,Te),Je>8*(he-(re.value-Qe)))throw"Something wrong with hufUncompress";X(Te,Ke,Ne,pt),pe(Te,pt,ne,G,re,Je,Ne,me,le,Ge)}function te(ne,G,re){for(var he=0;he<re;++he)G[he]=ne[G[he]]}function Ee(ne){for(var G=1;G<ne.length;G++){var re=ne[G-1]+ne[G]-128;ne[G]=re}}function ue(ne,G){for(var re=0,he=Math.floor((ne.length+1)/2),le=0,me=ne.length-1;!(le>me||(G[le++]=ne[re++],le>me));)G[le++]=ne[he++]}function ve(ne){for(var G=ne.byteLength,re=new Array,he=0,le=new DataView(ne);G>0;){var me=le.getInt8(he++);if(me<0){var Ge=-me;G-=Ge+1;for(var Qe=0;Qe<Ge;Qe++)re.push(le.getUint8(he++))}else{var Ge=me;G-=2;for(var Ke=le.getUint8(he++),Qe=0;Qe<Ge+1;Qe++)re.push(Ke)}}return re}function ye(ne,G,re,he,le,me){var on=new DataView(me.buffer),Ge=re[ne.idx[0]].width,Qe=re[ne.idx[0]].height,Ke=3,Ne=Math.floor(Ge/8),Je=Math.ceil(Ge/8),Te=Math.ceil(Qe/8),pt=Ge-(Je-1)*8,At=Qe-(Te-1)*8,vt={value:0},Nt=new Array(Ke),Kt=new Array(Ke),Vt=new Array(Ke),Pt=new Array(Ke),Zt=new Array(Ke);for(let cn=0;cn<Ke;++cn)Zt[cn]=G[ne.idx[cn]],Nt[cn]=cn<1?0:Nt[cn-1]+Je*Te,Kt[cn]=new Float32Array(64),Vt[cn]=new Uint16Array(64),Pt[cn]=new Uint16Array(Je*64);for(let cn=0;cn<Te;++cn){var kt=8;cn==Te-1&&(kt=At);var ln=8;for(let Hn=0;Hn<Je;++Hn){Hn==Je-1&&(ln=pt);for(let pn=0;pn<Ke;++pn)Vt[pn].fill(0),Vt[pn][0]=le[Nt[pn]++],Be(vt,he,Vt[pn]),ae(Vt[pn],Kt[pn]),ie(Kt[pn]);be(Kt);for(let pn=0;pn<Ke;++pn)Re(Kt[pn],Pt[pn],Hn*64)}let di=0;for(let Hn=0;Hn<Ke;++Hn){const pn=re[ne.idx[Hn]].type;for(let vi=8*cn;vi<8*cn+kt;++vi){di=Zt[Hn][vi];for(let Us=0;Us<Ne;++Us){const ir=Us*64+(vi&7)*8;on.setUint16(di+0*2*pn,Pt[Hn][ir+0],!0),on.setUint16(di+1*2*pn,Pt[Hn][ir+1],!0),on.setUint16(di+2*2*pn,Pt[Hn][ir+2],!0),on.setUint16(di+3*2*pn,Pt[Hn][ir+3],!0),on.setUint16(di+4*2*pn,Pt[Hn][ir+4],!0),on.setUint16(di+5*2*pn,Pt[Hn][ir+5],!0),on.setUint16(di+6*2*pn,Pt[Hn][ir+6],!0),on.setUint16(di+7*2*pn,Pt[Hn][ir+7],!0),di+=8*2*pn}}if(Ne!=Je)for(let vi=8*cn;vi<8*cn+kt;++vi){const Us=Zt[Hn][vi]+8*Ne*2*pn,ir=Ne*64+(vi&7)*8;for(let so=0;so<ln;++so)on.setUint16(Us+so*2*pn,Pt[Hn][ir+so],!0)}}}for(var Yn=new Uint16Array(Ge),on=new DataView(me.buffer),Xn=0;Xn<Ke;++Xn){re[ne.idx[Xn]].decoded=!0;var Pn=re[ne.idx[Xn]].type;if(re[Xn].type==2)for(var Kn=0;Kn<Qe;++Kn){const cn=Zt[Xn][Kn];for(var ui=0;ui<Ge;++ui)Yn[ui]=on.getUint16(cn+ui*2*Pn,!0);for(var ui=0;ui<Ge;++ui)on.setFloat32(cn+ui*2*Pn,_e(Yn[ui]),!0)}}}function Be(ne,G,re){for(var he,le=1;le<64;)he=G[ne.value],he==65280?le=64:he>>8==255?le+=he&255:(re[le]=he,le++),ne.value++}function ae(ne,G){G[0]=_e(ne[0]),G[1]=_e(ne[1]),G[2]=_e(ne[5]),G[3]=_e(ne[6]),G[4]=_e(ne[14]),G[5]=_e(ne[15]),G[6]=_e(ne[27]),G[7]=_e(ne[28]),G[8]=_e(ne[2]),G[9]=_e(ne[4]),G[10]=_e(ne[7]),G[11]=_e(ne[13]),G[12]=_e(ne[16]),G[13]=_e(ne[26]),G[14]=_e(ne[29]),G[15]=_e(ne[42]),G[16]=_e(ne[3]),G[17]=_e(ne[8]),G[18]=_e(ne[12]),G[19]=_e(ne[17]),G[20]=_e(ne[25]),G[21]=_e(ne[30]),G[22]=_e(ne[41]),G[23]=_e(ne[43]),G[24]=_e(ne[9]),G[25]=_e(ne[11]),G[26]=_e(ne[18]),G[27]=_e(ne[24]),G[28]=_e(ne[31]),G[29]=_e(ne[40]),G[30]=_e(ne[44]),G[31]=_e(ne[53]),G[32]=_e(ne[10]),G[33]=_e(ne[19]),G[34]=_e(ne[23]),G[35]=_e(ne[32]),G[36]=_e(ne[39]),G[37]=_e(ne[45]),G[38]=_e(ne[52]),G[39]=_e(ne[54]),G[40]=_e(ne[20]),G[41]=_e(ne[22]),G[42]=_e(ne[33]),G[43]=_e(ne[38]),G[44]=_e(ne[46]),G[45]=_e(ne[51]),G[46]=_e(ne[55]),G[47]=_e(ne[60]),G[48]=_e(ne[21]),G[49]=_e(ne[34]),G[50]=_e(ne[37]),G[51]=_e(ne[47]),G[52]=_e(ne[50]),G[53]=_e(ne[56]),G[54]=_e(ne[59]),G[55]=_e(ne[61]),G[56]=_e(ne[35]),G[57]=_e(ne[36]),G[58]=_e(ne[48]),G[59]=_e(ne[49]),G[60]=_e(ne[57]),G[61]=_e(ne[58]),G[62]=_e(ne[62]),G[63]=_e(ne[63])}function ie(ne){const G=.5*Math.cos(.7853975),re=.5*Math.cos(3.14159/16),he=.5*Math.cos(3.14159/8),le=.5*Math.cos(3*3.14159/16),me=.5*Math.cos(5*3.14159/16),Ge=.5*Math.cos(3*3.14159/8),Qe=.5*Math.cos(7*3.14159/16);for(var Ke=new Array(4),Ne=new Array(4),Je=new Array(4),Te=new Array(4),pt=0;pt<8;++pt){var At=pt*8;Ke[0]=he*ne[At+2],Ke[1]=Ge*ne[At+2],Ke[2]=he*ne[At+6],Ke[3]=Ge*ne[At+6],Ne[0]=re*ne[At+1]+le*ne[At+3]+me*ne[At+5]+Qe*ne[At+7],Ne[1]=le*ne[At+1]-Qe*ne[At+3]-re*ne[At+5]-me*ne[At+7],Ne[2]=me*ne[At+1]-re*ne[At+3]+Qe*ne[At+5]+le*ne[At+7],Ne[3]=Qe*ne[At+1]-me*ne[At+3]+le*ne[At+5]-re*ne[At+7],Je[0]=G*(ne[At+0]+ne[At+4]),Je[3]=G*(ne[At+0]-ne[At+4]),Je[1]=Ke[0]+Ke[3],Je[2]=Ke[1]-Ke[2],Te[0]=Je[0]+Je[1],Te[1]=Je[3]+Je[2],Te[2]=Je[3]-Je[2],Te[3]=Je[0]-Je[1],ne[At+0]=Te[0]+Ne[0],ne[At+1]=Te[1]+Ne[1],ne[At+2]=Te[2]+Ne[2],ne[At+3]=Te[3]+Ne[3],ne[At+4]=Te[3]-Ne[3],ne[At+5]=Te[2]-Ne[2],ne[At+6]=Te[1]-Ne[1],ne[At+7]=Te[0]-Ne[0]}for(var vt=0;vt<8;++vt)Ke[0]=he*ne[16+vt],Ke[1]=Ge*ne[16+vt],Ke[2]=he*ne[48+vt],Ke[3]=Ge*ne[48+vt],Ne[0]=re*ne[8+vt]+le*ne[24+vt]+me*ne[40+vt]+Qe*ne[56+vt],Ne[1]=le*ne[8+vt]-Qe*ne[24+vt]-re*ne[40+vt]-me*ne[56+vt],Ne[2]=me*ne[8+vt]-re*ne[24+vt]+Qe*ne[40+vt]+le*ne[56+vt],Ne[3]=Qe*ne[8+vt]-me*ne[24+vt]+le*ne[40+vt]-re*ne[56+vt],Je[0]=G*(ne[vt]+ne[32+vt]),Je[3]=G*(ne[vt]-ne[32+vt]),Je[1]=Ke[0]+Ke[3],Je[2]=Ke[1]-Ke[2],Te[0]=Je[0]+Je[1],Te[1]=Je[3]+Je[2],Te[2]=Je[3]-Je[2],Te[3]=Je[0]-Je[1],ne[0+vt]=Te[0]+Ne[0],ne[8+vt]=Te[1]+Ne[1],ne[16+vt]=Te[2]+Ne[2],ne[24+vt]=Te[3]+Ne[3],ne[32+vt]=Te[3]-Ne[3],ne[40+vt]=Te[2]-Ne[2],ne[48+vt]=Te[1]-Ne[1],ne[56+vt]=Te[0]-Ne[0]}function be(ne){for(var G=0;G<64;++G){var re=ne[0][G],he=ne[1][G],le=ne[2][G];ne[0][G]=re+1.5747*le,ne[1][G]=re-.1873*he-.4682*le,ne[2][G]=re+1.8556*he}}function Re(ne,G,re){for(var he=0;he<64;++he)G[re+he]=ja.toHalfFloat(ct(ne[he]))}function ct(ne){return ne<=1?Math.sign(ne)*Math.pow(Math.abs(ne),2.2):Math.sign(ne)*Math.pow(I,Math.abs(ne)-1)}function se(ne){return new DataView(ne.array.buffer,ne.offset.value,ne.size)}function ee(ne){var G=ne.viewer.buffer.slice(ne.offset.value,ne.offset.value+ne.size),re=new Uint8Array(ve(G)),he=new Uint8Array(re.length);return Ee(re),ue(re,he),new DataView(he.buffer)}function Ae(ne){var G=ne.array.slice(ne.offset.value,ne.offset.value+ne.size),re=mg(G),he=new Uint8Array(re.length);return Ee(re),ue(re,he),new DataView(he.buffer)}function Ue(ne){for(var G=ne.viewer,re={value:ne.offset.value},he=new Uint16Array(ne.width*ne.scanlineBlockSize*(ne.channels*ne.type)),le=new Uint8Array(8192),me=0,Ge=new Array(ne.channels),Qe=0;Qe<ne.channels;Qe++)Ge[Qe]={},Ge[Qe].start=me,Ge[Qe].end=Ge[Qe].start,Ge[Qe].nx=ne.width,Ge[Qe].ny=ne.lines,Ge[Qe].size=ne.type,me+=Ge[Qe].nx*Ge[Qe].ny*Ge[Qe].size;var Ke=Me(G,re),Ne=Me(G,re);if(Ne>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Ke<=Ne)for(var Qe=0;Qe<Ne-Ke+1;Qe++)le[Qe+Ke]=De(G,re);var Je=new Uint16Array(65536),Te=T(le,Je),pt=st(G,re);de(ne.array,G,re,pt,he,me);for(var Qe=0;Qe<ne.channels;++Qe)for(var At=Ge[Qe],vt=0;vt<Ge[Qe].size;++vt)xe(he,At.start+vt,At.nx,At.size,At.ny,At.nx*At.size,Te);te(Je,he,me);for(var Nt=0,Kt=new Uint8Array(he.buffer.byteLength),Vt=0;Vt<ne.lines;Vt++)for(var Pt=0;Pt<ne.channels;Pt++){var At=Ge[Pt],Zt=At.nx*At.size,kt=new Uint8Array(he.buffer,At.end*2,Zt*2);Kt.set(kt,Nt),Nt+=Zt*2,At.end+=Zt}return new DataView(Kt.buffer)}function Ce(ne){var G=ne.array.slice(ne.offset.value,ne.offset.value+ne.size),re=mg(G);const he=ne.lines*ne.channels*ne.width,le=ne.type==1?new Uint16Array(he):new Uint32Array(he);let me=0,Ge=0;const Qe=new Array(4);for(let Ke=0;Ke<ne.lines;Ke++)for(let Ne=0;Ne<ne.channels;Ne++){let Je=0;switch(ne.type){case 1:Qe[0]=me,Qe[1]=Qe[0]+ne.width,me=Qe[1]+ne.width;for(let Te=0;Te<ne.width;++Te){const pt=re[Qe[0]++]<<8|re[Qe[1]++];Je+=pt,le[Ge]=Je,Ge++}break;case 2:Qe[0]=me,Qe[1]=Qe[0]+ne.width,Qe[2]=Qe[1]+ne.width,me=Qe[2]+ne.width;for(let Te=0;Te<ne.width;++Te){const pt=re[Qe[0]++]<<24|re[Qe[1]++]<<16|re[Qe[2]++]<<8;Je+=pt,le[Ge]=Je,Ge++}break}}return new DataView(le.buffer)}function ke(ne){var G=ne.viewer,re={value:ne.offset.value},he=new Uint8Array(ne.width*ne.lines*(ne.channels*ne.type*2)),le={version:$e(G,re),unknownUncompressedSize:$e(G,re),unknownCompressedSize:$e(G,re),acCompressedSize:$e(G,re),dcCompressedSize:$e(G,re),rleCompressedSize:$e(G,re),rleUncompressedSize:$e(G,re),rleRawSize:$e(G,re),totalAcUncompressedCount:$e(G,re),totalDcUncompressedCount:$e(G,re),acCompression:$e(G,re)};if(le.version<2)throw"EXRLoader.parse: "+wn.compression+" version "+le.version+" is unsupported";for(var me=new Array,Ge=Me(G,re)-2;Ge>0;){var Qe=We(G.buffer,re),Ke=De(G,re),Ne=Ke>>2&3,Je=(Ke>>4)-1,Te=new Int8Array([Je])[0],pt=De(G,re);me.push({name:Qe,index:Te,type:pt,compression:Ne}),Ge-=Qe.length+3}for(var At=wn.channels,vt=new Array(ne.channels),Nt=0;Nt<ne.channels;++Nt){var Kt=vt[Nt]={},Vt=At[Nt];Kt.name=Vt.name,Kt.compression=0,Kt.decoded=!1,Kt.type=Vt.pixelType,Kt.pLinear=Vt.pLinear,Kt.width=ne.width,Kt.height=ne.lines}for(var Pt={idx:new Array(3)},Zt=0;Zt<ne.channels;++Zt)for(var Kt=vt[Zt],Nt=0;Nt<me.length;++Nt){var kt=me[Nt];Kt.name==kt.name&&(Kt.compression=kt.compression,kt.index>=0&&(Pt.idx[kt.index]=Zt),Kt.offset=Zt)}if(le.acCompressedSize>0)switch(le.acCompression){case 0:var on=new Uint16Array(le.totalAcUncompressedCount);de(ne.array,G,re,le.acCompressedSize,on,le.totalAcUncompressedCount);break;case 1:var ln=ne.array.slice(re.value,re.value+le.totalAcUncompressedCount),Yn=mg(ln),on=new Uint16Array(Yn.buffer);re.value+=le.totalAcUncompressedCount;break}if(le.dcCompressedSize>0){var Xn={array:ne.array,offset:re,size:le.dcCompressedSize},Pn=new Uint16Array(Ae(Xn).buffer);re.value+=le.dcCompressedSize}if(le.rleRawSize>0){var ln=ne.array.slice(re.value,re.value+le.rleCompressedSize),Yn=mg(ln),Kn=ve(Yn.buffer);re.value+=le.rleCompressedSize}for(var ui=0,cn=new Array(vt.length),Nt=0;Nt<cn.length;++Nt)cn[Nt]=new Array;for(var di=0;di<ne.lines;++di)for(var Hn=0;Hn<vt.length;++Hn)cn[Hn].push(ui),ui+=vt[Hn].width*ne.type*2;ye(Pt,cn,vt,on,Pn,he);for(var Nt=0;Nt<vt.length;++Nt){var Kt=vt[Nt];if(!Kt.decoded)switch(Kt.compression){case 2:for(var pn=0,vi=0,di=0;di<ne.lines;++di){for(var Us=cn[Nt][pn],ir=0;ir<Kt.width;++ir){for(var so=0;so<2*Kt.type;++so)he[Us++]=Kn[vi+so*Kt.width*Kt.height];vi++}pn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(he.buffer)}function We(ne,G){for(var re=new Uint8Array(ne),he=0;re[G.value+he]!=0;)he+=1;var le=new TextDecoder().decode(re.slice(G.value,G.value+he));return G.value=G.value+he+1,le}function Xe(ne,G,re){var he=new TextDecoder().decode(new Uint8Array(ne).slice(G.value,G.value+re));return G.value=G.value+re,he}function Oe(ne,G){var re=lt(ne,G),he=st(ne,G);return[re,he]}function ft(ne,G){var re=st(ne,G),he=st(ne,G);return[re,he]}function lt(ne,G){var re=ne.getInt32(G.value,!0);return G.value=G.value+4,re}function st(ne,G){var re=ne.getUint32(G.value,!0);return G.value=G.value+4,re}function ce(ne,G){var re=ne[G.value];return G.value=G.value+1,re}function De(ne,G){var re=ne.getUint8(G.value);return G.value=G.value+1,re}const $e=function(ne,G){let re;return"getBigInt64"in DataView.prototype?re=Number(ne.getBigInt64(G.value,!0)):re=ne.getUint32(G.value+4,!0)+Number(ne.getUint32(G.value,!0)<<32),G.value+=8,re};function Ye(ne,G){var re=ne.getFloat32(G.value,!0);return G.value+=4,re}function fe(ne,G){return ja.toHalfFloat(Ye(ne,G))}function _e(ne){var G=(ne&31744)>>10,re=ne&1023;return(ne>>15?-1:1)*(G?G===31?re?NaN:1/0:Math.pow(2,G-15)*(1+re/1024):6103515625e-14*(re/1024))}function Me(ne,G){var re=ne.getUint16(G.value,!0);return G.value+=2,re}function at(ne,G){return _e(Me(ne,G))}function ot(ne,G,re,he){for(var le=re.value,me=[];re.value<le+he-1;){var Ge=We(G,re),Qe=lt(ne,re),Ke=De(ne,re);re.value+=3;var Ne=lt(ne,re),Je=lt(ne,re);me.push({name:Ge,pixelType:Qe,pLinear:Ke,xSampling:Ne,ySampling:Je})}return re.value+=1,me}function yt(ne,G){var re=Ye(ne,G),he=Ye(ne,G),le=Ye(ne,G),me=Ye(ne,G),Ge=Ye(ne,G),Qe=Ye(ne,G),Ke=Ye(ne,G),Ne=Ye(ne,G);return{redX:re,redY:he,greenX:le,greenY:me,blueX:Ge,blueY:Qe,whiteX:Ke,whiteY:Ne}}function we(ne,G){var re=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],he=De(ne,G);return re[he]}function Ie(ne,G){var re=st(ne,G),he=st(ne,G),le=st(ne,G),me=st(ne,G);return{xMin:re,yMin:he,xMax:le,yMax:me}}function Fe(ne,G){var re=["INCREASING_Y"],he=De(ne,G);return re[he]}function qe(ne,G){var re=Ye(ne,G),he=Ye(ne,G);return[re,he]}function ut(ne,G){var re=Ye(ne,G),he=Ye(ne,G),le=Ye(ne,G);return[re,he,le]}function Mt(ne,G,re,he,le){if(he==="string"||he==="stringvector"||he==="iccProfile")return Xe(G,re,le);if(he==="chlist")return ot(ne,G,re,le);if(he==="chromaticities")return yt(ne,re);if(he==="compression")return we(ne,re);if(he==="box2i")return Ie(ne,re);if(he==="lineOrder")return Fe(ne,re);if(he==="float")return Ye(ne,re);if(he==="v2f")return qe(ne,re);if(he==="v3f")return ut(ne,re);if(he==="int")return lt(ne,re);if(he==="rational")return Oe(ne,re);if(he==="timecode")return ft(ne,re);if(he==="preview")return re.value+=le,"skipped";re.value+=le}function It(ne,G,re){const he={};if(ne.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";he.version=ne.getUint8(4);const le=ne.getUint8(5);he.spec={singleTile:!!(le&2),longName:!!(le&4),deepFormat:!!(le&8),multiPart:!!(le&16)},re.value=8;for(var me=!0;me;){var Ge=We(G,re);if(Ge==0)me=!1;else{var Qe=We(G,re),Ke=st(ne,re),Ne=Mt(ne,G,re,Qe,Ke);Ne===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Qe}'.`):he[Ge]=Ne}}if(le&-5)throw console.error("EXRHeader:",he),"THREE.EXRLoader: provided file is currently unsupported.";return he}function wt(ne,G,re,he,le){const me={size:0,viewer:G,array:re,offset:he,width:ne.dataWindow.xMax-ne.dataWindow.xMin+1,height:ne.dataWindow.yMax-ne.dataWindow.yMin+1,channels:ne.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:ne.channels[0].pixelType,uncompress:null,getter:null,format:null,[k1?"colorSpace":"encoding"]:null};switch(ne.compression){case"NO_COMPRESSION":me.lines=1,me.uncompress=se;break;case"RLE_COMPRESSION":me.lines=1,me.uncompress=ee;break;case"ZIPS_COMPRESSION":me.lines=1,me.uncompress=Ae;break;case"ZIP_COMPRESSION":me.lines=16,me.uncompress=Ae;break;case"PIZ_COMPRESSION":me.lines=32,me.uncompress=Ue;break;case"PXR24_COMPRESSION":me.lines=16,me.uncompress=Ce;break;case"DWAA_COMPRESSION":me.lines=32,me.uncompress=ke;break;case"DWAB_COMPRESSION":me.lines=256,me.uncompress=ke;break;default:throw"EXRLoader.parse: "+ne.compression+" is unsupported"}if(me.scanlineBlockSize=me.lines,me.type==1)switch(le){case Ln:me.getter=at,me.inputSize=2;break;case jn:me.getter=Me,me.inputSize=2;break}else if(me.type==2)switch(le){case Ln:me.getter=Ye,me.inputSize=4;break;case jn:me.getter=fe,me.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+me.type+" for "+ne.compression+".";me.blockCount=(ne.dataWindow.yMax+1)/me.scanlineBlockSize;for(var Ge=0;Ge<me.blockCount;Ge++)$e(G,he);me.outputChannels=me.channels==3?4:me.channels;const Qe=me.width*me.height*me.outputChannels;switch(le){case Ln:me.byteArray=new Float32Array(Qe),me.channels<me.outputChannels&&me.byteArray.fill(1,0,Qe);break;case jn:me.byteArray=new Uint16Array(Qe),me.channels<me.outputChannels&&me.byteArray.fill(15360,0,Qe);break;default:console.error("THREE.EXRLoader: unsupported type: ",le);break}return me.bytesPerLine=me.width*me.inputSize*me.channels,me.outputChannels==4?me.format=Vn:me.format=la,k1?me.colorSpace="srgb-linear":me.encoding=3e3,me}const Ht=new DataView(e),zt=new Uint8Array(e),Fn={value:0},wn=It(Ht,e,Fn),ht=wt(wn,Ht,zt,Fn,this.type),un={value:0},Jn={R:0,G:1,B:2,A:3,Y:0};for(let ne=0;ne<ht.height/ht.scanlineBlockSize;ne++){const G=st(Ht,Fn);ht.size=st(Ht,Fn),ht.lines=G+ht.scanlineBlockSize>ht.height?ht.height-G:ht.scanlineBlockSize;const he=ht.size<ht.lines*ht.bytesPerLine?ht.uncompress(ht):se(ht);Fn.value+=ht.size;for(let le=0;le<ht.scanlineBlockSize;le++){const me=le+ne*ht.scanlineBlockSize;if(me>=ht.height)break;for(let Ge=0;Ge<ht.channels;Ge++){const Qe=Jn[wn.channels[Ge].name];for(let Ke=0;Ke<ht.width;Ke++){un.value=(le*(ht.channels*ht.width)+Ge*ht.width+Ke)*ht.inputSize;const Ne=(ht.height-1-me)*(ht.width*ht.outputChannels)+Ke*ht.outputChannels+Qe;ht.byteArray[Ne]=ht.getter(he,un)}}}}return{header:wn,width:ht.width,height:ht.height,data:ht.byteArray,format:ht.format,[k1?"colorSpace":"encoding"]:ht[k1?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){k1?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Xt,o.magFilter=Xt,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const QAe="srgb";class qg extends nr{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,i,r){const s=this,o=new ji(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this;function i(k,V){if(k.nodeType!==1)return;const Q=w(k);let j=!1,oe=null;switch(k.nodeName){case"svg":V=m(k,V);break;case"style":s(k);break;case"g":V=m(k,V);break;case"path":V=m(k,V),k.hasAttribute("d")&&(oe=r(k));break;case"rect":V=m(k,V),oe=l(k);break;case"polygon":V=m(k,V),oe=c(k);break;case"polyline":V=m(k,V),oe=u(k);break;case"circle":V=m(k,V),oe=f(k);break;case"ellipse":V=m(k,V),oe=h(k);break;case"line":V=m(k,V),oe=d(k);break;case"defs":j=!0;break;case"use":V=m(k,V);const de=(k.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),te=k.viewportElement.getElementById(de);te?i(te,V):console.warn("SVGLoader: 'use node' references non-existent node id: "+de);break}oe&&(V.fill!==void 0&&V.fill!=="none"&&oe.color.setStyle(V.fill,QAe),C(oe,O),R.push(oe),oe.userData={node:k,style:V});const xe=k.childNodes;for(let pe=0;pe<xe.length;pe++){const de=xe[pe];j&&de.nodeName!=="style"&&de.nodeName!=="defs"||i(de,V)}Q&&(L.pop(),L.length>0?O.copy(L[L.length-1]):O.identity())}function r(k){const V=new dc,Q=new Se,j=new Se,oe=new Se;let xe=!0,pe=!1;const de=k.getAttribute("d");if(de===""||de==="none")return null;const te=de.match(/[a-df-z][^a-df-z]*/gi);for(let Ee=0,ue=te.length;Ee<ue;Ee++){const ve=te[Ee],ye=ve.charAt(0),Be=ve.slice(1).trim();xe===!0&&(pe=!0,xe=!1);let ae;switch(ye){case"M":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=2)Q.x=ae[ie+0],Q.y=ae[ie+1],j.x=Q.x,j.y=Q.y,ie===0?V.moveTo(Q.x,Q.y):V.lineTo(Q.x,Q.y),ie===0&&oe.copy(Q);break;case"H":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie++)Q.x=ae[ie],j.x=Q.x,j.y=Q.y,V.lineTo(Q.x,Q.y),ie===0&&pe===!0&&oe.copy(Q);break;case"V":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie++)Q.y=ae[ie],j.x=Q.x,j.y=Q.y,V.lineTo(Q.x,Q.y),ie===0&&pe===!0&&oe.copy(Q);break;case"L":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=2)Q.x=ae[ie+0],Q.y=ae[ie+1],j.x=Q.x,j.y=Q.y,V.lineTo(Q.x,Q.y),ie===0&&pe===!0&&oe.copy(Q);break;case"C":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=6)V.bezierCurveTo(ae[ie+0],ae[ie+1],ae[ie+2],ae[ie+3],ae[ie+4],ae[ie+5]),j.x=ae[ie+2],j.y=ae[ie+3],Q.x=ae[ie+4],Q.y=ae[ie+5],ie===0&&pe===!0&&oe.copy(Q);break;case"S":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=4)V.bezierCurveTo(g(Q.x,j.x),g(Q.y,j.y),ae[ie+0],ae[ie+1],ae[ie+2],ae[ie+3]),j.x=ae[ie+0],j.y=ae[ie+1],Q.x=ae[ie+2],Q.y=ae[ie+3],ie===0&&pe===!0&&oe.copy(Q);break;case"Q":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=4)V.quadraticCurveTo(ae[ie+0],ae[ie+1],ae[ie+2],ae[ie+3]),j.x=ae[ie+0],j.y=ae[ie+1],Q.x=ae[ie+2],Q.y=ae[ie+3],ie===0&&pe===!0&&oe.copy(Q);break;case"T":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=2){const Re=g(Q.x,j.x),ct=g(Q.y,j.y);V.quadraticCurveTo(Re,ct,ae[ie+0],ae[ie+1]),j.x=Re,j.y=ct,Q.x=ae[ie+0],Q.y=ae[ie+1],ie===0&&pe===!0&&oe.copy(Q)}break;case"A":ae=v(Be,[3,4],7);for(let ie=0,be=ae.length;ie<be;ie+=7){if(ae[ie+5]==Q.x&&ae[ie+6]==Q.y)continue;const Re=Q.clone();Q.x=ae[ie+5],Q.y=ae[ie+6],j.x=Q.x,j.y=Q.y,o(V,ae[ie],ae[ie+1],ae[ie+2],ae[ie+3],ae[ie+4],Re,Q),ie===0&&pe===!0&&oe.copy(Q)}break;case"m":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=2)Q.x+=ae[ie+0],Q.y+=ae[ie+1],j.x=Q.x,j.y=Q.y,ie===0?V.moveTo(Q.x,Q.y):V.lineTo(Q.x,Q.y),ie===0&&oe.copy(Q);break;case"h":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie++)Q.x+=ae[ie],j.x=Q.x,j.y=Q.y,V.lineTo(Q.x,Q.y),ie===0&&pe===!0&&oe.copy(Q);break;case"v":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie++)Q.y+=ae[ie],j.x=Q.x,j.y=Q.y,V.lineTo(Q.x,Q.y),ie===0&&pe===!0&&oe.copy(Q);break;case"l":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=2)Q.x+=ae[ie+0],Q.y+=ae[ie+1],j.x=Q.x,j.y=Q.y,V.lineTo(Q.x,Q.y),ie===0&&pe===!0&&oe.copy(Q);break;case"c":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=6)V.bezierCurveTo(Q.x+ae[ie+0],Q.y+ae[ie+1],Q.x+ae[ie+2],Q.y+ae[ie+3],Q.x+ae[ie+4],Q.y+ae[ie+5]),j.x=Q.x+ae[ie+2],j.y=Q.y+ae[ie+3],Q.x+=ae[ie+4],Q.y+=ae[ie+5],ie===0&&pe===!0&&oe.copy(Q);break;case"s":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=4)V.bezierCurveTo(g(Q.x,j.x),g(Q.y,j.y),Q.x+ae[ie+0],Q.y+ae[ie+1],Q.x+ae[ie+2],Q.y+ae[ie+3]),j.x=Q.x+ae[ie+0],j.y=Q.y+ae[ie+1],Q.x+=ae[ie+2],Q.y+=ae[ie+3],ie===0&&pe===!0&&oe.copy(Q);break;case"q":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=4)V.quadraticCurveTo(Q.x+ae[ie+0],Q.y+ae[ie+1],Q.x+ae[ie+2],Q.y+ae[ie+3]),j.x=Q.x+ae[ie+0],j.y=Q.y+ae[ie+1],Q.x+=ae[ie+2],Q.y+=ae[ie+3],ie===0&&pe===!0&&oe.copy(Q);break;case"t":ae=v(Be);for(let ie=0,be=ae.length;ie<be;ie+=2){const Re=g(Q.x,j.x),ct=g(Q.y,j.y);V.quadraticCurveTo(Re,ct,Q.x+ae[ie+0],Q.y+ae[ie+1]),j.x=Re,j.y=ct,Q.x=Q.x+ae[ie+0],Q.y=Q.y+ae[ie+1],ie===0&&pe===!0&&oe.copy(Q)}break;case"a":ae=v(Be,[3,4],7);for(let ie=0,be=ae.length;ie<be;ie+=7){if(ae[ie+5]==0&&ae[ie+6]==0)continue;const Re=Q.clone();Q.x+=ae[ie+5],Q.y+=ae[ie+6],j.x=Q.x,j.y=Q.y,o(V,ae[ie],ae[ie+1],ae[ie+2],ae[ie+3],ae[ie+4],Re,Q),ie===0&&pe===!0&&oe.copy(Q)}break;case"Z":case"z":V.currentPath.autoClose=!0,V.currentPath.curves.length>0&&(Q.copy(oe),V.currentPath.currentPoint.copy(Q),xe=!0);break;default:console.warn(ve)}pe=!1}return V}function s(k){if(!(!k.sheet||!k.sheet.cssRules||!k.sheet.cssRules.length))for(let V=0;V<k.sheet.cssRules.length;V++){const Q=k.sheet.cssRules[V];if(Q.type!==1)continue;const j=Q.selectorText.split(/,/gm).filter(Boolean).map(oe=>oe.trim());for(let oe=0;oe<j.length;oe++){const xe=Object.fromEntries(Object.entries(Q.style).filter(([,pe])=>pe!==""));z[j[oe]]=Object.assign(z[j[oe]]||{},xe)}}}function o(k,V,Q,j,oe,xe,pe,de){if(V==0||Q==0){k.lineTo(de.x,de.y);return}j=j*Math.PI/180,V=Math.abs(V),Q=Math.abs(Q);const te=(pe.x-de.x)/2,Ee=(pe.y-de.y)/2,ue=Math.cos(j)*te+Math.sin(j)*Ee,ve=-Math.sin(j)*te+Math.cos(j)*Ee;let ye=V*V,Be=Q*Q;const ae=ue*ue,ie=ve*ve,be=ae/ye+ie/Be;if(be>1){const Xe=Math.sqrt(be);V=Xe*V,Q=Xe*Q,ye=V*V,Be=Q*Q}const Re=ye*ie+Be*ae,ct=(ye*Be-Re)/Re;let se=Math.sqrt(Math.max(0,ct));oe===xe&&(se=-se);const ee=se*V*ve/Q,Ae=-se*Q*ue/V,Ue=Math.cos(j)*ee-Math.sin(j)*Ae+(pe.x+de.x)/2,Ce=Math.sin(j)*ee+Math.cos(j)*Ae+(pe.y+de.y)/2,ke=a(1,0,(ue-ee)/V,(ve-Ae)/Q),We=a((ue-ee)/V,(ve-Ae)/Q,(-ue-ee)/V,(-ve-Ae)/Q)%(Math.PI*2);k.currentPath.absellipse(Ue,Ce,V,Q,ke,ke+We,xe===0,j)}function a(k,V,Q,j){const oe=k*Q+V*j,xe=Math.sqrt(k*k+V*V)*Math.sqrt(Q*Q+j*j);let pe=Math.acos(Math.max(-1,Math.min(1,oe/xe)));return k*j-V*Q<0&&(pe=-pe),pe}function l(k){const V=y(k.getAttribute("x")||0),Q=y(k.getAttribute("y")||0),j=y(k.getAttribute("rx")||k.getAttribute("ry")||0),oe=y(k.getAttribute("ry")||k.getAttribute("rx")||0),xe=y(k.getAttribute("width")),pe=y(k.getAttribute("height")),de=1-.551915024494,te=new dc;return te.moveTo(V+j,Q),te.lineTo(V+xe-j,Q),(j!==0||oe!==0)&&te.bezierCurveTo(V+xe-j*de,Q,V+xe,Q+oe*de,V+xe,Q+oe),te.lineTo(V+xe,Q+pe-oe),(j!==0||oe!==0)&&te.bezierCurveTo(V+xe,Q+pe-oe*de,V+xe-j*de,Q+pe,V+xe-j,Q+pe),te.lineTo(V+j,Q+pe),(j!==0||oe!==0)&&te.bezierCurveTo(V+j*de,Q+pe,V,Q+pe-oe*de,V,Q+pe-oe),te.lineTo(V,Q+oe),(j!==0||oe!==0)&&te.bezierCurveTo(V,Q+oe*de,V+j*de,Q,V+j,Q),te}function c(k){function V(xe,pe,de){const te=y(pe),Ee=y(de);oe===0?j.moveTo(te,Ee):j.lineTo(te,Ee),oe++}const Q=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,j=new dc;let oe=0;return k.getAttribute("points").replace(Q,V),j.currentPath.autoClose=!0,j}function u(k){function V(xe,pe,de){const te=y(pe),Ee=y(de);oe===0?j.moveTo(te,Ee):j.lineTo(te,Ee),oe++}const Q=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,j=new dc;let oe=0;return k.getAttribute("points").replace(Q,V),j.currentPath.autoClose=!1,j}function f(k){const V=y(k.getAttribute("cx")||0),Q=y(k.getAttribute("cy")||0),j=y(k.getAttribute("r")||0),oe=new Xu;oe.absarc(V,Q,j,0,Math.PI*2);const xe=new dc;return xe.subPaths.push(oe),xe}function h(k){const V=y(k.getAttribute("cx")||0),Q=y(k.getAttribute("cy")||0),j=y(k.getAttribute("rx")||0),oe=y(k.getAttribute("ry")||0),xe=new Xu;xe.absellipse(V,Q,j,oe,0,Math.PI*2);const pe=new dc;return pe.subPaths.push(xe),pe}function d(k){const V=y(k.getAttribute("x1")||0),Q=y(k.getAttribute("y1")||0),j=y(k.getAttribute("x2")||0),oe=y(k.getAttribute("y2")||0),xe=new dc;return xe.moveTo(V,Q),xe.lineTo(j,oe),xe.currentPath.autoClose=!1,xe}function m(k,V){V=Object.assign({},V);let Q={};if(k.hasAttribute("class")){const pe=k.getAttribute("class").split(/\s/).filter(Boolean).map(de=>de.trim());for(let de=0;de<pe.length;de++)Q=Object.assign(Q,z["."+pe[de]])}k.hasAttribute("id")&&(Q=Object.assign(Q,z["#"+k.getAttribute("id")]));function j(pe,de,te){te===void 0&&(te=function(ue){return ue.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),ue}),k.hasAttribute(pe)&&(V[de]=te(k.getAttribute(pe))),Q[pe]&&(V[de]=te(Q[pe])),k.style&&k.style[pe]!==""&&(V[de]=te(k.style[pe]))}function oe(pe){return Math.max(0,Math.min(1,y(pe)))}function xe(pe){return Math.max(0,y(pe))}return j("fill","fill"),j("fill-opacity","fillOpacity",oe),j("fill-rule","fillRule"),j("opacity","opacity",oe),j("stroke","stroke"),j("stroke-opacity","strokeOpacity",oe),j("stroke-width","strokeWidth",xe),j("stroke-linejoin","strokeLineJoin"),j("stroke-linecap","strokeLineCap"),j("stroke-miterlimit","strokeMiterLimit",xe),j("visibility","visibility"),V}function g(k,V){return k-(V-k)}function v(k,V,Q){if(typeof k!="string")throw new TypeError("Invalid input: "+typeof k);const j={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},oe=0,xe=1,pe=2,de=3;let te=oe,Ee=!0,ue="",ve="";const ye=[];function Be(Re,ct,se){const ee=new SyntaxError('Unexpected character "'+Re+'" at index '+ct+".");throw ee.partial=se,ee}function ae(){ue!==""&&(ve===""?ye.push(Number(ue)):ye.push(Number(ue)*Math.pow(10,Number(ve)))),ue="",ve=""}let ie;const be=k.length;for(let Re=0;Re<be;Re++){if(ie=k[Re],Array.isArray(V)&&V.includes(ye.length%Q)&&j.FLAGS.test(ie)){te=xe,ue=ie,ae();continue}if(te===oe){if(j.WHITESPACE.test(ie))continue;if(j.DIGIT.test(ie)||j.SIGN.test(ie)){te=xe,ue=ie;continue}if(j.POINT.test(ie)){te=pe,ue=ie;continue}j.COMMA.test(ie)&&(Ee&&Be(ie,Re,ye),Ee=!0)}if(te===xe){if(j.DIGIT.test(ie)){ue+=ie;continue}if(j.POINT.test(ie)){ue+=ie,te=pe;continue}if(j.EXP.test(ie)){te=de;continue}j.SIGN.test(ie)&&ue.length===1&&j.SIGN.test(ue[0])&&Be(ie,Re,ye)}if(te===pe){if(j.DIGIT.test(ie)){ue+=ie;continue}if(j.EXP.test(ie)){te=de;continue}j.POINT.test(ie)&&ue[ue.length-1]==="."&&Be(ie,Re,ye)}if(te===de){if(j.DIGIT.test(ie)){ve+=ie;continue}if(j.SIGN.test(ie)){if(ve===""){ve+=ie;continue}ve.length===1&&j.SIGN.test(ve)&&Be(ie,Re,ye)}}j.WHITESPACE.test(ie)?(ae(),te=oe,Ee=!1):j.COMMA.test(ie)?(ae(),te=oe,Ee=!0):j.SIGN.test(ie)?(ae(),te=xe,ue=ie):j.POINT.test(ie)?(ae(),te=pe,ue=ie):Be(ie,Re,ye)}return ae(),ye}const p=["mm","cm","in","pt","pc","px"],A={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function y(k){let V="px";if(typeof k=="string"||k instanceof String)for(let j=0,oe=p.length;j<oe;j++){const xe=p[j];if(k.endsWith(xe)){V=xe,k=k.substring(0,k.length-xe.length);break}}let Q;return V==="px"&&t.defaultUnit!=="px"?Q=A.in[t.defaultUnit]/t.defaultDPI:(Q=A[V][t.defaultUnit],Q<0&&(Q=A[V].in*t.defaultDPI)),Q*parseFloat(k)}function w(k){if(!(k.hasAttribute("transform")||k.nodeName==="use"&&(k.hasAttribute("x")||k.hasAttribute("y"))))return null;const V=S(k);return L.length>0&&V.premultiply(L[L.length-1]),O.copy(V),L.push(V),V}function S(k){const V=new tn,Q=H;if(k.nodeName==="use"&&(k.hasAttribute("x")||k.hasAttribute("y"))){const j=y(k.getAttribute("x")),oe=y(k.getAttribute("y"));V.translate(j,oe)}if(k.hasAttribute("transform")){const j=k.getAttribute("transform").split(")");for(let oe=j.length-1;oe>=0;oe--){const xe=j[oe].trim();if(xe==="")continue;const pe=xe.indexOf("("),de=xe.length;if(pe>0&&pe<de){const te=xe.slice(0,pe),Ee=v(xe.slice(pe+1));switch(Q.identity(),te){case"translate":if(Ee.length>=1){const ue=Ee[0];let ve=0;Ee.length>=2&&(ve=Ee[1]),Q.translate(ue,ve)}break;case"rotate":if(Ee.length>=1){let ue=0,ve=0,ye=0;ue=Ee[0]*Math.PI/180,Ee.length>=3&&(ve=Ee[1],ye=Ee[2]),J.makeTranslation(-ve,-ye),Z.makeRotation(ue),U.multiplyMatrices(Z,J),J.makeTranslation(ve,ye),Q.multiplyMatrices(J,U)}break;case"scale":if(Ee.length>=1){const ue=Ee[0];let ve=ue;Ee.length>=2&&(ve=Ee[1]),Q.scale(ue,ve)}break;case"skewX":Ee.length===1&&Q.set(1,Math.tan(Ee[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":Ee.length===1&&Q.set(1,0,0,Math.tan(Ee[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":Ee.length===6&&Q.set(Ee[0],Ee[2],Ee[4],Ee[1],Ee[3],Ee[5],0,0,1);break}}V.premultiply(Q)}}return V}function C(k,V){function Q(pe){Y.set(pe.x,pe.y,1).applyMatrix3(V),pe.set(Y.x,Y.y)}function j(pe){const de=pe.xRadius,te=pe.yRadius,Ee=Math.cos(pe.aRotation),ue=Math.sin(pe.aRotation),ve=new F(de*Ee,de*ue,0),ye=new F(-te*ue,te*Ee,0),Be=ve.applyMatrix3(V),ae=ye.applyMatrix3(V),ie=H.set(Be.x,ae.x,0,Be.y,ae.y,0,0,0,1),be=J.copy(ie).invert(),se=Z.copy(be).transpose().multiply(be).elements,ee=D(se[0],se[1],se[4]),Ae=Math.sqrt(ee.rt1),Ue=Math.sqrt(ee.rt2);if(pe.xRadius=1/Ae,pe.yRadius=1/Ue,pe.aRotation=Math.atan2(ee.sn,ee.cs),!((pe.aEndAngle-pe.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const ke=J.set(Ae,0,0,0,Ue,0,0,0,1),We=Z.set(ee.cs,ee.sn,0,-ee.sn,ee.cs,0,0,0,1),Xe=ke.multiply(We).multiply(ie),Oe=ft=>{const{x:lt,y:st}=new F(Math.cos(ft),Math.sin(ft),0).applyMatrix3(Xe);return Math.atan2(st,lt)};pe.aStartAngle=Oe(pe.aStartAngle),pe.aEndAngle=Oe(pe.aEndAngle),b(V)&&(pe.aClockwise=!pe.aClockwise)}}function oe(pe){const de=I(V),te=T(V);pe.xRadius*=de,pe.yRadius*=te;const Ee=de>Number.EPSILON?Math.atan2(V.elements[1],V.elements[0]):Math.atan2(-V.elements[3],V.elements[4]);pe.aRotation+=Ee,b(V)&&(pe.aStartAngle*=-1,pe.aEndAngle*=-1,pe.aClockwise=!pe.aClockwise)}const xe=k.subPaths;for(let pe=0,de=xe.length;pe<de;pe++){const Ee=xe[pe].curves;for(let ue=0;ue<Ee.length;ue++){const ve=Ee[ue];ve.isLineCurve?(Q(ve.v1),Q(ve.v2)):ve.isCubicBezierCurve?(Q(ve.v0),Q(ve.v1),Q(ve.v2),Q(ve.v3)):ve.isQuadraticBezierCurve?(Q(ve.v0),Q(ve.v1),Q(ve.v2)):ve.isEllipseCurve&&(X.set(ve.aX,ve.aY),Q(X),ve.aX=X.x,ve.aY=X.y,M(V)?j(ve):oe(ve))}}}function b(k){const V=k.elements;return V[0]*V[4]-V[1]*V[3]<0}function M(k){const V=k.elements,Q=V[0]*V[3]+V[1]*V[4];if(Q===0)return!1;const j=I(k),oe=T(k);return Math.abs(Q/(j*oe))>Number.EPSILON}function I(k){const V=k.elements;return Math.sqrt(V[0]*V[0]+V[1]*V[1])}function T(k){const V=k.elements;return Math.sqrt(V[3]*V[3]+V[4]*V[4])}function D(k,V,Q){let j,oe,xe,pe,de;const te=k+Q,Ee=k-Q,ue=Math.sqrt(Ee*Ee+4*V*V);return te>0?(j=.5*(te+ue),de=1/j,oe=k*de*Q-V*de*V):te<0?oe=.5*(te-ue):(j=.5*ue,oe=-.5*ue),Ee>0?xe=Ee+ue:xe=Ee-ue,Math.abs(xe)>2*Math.abs(V)?(de=-2*V/xe,pe=1/Math.sqrt(1+de*de),xe=de*pe):Math.abs(V)===0?(xe=1,pe=0):(de=-.5*xe/V,xe=1/Math.sqrt(1+de*de),pe=de*xe),Ee>0&&(de=xe,xe=-pe,pe=de),{rt1:j,rt2:oe,cs:xe,sn:pe}}const R=[],z={},L=[],H=new tn,J=new tn,Z=new tn,U=new tn,X=new Se,Y=new F,O=new tn,W=new DOMParser().parseFromString(e,"image/svg+xml");return i(W.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:R,xml:W.documentElement}}static createShapes(e){const i={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},r={loc:i.ORIGIN,t:0};function s(g,v,p,A){const y=g.x,w=v.x,S=p.x,C=A.x,b=g.y,M=v.y,I=p.y,T=A.y,D=(C-S)*(b-I)-(T-I)*(y-S),R=(w-y)*(b-I)-(M-b)*(y-S),z=(T-I)*(w-y)-(C-S)*(M-b),L=D/z,H=R/z;if(z===0&&D!==0||L<=0||L>=1||H<0||H>1)return null;if(D===0&&z===0){for(let J=0;J<2;J++)if(o(J===0?p:A,g,v),r.loc==i.ORIGIN){const Z=J===0?p:A;return{x:Z.x,y:Z.y,t:r.t}}else if(r.loc==i.BETWEEN){const Z=+(y+r.t*(w-y)).toPrecision(10),U=+(b+r.t*(M-b)).toPrecision(10);return{x:Z,y:U,t:r.t}}return null}else{for(let U=0;U<2;U++)if(o(U===0?p:A,g,v),r.loc==i.ORIGIN){const X=U===0?p:A;return{x:X.x,y:X.y,t:r.t}}const J=+(y+L*(w-y)).toPrecision(10),Z=+(b+L*(M-b)).toPrecision(10);return{x:J,y:Z,t:L}}}function o(g,v,p){const A=p.x-v.x,y=p.y-v.y,w=g.x-v.x,S=g.y-v.y,C=A*S-w*y;if(g.x===v.x&&g.y===v.y){r.loc=i.ORIGIN,r.t=0;return}if(g.x===p.x&&g.y===p.y){r.loc=i.DESTINATION,r.t=1;return}if(C<-Number.EPSILON){r.loc=i.LEFT;return}if(C>Number.EPSILON){r.loc=i.RIGHT;return}if(A*w<0||y*S<0){r.loc=i.BEHIND;return}if(Math.sqrt(A*A+y*y)<Math.sqrt(w*w+S*S)){r.loc=i.BEYOND;return}let b;A!==0?b=w/A:b=S/y,r.loc=i.BETWEEN,r.t=b}function a(g,v){const p=[],A=[];for(let y=1;y<g.length;y++){const w=g[y-1],S=g[y];for(let C=1;C<v.length;C++){const b=v[C-1],M=v[C],I=s(w,S,b,M);I!==null&&p.find(T=>T.t<=I.t+Number.EPSILON&&T.t>=I.t-Number.EPSILON)===void 0&&(p.push(I),A.push(new Se(I.x,I.y)))}}return A}function l(g,v,p){const A=new Se;v.getCenter(A);const y=[];return p.forEach(w=>{w.boundingBox.containsPoint(A)&&a(g,w.points).forEach(C=>{y.push({identifier:w.identifier,isCW:w.isCW,point:C})})}),y.sort((w,S)=>w.point.x-S.point.x),y}function c(g,v,p,A,y){(y==null||y==="")&&(y="nonzero");const w=new Se;g.boundingBox.getCenter(w);const S=[new Se(p,w.y),new Se(A,w.y)],C=l(S,g.boundingBox,v);C.sort((R,z)=>R.point.x-z.point.x);const b=[],M=[];C.forEach(R=>{R.identifier===g.identifier?b.push(R):M.push(R)});const I=b[0].point.x,T=[];let D=0;for(;D<M.length&&M[D].point.x<I;)T.length>0&&T[T.length-1]===M[D].identifier?T.pop():T.push(M[D].identifier),D++;if(T.push(g.identifier),y==="evenodd"){const R=T.length%2===0,z=T[T.length-2];return{identifier:g.identifier,isHole:R,for:z}}else if(y==="nonzero"){let R=!0,z=null,L=null;for(let H=0;H<T.length;H++){const J=T[H];R?(L=v[J].isCW,R=!1,z=J):L!==v[J].isCW&&(L=v[J].isCW,R=!0)}return{identifier:g.identifier,isHole:R,for:z}}else console.warn('fill-rule: "'+y+'" is currently not implemented.')}let u=999999999,f=-999999999,h=e.subPaths.map(g=>{const v=g.getPoints();let p=-999999999,A=999999999,y=-999999999,w=999999999;for(let S=0;S<v.length;S++){const C=v[S];C.y>p&&(p=C.y),C.y<A&&(A=C.y),C.x>y&&(y=C.x),C.x<w&&(w=C.x)}return f<=y&&(f=y+1),u>=w&&(u=w-1),{curves:g.curves,points:v,isCW:Ka.isClockWise(v),identifier:-1,boundingBox:new dQ(new Se(w,A),new Se(y,p))}});h=h.filter(g=>g.points.length>1);for(let g=0;g<h.length;g++)h[g].identifier=g;const d=h.map(g=>c(g,h,u,f,e.userData?e.userData.style.fillRule:void 0)),m=[];return h.forEach(g=>{if(!d[g.identifier].isHole){const p=new Cc;p.curves=g.curves,d.filter(y=>y.isHole&&y.for===g.identifier).forEach(y=>{const w=h[y.identifier],S=new Xu;S.curves=w.curves,p.holes.push(S)}),m.push(p)}}),m}static getStrokeStyle(e,t,i,r,s){return e=e!==void 0?e:1,t=t!==void 0?t:"#000",i=i!==void 0?i:"miter",r=r!==void 0?r:"butt",s=s!==void 0?s:4,{strokeColor:t,strokeWidth:e,strokeLineJoin:i,strokeLineCap:r,strokeMiterLimit:s}}static pointsToStroke(e,t,i,r){const s=[],o=[],a=[];if(qg.pointsToStrokeWithBuffers(e,t,i,r,s,o,a)===0)return null;const l=new Gt;return l.setAttribute("position",new Et(s,3)),l.setAttribute("normal",new Et(o,3)),l.setAttribute("uv",new Et(a,2)),l}static pointsToStrokeWithBuffers(e,t,i,r,s,o,a,l){const c=new Se,u=new Se,f=new Se,h=new Se,d=new Se,m=new Se,g=new Se,v=new Se,p=new Se,A=new Se,y=new Se,w=new Se,S=new Se,C=new Se,b=new Se,M=new Se,I=new Se;i=i!==void 0?i:12,r=r!==void 0?r:.001,l=l!==void 0?l:0,e=Ee(e);const T=e.length;if(T<2)return 0;const D=e[0].equals(e[T-1]);let R,z=e[0],L;const H=t.strokeWidth/2,J=1/(T-1);let Z=0,U,X,Y,O,W=!1,$=0,k=l*3,V=l*2;Q(e[0],e[1],c).multiplyScalar(H),v.copy(e[0]).sub(c),p.copy(e[0]).add(c),A.copy(v),y.copy(p);for(let ue=1;ue<T;ue++){R=e[ue],ue===T-1?D?L=e[1]:L=void 0:L=e[ue+1];const ve=c;if(Q(z,R,ve),f.copy(ve).multiplyScalar(H),w.copy(R).sub(f),S.copy(R).add(f),U=Z+J,X=!1,L!==void 0){Q(R,L,u),f.copy(u).multiplyScalar(H),C.copy(R).sub(f),b.copy(R).add(f),Y=!0,f.subVectors(L,z),ve.dot(f)<0&&(Y=!1),ue===1&&(W=Y),f.subVectors(L,R),f.normalize();const ye=Math.abs(ve.dot(f));if(ye>Number.EPSILON){const Be=H/ye;f.multiplyScalar(-Be),h.subVectors(R,z),d.copy(h).setLength(Be).add(f),M.copy(d).negate();const ae=d.length(),ie=h.length();h.divideScalar(ie),m.subVectors(L,R);const be=m.length();switch(m.divideScalar(be),h.dot(M)<ie&&m.dot(M)<be&&(X=!0),I.copy(d).add(R),M.add(R),O=!1,X?Y?(b.copy(M),S.copy(M)):(C.copy(M),w.copy(M)):xe(),t.strokeLineJoin){case"bevel":pe(Y,X,U);break;case"round":de(Y,X),Y?oe(R,w,C,U,0):oe(R,b,S,U,1);break;case"miter":case"miter-clip":default:const Re=H*t.strokeMiterLimit/ae;if(Re<1)if(t.strokeLineJoin!=="miter-clip"){pe(Y,X,U);break}else de(Y,X),Y?(m.subVectors(I,w).multiplyScalar(Re).add(w),g.subVectors(I,C).multiplyScalar(Re).add(C),j(w,U,0),j(m,U,0),j(R,U,.5),j(R,U,.5),j(m,U,0),j(g,U,0),j(R,U,.5),j(g,U,0),j(C,U,0)):(m.subVectors(I,S).multiplyScalar(Re).add(S),g.subVectors(I,b).multiplyScalar(Re).add(b),j(S,U,1),j(m,U,1),j(R,U,.5),j(R,U,.5),j(m,U,1),j(g,U,1),j(R,U,.5),j(g,U,1),j(b,U,1));else X?(Y?(j(p,Z,1),j(v,Z,0),j(I,U,0),j(p,Z,1),j(I,U,0),j(M,U,1)):(j(p,Z,1),j(v,Z,0),j(I,U,1),j(v,Z,0),j(M,U,0),j(I,U,1)),Y?C.copy(I):b.copy(I)):Y?(j(w,U,0),j(I,U,0),j(R,U,.5),j(R,U,.5),j(I,U,0),j(C,U,0)):(j(S,U,1),j(I,U,1),j(R,U,.5),j(R,U,.5),j(I,U,1),j(b,U,1)),O=!0;break}}else xe()}else xe();!D&&ue===T-1&&te(e[0],A,y,Y,!0,Z),Z=U,z=R,v.copy(C),p.copy(b)}if(!D)te(R,w,S,Y,!1,U);else if(X&&s){let ue=I,ve=M;W!==Y&&(ue=M,ve=I),Y?(O||W)&&(ve.toArray(s,0*3),ve.toArray(s,3*3),O&&ue.toArray(s,1*3)):(O||!W)&&(ve.toArray(s,1*3),ve.toArray(s,3*3),O&&ue.toArray(s,0*3))}return $;function Q(ue,ve,ye){return ye.subVectors(ve,ue),ye.set(-ye.y,ye.x).normalize()}function j(ue,ve,ye){s&&(s[k]=ue.x,s[k+1]=ue.y,s[k+2]=0,o&&(o[k]=0,o[k+1]=0,o[k+2]=1),k+=3,a&&(a[V]=ve,a[V+1]=ye,V+=2)),$+=3}function oe(ue,ve,ye,Be,ae){c.copy(ve).sub(ue).normalize(),u.copy(ye).sub(ue).normalize();let ie=Math.PI;const be=c.dot(u);Math.abs(be)<1&&(ie=Math.abs(Math.acos(be))),ie/=i,f.copy(ve);for(let Re=0,ct=i-1;Re<ct;Re++)h.copy(f).rotateAround(ue,ie),j(f,Be,ae),j(h,Be,ae),j(ue,Be,.5),f.copy(h);j(h,Be,ae),j(ye,Be,ae),j(ue,Be,.5)}function xe(){j(p,Z,1),j(v,Z,0),j(w,U,0),j(p,Z,1),j(w,U,0),j(S,U,1)}function pe(ue,ve,ye){ve?ue?(j(p,Z,1),j(v,Z,0),j(w,U,0),j(p,Z,1),j(w,U,0),j(M,U,1),j(w,ye,0),j(C,ye,0),j(M,ye,.5)):(j(p,Z,1),j(v,Z,0),j(S,U,1),j(v,Z,0),j(M,U,0),j(S,U,1),j(S,ye,1),j(M,ye,0),j(b,ye,1)):ue?(j(w,ye,0),j(C,ye,0),j(R,ye,.5)):(j(S,ye,1),j(b,ye,0),j(R,ye,.5))}function de(ue,ve){ve&&(ue?(j(p,Z,1),j(v,Z,0),j(w,U,0),j(p,Z,1),j(w,U,0),j(M,U,1),j(w,Z,0),j(R,U,.5),j(M,U,1),j(R,U,.5),j(C,Z,0),j(M,U,1)):(j(p,Z,1),j(v,Z,0),j(S,U,1),j(v,Z,0),j(M,U,0),j(S,U,1),j(S,Z,1),j(M,U,0),j(R,U,.5),j(R,U,.5),j(M,U,0),j(b,Z,1)))}function te(ue,ve,ye,Be,ae,ie){switch(t.strokeLineCap){case"round":ae?oe(ue,ye,ve,ie,.5):oe(ue,ve,ye,ie,.5);break;case"square":if(ae)c.subVectors(ve,ue),u.set(c.y,-c.x),f.addVectors(c,u).add(ue),h.subVectors(u,c).add(ue),Be?(f.toArray(s,1*3),h.toArray(s,0*3),h.toArray(s,3*3)):(f.toArray(s,1*3),a[3*2+1]===1?h.toArray(s,3*3):f.toArray(s,3*3),h.toArray(s,0*3));else{c.subVectors(ye,ue),u.set(c.y,-c.x),f.addVectors(c,u).add(ue),h.subVectors(u,c).add(ue);const be=s.length;Be?(f.toArray(s,be-1*3),h.toArray(s,be-2*3),h.toArray(s,be-4*3)):(h.toArray(s,be-2*3),f.toArray(s,be-1*3),h.toArray(s,be-4*3))}break}}function Ee(ue){let ve=!1;for(let Be=1,ae=ue.length-1;Be<ae;Be++)if(ue[Be].distanceTo(ue[Be+1])<r){ve=!0;break}if(!ve)return ue;const ye=[];ye.push(ue[0]);for(let Be=1,ae=ue.length-1;Be<ae;Be++)ue[Be].distanceTo(ue[Be+1])>=r&&ye.push(ue[Be]);return ye.push(ue[ue.length-1]),ye}}}const NC=new WeakMap;class VAe extends nr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new ji(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(NC.has(e)){const l=NC.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),NC.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new Gt;e.index&&t.setIndex(new qt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new qt(o,a))}return t}_loadLibrary(e,t){const i=new ji(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=jAe.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function jAe(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,h=new f.Decoder,d=new f.DecoderBuffer;d.Init(new Int8Array(l),l.byteLength);try{const m=t(f,h,d,c),g=m.attributes.map(v=>v.array.buffer);m.index&&g.push(m.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:m},g)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}finally{f.destroy(d),f.destroy(h)}});break}};function t(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let h,d;const m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)h=new o.Mesh,d=a.DecodeBufferToMesh(l,h);else if(m===o.POINT_CLOUD)h=new o.PointCloud,d=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const g={index:null,attributes:[]};for(const v in u){const p=self[f[v]];let A,y;if(c.useUniqueIDs)y=u[v],A=a.GetAttributeByUniqueId(h,y);else{if(y=a.GetAttributeId(h,o[u[v]]),y===-1)continue;A=a.GetAttribute(h,y)}g.attributes.push(r(o,a,h,v,p,A))}return m===o.TRIANGULAR_MESH&&(g.index=i(o,a,h)),o.destroy(h),g}function i(o,a,l){const u=l.num_faces()*3,f=u*4,h=o._malloc(f);a.GetTrianglesUInt32Array(l,f,h);const d=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:d,itemSize:1}}function r(o,a,l,c,u,f){const h=f.num_components(),m=l.num_points()*h,g=m*u.BYTES_PER_ELEMENT,v=s(o,u),p=o._malloc(g);a.GetAttributeDataArrayForAllPoints(l,f,v,g,p);const A=new u(o.HEAPF32.buffer,p,m).slice();return o._free(p),{name:c,array:A,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const hO=new Gn,rx=new F;class gw extends mv{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new Et(e,3)),this.setAttribute("uv",new Et(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new u3(t,6,1);return this.setAttribute("instanceStart",new Js(i,3,0)),this.setAttribute("instanceEnd",new Js(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new u3(i,t*2,1);return this.setAttribute("instanceColorStart",new Js(r,t,0)),this.setAttribute("instanceColorEnd",new Js(r,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new OT(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gn);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),hO.setFromBufferAttribute(t),this.boundingBox.union(hO))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Bi),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)rx.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(rx)),rx.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(rx));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class bW extends gw{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,t=3){const i=e.length-t,r=new Float32Array(2*i);if(t===3)for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];else for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5],r[2*s+6]=e[s+6],r[2*s+7]=e[s+7];return super.setColors(r,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class Aw extends Wn{constructor(e){super({type:"LineMaterial",uniforms:va.clone(va.merge([Ct.common,Ct.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Se(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${parseInt(il.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const dO=new F,pO=new F,Jr=new sn,Kr=new sn,gl=new sn,GC=new F,HC=new He,hs=new $a,mO=new F,sx=new Gn,ox=new Bi,Al=new sn;let Pl,b6,MW,Ph;function gO(n,e,t){return Al.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),Al.multiplyScalar(1/Al.w),Al.x=Ph/t.width,Al.y=Ph/t.height,Al.applyMatrix4(n.projectionMatrixInverse),Al.multiplyScalar(1/Al.w),Math.abs(Math.max(Al.x,Al.y))}function WAe(n,e){for(let t=0,i=b6.count;t<i;t++){hs.start.fromBufferAttribute(b6,t),hs.end.fromBufferAttribute(MW,t);const r=new F,s=new F;Pl.distanceSqToSegment(hs.start,hs.end,s,r),s.distanceTo(r)<Ph*.5&&e.push({point:s,pointOnLine:r,distance:Pl.origin.distanceTo(s),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function YAe(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,a=n.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=-e.near;Pl.at(1,gl),gl.w=1,gl.applyMatrix4(e.matrixWorldInverse),gl.applyMatrix4(i),gl.multiplyScalar(1/gl.w),gl.x*=s.x/2,gl.y*=s.y/2,gl.z=0,GC.copy(gl),HC.multiplyMatrices(e.matrixWorldInverse,o);for(let f=0,h=l.count;f<h;f++){if(Jr.fromBufferAttribute(l,f),Kr.fromBufferAttribute(c,f),Jr.w=1,Kr.w=1,Jr.applyMatrix4(HC),Kr.applyMatrix4(HC),Jr.z>u&&Kr.z>u)continue;if(Jr.z>u){const A=Jr.z-Kr.z,y=(Jr.z-u)/A;Jr.lerp(Kr,y)}else if(Kr.z>u){const A=Kr.z-Jr.z,y=(Kr.z-u)/A;Kr.lerp(Jr,y)}Jr.applyMatrix4(i),Kr.applyMatrix4(i),Jr.multiplyScalar(1/Jr.w),Kr.multiplyScalar(1/Kr.w),Jr.x*=s.x/2,Jr.y*=s.y/2,Kr.x*=s.x/2,Kr.y*=s.y/2,hs.start.copy(Jr),hs.start.z=0,hs.end.copy(Kr),hs.end.z=0;const m=hs.closestPointToPointParameter(GC,!0);hs.at(m,mO);const g=jt.lerp(Jr.z,Kr.z,m),v=g>=-1&&g<=1,p=GC.distanceTo(mO)<Ph*.5;if(v&&p){hs.start.fromBufferAttribute(l,f),hs.end.fromBufferAttribute(c,f),hs.start.applyMatrix4(o),hs.end.applyMatrix4(o);const A=new F,y=new F;Pl.distanceSqToSegment(hs.start,hs.end,y,A),t.push({point:y,pointOnLine:A,distance:Pl.origin.distanceTo(y),object:n,face:null,faceIndex:f,uv:null,uv2:null})}}}class IW extends gt{constructor(e=new gw,t=new Aw({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)dO.fromBufferAttribute(t,o),pO.fromBufferAttribute(i,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+dO.distanceTo(pO);const s=new u3(r,2,1);return e.setAttribute("instanceDistanceStart",new Js(s,1,0)),e.setAttribute("instanceDistanceEnd",new Js(s,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Pl=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Ph=l.linewidth+s,b6=a.attributes.instanceStart,MW=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),ox.copy(a.boundingSphere).applyMatrix4(o);let c;if(i)c=Ph*.5;else{const f=Math.max(r.near,ox.distanceToPoint(Pl.origin));c=gO(r,f,l.resolution)}if(ox.radius+=c,Pl.intersectsSphere(ox)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),sx.copy(a.boundingBox).applyMatrix4(o);let u;if(i)u=Ph*.5;else{const f=Math.max(r.near,sx.distanceToPoint(Pl.origin));u=gO(r,f,l.resolution)}sx.expandByScalar(u),Pl.intersectsBox(sx)!==!1&&(i?WAe(this,t):YAe(this,r,t))}}class TW extends IW{constructor(e=new bW,t=new Aw({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}let ax;const QC=()=>{if(ax)return ax;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const h=new Uint8Array(f.length);for(let m=0;m<f.length;++m){const g=f.charCodeAt(m);h[m]=g>96?g-71:g>64?g-65:g>47?g+4:g>46?63:62}let d=0;for(let m=0;m<f.length;++m)h[d++]=h[m]<60?i[h[m]]:(h[m]-60)*64+h[++m];return h.buffer.slice(0,d)}function l(f,h,d,m,g,v){const p=s.exports.sbrk,A=d+3&-4,y=p(A*m),w=p(g.length),S=new Uint8Array(s.exports.memory.buffer);S.set(g,w);const C=f(y,d,m,w,g.length);if(C===0&&v&&v(y,A,m),h.set(S.subarray(y,y+d*m)),p(y-p(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ax={ready:o,supported:!0,decodeVertexBuffer(f,h,d,m,g){l(s.exports.meshopt_decodeVertexBuffer,f,h,d,m,s.exports[c[g]])},decodeIndexBuffer(f,h,d,m){l(s.exports.meshopt_decodeIndexBuffer,f,h,d,m)},decodeIndexSequence(f,h,d,m){l(s.exports.meshopt_decodeIndexSequence,f,h,d,m)},decodeGltfBuffer(f,h,d,m,g,v){l(s.exports[u[g]],f,h,d,m,s.exports[c[v]])}},ax};function XAe(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}const BW=E.createContext([]);function qAe({box:n,multiple:e,children:t,onChange:i,onChangePointerUp:r,border:s="1px solid #55aaff",backgroundColor:o="rgba(75, 160, 255, 0.1)",filter:a=c=>c,...l}){const[c,u]=E.useState(!1),{setEvents:f,camera:h,raycaster:d,gl:m,controls:g,size:v,get:p}=Pe(),[A,y]=E.useState(!1),[w,S]=E.useReducer((I,{object:T,shift:D})=>T===void 0?[]:Array.isArray(T)?T:D?I.includes(T)?I.filter(R=>R!==T):[T,...I]:I[0]===T?[]:[T],[]);E.useEffect(()=>{c?i==null||i(w):r==null||r(w)},[w,c]);const C=E.useCallback(I=>{I.stopPropagation(),S({object:a([I.object])[0],shift:e&&I.shiftKey})},[]),b=E.useCallback(I=>!A&&S({}),[A]),M=E.useRef(null);return E.useEffect(()=>{if(!n||!e)return;const I=new Yge(h,M.current),T=document.createElement("div");T.style.pointerEvents="none",T.style.border=s,T.style.backgroundColor=o,T.style.position="fixed";const D=new Se,R=new Se,z=new Se,L=p().events.enabled,H=g==null?void 0:g.enabled;let J=!1;function Z(V,Q){const{offsetX:j,offsetY:oe}=V,{width:xe,height:pe}=v;Q.set(j/xe*2-1,-(oe/pe)*2+1)}function U(V){var Q;g&&(g.enabled=!1),f({enabled:!1}),u(J=!0),(Q=m.domElement.parentElement)==null||Q.appendChild(T),T.style.left=`${V.clientX}px`,T.style.top=`${V.clientY}px`,T.style.width="0px",T.style.height="0px",D.x=V.clientX,D.y=V.clientY}function X(V){z.x=Math.max(D.x,V.clientX),z.y=Math.max(D.y,V.clientY),R.x=Math.min(D.x,V.clientX),R.y=Math.min(D.y,V.clientY),T.style.left=`${R.x}px`,T.style.top=`${R.y}px`,T.style.width=`${z.x-R.x}px`,T.style.height=`${z.y-R.y}px`}function Y(){if(J){var V;g&&(g.enabled=H),f({enabled:L}),u(J=!1),(V=T.parentElement)==null||V.removeChild(T)}}function O(V){V.shiftKey&&(U(V),Z(V,I.startPoint))}let W=[];function $(V){if(J){X(V),Z(V,I.endPoint);const Q=I.select().sort(j=>j.uuid).filter(j=>j.isMesh);XAe(Q,W)||(W=Q,S({object:a(Q)}))}}function k(V){J&&Y()}return document.addEventListener("pointerdown",O,{passive:!0}),document.addEventListener("pointermove",$,{passive:!0,capture:!0}),document.addEventListener("pointerup",k,{passive:!0}),()=>{document.removeEventListener("pointerdown",O),document.removeEventListener("pointermove",$,!0),document.removeEventListener("pointerup",k)}},[v.width,v.height,d,h,g,m]),E.createElement("group",tt({ref:M,onClick:C,onPointerOver:()=>y(!0),onPointerOut:()=>y(!1),onPointerMissed:b},l),E.createElement(BW.Provider,{value:w},t))}function JAe(){return E.useContext(BW)}const KAe=E.forwardRef(function({children:e,follow:t=!0,lockX:i=!1,lockY:r=!1,lockZ:s=!1,...o},a){const l=E.useRef(null),c=E.useRef(null),u=new Lt;return Bt(({camera:f})=>{if(!t||!c.current)return;const h=c.current.rotation.clone();c.current.updateMatrix(),c.current.updateWorldMatrix(!1,!1),c.current.getWorldQuaternion(u),f.getWorldQuaternion(l.current.quaternion).premultiply(u.invert()),i&&(c.current.rotation.x=h.x),r&&(c.current.rotation.y=h.y),s&&(c.current.rotation.z=h.z)}),E.useImperativeHandle(a,()=>c.current,[]),E.createElement("group",tt({ref:c,matrixAutoUpdate:!1,matrixWorldAutoUpdate:!1},o),E.createElement("group",{ref:l},e))}),$Ae=E.forwardRef(({children:n,depth:e=-1,...t},i)=>{const r=E.useRef(null);return E.useImperativeHandle(i,()=>r.current,[]),Bt(({camera:s})=>{r.current.quaternion.copy(s.quaternion),r.current.position.copy(s.position)}),E.createElement("group",tt({ref:r},t),E.createElement("group",{"position-z":-e},n))}),ZAe=new F,eve=new F,tve=new F,nve=(n,e,t)=>{const i=t.width/2,r=t.height/2;e.updateMatrixWorld(!1);const s=n.project(e);return s.x=s.x*i+i,s.y=-(s.y*r)+r,s},ive=(n,e,t,i=1)=>{const r=ZAe.set(n.x/t.width*2-1,-(n.y/t.height)*2+1,i);return r.unproject(e),r},vw=(n,e,t,i)=>{const r=nve(tve.copy(n),t,i);let s=0;for(let o=0;o<2;++o){const a=eve.copy(r).setComponent(o,r.getComponent(o)+e),l=ive(a,t,i,a.z);s=Math.max(s,n.distanceTo(l))}return s},rve=new F,sve=E.forwardRef(({scale:n=1,...e},t)=>{const i=E.useRef(null);return E.useImperativeHandle(t,()=>i.current,[]),Bt(r=>{const s=i.current;if(!s)return;const o=vw(s.getWorldPosition(rve),n,r.camera,r.size);s.scale.setScalar(o*n)}),E.createElement("object3D",tt({ref:i},e))}),tl=E.forwardRef(function({points:e,color:t=16777215,vertexColors:i,linewidth:r,lineWidth:s,segments:o,dashed:a,...l},c){var u,f;const h=Pe(p=>p.size),d=E.useMemo(()=>o?new IW:new TW,[o]),[m]=E.useState(()=>new Aw),g=(i==null||(u=i[0])==null?void 0:u.length)===4?4:3,v=E.useMemo(()=>{const p=o?new gw:new bW,A=e.map(y=>{const w=Array.isArray(y);return y instanceof F||y instanceof sn?[y.x,y.y,y.z]:y instanceof Se?[y.x,y.y,0]:w&&y.length===3?[y[0],y[1],y[2]]:w&&y.length===2?[y[0],y[1],0]:y});if(p.setPositions(A.flat()),i){t=16777215;const y=i.map(w=>w instanceof et?w.toArray():w);p.setColors(y.flat(),g)}return p},[e,o,i,g]);return E.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),E.useLayoutEffect(()=>{a?m.defines.USE_DASH="":delete m.defines.USE_DASH,m.needsUpdate=!0},[a,m]),E.useEffect(()=>()=>v.dispose(),[v]),E.createElement("primitive",tt({object:d,ref:c},l),E.createElement("primitive",{object:v,attach:"geometry"}),E.createElement("primitive",tt({object:m,attach:"material",color:t,vertexColors:!!i,resolution:[h.width,h.height],linewidth:(f=r??s)!==null&&f!==void 0?f:1,dashed:a,transparent:g===4},l)))}),ove=new F,ave=E.forwardRef(function({start:e=[0,0,0],end:t=[0,0,0],mid:i,segments:r=20,...s},o){const a=E.useRef(null);E.useImperativeHandle(o,()=>a.current);const[l]=E.useState(()=>new SE(void 0,void 0,void 0)),c=E.useCallback((f,h,d,m=20)=>(f instanceof F?l.v0.copy(f):l.v0.set(...f),h instanceof F?l.v2.copy(h):l.v2.set(...h),d instanceof F?l.v1.copy(d):Array.isArray(d)?l.v1.set(...d):l.v1.copy(l.v0.clone().add(l.v2.clone().sub(l.v0)).add(ove.set(0,l.v0.y-l.v2.y,0))),l.getPoints(m)),[]);E.useLayoutEffect(()=>{a.current.setPoints=(f,h,d)=>{const m=c(f,h,d);a.current.geometry&&a.current.geometry.setPositions(m.map(g=>g.toArray()).flat())}},[]);const u=E.useMemo(()=>c(e,t,i,r),[e,t,i,r]);return E.createElement(tl,tt({ref:a,points:u},s))}),lve=E.forwardRef(function({start:e,end:t,midA:i,midB:r,segments:s=20,...o},a){const l=E.useMemo(()=>{const c=e instanceof F?e:new F(...e),u=t instanceof F?t:new F(...t),f=i instanceof F?i:new F(...i),h=r instanceof F?r:new F(...r);return new BT(c,f,h,u).getPoints(s)},[e,t,i,r,s]);return E.createElement(tl,tt({ref:a,points:l},o))}),cve=E.forwardRef(function({points:e,closed:t=!1,curveType:i="centripetal",tension:r=.5,segments:s=20,vertexColors:o,...a},l){const c=E.useMemo(()=>{const h=e.map(d=>d instanceof F?d:new F(...d));return new EE(h,t,i,r)},[e,t,i,r]),u=E.useMemo(()=>c.getPoints(s),[c,s]),f=E.useMemo(()=>{if(!o||o.length<2)return;if(o.length===s+1)return o;const h=o.map(g=>g instanceof et?g:new et(...g));t&&h.push(h[0].clone());const d=[h[0]],m=s/(h.length-1);for(let g=1;g<s;g++){const v=g%m/m,p=Math.floor(g/m);d.push(h[p].clone().lerp(h[p+1],v))}return d.push(h[h.length-1]),d},[o,s]);return E.createElement(tl,tt({ref:l,points:u,vertexColors:f},a))}),uve=E.forwardRef(({url:n,distance:e=1,loop:t=!0,autoplay:i,...r},s)=>{const o=E.useRef(null);E.useImperativeHandle(s,()=>o.current,[]);const a=Pe(({camera:u})=>u),[l]=E.useState(()=>new cQ),c=Pi(lQ,n);return E.useEffect(()=>{const u=o.current;u&&(u.setBuffer(c),u.setRefDistance(e),u.setLoop(t),i&&!u.isPlaying&&u.play())},[c,a,e,t]),E.useEffect(()=>{const u=o.current;return a.add(l),()=>{a.remove(l),u&&(u.isPlaying&&u.stop(),u.source&&u.source._connected&&u.disconnect())}},[]),E.createElement("positionalAudio",tt({ref:o,args:[l]},r))});function fve(){var n=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var c=r.init;c===void 0&&(c=function(){});var u=r.getTransferables;if(u===void 0&&(u=null),!n[o])try{l=l.map(function(h){return h&&h.isWorkerModule&&(e(h,function(d){if(d instanceof Error)throw d}),h=n[h.id].value),h}),c=i("<"+a+">.init",c),u&&(u=i("<"+a+">.getTransferables",u));var f=null;typeof c=="function"?f=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:f,getTransferables:u},s(f)}catch(h){h&&h.noLog||console.error(h),s(h)}}function t(r,s){var o,a=r.id,l=r.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=n[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(f){return s(f instanceof Error?f:new Error(""+f))}):u(c)}catch(f){s(f)}function u(f){try{var h=n[a].getTransferables&&n[a].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),s(f,h)}catch(d){console.error(d),s(d)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&t(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function hve(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var PW=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return PW=function(){return n},n},dve=0,pve=0,VC=!1,Jg=Object.create(null),Kg=Object.create(null),M6=Object.create(null);function A0(n){if((!n||typeof n.init!="function")&&!VC)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId;if(!PW())return hve(n);r==null&&(r="#default");var s="workerModule"+ ++dve,o=n.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(VC=!0,c=A0({workerId:r,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+y_(c)+`
)}`}),VC=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=AO(r,"registerModule",l.workerModuleData);var f=function(){a=null,Kg[r].delete(f)};(Kg[r]||(Kg[r]=new Set)).add(f)}return a.then(function(h){var d=h.isCallable;if(d)return AO(r,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:y_(t),getTransferables:i&&y_(i)},l}function mve(n){Kg[n]&&Kg[n].forEach(function(e){e()}),Jg[n]&&(Jg[n].terminate(),delete Jg[n])}function y_(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function gve(n){var e=Jg[n];if(!e){var t=y_(fve);e=Jg[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=M6[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete M6[s],o(r)}}return e}function AO(n,e,t){return new Promise(function(i,r){var s=++pve;M6[s]=function(o){o.success?i(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},gve(n).postMessage({messageId:s,action:e,data:t})})}function RW(){var n=function(e){function t(X,Y,O,W,$,k,V,Q){var j=1-V;Q.x=j*j*X+2*j*V*O+V*V*$,Q.y=j*j*Y+2*j*V*W+V*V*k}function i(X,Y,O,W,$,k,V,Q,j,oe){var xe=1-j;oe.x=xe*xe*xe*X+3*xe*xe*j*O+3*xe*j*j*$+j*j*j*V,oe.y=xe*xe*xe*Y+3*xe*xe*j*W+3*xe*j*j*k+j*j*j*Q}function r(X,Y){for(var O=/([MLQCZ])([^MLQCZ]*)/g,W,$,k,V,Q;W=O.exec(X);){var j=W[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(oe){return parseFloat(oe)});switch(W[1]){case"M":V=$=j[0],Q=k=j[1];break;case"L":(j[0]!==V||j[1]!==Q)&&Y("L",V,Q,V=j[0],Q=j[1]);break;case"Q":{Y("Q",V,Q,V=j[2],Q=j[3],j[0],j[1]);break}case"C":{Y("C",V,Q,V=j[4],Q=j[5],j[0],j[1],j[2],j[3]);break}case"Z":(V!==$||Q!==k)&&Y("L",V,Q,$,k);break}}}function s(X,Y,O){O===void 0&&(O=16);var W={x:0,y:0};r(X,function($,k,V,Q,j,oe,xe,pe,de){switch($){case"L":Y(k,V,Q,j);break;case"Q":{for(var te=k,Ee=V,ue=1;ue<O;ue++)t(k,V,oe,xe,Q,j,ue/(O-1),W),Y(te,Ee,W.x,W.y),te=W.x,Ee=W.y;break}case"C":{for(var ve=k,ye=V,Be=1;Be<O;Be++)i(k,V,oe,xe,pe,de,Q,j,Be/(O-1),W),Y(ve,ye,W.x,W.y),ve=W.x,ye=W.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(X,Y){var O=X.getContext?X.getContext("webgl",c):X,W=l.get(O);if(!W){let xe=function(ve){var ye=k[ve];if(!ye&&(ye=k[ve]=O.getExtension(ve),!ye))throw new Error(ve+" not supported");return ye},pe=function(ve,ye){var Be=O.createShader(ye);return O.shaderSource(Be,ve),O.compileShader(Be),Be},de=function(ve,ye,Be,ae){if(!V[ve]){var ie={},be={},Re=O.createProgram();O.attachShader(Re,pe(ye,O.VERTEX_SHADER)),O.attachShader(Re,pe(Be,O.FRAGMENT_SHADER)),O.linkProgram(Re),V[ve]={program:Re,transaction:function(se){O.useProgram(Re),se({setUniform:function(Ae,Ue){for(var Ce=[],ke=arguments.length-2;ke-- >0;)Ce[ke]=arguments[ke+2];var We=be[Ue]||(be[Ue]=O.getUniformLocation(Re,Ue));O["uniform"+Ae].apply(O,[We].concat(Ce))},setAttribute:function(Ae,Ue,Ce,ke,We){var Xe=ie[Ae];Xe||(Xe=ie[Ae]={buf:O.createBuffer(),loc:O.getAttribLocation(Re,Ae),data:null}),O.bindBuffer(O.ARRAY_BUFFER,Xe.buf),O.vertexAttribPointer(Xe.loc,Ue,O.FLOAT,!1,0,0),O.enableVertexAttribArray(Xe.loc),$?O.vertexAttribDivisor(Xe.loc,ke):xe("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Xe.loc,ke),We!==Xe.data&&(O.bufferData(O.ARRAY_BUFFER,We,Ce),Xe.data=We)}})}}}V[ve].transaction(ae)},te=function(ve,ye){j++;try{O.activeTexture(O.TEXTURE0+j);var Be=Q[ve];Be||(Be=Q[ve]=O.createTexture(),O.bindTexture(O.TEXTURE_2D,Be),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.NEAREST),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.NEAREST)),O.bindTexture(O.TEXTURE_2D,Be),ye(Be,j)}finally{j--}},Ee=function(ve,ye,Be){var ae=O.createFramebuffer();oe.push(ae),O.bindFramebuffer(O.FRAMEBUFFER,ae),O.activeTexture(O.TEXTURE0+ye),O.bindTexture(O.TEXTURE_2D,ve),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,ve,0);try{Be(ae)}finally{O.deleteFramebuffer(ae),O.bindFramebuffer(O.FRAMEBUFFER,oe[--oe.length-1]||null)}},ue=function(){k={},V={},Q={},j=-1,oe.length=0};var $=typeof WebGL2RenderingContext<"u"&&O instanceof WebGL2RenderingContext,k={},V={},Q={},j=-1,oe=[];O.canvas.addEventListener("webglcontextlost",function(ve){ue(),ve.preventDefault()},!1),l.set(O,W={gl:O,isWebGL2:$,getExtension:xe,withProgram:de,withTexture:te,withTextureFramebuffer:Ee,handleContextLoss:ue})}Y(W)}function f(X,Y,O,W,$,k,V,Q){V===void 0&&(V=15),Q===void 0&&(Q=null),u(X,function(j){var oe=j.gl,xe=j.withProgram,pe=j.withTexture;pe("copy",function(de,te){oe.texImage2D(oe.TEXTURE_2D,0,oe.RGBA,$,k,0,oe.RGBA,oe.UNSIGNED_BYTE,Y),xe("copy",o,a,function(Ee){var ue=Ee.setUniform,ve=Ee.setAttribute;ve("aUV",2,oe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ue("1i","image",te),oe.bindFramebuffer(oe.FRAMEBUFFER,Q||null),oe.disable(oe.BLEND),oe.colorMask(V&8,V&4,V&2,V&1),oe.viewport(O,W,$,k),oe.scissor(O,W,$,k),oe.drawArrays(oe.TRIANGLES,0,3)})})})}function h(X,Y,O){var W=X.width,$=X.height;u(X,function(k){var V=k.gl,Q=new Uint8Array(W*$*4);V.readPixels(0,0,W,$,V.RGBA,V.UNSIGNED_BYTE,Q),X.width=Y,X.height=O,f(V,Q,0,0,W,$)})}var d=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:f,resizeWebGLCanvasWithoutClearing:h});function m(X,Y,O,W,$,k){k===void 0&&(k=1);var V=new Uint8Array(X*Y),Q=W[2]-W[0],j=W[3]-W[1],oe=[];s(O,function(ve,ye,Be,ae){oe.push({x1:ve,y1:ye,x2:Be,y2:ae,minX:Math.min(ve,Be),minY:Math.min(ye,ae),maxX:Math.max(ve,Be),maxY:Math.max(ye,ae)})}),oe.sort(function(ve,ye){return ve.maxX-ye.maxX});for(var xe=0;xe<X;xe++)for(var pe=0;pe<Y;pe++){var de=Ee(W[0]+Q*(xe+.5)/X,W[1]+j*(pe+.5)/Y),te=Math.pow(1-Math.abs(de)/$,k)/2;de<0&&(te=1-te),te=Math.max(0,Math.min(255,Math.round(te*255))),V[pe*X+xe]=te}return V;function Ee(ve,ye){for(var Be=1/0,ae=1/0,ie=oe.length;ie--;){var be=oe[ie];if(be.maxX+ae<=ve)break;if(ve+ae>be.minX&&ye-ae<be.maxY&&ye+ae>be.minY){var Re=p(ve,ye,be.x1,be.y1,be.x2,be.y2);Re<Be&&(Be=Re,ae=Math.sqrt(Be))}}return ue(ve,ye)&&(ae=-ae),ae}function ue(ve,ye){for(var Be=0,ae=oe.length;ae--;){var ie=oe[ae];if(ie.maxX<=ve)break;var be=ie.y1>ye!=ie.y2>ye&&ve<(ie.x2-ie.x1)*(ye-ie.y1)/(ie.y2-ie.y1)+ie.x1;be&&(Be+=ie.y1<ie.y2?1:-1)}return Be!==0}}function g(X,Y,O,W,$,k,V,Q,j,oe){k===void 0&&(k=1),Q===void 0&&(Q=0),j===void 0&&(j=0),oe===void 0&&(oe=0),v(X,Y,O,W,$,k,V,null,Q,j,oe)}function v(X,Y,O,W,$,k,V,Q,j,oe,xe){k===void 0&&(k=1),j===void 0&&(j=0),oe===void 0&&(oe=0),xe===void 0&&(xe=0);for(var pe=m(X,Y,O,W,$,k),de=new Uint8Array(pe.length*4),te=0;te<pe.length;te++)de[te*4+xe]=pe[te];f(V,de,j,oe,X,Y,1<<3-xe,Q)}function p(X,Y,O,W,$,k){var V=$-O,Q=k-W,j=V*V+Q*Q,oe=j?Math.max(0,Math.min(1,((X-O)*V+(Y-W)*Q)/j)):0,xe=X-(O+oe*V),pe=Y-(W+oe*Q);return xe*xe+pe*pe}var A=Object.freeze({__proto__:null,generate:m,generateIntoCanvas:g,generateIntoFramebuffer:v}),y="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",w="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",S="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),b=null,M=!1,I={},T=new WeakMap;function D(X){if(!M&&!H(X))throw new Error("WebGL generation not supported")}function R(X,Y,O,W,$,k,V){if(k===void 0&&(k=1),V===void 0&&(V=null),!V&&(V=b,!V)){var Q=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Q)throw new Error("OffscreenCanvas or DOM canvas not supported");V=b=Q.getContext("webgl",{depth:!1})}D(V);var j=new Uint8Array(X*Y*4);u(V,function(de){var te=de.gl,Ee=de.withTexture,ue=de.withTextureFramebuffer;Ee("readable",function(ve,ye){te.texImage2D(te.TEXTURE_2D,0,te.RGBA,X,Y,0,te.RGBA,te.UNSIGNED_BYTE,null),ue(ve,ye,function(Be){L(X,Y,O,W,$,k,te,Be,0,0,0),te.readPixels(0,0,X,Y,te.RGBA,te.UNSIGNED_BYTE,j)})})});for(var oe=new Uint8Array(X*Y),xe=0,pe=0;xe<j.length;xe+=4)oe[pe++]=j[xe];return oe}function z(X,Y,O,W,$,k,V,Q,j,oe){k===void 0&&(k=1),Q===void 0&&(Q=0),j===void 0&&(j=0),oe===void 0&&(oe=0),L(X,Y,O,W,$,k,V,null,Q,j,oe)}function L(X,Y,O,W,$,k,V,Q,j,oe,xe){k===void 0&&(k=1),j===void 0&&(j=0),oe===void 0&&(oe=0),xe===void 0&&(xe=0),D(V);var pe=[];s(O,function(de,te,Ee,ue){pe.push(de,te,Ee,ue)}),pe=new Float32Array(pe),u(V,function(de){var te=de.gl,Ee=de.isWebGL2,ue=de.getExtension,ve=de.withProgram,ye=de.withTexture,Be=de.withTextureFramebuffer,ae=de.handleContextLoss;if(ye("rawDistances",function(ie,be){(X!==ie._lastWidth||Y!==ie._lastHeight)&&te.texImage2D(te.TEXTURE_2D,0,te.RGBA,ie._lastWidth=X,ie._lastHeight=Y,0,te.RGBA,te.UNSIGNED_BYTE,null),ve("main",y,w,function(Re){var ct=Re.setAttribute,se=Re.setUniform,ee=!Ee&&ue("ANGLE_instanced_arrays"),Ae=!Ee&&ue("EXT_blend_minmax");ct("aUV",2,te.STATIC_DRAW,0,C),ct("aLineSegment",4,te.DYNAMIC_DRAW,1,pe),se.apply(void 0,["4f","uGlyphBounds"].concat(W)),se("1f","uMaxDistance",$),se("1f","uExponent",k),Be(ie,be,function(Ue){te.enable(te.BLEND),te.colorMask(!0,!0,!0,!0),te.viewport(0,0,X,Y),te.scissor(0,0,X,Y),te.blendFunc(te.ONE,te.ONE),te.blendEquationSeparate(te.FUNC_ADD,Ee?te.MAX:Ae.MAX_EXT),te.clear(te.COLOR_BUFFER_BIT),Ee?te.drawArraysInstanced(te.TRIANGLES,0,3,pe.length/4):ee.drawArraysInstancedANGLE(te.TRIANGLES,0,3,pe.length/4)})}),ve("post",o,S,function(Re){Re.setAttribute("aUV",2,te.STATIC_DRAW,0,C),Re.setUniform("1i","tex",be),te.bindFramebuffer(te.FRAMEBUFFER,Q),te.disable(te.BLEND),te.colorMask(xe===0,xe===1,xe===2,xe===3),te.viewport(j,oe,X,Y),te.scissor(j,oe,X,Y),te.drawArrays(te.TRIANGLES,0,3)})}),te.isContextLost())throw ae(),new Error("webgl context lost")})}function H(X){var Y=!X||X===b?I:X.canvas||X,O=T.get(Y);if(O===void 0){M=!0;var W=null;try{var $=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],k=R(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,X);O=k&&$.length===k.length&&k.every(function(V,Q){return V===$[Q]}),O||(W="bad trial run results",console.info($,k))}catch(V){O=!1,W=V.message}W&&console.warn("WebGL SDF generation not supported:",W),M=!1,T.set(Y,O)}return O}var J=Object.freeze({__proto__:null,generate:R,generateIntoCanvas:z,generateIntoFramebuffer:L,isSupported:H});function Z(X,Y,O,W,$,k){$===void 0&&($=Math.max(W[2]-W[0],W[3]-W[1])/2),k===void 0&&(k=1);try{return R.apply(J,arguments)}catch(V){return console.info("WebGL SDF generation failed, falling back to JS",V),m.apply(A,arguments)}}function U(X,Y,O,W,$,k,V,Q,j,oe){$===void 0&&($=Math.max(W[2]-W[0],W[3]-W[1])/2),k===void 0&&(k=1),Q===void 0&&(Q=0),j===void 0&&(j=0),oe===void 0&&(oe=0);try{return z.apply(J,arguments)}catch(xe){return console.info("WebGL SDF generation failed, falling back to JS",xe),g.apply(A,arguments)}}return e.forEachPathCommand=r,e.generate=Z,e.generateIntoCanvas=U,e.javascript=A,e.pathToLineSegments=s,e.webgl=J,e.webglUtils=d,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function Ave(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(ae,ie){i[ae]=1<<ie+1,r[i[ae]]=ae}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,u=null;function f(){if(!u){u=new Map;var ae=function(be){if(t.hasOwnProperty(be)){var Re=0;t[be].split(",").forEach(function(ct){var se=ct.split("+"),ee=se[0],Ae=se[1];ee=parseInt(ee,36),Ae=Ae?parseInt(Ae,36):0,u.set(Re+=ee,i[be]);for(var Ue=0;Ue<Ae;Ue++)u.set(++Re,i[be])})}};for(var ie in t)ae(ie)}}function h(ae){return f(),u.get(ae.codePointAt(0))||i.L}function d(ae){return r[h(ae)]}var m={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(ae,ie){var be=36,Re=0,ct=new Map,se=ie&&new Map,ee;return ae.split(",").forEach(function Ae(Ue){if(Ue.indexOf("+")!==-1)for(var Ce=+Ue;Ce--;)Ae(ee);else{ee=Ue;var ke=Ue.split(">"),We=ke[0],Xe=ke[1];We=String.fromCodePoint(Re+=parseInt(We,be)),Xe=String.fromCodePoint(Re+=parseInt(Xe,be)),ct.set(We,Xe),ie&&se.set(Xe,We)}}),{map:ct,reverseMap:se}}var v,p,A;function y(){if(!v){var ae=g(m.pairs,!0),ie=ae.map,be=ae.reverseMap;v=ie,p=be,A=g(m.canonical,!1).map}}function w(ae){return y(),v.get(ae)||null}function S(ae){return y(),p.get(ae)||null}function C(ae){return y(),A.get(ae)||null}var b=i.L,M=i.R,I=i.EN,T=i.ES,D=i.ET,R=i.AN,z=i.CS,L=i.B,H=i.S,J=i.ON,Z=i.BN,U=i.NSM,X=i.AL,Y=i.LRO,O=i.RLO,W=i.LRE,$=i.RLE,k=i.PDF,V=i.LRI,Q=i.RLI,j=i.FSI,oe=i.PDI;function xe(ae,ie){for(var be=125,Re=new Uint32Array(ae.length),ct=0;ct<ae.length;ct++)Re[ct]=h(ae[ct]);var se=new Map;function ee(Fr,xs){var rr=Re[Fr];Re[Fr]=xs,se.set(rr,se.get(rr)-1),rr&a&&se.set(a,se.get(a)-1),se.set(xs,(se.get(xs)||0)+1),xs&a&&se.set(a,(se.get(a)||0)+1)}for(var Ae=new Uint8Array(ae.length),Ue=new Map,Ce=[],ke=null,We=0;We<ae.length;We++)ke||Ce.push(ke={start:We,end:ae.length-1,level:ie==="rtl"?1:ie==="ltr"?0:pd(We,!1)}),Re[We]&L&&(ke.end=We,ke=null);for(var Xe=$|W|O|Y|s|oe|k|L,Oe=function(Fr){return Fr+(Fr&1?1:2)},ft=function(Fr){return Fr+(Fr&1?2:1)},lt=0;lt<Ce.length;lt++){ke=Ce[lt];var st=[{_level:ke.level,_override:0,_isolate:0}],ce=void 0,De=0,$e=0,Ye=0;se.clear();for(var fe=ke.start;fe<=ke.end;fe++){var _e=Re[fe];if(ce=st[st.length-1],se.set(_e,(se.get(_e)||0)+1),_e&a&&se.set(a,(se.get(a)||0)+1),_e&Xe)if(_e&($|W)){Ae[fe]=ce._level;var Me=(_e===$?ft:Oe)(ce._level);Me<=be&&!De&&!$e?st.push({_level:Me,_override:0,_isolate:0}):De||$e++}else if(_e&(O|Y)){Ae[fe]=ce._level;var at=(_e===O?ft:Oe)(ce._level);at<=be&&!De&&!$e?st.push({_level:at,_override:_e&O?M:b,_isolate:0}):De||$e++}else if(_e&s){_e&j&&(_e=pd(fe+1,!0)===1?Q:V),Ae[fe]=ce._level,ce._override&&ee(fe,ce._override);var ot=(_e===Q?ft:Oe)(ce._level);ot<=be&&De===0&&$e===0?(Ye++,st.push({_level:ot,_override:0,_isolate:1,_isolInitIndex:fe})):De++}else if(_e&oe){if(De>0)De--;else if(Ye>0){for($e=0;!st[st.length-1]._isolate;)st.pop();var yt=st[st.length-1]._isolInitIndex;yt!=null&&(Ue.set(yt,fe),Ue.set(fe,yt)),st.pop(),Ye--}ce=st[st.length-1],Ae[fe]=ce._level,ce._override&&ee(fe,ce._override)}else _e&k?(De===0&&($e>0?$e--:!ce._isolate&&st.length>1&&(st.pop(),ce=st[st.length-1])),Ae[fe]=ce._level):_e&L&&(Ae[fe]=ke.level);else Ae[fe]=ce._level,ce._override&&_e!==Z&&ee(fe,ce._override)}for(var we=[],Ie=null,Fe=ke.start;Fe<=ke.end;Fe++){var qe=Re[Fe];if(!(qe&l)){var ut=Ae[Fe],Mt=qe&s,It=qe===oe;Ie&&ut===Ie._level?(Ie._end=Fe,Ie._endsWithIsolInit=Mt):we.push(Ie={_start:Fe,_end:Fe,_level:ut,_startsWithPDI:It,_endsWithIsolInit:Mt})}}for(var wt=[],Ht=0;Ht<we.length;Ht++){var zt=we[Ht];if(!zt._startsWithPDI||zt._startsWithPDI&&!Ue.has(zt._start)){for(var Fn=[Ie=zt],wn=void 0;Ie&&Ie._endsWithIsolInit&&(wn=Ue.get(Ie._end))!=null;)for(var ht=Ht+1;ht<we.length;ht++)if(we[ht]._start===wn){Fn.push(Ie=we[ht]);break}for(var un=[],Jn=0;Jn<Fn.length;Jn++)for(var ne=Fn[Jn],G=ne._start;G<=ne._end;G++)un.push(G);for(var re=Ae[un[0]],he=ke.level,le=un[0]-1;le>=0;le--)if(!(Re[le]&l)){he=Ae[le];break}var me=un[un.length-1],Ge=Ae[me],Qe=ke.level;if(!(Re[me]&s)){for(var Ke=me+1;Ke<=ke.end;Ke++)if(!(Re[Ke]&l)){Qe=Ae[Ke];break}}wt.push({_seqIndices:un,_sosType:Math.max(he,re)%2?M:b,_eosType:Math.max(Qe,Ge)%2?M:b})}}for(var Ne=0;Ne<wt.length;Ne++){var Je=wt[Ne],Te=Je._seqIndices,pt=Je._sosType,At=Je._eosType,vt=Ae[Te[0]]&1?M:b;if(se.get(U))for(var Nt=0;Nt<Te.length;Nt++){var Kt=Te[Nt];if(Re[Kt]&U){for(var Vt=pt,Pt=Nt-1;Pt>=0;Pt--)if(!(Re[Te[Pt]]&l)){Vt=Re[Te[Pt]];break}ee(Kt,Vt&(s|oe)?J:Vt)}}if(se.get(I))for(var Zt=0;Zt<Te.length;Zt++){var kt=Te[Zt];if(Re[kt]&I)for(var ln=Zt-1;ln>=-1;ln--){var Yn=ln===-1?pt:Re[Te[ln]];if(Yn&o){Yn===X&&ee(kt,R);break}}}if(se.get(X))for(var on=0;on<Te.length;on++){var Xn=Te[on];Re[Xn]&X&&ee(Xn,M)}if(se.get(T)||se.get(z))for(var Pn=1;Pn<Te.length-1;Pn++){var Kn=Te[Pn];if(Re[Kn]&(T|z)){for(var ui=0,cn=0,di=Pn-1;di>=0&&(ui=Re[Te[di]],!!(ui&l));di--);for(var Hn=Pn+1;Hn<Te.length&&(cn=Re[Te[Hn]],!!(cn&l));Hn++);ui===cn&&(Re[Kn]===T?ui===I:ui&(I|R))&&ee(Kn,ui)}}if(se.get(I))for(var pn=0;pn<Te.length;pn++){var vi=Te[pn];if(Re[vi]&I){for(var Us=pn-1;Us>=0&&Re[Te[Us]]&(D|l);Us--)ee(Te[Us],I);for(pn++;pn<Te.length&&Re[Te[pn]]&(D|l|I);pn++)Re[Te[pn]]!==I&&ee(Te[pn],I)}}if(se.get(D)||se.get(T)||se.get(z))for(var ir=0;ir<Te.length;ir++){var so=Te[ir];if(Re[so]&(D|T|z)){ee(so,J);for(var Hl=ir-1;Hl>=0&&Re[Te[Hl]]&l;Hl--)ee(Te[Hl],J);for(var Ql=ir+1;Ql<Te.length&&Re[Te[Ql]]&l;Ql++)ee(Te[Ql],J)}}if(se.get(I))for(var Vl=0,Sf=pt;Vl<Te.length;Vl++){var Dv=Te[Vl],y0=Re[Dv];y0&I?Sf===b&&ee(Dv,b):y0&o&&(Sf=y0)}if(se.get(a)){var jl=M|I|R,fd=jl|b,ol=[];{for(var Wc=[],al=0;al<Te.length;al++)if(Re[Te[al]]&a){var Rn=ae[Te[al]],x0=void 0;if(w(Rn)!==null)if(Wc.length<63)Wc.push({char:Rn,seqIndex:al});else break;else if((x0=S(Rn))!==null)for(var Wl=Wc.length-1;Wl>=0;Wl--){var hd=Wc[Wl].char;if(hd===x0||hd===S(C(Rn))||w(C(hd))===Rn){ol.push([Wc[Wl].seqIndex,al]),Wc.length=Wl;break}}}ol.sort(function(Fr,xs){return Fr[0]-xs[0]})}for(var _0=0;_0<ol.length;_0++){for(var Lv=ol[_0],zi=Lv[0],Cf=Lv[1],Fv=!1,As=0,E0=zi+1;E0<Cf;E0++){var bf=Te[E0];if(Re[bf]&fd){Fv=!0;var oo=Re[bf]&jl?M:b;if(oo===vt){As=oo;break}}}if(Fv&&!As){As=pt;for(var w0=zi-1;w0>=0;w0--){var Ov=Te[w0];if(Re[Ov]&fd){var ao=Re[Ov]&jl?M:b;ao!==vt?As=ao:As=vt;break}}}if(As){if(Re[Te[zi]]=Re[Te[Cf]]=As,As!==vt){for(var vs=zi+1;vs<Te.length;vs++)if(!(Re[Te[vs]]&l)){h(ae[Te[vs]])&U&&(Re[Te[vs]]=As);break}}if(As!==vt){for(var ll=Cf+1;ll<Te.length;ll++)if(!(Re[Te[ll]]&l)){h(ae[Te[ll]])&U&&(Re[Te[ll]]=As);break}}}}for(var Ro=0;Ro<Te.length;Ro++)if(Re[Te[Ro]]&a){for(var S0=Ro,C0=Ro,ks=pt,Mf=Ro-1;Mf>=0;Mf--)if(Re[Te[Mf]]&l)S0=Mf;else{ks=Re[Te[Mf]]&jl?M:b;break}for(var If=At,Tf=Ro+1;Tf<Te.length;Tf++)if(Re[Te[Tf]]&(a|l))C0=Tf;else{If=Re[Te[Tf]]&jl?M:b;break}for(var ys=S0;ys<=C0;ys++)Re[Te[ys]]=ks===If?ks:vt;Ro=C0}}}for(var Lr=ke.start;Lr<=ke.end;Lr++){var dd=Ae[Lr],Ea=Re[Lr];if(dd&1?Ea&(b|I|R)&&Ae[Lr]++:Ea&M?Ae[Lr]++:Ea&(R|I)&&(Ae[Lr]+=2),Ea&l&&(Ae[Lr]=Lr===0?ke.level:Ae[Lr-1]),Lr===ke.end||h(ae[Lr])&(H|L))for(var Yc=Lr;Yc>=0&&h(ae[Yc])&c;Yc--)Ae[Yc]=ke.level}}return{levels:Ae,paragraphs:Ce};function pd(Fr,xs){for(var rr=Fr;rr<ae.length;rr++){var sr=Re[rr];if(sr&(M|X))return 1;if(sr&(L|b)||xs&&sr===oe)return 0;if(sr&s){var lo=zv(rr);rr=lo===-1?ae.length:lo}}return 0}function zv(Fr){for(var xs=1,rr=Fr+1;rr<ae.length;rr++){var sr=Re[rr];if(sr&L)break;if(sr&oe){if(--xs===0)return rr}else sr&s&&xs++}return-1}}var pe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",de;function te(){if(!de){var ae=g(pe,!0),ie=ae.map,be=ae.reverseMap;be.forEach(function(Re,ct){ie.set(ct,Re)}),de=ie}}function Ee(ae){return te(),de.get(ae)||null}function ue(ae,ie,be,Re){var ct=ae.length;be=Math.max(0,be==null?0:+be),Re=Math.min(ct-1,Re==null?ct-1:+Re);for(var se=new Map,ee=be;ee<=Re;ee++)if(ie[ee]&1){var Ae=Ee(ae[ee]);Ae!==null&&se.set(ee,Ae)}return se}function ve(ae,ie,be,Re){var ct=ae.length;be=Math.max(0,be==null?0:+be),Re=Math.min(ct-1,Re==null?ct-1:+Re);var se=[];return ie.paragraphs.forEach(function(ee){var Ae=Math.max(be,ee.start),Ue=Math.min(Re,ee.end);if(Ae<Ue){for(var Ce=ie.levels.slice(Ae,Ue+1),ke=Ue;ke>=Ae&&h(ae[ke])&c;ke--)Ce[ke]=ee.level;for(var We=ee.level,Xe=1/0,Oe=0;Oe<Ce.length;Oe++){var ft=Ce[Oe];ft>We&&(We=ft),ft<Xe&&(Xe=ft|1)}for(var lt=We;lt>=Xe;lt--)for(var st=0;st<Ce.length;st++)if(Ce[st]>=lt){for(var ce=st;st+1<Ce.length&&Ce[st+1]>=lt;)st++;st>ce&&se.push([ce+Ae,st+Ae])}}}),se}function ye(ae,ie,be,Re){var ct=Be(ae,ie,be,Re),se=[].concat(ae);return ct.forEach(function(ee,Ae){se[Ae]=(ie.levels[ee]&1?Ee(ae[ee]):null)||ae[ee]}),se.join("")}function Be(ae,ie,be,Re){for(var ct=ve(ae,ie,be,Re),se=[],ee=0;ee<ae.length;ee++)se[ee]=ee;return ct.forEach(function(Ae){for(var Ue=Ae[0],Ce=Ae[1],ke=se.slice(Ue,Ce+1),We=ke.length;We--;)se[Ce-We]=ke[We]}),se}return e.closingToOpeningBracket=S,e.getBidiCharType=h,e.getBidiCharTypeName=d,e.getCanonicalBracket=C,e.getEmbeddingLevels=xe,e.getMirroredCharacter=Ee,e.getMirroredCharactersMap=ue,e.getReorderSegments=ve,e.getReorderedIndices=Be,e.getReorderedString=ye,e.openingToClosingBracket=w,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const DW=/\bvoid\s+main\s*\(\s*\)\s*{/g;function I6(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=rn[r];return s?I6(s):i}return n.replace(e,t)}const $r=[];for(let n=0;n<256;n++)$r[n]=(n<16?"0":"")+n.toString(16);function vve(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return($r[n&255]+$r[n>>8&255]+$r[n>>16&255]+$r[n>>24&255]+"-"+$r[e&255]+$r[e>>8&255]+"-"+$r[e>>16&15|64]+$r[e>>24&255]+"-"+$r[t&63|128]+$r[t>>8&255]+"-"+$r[t>>16&255]+$r[t>>24&255]+$r[i&255]+$r[i>>8&255]+$r[i>>16&255]+$r[i>>24&255]).toUpperCase()}const eh=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},yve=Date.now(),vO=new WeakMap,yO=new Map;let xve=1e10;function T6(n,e){const t=Sve(e);let i=vO.get(n);if(i||vO.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(c,u){n.onBeforeCompile.call(this,c,u);const f=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let h=yO[f];if(!h){const d=_ve(this,c,e,t);h=yO[f]=d}c.vertexShader=h.vertexShader,c.fragmentShader=h.fragmentShader,eh(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-yve}}),this[r]&&this[r](c)},o=function(){return a(e.chained?n:n.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:n}),Object.defineProperty(u,"id",{value:xve++}),u.uuid=vve(),u.uniforms=eh({},c.uniforms,e.uniforms),u.defines=eh({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",u.extensions=eh({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return n.copy.call(this,c),!n.isShaderMaterial&&!n.isDerivedMaterial&&(eh(this.extensions,c.extensions),eh(this.defines,c.defines),eh(this.uniforms,va.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new n.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=T6(n.isDerivedMaterial?n.getDepthMaterial():new ov({depthPacking:hE}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=T6(n.isDerivedMaterial?n.getDistanceMaterial():new AE,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),n.dispose.call(this)}}};return i[t]=o,new o}function _ve(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:f,fragmentColorTransform:h,customRewriter:d,timeUniform:m}=i;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",f=f||"",(l||d)&&(e=I6(e)),(h||d)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=I6(t)),d){let g=d({vertexShader:e,fragmentShader:t});e=g.vertexShader,t=g.fragmentShader}if(h){let g=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,v=>(g.push(v),"")),f=`${h}
${g.join(`
`)}
${f}`}if(m){const g=`
uniform float ${m};
`;s=g+s,c=g+c}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(g,v,p,A)=>/\battribute\s+vec[23]\s+$/.test(A.substr(0,p))?v:`troika_${v}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=xO(e,r,s,o,a),t=xO(t,r,c,u,f),{vertexShader:e,fragmentShader:t}}function xO(n,e,t,i,r){return(i||r||t)&&(n=n.replace(DW,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function Eve(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let wve=0;const _O=new Map;function Sve(n){const e=JSON.stringify(n,Eve);let t=_O.get(e);return t==null&&_O.set(e,t=++wve),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Cve(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var f=s.readUint(o,a);a+=4,c.push(e._readFont(o,f))}return c}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],u={_data:r,_offset:a},f={},h=0;h<l;h++){var d=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var m=o.readUint(r,s);s+=4;var g=o.readUint(r,s);s+=4,f[d]={offset:m,length:g}}for(h=0;h<c.length;h++){var v=c[h];f[v]&&(u[v.trim()]=e[v.trim()].parse(r,f[v].offset,f[v].length,u))}return u},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),c=o+12,u=0;u<l;u++){var f=a.readASCII(r,c,4);c+=4,a.readUint(r,c),c+=4;var h=a.readUint(r,c);if(c+=4,a.readUint(r,c),c+=4,f==s)return h}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var c=r[s++]<<8|r[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var c=e._bin,u={},f=s;c.readFixed(r,s),s+=4;var h=c.readUshort(r,s);s+=2;var d=c.readUshort(r,s);s+=2;var m=c.readUshort(r,s);return s+=2,u.scriptList=e._lctf.readScriptList(r,f+h),u.featureList=e._lctf.readFeatureList(r,f+d),u.lookupList=e._lctf.readLookupList(r,f+m,l),u},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var h=a.readUshort(r,s);s+=2;var d=e._lctf.readLookupTable(r,l+h,o);c.push(d)}return c},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(r,s),s+=2,c.flag=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;for(var f=c.ltype,h=0;h<u;h++){var d=a.readUshort(r,s);s+=2;var m=o(r,f,l+d,c);c.tabs.push(m)}return c},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)r>>>o&1&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var c=o.readUshort(r,s);s+=2;var u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++)a.push(c+f),a.push(c+f),a.push(o.readUshort(r,s)),s+=2}if(l==2){var h=o.readUshort(r,s);for(s+=2,f=0;f<h;f++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,s,4);s+=4;var h=o.readUshort(r,s);s+=2;var d=e._lctf.readFeatureTable(r,a+h);d.tag=f.trim(),l.push(d)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(r,s);s+=2,l.tab=[];for(var f=0;f<u;f++)l.tab.push(o.readUshort(r,s+2*f));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,s,4);s+=4;var h=o.readUshort(r,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(r,a+h)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.default=e._lctf.readLangSysTable(r,a+c));var u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var h=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2,l[h.trim()]=e._lctf.readLangSysTable(r,a+d)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(r,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(r,s,f);var h=[];for(u=0;u<f.length-1;u++)h.push(e.CFF.readDict(r,s+f[u],s+f[u+1]));s+=f[f.length-1];var d=h[0],m=[];s=e.CFF.readIndex(r,s,m);var g=[];for(u=0;u<m.length-1;u++)g.push(a.readASCII(r,s+m[u],m[u+1]-m[u]));if(s+=m[m.length-1],e.CFF.readSubrs(r,s,d),d.CharStrings){s=d.CharStrings,m=[],s=e.CFF.readIndex(r,s,m);var v=[];for(u=0;u<m.length-1;u++)v.push(a.readBytes(r,s+m[u],m[u+1]-m[u]));d.CharStrings=v}if(d.ROS){s=d.FDArray;var p=[];for(s=e.CFF.readIndex(r,s,p),d.FDArray=[],u=0;u<p.length-1;u++){var A=e.CFF.readDict(r,s+p[u],s+p[u+1]);e.CFF._readFDict(r,A,g),d.FDArray.push(A)}s+=p[p.length-1],s=d.FDSelect,d.FDSelect=[];var y=r[s];if(s++,y!=3)throw y;var w=a.readUshort(r,s);for(s+=2,u=0;u<w+1;u++)d.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(r,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(r,d.charset,d.CharStrings.length)),e.CFF._readFDict(r,d,g),d},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(r,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=r[s];s++;for(var u=0;u<c;u++)a.push(r[s+u]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],c=r[s];if(s++,c==0)for(var u=0;u<o;u++){var f=a.readUshort(r,s);s+=2,l.push(f)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){f=a.readUshort(r,s),s+=2;var h=0;for(c==1?(h=r[s],s++):(h=a.readUshort(r,s),s+=2),u=0;u<=h;u++)l.push(f),f++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,c=r[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(r[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(r,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(r,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var u=1,f=null,h=null;l<=20&&(f=l,u=1),l==12&&(f=100*l+c,u=2),21<=l&&l<=27&&(f=l,u=1),l==28&&(h=a.readShort(r,s+1),u=3),29<=l&&l<=31&&(f=l,u=1),32<=l&&l<=246&&(h=l-139,u=1),247<=l&&l<=250&&(h=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(h=256*-(l-251)-c-108,u=2),l==255&&(h=a.readInt(r,s+1)/65535,u=5),o.val=h??"o"+f,o.size=u},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var h=1,d=null,m=null;u<=20&&(d=u,h=1),u==12&&(d=100*u+f,h=2),u!=19&&u!=20||(d=u,h=2),21<=u&&u<=27&&(d=u,h=1),u==28&&(m=l.readShort(r,s+1),h=3),29<=u&&u<=31&&(d=u,h=1),32<=u&&u<=246&&(m=u-139,h=1),247<=u&&u<=250&&(m=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(m=256*-(u-251)-f-108,h=2),u==255&&(m=l.readInt(r,s+1)/65535,h=5),c.push(m??"o"+d),s+=h}return c},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var h=1,d=null,m=null;if(u==28&&(m=a.readShort(r,s+1),h=3),u==29&&(m=a.readInt(r,s+1),h=5),32<=u&&u<=246&&(m=u-139,h=1),247<=u&&u<=250&&(m=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(m=256*-(u-251)-f-108,h=2),u==255)throw m=a.readInt(r,s+1)/65535,h=5,"unknown number";if(u==30){var g=[];for(h=1;;){var v=r[s+h];h++;var p=v>>4,A=15&v;if(p!=15&&g.push(p),A!=15&&g.push(A),A==15)break}for(var y="",w=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],S=0;S<g.length;S++)y+=w[g[S]];m=parseFloat(y)}u<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],h=1,u==12&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),d!=null?(l[d]=c.length==1?c[0]:c,c=[]):c.push(m),s+=h}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;var u=[];l.tables=[];for(var f=0;f<c;f++){var h=a.readUshort(r,s);s+=2;var d=a.readUshort(r,s);s+=2;var m=a.readUint(r,s);s+=4;var g="p"+h+"e"+d,v=u.indexOf(m);if(v==-1){var p;v=l.tables.length,u.push(m);var A=a.readUshort(r,m);A==0?p=e.cmap.parse0(r,m):A==4?p=e.cmap.parse4(r,m):A==6?p=e.cmap.parse6(r,m):A==12?p=e.cmap.parse12(r,m):console.debug("unknown format: "+A,h,d,m),l.tables.push(p)}if(l[g]!=null)throw"multiple tables for one platform+encoding";l[g]=v}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(r[s+c]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2;var f=u/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(r,s,f),s+=2*f,l.idDelta=[];for(var h=0;h<f;h++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,f),s+=2*f,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,f=o.readUint(r,u+0),h=o.readUint(r,u+4),d=o.readUint(r,u+8);a.groups.push([f,h,d])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;c.instructions=o.readBytes(a,l,f),l+=f;var h=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<h;u++){var d=a[l];if(l++,c.flags.push(d),(8&d)!=0){var m=a[l];l++;for(var g=0;g<m;g++)c.flags.push(d),u++}}for(c.xs=[],u=0;u<h;u++){var v=(2&c.flags[u])!=0,p=(16&c.flags[u])!=0;v?(c.xs.push(p?a[l]:-a[l]),l++):p?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<h;u++)v=(4&c.flags[u])!=0,p=(32&c.flags[u])!=0,v?(c.ys.push(p?a[l]:-a[l]),l++):p?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var A=0,y=0;for(u=0;u<h;u++)A+=c.xs[u],y+=c.ys[u],c.xs[u]=A,c.ys[u]=y}else{var w;c.parts=[];do{w=o.readUshort(a,l),l+=2;var S={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(S),S.glyphIndex=o.readUshort(a,l),l+=2,1&w){var C=o.readShort(a,l);l+=2;var b=o.readShort(a,l);l+=2}else C=o.readInt8(a,l),l++,b=o.readInt8(a,l),l++;2&w?(S.m.tx=C,S.m.ty=b):(S.p1=C,S.p2=b),8&w?(S.m.a=S.m.d=o.readF2dot14(a,l),l+=2):64&w?(S.m.a=o.readF2dot14(a,l),l+=2,S.m.d=o.readF2dot14(a,l),l+=2):128&w&&(S.m.a=o.readF2dot14(a,l),l+=2,S.m.b=o.readF2dot14(a,l),l+=2,S.m.c=o.readF2dot14(a,l),l+=2,S.m.d=o.readF2dot14(a,l),l+=2)}while(32&w);if(256&w){var M=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<M;u++)c.instr.push(a[l]),l++}}return c},e.GDEF={},e.GDEF.parse=function(r,s,o,a){var l=s;s+=4;var c=e._bin.readUshort(r,s);return{glyphClassDef:c===0?null:e._lctf.readClassDef(r,l+c)}},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var f=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,f+c)}if(s==1&&u.fmt==1){var h=l.readUshort(r,o);o+=2,h!=0&&(u.pos=e.GPOS.readValueRecord(r,o,h))}else if(s==2&&u.fmt>=1&&u.fmt<=2){h=l.readUshort(r,o),o+=2;var d=l.readUshort(r,o);o+=2;var m=e._lctf.numOfOnes(h),g=e._lctf.numOfOnes(d);if(u.fmt==1){u.pairsets=[];var v=l.readUshort(r,o);o+=2;for(var p=0;p<v;p++){var A=c+l.readUshort(r,o);o+=2;var y=l.readUshort(r,A);A+=2;for(var w=[],S=0;S<y;S++){var C=l.readUshort(r,A);A+=2,h!=0&&(R=e.GPOS.readValueRecord(r,A,h),A+=2*m),d!=0&&(z=e.GPOS.readValueRecord(r,A,d),A+=2*g),w.push({gid2:C,val1:R,val2:z})}u.pairsets.push(w)}}if(u.fmt==2){var b=l.readUshort(r,o);o+=2;var M=l.readUshort(r,o);o+=2;var I=l.readUshort(r,o);o+=2;var T=l.readUshort(r,o);for(o+=2,u.classDef1=e._lctf.readClassDef(r,c+b),u.classDef2=e._lctf.readClassDef(r,c+M),u.matrix=[],p=0;p<I;p++){var D=[];for(S=0;S<T;S++){var R=null,z=null;h!=0&&(R=e.GPOS.readValueRecord(r,o,h),o+=2*m),d!=0&&(z=e.GPOS.readValueRecord(r,o,d),o+=2*g),D.push({val1:R,val2:z})}u.matrix.push(D)}}}else if(s==4&&u.fmt==1)u.markCoverage=e._lctf.readCoverage(r,l.readUshort(r,o)+c),u.baseCoverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+c),u.markClassCount=l.readUshort(r,o+4),u.markArray=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+c),u.baseArray=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+c,u.markClassCount);else if(s==6&&u.fmt==1)u.mark1Coverage=e._lctf.readCoverage(r,l.readUshort(r,o)+c),u.mark2Coverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+c),u.markClassCount=l.readUshort(r,o+4),u.mark1Array=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+c),u.mark2Array=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+c,u.markClassCount);else{if(s==9&&u.fmt==1){var L=l.readUshort(r,o);o+=2;var H=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=L;else if(a.ltype!=L)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,c+H)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GPOS.readBaseArray=function(r,s,o){var a=e._bin,l=[],c=s,u=a.readUshort(r,s);s+=2;for(var f=0;f<u;f++){for(var h=[],d=0;d<o;d++)h.push(e.GPOS.readAnchorRecord(r,c+a.readUshort(r,s))),s+=2;l.push(h)}return l},e.GPOS.readMarkArray=function(r,s){var o=e._bin,a=[],l=s,c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=e.GPOS.readAnchorRecord(r,o.readUshort(r,s+2)+l);f.markClass=o.readUshort(r,s),a.push(f),s+=4}return a},e.GPOS.readAnchorRecord=function(r,s){var o=e._bin,a={};return a.fmt=o.readUshort(r,s),a.x=o.readShort(r,s+2),a.y=o.readShort(r,s+4),a},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var f=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,c+f)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(r,o),o+=2;else if(u.fmt==2){var h=l.readUshort(r,o);o+=2,u.newg=l.readUshorts(r,o,h),o+=2*u.newg.length}}else if(s==2&&u.fmt==1){h=l.readUshort(r,o),o+=2,u.seqs=[];for(var d=0;d<h;d++){var m=l.readUshort(r,o)+c;o+=2;var g=l.readUshort(r,m);u.seqs.push(l.readUshorts(r,m+2,g))}}else if(s==4)for(u.vals=[],h=l.readUshort(r,o),o+=2,d=0;d<h;d++){var v=l.readUshort(r,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(r,c+v))}else if(s==5&&u.fmt==2){if(u.fmt==2){var p=l.readUshort(r,o);o+=2,u.cDef=e._lctf.readClassDef(r,c+p),u.scset=[];var A=l.readUshort(r,o);for(o+=2,d=0;d<A;d++){var y=l.readUshort(r,o);o+=2,u.scset.push(y==0?null:e.GSUB.readSubClassSet(r,c+y))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(d=0;d<3;d++){h=l.readUshort(r,o),o+=2;for(var w=[],S=0;S<h;S++)w.push(e._lctf.readCoverage(r,c+l.readUshort(r,o+2*S)));o+=2*h,d==0&&(u.backCvg=w),d==1&&(u.inptCvg=w),d==2&&(u.ahedCvg=w)}h=l.readUshort(r,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(r,o,h)}}else{if(s==7&&u.fmt==1){var C=l.readUshort(r,o);o+=2;var b=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=C;else if(a.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,c+b)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],c=o(r,s);s+=2;for(var u=0;u<c;u++){var f=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+f))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),c=o(r,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,c),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+f))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(r,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(r,s,u),s+=2*a[l[c]].length}return u=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+f))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,f=0,h=0;h<a.maxp.numGlyphs;h++)h<a.hhea.numberOfHMetrics&&(u=l.readUshort(r,s),s+=2,f=l.readShort(r,s),s+=2),c.aWidth.push(u),c.lsBearing.push(f);return c},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,c=l.readUshort(r,s);if(s+=2,c==1)return e.kern.parseV1(r,s-2,o,a);var u=l.readUshort(r,s);s+=2;for(var f={glyph1:[],rval:[]},h=0;h<u;h++){s+=2,o=l.readUshort(r,s),s+=2;var d=l.readUshort(r,s);s+=2;var m=d>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(r,s,f)}return f},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var c=l.readUint(r,s);s+=4;for(var u={glyph1:[],rval:[]},f=0;f<c;f++){l.readUint(r,s),s+=4;var h=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var d=h>>>8;if((d&=15)!=0)throw"unknown kern table format: "+d;s=e.kern.readFormat0(r,s,u)}return u},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var u=0;u<c;u++){var f=a.readUshort(r,s);s+=2;var h=a.readUshort(r,s);s+=2;var d=a.readShort(r,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var m=o.rval[o.rval.length-1];m.glyph2.push(h),m.vals.push(d),l=f}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(u==0)for(var h=0;h<f;h++)c.push(l.readUshort(r,s+(h<<1))<<1);if(u==1)for(h=0;h<f;h++)c.push(l.readUint(r,s+(h<<2)));return c},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},c=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var u,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=s+=2,d=0;d<c;d++){var m=a.readUshort(r,s);s+=2;var g=a.readUshort(r,s);s+=2;var v=a.readUshort(r,s);s+=2;var p=a.readUshort(r,s);s+=2;var A=a.readUshort(r,s);s+=2;var y=a.readUshort(r,s);s+=2;var w,S=f[p],C=h+12*c+y;if(m==0)w=a.readUnicode(r,C,A/2);else if(m==3&&g==0)w=a.readUnicode(r,C,A/2);else if(g==0)w=a.readASCII(r,C,A);else if(g==1)w=a.readUnicode(r,C,A/2);else if(g==3)w=a.readUnicode(r,C,A/2);else{if(m!=1)throw"unknown encoding "+g+", platformID: "+m;w=a.readASCII(r,C,A),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var b="p"+m+","+v.toString(16);l[b]==null&&(l[b]={}),l[b][S!==void 0?S:p]=w,l[b]._lang=v}for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==1033)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==0)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==3084)return l[M];for(var M in l)if(l[M].postScriptName!=null)return l[M];for(var M in l){u=M;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var f=l.groups[u];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,u=r.CFF.Private;if(c.ROS){for(var f=0;c.FDSelect[f+2]<=s;)f+=2;u=c.FDArray[c.FDSelect[f+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,c,u,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,f=c==l?a:c+1,h=1&r.flags[c],d=1&r.flags[u],m=1&r.flags[f],g=r.xs[c],v=r.ys[c];if(c==a)if(h){if(!d){e.U.P.moveTo(s,g,v);continue}e.U.P.moveTo(s,r.xs[u],r.ys[u])}else d?e.U.P.moveTo(s,r.xs[u],r.ys[u]):e.U.P.moveTo(s,(r.xs[u]+g)/2,(r.ys[u]+v)/2);h?d&&e.U.P.lineTo(s,g,v):m?e.U.P.qcurveTo(s,g,v,r.xs[f],r.ys[f]):e.U.P.qcurveTo(s,g,v,(g+r.xs[f])/2,(v+r.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},c=r.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,f=0;f<l.crds.length;f+=2){var h=l.crds[f],d=l.crds[f+1];o.crds.push(h*u.a+d*u.b+u.tx),o.crds.push(h*u.c+d*u.d+u.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,f=o.tabs[c];if(!f.coverage||(u=e._lctf.coverageIndex(f.coverage,r[s]))!=-1){if(o.ltype==1)r[s],f.fmt==1?r[s]=r[s]+f.delta:r[s]=f.newg[u];else if(o.ltype==4)for(var h=f.vals[u],d=0;d<h.length;d++){var m=h[d],g=m.chain.length;if(!(g>l)){for(var v=!0,p=0,A=0;A<g;A++){for(;r[s+p+(1+A)]==-1;)p++;m.chain[A]!=r[s+p+(1+A)]&&(v=!1)}if(v){for(r[s]=m.nglyph,A=0;A<g+p;A++)r[s+A+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var y=e._lctf.getInterval(f.cDef,r[s]),w=f.cDef[y+2],S=f.scset[w],C=0;C<S.length;C++){var b=S[C],M=b.input;if(!(M.length>l)){for(v=!0,A=0;A<M.length;A++){var I=e._lctf.getInterval(f.cDef,r[s+1+A]);if(y==-1&&f.cDef[I+2]!=M[A]){v=!1;break}}if(v){var T=b.substLookupRecords;for(d=0;d<T.length;d+=2)T[d],T[d+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(r,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(r,f.inptCvg,s)||!e.U._glsCovered(r,f.ahedCvg,s+f.inptCvg.length))continue;var D=f.lookupRec;for(C=0;C<D.length;C+=2){y=D[C];var R=a[D[C+1]];e.U._applySubs(r,s+y,R,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var f=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,h=e.U.glyphToPath(r,u),d=0;d<h.crds.length;d+=2)a.crds.push(h.crds[d]+l),a.crds.push(h.crds[d+1]);for(o&&a.cmds.push(o),d=0;d<h.cmds.length;d++)a.cmds.push(h.cmds[d]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(r,u,f))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,c,u){r.cmds.push("C"),r.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var c=s.stack,u=s.nStems,f=s.haveWidth,h=s.width,d=s.open,m=0,g=s.x,v=s.y,p=0,A=0,y=0,w=0,S=0,C=0,b=0,M=0,I=0,T=0,D={val:0,size:0};m<r.length;){e.CFF.getCharString(r,m,D);var R=D.val;if(m+=D.size,R=="o1"||R=="o18")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(R=="o3"||R=="o23")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(R=="o4")c.length>1&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),d&&e.U.P.closePath(l),v+=c.pop(),e.U.P.moveTo(l,g,v),d=!0;else if(R=="o5")for(;c.length>0;)g+=c.shift(),v+=c.shift(),e.U.P.lineTo(l,g,v);else if(R=="o6"||R=="o7")for(var z=c.length,L=R=="o6",H=0;H<z;H++){var J=c.shift();L?g+=J:v+=J,L=!L,e.U.P.lineTo(l,g,v)}else if(R=="o8"||R=="o24"){z=c.length;for(var Z=0;Z+6<=z;)p=g+c.shift(),A=v+c.shift(),y=p+c.shift(),w=A+c.shift(),g=y+c.shift(),v=w+c.shift(),e.U.P.curveTo(l,p,A,y,w,g,v),Z+=6;R=="o24"&&(g+=c.shift(),v+=c.shift(),e.U.P.lineTo(l,g,v))}else{if(R=="o11")break;if(R=="o1234"||R=="o1235"||R=="o1236"||R=="o1237")R=="o1234"&&(A=v,y=(p=g+c.shift())+c.shift(),T=w=A+c.shift(),C=w,M=v,g=(b=(S=(I=y+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,p,A,y,w,I,T),e.U.P.curveTo(l,S,C,b,M,g,v)),R=="o1235"&&(p=g+c.shift(),A=v+c.shift(),y=p+c.shift(),w=A+c.shift(),I=y+c.shift(),T=w+c.shift(),S=I+c.shift(),C=T+c.shift(),b=S+c.shift(),M=C+c.shift(),g=b+c.shift(),v=M+c.shift(),c.shift(),e.U.P.curveTo(l,p,A,y,w,I,T),e.U.P.curveTo(l,S,C,b,M,g,v)),R=="o1236"&&(p=g+c.shift(),A=v+c.shift(),y=p+c.shift(),T=w=A+c.shift(),C=w,b=(S=(I=y+c.shift())+c.shift())+c.shift(),M=C+c.shift(),g=b+c.shift(),e.U.P.curveTo(l,p,A,y,w,I,T),e.U.P.curveTo(l,S,C,b,M,g,v)),R=="o1237"&&(p=g+c.shift(),A=v+c.shift(),y=p+c.shift(),w=A+c.shift(),I=y+c.shift(),T=w+c.shift(),S=I+c.shift(),C=T+c.shift(),b=S+c.shift(),M=C+c.shift(),Math.abs(b-g)>Math.abs(M-v)?g=b+c.shift():v=M+c.shift(),e.U.P.curveTo(l,p,A,y,w,I,T),e.U.P.curveTo(l,S,C,b,M,g,v));else if(R=="o14"){if(c.length>0&&!f&&(h=c.shift()+o.nominalWidthX,f=!0),c.length==4){var U=c.shift(),X=c.shift(),Y=c.shift(),O=c.shift(),W=e.CFF.glyphBySE(o,Y),$=e.CFF.glyphBySE(o,O);e.U._drawCFF(o.CharStrings[W],s,o,a,l),s.x=U,s.y=X,e.U._drawCFF(o.CharStrings[$],s,o,a,l)}d&&(e.U.P.closePath(l),d=!1)}else if(R=="o19"||R=="o20")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0,m+=u+7>>3;else if(R=="o21")c.length>2&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),v+=c.pop(),g+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,g,v),d=!0;else if(R=="o22")c.length>1&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),g+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,g,v),d=!0;else if(R=="o25"){for(;c.length>6;)g+=c.shift(),v+=c.shift(),e.U.P.lineTo(l,g,v);p=g+c.shift(),A=v+c.shift(),y=p+c.shift(),w=A+c.shift(),g=y+c.shift(),v=w+c.shift(),e.U.P.curveTo(l,p,A,y,w,g,v)}else if(R=="o26")for(c.length%2&&(g+=c.shift());c.length>0;)p=g,A=v+c.shift(),g=y=p+c.shift(),v=(w=A+c.shift())+c.shift(),e.U.P.curveTo(l,p,A,y,w,g,v);else if(R=="o27")for(c.length%2&&(v+=c.shift());c.length>0;)A=v,y=(p=g+c.shift())+c.shift(),w=A+c.shift(),g=y+c.shift(),v=w,e.U.P.curveTo(l,p,A,y,w,g,v);else if(R=="o10"||R=="o29"){var k=R=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var V=c.pop(),Q=k.Subrs[V+k.Bias];s.x=g,s.y=v,s.nStems=u,s.haveWidth=f,s.width=h,s.open=d,e.U._drawCFF(Q,s,o,a,l),g=s.x,v=s.y,u=s.nStems,f=s.haveWidth,h=s.width,d=s.open}}else if(R=="o30"||R=="o31"){var j=c.length,oe=(Z=0,R=="o31");for(Z+=j-(z=-3&j);Z<z;)oe?(A=v,y=(p=g+c.shift())+c.shift(),v=(w=A+c.shift())+c.shift(),z-Z==5?(g=y+c.shift(),Z++):g=y,oe=!1):(p=g,A=v+c.shift(),y=p+c.shift(),w=A+c.shift(),g=y+c.shift(),z-Z==5?(v=w+c.shift(),Z++):v=w,oe=!0),e.U.P.curveTo(l,p,A,y,w,g,v),Z+=4}else{if((R+"").charAt(0)=="o")throw console.debug("Unknown operation: "+R,r),R;c.push(R)}}}s.x=g,s.y=v,s.nStems=u,s.haveWidth=f,s.width=h,s.open=d};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function bve(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(R,z){for(var L=new t(31),H=0;H<31;++H)L[H]=z+=1<<R[H-1];var J=new i(L[30]);for(H=1;H<30;++H)for(var Z=L[H];Z<L[H+1];++Z)J[Z]=Z-L[H]<<5|H;return[L,J]},l=a(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var f=a(s,0)[0],h=new t(32768),d=0;d<32768;++d){var m=(43690&d)>>>1|(21845&d)<<1;m=(61680&(m=(52428&m)>>>2|(13107&m)<<2))>>>4|(3855&m)<<4,h[d]=((65280&m)>>>8|(255&m)<<8)>>>1}var g=function(R,z,L){for(var H=R.length,J=0,Z=new t(z);J<H;++J)++Z[R[J]-1];var U,X=new t(z);for(J=0;J<z;++J)X[J]=X[J-1]+Z[J-1]<<1;{U=new t(1<<z);var Y=15-z;for(J=0;J<H;++J)if(R[J])for(var O=J<<4|R[J],W=z-R[J],$=X[R[J]-1]++<<W,k=$|(1<<W)-1;$<=k;++$)U[h[$]>>>Y]=O}return U},v=new e(288);for(d=0;d<144;++d)v[d]=8;for(d=144;d<256;++d)v[d]=9;for(d=256;d<280;++d)v[d]=7;for(d=280;d<288;++d)v[d]=8;var p=new e(32);for(d=0;d<32;++d)p[d]=5;var A=g(v,9),y=g(p,5),w=function(R){for(var z=R[0],L=1;L<R.length;++L)R[L]>z&&(z=R[L]);return z},S=function(R,z,L){var H=z/8|0;return(R[H]|R[H+1]<<8)>>(7&z)&L},C=function(R,z){var L=z/8|0;return(R[L]|R[L+1]<<8|R[L+2]<<16)>>(7&z)},b=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(R,z,L){var H=new Error(z||b[R]);if(H.code=R,Error.captureStackTrace&&Error.captureStackTrace(H,M),!L)throw H;return H},I=function(R,z,L){var H=R.length;if(!H||L&&!L.l&&H<5)return z||new e(0);var J=!z||L,Z=!L||L.i;L||(L={}),z||(z=new e(3*H));var U,X=function(ce){var De=z.length;if(ce>De){var $e=new e(Math.max(2*De,ce));$e.set(z),z=$e}},Y=L.f||0,O=L.p||0,W=L.b||0,$=L.l,k=L.d,V=L.m,Q=L.n,j=8*H;do{if(!$){L.f=Y=S(R,O,1);var oe=S(R,O+1,3);if(O+=3,!oe){var xe=R[(be=((U=O)/8|0)+(7&U&&1)+4)-4]|R[be-3]<<8,pe=be+xe;if(pe>H){Z&&M(0);break}J&&X(W+xe),z.set(R.subarray(be,pe),W),L.b=W+=xe,L.p=O=8*pe;continue}if(oe==1)$=A,k=y,V=9,Q=5;else if(oe==2){var de=S(R,O,31)+257,te=S(R,O+10,15)+4,Ee=de+S(R,O+5,31)+1;O+=14;for(var ue=new e(Ee),ve=new e(19),ye=0;ye<te;++ye)ve[o[ye]]=S(R,O+3*ye,7);O+=3*te;var Be=w(ve),ae=(1<<Be)-1,ie=g(ve,Be);for(ye=0;ye<Ee;){var be,Re=ie[S(R,O,ae)];if(O+=15&Re,(be=Re>>>4)<16)ue[ye++]=be;else{var ct=0,se=0;for(be==16?(se=3+S(R,O,3),O+=2,ct=ue[ye-1]):be==17?(se=3+S(R,O,7),O+=3):be==18&&(se=11+S(R,O,127),O+=7);se--;)ue[ye++]=ct}}var ee=ue.subarray(0,de),Ae=ue.subarray(de);V=w(ee),Q=w(Ae),$=g(ee,V),k=g(Ae,Q)}else M(1);if(O>j){Z&&M(0);break}}J&&X(W+131072);for(var Ue=(1<<V)-1,Ce=(1<<Q)-1,ke=O;;ke=O){var We=(ct=$[C(R,O)&Ue])>>>4;if((O+=15&ct)>j){Z&&M(0);break}if(ct||M(2),We<256)z[W++]=We;else{if(We==256){ke=O,$=null;break}var Xe=We-254;if(We>264){var Oe=r[ye=We-257];Xe=S(R,O,(1<<Oe)-1)+c[ye],O+=Oe}var ft=k[C(R,O)&Ce],lt=ft>>>4;if(ft||M(3),O+=15&ft,Ae=f[lt],lt>3&&(Oe=s[lt],Ae+=C(R,O)&(1<<Oe)-1,O+=Oe),O>j){Z&&M(0);break}J&&X(W+131072);for(var st=W+Xe;W<st;W+=4)z[W]=z[W-Ae],z[W+1]=z[W+1-Ae],z[W+2]=z[W+2-Ae],z[W+3]=z[W+3-Ae];W=st}}L.l=$,L.p=ke,L.b=W,$&&(Y=1,L.m=V,L.d=k,L.n=Q)}while(!Y);return W==z.length?z:function(ce,De,$e){($e==null||$e>ce.length)&&($e=ce.length);var Ye=new(ce instanceof t?t:ce instanceof i?i:e)($e-De);return Ye.set(ce.subarray(De,$e)),Ye}(z,0,W)},T=new e(0),D=typeof TextDecoder<"u"&&new TextDecoder;try{D.decode(T,{stream:!0})}catch{}return n.convert_streams=function(R){var z=new DataView(R),L=0;function H(){var de=z.getUint16(L);return L+=2,de}function J(){var de=z.getUint32(L);return L+=4,de}function Z(de){xe.setUint16(pe,de),pe+=2}function U(de){xe.setUint32(pe,de),pe+=4}for(var X={signature:J(),flavor:J(),length:J(),numTables:H(),reserved:H(),totalSfntSize:J(),majorVersion:H(),minorVersion:H(),metaOffset:J(),metaLength:J(),metaOrigLength:J(),privOffset:J(),privLength:J()},Y=0;Math.pow(2,Y)<=X.numTables;)Y++;Y--;for(var O=16*Math.pow(2,Y),W=16*X.numTables-O,$=12,k=[],V=0;V<X.numTables;V++)k.push({tag:J(),offset:J(),compLength:J(),origLength:J(),origChecksum:J()}),$+=16;var Q,j=new Uint8Array(12+16*k.length+k.reduce(function(de,te){return de+te.origLength+4},0)),oe=j.buffer,xe=new DataView(oe),pe=0;return U(X.flavor),Z(X.numTables),Z(O),Z(Y),Z(W),k.forEach(function(de){U(de.tag),U(de.origChecksum),U($),U(de.origLength),de.outOffset=$,($+=de.origLength)%4!=0&&($+=4-$%4)}),k.forEach(function(de){var te,Ee=R.slice(de.offset,de.offset+de.compLength);if(de.compLength!=de.origLength){var ue=new Uint8Array(de.origLength);te=new Uint8Array(Ee,2),I(te,ue)}else ue=new Uint8Array(Ee);j.set(ue,de.outOffset);var ve=0;($=de.outOffset+de.origLength)%4!=0&&(ve=4-$%4),j.set(new Uint8Array(ve).buffer,de.outOffset+de.origLength),Q=$+ve}),oe.slice(0,Q)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function Mve(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,c=32;let u;function f(b){if(!u){const M={R:s,L:r,D:o,C:l,U:c,T:a};u=new Map;for(let I in i){let T=0;i[I].split(",").forEach(D=>{let[R,z]=D.split("+");R=parseInt(R,36),z=z?parseInt(z,36):0,u.set(T+=R,M[I]);for(let L=z;L--;)u.set(++T,M[I])})}}return u.get(b)||c}const h=1,d=2,m=3,g=4,v=[null,"isol","init","fina","medi"];function p(b){const M=new Uint8Array(b.length);let I=c,T=h,D=-1;for(let R=0;R<b.length;R++){const z=b.codePointAt(R);let L=f(z)|0,H=h;L&a||(I&(r|o|l)?L&(s|o|l)?(H=m,(T===h||T===m)&&M[D]++):L&(r|c)&&(T===d||T===g)&&M[D]--:I&(s|c)&&(T===d||T===g)&&M[D]--,T=M[R]=H,I=L,D=R,z>65535&&R++)}return M}function A(b,M){const I=[];for(let D=0;D<M.length;D++){const R=M.codePointAt(D);R>65535&&D++,I.push(n.U.codeToGlyph(b,R))}const T=b.GSUB;if(T){const{lookupList:D,featureList:R}=T;let z;const L=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,H=[];R.forEach(J=>{if(L.test(J.tag))for(let Z=0;Z<J.tab.length;Z++){if(H[J.tab[Z]])continue;H[J.tab[Z]]=!0;const U=D[J.tab[Z]],X=/^(isol|init|fina|medi)$/.test(J.tag);X&&!z&&(z=p(M));for(let Y=0;Y<I.length;Y++)(!z||!X||v[z[Y]]===J.tag)&&n.U._applySubs(I,Y,U,D)}})}return I}function y(b,M){const I=new Int16Array(M.length*3);let T=0;for(;T<M.length;T++){const L=M[T];if(L===-1)continue;I[T*3+2]=b.hmtx.aWidth[L];const H=b.GPOS;if(H){const J=H.lookupList;for(let Z=0;Z<J.length;Z++){const U=J[Z];for(let X=0;X<U.tabs.length;X++){const Y=U.tabs[X];if(U.ltype===1){if(n._lctf.coverageIndex(Y.coverage,L)!==-1&&Y.pos){z(Y.pos,T);break}}else if(U.ltype===2){let O=null,W=D();if(W!==-1){const $=n._lctf.coverageIndex(Y.coverage,M[W]);if($!==-1){if(Y.fmt===1){const k=Y.pairsets[$];for(let V=0;V<k.length;V++)k[V].gid2===L&&(O=k[V])}else if(Y.fmt===2){const k=n.U._getGlyphClass(M[W],Y.classDef1),V=n.U._getGlyphClass(L,Y.classDef2);O=Y.matrix[k][V]}if(O){O.val1&&z(O.val1,W),O.val2&&z(O.val2,T);break}}}}else if(U.ltype===4){const O=n._lctf.coverageIndex(Y.markCoverage,L);if(O!==-1){const W=D(R),$=W===-1?-1:n._lctf.coverageIndex(Y.baseCoverage,M[W]);if($!==-1){const k=Y.markArray[O],V=Y.baseArray[$][k.markClass];I[T*3]=V.x-k.x+I[W*3]-I[W*3+2],I[T*3+1]=V.y-k.y+I[W*3+1];break}}}else if(U.ltype===6){const O=n._lctf.coverageIndex(Y.mark1Coverage,L);if(O!==-1){const W=D();if(W!==-1){const $=M[W];if(w(b,$)===3){const k=n._lctf.coverageIndex(Y.mark2Coverage,$);if(k!==-1){const V=Y.mark1Array[O],Q=Y.mark2Array[k][V.markClass];I[T*3]=Q.x-V.x+I[W*3]-I[W*3+2],I[T*3+1]=Q.y-V.y+I[W*3+1];break}}}}}}}}else if(b.kern&&!b.cff){const J=D();if(J!==-1){const Z=b.kern.glyph1.indexOf(M[J]);if(Z!==-1){const U=b.kern.rval[Z].glyph2.indexOf(L);U!==-1&&(I[J*3+2]+=b.kern.rval[Z].vals[U])}}}}return I;function D(L){for(let H=T-1;H>=0;H--)if(M[H]!==-1&&(!L||L(M[H])))return H;return-1}function R(L){return w(b,L)===1}function z(L,H){for(let J=0;J<3;J++)I[H*3+J]+=L[J]||0}}function w(b,M){const I=b.GDEF&&b.GDEF.glyphClassDef;return I?n.U._getGlyphClass(M,I):0}function S(...b){for(let M=0;M<b.length;M++)if(typeof b[M]=="number")return b[M]}function C(b){const M=Object.create(null),I=b["OS/2"],T=b.hhea,D=b.head.unitsPerEm,R=S(I&&I.sTypoAscender,T&&T.ascender,D),z={unitsPerEm:D,ascender:R,descender:S(I&&I.sTypoDescender,T&&T.descender,0),capHeight:S(I&&I.sCapHeight,R),xHeight:S(I&&I.sxHeight,R),lineGap:S(I&&I.sTypoLineGap,T&&T.lineGap),supportsCodePoint(L){return n.U.codeToGlyph(b,L)>0},forEachGlyph(L,H,J,Z){let U=0;const X=1/z.unitsPerEm*H,Y=A(b,L);let O=0;const W=y(b,Y);return Y.forEach(($,k)=>{if($!==-1){let V=M[$];if(!V){const{cmds:Q,crds:j}=n.U.glyphToPath(b,$);let oe="",xe=0;for(let ue=0,ve=Q.length;ue<ve;ue++){const ye=t[Q[ue]];oe+=Q[ue];for(let Be=1;Be<=ye;Be++)oe+=(Be>1?",":"")+j[xe++]}let pe,de,te,Ee;if(j.length){pe=de=1/0,te=Ee=-1/0;for(let ue=0,ve=j.length;ue<ve;ue+=2){let ye=j[ue],Be=j[ue+1];ye<pe&&(pe=ye),Be<de&&(de=Be),ye>te&&(te=ye),Be>Ee&&(Ee=Be)}}else pe=te=de=Ee=0;V=M[$]={index:$,advanceWidth:b.hmtx.aWidth[$],xMin:pe,yMin:de,xMax:te,yMax:Ee,path:oe}}Z.call(null,V,U+W[k*3]*X,W[k*3+1]*X,O),U+=W[k*3+2]*X,J&&(U+=J*H)}O+=L.codePointAt(O)>65535?2:1}),U}};return z}return function(M){const I=new Uint8Array(M,0,4),T=n._bin.readASCII(I,0,4);if(T==="wOFF")M=e(M);else if(T==="wOF2")throw new Error("woff2 fonts not supported");return C(n.parse(M)[0])}}const Ive=A0({name:"Typr Font Parser",dependencies:[Cve,bve,Mve],init(n,e,t){const i=n(),r=e();return t(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function Tve(){return function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(y){var w=y>>5;this.buckets.set(w,(this.buckets.get(w)||0)|1<<(31&y))},e.prototype.has=function(y){var w=this.buckets.get(y>>5);return w!==void 0&&(w&1<<(31&y))!=0},e.prototype.serialize=function(){var y=[];return this.buckets.forEach(function(w,S){y.push((+S).toString(36)+":"+w.toString(36))}),y.join(",")},e.prototype.deserialize=function(y){var w=this;this.buckets.clear(),y.split(",").forEach(function(S){var C=S.split(":");w.buckets.set(parseInt(C[0],36),parseInt(C[1],36))})};var t=Math.pow(2,8),i=t-1,r=~i;function s(y){var w=function(C){return C&r}(y).toString(16),S=function(C){return(C&r)+t-1}(y).toString(16);return"codepoint-index/plane"+(y>>16)+"/"+w+"-"+S+".json"}function o(y,w){var S=y&i,C=w.codePointAt(S/6|0);return((C=(C||48)-48)&1<<S%6)!=0}function a(y,w){var S;(S=y,S.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(C){return C.split("-").map(function(b){return parseInt(b.trim(),16)})})).forEach(function(C){var b=C[0],M=C[1];M===void 0&&(M=b),w(b,M)})}function l(y,w){a(y,function(S,C){for(var b=S;b<=C;b++)w(b)})}var c={},u={},f=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(y){var w=f.get(y);return w||(w=new e,l(y.ranges,function(S){return w.add(S)}),f.set(y,w)),w}var m,g=new Map;function v(y,w,S){return y[w]?w:y[S]?S:function(C){for(var b in C)return b}(y)}function p(y,w){var S=w;if(!y.includes(S)){S=1/0;for(var C=0;C<y.length;C++)Math.abs(y[C]-w)<Math.abs(S-w)&&(S=y[C])}return S}function A(y){return m||(m=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(w){m.add(w)})),m.has(y)}return n.CodePointSet=e,n.clearCache=function(){c={},u={}},n.getFontsForString=function(y,w){w===void 0&&(w={});var S,C=w.lang;C===void 0&&(C=new RegExp("\\p{Script=Hangul}","u").test(S=y)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(S)?"ja":"en");var b=w.category;b===void 0&&(b="sans-serif");var M=w.style;M===void 0&&(M="normal");var I=w.weight;I===void 0&&(I=400);var T=(w.dataUrl||h).replace(/\/$/g,""),D=new Map,R=new Uint8Array(y.length),z={},L={},H=new Array(y.length),J=new Map,Z=!1;function U(O){var W=g.get(O);return W||(W=fetch(T+"/"+O).then(function($){if(!$.ok)throw new Error($.statusText);return $.json().then(function(k){if(!Array.isArray(k)||k[0]!==1)throw new Error("Incorrect schema version; need 1, got "+k[0]);return k[1]})}).catch(function($){if(T!==h)return Z||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+T+'", trying default CDN. '+$.message),Z=!0),T=h,g.delete(O),U(O);throw $}),g.set(O,W)),W}for(var X=function(O){var W=y.codePointAt(O),$=s(W);H[O]=$,c[$]||J.has($)||J.set($,U($).then(function(k){c[$]=k})),W>65535&&(O++,Y=O)},Y=0;Y<y.length;Y++)X(Y);return Promise.all(J.values()).then(function(){J.clear();for(var O=function($){var k=y.codePointAt($),V=null,Q=c[H[$]],j=void 0;for(var oe in Q){var xe=L[oe];if(xe===void 0&&(xe=L[oe]=new RegExp(oe).test(C||"en")),xe){for(var pe in j=oe,Q[oe])if(o(k,Q[oe][pe])){V=pe;break}break}}if(!V){e:for(var de in Q)if(de!==j){for(var te in Q[de])if(o(k,Q[de][te])){V=te;break e}}}V||(console.debug("No font coverage for U+"+k.toString(16)),V="latin"),H[$]=V,u[V]||J.has(V)||J.set(V,U("font-meta/"+V+".json").then(function(Ee){u[V]=Ee})),k>65535&&($++,W=$)},W=0;W<y.length;W++)O(W);return Promise.all(J.values())}).then(function(){for(var O,W=null,$=0;$<y.length;$++){var k=y.codePointAt($);if(W&&(A(k)||d(W).has(k)))R[$]=R[$-1];else{W=u[H[$]];var V=z[W.id];if(!V){var Q=W.typeforms,j=v(Q,b,"sans-serif"),oe=v(Q[j],M,"normal"),xe=p((O=Q[j])===null||O===void 0?void 0:O[oe],I);V=z[W.id]=T+"/font-files/"+W.id+"/"+j+"."+oe+"."+xe+".woff"}var pe=D.get(V);pe==null&&(pe=D.size,D.set(V,pe)),R[$]=pe}k>65535&&($++,R[$]=R[$-1])}return{fontUrls:Array.from(D.keys()),chars:R}})},Object.defineProperty(n,"__esModule",{value:!0}),n}({})}function Bve(n,e){const t=Object.create(null),i=Object.create(null);function r(o,a){const l=c=>{console.error(`Failure loading font ${o}`,c)};try{const c=new XMLHttpRequest;c.open("get",o,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const u=n(c.response);u.src=o,a(u)}catch(u){l(u)}},c.onerror=l,c.send()}catch(c){l(c)}}function s(o,a){let l=t[o];l?a(l):i[o]?i[o].push(a):(i[o]=[a],r(o,c=>{c.src=o,t[o]=c,i[o].forEach(u=>u(c)),delete i[o]}))}return function(o,a,{lang:l,fonts:c=[],style:u="normal",weight:f="normal",unicodeFontsURL:h}={}){const d=new Uint8Array(o.length),m=[];o.length||A();const g=new Map,v=[];if(u!=="italic"&&(u="normal"),typeof f!="number"&&(f=f==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(w=>!w.lang||w.lang.test(l)).reverse(),c.length){let b=0;(function M(I=0){for(let T=I,D=o.length;T<D;T++){const R=o.codePointAt(T);if(b===1&&m[d[T-1]].supportsCodePoint(R)||/\s/.test(o[T]))d[T]=d[T-1],b===2&&(v[v.length-1][1]=T);else for(let z=d[T],L=c.length;z<=L;z++)if(z===L){const H=b===2?v[v.length-1]:v[v.length]=[T,T];H[1]=T,b=2}else{d[T]=z;const{src:H,unicodeRange:J}=c[z];if(!J||y(R,J)){const Z=t[H];if(!Z){s(H,()=>{M(T)});return}if(Z.supportsCodePoint(R)){let U=g.get(Z);typeof U!="number"&&(U=m.length,m.push(Z),g.set(Z,U)),d[T]=U,b=1;break}}}R>65535&&T+1<D&&(d[T+1]=d[T],T++,b===2&&(v[v.length-1][1]=T))}p()})()}else v.push([0,o.length-1]),p();function p(){if(v.length){const w=v.map(S=>o.substring(S[0],S[1]+1)).join(`
`);e.getFontsForString(w,{lang:l||void 0,style:u,weight:f,dataUrl:h}).then(({fontUrls:S,chars:C})=>{const b=m.length;let M=0;v.forEach(T=>{for(let D=0,R=T[1]-T[0];D<=R;D++)d[T[0]+D]=C[M++]+b;M++});let I=0;S.forEach((T,D)=>{s(T,R=>{m[D+b]=R,++I===S.length&&A()})})})}else A()}function A(){a({chars:d,fonts:m})}function y(w,S){for(let C=0;C<S.length;C++){const[b,M=b]=S[C];if(b<=w&&w<=M)return!0}return!1}}}const Pve=A0({name:"FontResolver",dependencies:[Bve,Ive,Tve],init(n,e,t){return n(e,t())}});function Rve(n,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:m,lang:g,fonts:v,style:p,weight:A,preResolvedFonts:y,unicodeFontsURL:w},S){const C=({chars:b,fonts:M})=>{let I,T;const D=[];for(let R=0;R<b.length;R++)b[R]!==T?(T=b[R],D.push(I={start:R,end:R,fontObj:M[b[R]]})):I.end=R;S(D)};y?C(y):n(m,C,{lang:g,fonts:v,style:p,weight:A,unicodeFontsURL:w})}function a({text:m="",font:g,lang:v,sdfGlyphSize:p=64,fontSize:A=400,fontWeight:y=1,fontStyle:w="normal",letterSpacing:S=0,lineHeight:C="normal",maxWidth:b=1/0,direction:M,textAlign:I="left",textIndent:T=0,whiteSpace:D="normal",overflowWrap:R="normal",anchorX:z=0,anchorY:L=0,metricsOnly:H=!1,unicodeFontsURL:J,preResolvedFonts:Z=null,includeCaretPositions:U=!1,chunkedBoundsSize:X=8192,colorRanges:Y=null},O){const W=f(),$={fontLoad:0,typesetting:0};m.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),m=m.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),A=+A,S=+S,b=+b,C=C||"normal",T=+T,o({text:m,lang:v,style:w,weight:y,fonts:typeof g=="string"?[{src:g}]:g,unicodeFontsURL:J,preResolvedFonts:Z},k=>{$.fontLoad=f()-W;const V=isFinite(b);let Q=null,j=null,oe=null,xe=null,pe=null,de=null,te=null,Ee=null,ue=0,ve=0,ye=D!=="nowrap";const Be=new Map,ae=f();let ie=T,be=0,Re=new h;const ct=[Re];k.forEach(Ce=>{const{fontObj:ke}=Ce,{ascender:We,descender:Xe,unitsPerEm:Oe,lineGap:ft,capHeight:lt,xHeight:st}=ke;let ce=Be.get(ke);if(!ce){const _e=A/Oe,Me=C==="normal"?(We-Xe+ft)*_e:C*A,at=(Me-(We-Xe)*_e)/2,ot=Math.min(Me,(We-Xe)*_e),yt=(We+Xe)/2*_e+ot/2;ce={index:Be.size,src:ke.src,fontObj:ke,fontSizeMult:_e,unitsPerEm:Oe,ascender:We*_e,descender:Xe*_e,capHeight:lt*_e,xHeight:st*_e,lineHeight:Me,baseline:-at-We*_e,caretTop:yt,caretBottom:yt-ot},Be.set(ke,ce)}const{fontSizeMult:De}=ce,$e=m.slice(Ce.start,Ce.end+1);let Ye,fe;ke.forEachGlyph($e,A,S,(_e,Me,at,ot)=>{Me+=be,ot+=Ce.start,Ye=Me,fe=_e;const yt=m.charAt(ot),we=_e.advanceWidth*De,Ie=Re.count;let Fe;if("isEmpty"in _e||(_e.isWhitespace=!!yt&&new RegExp(r).test(yt),_e.canBreakAfter=!!yt&&s.test(yt),_e.isEmpty=_e.xMin===_e.xMax||_e.yMin===_e.yMax||i.test(yt)),!_e.isWhitespace&&!_e.isEmpty&&ve++,ye&&V&&!_e.isWhitespace&&Me+we+ie>b&&Ie){if(Re.glyphAt(Ie-1).glyphObj.canBreakAfter)Fe=new h,ie=-Me;else for(let ut=Ie;ut--;)if(ut===0&&R==="break-word"){Fe=new h,ie=-Me;break}else if(Re.glyphAt(ut).glyphObj.canBreakAfter){Fe=Re.splitAt(ut+1);const Mt=Fe.glyphAt(0).x;ie-=Mt;for(let It=Fe.count;It--;)Fe.glyphAt(It).x-=Mt;break}Fe&&(Re.isSoftWrapped=!0,Re=Fe,ct.push(Re),ue=b)}let qe=Re.glyphAt(Re.count);qe.glyphObj=_e,qe.x=Me+ie,qe.y=at,qe.width=we,qe.charIndex=ot,qe.fontData=ce,yt===`
`&&(Re=new h,ct.push(Re),ie=-(Me+we+S*A)+T)}),be=Ye+fe.advanceWidth*De+S*A});let se=0;ct.forEach(Ce=>{let ke=!0;for(let We=Ce.count;We--;){const Xe=Ce.glyphAt(We);ke&&!Xe.glyphObj.isWhitespace&&(Ce.width=Xe.x+Xe.width,Ce.width>ue&&(ue=Ce.width),ke=!1);let{lineHeight:Oe,capHeight:ft,xHeight:lt,baseline:st}=Xe.fontData;Oe>Ce.lineHeight&&(Ce.lineHeight=Oe);const ce=st-Ce.baseline;ce<0&&(Ce.baseline+=ce,Ce.cap+=ce,Ce.ex+=ce),Ce.cap=Math.max(Ce.cap,Ce.baseline+ft),Ce.ex=Math.max(Ce.ex,Ce.baseline+lt)}Ce.baseline-=se,Ce.cap-=se,Ce.ex-=se,se+=Ce.lineHeight});let ee=0,Ae=0;if(z&&(typeof z=="number"?ee=-z:typeof z=="string"&&(ee=-ue*(z==="left"?0:z==="center"?.5:z==="right"?1:c(z)))),L&&(typeof L=="number"?Ae=-L:typeof L=="string"&&(Ae=L==="top"?0:L==="top-baseline"?-ct[0].baseline:L==="top-cap"?-ct[0].cap:L==="top-ex"?-ct[0].ex:L==="middle"?se/2:L==="bottom"?se:L==="bottom-baseline"?-ct[ct.length-1].baseline:c(L)*se)),!H){const Ce=e.getEmbeddingLevels(m,M);Q=new Uint16Array(ve),j=new Uint8Array(ve),oe=new Float32Array(ve*2),xe={},te=[1/0,1/0,-1/0,-1/0],Ee=[],U&&(de=new Float32Array(m.length*4)),Y&&(pe=new Uint8Array(ve*3));let ke=0,We=-1,Xe=-1,Oe,ft;if(ct.forEach((lt,st)=>{let{count:ce,width:De}=lt;if(ce>0){let $e=0;for(let ot=ce;ot--&&lt.glyphAt(ot).glyphObj.isWhitespace;)$e++;let Ye=0,fe=0;if(I==="center")Ye=(ue-De)/2;else if(I==="right")Ye=ue-De;else if(I==="justify"&&lt.isSoftWrapped){let ot=0;for(let yt=ce-$e;yt--;)lt.glyphAt(yt).glyphObj.isWhitespace&&ot++;fe=(ue-De)/ot}if(fe||Ye){let ot=0;for(let yt=0;yt<ce;yt++){let we=lt.glyphAt(yt);const Ie=we.glyphObj;we.x+=Ye+ot,fe!==0&&Ie.isWhitespace&&yt<ce-$e&&(ot+=fe,we.width+=fe)}}const _e=e.getReorderSegments(m,Ce,lt.glyphAt(0).charIndex,lt.glyphAt(lt.count-1).charIndex);for(let ot=0;ot<_e.length;ot++){const[yt,we]=_e[ot];let Ie=1/0,Fe=-1/0;for(let qe=0;qe<ce;qe++)if(lt.glyphAt(qe).charIndex>=yt){let ut=qe,Mt=qe;for(;Mt<ce;Mt++){let It=lt.glyphAt(Mt);if(It.charIndex>we)break;Mt<ce-$e&&(Ie=Math.min(Ie,It.x),Fe=Math.max(Fe,It.x+It.width))}for(let It=ut;It<Mt;It++){const wt=lt.glyphAt(It);wt.x=Fe-(wt.x+wt.width-Ie)}break}}let Me;const at=ot=>Me=ot;for(let ot=0;ot<ce;ot++){const yt=lt.glyphAt(ot);Me=yt.glyphObj;const we=Me.index,Ie=Ce.levels[yt.charIndex]&1;if(Ie){const Fe=e.getMirroredCharacter(m[yt.charIndex]);Fe&&yt.fontData.fontObj.forEachGlyph(Fe,0,0,at)}if(U){const{charIndex:Fe,fontData:qe}=yt,ut=yt.x+ee,Mt=yt.x+yt.width+ee;de[Fe*4]=Ie?Mt:ut,de[Fe*4+1]=Ie?ut:Mt,de[Fe*4+2]=lt.baseline+qe.caretBottom+Ae,de[Fe*4+3]=lt.baseline+qe.caretTop+Ae;const It=Fe-We;It>1&&u(de,We,It),We=Fe}if(Y){const{charIndex:Fe}=yt;for(;Fe>Xe;)Xe++,Y.hasOwnProperty(Xe)&&(ft=Y[Xe])}if(!Me.isWhitespace&&!Me.isEmpty){const Fe=ke++,{fontSizeMult:qe,src:ut,index:Mt}=yt.fontData,It=xe[ut]||(xe[ut]={});It[we]||(It[we]={path:Me.path,pathBounds:[Me.xMin,Me.yMin,Me.xMax,Me.yMax]});const wt=yt.x+ee,Ht=yt.y+lt.baseline+Ae;oe[Fe*2]=wt,oe[Fe*2+1]=Ht;const zt=wt+Me.xMin*qe,Fn=Ht+Me.yMin*qe,wn=wt+Me.xMax*qe,ht=Ht+Me.yMax*qe;zt<te[0]&&(te[0]=zt),Fn<te[1]&&(te[1]=Fn),wn>te[2]&&(te[2]=wn),ht>te[3]&&(te[3]=ht),Fe%X===0&&(Oe={start:Fe,end:Fe,rect:[1/0,1/0,-1/0,-1/0]},Ee.push(Oe)),Oe.end++;const un=Oe.rect;if(zt<un[0]&&(un[0]=zt),Fn<un[1]&&(un[1]=Fn),wn>un[2]&&(un[2]=wn),ht>un[3]&&(un[3]=ht),Q[Fe]=we,j[Fe]=Mt,Y){const Jn=Fe*3;pe[Jn]=ft>>16&255,pe[Jn+1]=ft>>8&255,pe[Jn+2]=ft&255}}}}}),de){const lt=m.length-We;lt>1&&u(de,We,lt)}}const Ue=[];Be.forEach(({index:Ce,src:ke,unitsPerEm:We,ascender:Xe,descender:Oe,lineHeight:ft,capHeight:lt,xHeight:st})=>{Ue[Ce]={src:ke,unitsPerEm:We,ascender:Xe,descender:Oe,lineHeight:ft,capHeight:lt,xHeight:st}}),$.typesetting=f()-ae,O({glyphIds:Q,glyphFontIndices:j,glyphPositions:oe,glyphData:xe,fontData:Ue,caretPositions:de,glyphColors:pe,chunkedBounds:Ee,fontSize:A,topBaseline:Ae+ct[0].baseline,blockBounds:[ee,Ae-se,ee+ue,Ae],visibleBounds:te,timings:$})})}function l(m,g){a({...m,metricsOnly:!0},v=>{const[p,A,y,w]=v.blockBounds;g({width:y-p,height:w-A})})}function c(m){let g=m.match(/^([\d.]+)%$/),v=g?parseFloat(g[1]):NaN;return isNaN(v)?0:v/100}function u(m,g,v){const p=m[g*4],A=m[g*4+1],y=m[g*4+2],w=m[g*4+3],S=(A-p)/v;for(let C=0;C<v;C++){const b=(g+C)*4;m[b]=p+S*C,m[b+1]=p+S*(C+1),m[b+2]=y,m[b+3]=w}}function f(){return(self.performance||Date).now()}function h(){this.data=[]}const d=["glyphObj","x","y","width","charIndex","fontData"];return h.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/d.length)},glyphAt(m){let g=h.flyweight;return g.data=this.data,g.index=m,g},splitAt(m){let g=new h;return g.data=this.data.splice(m*d.length),g}},h.flyweight=d.reduce((m,g,v,p)=>(Object.defineProperty(m,g,{get(){return this.data[this.index*d.length+v]},set(A){this.data[this.index*d.length+v]=A}}),m),{data:null,index:0}),{typeset:a,measure:l}}const Rh=()=>(self.performance||Date).now(),yw=RW();let EO;function Dve(n,e,t,i,r,s,o,a,l,c,u=!0){return u?Fve(n,e,t,i,r,s,o,a,l,c).then(null,f=>(EO||(console.warn("WebGL SDF generation failed, falling back to JS",f),EO=!0),SO(n,e,t,i,r,s,o,a,l,c))):SO(n,e,t,i,r,s,o,a,l,c)}const x_=[],Lve=5;let B6=0;function LW(){const n=Rh();for(;x_.length&&Rh()-n<Lve;)x_.shift()();B6=x_.length?setTimeout(LW,0):0}const Fve=(...n)=>new Promise((e,t)=>{x_.push(()=>{const i=Rh();try{yw.webgl.generateIntoCanvas(...n),e({timing:Rh()-i})}catch(r){t(r)}}),B6||(B6=setTimeout(LW,0))}),Ove=4,zve=2e3,wO={};let Uve=0;function SO(n,e,t,i,r,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+Uve++%Ove;let f=wO[u];return f||(f=wO[u]={workerModule:A0({name:u,workerId:u,dependencies:[RW,Rh],init(h,d){const m=h().javascript.generate;return function(...g){const v=d();return{textureData:m(...g),timing:d()-v}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(n,e,t,i,r,s).then(({textureData:h,timing:d})=>{const m=Rh(),g=new Uint8Array(h.length*4);for(let v=0;v<h.length;v++)g[v*4+c]=h[v];return yw.webglUtils.renderImageData(o,g,a,l,n,e,1<<3-c),d+=Rh()-m,--f.requests===0&&(f.idleTimer=setTimeout(()=>{mve(u)},zve)),{timing:d}})}function kve(n){n._warm||(yw.webgl.isSupported(n),n._warm=!0)}const Nve=yw.webglUtils.resizeWebGLCanvasWithoutClearing,Gp={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Gve=new et;function hp(){return(self.performance||Date).now()}const CO=Object.create(null);function FW(n,e){n=Vve({},n);const t=hp(),{defaultFontURL:i}=Gp,r=[];if(i&&r.push({label:"default",src:bO(i)}),n.font&&r.push({label:"user",src:bO(n.font)}),n.font=r,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||Gp.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||Gp.unicodeFontsURL,n.colorRanges!=null){let h={};for(let d in n.colorRanges)if(n.colorRanges.hasOwnProperty(d)){let m=n.colorRanges[d];typeof m!="number"&&(m=Gve.set(m).getHex()),h[d]=m}n.colorRanges=h}Object.freeze(n);const{textureWidth:s,sdfExponent:o}=Gp,{sdfGlyphSize:a}=n,l=s/a*4;let c=CO[a];if(!c){const h=document.createElement("canvas");h.width=s,h.height=a*256/l,c=CO[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:h,sdfTexture:new Nn(h,void 0,void 0,void 0,Xt,Xt),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,Hve(c)}const{sdfTexture:u,sdfCanvas:f}=c;Wve(n).then(h=>{const{glyphIds:d,glyphFontIndices:m,fontData:g,glyphPositions:v,fontSize:p,timings:A}=h,y=[],w=new Float32Array(d.length*4);let S=0,C=0;const b=hp(),M=g.map(z=>{let L=c.glyphsByFont.get(z.src);return L||c.glyphsByFont.set(z.src,L=new Map),L});d.forEach((z,L)=>{const H=m[L],{src:J,unitsPerEm:Z}=g[H];let U=M[H].get(z);if(!U){const{path:$,pathBounds:k}=h.glyphData[J][z],V=Math.max(k[2]-k[0],k[3]-k[1])/a*(Gp.sdfMargin*a+.5),Q=c.glyphCount++,j=[k[0]-V,k[1]-V,k[2]+V,k[3]+V];M[H].set(z,U={path:$,atlasIndex:Q,sdfViewBox:j}),y.push(U)}const{sdfViewBox:X}=U,Y=v[C++],O=v[C++],W=p/Z;w[S++]=Y+X[0]*W,w[S++]=O+X[1]*W,w[S++]=Y+X[2]*W,w[S++]=O+X[3]*W,d[L]=U.atlasIndex}),A.quads=(A.quads||0)+(hp()-b);const I=hp();A.sdf={};const T=f.height,D=Math.ceil(c.glyphCount/l),R=Math.pow(2,Math.ceil(Math.log2(D*a)));R>T&&(console.info(`Increasing SDF texture size ${T}->${R}`),Nve(f,s,R),u.dispose()),Promise.all(y.map(z=>OW(z,c,n.gpuAccelerateSDF).then(({timing:L})=>{A.sdf[z.atlasIndex]=L}))).then(()=>{y.length&&!c.contextLost&&(zW(c),u.needsUpdate=!0),A.sdfTotal=hp()-I,A.total=hp()-t,e(Object.freeze({parameters:n,sdfTexture:u,sdfGlyphSize:a,sdfExponent:o,glyphBounds:w,glyphAtlasIndices:d,glyphColors:h.glyphColors,caretPositions:h.caretPositions,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))})}),Promise.resolve().then(()=>{c.contextLost||kve(f)})}function OW({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Gp,c=Math.max(t[2]-t[0],t[3]-t[1]),u=Math.floor(e/4),f=u%(a/i)*i,h=Math.floor(u/(a/i))*i,d=e%4;return Dve(i,i,n,t,c,l,r,f,h,d,o)}function Hve(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(OW(s,n,!0))})}),Promise.all(i).then(()=>{zW(n),n.sdfTexture.needsUpdate=!0})})}function Qve({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;FW({font:n,sdfGlyphSize:t,text:r},i)}function Vve(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let lx;function bO(n){return lx||(lx=typeof document>"u"?{}:document.createElement("a")),lx.href=n,lx.href}function zW(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),t.image={width:i,height:r,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const jve=A0({name:"Typesetter",dependencies:[Rve,Pve,Ave],init(n,e,t){return n(e,t())}}),Wve=A0({name:"Typesetter",dependencies:[jve],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}}),MO={};function Yve(n){let e=MO[n];if(!e){const t=new br(1,1,n,n),i=t.clone(),r=t.attributes,s=i.attributes,o=new Gt,a=r.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new Et([...r[l].array,...s[l].array],r[l].itemSize))}),o.setIndex([...t.index.array,...i.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=MO[n]=o}return e}const Xve="aTroikaGlyphBounds",IO="aTroikaGlyphIndex",qve="aTroikaGlyphColor";class Jve extends mv{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Bi,this.boundingBox=new Gn}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===er?t/2:0,e===ni?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=Yve(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){jC(this,Xve,e,4),jC(this,IO,t,1),jC(this,qve,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=r/2,f=r*2,h=Math.abs(t),d=e[0]/h,m=e[2]/h,g=s((d+u)/f)!==s((m+u)/f)?-h:o(l(d)*h,l(m)*h),v=s((d-u)/f)!==s((m-u)/f)?h:a(l(d)*h,l(m)*h),p=s((d+r)/f)!==s((m+r)/f)?h*2:a(h-c(d)*h,h-c(m)*h);i.min.set(g,e[1],t<0?-p:0),i.max.set(v,e[3],t<0?0:p)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(IO).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function jC(n,e,t,i){const r=n.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(n.setAttribute(e,new el(t,i)),delete n._maxInstanceCount,n.dispose()):r&&n.deleteAttribute(e)}const Kve=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,$ve=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Zve=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,eye=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function tye(n){const e=T6(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Se},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new sn(0,0,0,0)},uTroikaClipRect:{value:new sn(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Se},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new et},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new tn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Kve,vertexTransform:$ve,fragmentDefs:Zve,fragmentColorTransform:eye,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(DW,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const X8=new Ir({color:16777215,side:ni,transparent:!0}),TO=8421504,BO=new He,cx=new F,WC=new F,N1=[],nye=new F,YC="+x+y";function PO(n){return Array.isArray(n)?n[0]:n}let UW=()=>{const n=new gt(new br(1,1),X8);return UW=()=>n,n},kW=()=>{const n=new gt(new br(1,1,32,1),X8);return kW=()=>n,n};const iye={type:"syncstart"},rye={type:"synccomplete"},NW=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],sye=NW.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let GW=class extends gt{constructor(){const e=new Jve;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=TO,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=YC,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(iye),FW({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(rye),e&&e()})))}onBeforeRender(e,t,i,r,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Rs}onAfterRender(e,t,i,r,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=X8.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=tye(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return PO(this.material).getDepthMaterial()}get customDistanceMaterial(){return PO(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:a,blockBounds:l}=r;i.uTroikaSDFTexture.value=a,i.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let c=0,u=0,f=0,h,d,m,g=0,v=0;if(t){let{outlineWidth:A,outlineOffsetX:y,outlineOffsetY:w,outlineBlur:S,outlineOpacity:C}=this;c=this._parsePercent(A)||0,u=Math.max(0,this._parsePercent(S)||0),h=C,g=this._parsePercent(y)||0,v=this._parsePercent(w)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(m=this.strokeColor,i.uTroikaStrokeColor.value.set(m??TO),d=this.strokeOpacity,d==null&&(d=1)),h=this.fillOpacity;i.uTroikaDistanceOffset.value=c,i.uTroikaPositionOffset.value.set(g,v),i.uTroikaBlurRadius.value=u,i.uTroikaStrokeWidth.value=f,i.uTroikaStrokeOpacity.value=d,i.uTroikaFillOpacity.value=h??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&p.length===4)i.uTroikaClipRect.value.fromArray(p);else{const A=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-A,l[1]-A,l[2]+A,l[3]+A)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new et;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||YC;if(o!==e._orientation){let a=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==YC&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,f,h]=l;cx.set(0,0,0)[u]=c==="-"?1:-1,WC.set(0,0,0)[h]=f==="-"?-1:1,BO.lookAt(nye,cx.cross(WC),WC),a.setFromMatrix4(BO)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Se){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new Se){return cx.copy(e),this.localPositionToTextCoords(this.worldToLocal(cx),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,o=r?kW():UW(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let f=s[0]+c.getX(u)*(s[2]-s[0]);const h=s[1]+c.getY(u)*(s[3]-s[1]);let d=0;r&&(d=r-Math.cos(f/r)*r,f=Math.sin(f/r)*r),l.setXYZ(u,f,h,d)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,N1.length=0,o.raycast(e,N1);for(let u=0;u<N1.length;u++)N1[u].object=this,t.push(N1[u])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,sye.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};NW.forEach(n=>{const e="_private_"+n;Object.defineProperty(GW.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const oye=E.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:s,characters:o,onSync:a,...l},c)=>{const u=Pe(({invalidate:m})=>m),[f]=E.useState(()=>new GW),[h,d]=E.useMemo(()=>{const m=[];let g="";return E.Children.forEach(s,v=>{typeof v=="string"||typeof v=="number"?g+=v:m.push(v)}),[m,g]},[s]);return Qc(()=>new Promise(m=>Qve({font:i,characters:o},m)),["troika-text",i,o]),E.useLayoutEffect(()=>void f.sync(()=>{u(),a&&a(f)})),E.useEffect(()=>()=>f.dispose(),[f]),E.createElement("primitive",tt({object:f,ref:c,font:i,text:d,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},l),h)});let XC=null;async function aye(n){return typeof n=="string"?await(await fetch(n)).json():n}function lye(n){return XC||(XC=new mAe),XC.parse(n)}async function HW(n){const e=await aye(n);return lye(e)}function xw(n){return Qc(HW,[n])}xw.preload=n=>SQ(HW,[n]);xw.clear=n=>VE([n]);const cye=["string","number"],uye=n=>{let e="";const t=[];return E.Children.forEach(n,i=>{cye.includes(typeof i)?e+=i+"":t.push(i)}),[e,...t]},QW=E.forwardRef(({font:n,letterSpacing:e=0,lineHeight:t=1,size:i=1,height:r=.2,bevelThickness:s=.1,bevelSize:o=.01,bevelEnabled:a=!1,bevelOffset:l=0,bevelSegments:c=4,curveSegments:u=8,smooth:f,children:h,...d},m)=>{E.useMemo(()=>Ai({RenamedTextGeometry:Qge}),[]);const g=E.useRef(null),v=xw(n),p=E.useMemo(()=>({font:v,size:i,height:r,bevelThickness:s,bevelSize:o,bevelEnabled:a,bevelSegments:c,bevelOffset:l,curveSegments:u,letterSpacing:e,lineHeight:t}),[v,i,r,s,o,a,c,l,u,e,t]),[A,...y]=E.useMemo(()=>uye(h),[h]),w=E.useMemo(()=>[A,p],[A,p]);return E.useLayoutEffect(()=>{f&&(g.current.geometry=j0e(g.current.geometry,f),g.current.geometry.computeVertexNormals())},[w,f]),E.useImperativeHandle(m,()=>g.current,[]),E.createElement("mesh",tt({},d,{ref:g}),E.createElement("renamedTextGeometry",{args:w}),y)}),fye=()=>{try{var n=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&n.getContext("webgl2"))}catch{return!1}},hye=E.forwardRef(({children:n,multisamping:e=8,renderIndex:t=1,disableRender:i,disableGamma:r,disableRenderPass:s,depthBuffer:o=!0,stencilBuffer:a=!1,anisotropy:l=1,encoding:c,type:u,...f},h)=>{E.useMemo(()=>Ai({EffectComposer:ige,RenderPass:oge,ShaderPass:_6}),[]);const d=E.useRef(null);E.useImperativeHandle(h,()=>d.current,[]);const{scene:m,camera:g,gl:v,size:p,viewport:A}=Pe(),[y]=E.useState(()=>{const S=new Qn(p.width,p.height,{type:u||jn,format:Vn,depthBuffer:o,stencilBuffer:a,anisotropy:l});return u===hi&&c!=null&&("colorSpace"in S?S.texture.colorSpace=c:S.texture.encoding=c),S.samples=e,S});E.useEffect(()=>{var S,C;(S=d.current)==null||S.setSize(p.width,p.height),(C=d.current)==null||C.setPixelRatio(A.dpr)},[v,p,A.dpr]),Bt(()=>{var S;i||(S=d.current)==null||S.render()},t);const w=[];return s||w.push(E.createElement("renderPass",{key:"renderpass",attach:`passes-${w.length}`,args:[m,g]})),r||w.push(E.createElement("shaderPass",{attach:`passes-${w.length}`,key:"gammapass",args:[Vge]})),E.Children.forEach(n,S=>{S&&w.push(E.cloneElement(S,{key:w.length,attach:`passes-${w.length}`}))}),E.createElement("effectComposer",tt({ref:d,args:[v,y]},f),w)});let P6=function(n){return n.Linear="linear",n.Radial="radial",n}({});function dye({stops:n,colors:e,size:t=1024,width:i=16,type:r=P6.Linear,innerCircleRadius:s=0,outerCircleRadius:o="auto",...a}){const l=Pe(u=>u.gl),c=E.useMemo(()=>{const u=document.createElement("canvas"),f=u.getContext("2d");u.width=i,u.height=t;let h;if(r===P6.Linear)h=f.createLinearGradient(0,0,0,t);else{const g=u.width/2,v=u.height/2,p=o!=="auto"?Math.abs(Number(o)):Math.sqrt(g**2+v**2);h=f.createRadialGradient(g,v,Math.abs(s),g,v,p)}const d=new et;let m=n.length;for(;m--;)h.addColorStop(n[m],d.set(e[m]).getStyle());return f.save(),f.fillStyle=h,f.fillRect(0,0,i,t),f.restore(),u},[n]);return E.createElement("canvasTexture",tt({colorSpace:l.outputColorSpace,args:[c],attach:"map"},a))}function Po(n,e,t,i){const r=class extends Wn{constructor(o={}){const a=Object.entries(n);super({uniforms:a.reduce((l,[c,u])=>{const f=va.clone({[c]:{value:u}});return{...l,...f}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,o),i&&i(this)}};return r.key=jt.generateUUID(),r}const Tm=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function wf(n,e){const t=Pe(s=>s.gl),i=Pi(kl,Tm(n)?Object.values(n):n);return E.useLayoutEffect(()=>{e==null||e(i)},[e]),E.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(i)?s=i:i instanceof Nn?s=[i]:Tm(i)&&(s=Object.values(i)),s.forEach(o=>{o instanceof Nn&&t.initTexture(o)})}},[t,i]),E.useMemo(()=>{if(Tm(n)){const s={};let o=0;for(const a in n)s[a]=i[o++];return console.log("keyed",s),s}else return i},[n,i])}wf.preload=n=>Pi.preload(kl,n);wf.clear=n=>Pi.clear(kl,n);const pye=({children:n,input:e,onLoad:t})=>{const i=wf(e,t);return E.createElement(E.Fragment,null,n==null?void 0:n(i))},mye=()=>parseInt(il.replace(/\D+/g,"")),Os=mye(),RO=Po({color:new et("white"),scale:new Se(1,1),imageBounds:new Se(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,opacity:1},`
  varying vec2 vUv;
  varying vec2 vPos;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
    vPos = position.xy;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  varying vec2 vPos;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform float resolution;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float radius;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  
  const float PI = 3.14159265;
    
  // from https://iquilezles.org/articles/distfunctions
  float udRoundBox( vec2 p, vec2 b, float r ) {
    return length(max(abs(p)-b+r,0.0))-r;
  }

  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);

    vec2 res = vec2(scale * resolution);
    vec2 halfRes = 0.5 * res;
    float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    
	  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);
    
    #include <tonemapping_fragment>
    #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
  }
`),VW=E.forwardRef(({children:n,color:e,segments:t=1,scale:i=1,zoom:r=1,grayscale:s=0,opacity:o=1,radius:a=0,texture:l,toneMapped:c,transparent:u,side:f,...h},d)=>{Ai({ImageMaterial:RO});const m=E.useRef(null),g=Pe(y=>y.size),v=Array.isArray(i)?[i[0],i[1]]:[i,i],p=[l.image.width,l.image.height],A=Math.max(g.width,g.height);return E.useImperativeHandle(d,()=>m.current,[]),E.useLayoutEffect(()=>{m.current.geometry.parameters&&m.current.material.scale.set(v[0]*m.current.geometry.parameters.width,v[1]*m.current.geometry.parameters.height)},[]),E.createElement("mesh",tt({ref:m,scale:Array.isArray(i)?[...i,1]:i},h),E.createElement("planeGeometry",{args:[1,1,t,t]}),E.createElement("imageMaterial",{color:e,map:l,zoom:r,grayscale:s,opacity:o,scale:v,imageBounds:p,resolution:A,radius:a,toneMapped:c,transparent:u,side:f,key:RO.key}),n)}),gye=E.forwardRef(({url:n,...e},t)=>{const i=wf(n);return E.createElement(VW,tt({},e,{texture:i,ref:t}))}),Aye=E.forwardRef(({url:n,...e},t)=>E.createElement(VW,tt({},e,{ref:t}))),vye=E.forwardRef((n,e)=>{if(n.url)return E.createElement(gye,tt({},n,{ref:e}));if(n.texture)return E.createElement(Aye,tt({},n,{ref:e}));throw new Error("<Image /> requires a url or texture")}),jW=E.forwardRef(({threshold:n=15,...e},t)=>{const i=E.useRef(null);E.useImperativeHandle(t,()=>i.current,[]);const r=E.useMemo(()=>[0,0,0,1,0,0],[]),s=E.useRef(),o=E.useRef();return E.useLayoutEffect(()=>{const a=i.current.parent;if(a){const l=a.geometry;if(l!==s.current||n!==o.current){s.current=l,o.current=n;const c=new FT(l,n).attributes.position.array;i.current.geometry.setPositions(c),i.current.geometry.attributes.instanceStart.needsUpdate=!0,i.current.geometry.attributes.instanceEnd.needsUpdate=!0,i.current.computeLineDistances()}}}),E.createElement(tl,tt({segments:!0,points:r,ref:i,raycast:()=>null},e))}),DO=Po({screenspace:!1,color:new et("black"),opacity:1,thickness:.05,size:new Se},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   uniform float thickness;
   uniform float screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
	     #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
	   #include <morphtarget_vertex>
	   #include <skinning_vertex>
     #include <project_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace == 0.0) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0); 
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   void main(){
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
   }`);function yye({color:n="black",opacity:e=1,transparent:t=!1,screenspace:i=!1,toneMapped:r=!0,polygonOffset:s=!1,polygonOffsetFactor:o=0,renderOrder:a=0,thickness:l=.05,angle:c=Math.PI,...u}){const f=E.useRef(),[h]=E.useState(()=>new DO({side:er})),{gl:d}=Pe(),m=d.getDrawingBufferSize(new Se);E.useMemo(()=>Ai({OutlinesMaterial:DO}),[]);const g=E.useRef(0),v=E.useRef();return E.useLayoutEffect(()=>{const p=f.current;if(!p)return;const A=p.parent;if(A&&A.geometry&&(g.current!==c||v.current!==A.geometry)){var y;g.current=c,v.current=A.geometry;let w=(y=p.children)==null?void 0:y[0];w&&(c&&w.geometry.dispose(),p.remove(w)),A.skeleton?(w=new lv,w.material=h,w.bind(A.skeleton,A.bindMatrix),p.add(w)):A.isInstancedMesh?(w=new cv(A.geometry,h,A.count),w.instanceMatrix=A.instanceMatrix,p.add(w)):(w=new gt,w.material=h,p.add(w)),w.geometry=c?kj(A.geometry,c):A.geometry}}),E.useLayoutEffect(()=>{const p=f.current;if(!p)return;const A=p.children[0];A&&(A.renderOrder=a,yr(A.material,{transparent:t,thickness:l,color:n,opacity:e,size:m,screenspace:i,toneMapped:r,polygonOffset:s,polygonOffsetFactor:o}))}),E.useEffect(()=>()=>{const p=f.current;if(!p)return;const A=p.children[0];A&&(c&&A.geometry.dispose(),p.remove(A))},[]),E.createElement("group",tt({ref:f},u))}var xye=Object.defineProperty,_ye=(n,e,t)=>e in n?xye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ii=(n,e,t)=>(_ye(n,typeof e!="symbol"?e+"":e,t),t);function qC(n,e,t,i,r){let s;if(n=n.subarray||n.slice?n:n.buffer,t=t.subarray||t.slice?t:t.buffer,n=e?n.subarray?n.subarray(e,r&&e+r):n.slice(e,r&&e+r):n,t.set)t.set(n,i);else for(s=0;s<n.length;s++)t[s+i]=n[s];return t}function Eye(n){return n instanceof Float32Array?n:n instanceof Gt?n.getAttribute("position").array:n.map(e=>{const t=Array.isArray(e);return e instanceof F?[e.x,e.y,e.z]:e instanceof Se?[e.x,e.y,0]:t&&e.length===3?[e[0],e[1],e[2]]:t&&e.length===2?[e[0],e[1],0]:e}).flat()}class wye extends Gt{constructor(){super(),ii(this,"type","MeshLine"),ii(this,"isMeshLine",!0),ii(this,"positions",[]),ii(this,"previous",[]),ii(this,"next",[]),ii(this,"side",[]),ii(this,"width",[]),ii(this,"indices_array",[]),ii(this,"uvs",[]),ii(this,"counters",[]),ii(this,"widthCallback",null),ii(this,"_attributes"),ii(this,"_points",[]),ii(this,"points"),ii(this,"matrixWorld",new He),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setPoints(e,t){if(e=Eye(e),this._points=e,this.widthCallback=t??null,this.positions=[],this.counters=[],e.length&&e[0]instanceof F)for(let i=0;i<e.length;i++){const r=e[i],s=i/(e.length-1);this.positions.push(r.x,r.y,r.z),this.positions.push(r.x,r.y,r.z),this.counters.push(s),this.counters.push(s)}else for(let i=0;i<e.length;i+=3){const r=i/(e.length-1);this.positions.push(e[i],e[i+1],e[i+2]),this.positions.push(e[i],e[i+1],e[i+2]),this.counters.push(r),this.counters.push(r)}this.process()}compareV3(e,t){const i=e*6,r=t*6;return this.positions[i]===this.positions[r]&&this.positions[i+1]===this.positions[r+1]&&this.positions[i+2]===this.positions[r+2]}copyV3(e){const t=e*6;return[this.positions[t],this.positions[t+1],this.positions[t+2]]}process(){const e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let t,i;this.compareV3(0,e-1)?i=this.copyV3(e-2):i=this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(let r=0;r<e;r++){if(this.side.push(1),this.side.push(-1),this.widthCallback?t=this.widthCallback(r/(e-1)):t=1,this.width.push(t),this.width.push(t),this.uvs.push(r/(e-1),0),this.uvs.push(r/(e-1),1),r<e-1){i=this.copyV3(r),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);const s=r*2;this.indices_array.push(s,s+1,s+2),this.indices_array.push(s+2,s+1,s+3)}r>0&&(i=this.copyV3(r),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]))}this.compareV3(e-1,0)?i=this.copyV3(1):i=this.copyV3(e-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]),!this._attributes||this._attributes.position.count!==this.counters.length?this._attributes={position:new qt(new Float32Array(this.positions),3),previous:new qt(new Float32Array(this.previous),3),next:new qt(new Float32Array(this.next),3),side:new qt(new Float32Array(this.side),1),width:new qt(new Float32Array(this.width),1),uv:new qt(new Float32Array(this.uvs),2),index:new qt(new Uint16Array(this.indices_array),1),counters:new qt(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:t,z:i}){const r=this._attributes.position.array,s=this._attributes.previous.array,o=this._attributes.next.array,a=r.length;qC(r,0,s,0,a),qC(r,6,r,0,a-6),r[a-6]=e,r[a-5]=t,r[a-4]=i,r[a-3]=e,r[a-2]=t,r[a-1]=i,qC(r,6,o,0,a-6),o[a-6]=e,o[a-5]=t,o[a-4]=i,o[a-3]=e,o[a-2]=t,o[a-1]=i,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const Sye=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>
  #include <clipping_planes_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
    vCounters = counters;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0) * aspect;
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy * aspect;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <clipping_planes_vertex>
    #include <fog_vertex>
  }
`,Cye=parseInt(il.replace(/\D+/g,"")),bye=Cye>=154?"colorspace_fragment":"encodings_fragment",Mye=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  #include <clipping_planes_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useGradient;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  uniform vec3 gradient[2];
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 diffuseColor = vColor;
    if (useGradient == 1.) diffuseColor = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);
    if (useMap == 1.) diffuseColor *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) diffuseColor.a *= texture2D(alphaMap, vUV * repeat).a;
    if (diffuseColor.a < alphaTest) discard;
    if (useDash == 1.) diffuseColor.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    diffuseColor.a *= step(vCounters, visibility);
    #include <clipping_planes_fragment>
    gl_FragColor = diffuseColor;     
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <${bye}>
  }
`;class Iye extends Wn{constructor(e){super({uniforms:{...Ct.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new et(16777215)},gradient:{value:[new et(16711680),new et(65280)]},opacity:{value:1},resolution:{value:new Se(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new Se(1,1)}},vertexShader:Sye,fragmentShader:Mye}),ii(this,"lineWidth"),ii(this,"map"),ii(this,"useMap"),ii(this,"alphaMap"),ii(this,"useAlphaMap"),ii(this,"color"),ii(this,"gradient"),ii(this,"resolution"),ii(this,"sizeAttenuation"),ii(this,"dashArray"),ii(this,"dashOffset"),ii(this,"dashRatio"),ii(this,"useDash"),ii(this,"useGradient"),ii(this,"visibility"),ii(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(t){this.uniforms.color.value=t}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(t){this.uniforms.gradient.value=t}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(t){this.uniforms.dashArray.value=t,this.useDash=t!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(t){this.uniforms.useDash.value=t}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(t){this.uniforms.useGradient.value=t}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.gradient=e.gradient,this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray=e.dashArray,this.dashOffset=e.dashOffset,this.dashRatio=e.dashRatio,this.useDash=e.useDash,this.useGradient=e.useGradient,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}const WW={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},Tye=(n,e=1)=>(n.set(n.subarray(e)),n.fill(-1/0,-e),n);function YW(n,e){const{length:t,local:i,decay:r,interval:s,stride:o}={...WW,...e},a=E.useRef(),[l]=E.useState(()=>new F);E.useLayoutEffect(()=>{n&&(a.current=Float32Array.from({length:t*10*3},(f,h)=>n.position.getComponent(h%3)))},[t,n]);const c=E.useRef(new F),u=E.useRef(0);return Bt(()=>{if(n&&a.current){if(u.current===0){let f;i?f=n.position:(n.getWorldPosition(l),f=l);const h=1*r;for(let d=0;d<h;d++)f.distanceTo(c.current)<o||(Tye(a.current,3),a.current.set(f.toArray(),a.current.length-3));c.current.copy(f)}u.current++,u.current=u.current%s}}),a}const Bye=E.forwardRef((n,e)=>{const{children:t}=n,{width:i,length:r,decay:s,local:o,stride:a,interval:l}={...WW,...n},{color:c="hotpink",attenuation:u,target:f}=n,h=Pe(w=>w.size),d=Pe(w=>w.scene),m=E.useRef(null),[g,v]=E.useState(null),p=YW(g,{length:r,decay:s,local:o,stride:a,interval:l});E.useEffect(()=>{const w=(f==null?void 0:f.current)||m.current.children.find(S=>S instanceof Jt);w&&v(w)},[p,f]);const A=E.useMemo(()=>new wye,[]),y=E.useMemo(()=>{var w;const S=new Iye({lineWidth:.1*i,color:c,sizeAttenuation:1,resolution:new Se(h.width,h.height)});let C;if(t)if(Array.isArray(t))C=t.find(b=>{const M=b;return typeof M.type=="string"&&M.type==="meshLineMaterial"});else{const b=t;typeof b.type=="string"&&b.type==="meshLineMaterial"&&(C=b)}return typeof((w=C)==null?void 0:w.props)=="object"&&S.setValues(C.props),S},[i,c,h,t]);return E.useEffect(()=>{y.uniforms.resolution.value.set(h.width,h.height)},[h]),Bt(()=>{p.current&&A.setPoints(p.current,u)}),E.createElement("group",null,Vc(E.createElement("mesh",{ref:e,geometry:A,material:y}),d),E.createElement("group",{ref:m},t))});function XW(n,e=16,t,i,r){const[s,o]=E.useState(()=>{const a=Array.from({length:e},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new el(Float32Array.from(a),16)});return E.useLayoutEffect(()=>{if(typeof n.current>"u")return;const a=new A1e(n.current);i&&a.setWeightAttribute(i),a.build();const l=new F,c=new F,u=new et,f=new Jt;n.current.updateMatrixWorld(!0);for(let h=0;h<e;h++)a.sample(l,c,u),typeof t=="function"?t({dummy:f,sampledMesh:n.current,position:l,normal:c,color:u},h):f.position.copy(l),f.updateMatrix(),r!=null&&r.current&&r.current.setMatrixAt(h,f.matrix),f.matrix.toArray(s.array,h*16);r!=null&&r.current&&(r.current.instanceMatrix.needsUpdate=!0),s.needsUpdate=!0,o(new el(s.array,s.itemSize).copy(s))},[n,r,i,e,t]),s}function Pye({children:n,weight:e,transform:t,instances:i,mesh:r,count:s=16,...o}){const a=E.useRef(null),l=E.useRef(null),c=E.useRef(null);return E.useLayoutEffect(()=>{var u,f;l.current=(u=i==null?void 0:i.current)!==null&&u!==void 0?u:a.current.children.find(h=>h.hasOwnProperty("instanceMatrix")),c.current=(f=r==null?void 0:r.current)!==null&&f!==void 0?f:a.current.children.find(h=>h.type==="Mesh")},[n,r==null?void 0:r.current,i==null?void 0:i.current]),XW(c,s,t,e,l),E.createElement("group",tt({ref:a},o),n)}const Rye=({compute:n,name:e,...t})=>{const[i]=E.useState(()=>new qt(new Float32Array(0),1)),r=E.useRef(null);return E.useLayoutEffect(()=>{if(r.current){var s;const o=(s=r.current.parent)!==null&&s!==void 0?s:r.current.__r3f.parent,a=n(o);r.current.copy(a)}},[n]),E.createElement("primitive",tt({ref:r,object:i,attach:`attributes-${e}`},t))};function Dye(n,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:t,inject:i,castShadow:r,receiveShadow:s}){let o={};for(const a of e)o[a]=n[a];return t&&(o.geometry&&t!=="materialsOnly"&&(o.geometry=o.geometry.clone()),o.material&&t!=="geometriesOnly"&&(o.material=o.material.clone())),i&&(typeof i=="function"?o={...o,children:i(n)}:E.isValidElement(i)?o={...o,children:i}:o={...o,...i}),n instanceof gt&&(r&&(o.castShadow=!0),s&&(o.receiveShadow=!0)),o}const YA=E.forwardRef(({isChild:n=!1,object:e,children:t,deep:i,castShadow:r,receiveShadow:s,inject:o,keys:a,...l},c)=>{const u={keys:a,deep:i,inject:o,castShadow:r,receiveShadow:s};if(e=E.useMemo(()=>{if(n===!1&&!Array.isArray(e)){let m=!1;if(e.traverse(g=>{g.isSkinnedMesh&&(m=!0)}),m)return g1e.clone(e)}return e},[e,n]),Array.isArray(e))return E.createElement("group",tt({},l,{ref:c}),e.map(m=>E.createElement(YA,tt({key:m.uuid,object:m},u))),t);const{children:f,...h}=Dye(e,u),d=e.type[0].toLowerCase()+e.type.slice(1);return E.createElement(d,tt({},h,l,{ref:c}),e.children.map(m=>m.type==="Bone"?E.createElement("primitive",tt({key:m.uuid,object:m},u)):E.createElement(YA,tt({key:m.uuid,object:m},u,{isChild:!0}))),t,f)}),q8=E.createContext(null),Lye=E.forwardRef(({resolution:n=28,maxPolyCount:e=1e4,enableUvs:t=!1,enableColors:i=!1,children:r,...s},o)=>{const a=E.useRef(null);E.useImperativeHandle(o,()=>a.current,[]);const l=E.useMemo(()=>new s1e(n,null,t,i,e),[n,e,t,i]),c=E.useMemo(()=>({getParent:()=>a}),[]);return Bt(()=>{l.update(),l.reset()},-1),E.createElement(E.Fragment,null,E.createElement("primitive",tt({object:l,ref:a},s),E.createElement(q8.Provider,{value:c},r)))}),Fye=E.forwardRef(({strength:n=.5,subtract:e=12,color:t,...i},r)=>{const{getParent:s}=E.useContext(q8),o=E.useMemo(()=>s(),[s]),a=E.useRef(null);E.useImperativeHandle(r,()=>a.current,[]);const l=new F;return Bt(c=>{!o.current||!a.current||(a.current.getWorldPosition(l),o.current.addBall(.5+l.x*.5,.5+l.y*.5,.5+l.z*.5,n,e,t))}),E.createElement("group",tt({ref:a},i))}),Oye=E.forwardRef(({planeType:n="x",strength:e=.5,subtract:t=12,...i},r)=>{const{getParent:s}=E.useContext(q8),o=E.useMemo(()=>s(),[s]),a=E.useRef(null);E.useImperativeHandle(r,()=>a.current,[]);const l=E.useMemo(()=>n==="x"?"addPlaneX":n==="y"?"addPlaneY":"addPlaneZ",[n]);return Bt(()=>{!o.current||!a.current||o.current[l](e,t)}),E.createElement("group",tt({ref:a},i))});function zye(n){return Array.isArray(n)}function JC(n=[0,0,0]){return zye(n)?n:n instanceof F||n instanceof Qr?[n.x,n.y,n.z]:[n,n,n]}const Uye=E.forwardRef(function({debug:e,depthTest:t=!1,polygonOffsetFactor:i=-10,map:r,mesh:s,children:o,position:a,rotation:l,scale:c,...u},f){const h=E.useRef(null);E.useImperativeHandle(f,()=>h.current);const d=E.useRef(null);return E.useLayoutEffect(()=>{const m=(s==null?void 0:s.current)||h.current.parent,g=h.current;if(!(m instanceof gt))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const v={position:new F,rotation:new Qr,scale:new F(1,1,1)};if(m){yr(v,{position:a,scale:c});const p=m.matrixWorld.clone();if(m.matrixWorld.identity(),!l||typeof l=="number"){const A=new Jt;A.position.copy(v.position),A.lookAt(m.position),typeof l=="number"&&A.rotateZ(l),yr(v,{rotation:A.rotation})}else yr(v,{rotation:l});return g.geometry=new Hge(m,v.position,v.rotation,v.scale),d.current&&(yr(d.current,v),d.current.traverse(A=>A.raycast=()=>null)),m.matrixWorld=p,()=>{g.geometry.dispose()}}},[s,...JC(a),...JC(c),...JC(l)]),E.createElement("mesh",tt({ref:h,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":i,"material-depthTest":t,"material-map":r},u),o,e&&E.createElement("mesh",{ref:d},E.createElement("boxGeometry",null),E.createElement("meshNormalMaterial",{wireframe:!0}),E.createElement("axesHelper",null)))}),kye=E.forwardRef(function({src:e,skipFill:t,skipStrokes:i,fillMaterial:r,strokeMaterial:s,fillMeshProps:o,strokeMeshProps:a,...l},c){const u=Pi(qg,e.startsWith("<svg")?`data:image/svg+xml;utf8,${e}`:e),f=E.useMemo(()=>i?[]:u.paths.map(h=>{var d;return((d=h.userData)==null?void 0:d.style.stroke)===void 0||h.userData.style.stroke==="none"?null:h.subPaths.map(m=>qg.pointsToStroke(m.getPoints(),h.userData.style))}),[u,i]);return E.useEffect(()=>()=>f.forEach(h=>h&&h.map(d=>d.dispose())),[f]),E.createElement("object3D",tt({ref:c},l),E.createElement("object3D",{scale:[1,-1,1]},u.paths.map((h,d)=>{var m,g;return E.createElement(E.Fragment,{key:d},!t&&((m=h.userData)==null?void 0:m.style.fill)!==void 0&&h.userData.style.fill!=="none"&&qg.createShapes(h).map((v,p)=>E.createElement("mesh",tt({key:p},o),E.createElement("shapeGeometry",{args:[v]}),E.createElement("meshBasicMaterial",tt({color:h.userData.style.fill,opacity:h.userData.style.fillOpacity,transparent:!0,side:ni,depthWrite:!1},r)))),!i&&((g=h.userData)==null?void 0:g.style.stroke)!==void 0&&h.userData.style.stroke!=="none"&&h.subPaths.map((v,p)=>E.createElement("mesh",tt({key:p,geometry:f[d][p]},a),E.createElement("meshBasicMaterial",tt({color:h.userData.style.stroke,opacity:h.userData.style.strokeOpacity,transparent:!0,side:ni,depthWrite:!1},s)))))})))});let ux=null,qW="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function JW(n,e,t){return i=>{t&&t(i),n&&(ux||(ux=new VAe),ux.setDecoderPath(typeof n=="string"?n:qW),i.setDRACOLoader(ux)),e&&i.setMeshoptDecoder(typeof QC=="function"?QC():QC)}}function Pv(n,e=!0,t=!0,i){return Pi(Q8,n,JW(e,t,i))}Pv.preload=(n,e=!0,t=!0,i)=>Pi.preload(Q8,n,JW(e,t,i));Pv.clear=n=>Pi.clear(Q8,n);Pv.setDecoderPath=n=>{qW=n};const Nye=E.forwardRef(({src:n,useDraco:e,useMeshOpt:t,extendLoader:i,...r},s)=>{const{scene:o}=Pv(n,e,t,i);return E.createElement(YA,tt({ref:s},r,{object:o}))});function Gye({renderIndex:n=1,bgColor:e="black",fgColor:t="white",characters:i=" .:-+*=%@#",invert:r=!0,color:s=!1,resolution:o=.15}){const{size:a,gl:l,scene:c,camera:u}=Pe(),f=E.useMemo(()=>{const h=new Xge(l,i,{invert:r,color:s,resolution:o});return h.domElement.style.position="absolute",h.domElement.style.top="0px",h.domElement.style.left="0px",h.domElement.style.pointerEvents="none",h},[i,r,s,o]);return E.useLayoutEffect(()=>{f.domElement.style.color=t,f.domElement.style.backgroundColor=e},[t,e]),E.useEffect(()=>(l.domElement.style.opacity="0",l.domElement.parentNode.appendChild(f.domElement),()=>{l.domElement.style.opacity="1",l.domElement.parentNode.removeChild(f.domElement)}),[f]),E.useEffect(()=>{f.setSize(a.width,a.height)},[f,a]),Bt(h=>{f.render(c,u)},n),E.createElement(E.Fragment,null)}const LO=Po({alphaTest:0,viewport:new Se(1980,1080),focal:1e3,centerAndScaleTexture:null,covAndColorTexture:null},`
    precision highp sampler2D;
    precision highp usampler2D;
    out vec4 vColor;
    out vec3 vPosition;
    uniform vec2 resolution;
    uniform vec2 viewport;
    uniform float focal;
    attribute uint splatIndex;
    uniform sampler2D centerAndScaleTexture;
    uniform usampler2D covAndColorTexture;    

    vec2 unpackInt16(in uint value) {
      int v = int(value);
      int v0 = v >> 16;
      int v1 = (v & 0xFFFF);
      if((v & 0x8000) != 0)
        v1 |= 0xFFFF0000;
      return vec2(float(v1), float(v0));
    }

    void main () {
      ivec2 texSize = textureSize(centerAndScaleTexture, 0);
      ivec2 texPos = ivec2(splatIndex%uint(texSize.x), splatIndex/uint(texSize.x));
      vec4 centerAndScaleData = texelFetch(centerAndScaleTexture, texPos, 0);
      vec4 center = vec4(centerAndScaleData.xyz, 1);
      vec4 camspace = modelViewMatrix * center;
      vec4 pos2d = projectionMatrix * camspace;

      float bounds = 1.2 * pos2d.w;
      if (pos2d.z < -pos2d.w || pos2d.x < -bounds || pos2d.x > bounds
        || pos2d.y < -bounds || pos2d.y > bounds) {
        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
        return;
      }

      uvec4 covAndColorData = texelFetch(covAndColorTexture, texPos, 0);
      vec2 cov3D_M11_M12 = unpackInt16(covAndColorData.x) * centerAndScaleData.w;
      vec2 cov3D_M13_M22 = unpackInt16(covAndColorData.y) * centerAndScaleData.w;
      vec2 cov3D_M23_M33 = unpackInt16(covAndColorData.z) * centerAndScaleData.w;
      mat3 Vrk = mat3(
        cov3D_M11_M12.x, cov3D_M11_M12.y, cov3D_M13_M22.x,
        cov3D_M11_M12.y, cov3D_M13_M22.y, cov3D_M23_M33.x,
        cov3D_M13_M22.x, cov3D_M23_M33.x, cov3D_M23_M33.y
      );

      mat3 J = mat3(
        focal / camspace.z, 0., -(focal * camspace.x) / (camspace.z * camspace.z),
        0., focal / camspace.z, -(focal * camspace.y) / (camspace.z * camspace.z),
        0., 0., 0.
      );

      mat3 W = transpose(mat3(modelViewMatrix));
      mat3 T = W * J;
      mat3 cov = transpose(T) * Vrk * T;
      vec2 vCenter = vec2(pos2d) / pos2d.w;
      float diagonal1 = cov[0][0] + 0.3;
      float offDiagonal = cov[0][1];
      float diagonal2 = cov[1][1] + 0.3;
      float mid = 0.5 * (diagonal1 + diagonal2);
      float radius = length(vec2((diagonal1 - diagonal2) / 2.0, offDiagonal));
      float lambda1 = mid + radius;
      float lambda2 = max(mid - radius, 0.1);
      vec2 diagonalVector = normalize(vec2(offDiagonal, lambda1 - diagonal1));
      vec2 v1 = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;
      vec2 v2 = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);
      uint colorUint = covAndColorData.w;
      vColor = vec4(
        float(colorUint & uint(0xFF)) / 255.0,
        float((colorUint >> uint(8)) & uint(0xFF)) / 255.0,
        float((colorUint >> uint(16)) & uint(0xFF)) / 255.0,
        float(colorUint >> uint(24)) / 255.0
      );
      vPosition = position;

      gl_Position = vec4(
        vCenter 
          + position.x * v2 / viewport * 2.0 
          + position.y * v1 / viewport * 2.0, pos2d.z / pos2d.w, 1.0);
    }
    `,`
    #include <alphatest_pars_fragment>
    #include <alphahash_pars_fragment>
    in vec4 vColor;
    in vec3 vPosition;
    void main () {
      float A = -dot(vPosition.xy, vPosition.xy);
      if (A < -4.0) discard;
      float B = exp(A) * vColor.a;
      vec4 diffuseColor = vec4(vColor.rgb, B);
      #include <alphatest_fragment>
      #include <alphahash_fragment>
      gl_FragColor = diffuseColor;
      #include <tonemapping_fragment>
      #include <${parseInt(il.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `);function Hye(n){let e=null,t=0;function i(r,s=!1){const o=e.length/16,a=-1e-4;let l=-1/0,c=1/0;const u=new Float32Array(o),f=new Int32Array(u.buffer),h=new Int32Array(o);let d=0;for(let A=0;A<o;A++){const y=r[0]*e[A*16+12]+r[1]*e[A*16+13]+r[2]*e[A*16+14]+r[3];(s||y<0&&e[A*16+15]>a*y)&&(u[d]=y,h[d]=A,d++,y>l&&(l=y),y<c&&(c=y))}const m=(256*256-1)/(l-c),g=new Uint32Array(256*256);for(let A=0;A<d;A++)f[A]=(u[A]-c)*m|0,g[f[A]]++;const v=new Uint32Array(256*256);for(let A=1;A<256*256;A++)v[A]=v[A-1]+g[A-1];const p=new Uint32Array(d);for(let A=0;A<d;A++)p[v[f[A]]++]=h[A];return p}n.onmessage=r=>{if(r.data.method=="push"){t===0&&(e=new Float32Array(r.data.length));const s=new Float32Array(r.data.matrices);e.set(s,t),t+=s.length}else if(r.data.method=="sort"&&e!==null){const s=i(new Float32Array(r.data.view),r.data.hashed);n.postMessage({indices:s,key:r.data.key},[s.buffer])}}}class Qye extends nr{constructor(...e){super(...e),this.gl=null,this.chunkSize=25e3}load(e,t,i,r){const s={gl:this.gl,url:this.manager.resolveURL(e),worker:new Worker(URL.createObjectURL(new Blob(["(",Hye.toString(),")(self)"],{type:"application/javascript"}))),manager:this.manager,update:(o,a,l)=>Wye(a,s,o,l),connect:o=>Yye(s,o),loading:!1,loaded:!1,loadedVertexCount:0,chunkSize:this.chunkSize,totalDownloadBytes:0,numVertices:0,rowLength:32,maxVertexes:0,bufferTextureWidth:0,bufferTextureHeight:0,stream:null,centerAndScaleData:null,covAndColorData:null,covAndColorTexture:null,centerAndScaleTexture:null,onProgress:i};Vye(s).then(t).catch(o=>{r==null||r(o),s.manager.itemError(s.url)})}}async function Vye(n){n.manager.itemStart(n.url);const e=await fetch(n.url);if(e.body===null)throw"Failed to fetch file";let t=e.headers.get("Content-Length");const i=t?parseInt(t):void 0;if(i==null)throw"Failed to get content length";n.stream=e.body.getReader(),n.totalDownloadBytes=i,n.numVertices=Math.floor(n.totalDownloadBytes/n.rowLength);const r=n.gl.getContext();let s=r.getParameter(r.MAX_TEXTURE_SIZE);return n.maxVertexes=s*s,n.numVertices>n.maxVertexes&&(n.numVertices=n.maxVertexes),n.bufferTextureWidth=s,n.bufferTextureHeight=Math.floor((n.numVertices-1)/s)+1,n.centerAndScaleData=new Float32Array(n.bufferTextureWidth*n.bufferTextureHeight*4),n.covAndColorData=new Uint32Array(n.bufferTextureWidth*n.bufferTextureHeight*4),n.centerAndScaleTexture=new io(n.centerAndScaleData,n.bufferTextureWidth,n.bufferTextureHeight,Vn,Ln),n.centerAndScaleTexture.needsUpdate=!0,n.covAndColorTexture=new io(n.covAndColorData,n.bufferTextureWidth,n.bufferTextureHeight,Hh,ps),n.covAndColorTexture.internalFormat="RGBA32UI",n.covAndColorTexture.needsUpdate=!0,n}async function jye(n){n.loading=!0;let e=0,t=0;const i=[];let r=0;const s=n.totalDownloadBytes!==0;for(;;)try{const{value:o,done:a}=await n.stream.read();if(a)break;if(e+=o.length,n.totalDownloadBytes!=null){const c=e/n.totalDownloadBytes*100;if(n.onProgress&&c-r>1){const u=new ProgressEvent("progress",{lengthComputable:s,loaded:e,total:n.totalDownloadBytes});n.onProgress(u),r=c}}i.push(o);const l=e-t;if(n.totalDownloadBytes!=null&&l>n.rowLength*n.chunkSize){let c=Math.floor(l/n.rowLength);const u=new Uint8Array(l);let f=0;for(const m of i)u.set(m,f),f+=m.length;if(i.length=0,l>c*n.rowLength){const m=new Uint8Array(l-c*n.rowLength);m.set(u.subarray(l-m.length,l),0),i.push(m)}const h=new Uint8Array(c*n.rowLength);h.set(u.subarray(0,h.byteLength),0);const d=FO(n,h.buffer,c);if(n.worker.postMessage({method:"push",src:n.url,length:n.numVertices*16,matrices:d.buffer},[d.buffer]),t+=c*n.rowLength,n.onProgress){const m=new ProgressEvent("progress",{lengthComputable:s,loaded:n.totalDownloadBytes,total:n.totalDownloadBytes});n.onProgress(m)}}}catch(o){console.error(o);break}if(e-t>0){let o=new Uint8Array(i.reduce((u,f)=>u+f.length,0)),a=0;for(const u of i)o.set(u,a),a+=u.length;let l=Math.floor(o.byteLength/n.rowLength);const c=FO(n,o.buffer,l);n.worker.postMessage({method:"push",src:n.url,length:l*16,matrices:c.buffer},[c.buffer])}n.loaded=!0,n.manager.itemEnd(n.url)}function Wye(n,e,t,i){if(n.updateMatrixWorld(),e.gl.getCurrentViewport(t.viewport),t.material.viewport.x=t.viewport.z,t.material.viewport.y=t.viewport.w,t.material.focal=t.viewport.w/2*Math.abs(n.projectionMatrix.elements[5]),t.ready){if(i&&t.sorted)return;t.ready=!1;const r=new Float32Array([t.modelViewMatrix.elements[2],-t.modelViewMatrix.elements[6],t.modelViewMatrix.elements[10],t.modelViewMatrix.elements[14]]);e.worker.postMessage({method:"sort",src:e.url,key:t.uuid,view:r.buffer,hashed:i},[r.buffer]),i&&e.loaded&&(t.sorted=!0)}}function Yye(n,e){n.loading||jye(n),e.ready=!1,e.pm=new He,e.vm1=new He,e.vm2=new He,e.viewport=new sn;let t=new Uint32Array(n.bufferTextureWidth*n.bufferTextureHeight);const i=new el(t,1,!1);i.setUsage(ms);const r=e.geometry=new mv,s=new Float32Array(6*3),o=new qt(s,3);r.setAttribute("position",o),o.setXYZ(2,-2,2,0),o.setXYZ(1,2,2,0),o.setXYZ(0,-2,-2,0),o.setXYZ(5,-2,-2,0),o.setXYZ(4,2,2,0),o.setXYZ(3,2,-2,0),o.needsUpdate=!0,r.setAttribute("splatIndex",i),r.instanceCount=1;function a(c){if(e&&c.data.key===e.uuid){let u=new Uint32Array(c.data.indices);r.attributes.splatIndex.set(u),r.attributes.splatIndex.needsUpdate=!0,r.instanceCount=u.length,e.ready=!0}}n.worker.addEventListener("message",a);async function l(){for(;;){const c=n.gl.properties.get(n.centerAndScaleTexture),u=n.gl.properties.get(n.covAndColorTexture);if(c!=null&&c.__webglTexture&&u!=null&&u.__webglTexture&&n.loadedVertexCount>0)break;await new Promise(f=>setTimeout(f,10))}e.ready=!0}return l(),()=>n.worker.removeEventListener("message",a)}function FO(n,e,t){const i=n.gl.getContext();if(n.loadedVertexCount+t>n.maxVertexes&&(t=n.maxVertexes-n.loadedVertexCount),t<=0)throw"Failed to parse file";const r=new Uint8Array(e),s=new Float32Array(e),o=new Float32Array(t*16),a=new Uint8Array(n.covAndColorData.buffer),l=new Int16Array(n.covAndColorData.buffer);for(let c=0;c<t;c++){const u=new Lt(-(r[32*c+28+1]-128)/128,(r[32*c+28+2]-128)/128,(r[32*c+28+3]-128)/128,-(r[32*c+28+0]-128)/128);u.invert();const f=new F(s[8*c+0],s[8*c+1],-s[8*c+2]),h=new F(s[8*c+3+0],s[8*c+3+1],s[8*c+3+2]),d=new He;d.makeRotationFromQuaternion(u),d.transpose(),d.scale(h);const m=d.clone();d.transpose(),d.premultiply(m),d.setPosition(f);const g=[0,1,2,5,6,10];let v=0;for(let y=0;y<g.length;y++)Math.abs(d.elements[g[y]])>v&&(v=Math.abs(d.elements[g[y]]));let p=n.loadedVertexCount*4+c*4;n.centerAndScaleData[p+0]=f.x,n.centerAndScaleData[p+1]=-f.y,n.centerAndScaleData[p+2]=f.z,n.centerAndScaleData[p+3]=v/32767,p=n.loadedVertexCount*8+c*4*2;for(let y=0;y<g.length;y++)l[p+y]=d.elements[g[y]]*32767/v;p=n.loadedVertexCount*16+(c*4+3)*4;const A=new et(r[32*c+24+0]/255,r[32*c+24+1]/255,r[32*c+24+2]/255);A.convertSRGBToLinear(),a[p+0]=A.r*255,a[p+1]=A.g*255,a[p+2]=A.b*255,a[p+3]=r[32*c+24+3],d.elements[15]=Math.max(h.x,h.y,h.z)*r[32*c+24+3]/255;for(let y=0;y<16;y++)o[c*16+y]=d.elements[y]}for(;t>0;){let c=0,u=0;const f=n.loadedVertexCount%n.bufferTextureWidth,h=Math.floor(n.loadedVertexCount/n.bufferTextureWidth);n.loadedVertexCount%n.bufferTextureWidth!=0?(c=Math.min(n.bufferTextureWidth,f+t)-f,u=1):Math.floor(t/n.bufferTextureWidth)>0?(c=n.bufferTextureWidth,u=Math.floor(t/n.bufferTextureWidth)):(c=t%n.bufferTextureWidth,u=1);const d=n.gl.properties.get(n.centerAndScaleTexture);i.bindTexture(i.TEXTURE_2D,d.__webglTexture),i.texSubImage2D(i.TEXTURE_2D,0,f,h,c,u,i.RGBA,i.FLOAT,n.centerAndScaleData,n.loadedVertexCount*4);const m=n.gl.properties.get(n.covAndColorTexture);i.bindTexture(i.TEXTURE_2D,m.__webglTexture),i.texSubImage2D(i.TEXTURE_2D,0,f,h,c,u,i.RGBA_INTEGER,i.UNSIGNED_INT,n.covAndColorData,n.loadedVertexCount*4),n.gl.resetState(),n.loadedVertexCount+=c*u,t-=c*u}return o}function Xye({src:n,toneMapped:e=!1,alphaTest:t=0,alphaHash:i=!1,chunkSize:r=25e3,...s}){Ai({SplatMaterial:LO});const o=E.useRef(null),a=Pe(u=>u.gl),l=Pe(u=>u.camera),c=Pi(Qye,n,u=>{u.gl=a,u.chunkSize=r});return E.useLayoutEffect(()=>c.connect(o.current),[n]),Bt(()=>c.update(o.current,l,i)),E.createElement("mesh",tt({ref:o,frustumCulled:!1},s),E.createElement("splatMaterial",{key:`${n}/${t}/${i}${LO.key}`,transparent:!i,depthTest:!0,alphaTest:i?0:t,centerAndScaleTexture:c.centerAndScaleTexture,covAndColorTexture:c.covAndColorTexture,depthWrite:i?!0:t>0,blending:i?Vu:sE,blendSrcAlpha:oE,alphaHash:!!i,toneMapped:e}))}function Bs(n,e,t){const i=Pe(h=>h.size),r=Pe(h=>h.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=typeof e=="number"?e:i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:c,...u}=a,f=E.useMemo(()=>{const h=new Qn(s,o,{minFilter:Xt,magFilter:Xt,type:jn,...u});return c&&(h.depthTexture=new u0(s,o,Ln)),h.samples=l,h},[]);return E.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),E.useEffect(()=>()=>f.dispose(),[]),f}const qye=({children:n,width:e,height:t,...i})=>{const r=Bs(e,t,i);return E.createElement(E.Fragment,null,n==null?void 0:n(r))},Jye=n=>typeof n=="function",KW=E.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:i,makeDefault:r,...s},o)=>{const a=Pe(({set:v})=>v),l=Pe(({camera:v})=>v),c=Pe(({size:v})=>v),u=E.useRef(null);E.useImperativeHandle(o,()=>u.current,[]);const f=E.useRef(null),h=Bs(e);E.useLayoutEffect(()=>{s.manual||u.current.updateProjectionMatrix()},[c,s]),E.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),E.useLayoutEffect(()=>{if(r){const v=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:v}))}},[u,r,a]);let d=0,m=null;const g=Jye(i);return Bt(v=>{g&&(t===1/0||d<t)&&(f.current.visible=!1,v.gl.setRenderTarget(h),m=v.scene.background,n&&(v.scene.background=n),v.gl.render(v.scene,u.current),v.scene.background=m,v.gl.setRenderTarget(null),f.current.visible=!0,d++)}),E.createElement(E.Fragment,null,E.createElement("orthographicCamera",tt({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:u},s),!g&&i),E.createElement("group",{ref:f},g&&i(h.texture)))}),Kye=n=>typeof n=="function",$ye=E.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=Pe(({set:v})=>v),l=Pe(({camera:v})=>v),c=Pe(({size:v})=>v),u=E.useRef(null);E.useImperativeHandle(o,()=>u.current,[]);const f=E.useRef(null),h=Bs(e);E.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),E.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let d=0,m=null;const g=Kye(r);return Bt(v=>{g&&(t===1/0||d<t)&&(f.current.visible=!1,v.gl.setRenderTarget(h),m=v.scene.background,n&&(v.scene.background=n),v.gl.render(v.scene,u.current),v.scene.background=m,v.gl.setRenderTarget(null),f.current.visible=!0,d++)}),E.useLayoutEffect(()=>{if(i){const v=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:v}))}},[u,i,a]),E.createElement(E.Fragment,null,E.createElement("perspectiveCamera",tt({ref:u},s),!g&&r),E.createElement("group",{ref:f},g&&r(h.texture)))});function $W({resolution:n=256,near:e=.1,far:t=1e3,envMap:i,fog:r}={}){const s=Pe(({gl:h})=>h),o=Pe(({scene:h})=>h),a=E.useMemo(()=>{const h=new a0(n);return h.texture.type=jn,h},[n]);E.useEffect(()=>()=>{a.dispose()},[a]);const l=E.useMemo(()=>new mE(e,t,a),[e,t,a]);let c,u;const f=E.useCallback(()=>{c=o.fog,u=o.background,o.background=i||u,o.fog=r||c,l.update(s,o),o.fog=c,o.background=u},[s,o,l]);return{fbo:a,camera:l,update:f}}function Zye({children:n,frames:e=1/0,resolution:t,near:i,far:r,envMap:s,fog:o,...a}){const l=E.useRef(null),{fbo:c,camera:u,update:f}=$W({resolution:t,near:i,far:r,envMap:s,fog:o});let h=0;return Bt(()=>{l.current&&(e===1/0||h<e)&&(l.current.visible=!1,f(),l.current.visible=!0,h++)}),E.createElement("group",a,E.createElement("primitive",{object:u}),E.createElement("group",{ref:l},n==null?void 0:n(c.texture)))}const e2e=E.forwardRef((n,e)=>{const{camera:t,onChange:i,makeDefault:r,...s}=n,o=Pe(h=>h.camera),a=Pe(h=>h.invalidate),l=Pe(h=>h.get),c=Pe(h=>h.set),u=t||o,f=E.useMemo(()=>new L1e(u),[u]);return E.useEffect(()=>{const h=d=>{a(),i&&i(d)};return f==null||f.addEventListener==null||f.addEventListener("change",h),()=>f==null||f.removeEventListener==null?void 0:f.removeEventListener("change",h)},[i,f,a]),Bt(()=>f==null?void 0:f.update(),-1),E.useEffect(()=>{const h=f;return h==null||h.connect(),()=>h==null?void 0:h.dispose()},[f]),E.useEffect(()=>{if(r){const h=l().controls;return c({controls:f}),()=>c({controls:h})}},[r,f]),f?E.createElement("primitive",tt({ref:e,object:f},s)):null}),t2e=E.forwardRef(({domElement:n,...e},t)=>{const{onChange:i,makeDefault:r,...s}=e,o=Pe(m=>m.invalidate),a=Pe(m=>m.camera),l=Pe(m=>m.gl),c=Pe(m=>m.events),u=Pe(m=>m.get),f=Pe(m=>m.set),h=n||c.connected||l.domElement,d=E.useMemo(()=>new Y1e(a),[a]);return E.useEffect(()=>(d.connect(h),()=>void d.dispose()),[h,d,o]),E.useEffect(()=>{const m=g=>{o(),i&&i(g)};return d.addEventListener==null||d.addEventListener("change",m),()=>d.removeEventListener==null?void 0:d.removeEventListener("change",m)},[i,o]),E.useEffect(()=>{if(r){const m=u().controls;return f({controls:d}),()=>f({controls:m})}},[r,d]),Bt((m,g)=>d.update(g)),E.createElement("primitive",tt({ref:t,object:d,args:[a,h]},s))}),n2e=E.forwardRef((n={enableDamping:!0},e)=>{const{domElement:t,camera:i,makeDefault:r,onChange:s,onStart:o,onEnd:a,...l}=n,c=Pe(A=>A.invalidate),u=Pe(A=>A.camera),f=Pe(A=>A.gl),h=Pe(A=>A.events),d=Pe(A=>A.set),m=Pe(A=>A.get),g=t||h.connected||f.domElement,v=i||u,p=E.useMemo(()=>new G1e(v),[v]);return E.useEffect(()=>{p.connect(g);const A=y=>{c(),s&&s(y)};return p.addEventListener("change",A),o&&p.addEventListener("start",o),a&&p.addEventListener("end",a),()=>{p.dispose(),p.removeEventListener("change",A),o&&p.removeEventListener("start",o),a&&p.removeEventListener("end",a)}},[s,o,a,p,c,g]),E.useEffect(()=>{if(r){const A=m().controls;return d({controls:p}),()=>d({controls:A})}},[r,p]),Bt(()=>p.update(),-1),E.createElement("primitive",tt({ref:e,object:p,enableDamping:!0},l))}),i2e=E.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const f=Pe(C=>C.invalidate),h=Pe(C=>C.camera),d=Pe(C=>C.gl),m=Pe(C=>C.events),g=Pe(C=>C.setEvents),v=Pe(C=>C.set),p=Pe(C=>C.get),A=Pe(C=>C.performance),y=e||h,w=i||m.connected||d.domElement,S=E.useMemo(()=>new $j(y),[y]);return Bt(()=>{S.enabled&&S.update()},-1),E.useEffect(()=>(s&&S.connect(s===!0?w:s),S.connect(w),()=>void S.dispose()),[s,w,t,S,f]),E.useEffect(()=>{const C=I=>{f(),t&&A.regress(),o&&o(I)},b=I=>{a&&a(I)},M=I=>{l&&l(I)};return S.addEventListener("change",C),S.addEventListener("start",b),S.addEventListener("end",M),()=>{S.removeEventListener("start",b),S.removeEventListener("end",M),S.removeEventListener("change",C)}},[o,a,l,S,f,g]),E.useEffect(()=>{if(n){const C=p().controls;return v({controls:S}),()=>v({controls:C})}},[n,S]),E.createElement("primitive",tt({ref:u,object:S,enableDamping:r},c))}),r2e=E.forwardRef(({makeDefault:n,camera:e,domElement:t,regress:i,onChange:r,onStart:s,onEnd:o,...a},l)=>{const{invalidate:c,camera:u,gl:f,events:h,set:d,get:m,performance:g,viewport:v}=Pe(),p=e||u,A=t||h.connected||f.domElement,y=E.useMemo(()=>new z1e(p),[p]);return Bt(()=>{y.enabled&&y.update()},-1),E.useEffect(()=>(y.connect(A),()=>void y.dispose()),[A,i,y,c]),E.useEffect(()=>{const w=S=>{c(),i&&g.regress(),r&&r(S)};return y.addEventListener("change",w),s&&y.addEventListener("start",s),o&&y.addEventListener("end",o),()=>{s&&y.removeEventListener("start",s),o&&y.removeEventListener("end",o),y.removeEventListener("change",w)}},[r,s,o,y,c]),E.useEffect(()=>{y.handleResize()},[v]),E.useEffect(()=>{if(n){const w=m().controls;return d({controls:y}),()=>d({controls:w})}},[n,y]),E.createElement("primitive",tt({ref:l,object:y},a))}),s2e=E.forwardRef(({camera:n,makeDefault:e,regress:t,domElement:i,onChange:r,onStart:s,onEnd:o,...a},l)=>{const c=Pe(y=>y.invalidate),u=Pe(y=>y.camera),f=Pe(y=>y.gl),h=Pe(y=>y.events),d=Pe(y=>y.set),m=Pe(y=>y.get),g=Pe(y=>y.performance),v=n||u,p=i||h.connected||f.domElement,A=E.useMemo(()=>new V1e(v),[v]);return Bt(()=>{A.enabled&&A.update()},-1),E.useEffect(()=>(A.connect(p),()=>void A.dispose()),[p,t,A,c]),E.useEffect(()=>{const y=w=>{c(),t&&g.regress(),r&&r(w)};return A.addEventListener("change",y),s&&A.addEventListener("start",s),o&&A.addEventListener("end",o),()=>{A.removeEventListener("change",y),s&&A.removeEventListener("start",s),o&&A.removeEventListener("end",o)}},[r,s,o]),E.useEffect(()=>{if(e){const y=m().controls;return d({controls:A}),()=>d({controls:y})}},[e,A]),E.createElement("primitive",tt({ref:l,object:A},a))}),o2e=E.forwardRef(({children:n,domElement:e,onChange:t,onMouseDown:i,onMouseUp:r,onObjectChange:s,object:o,makeDefault:a,camera:l,enabled:c,axis:u,mode:f,translationSnap:h,rotationSnap:d,scaleSnap:m,space:g,size:v,showX:p,showY:A,showZ:y,...w},S)=>{const C=Pe(O=>O.controls),b=Pe(O=>O.gl),M=Pe(O=>O.events),I=Pe(O=>O.camera),T=Pe(O=>O.invalidate),D=Pe(O=>O.get),R=Pe(O=>O.set),z=l||I,L=e||M.connected||b.domElement,H=E.useMemo(()=>new w1e(z,L),[z,L]),J=E.useRef(null);E.useLayoutEffect(()=>(o?H.attach(o instanceof Jt?o:o.current):J.current instanceof Jt&&H.attach(J.current),()=>void H.detach()),[o,n,H]),E.useEffect(()=>{if(C){const O=W=>C.enabled=!W.value;return H.addEventListener("dragging-changed",O),()=>H.removeEventListener("dragging-changed",O)}},[H,C]);const Z=E.useRef(),U=E.useRef(),X=E.useRef(),Y=E.useRef();return E.useLayoutEffect(()=>void(Z.current=t),[t]),E.useLayoutEffect(()=>void(U.current=i),[i]),E.useLayoutEffect(()=>void(X.current=r),[r]),E.useLayoutEffect(()=>void(Y.current=s),[s]),E.useEffect(()=>{const O=V=>{T(),Z.current==null||Z.current(V)},W=V=>U.current==null?void 0:U.current(V),$=V=>X.current==null?void 0:X.current(V),k=V=>Y.current==null?void 0:Y.current(V);return H.addEventListener("change",O),H.addEventListener("mouseDown",W),H.addEventListener("mouseUp",$),H.addEventListener("objectChange",k),()=>{H.removeEventListener("change",O),H.removeEventListener("mouseDown",W),H.removeEventListener("mouseUp",$),H.removeEventListener("objectChange",k)}},[T,H]),E.useEffect(()=>{if(a){const O=D().controls;return R({controls:H}),()=>R({controls:O})}},[a,H]),E.createElement(E.Fragment,null,E.createElement("primitive",{ref:S,object:H,enabled:c,axis:u,mode:f,translationSnap:h,rotationSnap:d,scaleSnap:m,space:g,size:v,showX:p,showY:A,showZ:y}),E.createElement("group",tt({ref:J},w),n))}),a2e=E.forwardRef(({domElement:n,selector:e,onChange:t,onLock:i,onUnlock:r,enabled:s=!0,makeDefault:o,...a},l)=>{const{camera:c,...u}=a,f=Pe(S=>S.setEvents),h=Pe(S=>S.gl),d=Pe(S=>S.camera),m=Pe(S=>S.invalidate),g=Pe(S=>S.events),v=Pe(S=>S.get),p=Pe(S=>S.set),A=c||d,y=n||g.connected||h.domElement,w=E.useMemo(()=>new P1e(A),[A]);return E.useEffect(()=>{if(s){w.connect(y);const S=v().events.compute;return f({compute(C,b){const M=b.size.width/2,I=b.size.height/2;b.pointer.set(M/b.size.width*2-1,-(I/b.size.height)*2+1),b.raycaster.setFromCamera(b.pointer,b.camera)}}),()=>{w.disconnect(),f({compute:S})}}},[s,w]),E.useEffect(()=>{const S=M=>{m(),t&&t(M)};w.addEventListener("change",S),i&&w.addEventListener("lock",i),r&&w.addEventListener("unlock",r);const C=()=>w.lock(),b=e?Array.from(document.querySelectorAll(e)):[document];return b.forEach(M=>M&&M.addEventListener("click",C)),()=>{w.removeEventListener("change",S),i&&w.removeEventListener("lock",i),r&&w.removeEventListener("unlock",r),b.forEach(M=>M?M.removeEventListener("click",C):void 0)}},[t,i,r,e,w,m]),E.useEffect(()=>{if(o){const S=v().controls;return p({controls:w}),()=>p({controls:S})}},[o,w]),E.createElement("primitive",tt({ref:l,object:w},u))}),l2e=E.forwardRef(({domElement:n,makeDefault:e,...t},i)=>{const r=Pe(f=>f.camera),s=Pe(f=>f.gl),o=Pe(f=>f.events),a=Pe(f=>f.get),l=Pe(f=>f.set),c=n||o.connected||s.domElement,[u]=E.useState(()=>new x1e(r,c));return E.useEffect(()=>{if(e){const f=a().controls;return l({controls:u}),()=>l({controls:f})}},[e,u]),Bt((f,h)=>{u.update(h)},-1),u?E.createElement("primitive",tt({ref:i,object:u},t)):null});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const ki={LEFT:1,RIGHT:2,MIDDLE:4},rt=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),dp={NONE:0,IN:1,OUT:-1};function th(n){return n.isPerspectiveCamera}function gu(n){return n.isOrthographicCamera}const pp=Math.PI*2,OO=Math.PI/2,ZW=1e-5,G1=Math.PI/180;function La(n,e,t){return Math.max(e,Math.min(t,n))}function yi(n,e=ZW){return Math.abs(n)<e}function ri(n,e,t=ZW){return yi(n-e,t)}function zO(n,e){return Math.round(n/e)*e}function H1(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Q1(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function fx(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let c=n-e;const u=e,f=r*i;c=La(c,-f,f),e=n-c;const h=(t.value+o*c)*s;t.value=(t.value-o*h)*l;let d=e+(c+h)*l;return u-n>0==d>u&&(d=u,t.value=(d-u)/s),d}function UO(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const a=2/i,l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,f=e.y,h=e.z,d=n.x-u,m=n.y-f,g=n.z-h;const v=u,p=f,A=h,y=r*i,w=y*y,S=d*d+m*m+g*g;if(S>w){const H=Math.sqrt(S);d=d/H*y,m=m/H*y,g=g/H*y}u=n.x-d,f=n.y-m,h=n.z-g;const C=(t.x+a*d)*s,b=(t.y+a*m)*s,M=(t.z+a*g)*s;t.x=(t.x-a*C)*c,t.y=(t.y-a*b)*c,t.z=(t.z-a*M)*c,o.x=u+(d+C)*c,o.y=f+(m+b)*c,o.z=h+(g+M)*c;const I=v-n.x,T=p-n.y,D=A-n.z,R=o.x-v,z=o.y-p,L=o.z-A;return I*R+T*z+D*L>0&&(o.x=v,o.y=p,o.z=A,t.x=(o.x-v)/s,t.y=(o.y-p)/s,t.z=(o.z-A)/s),o}function KC(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function $C(n,e){return gu(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class c2e{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}}var ZC;const u2e="2.8.5",hx=1/8,f2e=/Mac/.test((ZC=globalThis==null?void 0:globalThis.navigator)===null||ZC===void 0?void 0:ZC.platform);let hn,kO,dx,e5,Vs,bn,ei,mp,V1,vl,yl,nh,NO,GO,Vo,j1,gp,HO,t5,QO,n5,i5,px,r5=class R6 extends c2e{static install(e){hn=e.THREE,kO=Object.freeze(new hn.Vector3(0,0,0)),dx=Object.freeze(new hn.Vector3(0,1,0)),e5=Object.freeze(new hn.Vector3(0,0,1)),Vs=new hn.Vector2,bn=new hn.Vector3,ei=new hn.Vector3,mp=new hn.Vector3,V1=new hn.Vector3,vl=new hn.Vector3,yl=new hn.Vector3,nh=new hn.Vector3,NO=new hn.Vector3,GO=new hn.Vector3,Vo=new hn.Spherical,j1=new hn.Spherical,gp=new hn.Box3,HO=new hn.Box3,t5=new hn.Sphere,QO=new hn.Quaternion,n5=new hn.Quaternion,i5=new hn.Matrix4,px=new hn.Raycaster}static get ACTION(){return rt}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=rt.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=dp.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new hn.Vector3,this._focalOffsetVelocity=new hn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(p,A,y)=>{let w,S;if(th(this._camera)){const C=bn.copy(this._camera.position).sub(this._target),b=this._camera.getEffectiveFOV()*G1,M=C.length()*Math.tan(b*.5);w=this.truckSpeed*p*M/this._elementRect.height,S=this.truckSpeed*A*M/this._elementRect.height}else if(gu(this._camera)){const C=this._camera;w=p*(C.right-C.left)/C.zoom/this._elementRect.width,S=A*(C.top-C.bottom)/C.zoom/this._elementRect.height}else return;this.verticalDragToForward?(y?this.setFocalOffset(this._focalOffsetEnd.x+w,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(w,0,!0),this.forward(-S,!0)):y?this.setFocalOffset(this._focalOffsetEnd.x+w,this._focalOffsetEnd.y+S,this._focalOffsetEnd.z,!0):this.truck(w,S,!0)},this._rotateInternal=(p,A)=>{const y=pp*this.azimuthRotateSpeed*p/this._elementRect.height,w=pp*this.polarRotateSpeed*A/this._elementRect.height;this.rotate(y,w,!0)},this._dollyInternal=(p,A,y)=>{const w=Math.pow(.95,-p*this.dollySpeed),S=this._sphericalEnd.radius,C=this._sphericalEnd.radius*w,b=La(C,this.minDistance,this.maxDistance),M=b-C;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(C,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(M,!0),this._dollyToNoClamp(b,!0)):this._dollyToNoClamp(b,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?C:b)-S,this._dollyControlCoord.set(A,y)),this._lastDollyDirection=Math.sign(-p)},this._zoomInternal=(p,A,y)=>{const w=Math.pow(.95,p*this.dollySpeed),S=this._zoom,C=this._zoom*w;this.zoomTo(C,!0),this.dollyToCursor&&(this._changedZoom+=C-S,this._dollyControlCoord.set(A,y))},typeof hn>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new hn.Quaternion().setFromUnitVectors(this._camera.up,dx),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=rt.NONE,this._target=new hn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new hn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new hn.Spherical().setFromVector3(bn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new hn.Vector3,new hn.Vector3,new hn.Vector3,new hn.Vector3],this._updateNearPlaneCorners(),this._boundary=new hn.Box3(new hn.Vector3(-1/0,-1/0,-1/0),new hn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new hn.Vector2,this.mouseButtons={left:rt.ROTATE,middle:rt.DOLLY,right:rt.TRUCK,wheel:th(this._camera)?rt.DOLLY:gu(this._camera)?rt.ZOOM:rt.NONE},this.touches={one:rt.TOUCH_ROTATE,two:th(this._camera)?rt.TOUCH_DOLLY_TRUCK:gu(this._camera)?rt.TOUCH_ZOOM_TRUCK:rt.NONE,three:rt.TOUCH_TRUCK};const i=new hn.Vector2,r=new hn.Vector2,s=new hn.Vector2,o=p=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const w=this._domElement.getBoundingClientRect(),S=p.clientX/w.width,C=p.clientY/w.height;if(S<this._interactiveArea.left||S>this._interactiveArea.right||C<this._interactiveArea.top||C>this._interactiveArea.bottom)return}const A=p.pointerType!=="mouse"?null:(p.buttons&ki.LEFT)===ki.LEFT?ki.LEFT:(p.buttons&ki.MIDDLE)===ki.MIDDLE?ki.MIDDLE:(p.buttons&ki.RIGHT)===ki.RIGHT?ki.RIGHT:null;if(A!==null){const w=this._findPointerByMouseButton(A);w&&this._disposePointer(w)}if((p.buttons&ki.LEFT)===ki.LEFT&&this._lockedPointer)return;const y={pointerId:p.pointerId,clientX:p.clientX,clientY:p.clientY,deltaX:0,deltaY:0,mouseButton:A};this._activePointers.push(y),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,h(p)},a=p=>{p.cancelable&&p.preventDefault();const A=p.pointerId,y=this._lockedPointer||this._findPointerById(A);if(y){if(y.clientX=p.clientX,y.clientY=p.clientY,y.deltaX=p.movementX,y.deltaY=p.movementY,this._state=0,p.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(p.buttons&ki.LEFT)===ki.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(p.buttons&ki.MIDDLE)===ki.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(p.buttons&ki.RIGHT)===ki.RIGHT&&(this._state=this._state|this.mouseButtons.right);d()}},l=p=>{const A=this._findPointerById(p.pointerId);if(!(A&&A===this._lockedPointer)){if(A&&this._disposePointer(A),p.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=rt.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=rt.NONE;m()}};let c=-1;const u=p=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===rt.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const C=this._domElement.getBoundingClientRect(),b=p.clientX/C.width,M=p.clientY/C.height;if(b<this._interactiveArea.left||b>this._interactiveArea.right||M<this._interactiveArea.top||M>this._interactiveArea.bottom)return}if(p.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===rt.ROTATE||this.mouseButtons.wheel===rt.TRUCK){const C=performance.now();c-C<1e3&&this._getClientRect(this._elementRect),c=C}const A=f2e?-1:-3,y=p.deltaMode===1?p.deltaY/A:p.deltaY/(A*10),w=this.dollyToCursor?(p.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,S=this.dollyToCursor?(p.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case rt.ROTATE:{this._rotateInternal(p.deltaX,p.deltaY),this._isUserControllingRotate=!0;break}case rt.TRUCK:{this._truckInternal(p.deltaX,p.deltaY,!1),this._isUserControllingTruck=!0;break}case rt.OFFSET:{this._truckInternal(p.deltaX,p.deltaY,!0),this._isUserControllingOffset=!0;break}case rt.DOLLY:{this._dollyInternal(-y,w,S),this._isUserControllingDolly=!0;break}case rt.ZOOM:{this._zoomInternal(-y,w,S),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},f=p=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===R6.ACTION.NONE){const A=p instanceof PointerEvent?p.pointerId:0,y=this._findPointerById(A);y&&this._disposePointer(y),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}p.preventDefault()}},h=p=>{if(!this._enabled)return;if(KC(this._activePointers,Vs),this._getClientRect(this._elementRect),i.copy(Vs),r.copy(Vs),this._activePointers.length>=2){const y=Vs.x-this._activePointers[1].clientX,w=Vs.y-this._activePointers[1].clientY,S=Math.sqrt(y*y+w*w);s.set(0,S);const C=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,b=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(C,b)}if(this._state=0,!p)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in p&&p.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(p.buttons&ki.LEFT)===ki.LEFT&&(this._state=this._state|this.mouseButtons.left),(p.buttons&ki.MIDDLE)===ki.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(p.buttons&ki.RIGHT)===ki.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&rt.ROTATE)===rt.ROTATE||(this._state&rt.TOUCH_ROTATE)===rt.TOUCH_ROTATE||(this._state&rt.TOUCH_DOLLY_ROTATE)===rt.TOUCH_DOLLY_ROTATE||(this._state&rt.TOUCH_ZOOM_ROTATE)===rt.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&rt.TRUCK)===rt.TRUCK||(this._state&rt.TOUCH_TRUCK)===rt.TOUCH_TRUCK||(this._state&rt.TOUCH_DOLLY_TRUCK)===rt.TOUCH_DOLLY_TRUCK||(this._state&rt.TOUCH_ZOOM_TRUCK)===rt.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&rt.DOLLY)===rt.DOLLY||(this._state&rt.TOUCH_DOLLY)===rt.TOUCH_DOLLY||(this._state&rt.TOUCH_DOLLY_TRUCK)===rt.TOUCH_DOLLY_TRUCK||(this._state&rt.TOUCH_DOLLY_OFFSET)===rt.TOUCH_DOLLY_OFFSET||(this._state&rt.TOUCH_DOLLY_ROTATE)===rt.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&rt.ZOOM)===rt.ZOOM||(this._state&rt.TOUCH_ZOOM)===rt.TOUCH_ZOOM||(this._state&rt.TOUCH_ZOOM_TRUCK)===rt.TOUCH_ZOOM_TRUCK||(this._state&rt.TOUCH_ZOOM_OFFSET)===rt.TOUCH_ZOOM_OFFSET||(this._state&rt.TOUCH_ZOOM_ROTATE)===rt.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&rt.OFFSET)===rt.OFFSET||(this._state&rt.TOUCH_OFFSET)===rt.TOUCH_OFFSET||(this._state&rt.TOUCH_DOLLY_OFFSET)===rt.TOUCH_DOLLY_OFFSET||(this._state&rt.TOUCH_ZOOM_OFFSET)===rt.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},d=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,KC(this._activePointers,Vs);const A=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,y=A?-A.deltaX:r.x-Vs.x,w=A?-A.deltaY:r.y-Vs.y;if(r.copy(Vs),((this._state&rt.ROTATE)===rt.ROTATE||(this._state&rt.TOUCH_ROTATE)===rt.TOUCH_ROTATE||(this._state&rt.TOUCH_DOLLY_ROTATE)===rt.TOUCH_DOLLY_ROTATE||(this._state&rt.TOUCH_ZOOM_ROTATE)===rt.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(y,w),this._isUserControllingRotate=!0),(this._state&rt.DOLLY)===rt.DOLLY||(this._state&rt.ZOOM)===rt.ZOOM){const S=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,C=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,b=this.dollyDragInverted?-1:1;(this._state&rt.DOLLY)===rt.DOLLY?(this._dollyInternal(b*w*hx,S,C),this._isUserControllingDolly=!0):(this._zoomInternal(b*w*hx,S,C),this._isUserControllingZoom=!0)}if((this._state&rt.TOUCH_DOLLY)===rt.TOUCH_DOLLY||(this._state&rt.TOUCH_ZOOM)===rt.TOUCH_ZOOM||(this._state&rt.TOUCH_DOLLY_TRUCK)===rt.TOUCH_DOLLY_TRUCK||(this._state&rt.TOUCH_ZOOM_TRUCK)===rt.TOUCH_ZOOM_TRUCK||(this._state&rt.TOUCH_DOLLY_OFFSET)===rt.TOUCH_DOLLY_OFFSET||(this._state&rt.TOUCH_ZOOM_OFFSET)===rt.TOUCH_ZOOM_OFFSET||(this._state&rt.TOUCH_DOLLY_ROTATE)===rt.TOUCH_DOLLY_ROTATE||(this._state&rt.TOUCH_ZOOM_ROTATE)===rt.TOUCH_ZOOM_ROTATE){const S=Vs.x-this._activePointers[1].clientX,C=Vs.y-this._activePointers[1].clientY,b=Math.sqrt(S*S+C*C),M=s.y-b;s.set(0,b);const I=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,T=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&rt.TOUCH_DOLLY)===rt.TOUCH_DOLLY||(this._state&rt.TOUCH_DOLLY_ROTATE)===rt.TOUCH_DOLLY_ROTATE||(this._state&rt.TOUCH_DOLLY_TRUCK)===rt.TOUCH_DOLLY_TRUCK||(this._state&rt.TOUCH_DOLLY_OFFSET)===rt.TOUCH_DOLLY_OFFSET?(this._dollyInternal(M*hx,I,T),this._isUserControllingDolly=!0):(this._zoomInternal(M*hx,I,T),this._isUserControllingZoom=!0)}((this._state&rt.TRUCK)===rt.TRUCK||(this._state&rt.TOUCH_TRUCK)===rt.TOUCH_TRUCK||(this._state&rt.TOUCH_DOLLY_TRUCK)===rt.TOUCH_DOLLY_TRUCK||(this._state&rt.TOUCH_ZOOM_TRUCK)===rt.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(y,w,!1),this._isUserControllingTruck=!0),((this._state&rt.OFFSET)===rt.OFFSET||(this._state&rt.TOUCH_OFFSET)===rt.TOUCH_OFFSET||(this._state&rt.TOUCH_DOLLY_OFFSET)===rt.TOUCH_DOLLY_OFFSET||(this._state&rt.TOUCH_ZOOM_OFFSET)===rt.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(y,w,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},m=()=>{KC(this._activePointers,Vs),r.copy(Vs),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",g),this._domElement.ownerDocument.addEventListener("pointerlockerror",v),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),h())},this.unlockPointer=()=>{var p,A,y;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(p=this._domElement)===null||p===void 0||p.ownerDocument.exitPointerLock(),(A=this._domElement)===null||A===void 0||A.ownerDocument.removeEventListener("pointerlockchange",g),(y=this._domElement)===null||y===void 0||y.ownerDocument.removeEventListener("pointerlockerror",v),this.cancel()};const g=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},v=()=>{this.unlockPointer()};this._addAllEventListeners=p=>{this._domElement=p,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",u,{passive:!1}),this._domElement.addEventListener("contextmenu",f)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",u,{passive:!1}),this._domElement.removeEventListener("contextmenu",f),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",g),this._domElement.ownerDocument.removeEventListener("pointerlockerror",v))},this.cancel=()=>{this._state!==rt.NONE&&(this._state=rt.NONE,this._activePointers.length=0,m())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=La(e.width,0,1),this._interactiveArea.height=La(e.height,0,1),this._interactiveArea.x=La(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=La(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=La(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=La(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||ri(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ri(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=dp.NONE,this._changedDolly=0,this._dollyToNoClamp(La(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=ri(o,this._spherical.radius);if(!(i>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||ri(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(V1).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||ri(this._target.x,this._targetEnd.x,this.restThreshold)&&ri(this._target.y,this._targetEnd.y,this.restThreshold)&&ri(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=La(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||ri(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),vl.setFromMatrixColumn(this._camera.matrix,0),yl.setFromMatrixColumn(this._camera.matrix,1),vl.multiplyScalar(e),yl.multiplyScalar(-t);const r=bn.copy(vl).add(yl),s=ei.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){bn.setFromMatrixColumn(this._camera.matrix,0),bn.crossVectors(this._camera.up,bn),bn.multiplyScalar(e);const i=ei.copy(this._targetEnd).add(bn);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return bn.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+bn.x,this._targetEnd.y+bn.y,this._targetEnd.z+bn.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=bn.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||ri(this._target.x,this._targetEnd.x,this.restThreshold)&&ri(this._target.y,this._targetEnd.y,this.restThreshold)&&ri(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const a=bn.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],c=e.isBox3?gp.copy(e):gp.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=zO(this._sphericalEnd.theta,OO),f=zO(this._sphericalEnd.phi,OO);l.push(this.rotateTo(u,f,t));const h=bn.setFromSpherical(this._sphericalEnd).normalize(),d=QO.setFromUnitVectors(h,e5),m=ri(Math.abs(h.y),1);m&&d.multiply(n5.setFromAxisAngle(dx,u)),d.multiply(this._yAxisUpSpaceInverse);const g=HO.makeEmpty();ei.copy(c.min).applyQuaternion(d),g.expandByPoint(ei),ei.copy(c.min).setX(c.max.x).applyQuaternion(d),g.expandByPoint(ei),ei.copy(c.min).setY(c.max.y).applyQuaternion(d),g.expandByPoint(ei),ei.copy(c.max).setZ(c.min.z).applyQuaternion(d),g.expandByPoint(ei),ei.copy(c.min).setZ(c.max.z).applyQuaternion(d),g.expandByPoint(ei),ei.copy(c.max).setY(c.min.y).applyQuaternion(d),g.expandByPoint(ei),ei.copy(c.max).setX(c.min.x).applyQuaternion(d),g.expandByPoint(ei),ei.copy(c.max).applyQuaternion(d),g.expandByPoint(ei),g.min.x-=r,g.min.y-=o,g.max.x+=s,g.max.y+=a,d.setFromUnitVectors(e5,h),m&&d.premultiply(n5.invert()),d.premultiply(this._yAxisUpSpace);const v=g.getSize(bn),p=g.getCenter(ei).applyQuaternion(d);if(th(this._camera)){const A=this.getDistanceToFitBox(v.x,v.y,v.z,i);l.push(this.moveTo(p.x,p.y,p.z,t)),l.push(this.dollyTo(A,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(gu(this._camera)){const A=this._camera,y=A.right-A.left,w=A.top-A.bottom,S=i?Math.max(y/v.x,w/v.y):Math.min(y/v.x,w/v.y);l.push(this.moveTo(p.x,p.y,p.z,t)),l.push(this.zoomTo(S,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const i=[],s="isObject3D"in e?R6.createBoundingSphere(e,t5):t5.copy(e);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),th(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(gu(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(o/l,a/l);i.push(this.zoomTo(c,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=dp.NONE,this._changedDolly=0;const l=ei.set(r,s,o),c=bn.set(e,t,i);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||ri(this._target.x,this._targetEnd.x,this.restThreshold)&&ri(this._target.y,this._targetEnd.y,this.restThreshold)&&ri(this._target.z,this._targetEnd.z,this.restThreshold)&&ri(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ri(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&ri(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,i,r,s,o,a,l,c,u,f,h,d,m=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=dp.NONE,this._changedDolly=0;const g=bn.set(r,s,o),v=ei.set(e,t,i);Vo.setFromVector3(v.sub(g).applyQuaternion(this._yAxisUpSpace));const p=mp.set(u,f,h),A=ei.set(a,l,c);j1.setFromVector3(A.sub(p).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(g.lerp(p,d));const y=j1.theta-Vo.theta,w=j1.phi-Vo.phi,S=j1.radius-Vo.radius;this._sphericalEnd.set(Vo.radius+S*d,Vo.phi+w*d,Vo.theta+y*d),this.normalizeRotations(),this._needsUpdate=!0,m||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const C=!m||ri(this._target.x,this._targetEnd.x,this.restThreshold)&&ri(this._target.y,this._targetEnd.y,this.restThreshold)&&ri(this._target.z,this._targetEnd.z,this.restThreshold)&&ri(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ri(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&ri(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(C)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(bn),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=La(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||ri(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&ri(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&ri(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),vl.setFromMatrixColumn(this._camera.matrixWorldInverse,0),yl.setFromMatrixColumn(this._camera.matrixWorldInverse,1),nh.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=bn.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);vl.multiplyScalar(o.x),yl.multiplyScalar(o.y),nh.multiplyScalar(o.z),bn.copy(vl).add(yl).add(nh),bn.z=bn.z+s,this.dollyTo(s,!1),this.setFocalOffset(-bn.x,bn.y,-bn.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new hn.Vector4,typeof e=="number"?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if($C(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*G1,a=this._camera.aspect;return((r?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if($C(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*G1,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new hn.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new hn.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new hn.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new hn.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%pp,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=pp),this._spherical.theta+=pp*Math.round((this._sphericalEnd.theta-this._spherical.theta)/pp)}reset(e=!1){if(!ri(this._camera.up.x,this._cameraUp0.x)||!ri(this._camera.up.y,this._cameraUp0.y)||!ri(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(bn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,dx),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=bn.subVectors(this._target,this._camera.position).normalize(),t=ei.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(bn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=NO.subVectors(this._targetEnd,this._target),o=GO.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(yi(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=fx(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,f,1/0,e),this._needsUpdate=!0}if(yi(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=fx(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,f,1/0,e),this._needsUpdate=!0}if(yi(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const f=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=fx(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,f,this.maxSpeed,e),this._needsUpdate=!0}if(yi(s.x)&&yi(s.y)&&yi(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const f=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;UO(this._target,this._targetEnd,this._targetVelocity,f,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(yi(o.x)&&yi(o.y)&&yi(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const f=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;UO(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,f,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(yi(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const f=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=fx(this._zoom,this._zoomEnd,this._zoomVelocity,f,1/0,e)}if(this.dollyToCursor){if(th(this._camera)&&this._changedDolly!==0){const f=this._spherical.radius-this._lastDistance,h=this._camera,d=this._getCameraDirection(V1),m=bn.copy(d).cross(h.up).normalize();m.lengthSq()===0&&(m.x=1);const g=ei.crossVectors(m,d),v=this._sphericalEnd.radius*Math.tan(h.getEffectiveFOV()*G1*.5),A=(this._sphericalEnd.radius-f-this._sphericalEnd.radius)/this._sphericalEnd.radius,y=mp.copy(this._targetEnd).add(m.multiplyScalar(this._dollyControlCoord.x*v*h.aspect)).add(g.multiplyScalar(this._dollyControlCoord.y*v)),w=bn.copy(this._targetEnd).lerp(y,A),S=this._lastDollyDirection===dp.IN&&this._spherical.radius<=this.minDistance,C=this._lastDollyDirection===dp.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(S||C)){this._sphericalEnd.radius-=f,this._spherical.radius-=f;const M=ei.copy(d).multiplyScalar(-f);w.add(M)}this._boundary.clampPoint(w,w);const b=ei.subVectors(w,this._targetEnd);this._targetEnd.copy(w),this._target.add(b),this._changedDolly-=f,yi(this._changedDolly)&&(this._changedDolly=0)}else if(gu(this._camera)&&this._changedZoom!==0){const f=this._zoom-this._lastZoom,h=this._camera,d=bn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(h.near+h.far)/(h.near-h.far)).unproject(h),m=ei.set(0,0,-1).applyQuaternion(h.quaternion),g=mp.copy(d).add(m.multiplyScalar(-d.dot(h.up))),p=-(this._zoom-f-this._zoom)/this._zoom,A=this._getCameraDirection(V1),y=this._targetEnd.dot(A),w=bn.copy(this._targetEnd).lerp(g,p),S=w.dot(A),C=A.multiplyScalar(S-y);w.sub(C),this._boundary.clampPoint(w,w);const b=ei.subVectors(w,this._targetEnd);this._targetEnd.copy(w),this._target.add(b),this._changedZoom-=f,yi(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!yi(this._focalOffset.x)||!yi(this._focalOffset.y)||!yi(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),vl.setFromMatrixColumn(this._camera.matrix,0),yl.setFromMatrixColumn(this._camera.matrix,1),nh.setFromMatrixColumn(this._camera.matrix,2),vl.multiplyScalar(this._focalOffset.x),yl.multiplyScalar(-this._focalOffset.y),nh.multiplyScalar(this._focalOffset.z),bn.copy(vl).add(yl).add(nh),this._camera.position.add(bn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),bn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),yi(t,this.restThreshold)&&yi(i,this.restThreshold)&&yi(r,this.restThreshold)&&yi(s.x,this.restThreshold)&&yi(s.y,this.restThreshold)&&yi(s.z,this.restThreshold)&&yi(o.x,this.restThreshold)&&yi(o.y,this.restThreshold)&&yi(o.z,this.restThreshold)&&yi(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:H1(this.maxDistance),minZoom:this.minZoom,maxZoom:H1(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:H1(this.maxPolarAngle),minAzimuthAngle:H1(this.minAzimuthAngle),maxAzimuthAngle:H1(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:bn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=Q1(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=Q1(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=Q1(i.maxPolarAngle),this.minAzimuthAngle=Q1(i.minAzimuthAngle),this.maxAzimuthAngle=Q1(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this.verticalDragToForward=i.verticalDragToForward,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),Vo.setFromVector3(bn.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Vo.theta,Vo.phi,t),this.dollyTo(Vo.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",u2e),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=ei.copy(t).add(e),a=this._boundary.clampPoint(s,mp).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===r)return e;if(i===0)return e.add(t).add(a);{const c=1+i*l/t.dot(a);return e.add(ei.copy(t).multiplyScalar(c)).add(a.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(th(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*G1,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(gu(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||$C(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(V1);i5.lookAt(kO,i,this._camera.up);for(let r=0;r<4;r++){const s=ei.copy(this._nearPlaneCorners[r]);s.applyMatrix4(i5);const o=mp.addVectors(this._target,s);px.set(o,i),px.far=this._spherical.radius+1;const a=px.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const i=()=>{this.removeEventListener("rest",i),t()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new hn.Sphere){const i=t,r=i.center;gp.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&gp.expandByObject(o)}),gp.getCenter(r);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const u=l.attributes.position;for(let f=0,h=u.count;f<h;f++)bn.fromBufferAttribute(u,f),s=Math.max(s,r.distanceToSquared(bn))}),i.radius=Math.sqrt(s),i}};const h2e=E.forwardRef((n,e)=>{E.useMemo(()=>{const S={Box3:Gn,MathUtils:{clamp:jt.clamp},Matrix4:He,Quaternion:Lt,Raycaster:Ef,Sphere:Bi,Spherical:Wh,Vector2:Se,Vector3:F,Vector4:sn};r5.install({THREE:S}),Ai({CameraControlsImpl:r5})},[]);const{camera:t,domElement:i,makeDefault:r,onStart:s,onEnd:o,onChange:a,regress:l,...c}=n,u=Pe(S=>S.camera),f=Pe(S=>S.gl),h=Pe(S=>S.invalidate),d=Pe(S=>S.events),m=Pe(S=>S.setEvents),g=Pe(S=>S.set),v=Pe(S=>S.get),p=Pe(S=>S.performance),A=t||u,y=i||d.connected||f.domElement,w=E.useMemo(()=>new r5(A),[A]);return Bt((S,C)=>{w.enabled&&w.update(C)},-1),E.useEffect(()=>(w.connect(y),()=>void w.disconnect()),[y,w]),E.useEffect(()=>{const S=M=>{h(),l&&p.regress(),a&&a(M)},C=M=>{s&&s(M)},b=M=>{o&&o(M)};return w.addEventListener("update",S),w.addEventListener("controlstart",C),w.addEventListener("controlend",b),w.addEventListener("control",S),w.addEventListener("transitionstart",S),w.addEventListener("wake",S),()=>{w.removeEventListener("update",S),w.removeEventListener("controlstart",C),w.removeEventListener("controlend",b),w.removeEventListener("control",S),w.removeEventListener("transitionstart",S),w.removeEventListener("wake",S)}},[w,s,o,h,m,l,a]),E.useEffect(()=>{if(r){const S=v().controls;return g({controls:w}),()=>g({controls:S})}},[r,w]),E.createElement("primitive",tt({ref:e,object:w},c))}),d2e=n=>(n==null?void 0:n.current)instanceof Jt,eY=E.createContext(null);function tY(){return E.useContext(eY)}function p2e({points:n=50}){const{path:e}=tY(),[t,i]=E.useState([]),[r]=E.useState(()=>new Ir({color:"black"})),[s]=E.useState(()=>new id(.025,16,16)),o=E.useRef([]);return E.useEffect(()=>{e.curves!==o.current&&(i(e.getPoints(n)),o.current=e.curves)}),E.createElement(E.Fragment,null,t.map((a,l)=>E.createElement("mesh",{key:l,material:r,geometry:s,position:[a.x,a.y,a.z]})))}const m2e=E.forwardRef(({children:n,curves:e=[],object:t,debug:i=!1,smooth:r=!1,focus:s,offset:o=void 0,eps:a=1e-5,damping:l=.1,focusDamping:c=.1,maxSpeed:u=1/0,...f},h)=>{const{camera:d}=Pe(),m=E.useRef(),[g]=E.useState(()=>new LT),v=E.useRef(o??0),p=E.useMemo(()=>({focus:s,object:(t==null?void 0:t.current)instanceof Jt?t:{current:d},path:g,current:v.current,offset:v.current,point:new F,tangent:new F,next:new F}),[s,t]);E.useLayoutEffect(()=>{var w;g.curves=[];const S=e.length>0?e:(w=m.current)==null?void 0:w.__r3f.objects;for(var C=0;C<S.length;C++)g.add(S[C]);if(r){const b=g.getPoints(typeof r=="number"?r:1),M=new EE(b);g.curves=[M]}g.updateArcLengths()}),E.useImperativeHandle(h,()=>m.current,[]),E.useLayoutEffect(()=>{v.current=gC.repeat(v.current,1)},[o]);let A=0;const[y]=E.useState(()=>new F);return Bt((w,S)=>{if(A=p.offset,qm.damp(v,"current",o!==void 0?o:p.current,l,S,u,void 0,a),p.offset=gC.repeat(v.current,1),g.getCurveLengths().length>0){g.getPointAt(p.offset,p.point),g.getTangentAt(p.offset,p.tangent).normalize(),g.getPointAt(gC.repeat(v.current-(A-p.offset),1),p.next);const C=(t==null?void 0:t.current)instanceof Jt?t.current:d;C.position.copy(p.point),s&&qm.dampLookAt(C,d2e(s)?s.current.getWorldPosition(y):s,c,S,u,void 0,a)}}),E.createElement("group",tt({ref:m},f),E.createElement(eY.Provider,{value:p},n,i&&E.createElement(p2e,null)))});function g2e({defaultScene:n,defaultCamera:e,renderPriority:t=1}){const{gl:i,scene:r,camera:s}=Pe();let o;return Bt(()=>{o=i.autoClear,t===1&&(i.autoClear=!0,i.render(n,e)),i.autoClear=!1,i.clearDepth(),i.render(r,s),i.autoClear=o},t),E.createElement("group",{onPointerOver:()=>null})}function nY({children:n,renderPriority:e=1}){const{scene:t,camera:i}=Pe(),[r]=E.useState(()=>new Mo);return E.createElement(E.Fragment,null,Vc(E.createElement(E.Fragment,null,n,E.createElement(g2e,{defaultScene:t,defaultCamera:i,renderPriority:e})),r,{events:{priority:e+1}}))}const iY=E.createContext({}),_w=()=>E.useContext(iY),A2e=2*Math.PI,s5=new Jt,VO=new He,[Ap,o5]=[new Lt,new Lt],jO=new F,WO=new F,v2e=n=>"minPolarAngle"in n,y2e=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:i,onTarget:r,children:s})=>{const o=Pe(C=>C.size),a=Pe(C=>C.camera),l=Pe(C=>C.controls),c=Pe(C=>C.invalidate),u=E.useRef(null),f=E.useRef(null),h=E.useRef(!1),d=E.useRef(0),m=E.useRef(new F(0,0,0)),g=E.useRef(new F(0,0,0));E.useEffect(()=>{g.current.copy(a.up)},[a]);const v=E.useCallback(C=>{h.current=!0,(l||r)&&(m.current=(l==null?void 0:l.target)||(r==null?void 0:r())),d.current=a.position.distanceTo(jO),Ap.copy(a.quaternion),WO.copy(C).multiplyScalar(d.current).add(jO),s5.lookAt(WO),s5.up.copy(a.up),o5.copy(s5.quaternion),c()},[l,a,r,c]);Bt((C,b)=>{if(f.current&&u.current){var M;if(h.current)if(Ap.angleTo(o5)<.01)h.current=!1,v2e(l)&&a.up.copy(g.current);else{const I=b*A2e;Ap.rotateTowards(o5,I),a.position.set(0,0,1).applyQuaternion(Ap).multiplyScalar(d.current).add(m.current),a.up.set(0,1,0).applyQuaternion(Ap).normalize(),a.quaternion.copy(Ap),i?i():l&&l.update(),c()}VO.copy(a.matrix).invert(),(M=u.current)==null||M.quaternion.setFromRotationMatrix(VO)}});const p=E.useMemo(()=>({tweenCamera:v}),[v]),[A,y]=e,w=n.endsWith("-center")?0:n.endsWith("-left")?-o.width/2+A:o.width/2-A,S=n.startsWith("center-")?0:n.startsWith("top-")?o.height/2-y:-o.height/2+y;return E.createElement(nY,{renderPriority:t},E.createElement(iY.Provider,{value:p},E.createElement(KW,{makeDefault:!0,ref:f,position:[0,0,200]}),E.createElement("group",{ref:u,position:[w,S,0]},s)))},gg={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},x2e=["Right","Left","Top","Bottom","Front","Back"],rY=n=>new F(...n).multiplyScalar(.38),_2e=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(rY),E2e=[.25,.25,.25],sY=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(rY),w2e=sY.map(n=>n.toArray().map(e=>e==0?.5:.25)),S2e=({hover:n,index:e,font:t="20px Inter var, Arial, sans-serif",faces:i=x2e,color:r=gg.bg,hoverColor:s=gg.hover,textColor:o=gg.text,strokeColor:a=gg.stroke,opacity:l=1})=>{const c=Pe(f=>f.gl),u=E.useMemo(()=>{const f=document.createElement("canvas");f.width=128,f.height=128;const h=f.getContext("2d");return h.fillStyle=r,h.fillRect(0,0,f.width,f.height),h.strokeStyle=a,h.strokeRect(0,0,f.width,f.height),h.font=t,h.textAlign="center",h.fillStyle=o,h.fillText(i[e].toUpperCase(),64,76),new _E(f)},[e,i,t,r,o,a]);return E.createElement("meshBasicMaterial",{map:u,"map-anisotropy":c.capabilities.getMaxAnisotropy()||1,attach:`material-${e}`,color:n?s:"white",transparent:!0,opacity:l})},C2e=n=>{const{tweenCamera:e}=_w(),[t,i]=E.useState(null),r=a=>{a.stopPropagation(),i(null)},s=a=>{a.stopPropagation(),e(a.face.normal)},o=a=>{a.stopPropagation(),i(Math.floor(a.faceIndex/2))};return E.createElement("mesh",{onPointerOut:r,onPointerMove:o,onClick:n.onClick||s},[...Array(6)].map((a,l)=>E.createElement(S2e,tt({key:l,index:l,hover:t===l},n))),E.createElement("boxGeometry",null))},YO=({onClick:n,dimensions:e,position:t,hoverColor:i=gg.hover})=>{const{tweenCamera:r}=_w(),[s,o]=E.useState(!1),a=u=>{u.stopPropagation(),o(!1)},l=u=>{u.stopPropagation(),o(!0)},c=u=>{u.stopPropagation(),r(t)};return E.createElement("mesh",{scale:1.01,position:t,onPointerOver:l,onPointerOut:a,onClick:n||c},E.createElement("meshBasicMaterial",{color:s?i:"white",transparent:!0,opacity:.6,visible:s}),E.createElement("boxGeometry",{args:e}))},b2e=n=>E.createElement("group",{scale:[60,60,60]},E.createElement(C2e,n),sY.map((e,t)=>E.createElement(YO,tt({key:t,position:e,dimensions:w2e[t]},n))),_2e.map((e,t)=>E.createElement(YO,tt({key:t,position:e,dimensions:E2e},n))));function a5({scale:n=[.8,.05,.05],color:e,rotation:t}){return E.createElement("group",{rotation:t},E.createElement("mesh",{position:[.4,0,0]},E.createElement("boxGeometry",{args:n}),E.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function vp({onClick:n,font:e,disabled:t,arcStyle:i,label:r,labelColor:s,axisHeadScale:o=1,...a}){const l=Pe(g=>g.gl),c=E.useMemo(()=>{const g=document.createElement("canvas");g.width=64,g.height=64;const v=g.getContext("2d");return v.beginPath(),v.arc(32,32,16,0,2*Math.PI),v.closePath(),v.fillStyle=i,v.fill(),r&&(v.font=e,v.textAlign="center",v.fillStyle=s,v.fillText(r,32,41)),new _E(g)},[i,r,s,e]),[u,f]=E.useState(!1),h=(r?1:.75)*(u?1.2:1)*o,d=g=>{g.stopPropagation(),f(!0)},m=g=>{g.stopPropagation(),f(!1)};return E.createElement("sprite",tt({scale:h,onPointerOver:t?void 0:d,onPointerOut:t?void 0:n||m},a),E.createElement("spriteMaterial",{map:c,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:r?1:.75,toneMapped:!1}))}const M2e=({hideNegativeAxes:n,hideAxisHeads:e,disabled:t,font:i="18px Inter var, Arial, sans-serif",axisColors:r=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:o,labels:a=["X","Y","Z"],labelColor:l="#000",onClick:c,...u})=>{const[f,h,d]=r,{tweenCamera:m}=_w(),g={font:i,disabled:t,labelColor:l,onClick:c,axisHeadScale:s,onPointerDown:t?void 0:v=>{m(v.object.position),v.stopPropagation()}};return E.createElement("group",tt({scale:40},u),E.createElement(a5,{color:f,rotation:[0,0,0],scale:o}),E.createElement(a5,{color:h,rotation:[0,0,Math.PI/2],scale:o}),E.createElement(a5,{color:d,rotation:[0,-Math.PI/2,0],scale:o}),!e&&E.createElement(E.Fragment,null,E.createElement(vp,tt({arcStyle:f,position:[1,0,0],label:a[0]},g)),E.createElement(vp,tt({arcStyle:h,position:[0,1,0],label:a[1]},g)),E.createElement(vp,tt({arcStyle:d,position:[0,0,1],label:a[2]},g)),!n&&E.createElement(E.Fragment,null,E.createElement(vp,tt({arcStyle:f,position:[-1,0,0]},g)),E.createElement(vp,tt({arcStyle:h,position:[0,-1,0]},g)),E.createElement(vp,tt({arcStyle:d,position:[0,0,-1]},g)))))},I2e=Po({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new et,sectionColor:new et,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new F,worldPlanePosition:new F},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),T2e=E.forwardRef(({args:n,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:i=.5,sectionSize:r=1,followCamera:s=!1,infiniteGrid:o=!1,fadeDistance:a=100,fadeStrength:l=1,fadeFrom:c=1,cellThickness:u=.5,sectionThickness:f=1,side:h=er,...d},m)=>{Ai({GridMaterial:I2e});const g=E.useRef(null);E.useImperativeHandle(m,()=>g.current,[]);const v=new Hr,p=new F(0,1,0),A=new F(0,0,0);Bt(S=>{v.setFromNormalAndCoplanarPoint(p,A).applyMatrix4(g.current.matrixWorld);const C=g.current.material,b=C.uniforms.worldCamProjPosition,M=C.uniforms.worldPlanePosition;v.projectPoint(S.camera.position,b.value),M.value.set(0,0,0).applyMatrix4(g.current.matrixWorld)});const y={cellSize:i,sectionSize:r,cellColor:e,sectionColor:t,cellThickness:u,sectionThickness:f},w={fadeDistance:a,fadeStrength:l,fadeFrom:c,infiniteGrid:o,followCamera:s};return E.createElement("mesh",tt({ref:g,frustumCulled:!1},d),E.createElement("gridMaterial",tt({transparent:!0,"extensions-derivatives":!0,side:h},y,w)),E.createElement("planeGeometry",{args:n}))});function J8(n,{path:e}){const[t]=Pi(OE,[n],i=>i.setPath(e));return t}J8.preload=(n,{path:e})=>Pi.preload(OE,[n],t=>t.setPath(e));function B2e({children:n,files:e,...t}){const i=J8(e,{...t});return E.createElement(E.Fragment,null,n==null?void 0:n(i))}function Ew(n){return Pi(V8,n)}Ew.preload=n=>Pi.preload(V8,n);Ew.clear=n=>Pi.clear(V8,n);function P2e({path:n,...e}){const i=Ew(n).children[0];return E.createElement(YA,tt({},e,{object:i}))}const oY="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function ww(n,e=`${oY}/basis/`){const t=Pe(r=>r.gl),i=Pi(cd,Tm(n)?Object.values(n):n,r=>{r.detectSupport(t),r.setTranscoderPath(e)});if(E.useEffect(()=>{(Array.isArray(i)?i:[i]).forEach(t.initTexture)},[t,i]),Tm(n)){const r=Object.keys(n),s={};return r.forEach(o=>Object.assign(s,{[o]:i[r.indexOf(o)]})),s}else return i}ww.preload=(n,e=`${oY}/basis/`)=>Pi.preload(cd,n,t=>{t.setTranscoderPath(e)});ww.clear=n=>Pi.clear(cd,n);const R2e=({children:n,input:e,basisPath:t})=>{const i=ww(e,t);return E.createElement(E.Fragment,null,n==null?void 0:n(i))};var XO,qO;const D2e=typeof window<"u"&&typeof((XO=window.document)==null?void 0:XO.createElement)=="function"&&typeof((qO=window.navigator)==null?void 0:qO.userAgent)=="string";let mx=null;async function L2e(n,e){if(D2e&&n.pathname.endsWith(".m3u8")){var t;if((t=mx)!==null&&t!==void 0||(mx=await Z3(()=>import("./hls-6npjbxxH.js").then(i=>i.h),[])),mx.default.isSupported())return new mx.default({...e})}return null}function K8(n,{unsuspend:e="loadedmetadata",start:t=!0,crossOrigin:i="anonymous",muted:r=!0,loop:s=!0,hls:o={},...a}={}){const l=new URL(typeof n=="string"?n:"",window.location.href),c=E.useRef(null),u=E.useRef(null),f=Pe(d=>d.gl),h=Qc(()=>new Promise(async d=>{const m=Object.assign(document.createElement("video"),{src:typeof n=="string"&&n||void 0,srcObject:n instanceof MediaStream&&n||void 0,crossOrigin:i,loop:s,muted:r,...a});if(u.current=m,typeof n=="string"){const v=c.current=await L2e(l,o);v?(v.attachMedia(m),v.on("hlsMediaAttached",()=>{v.loadSource(n)})):m.src=n}else n instanceof MediaStream&&(m.srcObject=n);const g=new HH(m);"colorSpace"in g?g.colorSpace=f.outputColorSpace:g.encoding=f.outputEncoding,m.addEventListener(e,()=>d(g))}),[n]);return E.useEffect(()=>(t&&h.image.play(),()=>{c.current&&(c.current.destroy(),c.current=null)}),[h,t]),h}const F2e=({children:n,src:e,...t})=>{const i=K8(e,t);return E.createElement(E.Fragment,null,n==null?void 0:n(i))},aY=n=>{if(Array.isArray(n))return n[0];if(typeof n=="object"&&n!==null){const e=Object.keys(n);return n[e[0]][0]}else return{w:0,h:0}},lY=n=>{for(let e=3;e<n.length;e+=4)if(n[e]!==0)return!1;return!0},D6=(n,e,t,i)=>{const r=e*(i.aspect>n/e?i.width/n:i.height/e),o=n*(i.aspect>n/e?i.width/n:i.height/e)*t,a=r*t,l=1;let c=Math.min(l,o),u=Math.min(l,a);return o>l&&(c=l,u=a/o*l),new F(c,u,1)};function Sw(n,e,t,i,r){const s=Pe(C=>C.viewport),o=E.useRef(null),a=E.useRef(0),l=.1,[c,u]=E.useState(null),[f,h]=E.useState(new Nn),d=new kl,[m,g]=E.useState(null);E.useLayoutEffect(()=>(e&&n?A(e,n,y):n&&p(),()=>{n&&Pi.clear(kl,n)}),[]);function v(C,b){b&&C?A(b,C,y):p(C)}function p(C){(C||n)&&new Promise(b=>{d.load(C??n,b)}).then(b=>{y(null,b)})}function A(C,b,M){const I=fetch(C).then(D=>D.json()),T=new Promise(D=>{d.load(b,D)});Promise.all([I,T]).then(D=>{M(D[0],D[1])})}const y=(C,b)=>{let M=new F(1,1,1);if(C===null){if(b&&i){const I=b.image.width,T=b.image.height;a.current=i;const{rows:D,columns:R,frameWidth:z,frameHeight:L,emptyFrames:H}=w(b,i);o.current={frames:[],meta:{version:"1.0",size:{w:I,h:T},rows:D,columns:R,frameWidth:z,frameHeight:L,scale:"1"}};for(let J=0;J<D;J++)for(let Z=0;Z<R;Z++)(H??[]).some(X=>X.row===J&&X.col===Z)||o.current.frames.push({frame:{x:Z*z,y:J*L,w:z,h:L},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:z,h:L},sourceSize:{w:z,h:L}});M=D6(z,L,l,s)}}else if(b){o.current=C,o.current.frames=S(),a.current=Array.isArray(C.frames)?C.frames.length:Object.keys(C.frames).length;const{w:I,h:T}=aY(C.frames).sourceSize;M=D6(I,T,l,s)}u(o.current),"encoding"in b?b.encoding=3001:b.colorSpace="srgb",h(b),g({spriteTexture:b,spriteData:o.current,aspect:M})},w=(C,b)=>{if(C.image){const M=document.createElement("canvas"),I=M.getContext("2d");M.width=C.image.width,M.height=C.image.height,I.drawImage(C.image,0,0);const T=C.image.width,D=C.image.height,R=Math.round(Math.sqrt(b*(T/D))),z=Math.round(b/R),L=T/R,H=D/z,J=[];for(let Z=0;Z<z;Z++)for(let U=0;U<R;U++){if(Z*R+U>=b){J.push({row:Z,col:U});continue}const Y=I.getImageData(U*L,Z*H,L,H).data;lY(Y)&&J.push({row:Z,col:U})}return{rows:z,columns:R,frameWidth:L,frameHeight:H,emptyFrames:J}}else return{rows:0,columns:0,frameWidth:0,frameHeight:0,emptyFrames:[]}},S=()=>{const C={},b=o.current,M=t;if(M&&Array.isArray(b.frames)){for(let I=0;I<M.length;I++){C[M[I]]=[];for(const T of b.frames){const D=T.frame,R=D.x,z=D.y,L=D.w,H=D.h,J=T.sourceSize.w,Z=T.sourceSize.h;typeof T.filename=="string"&&T.filename.toLowerCase().indexOf(M[I].toLowerCase())!==-1&&C[M[I]].push({x:R,y:z,w:L,h:H,frame:D,sourceSize:{w:J,h:Z}})}}return C}else if(M&&typeof b.frames=="object"){for(let I=0;I<M.length;I++){C[M[I]]=[];for(const T in b.frames){const D=b.frames[T],R=D.frame,z=R.x,L=R.y,H=R.w,J=R.h,Z=D.sourceSize.w,U=D.sourceSize.h;typeof T=="string"&&T.toLowerCase().indexOf(M[I].toLowerCase())!==-1&&C[M[I]].push({x:z,y:L,w:H,h:J,frame:R,sourceSize:{w:Z,h:U}})}}return C}else{const I=[];for(const T in b.frames)I.push(b.frames[T]);return I}};return E.useLayoutEffect(()=>{r==null||r(f,c)},[f,c]),{spriteObj:m,loadJsonAndTexture:v}}Sw.preload=n=>Pi.preload(kl,n);Sw.clear=n=>Pi.clear(kl,n);function $8(n,e,...t){const i=E.useRef(),r=Pe(s=>s.scene);return E.useLayoutEffect(()=>{let s;if(n&&n!=null&&n.current&&e&&(i.current=s=new e(n.current,...t)),s)return s.traverse(o=>o.raycast=()=>null),r.add(s),()=>{i.current=void 0,r.remove(s),s.dispose==null||s.dispose()}},[r,e,n,...t]),Bt(()=>{var s;return void((s=i.current)==null||s.update==null?void 0:s.update())}),i}const O2e=({type:n,args:e=[]})=>{const t=E.useRef(null),i=E.useRef(null);return E.useLayoutEffect(()=>{i.current=t.current.parent}),$8(i,n,...e),E.createElement("object3D",{ref:t})};var cY={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(oq,function(){var t=function(){function i(d){return o.appendChild(d.dom),d}function r(d){for(var m=0;m<o.children.length;m++)o.children[m].style.display=m===d?"block":"none";s=d}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(d){d.preventDefault(),r(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,u=i(new t.Panel("FPS","#0ff","#002")),f=i(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=i(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:i,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){c++;var d=(performance||Date).now();if(f.update(d-a,200),d>l+1e3&&(u.update(1e3*c/(d-l),100),l=d,c=0,h)){var m=performance.memory;h.update(m.usedJSHeapSize/1048576,m.jsHeapSizeLimit/1048576)}return d},update:function(){a=this.end()},domElement:o,setMode:r}};return t.Panel=function(i,r,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,f=48*c,h=3*c,d=2*c,m=3*c,g=15*c,v=74*c,p=30*c,A=document.createElement("canvas");A.width=u,A.height=f,A.style.cssText="width:80px;height:48px";var y=A.getContext("2d");return y.font="bold "+9*c+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=s,y.fillRect(0,0,u,f),y.fillStyle=r,y.fillText(i,h,d),y.fillRect(m,g,v,p),y.fillStyle=s,y.globalAlpha=.9,y.fillRect(m,g,v,p),{dom:A,update:function(w,S){o=Math.min(o,w),a=Math.max(a,w),y.fillStyle=s,y.globalAlpha=1,y.fillRect(0,0,u,g),y.fillStyle=r,y.fillText(l(w)+" "+i+" ("+l(o)+"-"+l(a)+")",h,d),y.drawImage(A,m+c,g,v-c,p,m,g,v-c,p),y.fillRect(m+v-c,g,c,p),y.fillStyle=s,y.globalAlpha=.9,y.fillRect(m+v-c,g,c,l((1-w/S)*p))}}},t})})(cY);var z2e=cY.exports;const U2e=Zh(z2e);function k2e(n,e=[],t){const[i,r]=E.useState();return E.useLayoutEffect(()=>{const s=n();return r(s),()=>void 0},e),i}function N2e({showPanel:n=0,className:e,parent:t}){const i=k2e(()=>new U2e,[]);return E.useEffect(()=>{if(i){const r=t&&t.current||document.body;i.showPanel(n),r==null||r.appendChild(i.dom);const s=(e??"").split(" ").filter(l=>l);s.length&&i.dom.classList.add(...s);const o=gv(()=>i.begin()),a=jE(()=>i.end());return()=>{s.length&&i.dom.classList.remove(...s),r==null||r.removeChild(i.dom),o(),a()}}},[t,i,e,n]),null}class G2e{constructor(e,t,i){this.name=e,this.fg=t,this.bg=i,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(e,t,i,r,s=0){let o=1/0,a=0;this.context&&(o=Math.min(o,e),a=Math.max(i,e),r=Math.max(r,t),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(e.toFixed(s)+" "+this.name+" ("+o.toFixed(s)+"-"+parseFloat(a.toFixed(s))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-t/r)*this.GRAPH_HEIGHT))}}const uY=class Hp{constructor({logsPerSecond:e=20,samplesLog:t=100,samplesGraph:i=10,precision:r=2,minimal:s=!1,horizontal:o=!0,mode:a=0}={}){this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalGpuDurationCompute=0,this.totalFps=0,this.activeQuery=null,this.gpuQueries=[],this.renderCount=0,this.mode=a,this.horizontal=o,this.dom=document.createElement("div"),this.dom.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",s&&(this.dom.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.isRunningCPUProfiling=!1,this.minimal=s,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.renderCount=0,this.threeRendererPatched=!1,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.averageGpuCompute={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new Hp.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new Hp.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.gpuPanelCompute=null,this.samplesLog=t,this.samplesGraph=i,this.precision=r,this.logsPerSecond=e,this.minimal?(this.dom.addEventListener("click",l=>{l.preventDefault(),this.showPanel(++this.mode%this.dom.children.length)},!1),this.mode=a,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2),this.gpuPanelCompute&&this.resizePanel(this.gpuPanelCompute,3)})}patchThreeRenderer(e){const t=e.render,i=this;e.render=function(r,s){i.begin(),t.call(this,r,s),i.end()},this.threeRendererPatched=!0}resizePanel(e,t){e.canvas.style.position="absolute",this.minimal?e.canvas.style.display="none":(e.canvas.style.display="block",this.horizontal?(e.canvas.style.top="0px",e.canvas.style.left=t*e.WIDTH/e.PR+"px"):(e.canvas.style.left="0px",e.canvas.style.top=t*e.HEIGHT/e.PR+"px"))}addPanel(e,t){return e.canvas&&(this.dom.appendChild(e.canvas),this.resizePanel(e,t)),e}showPanel(e){for(let t=0;t<this.dom.children.length;t++){const i=this.dom.children[t];i.style.display=t===e?"block":"none"}this.mode=e}async init(e){if(!e){console.error('Stats: The "canvas" parameter is undefined.');return}if(e.isWebGLRenderer&&!this.threeRendererPatched){const t=e;this.patchThreeRenderer(t),this.gl=t.getContext()}else!this.gl&&e instanceof WebGL2RenderingContext&&(this.gl=e);if(e.isWebGPURenderer){e.backend.trackTimestamp=!0,await e.hasFeatureAsync("timestamp-query")&&(this.gpuPanel=this.addPanel(new Hp.Panel("GPU","#ff0","#220"),2),this.gpuPanelCompute=this.addPanel(new Hp.Panel("CPT","#e1e1e1","#212121"),3),this.info=e.info);return}else if(!this.gl&&e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas){if(this.gl=e.getContext("webgl2"),!this.gl){console.error("Stats: Unable to obtain WebGL2 context.");return}}else if(!this.gl){console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");return}this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new Hp.Panel("GPU","#ff0","#220"),2))}begin(){this.isRunningCPUProfiling||this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)&&this.gl&&this.ext&&(this.activeQuery&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.activeQuery=this.gl.createQuery(),this.activeQuery!==null&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.activeQuery))}end(){this.renderCount++,this.gl&&this.ext&&this.activeQuery&&(this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.gpuQueries.push({query:this.activeQuery}),this.activeQuery=null)}processGpuQueries(){!this.gl||!this.ext||(this.totalGpuDuration=0,this.gpuQueries.forEach((e,t)=>{if(this.gl){const i=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT_AVAILABLE),r=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);if(i&&!r){const o=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT)*1e-6;this.totalGpuDuration+=o,this.gl.deleteQuery(e.query),this.gpuQueries.splice(t,1)}}}))}update(){this.info===void 0?this.processGpuQueries():(this.totalGpuDuration=this.info.render.timestamp,this.totalGpuDurationCompute=this.info.compute.timestamp,this.addToAverage(this.totalGpuDurationCompute,this.averageGpuCompute)),this.endProfiling("cpu-started","cpu-finished","cpu-duration"),this.addToAverage(this.totalCpuDuration,this.averageCpu),this.addToAverage(this.totalGpuDuration,this.averageGpu),this.renderCount=0,this.totalCpuDuration===0&&this.beginProfiling("cpu-started"),this.totalCpuDuration=0,this.totalFps=0,this.beginTime=this.endInternal()}endInternal(){this.frames++;const e=(performance||Date).now();if(e>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.gpuPanelCompute&&this.updatePanel(this.gpuPanelCompute,this.averageGpuCompute),this.prevCpuTime=e),e>=this.prevTime+1e3){const t=this.frames*1e3/(e-this.prevTime);this.fpsPanel.update(t,t,100,100,0),this.prevTime=e,this.frames=0}return e}addToAverage(e,t){t.logs.push(e),t.logs.length>this.samplesLog&&t.logs.shift(),t.graph.push(e),t.graph.length>this.samplesGraph&&t.graph.shift()}beginProfiling(e){window.performance&&(window.performance.mark(e),this.isRunningCPUProfiling=!0)}endProfiling(e,t,i){if(window.performance&&t&&this.isRunningCPUProfiling){window.performance.mark(t);const r=performance.measure(i,e,t);this.totalCpuDuration+=r.duration,this.isRunningCPUProfiling=!1}}updatePanel(e,t){if(t.logs.length>0){let i=0,r=.01;for(let a=0;a<t.logs.length;a++)i+=t.logs[a],t.logs[a]>r&&(r=t.logs[a]);let s=0,o=.01;for(let a=0;a<t.graph.length;a++)s+=t.graph[a],t.graph[a]>o&&(o=t.graph[a]);e&&e.update(i/Math.min(t.logs.length,this.samplesLog),s/Math.min(t.graph.length,this.samplesGraph),r,o,this.precision)}}get domElement(){return this.dom}get container(){return console.warn("Stats: Deprecated! this.container as been replaced to this.dom "),this.dom}};uY.Panel=G2e;let H2e=uY;function Q2e({className:n,parent:e,...t}){const i=Pe(s=>s.gl),r=E.useMemo(()=>{const s=new H2e({...t});return s.init(i),s},[i]);return E.useEffect(()=>{if(r){const s=e&&e.current||document.body;s==null||s.appendChild(r.dom);const o=(n??"").split(" ").filter(l=>l);o.length&&r.dom.classList.add(...o);const a=jE(()=>r.update());return()=>{o.length&&r.dom.classList.remove(...o),s==null||s.removeChild(r.dom),a()}}},[e,r,n]),null}function V2e({size:n=256,frames:e=1/0}={}){const t=Pe(u=>u.viewport.dpr),{width:i,height:r}=Pe(u=>u.size),s=n||i*t,o=n||r*t,a=E.useMemo(()=>{const u=new u0(s,o);return u.format=Ja,u.type=Af,{depthTexture:u}},[s,o]);let l=0;const c=Bs(s,o,a);return Bt(u=>{(e===1/0||l<e)&&(u.gl.setRenderTarget(c),u.gl.render(u.scene,u.camera),u.gl.setRenderTarget(null),l++)}),c.depthTexture}function j2e(n,e,t=1){const i=Pe(o=>o.viewport),r=e*(i.aspect>n/e?i.width/n:i.height/e);return[n*(i.aspect>n/e?i.width/n:i.height/e)*t,r*t,1]}function W2e(n,e){const t=Pe(r=>r.pointer),[i]=E.useState(()=>{const r=new Ef;return e&&yr(r,e,{}),function(s,o){r.setFromCamera(t,n instanceof yf?n:n.current);const a=this.constructor.prototype.raycast.bind(this);a&&a(r,o)}});return i}function l5(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(c){try{l(i.next(c))}catch(u){s(u)}}function a(c){try{l(i.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?r(c.value):(u=c.value,u instanceof t?u:new t(function(f){f(u)})).then(o,a)}l((i=i.apply(n,[])).next())})}const Y2e=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function JO(n){return n=n.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const fY=typeof window>"u",El=(()=>{if(fY)return;const{userAgent:n,platform:e,maxTouchPoints:t}=window.navigator,i=/(iphone|ipod|ipad)/i.test(n),r=e==="iPad"||e==="MacIntel"&&t>0&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(n)||i||r,isSafari12:/Version\/12.+Safari/.test(n),isFirefox:/Firefox/.test(n)}})();function X2e(n,e,t){if(!t)return[e];const i=function(c){const u=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,f=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,h=c.createShader(35633),d=c.createShader(35632),m=c.createProgram();if(!(d&&h&&m))return;c.shaderSource(h,u),c.shaderSource(d,f),c.compileShader(h),c.compileShader(d),c.attachShader(m,h),c.attachShader(m,d),c.linkProgram(m),c.detachShader(m,h),c.detachShader(m,d),c.deleteShader(h),c.deleteShader(d),c.useProgram(m);const g=c.createBuffer();c.bindBuffer(34962,g),c.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const v=c.getAttribLocation(m,"aPosition");c.vertexAttribPointer(v,3,5126,!1,0,0),c.enableVertexAttribArray(v),c.clearColor(1,1,1,1),c.clear(16384),c.viewport(0,0,1,1),c.drawArrays(4,0,3);const p=new Uint8Array(4);return c.readPixels(0,0,1,1,6408,5121,p),c.deleteProgram(m),c.deleteBuffer(g),p.join("")}(n),r="801621810",s="8016218135",o="80162181161",a=El!=null&&El.isIpad?[["a7",o,12],["a8",s,15],["a8x",s,15],["a9",s,15],["a9x",s,15],["a10",s,15],["a10x",s,15],["a12",r,15],["a12x",r,15],["a12z",r,15],["a14",r,15],["m1",r,15]]:[["a7",o,12],["a8",s,12],["a9",s,15],["a10",s,15],["a11",r,15],["a12",r,15],["a13",r,15],["a14",r,15],["a15",r,15],["a16",r,15],["a17",r,15]];let l;return i==="80162181255"?l=a.filter(([,,c])=>c>=14):(l=a.filter(([,c])=>c===i),l.length||(l=a)),l.map(([c])=>`apple ${c} gpu`)}let KO=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}};const c5=[],$O=[];function q2e(n,e){if(n===e)return 0;const t=n;n.length>e.length&&(n=e,e=t);let i=n.length,r=e.length;for(;i>0&&n.charCodeAt(~-i)===e.charCodeAt(~-r);)i--,r--;let s,o=0;for(;o<i&&n.charCodeAt(o)===e.charCodeAt(o);)o++;if(i-=o,r-=o,i===0)return r;let a,l,c=0,u=0,f=0;for(;u<i;)$O[u]=n.charCodeAt(o+u),c5[u]=++u;for(;f<r;)for(s=e.charCodeAt(o+f),a=f++,c=f,u=0;u<i;u++)l=s===$O[u]?a:a+1,a=c5[u],c=c5[u]=a>c?l>c?c+1:l:l>a?a+1:l;return c}function J2e(n){return n!=null}const K2e=({mobileTiers:n=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:t={},glContext:i,failIfMajorPerformanceCaveat:r=!1,benchmarksURL:s="https://unpkg.com/detect-gpu@5.0.38/dist/benchmarks"}={})=>l5(void 0,void 0,void 0,function*(){const o={};if(fY)return{tier:0,type:"SSR"};const{isIpad:a=!!(El!=null&&El.isIpad),isMobile:l=!!(El!=null&&El.isMobile),screenSize:c=window.screen,loadBenchmarks:u=S=>l5(void 0,void 0,void 0,function*(){const C=yield fetch(`${s}/${S}`).then(b=>b.json());if(parseInt(C.shift().split(".")[0],10)<4)throw new KO("Detect GPU benchmark data is out of date. Please update to version 4x");return C})}=t;let{renderer:f}=t;const h=(S,C,b,M,I)=>({device:I,fps:M,gpu:b,isMobile:l,tier:S,type:C});let d,m="";if(f)f=JO(f),d=[f];else{const S=i||function(b,M=!1){const I={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:M,powerPreference:"high-performance",stencil:!1};b&&delete I.powerPreference;const T=window.document.createElement("canvas"),D=T.getContext("webgl",I)||T.getContext("experimental-webgl",I);return D??void 0}(El==null?void 0:El.isSafari12,r);if(!S)return h(0,"WEBGL_UNSUPPORTED");const C=El!=null&&El.isFirefox?null:S.getExtension("WEBGL_debug_renderer_info");if(f=C?S.getParameter(C.UNMASKED_RENDERER_WEBGL):S.getParameter(S.RENDERER),!f)return h(1,"FALLBACK");m=f,f=JO(f),d=function(b,M,I){return M==="apple gpu"?X2e(b,M,I):[M]}(S,f,l)}const g=(yield Promise.all(d.map(function(S){var C;return l5(this,void 0,void 0,function*(){const b=($=>{const k=l?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce","adreno"];for(const V of k)if($.includes(V))return V})(S);if(!b)return;const M=`${l?"m":"d"}-${b}${a?"-ipad":""}.json`,I=o[M]=(C=o[M])!==null&&C!==void 0?C:u(M);let T;try{T=yield I}catch($){if($ instanceof KO)throw $;return}const D=function($){var k;const V=($=$.replace(/\([^)]+\)/,"")).match(/\d+/)||$.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(k=V==null?void 0:V.join("").replace(/\W|amd/g,""))!==null&&k!==void 0?k:""}(S);let R=T.filter(([,$])=>$===D);R.length||(R=T.filter(([$])=>$.includes(S)));const z=R.length;if(z===0)return;const L=S.split(/[.,()\[\]/\s]/g).sort().filter(($,k,V)=>k===0||$!==V[k-1]).join(" ");let H,[J,,,,Z]=z>1?R.map($=>[$,q2e(L,$[2])]).sort(([,$],[,k])=>$-k)[0][0]:R[0],U=Number.MAX_VALUE;const{devicePixelRatio:X}=window,Y=c.width*X*c.height*X;for(const $ of Z){const[k,V]=$,Q=k*V,j=Math.abs(Y-Q);j<U&&(U=j,H=$)}if(!H)return;const[,,O,W]=H;return[U,O,J,W]})}))).filter(J2e).sort(([S=Number.MAX_VALUE,C],[b=Number.MAX_VALUE,M])=>S===b?C-M:S-b);if(!g.length){const S=Y2e.find(C=>f.includes(C));return S?h(0,"BLOCKLISTED",S):h(1,"FALLBACK",`${f} (${m})`)}const[,v,p,A]=g[0];if(v===-1)return h(0,"BLOCKLISTED",p,v,A);const y=l?n:e;let w=0;for(let S=0;S<y.length;S++)v>=y[S]&&(w=S);return h(w,"BENCHMARK",p,v,A)}),hY=n=>Qc(()=>K2e(n),["useDetectGPU"]);function $2e({children:n,...e}){const t=hY(e);return E.createElement(E.Fragment,null,n==null?void 0:n(t))}const dY=0,Z2e=1,Cw=2,ZO=2,u5=1.25,ez=1,Ku=6*4+4+4,bw=65535,exe=Math.pow(2,-24),f5=Symbol("SKIP_GENERATION");function pY(n){return n.index?n.index.count:n.attributes.position.count}function v0(n){return pY(n)/3}function mY(n,e=ArrayBuffer){return n>65535?new Uint32Array(new e(4*n)):new Uint16Array(new e(2*n))}function txe(n,e){if(!n.index){const t=n.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=mY(t,i);n.setIndex(new qt(r,1));for(let s=0;s<t;s++)r[s]=s}}function gY(n){const e=v0(n),t=n.drawRange,i=t.start/3,r=(t.start+t.count)/3,s=Math.max(0,i),o=Math.min(e,r)-s;return[{offset:Math.floor(s),count:Math.floor(o)}]}function AY(n){if(!n.groups||!n.groups.length)return gY(n);const e=[],t=new Set,i=n.drawRange,r=i.start/3,s=(i.start+i.count)/3;for(const a of n.groups){const l=a.start/3,c=(a.start+a.count)/3;t.add(Math.max(r,l)),t.add(Math.min(s,c))}const o=Array.from(t.values()).sort((a,l)=>a-l);for(let a=0;a<o.length-1;a++){const l=o[a],c=o[a+1];e.push({offset:Math.floor(l),count:Math.floor(c-l)})}return e}function nxe(n){if(n.groups.length===0)return!1;const e=v0(n),t=AY(n).sort((s,o)=>s.offset-o.offset),i=t[t.length-1];i.count=Math.min(e-i.offset,i.count);let r=0;return t.forEach(({count:s})=>r+=s),e!==r}function h5(n,e,t,i,r){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0,f=1/0,h=1/0,d=1/0,m=-1/0,g=-1/0,v=-1/0;for(let p=e*6,A=(e+t)*6;p<A;p+=6){const y=n[p+0],w=n[p+1],S=y-w,C=y+w;S<s&&(s=S),C>l&&(l=C),y<f&&(f=y),y>m&&(m=y);const b=n[p+2],M=n[p+3],I=b-M,T=b+M;I<o&&(o=I),T>c&&(c=T),b<h&&(h=b),b>g&&(g=b);const D=n[p+4],R=n[p+5],z=D-R,L=D+R;z<a&&(a=z),L>u&&(u=L),D<d&&(d=D),D>v&&(v=D)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=u,r[0]=f,r[1]=h,r[2]=d,r[3]=m,r[4]=g,r[5]=v}function ixe(n,e=null,t=null,i=null){const r=n.attributes.position,s=n.index?n.index.array:null,o=v0(n),a=r.normalized;let l;e===null?(l=new Float32Array(o*6*4),t=0,i=o):(l=e,t=t||0,i=i||o);const c=r.array,u=r.offset||0;let f=3;r.isInterleavedBufferAttribute&&(f=r.data.stride);const h=["getX","getY","getZ"];for(let d=t;d<t+i;d++){const m=d*3,g=d*6;let v=m+0,p=m+1,A=m+2;s&&(v=s[v],p=s[p],A=s[A]),a||(v=v*f+u,p=p*f+u,A=A*f+u);for(let y=0;y<3;y++){let w,S,C;a?(w=r[h[y]](v),S=r[h[y]](p),C=r[h[y]](A)):(w=c[v+y],S=c[p+y],C=c[A+y]);let b=w;S<b&&(b=S),C<b&&(b=C);let M=w;S>M&&(M=S),C>M&&(M=C);const I=(M-b)/2,T=y*2;l[g+T+0]=b+I,l[g+T+1]=I+(Math.abs(b)+I)*exe}}return l}function Ji(n,e,t){return t.min.x=e[n],t.min.y=e[n+1],t.min.z=e[n+2],t.max.x=e[n+3],t.max.y=e[n+4],t.max.z=e[n+5],t}function tz(n){let e=-1,t=-1/0;for(let i=0;i<3;i++){const r=n[i+3]-n[i];r>t&&(t=r,e=i)}return e}function nz(n,e){e.set(n)}function iz(n,e,t){let i,r;for(let s=0;s<3;s++){const o=s+3;i=n[s],r=e[s],t[s]=i<r?i:r,i=n[o],r=e[o],t[o]=i>r?i:r}}function gx(n,e,t){for(let i=0;i<3;i++){const r=e[n+2*i],s=e[n+2*i+1],o=r-s,a=r+s;o<t[i]&&(t[i]=o),a>t[i+3]&&(t[i+3]=a)}}function W1(n){const e=n[3]-n[0],t=n[4]-n[1],i=n[5]-n[2];return 2*(e*t+t*i+i*e)}const fc=32,rxe=(n,e)=>n.candidate-e.candidate,du=new Array(fc).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Ax=new Float32Array(6);function sxe(n,e,t,i,r,s){let o=-1,a=0;if(s===dY)o=tz(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===Z2e)o=tz(n),o!==-1&&(a=oxe(t,i,r,o));else if(s===Cw){const l=W1(n);let c=u5*r;const u=i*6,f=(i+r)*6;for(let h=0;h<3;h++){const d=e[h],v=(e[h+3]-d)/fc;if(r<fc/4){const p=[...du];p.length=r;let A=0;for(let w=u;w<f;w+=6,A++){const S=p[A];S.candidate=t[w+2*h],S.count=0;const{bounds:C,leftCacheBounds:b,rightCacheBounds:M}=S;for(let I=0;I<3;I++)M[I]=1/0,M[I+3]=-1/0,b[I]=1/0,b[I+3]=-1/0,C[I]=1/0,C[I+3]=-1/0;gx(w,t,C)}p.sort(rxe);let y=r;for(let w=0;w<y;w++){const S=p[w];for(;w+1<y&&p[w+1].candidate===S.candidate;)p.splice(w+1,1),y--}for(let w=u;w<f;w+=6){const S=t[w+2*h];for(let C=0;C<y;C++){const b=p[C];S>=b.candidate?gx(w,t,b.rightCacheBounds):(gx(w,t,b.leftCacheBounds),b.count++)}}for(let w=0;w<y;w++){const S=p[w],C=S.count,b=r-S.count,M=S.leftCacheBounds,I=S.rightCacheBounds;let T=0;C!==0&&(T=W1(M)/l);let D=0;b!==0&&(D=W1(I)/l);const R=ez+u5*(T*C+D*b);R<c&&(o=h,c=R,a=S.candidate)}}else{for(let y=0;y<fc;y++){const w=du[y];w.count=0,w.candidate=d+v+y*v;const S=w.bounds;for(let C=0;C<3;C++)S[C]=1/0,S[C+3]=-1/0}for(let y=u;y<f;y+=6){let C=~~((t[y+2*h]-d)/v);C>=fc&&(C=fc-1);const b=du[C];b.count++,gx(y,t,b.bounds)}const p=du[fc-1];nz(p.bounds,p.rightCacheBounds);for(let y=fc-2;y>=0;y--){const w=du[y],S=du[y+1];iz(w.bounds,S.rightCacheBounds,w.rightCacheBounds)}let A=0;for(let y=0;y<fc-1;y++){const w=du[y],S=w.count,C=w.bounds,M=du[y+1].rightCacheBounds;S!==0&&(A===0?nz(C,Ax):iz(C,Ax,Ax)),A+=S;let I=0,T=0;A!==0&&(I=W1(Ax)/l);const D=r-A;D!==0&&(T=W1(M)/l);const R=ez+u5*(I*A+T*D);R<c&&(o=h,c=R,a=w.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function oxe(n,e,t,i){let r=0;for(let s=e,o=e+t;s<o;s++)r+=n[s*6+i*2];return r/t}class d5{constructor(){this.boundingData=new Float32Array(6)}}function axe(n,e,t,i,r,s){let o=i,a=i+r-1;const l=s.pos,c=s.axis*2;for(;;){for(;o<=a&&t[o*6+c]<l;)o++;for(;o<=a&&t[a*6+c]>=l;)a--;if(o<a){for(let u=0;u<3;u++){let f=e[o*3+u];e[o*3+u]=e[a*3+u],e[a*3+u]=f}for(let u=0;u<6;u++){let f=t[o*6+u];t[o*6+u]=t[a*6+u],t[a*6+u]=f}o++,a--}else return o}}function lxe(n,e,t,i,r,s){let o=i,a=i+r-1;const l=s.pos,c=s.axis*2;for(;;){for(;o<=a&&t[o*6+c]<l;)o++;for(;o<=a&&t[a*6+c]>=l;)a--;if(o<a){let u=n[o];n[o]=n[a],n[a]=u;for(let f=0;f<6;f++){let h=t[o*6+f];t[o*6+f]=t[a*6+f],t[a*6+f]=h}o++,a--}else return o}}function Ts(n,e){return e[n+15]===65535}function Zs(n,e){return e[n+6]}function _o(n,e){return e[n+14]}function ua(n){return n+8}function Eo(n,e){return e[n+6]}function Z8(n,e){return e[n+7]}let vY,Ag,__,yY;const cxe=Math.pow(2,32);function L6(n){return"count"in n?1:1+L6(n.left)+L6(n.right)}function uxe(n,e,t){return vY=new Float32Array(t),Ag=new Uint32Array(t),__=new Uint16Array(t),yY=new Uint8Array(t),F6(n,e)}function F6(n,e){const t=n/4,i=n/2,r="count"in e,s=e.boundingData;for(let o=0;o<6;o++)vY[t+o]=s[o];if(r)if(e.buffer){const o=e.buffer;yY.set(new Uint8Array(o),n);for(let a=n,l=n+o.byteLength;a<l;a+=Ku){const c=a/2;Ts(c,__)||(Ag[a/4+6]+=t)}return n+o.byteLength}else{const o=e.offset,a=e.count;return Ag[t+6]=o,__[i+14]=a,__[i+15]=bw,n+Ku}else{const o=e.left,a=e.right,l=e.splitAxis;let c;if(c=F6(n+Ku,o),c/4>cxe)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return Ag[t+6]=c/4,c=F6(c,a),Ag[t+7]=l,c}}function fxe(n,e){const t=(n.index?n.index.count:n.attributes.position.count)/3,i=t>2**16,r=i?4:2,s=e?new SharedArrayBuffer(t*r):new ArrayBuffer(t*r),o=i?new Uint32Array(s):new Uint16Array(s);for(let a=0,l=o.length;a<l;a++)o[a]=a;return o}function hxe(n,e,t,i,r){const{maxDepth:s,verbose:o,maxLeafTris:a,strategy:l,onProgress:c,indirect:u}=r,f=n._indirectBuffer,h=n.geometry,d=h.index?h.index.array:null,m=u?lxe:axe,g=v0(h),v=new Float32Array(6);let p=!1;const A=new d5;return h5(e,t,i,A.boundingData,v),w(A,t,i,v),A;function y(S){c&&c(S/g)}function w(S,C,b,M=null,I=0){if(!p&&I>=s&&(p=!0,o&&(console.warn(`MeshBVH: Max depth of ${s} reached when generating BVH. Consider increasing maxDepth.`),console.warn(h))),b<=a||I>=s)return y(C+b),S.offset=C,S.count=b,S;const T=sxe(S.boundingData,M,e,C,b,l);if(T.axis===-1)return y(C+b),S.offset=C,S.count=b,S;const D=m(f,d,e,C,b,T);if(D===C||D===C+b)y(C+b),S.offset=C,S.count=b;else{S.splitAxis=T.axis;const R=new d5,z=C,L=D-C;S.left=R,h5(e,z,L,R.boundingData,v),w(R,z,L,v,I+1);const H=new d5,J=D,Z=b-L;S.right=H,h5(e,J,Z,H.boundingData,v),w(H,J,Z,v,I+1)}return S}}function dxe(n,e){const t=n.geometry;e.indirect&&(n._indirectBuffer=fxe(t,e.useSharedArrayBuffer),nxe(t)&&!e.verbose&&console.warn('MeshBVH: Provided geometry contains groups that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),n._indirectBuffer||txe(t,e);const i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=ixe(t),s=e.indirect?gY(t):AY(t);n._roots=s.map(o=>{const a=hxe(n,r,o.offset,o.count,e),l=L6(a),c=new i(Ku*l);return uxe(0,a,c),c})}class kc{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,r=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][t];i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}setFromPoints(e,t){let i=1/0,r=-1/0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=e.dot(a);i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}kc.prototype.setFromBox=function(){const n=new F;return function(t,i){const r=i.min,s=i.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){n.x=r.x*l+s.x*(1-l),n.y=r.y*c+s.y*(1-c),n.z=r.z*u+s.z*(1-u);const f=t.dot(n);o=Math.min(f,o),a=Math.max(f,a)}this.min=o,this.max=a}}();const pxe=function(){const n=new F,e=new F,t=new F;return function(r,s,o){const a=r.start,l=n,c=s.start,u=e;t.subVectors(a,c),n.subVectors(r.end,r.start),e.subVectors(s.end,s.start);const f=t.dot(u),h=u.dot(l),d=u.dot(u),m=t.dot(l),v=l.dot(l)*d-h*h;let p,A;v!==0?p=(f*h-m*d)/v:p=0,A=(f+p*h)/d,o.x=p,o.y=A}}(),e9=function(){const n=new Se,e=new F,t=new F;return function(r,s,o,a){pxe(r,s,n);let l=n.x,c=n.y;if(l>=0&&l<=1&&c>=0&&c<=1){r.at(l,o),s.at(c,a);return}else if(l>=0&&l<=1){c<0?s.at(0,a):s.at(1,a),r.closestPointToPoint(a,!0,o);return}else if(c>=0&&c<=1){l<0?r.at(0,o):r.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let u;l<0?u=r.start:u=r.end;let f;c<0?f=s.start:f=s.end;const h=e,d=t;if(r.closestPointToPoint(f,!0,e),s.closestPointToPoint(u,!0,t),h.distanceToSquared(f)<=d.distanceToSquared(u)){o.copy(h),a.copy(f);return}else{o.copy(u),a.copy(d);return}}}}(),mxe=function(){const n=new F,e=new F,t=new Hr,i=new $a;return function(s,o){const{radius:a,center:l}=s,{a:c,b:u,c:f}=o;if(i.start=c,i.end=u,i.closestPointToPoint(l,!0,n).distanceTo(l)<=a||(i.start=c,i.end=f,i.closestPointToPoint(l,!0,n).distanceTo(l)<=a)||(i.start=u,i.end=f,i.closestPointToPoint(l,!0,n).distanceTo(l)<=a))return!0;const g=o.getPlane(t);if(Math.abs(g.distanceToPoint(l))<=a){const p=g.projectPoint(l,e);if(o.containsPoint(p))return!0}return!1}}(),gxe=1e-15;function p5(n){return Math.abs(n)<gxe}class nl extends vr{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new F),this.satBounds=new Array(4).fill().map(()=>new kc),this.points=[this.a,this.b,this.c],this.sphere=new Bi,this.plane=new Hr,this.needsUpdate=!0}intersectsSphere(e){return mxe(e,this)}update(){const e=this.a,t=this.b,i=this.c,r=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,r);const c=s[1],u=o[1];c.subVectors(e,t),u.setFromPoints(c,r);const f=s[2],h=o[2];f.subVectors(t,i),h.setFromPoints(f,r);const d=s[3],m=o[3];d.subVectors(i,e),m.setFromPoints(d,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}nl.prototype.closestPointToSegment=function(){const n=new F,e=new F,t=new $a;return function(r,s=null,o=null){const{start:a,end:l}=r,c=this.points;let u,f=1/0;for(let h=0;h<3;h++){const d=(h+1)%3;t.start.copy(c[h]),t.end.copy(c[d]),e9(t,r,n,e),u=n.distanceToSquared(e),u<f&&(f=u,s&&s.copy(n),o&&o.copy(e))}return this.closestPointToPoint(a,n),u=a.distanceToSquared(n),u<f&&(f=u,s&&s.copy(n),o&&o.copy(a)),this.closestPointToPoint(l,n),u=l.distanceToSquared(n),u<f&&(f=u,s&&s.copy(n),o&&o.copy(l)),Math.sqrt(f)}}();nl.prototype.intersectsTriangle=function(){const n=new nl,e=new Array(3),t=new Array(3),i=new kc,r=new kc,s=new F,o=new F,a=new F,l=new F,c=new F,u=new $a,f=new $a,h=new $a,d=new F;function m(g,v,p){const A=g.points;let y=0,w=-1;for(let S=0;S<3;S++){const{start:C,end:b}=u;C.copy(A[S]),b.copy(A[(S+1)%3]),u.delta(o);const M=p5(v.distanceToPoint(C));if(p5(v.normal.dot(o))&&M){p.copy(u),y=2;break}const I=v.intersectLine(u,d);if(!I&&M&&d.copy(C),(I||M)&&!p5(d.distanceTo(b))){if(y<=1)(y===1?p.start:p.end).copy(d),M&&(w=y);else if(y>=2){(w===1?p.start:p.end).copy(d),y=2;break}if(y++,y===2&&w===-1)break}}return y}return function(v,p=null,A=!1){this.needsUpdate&&this.update(),v.isExtendedTriangle?v.needsUpdate&&v.update():(n.copy(v),n.update(),v=n);const y=this.plane,w=v.plane;if(Math.abs(y.normal.dot(w.normal))>1-1e-10){const S=this.satBounds,C=this.satAxes;t[0]=v.a,t[1]=v.b,t[2]=v.c;for(let I=0;I<4;I++){const T=S[I],D=C[I];if(i.setFromPoints(D,t),T.isSeparated(i))return!1}const b=v.satBounds,M=v.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let I=0;I<4;I++){const T=b[I],D=M[I];if(i.setFromPoints(D,e),T.isSeparated(i))return!1}for(let I=0;I<4;I++){const T=C[I];for(let D=0;D<4;D++){const R=M[D];if(s.crossVectors(T,R),i.setFromPoints(s,e),r.setFromPoints(s,t),i.isSeparated(r))return!1}}return p&&(A||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{const S=m(this,w,f);if(S===1&&v.containsPoint(f.end))return p&&(p.start.copy(f.end),p.end.copy(f.end)),!0;if(S!==2)return!1;const C=m(v,y,h);if(C===1&&this.containsPoint(h.end))return p&&(p.start.copy(h.end),p.end.copy(h.end)),!0;if(C!==2)return!1;if(f.delta(a),h.delta(l),a.dot(l)<0){let z=h.start;h.start=h.end,h.end=z}const b=f.start.dot(a),M=f.end.dot(a),I=h.start.dot(a),T=h.end.dot(a),D=M<I,R=b<T;return b!==T&&I!==M&&D===R?!1:(p&&(c.subVectors(f.start,h.start),c.dot(a)>0?p.start.copy(f.start):p.start.copy(h.start),c.subVectors(f.end,h.end),c.dot(a)<0?p.end.copy(f.end):p.end.copy(h.end)),!0)}}}();nl.prototype.distanceToPoint=function(){const n=new F;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();nl.prototype.distanceToTriangle=function(){const n=new F,e=new F,t=["a","b","c"],i=new $a,r=new $a;return function(o,a=null,l=null){const c=a||l?i:null;if(this.intersectsTriangle(o,c))return(a||l)&&(a&&c.getCenter(a),l&&c.getCenter(l)),0;let u=1/0;for(let f=0;f<3;f++){let h;const d=t[f],m=o[d];this.closestPointToPoint(m,n),h=m.distanceToSquared(n),h<u&&(u=h,a&&a.copy(n),l&&l.copy(m));const g=this[d];o.closestPointToPoint(g,n),h=g.distanceToSquared(n),h<u&&(u=h,a&&a.copy(g),l&&l.copy(n))}for(let f=0;f<3;f++){const h=t[f],d=t[(f+1)%3];i.set(this[h],this[d]);for(let m=0;m<3;m++){const g=t[m],v=t[(m+1)%3];r.set(o[g],o[v]),e9(i,r,n,e);const p=n.distanceToSquared(e);p<u&&(u=p,a&&a.copy(n),l&&l.copy(e))}}return Math.sqrt(u)}}();class zs{constructor(e,t,i){this.isOrientedBox=!0,this.min=new F,this.max=new F,this.matrix=new He,this.invMatrix=new He,this.points=new Array(8).fill().map(()=>new F),this.satAxes=new Array(3).fill().map(()=>new F),this.satBounds=new Array(3).fill().map(()=>new kc),this.alignedSatBounds=new Array(3).fill().map(()=>new kc),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),i&&this.matrix.copy(i)}set(e,t,i){this.min.copy(e),this.max.copy(t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}zs.prototype.update=function(){return function(){const e=this.matrix,t=this.min,i=this.max,r=this.points;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let f=0;f<=1;f++){const h=1*c|2*u|4*f,d=r[h];d.x=c?i.x:t.x,d.y=u?i.y:t.y,d.z=f?i.z:t.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=r[0];for(let c=0;c<3;c++){const u=o[c],f=s[c],h=1<<c,d=r[h];u.subVectors(a,d),f.setFromPoints(u,r)}const l=this.alignedSatBounds;l[0].setFromPointsField(r,"x"),l[1].setFromPointsField(r,"y"),l[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();zs.prototype.intersectsBox=function(){const n=new kc;return function(t){this.needsUpdate&&this.update();const i=t.min,r=t.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(n.min=i.x,n.max=r.x,a[0].isSeparated(n)||(n.min=i.y,n.max=r.y,a[1].isSeparated(n))||(n.min=i.z,n.max=r.z,a[2].isSeparated(n)))return!1;for(let l=0;l<3;l++){const c=o[l],u=s[l];if(n.setFromBox(c,t),u.isSeparated(n))return!1}return!0}}();zs.prototype.intersectsTriangle=function(){const n=new nl,e=new Array(3),t=new kc,i=new kc,r=new F;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(n.copy(o),n.update(),o=n);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let h=0;h<3;h++){const d=a[h],m=l[h];if(t.setFromPoints(m,e),d.isSeparated(t))return!1}const c=o.satBounds,u=o.satAxes,f=this.points;for(let h=0;h<3;h++){const d=c[h],m=u[h];if(t.setFromPoints(m,f),d.isSeparated(t))return!1}for(let h=0;h<3;h++){const d=l[h];for(let m=0;m<4;m++){const g=u[m];if(r.crossVectors(d,g),t.setFromPoints(r,e),i.setFromPoints(r,f),t.isSeparated(i))return!1}}return!0}}();zs.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();zs.prototype.distanceToPoint=function(){const n=new F;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();zs.prototype.distanceToBox=function(){const n=["x","y","z"],e=new Array(12).fill().map(()=>new $a),t=new Array(12).fill().map(()=>new $a),i=new F,r=new F;return function(o,a=0,l=null,c=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||c)&&(o.getCenter(r),this.closestPointToPoint(r,i),o.closestPointToPoint(i,r),l&&l.copy(i),c&&c.copy(r)),0;const u=a*a,f=o.min,h=o.max,d=this.points;let m=1/0;for(let v=0;v<8;v++){const p=d[v];r.copy(p).clamp(f,h);const A=p.distanceToSquared(r);if(A<m&&(m=A,l&&l.copy(p),c&&c.copy(r),A<u))return Math.sqrt(A)}let g=0;for(let v=0;v<3;v++)for(let p=0;p<=1;p++)for(let A=0;A<=1;A++){const y=(v+1)%3,w=(v+2)%3,S=p<<y|A<<w,C=1<<v|p<<y|A<<w,b=d[S],M=d[C];e[g].set(b,M);const T=n[v],D=n[y],R=n[w],z=t[g],L=z.start,H=z.end;L[T]=f[T],L[D]=p?f[D]:h[D],L[R]=A?f[R]:h[D],H[T]=h[T],H[D]=p?f[D]:h[D],H[R]=A?f[R]:h[D],g++}for(let v=0;v<=1;v++)for(let p=0;p<=1;p++)for(let A=0;A<=1;A++){r.x=v?h.x:f.x,r.y=p?h.y:f.y,r.z=A?h.z:f.z,this.closestPointToPoint(r,i);const y=r.distanceToSquared(i);if(y<m&&(m=y,l&&l.copy(i),c&&c.copy(r),y<u))return Math.sqrt(y)}for(let v=0;v<12;v++){const p=e[v];for(let A=0;A<12;A++){const y=t[A];e9(p,y,i,r);const w=i.distanceToSquared(r);if(w<m&&(m=w,l&&l.copy(i),c&&c.copy(r),w<u))return Math.sqrt(w)}}return Math.sqrt(m)}}();class t9{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class Axe extends t9{constructor(){super(()=>new nl)}}const fa=new Axe;class vxe{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let t=null;this.setBuffer=i=>{t&&e.push(t),t=i,this.float32Array=new Float32Array(i),this.uint16Array=new Uint16Array(i),this.uint32Array=new Uint32Array(i)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const Ti=new vxe;let Du,fm;const yp=[],vx=new t9(()=>new Gn);function yxe(n,e,t,i,r,s){Du=vx.getPrimitive(),fm=vx.getPrimitive(),yp.push(Du,fm),Ti.setBuffer(n._roots[e]);const o=O6(0,n.geometry,t,i,r,s);Ti.clearBuffer(),vx.releasePrimitive(Du),vx.releasePrimitive(fm),yp.pop(),yp.pop();const a=yp.length;return a>0&&(fm=yp[a-1],Du=yp[a-2]),o}function O6(n,e,t,i,r=null,s=0,o=0){const{float32Array:a,uint16Array:l,uint32Array:c}=Ti;let u=n*2;if(Ts(u,l)){const h=Zs(n,c),d=_o(u,l);return Ji(n,a,Du),i(h,d,!1,o,s+n,Du)}else{let T=function(R){const{uint16Array:z,uint32Array:L}=Ti;let H=R*2;for(;!Ts(H,z);)R=ua(R),H=R*2;return Zs(R,L)},D=function(R){const{uint16Array:z,uint32Array:L}=Ti;let H=R*2;for(;!Ts(H,z);)R=Eo(R,L),H=R*2;return Zs(R,L)+_o(H,z)};const h=ua(n),d=Eo(n,c);let m=h,g=d,v,p,A,y;if(r&&(A=Du,y=fm,Ji(m,a,A),Ji(g,a,y),v=r(A),p=r(y),p<v)){m=d,g=h;const R=v;v=p,p=R,A=y}A||(A=Du,Ji(m,a,A));const w=Ts(m*2,l),S=t(A,w,v,o+1,s+m);let C;if(S===ZO){const R=T(m),L=D(m)-R;C=i(R,L,!0,o+1,s+m,A)}else C=S&&O6(m,e,t,i,r,s,o+1);if(C)return!0;y=fm,Ji(g,a,y);const b=Ts(g*2,l),M=t(y,b,p,o+1,s+g);let I;if(M===ZO){const R=T(g),L=D(g)-R;I=i(R,L,!0,o+1,s+g,y)}else I=M&&O6(g,e,t,i,r,s,o+1);return!!I}}const Y1=new F,m5=new F;function xxe(n,e,t={},i=0,r=1/0){const s=i*i,o=r*r;let a=1/0,l=null;if(n.shapecast({boundsTraverseOrder:u=>(Y1.copy(e).clamp(u.min,u.max),Y1.distanceToSquared(e)),intersectsBounds:(u,f,h)=>h<a&&h<o,intersectsTriangle:(u,f)=>{u.closestPointToPoint(e,Y1);const h=e.distanceToSquared(Y1);return h<a&&(m5.copy(Y1),a=h,l=f),h<s}}),a===1/0)return null;const c=Math.sqrt(a);return t.point?t.point.copy(m5):t.point=m5.clone(),t.distance=c,t.faceIndex=l,t}const xp=new F,_p=new F,Ep=new F,yx=new Se,xx=new Se,_x=new Se,rz=new F,sz=new F,oz=new F,Ex=new F;function _xe(n,e,t,i,r,s,o,a){let l;if(s===er?l=n.intersectTriangle(i,t,e,!0,r):l=n.intersectTriangle(e,t,i,s!==ni,r),l===null)return null;const c=n.origin.distanceTo(r);return c<o||c>a?null:{distance:c,point:r.clone()}}function Exe(n,e,t,i,r,s,o,a,l,c,u){xp.fromBufferAttribute(e,s),_p.fromBufferAttribute(e,o),Ep.fromBufferAttribute(e,a);const f=_xe(n,xp,_p,Ep,Ex,l,c,u);if(f){i&&(yx.fromBufferAttribute(i,s),xx.fromBufferAttribute(i,o),_x.fromBufferAttribute(i,a),f.uv=vr.getInterpolation(Ex,xp,_p,Ep,yx,xx,_x,new Se)),r&&(yx.fromBufferAttribute(r,s),xx.fromBufferAttribute(r,o),_x.fromBufferAttribute(r,a),f.uv1=vr.getInterpolation(Ex,xp,_p,Ep,yx,xx,_x,new Se)),t&&(rz.fromBufferAttribute(t,s),sz.fromBufferAttribute(t,o),oz.fromBufferAttribute(t,a),f.normal=vr.getInterpolation(Ex,xp,_p,Ep,rz,sz,oz,new F),f.normal.dot(n.direction)>0&&f.normal.multiplyScalar(-1));const h={a:s,b:o,c:a,normal:new F,materialIndex:0};vr.getNormal(xp,_p,Ep,h.normal),f.face=h,f.faceIndex=s}return f}function Mw(n,e,t,i,r,s,o){const a=i*3;let l=a+0,c=a+1,u=a+2;const f=n.index;n.index&&(l=f.getX(l),c=f.getX(c),u=f.getX(u));const{position:h,normal:d,uv:m,uv1:g}=n.attributes,v=Exe(t,h,d,m,g,l,c,u,e,s,o);return v?(v.faceIndex=i,r&&r.push(v),v):null}function _r(n,e,t,i){const r=n.a,s=n.b,o=n.c;let a=e,l=e+1,c=e+2;t&&(a=t.getX(a),l=t.getX(l),c=t.getX(c)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function wxe(n,e,t,i,r,s,o,a){const{geometry:l,_indirectBuffer:c}=n;for(let u=i,f=i+r;u<f;u++)Mw(l,e,t,u,s,o,a)}function Sxe(n,e,t,i,r,s,o){const{geometry:a,_indirectBuffer:l}=n;let c=1/0,u=null;for(let f=i,h=i+r;f<h;f++){let d;d=Mw(a,e,t,f,null,s,o),d&&d.distance<c&&(u=d,c=d.distance)}return u}function Cxe(n,e,t,i,r,s,o){const{geometry:a}=t,{index:l}=a,c=a.attributes.position;for(let u=n,f=e+n;u<f;u++){let h;if(h=u,_r(o,h*3,l,c),o.needsUpdate=!0,i(o,h,r,s))return!0}return!1}function bxe(n,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=n.geometry,i=t.index?t.index.array:null,r=t.attributes.position;let s,o,a,l,c=0;const u=n._roots;for(let h=0,d=u.length;h<d;h++)s=u[h],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),f(0,c),c+=s.byteLength;function f(h,d,m=!1){const g=h*2;if(a[g+15]===bw){const p=o[h+6],A=a[g+14];let y=1/0,w=1/0,S=1/0,C=-1/0,b=-1/0,M=-1/0;for(let I=3*p,T=3*(p+A);I<T;I++){let D=i[I];const R=r.getX(D),z=r.getY(D),L=r.getZ(D);R<y&&(y=R),R>C&&(C=R),z<w&&(w=z),z>b&&(b=z),L<S&&(S=L),L>M&&(M=L)}return l[h+0]!==y||l[h+1]!==w||l[h+2]!==S||l[h+3]!==C||l[h+4]!==b||l[h+5]!==M?(l[h+0]=y,l[h+1]=w,l[h+2]=S,l[h+3]=C,l[h+4]=b,l[h+5]=M,!0):!1}else{const p=h+8,A=o[h+6],y=p+d,w=A+d;let S=m,C=!1,b=!1;e?S||(C=e.has(y),b=e.has(w),S=!C&&!b):(C=!0,b=!0);const M=S||C,I=S||b;let T=!1;M&&(T=f(p,d,S));let D=!1;I&&(D=f(A,d,S));const R=T||D;if(R)for(let z=0;z<3;z++){const L=p+z,H=A+z,J=l[L],Z=l[L+3],U=l[H],X=l[H+3];l[h+z]=J<U?J:U,l[h+z+3]=Z>X?Z:X}return R}}}function hf(n,e,t,i,r){let s,o,a,l,c,u;const f=1/t.direction.x,h=1/t.direction.y,d=1/t.direction.z,m=t.origin.x,g=t.origin.y,v=t.origin.z;let p=e[n],A=e[n+3],y=e[n+1],w=e[n+3+1],S=e[n+2],C=e[n+3+2];return f>=0?(s=(p-m)*f,o=(A-m)*f):(s=(A-m)*f,o=(p-m)*f),h>=0?(a=(y-g)*h,l=(w-g)*h):(a=(w-g)*h,l=(y-g)*h),s>l||a>o||((a>s||isNaN(s))&&(s=a),(l<o||isNaN(o))&&(o=l),d>=0?(c=(S-v)*d,u=(C-v)*d):(c=(C-v)*d,u=(S-v)*d),s>u||c>o)?!1:((c>s||s!==s)&&(s=c),(u<o||o!==o)&&(o=u),s<=r&&o>=i)}function Mxe(n,e,t,i,r,s,o,a){const{geometry:l,_indirectBuffer:c}=n;for(let u=i,f=i+r;u<f;u++){let h=c?c[u]:u;Mw(l,e,t,h,s,o,a)}}function Ixe(n,e,t,i,r,s,o){const{geometry:a,_indirectBuffer:l}=n;let c=1/0,u=null;for(let f=i,h=i+r;f<h;f++){let d;d=Mw(a,e,t,l?l[f]:f,null,s,o),d&&d.distance<c&&(u=d,c=d.distance)}return u}function Txe(n,e,t,i,r,s,o){const{geometry:a}=t,{index:l}=a,c=a.attributes.position;for(let u=n,f=e+n;u<f;u++){let h;if(h=t.resolveTriangleIndex(u),_r(o,h*3,l,c),o.needsUpdate=!0,i(o,h,r,s))return!0}return!1}function Bxe(n,e,t,i,r,s,o){Ti.setBuffer(n._roots[e]),z6(0,n,t,i,r,s,o),Ti.clearBuffer()}function z6(n,e,t,i,r,s,o){const{float32Array:a,uint16Array:l,uint32Array:c}=Ti,u=n*2;if(Ts(u,l)){const h=Zs(n,c),d=_o(u,l);wxe(e,t,i,h,d,r,s,o)}else{const h=ua(n);hf(h,a,i,s,o)&&z6(h,e,t,i,r,s,o);const d=Eo(n,c);hf(d,a,i,s,o)&&z6(d,e,t,i,r,s,o)}}const Pxe=["x","y","z"];function Rxe(n,e,t,i,r,s){Ti.setBuffer(n._roots[e]);const o=U6(0,n,t,i,r,s);return Ti.clearBuffer(),o}function U6(n,e,t,i,r,s){const{float32Array:o,uint16Array:a,uint32Array:l}=Ti;let c=n*2;if(Ts(c,a)){const f=Zs(n,l),h=_o(c,a);return Sxe(e,t,i,f,h,r,s)}else{const f=Z8(n,l),h=Pxe[f],m=i.direction[h]>=0;let g,v;m?(g=ua(n),v=Eo(n,l)):(g=Eo(n,l),v=ua(n));const A=hf(g,o,i,r,s)?U6(g,e,t,i,r,s):null;if(A){const S=A.point[h];if(m?S<=o[v+f]:S>=o[v+f+3])return A}const w=hf(v,o,i,r,s)?U6(v,e,t,i,r,s):null;return A&&w?A.distance<=w.distance?A:w:A||w||null}}const wx=new Gn,wp=new nl,Sp=new nl,X1=new He,az=new zs,Sx=new zs;function Dxe(n,e,t,i){Ti.setBuffer(n._roots[e]);const r=k6(0,n,t,i);return Ti.clearBuffer(),r}function k6(n,e,t,i,r=null){const{float32Array:s,uint16Array:o,uint32Array:a}=Ti;let l=n*2;if(r===null&&(t.boundingBox||t.computeBoundingBox(),az.set(t.boundingBox.min,t.boundingBox.max,i),r=az),Ts(l,o)){const u=e.geometry,f=u.index,h=u.attributes.position,d=t.index,m=t.attributes.position,g=Zs(n,a),v=_o(l,o);if(X1.copy(i).invert(),t.boundsTree)return Ji(n,s,Sx),Sx.matrix.copy(X1),Sx.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:A=>Sx.intersectsBox(A),intersectsTriangle:A=>{A.a.applyMatrix4(i),A.b.applyMatrix4(i),A.c.applyMatrix4(i),A.needsUpdate=!0;for(let y=g*3,w=(v+g)*3;y<w;y+=3)if(_r(Sp,y,f,h),Sp.needsUpdate=!0,A.intersectsTriangle(Sp))return!0;return!1}});for(let p=g*3,A=(v+g)*3;p<A;p+=3){_r(wp,p,f,h),wp.a.applyMatrix4(X1),wp.b.applyMatrix4(X1),wp.c.applyMatrix4(X1),wp.needsUpdate=!0;for(let y=0,w=d.count;y<w;y+=3)if(_r(Sp,y,d,m),Sp.needsUpdate=!0,wp.intersectsTriangle(Sp))return!0}}else{const u=n+8,f=a[n+6];return Ji(u,s,wx),!!(r.intersectsBox(wx)&&k6(u,e,t,i,r)||(Ji(f,s,wx),r.intersectsBox(wx)&&k6(f,e,t,i,r)))}}const Cx=new He,g5=new zs,q1=new zs,Lxe=new F,Fxe=new F,Oxe=new F,zxe=new F;function Uxe(n,e,t,i={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),g5.set(e.boundingBox.min,e.boundingBox.max,t),g5.needsUpdate=!0;const a=n.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,f=e.index,h=fa.getPrimitive(),d=fa.getPrimitive();let m=Lxe,g=Fxe,v=null,p=null;r&&(v=Oxe,p=zxe);let A=1/0,y=null,w=null;return Cx.copy(t).invert(),q1.matrix.copy(Cx),n.shapecast({boundsTraverseOrder:S=>g5.distanceToBox(S),intersectsBounds:(S,C,b)=>b<A&&b<o?(C&&(q1.min.copy(S.min),q1.max.copy(S.max),q1.needsUpdate=!0),!0):!1,intersectsRange:(S,C)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:M=>q1.distanceToBox(M),intersectsBounds:(M,I,T)=>T<A&&T<o,intersectsRange:(M,I)=>{for(let T=M,D=M+I;T<D;T++){_r(d,3*T,f,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let R=S,z=S+C;R<z;R++){_r(h,3*R,c,l),h.needsUpdate=!0;const L=h.distanceToTriangle(d,m,v);if(L<A&&(g.copy(m),p&&p.copy(v),A=L,y=R,w=T),L<s)return!0}}}});{const b=v0(e);for(let M=0,I=b;M<I;M++){_r(d,3*M,f,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let T=S,D=S+C;T<D;T++){_r(h,3*T,c,l),h.needsUpdate=!0;const R=h.distanceToTriangle(d,m,v);if(R<A&&(g.copy(m),p&&p.copy(v),A=R,y=T,w=M),R<s)return!0}}}}}),fa.releasePrimitive(h),fa.releasePrimitive(d),A===1/0?null:(i.point?i.point.copy(g):i.point=g.clone(),i.distance=A,i.faceIndex=y,r&&(r.point?r.point.copy(p):r.point=p.clone(),r.point.applyMatrix4(Cx),g.applyMatrix4(Cx),r.distance=g.sub(r.point).length(),r.faceIndex=w),i)}function kxe(n,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=n.geometry,i=t.index?t.index.array:null,r=t.attributes.position;let s,o,a,l,c=0;const u=n._roots;for(let h=0,d=u.length;h<d;h++)s=u[h],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),f(0,c),c+=s.byteLength;function f(h,d,m=!1){const g=h*2;if(a[g+15]===bw){const p=o[h+6],A=a[g+14];let y=1/0,w=1/0,S=1/0,C=-1/0,b=-1/0,M=-1/0;for(let I=p,T=p+A;I<T;I++){const D=3*n.resolveTriangleIndex(I);for(let R=0;R<3;R++){let z=D+R;z=i?i[z]:z;const L=r.getX(z),H=r.getY(z),J=r.getZ(z);L<y&&(y=L),L>C&&(C=L),H<w&&(w=H),H>b&&(b=H),J<S&&(S=J),J>M&&(M=J)}}return l[h+0]!==y||l[h+1]!==w||l[h+2]!==S||l[h+3]!==C||l[h+4]!==b||l[h+5]!==M?(l[h+0]=y,l[h+1]=w,l[h+2]=S,l[h+3]=C,l[h+4]=b,l[h+5]=M,!0):!1}else{const p=h+8,A=o[h+6],y=p+d,w=A+d;let S=m,C=!1,b=!1;e?S||(C=e.has(y),b=e.has(w),S=!C&&!b):(C=!0,b=!0);const M=S||C,I=S||b;let T=!1;M&&(T=f(p,d,S));let D=!1;I&&(D=f(A,d,S));const R=T||D;if(R)for(let z=0;z<3;z++){const L=p+z,H=A+z,J=l[L],Z=l[L+3],U=l[H],X=l[H+3];l[h+z]=J<U?J:U,l[h+z+3]=Z>X?Z:X}return R}}}function Nxe(n,e,t,i,r,s,o){Ti.setBuffer(n._roots[e]),N6(0,n,t,i,r,s,o),Ti.clearBuffer()}function N6(n,e,t,i,r,s,o){const{float32Array:a,uint16Array:l,uint32Array:c}=Ti,u=n*2;if(Ts(u,l)){const h=Zs(n,c),d=_o(u,l);Mxe(e,t,i,h,d,r,s,o)}else{const h=ua(n);hf(h,a,i,s,o)&&N6(h,e,t,i,r,s,o);const d=Eo(n,c);hf(d,a,i,s,o)&&N6(d,e,t,i,r,s,o)}}const Gxe=["x","y","z"];function Hxe(n,e,t,i,r,s){Ti.setBuffer(n._roots[e]);const o=G6(0,n,t,i,r,s);return Ti.clearBuffer(),o}function G6(n,e,t,i,r,s){const{float32Array:o,uint16Array:a,uint32Array:l}=Ti;let c=n*2;if(Ts(c,a)){const f=Zs(n,l),h=_o(c,a);return Ixe(e,t,i,f,h,r,s)}else{const f=Z8(n,l),h=Gxe[f],m=i.direction[h]>=0;let g,v;m?(g=ua(n),v=Eo(n,l)):(g=Eo(n,l),v=ua(n));const A=hf(g,o,i,r,s)?G6(g,e,t,i,r,s):null;if(A){const S=A.point[h];if(m?S<=o[v+f]:S>=o[v+f+3])return A}const w=hf(v,o,i,r,s)?G6(v,e,t,i,r,s):null;return A&&w?A.distance<=w.distance?A:w:A||w||null}}const bx=new Gn,Cp=new nl,bp=new nl,J1=new He,lz=new zs,Mx=new zs;function Qxe(n,e,t,i){Ti.setBuffer(n._roots[e]);const r=H6(0,n,t,i);return Ti.clearBuffer(),r}function H6(n,e,t,i,r=null){const{float32Array:s,uint16Array:o,uint32Array:a}=Ti;let l=n*2;if(r===null&&(t.boundingBox||t.computeBoundingBox(),lz.set(t.boundingBox.min,t.boundingBox.max,i),r=lz),Ts(l,o)){const u=e.geometry,f=u.index,h=u.attributes.position,d=t.index,m=t.attributes.position,g=Zs(n,a),v=_o(l,o);if(J1.copy(i).invert(),t.boundsTree)return Ji(n,s,Mx),Mx.matrix.copy(J1),Mx.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:A=>Mx.intersectsBox(A),intersectsTriangle:A=>{A.a.applyMatrix4(i),A.b.applyMatrix4(i),A.c.applyMatrix4(i),A.needsUpdate=!0;for(let y=g,w=v+g;y<w;y++)if(_r(bp,3*e.resolveTriangleIndex(y),f,h),bp.needsUpdate=!0,A.intersectsTriangle(bp))return!0;return!1}});for(let p=g,A=v+g;p<A;p++){const y=e.resolveTriangleIndex(p);_r(Cp,3*y,f,h),Cp.a.applyMatrix4(J1),Cp.b.applyMatrix4(J1),Cp.c.applyMatrix4(J1),Cp.needsUpdate=!0;for(let w=0,S=d.count;w<S;w+=3)if(_r(bp,w,d,m),bp.needsUpdate=!0,Cp.intersectsTriangle(bp))return!0}}else{const u=n+8,f=a[n+6];return Ji(u,s,bx),!!(r.intersectsBox(bx)&&H6(u,e,t,i,r)||(Ji(f,s,bx),r.intersectsBox(bx)&&H6(f,e,t,i,r)))}}const Ix=new He,A5=new zs,K1=new zs,Vxe=new F,jxe=new F,Wxe=new F,Yxe=new F;function Xxe(n,e,t,i={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),A5.set(e.boundingBox.min,e.boundingBox.max,t),A5.needsUpdate=!0;const a=n.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,f=e.index,h=fa.getPrimitive(),d=fa.getPrimitive();let m=Vxe,g=jxe,v=null,p=null;r&&(v=Wxe,p=Yxe);let A=1/0,y=null,w=null;return Ix.copy(t).invert(),K1.matrix.copy(Ix),n.shapecast({boundsTraverseOrder:S=>A5.distanceToBox(S),intersectsBounds:(S,C,b)=>b<A&&b<o?(C&&(K1.min.copy(S.min),K1.max.copy(S.max),K1.needsUpdate=!0),!0):!1,intersectsRange:(S,C)=>{if(e.boundsTree){const b=e.boundsTree;return b.shapecast({boundsTraverseOrder:M=>K1.distanceToBox(M),intersectsBounds:(M,I,T)=>T<A&&T<o,intersectsRange:(M,I)=>{for(let T=M,D=M+I;T<D;T++){const R=b.resolveTriangleIndex(T);_r(d,3*R,f,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let z=S,L=S+C;z<L;z++){const H=n.resolveTriangleIndex(z);_r(h,3*H,c,l),h.needsUpdate=!0;const J=h.distanceToTriangle(d,m,v);if(J<A&&(g.copy(m),p&&p.copy(v),A=J,y=z,w=T),J<s)return!0}}}})}else{const b=v0(e);for(let M=0,I=b;M<I;M++){_r(d,3*M,f,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let T=S,D=S+C;T<D;T++){const R=n.resolveTriangleIndex(T);_r(h,3*R,c,l),h.needsUpdate=!0;const z=h.distanceToTriangle(d,m,v);if(z<A&&(g.copy(m),p&&p.copy(v),A=z,y=T,w=M),z<s)return!0}}}}}),fa.releasePrimitive(h),fa.releasePrimitive(d),A===1/0?null:(i.point?i.point.copy(g):i.point=g.clone(),i.distance=A,i.faceIndex=y,r&&(r.point?r.point.copy(p):r.point=p.clone(),r.point.applyMatrix4(Ix),g.applyMatrix4(Ix),r.distance=g.sub(r.point).length(),r.faceIndex=w),i)}function qxe(){return typeof SharedArrayBuffer<"u"}const $g=new Ti.constructor,P3=new Ti.constructor,yu=new t9(()=>new Gn),Mp=new Gn,Ip=new Gn,v5=new Gn,y5=new Gn;let x5=!1;function Jxe(n,e,t,i){if(x5)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");x5=!0;const r=n._roots,s=e._roots;let o,a=0,l=0;const c=new He().copy(t).invert();for(let u=0,f=r.length;u<f;u++){$g.setBuffer(r[u]),l=0;const h=yu.getPrimitive();Ji(0,$g.float32Array,h),h.applyMatrix4(c);for(let d=0,m=s.length;d<m&&(P3.setBuffer(s[u]),o=Fa(0,0,t,c,i,a,l,0,0,h),P3.clearBuffer(),l+=s[d].length,!o);d++);if(yu.releasePrimitive(h),$g.clearBuffer(),a+=r[u].length,o)break}return x5=!1,o}function Fa(n,e,t,i,r,s=0,o=0,a=0,l=0,c=null,u=!1){let f,h;u?(f=P3,h=$g):(f=$g,h=P3);const d=f.float32Array,m=f.uint32Array,g=f.uint16Array,v=h.float32Array,p=h.uint32Array,A=h.uint16Array,y=n*2,w=e*2,S=Ts(y,g),C=Ts(w,A);let b=!1;if(C&&S)u?b=r(Zs(e,p),_o(e*2,A),Zs(n,m),_o(n*2,g),l,o+e,a,s+n):b=r(Zs(n,m),_o(n*2,g),Zs(e,p),_o(e*2,A),a,s+n,l,o+e);else if(C){const M=yu.getPrimitive();Ji(e,v,M),M.applyMatrix4(t);const I=ua(n),T=Eo(n,m);Ji(I,d,Mp),Ji(T,d,Ip);const D=M.intersectsBox(Mp),R=M.intersectsBox(Ip);b=D&&Fa(e,I,i,t,r,o,s,l,a+1,M,!u)||R&&Fa(e,T,i,t,r,o,s,l,a+1,M,!u),yu.releasePrimitive(M)}else{const M=ua(e),I=Eo(e,p);Ji(M,v,v5),Ji(I,v,y5);const T=c.intersectsBox(v5),D=c.intersectsBox(y5);if(T&&D)b=Fa(n,M,t,i,r,s,o,a,l+1,c,u)||Fa(n,I,t,i,r,s,o,a,l+1,c,u);else if(T)if(S)b=Fa(n,M,t,i,r,s,o,a,l+1,c,u);else{const R=yu.getPrimitive();R.copy(v5).applyMatrix4(t);const z=ua(n),L=Eo(n,m);Ji(z,d,Mp),Ji(L,d,Ip);const H=R.intersectsBox(Mp),J=R.intersectsBox(Ip);b=H&&Fa(M,z,i,t,r,o,s,l,a+1,R,!u)||J&&Fa(M,L,i,t,r,o,s,l,a+1,R,!u),yu.releasePrimitive(R)}else if(D)if(S)b=Fa(n,I,t,i,r,s,o,a,l+1,c,u);else{const R=yu.getPrimitive();R.copy(y5).applyMatrix4(t);const z=ua(n),L=Eo(n,m);Ji(z,d,Mp),Ji(L,d,Ip);const H=R.intersectsBox(Mp),J=R.intersectsBox(Ip);b=H&&Fa(I,z,i,t,r,o,s,l,a+1,R,!u)||J&&Fa(I,L,i,t,r,o,s,l,a+1,R,!u),yu.releasePrimitive(R)}}return b}const Tx=new zs,cz=new Gn,Kxe={strategy:dY,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0};class Iw{static serialize(e,t={}){t={cloneBuffers:!0,...t};const i=e.geometry,r=e._roots,s=e._indirectBuffer,o=i.getIndex();let a;return t.cloneBuffers?a={roots:r.map(l=>l.slice()),index:o?o.array.slice():null,indirectBuffer:s?s.slice():null}:a={roots:r,index:o?o.array:null,indirectBuffer:s},a}static deserialize(e,t,i={}){i={setIndex:!0,indirect:!!e.indirectBuffer,...i};const{index:r,roots:s,indirectBuffer:o}=e,a=new Iw(t,{...i,[f5]:!0});if(a._roots=s,a._indirectBuffer=o||null,i.setIndex){const l=t.getIndex();if(l===null){const c=new qt(e.index,1,!1);t.setIndex(c)}else l.array!==r&&(l.array.set(r),l.needsUpdate=!0)}return a}get indirect(){return!!this._indirectBuffer}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({...Kxe,[f5]:!1},t),t.useSharedArrayBuffer&&!qxe())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[f5]||(dxe(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Gn))),this.resolveTriangleIndex=t.indirect?i=>this._indirectBuffer[i]:i=>i}refit(e=null){return(this.indirect?kxe:bxe)(this,e)}traverse(e,t=0){const i=this._roots[t],r=new Uint32Array(i),s=new Uint16Array(i);o(0);function o(a,l=0){const c=a*2,u=s[c+15]===bw;if(u){const f=r[a+6],h=s[c+14];e(l,u,new Float32Array(i,a*4,6),f,h)}else{const f=a+Ku/4,h=r[a+6],d=r[a+7];e(l,u,new Float32Array(i,a*4,6),d)||(o(f,l+1),o(h,l+1))}}}raycast(e,t=Rs,i=0,r=1/0){const s=this._roots,o=this.geometry,a=[],l=t.isMaterial,c=Array.isArray(t),u=o.groups,f=l?t.side:t,h=this.indirect?Nxe:Bxe;for(let d=0,m=s.length;d<m;d++){const g=c?t[u[d].materialIndex].side:f,v=a.length;if(h(this,d,g,e,a,i,r),c){const p=u[d].materialIndex;for(let A=v,y=a.length;A<y;A++)a[A].face.materialIndex=p}}return a}raycastFirst(e,t=Rs,i=0,r=1/0){const s=this._roots,o=this.geometry,a=t.isMaterial,l=Array.isArray(t);let c=null;const u=o.groups,f=a?t.side:t,h=this.indirect?Hxe:Rxe;for(let d=0,m=s.length;d<m;d++){const g=l?t[u[d].materialIndex].side:f,v=h(this,d,g,e,i,r);v!=null&&(c==null||v.distance<c.distance)&&(c=v,l&&(v.face.materialIndex=u[d].materialIndex))}return c}intersectsGeometry(e,t){let i=!1;const r=this._roots,s=this.indirect?Qxe:Dxe;for(let o=0,a=r.length;o<a&&(i=s(this,o,e,t),!i);o++);return i}shapecast(e){const t=fa.getPrimitive(),i=this.indirect?Txe:Cxe;let{boundsTraverseOrder:r,intersectsBounds:s,intersectsRange:o,intersectsTriangle:a}=e;if(o&&a){const f=o;o=(h,d,m,g,v)=>f(h,d,m,g,v)?!0:i(h,d,this,a,m,g,t)}else o||(a?o=(f,h,d,m)=>i(f,h,this,a,d,m,t):o=(f,h,d)=>d);let l=!1,c=0;const u=this._roots;for(let f=0,h=u.length;f<h;f++){const d=u[f];if(l=yxe(this,f,s,o,r,c),l)break;c+=d.byteLength}return fa.releasePrimitive(t),l}bvhcast(e,t,i){let{intersectsRanges:r,intersectsTriangles:s}=i;const o=fa.getPrimitive(),a=this.geometry.index,l=this.geometry.attributes.position,c=this.indirect?m=>{const g=this.resolveTriangleIndex(m);_r(o,g*3,a,l)}:m=>{_r(o,m*3,a,l)},u=fa.getPrimitive(),f=e.geometry.index,h=e.geometry.attributes.position,d=e.indirect?m=>{const g=e.resolveTriangleIndex(m);_r(u,g*3,f,h)}:m=>{_r(u,m*3,f,h)};if(s){const m=(g,v,p,A,y,w,S,C)=>{for(let b=p,M=p+A;b<M;b++){d(b),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let I=g,T=g+v;I<T;I++)if(c(I),o.needsUpdate=!0,s(o,u,I,b,y,w,S,C))return!0}return!1};if(r){const g=r;r=function(v,p,A,y,w,S,C,b){return g(v,p,A,y,w,S,C,b)?!0:m(v,p,A,y,w,S,C,b)}}else r=m}return Jxe(this,e,t,r)}intersectsBox(e,t){return Tx.set(e.min,e.max,t),Tx.needsUpdate=!0,this.shapecast({intersectsBounds:i=>Tx.intersectsBox(i),intersectsTriangle:i=>Tx.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},r={},s=0,o=1/0){return(this.indirect?Xxe:Uxe)(this,e,t,i,r,s,o)}closestPointToPoint(e,t={},i=0,r=1/0){return xxe(this,e,t,i,r)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(i=>{Ji(0,new Float32Array(i),cz),e.union(cz)}),e}}function uz(n,e,t){return n===null?null:(n.point.applyMatrix4(e.matrixWorld),n.distance=n.point.distanceTo(t.ray.origin),n.object=e,n)}const Bx=new xa,fz=new F,hz=new He,dz=new F,$xe=gt.prototype.raycast;function xY(n,e){if(this.geometry.boundsTree){if(this.material===void 0)return;hz.copy(this.matrixWorld).invert(),Bx.copy(n.ray).applyMatrix4(hz),this.getWorldScale(dz),fz.copy(Bx.direction).multiply(dz);const t=fz.length(),i=n.near/t,r=n.far/t,s=this.geometry.boundsTree;if(n.firstHitOnly===!0){const o=uz(s.raycastFirst(Bx,this.material,i,r),this,n);o&&e.push(o)}else{const o=s.raycast(Bx,this.material,i,r);for(let a=0,l=o.length;a<l;a++){const c=uz(o[a],this,n);c&&e.push(c)}}}else $xe.call(this,n,e)}function _Y(n){return this.boundsTree=new Iw(this,n),this.boundsTree}function EY(){this.boundsTree=null}function Zxe(n){switch(n){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function e_e(n){switch(n){case 1:return la;case 2:return Su;case 3:return Vn;case 4:return Vn}}function pz(n){switch(n){case 1:return uE;case 2:return rv;case 3:return Hh;case 4:return Hh}}class wY extends io{constructor(){super(),this.minFilter=dn,this.magFilter=dn,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(e){const t=this.overrideItemSize,i=e.itemSize,r=e.count;if(t!==null){if(i*r%t!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");e.itemSize=t,e.count=r*i/t}const s=e.itemSize,o=e.count,a=e.normalized,l=e.array.constructor,c=l.BYTES_PER_ELEMENT;let u=this._forcedType,f=s;if(u===null)switch(l){case Float32Array:u=Ln;break;case Uint8Array:case Uint16Array:case Uint32Array:u=ps;break;case Int8Array:case Int16Array:case Int32Array:u=bh;break}let h,d,m,g,v=Zxe(s);switch(u){case Ln:m=1,d=e_e(s),a&&c===1?(g=l,v+="8",l===Uint8Array?h=hi:(h=CA,v+="_SNORM")):(g=Float32Array,v+="32F",h=Ln);break;case bh:v+=c*8+"I",m=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=pz(s),c===1?(g=Int8Array,h=CA):c===2?(g=Int16Array,h=cE):(g=Int32Array,h=bh);break;case ps:v+=c*8+"UI",m=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=pz(s),c===1?(g=Uint8Array,h=hi):c===2?(g=Uint16Array,h=Af):(g=Uint32Array,h=ps);break}f===3&&(d===Vn||d===Hh)&&(f=4);const p=Math.ceil(Math.sqrt(o))||1,A=f*p*p,y=new g(A),w=e.normalized;e.normalized=!1;for(let S=0;S<o;S++){const C=f*S;y[C]=e.getX(S)/m,s>=2&&(y[C+1]=e.getY(S)/m),s>=3&&(y[C+2]=e.getZ(S)/m,f===4&&(y[C+3]=1)),s>=4&&(y[C+3]=e.getW(S)/m)}e.normalized=w,this.internalFormat=v,this.format=d,this.type=h,this.image.width=p,this.image.height=p,this.image.data=y,this.needsUpdate=!0,this.dispose(),e.itemSize=i,e.count=r}}class t_e extends wY{constructor(){super(),this._forcedType=ps}}class n_e extends wY{constructor(){super(),this._forcedType=Ln}}class SY{constructor(){this.index=new t_e,this.position=new n_e,this.bvhBounds=new io,this.bvhContents=new io,this._cachedIndexAttr=null,this.index.overrideItemSize=3}updateFrom(e){const{geometry:t}=e;if(r_e(e,this.bvhBounds,this.bvhContents),this.position.updateFrom(t.attributes.position),e.indirect){const i=e._indirectBuffer;if(this._cachedIndexAttr===null||this._cachedIndexAttr.count!==i.length)if(t.index)this._cachedIndexAttr=t.index.clone();else{const r=mY(pY(t));this._cachedIndexAttr=new qt(r,1,!1)}i_e(t,i,this._cachedIndexAttr),this.index.updateFrom(this._cachedIndexAttr)}else this.index.updateFrom(t.index)}dispose(){const{index:e,position:t,bvhBounds:i,bvhContents:r}=this;e&&e.dispose(),t&&t.dispose(),i&&i.dispose(),r&&r.dispose()}}function i_e(n,e,t){const i=t.array,r=n.index?n.index.array:null;for(let s=0,o=e.length;s<o;s++){const a=3*s,l=3*e[s];for(let c=0;c<3;c++)i[a+c]=r?r[l+c]:l+c}}function r_e(n,e,t){const i=n._roots;if(i.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const r=i[0],s=new Uint16Array(r),o=new Uint32Array(r),a=new Float32Array(r),l=r.byteLength/Ku,c=2*Math.ceil(Math.sqrt(l/2)),u=new Float32Array(4*c*c),f=Math.ceil(Math.sqrt(l)),h=new Uint32Array(2*f*f);for(let d=0;d<l;d++){const m=d*Ku/4,g=m*2,v=m;for(let p=0;p<3;p++)u[8*d+0+p]=a[v+0+p],u[8*d+4+p]=a[v+3+p];if(Ts(g,s)){const p=_o(g,s),A=Zs(m,o),y=4294901760|p;h[d*2+0]=y,h[d*2+1]=A}else{const p=4*Eo(m,o)/Ku,A=Z8(m,o);h[d*2+0]=A,h[d*2+1]=p}}e.image.data=u,e.image.width=c,e.image.height=c,e.format=Vn,e.type=Ln,e.internalFormat="RGBA32F",e.minFilter=dn,e.magFilter=dn,e.generateMipmaps=!1,e.needsUpdate=!0,e.dispose(),t.image.data=h,t.image.width=f,t.image.height=f,t.format=rv,t.type=ps,t.internalFormat="RG32UI",t.minFilter=dn,t.magFilter=dn,t.generateMipmaps=!1,t.needsUpdate=!0,t.dispose()}const s_e=`

// A stack of uint32 indices can can store the indices for
// a perfectly balanced tree with a depth up to 31. Lower stack
// depth gets higher performance.
//
// However not all trees are balanced. Best value to set this to
// is the trees max depth.
#ifndef BVH_STACK_DEPTH
#define BVH_STACK_DEPTH 60
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

// Utilities
uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}
`,o_e=`

#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

// Raycasting
bool intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax, out float dist ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	dist = max( t0, 0.0 );

	return t1 >= dist;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	// geometry info and triangle range
	sampler2D positionAttr, usampler2D indexAttr, uint offset, uint count,

	// ray
	vec3 rayOrigin, vec3 rayDirection,

	// outputs
	inout float minDistance, inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( indexAttr, i ).xyz;
		vec3 a = texelFetch1D( positionAttr, indices.x ).rgb;
		vec3 b = texelFetch1D( positionAttr, indices.y ).rgb;
		vec3 c = texelFetch1D( positionAttr, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

bool intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, sampler2D bvhBounds, uint currNodeIndex, out float dist ) {

	uint cni2 = currNodeIndex * 2u;
	vec3 boundsMin = texelFetch1D( bvhBounds, cni2 ).xyz;
	vec3 boundsMax = texelFetch1D( bvhBounds, cni2 + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax, dist );

}

// use a macro to hide the fact that we need to expand the struct into separate fields
#define	bvhIntersectFirstHit(		bvh,		rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist	)	_bvhIntersectFirstHit(		bvh.position, bvh.index, bvh.bvhBounds, bvh.bvhContents,		rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist	)

bool _bvhIntersectFirstHit(
	// bvh info
	sampler2D bvh_position, usampler2D bvh_index, sampler2D bvh_bvhBounds, usampler2D bvh_bvhContents,

	// ray
	vec3 rayOrigin, vec3 rayDirection,

	// output variables split into separate variables due to output precision
	inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ BVH_STACK_DEPTH ];
	stack[ 0 ] = 0u;

	float triangleDistance = INFINITY;
	bool found = false;
	while ( ptr > - 1 && ptr < BVH_STACK_DEPTH ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance;
		if (
			! intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh_bvhBounds, currNodeIndex, boundsHitDistance )
			|| boundsHitDistance > triangleDistance
		) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh_bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh_position, bvh_index, offset, count,
				rayOrigin, rayDirection, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}
`,a_e=`
struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};
`,l_e=a_e,c_e=`
	${s_e}
	${o_e}
`,mz=n=>n.isMesh;function u_e(n,e){e={strategy:Cw,verbose:!1,setBoundingBox:!0,maxDepth:40,maxLeafTris:10,indirect:!1,...e},E.useEffect(()=>{if(n.current){n.current.raycast=xY;const t=n.current.geometry;return t.computeBoundsTree=_Y,t.disposeBoundsTree=EY,t.computeBoundsTree(e),()=>{t.boundsTree&&t.disposeBoundsTree()}}},[n,JSON.stringify(e)])}const f_e=E.forwardRef(({enabled:n=!0,firstHitOnly:e=!1,children:t,strategy:i=Cw,verbose:r=!1,setBoundingBox:s=!0,maxDepth:o=40,maxLeafTris:a=10,indirect:l=!1,...c},u)=>{const f=E.useRef(null),h=Pe(d=>d.raycaster);return E.useImperativeHandle(u,()=>f.current,[]),E.useEffect(()=>{if(n){const d={strategy:i,verbose:r,setBoundingBox:s,maxDepth:o,maxLeafTris:a,indirect:l},m=f.current;return h.firstHitOnly=e,m.traverse(g=>{mz(g)&&!g.geometry.boundsTree&&g.raycast===gt.prototype.raycast&&(g.raycast=xY,g.geometry.computeBoundsTree=_Y,g.geometry.disposeBoundsTree=EY,g.geometry.computeBoundsTree(d))}),()=>{delete h.firstHitOnly,m.traverse(g=>{mz(g)&&g.geometry.boundsTree&&(g.geometry.disposeBoundsTree(),g.raycast=gt.prototype.raycast)})}}},[]),E.createElement("group",tt({ref:f},c),t)});function h_e(...n){const e=E.useRef([]);return e.current=n.map(t=>E.useContext(t)),E.useMemo(()=>({children:t})=>n.reduceRight((i,r,s)=>E.createElement(r.Provider,{value:e.current[s],children:i}),t),[])}function d_e(n,e){const t=E.useRef(),[i]=E.useState(()=>e?e instanceof Jt?{current:e}:e:t),[r]=E.useState(()=>new YT(void 0));E.useLayoutEffect(()=>{e&&(i.current=e instanceof Jt?e:e.current),r._root=i.current});const s=E.useRef({}),o=E.useMemo(()=>{const a={};return n.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))},configurable:!0})),{ref:i,clips:n,actions:a,names:n.map(l=>l.name),mixer:r}},[n]);return Bt((a,l)=>r.update(l)),E.useEffect(()=>{const a=i.current;return()=>{s.current={},r.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[n]),o}function CY(n){const e=E.useRef(null),t=E.useRef(!1),i=E.useRef(!1),r=E.useRef(n);return E.useLayoutEffect(()=>void(r.current=n),[n]),E.useEffect(()=>{const s=e.current;if(s){const o=gv(()=>(t.current=!1,!0)),a=s.onBeforeRender;s.onBeforeRender=()=>t.current=!0;const l=jE(()=>(t.current!==i.current&&(r.current==null||r.current(i.current=t.current)),!0));return()=>{s.onBeforeRender=a,o(),l()}}},[]),e}const p_e=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
  #ifdef BOX_PROJECTED_ENV_MAP
    vWorldPosition = worldPosition.xyz;
  #endif
#endif
`,m_e=`
#ifdef BOX_PROJECTED_ENV_MAP
  uniform vec3 envMapSize;
  uniform vec3 envMapPosition;
  varying vec3 vWorldPosition;
    
  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
    vec3 nDir = normalize( v );
    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbminmax;
    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;
    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
    vec3 boxIntersection = vWorldPosition + nDir * correction;    
    return boxIntersection - cubePos;
  }
#endif
`,g_e=`
#ifdef BOX_PROJECTED_ENV_MAP
  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,A_e=`
#ifdef BOX_PROJECTED_ENV_MAP
  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function v_e(n,e,t){n.defines.BOX_PROJECTED_ENV_MAP=!0,n.uniforms.envMapPosition={value:e},n.uniforms.envMapSize={value:t},n.vertexShader=`
  varying vec3 vWorldPosition;
  ${n.vertexShader.replace("#include <worldpos_vertex>",p_e)}`,n.fragmentShader=`
    ${m_e}
    ${n.fragmentShader.replace("#include <envmap_physical_pars_fragment>",rn.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
         ${g_e}
         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
         ${A_e}
        `)}`}function y_e(n=new F,e=new F){const[t]=E.useState(()=>({position:new F,size:new F}));yr(t,{position:n,size:e});const i=E.useRef(null),r=E.useMemo(()=>({ref:i,onBeforeCompile:s=>v_e(s,t.position,t.size),customProgramCacheKey:()=>JSON.stringify(t.position.toArray())+JSON.stringify(t.size.toArray())}),[...t.position.toArray(),...t.size.toArray()]);return E.useLayoutEffect(()=>void(i.current.needsUpdate=!0),[t]),r}const gz=new Gn,Px=new F,x_e=({anchor:n,...e})=>{const t=E.useRef(null),i=E.useRef(null);return E.useEffect(()=>{var r;(r=t.current)!=null&&(r=r.parent)!=null&&r.parent&&(i.current=t.current.parent,t.current.parent.parent.add(t.current))},[]),Bt(()=>{i.current&&(gz.setFromObject(i.current),gz.getSize(Px),t.current.position.set(i.current.position.x+Px.x*(Array.isArray(n)?n[0]:n.x)/2,i.current.position.y+Px.y*(Array.isArray(n)?n[1]:n.y)/2,i.current.position.z+Px.z*(Array.isArray(n)?n[2]:n.z)/2))}),E.createElement("group",tt({ref:t},e))};function __e(n,e,t=.9){return e*t+n*(1-t)}const E_e=n=>Math.sqrt(1-Math.pow(n-1,2));class w_e{constructor({size:e=256,maxAge:t=750,radius:i=.3,intensity:r=.2,interpolate:s=0,smoothing:o=0,minForce:a=.3,blend:l="screen",ease:c=E_e}={}){this.size=e,this.maxAge=t,this.radius=i,this.intensity=r,this.ease=c,this.interpolate=s,this.smoothing=o,this.minForce=a,this.blend=l,this.trail=[],this.force=0,this.initTexture()}initTexture(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size;const e=this.canvas.getContext("2d");if(e===null)throw new Error("2D not available");this.ctx=e,this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new Nn(this.canvas),this.canvas.id="touchTexture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`}update(e){this.clear(),this.trail.forEach((t,i)=>{t.age+=e*1e3,t.age>this.maxAge&&this.trail.splice(i,1)}),this.trail.length||(this.force=0),this.trail.forEach(t=>{this.drawTouch(t)}),this.texture.needsUpdate=!0}clear(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(e){const t=this.trail[this.trail.length-1];if(t){const i=t.x-e.x,r=t.y-e.y,s=i*i+r*r,o=Math.max(this.minForce,Math.min(s*1e4,1));if(this.force=__e(o,this.force,this.smoothing),this.interpolate){const a=Math.ceil(s/Math.pow(this.radius*.5/this.interpolate,2));if(a>1)for(let l=1;l<a;l++)this.trail.push({x:t.x-i/a*l,y:t.y-r/a*l,age:0,force:o})}}this.trail.push({x:e.x,y:e.y,age:0,force:this.force})}drawTouch(e){const t={x:e.x*this.size,y:(1-e.y)*this.size};let i=1;e.age<this.maxAge*.3?i=this.ease(e.age/(this.maxAge*.3)):i=this.ease(1-(e.age-this.maxAge*.3)/(this.maxAge*.7)),i*=e.force,this.ctx.globalCompositeOperation=this.blend;const r=this.size*this.radius*i,s=this.ctx.createRadialGradient(t.x,t.y,Math.max(0,r*.25),t.x,t.y,Math.max(0,r));s.addColorStop(0,`rgba(255, 255, 255, ${this.intensity})`),s.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=s,this.ctx.arc(t.x,t.y,Math.max(0,r),0,Math.PI*2),this.ctx.fill()}}function bY(n={}){const{size:e,maxAge:t,radius:i,intensity:r,interpolate:s,smoothing:o,minForce:a,blend:l,ease:c}=n,u=E.useMemo(()=>new w_e(n),[e,t,i,r,s,o,a,l,c]);Bt((h,d)=>void u.update(d));const f=E.useCallback(h=>u.addTouch(h.uv),[u]);return[u.texture,f]}const S_e=({children:n,...e})=>{const t=bY(e);return E.createElement(E.Fragment,null,n==null?void 0:n(t))},n9=E.forwardRef(function({children:e,disable:t,disableX:i,disableY:r,disableZ:s,left:o,right:a,top:l,bottom:c,front:u,back:f,onCentered:h,precise:d=!0,cacheKey:m=0,...g},v){const p=E.useRef(null),A=E.useRef(null),y=E.useRef(null);return E.useLayoutEffect(()=>{A.current.matrixWorld.identity();const w=new Gn().setFromObject(y.current,d),S=new F,C=new Bi,b=w.max.x-w.min.x,M=w.max.y-w.min.y,I=w.max.z-w.min.z;w.getCenter(S),w.getBoundingSphere(C);const T=l?M/2:c?-M/2:0,D=o?-b/2:a?b/2:0,R=u?I/2:f?-I/2:0;A.current.position.set(t||i?0:-S.x+D,t||r?0:-S.y+T,t||s?0:-S.z+R),typeof h<"u"&&h({parent:p.current.parent,container:p.current,width:b,height:M,depth:I,boundingBox:w,boundingSphere:C,center:S,verticalAlignment:T,horizontalAlignment:D,depthAlignment:R})},[m,h,l,o,u,t,i,r,s,d,a,c,f]),E.useImperativeHandle(v,()=>p.current,[]),E.createElement("group",tt({ref:p},g),E.createElement("group",{ref:A},E.createElement("group",{ref:y},e)))}),C_e=E.forwardRef(({font:n,color:e="#cbcbcb",bevelSize:t=.04,debug:i=!1,children:r,...s},o)=>{const[a,l]=E.useState(0),c=E.useCallback((h=1)=>l(a+h),[a]),u=E.useCallback((h=1)=>l(a-h),[a]),f=E.useMemo(()=>({incr:c,decr:u}),[c,u]);return E.useImperativeHandle(o,()=>f,[f]),E.createElement("group",s,E.createElement(E.Suspense,{fallback:null},E.createElement(n9,{top:!0,cacheKey:JSON.stringify({counter:a,font:n})},E.createElement(QW,{bevelEnabled:!0,bevelSize:t,font:n},i?E.createElement("meshNormalMaterial",{wireframe:!0}):E.createElement("meshStandardMaterial",{color:e}),a))),r)});function MY(n){return IY(n.children,n.components)}MY.propTypes={children:Cn.func.isRequired,components:Cn.arrayOf(Cn.oneOfType([Cn.element,Cn.func])).isRequired};function IY(n,e,t){if(t=t||[],!e[0])return n(t);function i(r){return IY(n,e.slice(1),t.concat([r]))}return typeof e[0]=="function"?e[0]({results:t,render:i}):E.cloneElement(e[0],{children:i})}const Zg=(n,e)=>{"updateRanges"in n?n.updateRanges[0]=e:n.updateRange=e},b_e=3e3,M_e=3001;function I_e(n){return typeof n=="function"}const Az=new He,vz=new He,Rx=[],$1=new gt;class T_e extends qs{constructor(){super(),this.color=new et("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){const i=this.instance.current;if(!i||!i.geometry||!i.material)return;$1.geometry=i.geometry;const r=i.matrixWorld,s=i.userData.instances.indexOf(this.instanceKey);if(!(s===-1||s>i.count)){i.getMatrixAt(s,Az),vz.multiplyMatrices(r,Az),$1.matrixWorld=vz,i.material instanceof ur?$1.material.side=i.material.side:$1.material.side=i.material[0].side,$1.raycast(e,Rx);for(let o=0,a=Rx.length;o<a;o++){const l=Rx[o];l.instanceId=s,l.object=this,t.push(l)}Rx.length=0}}}const TY=E.createContext(null),yz=new He,xz=new He,B_e=new He,_z=new F,Ez=new Lt,wz=new F,i9=E.forwardRef(({context:n,children:e,...t},i)=>{E.useMemo(()=>Ai({PositionMesh:T_e}),[]);const r=E.useRef();E.useImperativeHandle(i,()=>r.current,[]);const{subscribe:s,getParent:o}=E.useContext(n||TY);return E.useLayoutEffect(()=>s(r),[]),E.createElement("positionMesh",tt({instance:o(),instanceKey:r,ref:r},t),e)}),r9=E.forwardRef(({children:n,range:e,limit:t=1e3,frames:i=1/0,...r},s)=>{const[{context:o,instance:a}]=E.useState(()=>{const v=E.createContext(null);return{context:v,instance:E.forwardRef((p,A)=>E.createElement(i9,tt({context:v},p,{ref:A})))}}),l=E.useRef(null);E.useImperativeHandle(s,()=>l.current,[]);const[c,u]=E.useState([]),[[f,h]]=E.useState(()=>{const v=new Float32Array(t*16);for(let p=0;p<t;p++)B_e.identity().toArray(v,p*16);return[v,new Float32Array([...new Array(t*3)].map(()=>1))]});E.useEffect(()=>{l.current.instanceMatrix.needsUpdate=!0});let d=0,m=0;Bt(()=>{if(i===1/0||d<i){l.current.updateMatrix(),l.current.updateMatrixWorld(),yz.copy(l.current.matrixWorld).invert(),m=Math.min(t,e!==void 0?e:t,c.length),l.current.count=m,Zg(l.current.instanceMatrix,{offset:0,count:m*16}),Zg(l.current.instanceColor,{offset:0,count:m*3});for(let v=0;v<c.length;v++){const p=c[v].current;p.matrixWorld.decompose(_z,Ez,wz),xz.compose(_z,Ez,wz).premultiply(yz),xz.toArray(f,v*16),l.current.instanceMatrix.needsUpdate=!0,p.color.toArray(h,v*3),l.current.instanceColor.needsUpdate=!0}d++}});const g=E.useMemo(()=>({getParent:()=>l,subscribe:v=>(u(p=>[...p,v]),()=>u(p=>p.filter(A=>A.current!==v.current)))}),[]);return E.createElement("instancedMesh",tt({userData:{instances:c},matrixAutoUpdate:!1,ref:l,args:[null,null,0],raycast:()=>null},r),E.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:f.length/16,array:f,itemSize:16,usage:ms}),E.createElement("instancedBufferAttribute",{attach:"instanceColor",count:h.length/3,array:h,itemSize:3,usage:ms}),I_e(n)?E.createElement(o.Provider,{value:g},n(a)):E.createElement(TY.Provider,{value:g},n))}),P_e=E.forwardRef(function({meshes:e,children:t,...i},r){const s=Array.isArray(e);if(!s)for(const o of Object.keys(e))e[o].isMesh||delete e[o];return E.createElement("group",{ref:r},E.createElement(MY,{components:(s?e:Object.values(e)).map(({geometry:o,material:a})=>E.createElement(r9,tt({key:o.uuid,geometry:o,material:a},i)))},o=>s?t(...o):t(Object.keys(e).filter(a=>e[a].isMesh).reduce((a,l,c)=>({...a,[l]:o[c]}),{}))))}),BY=E.createContext(null);function R_e(){return E.useContext(BY)}const D_e=E.forwardRef(({startFrame:n,endFrame:e,fps:t,frameName:i,textureDataURL:r,textureImageURL:s,loop:o,numberOfFrames:a,autoPlay:l,animationNames:c,onStart:u,onEnd:f,onLoopEnd:h,onFrame:d,play:m,pause:g,flipX:v,alphaTest:p,children:A,asSprite:y,offset:w,playBackwards:S,resetOnEnd:C,maxItems:b,instanceItems:M,spriteDataset:I,...T},D)=>{var R;const z=E.useRef(),L=E.useRef(null),H=E.useRef(),J=E.useRef(),Z=E.useRef(window.performance.now()),U=E.useRef(n||0),X=E.useRef(i||""),Y=1e3/(t||30),[O,W]=E.useState(new Nn),$=E.useRef(0),[k,V]=E.useState([1,1,1]),Q=v?-1:1,[j,oe]=E.useState(y??!0),xe=E.useRef(g),pe=E.useRef(w),de=E.useRef(!1),te=E.useRef([]),{spriteObj:Ee,loadJsonAndTexture:ue}=Sw(null,null,c,a);function ve(){}const ye=E.useMemo(()=>({current:pe.current,offset:pe.current,imageUrl:s,reset:ve,hasEnded:!1,ref:D}),[s,I]);E.useImperativeHandle(D,()=>z.current,[]),E.useLayoutEffect(()=>{pe.current=w},[w]);const Be=(ee,Ae)=>{const Ue=Ae/ee;return J.current&&J.current.scale.set(1,Ue,1),[1,Ue,1]};E.useEffect(()=>{if(I){var ee;ae(I==null||(ee=I.spriteTexture)==null?void 0:ee.clone(),I.spriteData)}else ue(s,r)},[I]),E.useEffect(()=>{if(Ee){var ee;ae(Ee==null||(ee=Ee.spriteTexture)==null?void 0:ee.clone(),Ee==null?void 0:Ee.spriteData)}},[Ee]),E.useEffect(()=>{oe(y??!0)},[y]),E.useEffect(()=>{ye.hasEnded=!1,L.current&&S===!0?U.current=L.current.frames.length-1:U.current=0},[S]),E.useLayoutEffect(()=>{ie()},[O,v]),E.useEffect(()=>{l&&(xe.current=!1)},[l]),E.useLayoutEffect(()=>{if(X.current!==i&&i&&(U.current=0,X.current=i,ye.hasEnded=!1,L.current)){const{w:ee,h:Ae}=ct(L.current.frames).sourceSize,Ue=Be(ee,Ae);V(Ue)}},[i]);const ae=(ee,Ae=null)=>{if(Ae===null){if(a){const Ce=ee.image.width,ke=ee.image.height;$.current=a,S&&(U.current=a-1),L.current={frames:[],meta:{version:"1.0",size:{w:Ce,h:ke},scale:"1"}},L.current.frames=Ae}}else{L.current=Ae,$.current=L.current.frames.length,S&&(U.current=$.current-1);const{w:Ce,h:ke}=ct(L.current.frames).sourceSize,We=Be(Ce,ke);V(We),H.current&&(H.current.map=ee)}if(M)for(var Ue=0;Ue<M.length;Ue++){const Ce=Object.keys(L.current.frames),ke=Ce[Math.floor(Math.random()*Ce.length)];te.current.push({key:Ue,frames:L.current.frames,selectedFrame:ke,offset:{x:0,y:0}})}W(ee)},ie=()=>{if(!L.current)return;const{meta:{size:ee},frames:Ae}=L.current,{w:Ue,h:Ce}=Array.isArray(Ae)?Ae[0].sourceSize:i?Ae[i]?Ae[i][0].sourceSize:{w:0,h:0}:{w:0,h:0};H.current.map.wrapS=H.current.map.wrapT=Wr,H.current.map.center.set(0,0),H.current.map.repeat.set(1*Q/(ee.w/Ue),1/(ee.h/Ce));const We=1/((ee.h-1)/Ce);H.current.map.offset.x=0,H.current.map.offset.y=1-We,u&&u({currentFrameName:i,currentFrame:U.current})},be=()=>{const ee=window.performance.now(),Ae=ee-Z.current,{meta:{size:Ue},frames:Ce}=L.current,{w:ke,h:We}=ct(Ce).sourceSize,Xe=Array.isArray(Ce)?Ce:i?Ce[i]:[],Oe=e||Xe.length-1;var ft=w===void 0?ye.current:w,lt=S?U.current<0:U.current>Oe,st=S?U.current===Oe:U.current===0,ce=S?U.current<0:U.current>=Oe;if(lt){if(U.current=o?n??0:0,S&&(U.current=Oe),o?h==null||h({currentFrameName:i,currentFrame:U.current}):(f==null||f({currentFrameName:i,currentFrame:U.current}),ye.hasEnded=!C,C&&(xe.current=!0)),!o)return}else st&&(u==null||u({currentFrameName:i,currentFrame:U.current}));ft!==void 0&&ce?de.current===!1&&(f==null||f({currentFrameName:i,currentFrame:U.current}),de.current=!0):de.current=!1,!(Ae<=Y)&&(Z.current=ee-Ae%Y,Re(ke,We,Ue,Xe))},Re=(ee,Ae,Ue,Ce)=>{var ke=w===void 0?ye.current:w;const We=U.current;let Xe=0,Oe=0;Be(ee,Ae);const ft=Math.round((Ue.w-1)/ee),lt=Math.round((Ue.h-1)/Ae);if(!Ce[We])return;const{frame:{x:st,y:ce},sourceSize:{w:De,h:$e}}=Ce[We],Ye=1/ft,fe=1/lt;if(Xe=Q>0?Ye*(st/De):Ye*(st/De)-H.current.map.repeat.x,Oe=Math.abs(1-fe)-fe*(ce/$e),H.current.map.offset.x=Xe,H.current.map.offset.y=Oe,ke!=null){let _e=Math.floor(ke*Ce.length);_e=Math.max(0,Math.min(_e,Ce.length-1)),isNaN(_e)&&(_e=0),U.current=_e}else S?U.current-=1:U.current+=1};Bt((ee,Ae)=>{var Ue,Ce;!((Ue=L.current)!=null&&Ue.frames)||!((Ce=H.current)!=null&&Ce.map)||xe.current||!ye.hasEnded&&(l||m)&&(be(),d&&d({currentFrameName:X.current,currentFrame:U.current}))});const ct=ee=>{if(Array.isArray(ee))return ee[0];if(typeof ee=="object"&&ee!==null){const Ae=Object.keys(ee);return i?ee[i][0]:ee[Ae[0]][0]}else return{w:0,h:0}};function se(ee,Ae){let Ue=[];return typeof Ae=="number"?Ue=[Ae,Ae,Ae]:Array.isArray(Ae)?Ue=Ae:Ae instanceof F&&(Ue=[Ae.x,Ae.y,Ae.z]),ee.map((ke,We)=>ke*Ue[We])}return E.createElement("group",tt({},T,{ref:z,scale:se(k??[1,1,1],(R=T.scale)!==null&&R!==void 0?R:1)}),E.createElement(BY.Provider,{value:ye},E.createElement(E.Suspense,{fallback:null},j&&E.createElement("sprite",{ref:J,scale:1},E.createElement("spriteMaterial",{premultipliedAlpha:!1,toneMapped:!1,ref:H,map:O,transparent:!0,alphaTest:p??0})),!j&&E.createElement(r9,{limit:b??1},E.createElement("planeGeometry",{args:[1,1]}),E.createElement("meshBasicMaterial",{premultipliedAlpha:!1,toneMapped:!1,side:ni,ref:H,map:O,transparent:!0,alphaTest:p??0}),(M??[0]).map((ee,Ae)=>E.createElement(i9,{key:Ae,ref:(M==null?void 0:M.length)===1?J:null,position:ee,scale:1})))),A))}),L_e=E.forwardRef(({children:n,curve:e},t)=>{const[i]=E.useState(()=>new Mo),[r,s]=E.useState(),o=E.useRef();return E.useEffect(()=>{o.current=new V0e(i.children[0]),s(o.current.object3D)},[n]),E.useEffect(()=>{var a;e&&((a=o.current)==null||a.updateCurve(0,e))},[e]),E.useImperativeHandle(t,()=>({moveAlongCurve:a=>{var l;(l=o.current)==null||l.moveAlongCurve(a)}})),E.createElement(E.Fragment,null,Vc(n,i),r&&E.createElement("primitive",{object:r}))});var F_e=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class O_e extends Fs{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${F_e}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const z_e=E.forwardRef(({speed:n=1,...e},t)=>{const[i]=E.useState(()=>new O_e);return Bt(r=>i&&(i.time=r.clock.getElapsedTime()*n)),E.createElement("primitive",tt({object:i,ref:t,attach:"material"},e))});class U_e extends rd{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._factor={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.factor=this._factor,e.vertexShader=`
      uniform float time;
      uniform float factor;
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(e){this._time.value=e}get factor(){return this._factor.value}set factor(e){this._factor.value=e}}const k_e=E.forwardRef(({speed:n=1,...e},t)=>{const[i]=E.useState(()=>new U_e);return Bt(r=>i&&(i.time=r.clock.getElapsedTime()*n)),E.createElement("primitive",tt({object:i,ref:t,attach:"material"},e))});class N_e extends Wn{constructor(e=new Se){super({uniforms:{inputBuffer:new es(null),depthBuffer:new es(null),resolution:new es(new Se),texelSize:new es(new Se),halfTexelSize:new es(new Se),kernel:new es(0),scale:new es(1),cameraNear:new es(0),cameraFar:new es(1),minDepthThreshold:new es(0),maxDepthThreshold:new es(1),depthScale:new es(0),depthToBlurRatioBias:new es(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:pa,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class PY{constructor({gl:e,resolution:t,width:i=500,height:r=500,minDepthThreshold:s=0,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25}){this.renderToScreen=!1,this.renderTargetA=new Qn(t,t,{minFilter:Xt,magFilter:Xt,stencilBuffer:!1,depthBuffer:!1,type:jn}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new N_e,this.convolutionMaterial.setTexelSize(1/i,1/r),this.convolutionMaterial.setResolution(new Se(i,r)),this.scene=new Mo,this.camera=new yf,this.convolutionMaterial.uniforms.minDepthThreshold.value=s,this.convolutionMaterial.uniforms.maxDepthThreshold.value=o,this.convolutionMaterial.uniforms.depthScale.value=a,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=l,this.convolutionMaterial.defines.USE_DEPTH=a>0;const c=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),u=new Float32Array([0,0,2,0,0,2]),f=new Gt;f.setAttribute("position",new qt(c,3)),f.setAttribute("uv",new qt(u,2)),this.screen=new gt(f,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,t,i){const r=this.scene,s=this.camera,o=this.renderTargetA,a=this.renderTargetB;let l=this.convolutionMaterial,c=l.uniforms;c.depthBuffer.value=t.depthTexture;const u=l.kernel;let f=t,h,d,m;for(d=0,m=u.length-1;d<m;++d)h=d&1?a:o,c.kernel.value=u[d],c.inputBuffer.value=f.texture,e.setRenderTarget(h),e.render(r,s),f=h;c.kernel.value=u[d],c.inputBuffer.value=f.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(r,s)}}let RY=class extends rd{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var t;(t=e.defines)!=null&&t.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}};const G_e=E.forwardRef(({mixBlur:n=0,mixStrength:e=1,resolution:t=256,blur:i=[0,0],minDepthThreshold:r=.9,maxDepthThreshold:s=1,depthScale:o=0,depthToBlurRatioBias:a=.25,mirror:l=0,distortion:c=1,mixContrast:u=1,distortionMap:f,reflectorOffset:h=0,...d},m)=>{Ai({MeshReflectorMaterialImpl:RY});const g=Pe(({gl:O})=>O),v=Pe(({camera:O})=>O),p=Pe(({scene:O})=>O);i=Array.isArray(i)?i:[i,i];const A=i[0]+i[1]>0,y=E.useRef(null);E.useImperativeHandle(m,()=>y.current,[]);const[w]=E.useState(()=>new Hr),[S]=E.useState(()=>new F),[C]=E.useState(()=>new F),[b]=E.useState(()=>new F),[M]=E.useState(()=>new He),[I]=E.useState(()=>new F(0,0,-1)),[T]=E.useState(()=>new sn),[D]=E.useState(()=>new F),[R]=E.useState(()=>new F),[z]=E.useState(()=>new sn),[L]=E.useState(()=>new He),[H]=E.useState(()=>new mn),J=E.useCallback(()=>{var O;const W=y.current.parent||((O=y.current)==null?void 0:O.__r3f.parent);if(!W||(C.setFromMatrixPosition(W.matrixWorld),b.setFromMatrixPosition(v.matrixWorld),M.extractRotation(W.matrixWorld),S.set(0,0,1),S.applyMatrix4(M),C.addScaledVector(S,h),D.subVectors(C,b),D.dot(S)>0))return;D.reflect(S).negate(),D.add(C),M.extractRotation(v.matrixWorld),I.set(0,0,-1),I.applyMatrix4(M),I.add(b),R.subVectors(C,I),R.reflect(S).negate(),R.add(C),H.position.copy(D),H.up.set(0,1,0),H.up.applyMatrix4(M),H.up.reflect(S),H.lookAt(R),H.far=v.far,H.updateMatrixWorld(),H.projectionMatrix.copy(v.projectionMatrix),L.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),L.multiply(H.projectionMatrix),L.multiply(H.matrixWorldInverse),L.multiply(W.matrixWorld),w.setFromNormalAndCoplanarPoint(S,C),w.applyMatrix4(H.matrixWorldInverse),T.set(w.normal.x,w.normal.y,w.normal.z,w.constant);const $=H.projectionMatrix;z.x=(Math.sign(T.x)+$.elements[8])/$.elements[0],z.y=(Math.sign(T.y)+$.elements[9])/$.elements[5],z.z=-1,z.w=(1+$.elements[10])/$.elements[14],T.multiplyScalar(2/T.dot(z)),$.elements[2]=T.x,$.elements[6]=T.y,$.elements[10]=T.z+1,$.elements[14]=T.w},[v,h]),[Z,U,X,Y]=E.useMemo(()=>{const O={minFilter:Xt,magFilter:Xt,type:jn},W=new Qn(t,t,O);W.depthBuffer=!0,W.depthTexture=new u0(t,t),W.depthTexture.format=Ja,W.depthTexture.type=Af;const $=new Qn(t,t,O),k=new PY({gl:g,resolution:t,width:i[0],height:i[1],minDepthThreshold:r,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a}),V={mirror:l,textureMatrix:L,mixBlur:n,tDiffuse:W.texture,tDepth:W.depthTexture,tDiffuseBlur:$.texture,hasBlur:A,mixStrength:e,minDepthThreshold:r,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a,distortion:c,distortionMap:f,mixContrast:u,"defines-USE_BLUR":A?"":void 0,"defines-USE_DEPTH":o>0?"":void 0,"defines-USE_DISTORTION":f?"":void 0};return[W,$,k,V]},[g,i,L,t,l,A,n,e,r,s,o,a,c,f,u]);return Bt(()=>{var O;const W=y.current.parent||((O=y.current)==null?void 0:O.__r3f.parent);if(!W)return;W.visible=!1;const $=g.xr.enabled,k=g.shadowMap.autoUpdate;J(),g.xr.enabled=!1,g.shadowMap.autoUpdate=!1,g.setRenderTarget(Z),g.state.buffers.depth.setMask(!0),g.autoClear||g.clear(),g.render(p,H),A&&X.render(g,Z,U),g.xr.enabled=$,g.shadowMap.autoUpdate=k,W.visible=!0,g.setRenderTarget(null)}),E.createElement("meshReflectorMaterialImpl",tt({attach:"material",key:"key"+Y["defines-USE_BLUR"]+Y["defines-USE_DEPTH"]+Y["defines-USE_DISTORTION"],ref:y},Y,d))}),H_e=Po({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new SY,color:new et("white"),resolution:new Se,viewMatrixInverse:new He,projectionMatrixInverse:new He},`
  uniform mat4 viewMatrixInverse;

  varying vec3 vWorldPosition;  
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif

  void main() {        
    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #endif

    #ifdef USE_INSTANCING
      vModelMatrixInverse = inverse(modelMatrix * instanceMatrix);
    #else
      vModelMatrixInverse = inverse(modelMatrix);
    #endif

    #ifdef USE_INSTANCING_COLOR
      vInstanceColor = instanceColor.rgb;
    #endif

    vWorldPosition = (modelMatrix * transformedPosition).xyz;
    vNormal = normalize((viewMatrixInverse * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif
    
  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif
    
  uniform float bounces;
  ${l_e}
  ${c_e}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
  uniform mat4 projectionMatrixInverse;
  uniform mat4 viewMatrixInverse;
  uniform float aberrationStrength;
  uniform vec3 color;
  
  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }
    
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);      
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }
    
  #include <common>
  #include <cube_uv_reflection_fragment>
    
  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif
  
  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInverse * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInverse * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);
    vec3 finalColor;
    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      #ifdef FAST_CHROMA 
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), vModelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), vModelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      finalColor = vec3(finalColorR, finalColorG, finalColorB);
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      finalColor = textureGradient(envMap, rayDirection, directionCamPerfect).rgb;    
    #endif

    finalColor *= color;
    #ifdef USE_INSTANCING_COLOR
      finalColor *= vInstanceColor;
    #endif

    vec3 viewDirection = normalize(vWorldPosition - cameraPosition);
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(finalColor, vec3(1.0), nFresnel), 1.0);      
    #include <tonemapping_fragment>
    #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
  }`),Q_e=n=>n&&n.isCubeTexture;function V_e({aberrationStrength:n=0,fastChroma:e=!0,envMap:t,...i}){Ai({MeshRefractionMaterial:H_e});const r=E.useRef(),{size:s}=Pe(),o=E.useMemo(()=>{var a,l;const c={},u=Q_e(t),h=((a=u?(l=t.image[0])==null?void 0:l.width:t.image.width)!==null&&a!==void 0?a:1024)/4,d=Math.floor(Math.log2(h)),m=Math.pow(2,d),g=3*Math.max(m,16*7),v=4*m;return u&&(c.ENVMAP_TYPE_CUBEM=""),c.CUBEUV_TEXEL_WIDTH=`${1/g}`,c.CUBEUV_TEXEL_HEIGHT=`${1/v}`,c.CUBEUV_MAX_MIP=`${d}.0`,n>0&&(c.CHROMATIC_ABERRATIONS=""),e&&(c.FAST_CHROMA=""),c},[n,e]);return E.useLayoutEffect(()=>{var a;const l=(a=r.current)==null||(a=a.__r3f)==null||(a=a.parent)==null?void 0:a.geometry;l&&(r.current.bvh=new SY,r.current.bvh.updateFrom(new Iw(l.clone().toNonIndexed(),{lazyGeneration:!1,strategy:Cw})))},[]),Bt(({camera:a})=>{r.current.viewMatrixInverse=a.matrixWorld,r.current.projectionMatrixInverse=a.projectionMatrixInverse}),E.createElement("meshRefractionMaterial",tt({key:JSON.stringify(o),defines:o,ref:r,resolution:[s.width,s.height],aberrationStrength:n,envMap:t},i))}const s9=Po({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class j_e extends Fs{constructor(e=6,t=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new et("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=i=>{i.uniforms={...i.uniforms,...this.uniforms},this.anisotropy>0&&(i.defines.USE_ANISOTROPY=""),t?i.defines.USE_SAMPLER="":i.defines.USE_TRANSMISSION="",i.fragmentShader=`
      uniform float chromaticAberration;         
      uniform float anisotropicBlur;      
      uniform float time;
      uniform float distortion;
      uniform float distortionScale;
      uniform float temporalDistortion;
      uniform sampler2D buffer;

      vec3 random3(vec3 c) {
        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
        vec3 r;
        r.z = fract(512.0*j);
        j *= .125;
        r.x = fract(512.0*j);
        j *= .125;
        r.y = fract(512.0*j);
        return r-0.5;
      }

      uint hash( uint x ) {
        x += ( x << 10u );
        x ^= ( x >>  6u );
        x += ( x <<  3u );
        x ^= ( x >> 11u );
        x += ( x << 15u );
        return x;
      }

      // Compound versions of the hashing algorithm I whipped together.
      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }
      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }
      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }

      // Construct a float with half-open range [0:1] using low 23 bits.
      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.
      float floatConstruct( uint m ) {
        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask
        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32
        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)
        m |= ieeeOne;                          // Add fractional part to 1.0
        float  f = uintBitsToFloat( m );       // Range [1:2]
        return f - 1.0;                        // Range [0:1]
      }

      // Pseudo-random value in half-open range [0:1].
      float randomBase( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }
      float randomBase( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float randomBase( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float randomBase( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float rand(float seed) {
        float result = randomBase(vec3(gl_FragCoord.xy, seed));
        return result;
      }

      const float F3 =  0.3333333;
      const float G3 =  0.1666667;

      float snoise(vec3 p) {
        vec3 s = floor(p + dot(p, vec3(F3)));
        vec3 x = p - s + dot(s, vec3(G3));
        vec3 e = step(vec3(0.0), x - x.yzx);
        vec3 i1 = e*(1.0 - e.zxy);
        vec3 i2 = 1.0 - e.zxy*(1.0 - e);
        vec3 x1 = x - i1 + G3;
        vec3 x2 = x - i2 + 2.0*G3;
        vec3 x3 = x - 1.0 + 3.0*G3;
        vec4 w, d;
        w.x = dot(x, x);
        w.y = dot(x1, x1);
        w.z = dot(x2, x2);
        w.w = dot(x3, x3);
        w = max(0.6 - w, 0.0);
        d.x = dot(random3(s), x);
        d.y = dot(random3(s + i1), x1);
        d.z = dot(random3(s + i2), x2);
        d.w = dot(random3(s + 1.0), x3);
        w *= w;
        w *= w;
        d *= w;
        return dot(d, vec4(52.0));
      }

      float snoiseFractal(vec3 m) {
        return 0.5333333* snoise(m)
              +0.2666667* snoise(2.0*m)
              +0.1333333* snoise(4.0*m)
              +0.0666667* snoise(8.0*m);
      }
`+i.fragmentShader,i.fragmentShader=i.fragmentShader.replace("#include <transmission_pars_fragment>",`
        #ifdef USE_TRANSMISSION
          // Transmission code is based on glTF-Sampler-Viewer
          // https://github.com/KhronosGroup/glTF-Sample-Viewer
          uniform float _transmission;
          uniform float thickness;
          uniform float attenuationDistance;
          uniform vec3 attenuationColor;
          #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
          #endif
          #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
          #endif
          uniform vec2 transmissionSamplerSize;
          uniform sampler2D transmissionSamplerMap;
          uniform mat4 modelMatrix;
          uniform mat4 projectionMatrix;
          varying vec3 vWorldPosition;
          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            // Direction of refracted light.
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            // Compute rotation-independant scaling of the model matrix.
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            // The thickness is specified in local space.
            return normalize( refractionVector ) * thickness * modelScale;
          }
          float applyIorToRoughness( const in float roughness, const in float ior ) {
            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
            // an IOR of 1.5 results in the default amount of microfacet refraction.
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
          }
          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            
            #ifdef USE_SAMPLER
              #ifdef texture2DLodEXT
                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #else
                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #endif
            #else
              return texture2D(buffer, fragCoord.xy);
            #endif
          }
          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
              // Attenuation distance is +∞, i.e. the transmitted color is not attenuated at all.
              return radiance;
            } else {
              // Compute light attenuation using Beer's law.
              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
              return transmittance * radiance;
            }
          }
          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
            vec3 refractedRayExit = position + transmissionRay;
            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
            refractionCoords += 1.0;
            refractionCoords /= 2.0;
            // Sample framebuffer to get pixel the refracted ray hits.
            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
            // Get the specular component.
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
          }
        #endif
`),i.fragmentShader=i.fragmentShader.replace("#include <transmission_fragment>",`  
        // Improve the refraction to use the world pos
        material.transmission = _transmission;
        material.transmissionAlpha = 1.0;
        material.thickness = thickness;
        material.attenuationDistance = attenuationDistance;
        material.attenuationColor = attenuationColor;
        #ifdef USE_TRANSMISSIONMAP
          material.transmission *= texture2D( transmissionMap, vUv ).r;
        #endif
        #ifdef USE_THICKNESSMAP
          material.thickness *= texture2D( thicknessMap, vUv ).g;
        #endif
        
        vec3 pos = vWorldPosition;
        float runningSeed = 0.0;
        vec3 v = normalize( cameraPosition - pos );
        vec3 n = inverseTransformDirection( normal, viewMatrix );
        vec3 transmission = vec3(0.0);
        float transmissionR, transmissionB, transmissionG;
        float randomCoords = rand(runningSeed++);
        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);
        vec3 distortionNormal = vec3(0.0);
        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;
        if (distortion > 0.0) {
          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));
        }
        for (float i = 0.0; i < ${e}.0; i ++) {
          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5)) * pow(rand(runningSeed++), 0.33) + distortionNormal);
          transmissionR = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).r;
          transmissionG = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${e})) , material.thickness + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).g;
          transmissionB = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${e})), material.thickness + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).b;
          transmission.r += transmissionR;
          transmission.g += transmissionG;
          transmission.b += transmissionB;
        }
        transmission /= ${e}.0;
        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
`)},Object.keys(this.uniforms).forEach(i=>Object.defineProperty(this,i,{get:()=>this.uniforms[i].value,set:r=>this.uniforms[i].value=r}))}}const W_e=E.forwardRef(({buffer:n,transmissionSampler:e=!1,backside:t=!1,side:i=Rs,transmission:r=1,thickness:s=0,backsideThickness:o=0,backsideEnvMapIntensity:a=1,samples:l=10,resolution:c,backsideResolution:u,background:f,anisotropy:h,anisotropicBlur:d,...m},g)=>{Ai({MeshTransmissionMaterial:j_e});const v=E.useRef(null),[p]=E.useState(()=>new s9),A=Bs(u||c),y=Bs(c);let w,S,C,b;return Bt(M=>{v.current.time=M.clock.getElapsedTime(),v.current.buffer===y.texture&&!e&&(b=v.current.__r3f.parent,b&&(C=M.gl.toneMapping,w=M.scene.background,S=v.current.envMapIntensity,M.gl.toneMapping=ma,f&&(M.scene.background=f),b.material=p,t&&(M.gl.setRenderTarget(A),M.gl.render(M.scene,M.camera),b.material=v.current,b.material.buffer=A.texture,b.material.thickness=o,b.material.side=er,b.material.envMapIntensity=a),M.gl.setRenderTarget(y),M.gl.render(M.scene,M.camera),b.material=v.current,b.material.thickness=s,b.material.side=i,b.material.buffer=y.texture,b.material.envMapIntensity=S,M.scene.background=w,M.gl.setRenderTarget(null),M.gl.toneMapping=C))}),E.useImperativeHandle(g,()=>v.current,[]),E.createElement("meshTransmissionMaterial",tt({args:[l,e],ref:v},m,{buffer:n||y.texture,_transmission:r,anisotropicBlur:d??h,transmission:e?r:0,thickness:s,side:i}))}),Y_e=E.forwardRef((n,e)=>(Ai({DiscardMaterialImpl:s9}),E.createElement("discardMaterialImpl",tt({ref:e},n)))),_5=Os>=154?"opaque_fragment":"output_fragment";class DY extends uv{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:r}=i.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${_5}>`,`
        ${r?`#include <${_5}>`:`#extension GL_OES_standard_derivatives : enable
#include <${_5}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const X_e=E.forwardRef((n,e)=>{const[t]=E.useState(()=>new DY(null));return E.createElement("primitive",tt({},n,{object:t,ref:e,attach:"material"}))}),q_e=({focus:n=0,size:e=25,samples:t=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${e})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${n});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${t}; i ++) {
    offset = (vogelDiskSample(j, ${t}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${t}; i++) {
    vogelSample = vogelDiskSample(j, ${t}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${e}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${t}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function Sz(n,e,t){e.traverse(i=>{i.material&&(n.properties.remove(i.material),i.material.dispose==null||i.material.dispose())}),n.info.programs.length=0,n.compile(e,t)}function J_e({focus:n=0,samples:e=10,size:t=25}){const i=Pe(o=>o.gl),r=Pe(o=>o.scene),s=Pe(o=>o.camera);return E.useEffect(()=>{const o=rn.shadowmap_pars_fragment;return rn.shadowmap_pars_fragment=rn.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+q_e({size:t,samples:e,focus:n})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),Sz(i,r,s),()=>{rn.shadowmap_pars_fragment=o,Sz(i,r,s)}},[n,t,e]),null}function Dr(n,e){const t=n+"Geometry";return E.forwardRef(({args:i,children:r,...s},o)=>{const a=E.useRef(null);return E.useImperativeHandle(o,()=>a.current),E.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),E.createElement("mesh",tt({ref:a},s),E.createElement(t,{attach:"geometry",args:i}),r)})}const K_e=Dr("box"),$_e=Dr("circle"),Z_e=Dr("cone"),e3e=Dr("cylinder"),t3e=Dr("sphere"),n3e=Dr("plane"),i3e=Dr("tube"),r3e=Dr("torus"),s3e=Dr("torusKnot"),o3e=Dr("tetrahedron"),a3e=Dr("ring"),l3e=Dr("polyhedron"),c3e=Dr("icosahedron"),u3e=Dr("octahedron"),f3e=Dr("dodecahedron"),h3e=Dr("extrude"),d3e=Dr("lathe"),p3e=Dr("capsule"),m3e=Dr("shape",({geometry:n})=>{const e=n.attributes.position,t=new Gn().setFromBufferAttribute(e),i=new F;t.getSize(i);const r=[];let s=0,o=0,a=0,l=0;for(let c=0;c<e.count;c++)s=e.getX(c),o=e.getY(c),a=(s-t.min.x)/i.x,l=(o-t.min.y)/i.y,r.push(a,l);n.setAttribute("uv",new Et(r,2))}),xl=1e-5;function g3e(n,e,t){const i=new Cc,r=t-xl;return i.absarc(xl,xl,xl,-Math.PI/2,-Math.PI,!0),i.absarc(xl,e-r*2,xl,Math.PI,Math.PI/2,!0),i.absarc(n-r*2,e-r*2,xl,Math.PI/2,0,!0),i.absarc(n-r*2,xl,xl,0,-Math.PI/2,!0),i}const A3e=E.forwardRef(function({args:[e=1,t=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:o=4,bevelSegments:a=4,creaseAngle:l=.4,children:c,...u},f){const h=E.useMemo(()=>g3e(e,t,r),[e,t,r]),d=E.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:a*2,steps:s,bevelSize:r-xl,bevelThickness:r,curveSegments:o}),[i,r,o]),m=E.useRef(null);return E.useLayoutEffect(()=>{m.current&&(m.current.center(),kj(m.current,l))},[h,d]),E.createElement("mesh",tt({ref:f},u),E.createElement("extrudeGeometry",{ref:m,args:[h,d]}),c)});function v3e(){const n=new Gt,e=new Float32Array([-1,-1,3,-1,-1,3]);return n.boundingSphere=new Bi,n.boundingSphere.set(new F,1/0),n.setAttribute("position",new qt(e,2)),n}const y3e=E.forwardRef(function({children:e,...t},i){const r=E.useMemo(v3e,[]);return E.createElement("mesh",tt({ref:i,geometry:r,frustumCulled:!1},t),e)}),x3e=E.forwardRef(({children:n,width:e,height:t,depth:i,box3:r,precise:s=!0,...o},a)=>{const l=E.useRef(null),c=E.useRef(null),u=E.useRef(null);return E.useLayoutEffect(()=>{c.current.matrixWorld.identity();let f=r||new Gn().setFromObject(u.current,s);const h=f.max.x-f.min.x,d=f.max.y-f.min.y,m=f.max.z-f.min.z;let g=Math.max(h,d,m);e&&(g=h),t&&(g=d),i&&(g=m),c.current.scale.setScalar(1/g)},[e,t,i,r,s]),E.useImperativeHandle(a,()=>l.current,[]),E.createElement("group",tt({ref:l},o),E.createElement("group",{ref:c},E.createElement("group",{ref:u},n)))});var Wo=function(n){return n[n.NONE=0]="NONE",n[n.START=1]="START",n[n.ACTIVE=2]="ACTIVE",n}(Wo||{});const Tp=n=>n&&n.isOrthographicCamera,_3e=n=>n&&n.isBox3,E3e=n=>1-Math.exp(-5*n)+.007*n,LY=E.createContext(null);function FY({children:n,maxDuration:e=1,margin:t=1.2,observe:i,fit:r,clip:s,interpolateFunc:o=E3e,onFit:a}){const l=E.useRef(null),{camera:c,size:u,invalidate:f}=Pe(),h=Pe(S=>S.controls),d=E.useRef(a);d.current=a;const m=E.useRef({camPos:new F,camRot:new Lt,camZoom:1}),g=E.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),v=E.useRef(Wo.NONE),p=E.useRef(0),[A]=E.useState(()=>new Gn),y=E.useMemo(()=>{function S(){const C=A.getSize(new F),b=A.getCenter(new F),M=Math.max(C.x,C.y,C.z),I=Tp(c)?M*4:M/(2*Math.atan(Math.PI*c.fov/360)),T=Tp(c)?M*4:I/c.aspect,D=t*Math.max(I,T);return{box:A,size:C,center:b,distance:D}}return{getSize:S,refresh(C){if(_3e(C))A.copy(C);else{const b=C||l.current;if(!b)return this;b.updateWorldMatrix(!0,!0),A.setFromObject(b)}if(A.isEmpty()){const b=c.position.length()||10;A.setFromCenterAndSize(new F,new F(b,b,b))}return m.current.camPos.copy(c.position),m.current.camRot.copy(c.quaternion),Tp(c)&&(m.current.camZoom=c.zoom),g.current.camPos=void 0,g.current.camRot=void 0,g.current.camZoom=void 0,g.current.camUp=void 0,g.current.target=void 0,this},reset(){const{center:C,distance:b}=S(),M=c.position.clone().sub(C).normalize();g.current.camPos=C.clone().addScaledVector(M,b),g.current.target=C.clone();const I=new He().lookAt(g.current.camPos,g.current.target,c.up);return g.current.camRot=new Lt().setFromRotationMatrix(I),v.current=Wo.START,p.current=0,this},moveTo(C){return g.current.camPos=Array.isArray(C)?new F(...C):C.clone(),v.current=Wo.START,p.current=0,this},lookAt({target:C,up:b}){g.current.target=Array.isArray(C)?new F(...C):C.clone(),b?g.current.camUp=Array.isArray(b)?new F(...b):b.clone():g.current.camUp=c.up.clone();const M=new He().lookAt(g.current.camPos||c.position,g.current.target,g.current.camUp);return g.current.camRot=new Lt().setFromRotationMatrix(M),v.current=Wo.START,p.current=0,this},to({position:C,target:b}){return this.moveTo(C).lookAt({target:b})},fit(){if(!Tp(c))return this.reset();let C=0,b=0;const M=[new F(A.min.x,A.min.y,A.min.z),new F(A.min.x,A.max.y,A.min.z),new F(A.min.x,A.min.y,A.max.z),new F(A.min.x,A.max.y,A.max.z),new F(A.max.x,A.max.y,A.max.z),new F(A.max.x,A.max.y,A.min.z),new F(A.max.x,A.min.y,A.max.z),new F(A.max.x,A.min.y,A.min.z)],I=g.current.camPos||c.position,T=g.current.target||(h==null?void 0:h.target),D=g.current.camUp||c.up,R=T?new He().lookAt(I,T,D).setPosition(I).invert():c.matrixWorldInverse;for(const H of M)H.applyMatrix4(R),C=Math.max(C,Math.abs(H.y)),b=Math.max(b,Math.abs(H.x));C*=2,b*=2;const z=(c.top-c.bottom)/C,L=(c.right-c.left)/b;return g.current.camZoom=Math.min(z,L)/t,v.current=Wo.START,p.current=0,d.current&&d.current(this.getSize()),this},clip(){const{distance:C}=S();return c.near=C/100,c.far=C*100,c.updateProjectionMatrix(),h&&(h.maxDistance=C*10,h.update()),f(),this}}},[A,c,h,t,f]);E.useLayoutEffect(()=>{if(h){const S=()=>{if(h&&g.current.target&&v.current!==Wo.NONE){const C=new F().setFromMatrixColumn(c.matrix,2),b=m.current.camPos.distanceTo(h.target),M=(g.current.camPos||m.current.camPos).distanceTo(g.current.target),I=(1-p.current)*b+p.current*M;h.target.copy(c.position).addScaledVector(C,-I),h.update()}v.current=Wo.NONE};return h.addEventListener("start",S),()=>h.removeEventListener("start",S)}},[h]);const w=E.useRef(0);return E.useLayoutEffect(()=>{(i||w.current++===0)&&(y.refresh(),r&&y.reset().fit(),s&&y.clip())},[u,s,r,i,c,h]),Bt((S,C)=>{if(v.current===Wo.START)v.current=Wo.ACTIVE,f();else if(v.current===Wo.ACTIVE){if(p.current+=C/e,p.current>=1)g.current.camPos&&c.position.copy(g.current.camPos),g.current.camRot&&c.quaternion.copy(g.current.camRot),g.current.camUp&&c.up.copy(g.current.camUp),g.current.camZoom&&Tp(c)&&(c.zoom=g.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix(),h&&g.current.target&&(h.target.copy(g.current.target),h.update()),v.current=Wo.NONE;else{const b=o(p.current);g.current.camPos&&c.position.lerpVectors(m.current.camPos,g.current.camPos,b),g.current.camRot&&c.quaternion.slerpQuaternions(m.current.camRot,g.current.camRot,b),g.current.camUp&&c.up.set(0,1,0).applyQuaternion(c.quaternion),g.current.camZoom&&Tp(c)&&(c.zoom=(1-b)*m.current.camZoom+b*g.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix()}f()}}),E.createElement("group",{ref:l},E.createElement(LY.Provider,{value:y},n))}function OY(){return E.useContext(LY)}const w3e=E.forwardRef(({intensity:n=1,decay:e,decayRate:t=.65,maxYaw:i=.1,maxPitch:r=.1,maxRoll:s=.1,yawFrequency:o=.1,pitchFrequency:a=.1,rollFrequency:l=.1},c)=>{const u=Pe(A=>A.camera),f=Pe(A=>A.controls),h=E.useRef(n),d=E.useRef(u.rotation.clone()),[m]=E.useState(()=>new CC),[g]=E.useState(()=>new CC),[v]=E.useState(()=>new CC),p=()=>{(h.current<0||h.current>1)&&(h.current=h.current<0?0:1)};return E.useImperativeHandle(c,()=>({getIntensity:()=>h.current,setIntensity:A=>{h.current=A,p()}}),[]),E.useEffect(()=>{if(f){const A=()=>void(d.current=u.rotation.clone());return f.addEventListener("change",A),A(),()=>void f.removeEventListener("change",A)}},[u,f]),Bt((A,y)=>{const w=Math.pow(h.current,2),S=i*w*m.noise(A.clock.elapsedTime*o,1),C=r*w*g.noise(A.clock.elapsedTime*a,1),b=s*w*v.noise(A.clock.elapsedTime*l,1);u.rotation.set(d.current.x+C,d.current.y+S,d.current.z+b),e&&h.current>0&&(h.current-=t*y,p())}),null}),S3e=E.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],...o},a)=>{const l=E.useRef(null);E.useImperativeHandle(a,()=>l.current,[]);const c=E.useRef(Math.random()*1e4);return Bt(u=>{var f,h;if(!e||t===0)return;const d=c.current+u.clock.getElapsedTime();l.current.rotation.x=Math.cos(d/4*t)/8*i,l.current.rotation.y=Math.sin(d/4*t)/8*i,l.current.rotation.z=Math.sin(d/4*t)/20*i;let m=Math.sin(d/4*t)/10;m=jt.mapLinear(m,-.1,.1,(f=s==null?void 0:s[0])!==null&&f!==void 0?f:-.1,(h=s==null?void 0:s[1])!==null&&h!==void 0?h:.1),l.current.position.y=m*r,l.current.updateMatrix()}),E.createElement("group",o,E.createElement("group",{ref:l,matrixAutoUpdate:!1},n))}),zY=(n,e,t)=>{let i;switch(n){case hi:i=new Uint8ClampedArray(e*t*4);break;case jn:i=new Uint16Array(e*t*4);break;case ps:i=new Uint32Array(e*t*4);break;case CA:i=new Int8Array(e*t*4);break;case cE:i=new Int16Array(e*t*4);break;case bh:i=new Int32Array(e*t*4);break;case Ln:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let Dx;const C3e=(n,e,t,i)=>{if(Dx!==void 0)return Dx;const r=new Qn(1,1,i);e.setRenderTarget(r);const s=new gt(new br,new Ir({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=zY(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),Dx=o[0]!==0,Dx};class o9{constructor(e){var t,i,r,s,o,a,l,c,u,f,h,d,m,g,v,p;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(y){throw this._renderer.setRenderTarget(null),y}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const A={format:Vn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Xt,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:Xt,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.wrapS)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS:li,wrapT:((m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapT)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT:li};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=o9.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Mo,this._camera=new ti,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!C3e(this._type,this._renderer,this._camera,A)){let y;switch(this._type){case jn:y=this._renderer.extensions.has("EXT_color_buffer_float")?Ln:void 0;break}y!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Ln}`),this._type=y):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new gt(new br,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Qn(this.width,this.height,A),this._renderTarget.texture.mapping=((v=e.renderTargetOptions)===null||v===void 0?void 0:v.mapping)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.mapping:sf}static instantiateRenderer(){const e=new vE;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=zY(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new io(this.toArray(),this.width,this.height,Vn,this._type,(e==null?void 0:e.mapping)||sf,(e==null?void 0:e.wrapS)||li,(e==null?void 0:e.wrapT)||li,(e==null?void 0:e.magFilter)||Xt,(e==null?void 0:e.minFilter)||Xt,(e==null?void 0:e.anisotropy)||1,ro);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Wn&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Nn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Nn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const b3e=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,M3e=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class I3e extends Wn{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:b3e,fragmentShader:M3e,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new F(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new F().fromArray(t)},offsetSdr:{value:new F().fromArray(i)},gainMapMin:{value:new F().fromArray(r)},gainMapMax:{value:new F().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:pa,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class UY extends Error{}class kY extends Error{}const Z1=(n,e,t)=>{var i;let r;const s=(i=n.attributes.getNamedItem(e))===null||i===void 0?void 0:i.nodeValue;if(s)r=s;else{const o=n.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)r=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}}return r},T3e=n=>{var e,t;let i;typeof TextDecoder<"u"?i=new TextDecoder().decode(n):i=n.toString();let r=i.indexOf("<x:xmpmeta");const s=new DOMParser;for(;r!==-1;){const o=i.indexOf("x:xmpmeta>",r);i.slice(r,o+10);const a=i.slice(r,o+10);try{const c=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],u=Z1(c,"hdrgm:GainMapMin","0"),f=Z1(c,"hdrgm:GainMapMax"),h=Z1(c,"hdrgm:Gamma","1"),d=Z1(c,"hdrgm:OffsetSDR","0.015625"),m=Z1(c,"hdrgm:OffsetHDR","0.015625");let g=(e=c.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;g||(g="0");const v=(t=c.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||t===void 0?void 0:t.nodeValue;if(!v)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(u)?u.map(p=>parseFloat(p)):[parseFloat(u),parseFloat(u),parseFloat(u)],gainMapMax:Array.isArray(f)?f.map(p=>parseFloat(p)):[parseFloat(f),parseFloat(f),parseFloat(f)],gamma:Array.isArray(h)?h.map(p=>parseFloat(p)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetSdr:Array.isArray(d)?d.map(p=>parseFloat(p)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(m)?m.map(p=>parseFloat(p)):[parseFloat(m),parseFloat(m),parseFloat(m)],hdrCapacityMin:parseFloat(g),hdrCapacityMax:parseFloat(v)}}catch{}r=i.indexOf("<x:xmpmeta",o)}};class B3e{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),r&&console.log(`Marker: ${c.toString(16)}`),c===226){r&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const f=u+4;let h;if(s.getUint16(f)===18761)h=!1;else if(s.getUint16(f)===19789)h=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!h)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const d=s.getUint32(f+4,!h);if(d<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const m=f+d,g=s.getUint16(m,!h),v=m+2;let p=0;for(let S=v;S<v+12*g;S+=12)s.getUint16(S,!h)===45057&&(p=s.getUint32(S+8,!h));const y=m+2+g*12+4,w=[];for(let S=y;S<y+p*16;S+=16){const C={MPType:s.getUint32(S,!h),size:s.getUint32(S+4,!h),dataOffset:s.getUint32(S+8,!h),dependantImages:s.getUint32(S+12,!h),start:-1,end:-1,isFII:!1};C.dataOffset?(C.start=f+C.dataOffset,C.isFII=!1):(C.start=0,C.isFII=!0),C.end=C.start+C.size,w.push(C)}if(this.options.extractNonFII&&w.length){const S=new Blob([s]),C=[];for(const b of w){if(b.isFII&&!this.options.extractFII)continue;const M=S.slice(b.start,b.end+1,"image/jpeg");C.push(M)}t(C)}}}a+=2+s.getUint16(a+2)}})}}const P3e=async n=>{const e=T3e(n);if(!e)throw new kY("Gain map XMP metadata not found");const i=await new B3e({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new UY("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},Cz=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class NY extends nr{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new FE}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new I3e({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Nn,sdr:new Nn});return new o9({width:16,height:16,type:jn,colorSpace:ro,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([s?Cz(s):Promise.resolve(void 0),Cz(o)]);l=h[0],a=h[1],c=!0}else{const h=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=h[0],a=h[1]}const u=new Nn(l||new ImageData(2,2),sf,li,li,Xt,aM,Vn,hi,1,ro);u.flipY=c,u.needsUpdate=!0;const f=new Nn(a,sf,li,li,Xt,aM,Vn,hi,1,En);f.flipY=c,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=f,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class R3e extends NY{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,c,u;const f=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(I){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(I),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let h=!0,d=0,m=0,g=!0,v=0,p=0,A=!0,y=0,w=0;const S=()=>{if(typeof s=="function"){const I=d+v+y,T=m+p+w,D=h&&g&&A;s(new ProgressEvent("progress",{lengthComputable:D,loaded:T,total:I}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const C=new ji(this._internalLoadingManager);C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(this.withCredentials),C.load(e,async I=>{if(typeof I=="string")throw new Error("Invalid sdr buffer");l=I,await f()},I=>{h=I.lengthComputable,m=I.loaded,d=I.total,S()},I=>{this.manager.itemError(e),typeof o=="function"&&o(I)});const b=new ji(this._internalLoadingManager);b.setResponseType("arraybuffer"),b.setRequestHeader(this.requestHeader),b.setPath(this.path),b.setWithCredentials(this.withCredentials),b.load(t,async I=>{if(typeof I=="string")throw new Error("Invalid gainmap buffer");c=I,await f()},I=>{g=I.lengthComputable,p=I.loaded,v=I.total,S()},I=>{this.manager.itemError(t),typeof o=="function"&&o(I)});const M=new ji(this._internalLoadingManager);return M.setRequestHeader(this.requestHeader),M.setPath(this.path),M.setWithCredentials(this.withCredentials),M.load(i,async I=>{if(typeof I!="string")throw new Error("Invalid metadata string");u=JSON.parse(I),await f()},I=>{A=I.lengthComputable,w=I.loaded,y=I.total,S()},I=>{this.manager.itemError(i),typeof o=="function"&&o(I)}),a}}class D3e extends NY{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new ji(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,f;try{const h=await P3e(l);c=h.sdr,u=h.gainMap,f=h.metadata}catch(h){if(h instanceof kY||h instanceof UY)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw h}try{await this.render(s,f,c,u)}catch(h){this.manager.itemError(e),typeof r=="function"&&r(h),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const E5={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},L3e="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Lx=n=>Array.isArray(n);function a9({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){var s;let o=null,a=!1,l;if(t){if(!(t in E5))throw new Error("Preset must be one of: "+Object.keys(E5).join(", "));n=E5[t],e=L3e}const c=Lx(n)&&n.length===6,u=Lx(n)&&n.length===3&&n.some(v=>v.endsWith("json")),f=Lx(n)?n[0]:n;if(a=Lx(n),l=c?"cube":u?"webp":f.startsWith("data:application/exr")?"exr":f.startsWith("data:application/hdr")?"hdr":f.startsWith("data:image/jpeg")?"jpg":(s=f.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=l==="cube"?OE:l==="hdr"?GAe:l==="exr"?HAe:l==="jpg"||l==="jpeg"?D3e:l==="webp"?R3e:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const h=Pe(v=>v.gl),d=Pi(o,a?[n]:n,v=>{(l==="webp"||l==="jpg"||l==="jpeg")&&v.setRenderer(h),v.setPath==null||v.setPath(e),r&&r(v)});let m=a?d[0]:d;if(l==="jpg"||l==="jpeg"||l==="webp"){var g;m=(g=m.renderTarget)==null?void 0:g.texture}return m.mapping=c?zl:af,"colorSpace"in m?m.colorSpace=i??c?"srgb":"srgb-linear":m.encoding=i??c?M_e:b_e,m}const F3e=n=>n.current&&n.current.isScene,O3e=n=>F3e(n)?n.current:n;function l9(n,e,t,i,r={}){var s,o,a,l,c;r={backgroundBlurriness:(s=r.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=O3e(e||t),f=u.background,h=u.environment,d={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(o=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(l=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(u.environment=i),n&&(u.background=i),yr(u,r),()=>{n!=="only"&&(u.environment=h),n&&(u.background=f),yr(u,d)}}function Tw({scene:n,background:e=!1,map:t,...i}){const r=Pe(s=>s.scene);return E.useLayoutEffect(()=>{if(t)return l9(e,n,r,t,i)}),null}function c9({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=a9(l),u=Pe(f=>f.scene);return E.useLayoutEffect(()=>l9(n,e,u,c,{blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function GY({children:n,near:e=1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h,scene:d,files:m,path:g,preset:v=void 0,extensions:p}){const A=Pe(M=>M.gl),y=Pe(M=>M.scene),w=E.useRef(null),[S]=E.useState(()=>new Mo),C=E.useMemo(()=>{const M=new a0(i);return M.texture.type=jn,M},[i]);E.useLayoutEffect(()=>(r===1&&w.current.update(A,S),l9(o,d,y,C.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h})),[n,S,C.texture,d,y,o,r,A]);let b=1;return Bt(()=>{(r===1/0||b<r)&&(w.current.update(A,S),b++)}),E.createElement(E.Fragment,null,Vc(E.createElement(E.Fragment,null,n,E.createElement("cubeCamera",{ref:w,args:[e,t,C]}),m||v?E.createElement(c9,{background:!0,files:m,preset:v,path:g,extensions:p}):s?E.createElement(Tw,{background:!0,map:s,extensions:p}):null),S))}function z3e(n){var e,t,i,r;const s=a9(n),o=n.map||s;E.useMemo(()=>Ai({GroundProjectedEnvImpl:h1e}),[]);const a=E.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return E.createElement(E.Fragment,null,E.createElement(Tw,tt({},n,{map:o})),E.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function HY(n){return n.ground?E.createElement(z3e,n):n.map?E.createElement(Tw,n):n.children?E.createElement(GY,n):E.createElement(c9,n)}const QY=E.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:i=1,height:r=1,blur:s=1,near:o=0,far:a=10,resolution:l=512,smooth:c=!0,color:u="#000000",depthWrite:f=!1,renderOrder:h,...d},m)=>{const g=E.useRef(null),v=Pe(L=>L.scene),p=Pe(L=>L.gl),A=E.useRef(null);i=i*(Array.isArray(n)?n[0]:n||1),r=r*(Array.isArray(n)?n[1]:n||1);const[y,w,S,C,b,M,I]=E.useMemo(()=>{const L=new Qn(l,l),H=new Qn(l,l);H.texture.generateMipmaps=L.texture.generateMipmaps=!1;const J=new br(i,r).rotateX(Math.PI/2),Z=new gt(J),U=new ov;U.depthTest=U.depthWrite=!1,U.onBeforeCompile=O=>{O.uniforms={...O.uniforms,ucolor:{value:new et(u)}},O.fragmentShader=O.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),O.fragmentShader=O.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const X=new Wn(jge),Y=new Wn(Wge);return Y.depthTest=X.depthTest=!1,[L,J,U,Z,X,Y,H]},[l,i,r,n,u]),T=L=>{C.visible=!0,C.material=b,b.uniforms.tDiffuse.value=y.texture,b.uniforms.h.value=L*1/256,p.setRenderTarget(I),p.render(C,A.current),C.material=M,M.uniforms.tDiffuse.value=I.texture,M.uniforms.v.value=L*1/256,p.setRenderTarget(y),p.render(C,A.current),C.visible=!1};let D=0,R,z;return Bt(()=>{A.current&&(e===1/0||D<e)&&(D++,R=v.background,z=v.overrideMaterial,g.current.visible=!1,v.background=null,v.overrideMaterial=S,p.setRenderTarget(y),p.render(v,A.current),T(s),c&&T(s*.4),p.setRenderTarget(null),g.current.visible=!0,v.overrideMaterial=z,v.background=R)}),E.useImperativeHandle(m,()=>g.current,[]),E.createElement("group",tt({"rotation-x":Math.PI/2},d,{ref:g}),E.createElement("mesh",{renderOrder:h,geometry:w,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},E.createElement("meshBasicMaterial",{transparent:!0,map:y.texture,opacity:t,depthWrite:f})),E.createElement("orthographicCamera",{ref:A,args:[-i/2,i/2,r/2,-r/2,o,a]}))});function U3e(n){return n.isLight}function k3e(n){return!!n.geometry}const u9=E.createContext(null),N3e=Po({color:new et,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),VY=E.forwardRef(({children:n,temporal:e,frames:t=40,limit:i=1/0,blend:r=20,scale:s=10,opacity:o=1,alphaTest:a=.75,color:l="black",colorBlend:c=2,resolution:u=1024,toneMapped:f=!0,...h},d)=>{Ai({SoftShadowMaterial:N3e});const m=Pe(C=>C.gl),g=Pe(C=>C.scene),v=Pe(C=>C.camera),p=Pe(C=>C.invalidate),A=E.useRef(null),y=E.useRef(null),[w]=E.useState(()=>new G3e(m,g,u));E.useLayoutEffect(()=>{w.configure(A.current)},[]);const S=E.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,t),blend:Math.max(2,t===1/0?r:t),count:0,getMesh:()=>A.current,reset:()=>{w.clear();const C=A.current.material;C.opacity=0,C.alphaTest=0,S.count=0},update:(C=1)=>{const b=A.current.material;S.temporal?(b.opacity=Math.min(o,b.opacity+o/S.blend),b.alphaTest=Math.min(a,b.alphaTest+a/S.blend)):(b.opacity=o,b.alphaTest=a),y.current.visible=!0,w.prepare();for(let M=0;M<C;M++)S.lights.forEach(I=>I.update()),w.update(v,S.blend);y.current.visible=!1,w.finish()}}),[w,v,g,e,t,r,o,a]);return E.useLayoutEffect(()=>{S.reset(),!S.temporal&&S.frames!==1/0&&S.update(S.blend)}),E.useImperativeHandle(d,()=>S,[S]),Bt(()=>{(S.temporal||S.frames===1/0)&&S.count<S.frames&&S.count<i&&(p(),S.update(),S.count++)}),E.createElement("group",h,E.createElement("group",{traverse:()=>null,ref:y},E.createElement(u9.Provider,{value:S},n)),E.createElement("mesh",{receiveShadow:!0,ref:A,scale:s,rotation:[-Math.PI/2,0,0]},E.createElement("planeGeometry",null),E.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:f,color:l,blend:c,map:w.progressiveLightMap2.texture})))}),jY=E.forwardRef(({castShadow:n=!0,bias:e=.001,mapSize:t=512,size:i=5,near:r=.5,far:s=500,frames:o=1,position:a=[0,0,0],radius:l=1,amount:c=8,intensity:u=Os>=155?Math.PI:1,ambient:f=.5,...h},d)=>{const m=E.useRef(null),g=new F(...a).length(),v=E.useContext(u9),p=E.useCallback(()=>{let y;if(m.current)for(let w=0;w<m.current.children.length;w++)if(y=m.current.children[w],Math.random()>f)y.position.set(a[0]+jt.randFloatSpread(l),a[1]+jt.randFloatSpread(l),a[2]+jt.randFloatSpread(l));else{let S=Math.acos(2*Math.random()-1)-Math.PI/2,C=2*Math.PI*Math.random();y.position.set(Math.cos(S)*Math.cos(C)*g,Math.abs(Math.cos(S)*Math.sin(C)*g),Math.sin(S)*g)}},[l,f,g,...a]),A=E.useMemo(()=>({update:p}),[p]);return E.useImperativeHandle(d,()=>A,[A]),E.useLayoutEffect(()=>{var y;const w=m.current;return v&&((y=v.lights)==null||y.set(w.uuid,A)),()=>{var S;return void(v==null||(S=v.lights)==null?void 0:S.delete(w.uuid))}},[v,A]),E.createElement("group",tt({ref:m},h),Array.from({length:c},(y,w)=>E.createElement("directionalLight",{key:w,castShadow:n,"shadow-bias":e,"shadow-mapSize":[t,t],intensity:u/c},E.createElement("orthographicCamera",{attach:"shadow-camera",args:[-i,i,i,-i,r,s]}))))});class G3e{constructor(e,t,i=1024){this.renderer=e,this.res=i,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new et,this.clearAlpha=0;const r={type:jn,magFilter:dn,minFilter:dn};this.progressiveLightMap1=new Qn(this.res,this.res,r),this.progressiveLightMap2=new Qn(this.res,this.res,r),this.discardMat=new s9,this.targetMat=new pv({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=s.fragmentShader.indexOf("void main() {");s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,o)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{k3e(e)?this.meshes.push({object:e,material:e.material}):U3e(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const i=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(i),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const H3e={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function Q3e({radius:n,adjustCamera:e}){const t=OY();return E.useEffect(()=>{e&&t.refresh().clip().fit()},[n,e]),null}function V3e({children:n,center:e,adjustCamera:t=!0,intensity:i=.5,shadows:r="contact",environment:s="city",preset:o="rembrandt",...a}){var l,c,u,f,h,d,m,g;const v=typeof o=="string"?H3e[o]:o,[{radius:p,height:A},y]=E.useState({radius:0,width:0,height:0,depth:0}),w=(l=r==null?void 0:r.bias)!==null&&l!==void 0?l:-1e-4,S=(c=r==null?void 0:r.normalBias)!==null&&c!==void 0?c:0,C=(u=r==null?void 0:r.size)!==null&&u!==void 0?u:1024,b=(f=r==null?void 0:r.offset)!==null&&f!==void 0?f:0,M=r==="contact"||(r==null?void 0:r.type)==="contact",I=r==="accumulative"||(r==null?void 0:r.type)==="accumulative",T={...typeof r=="object"?r:{}},D=s?typeof s=="string"?{preset:s}:s:null,R=E.useCallback(z=>{const{width:L,height:H,depth:J,boundingSphere:Z}=z;y({radius:Z.radius,width:L,height:H,depth:J}),e!=null&&e.onCentered&&e.onCentered(z)},[]);return E.createElement(E.Fragment,null,E.createElement("ambientLight",{intensity:i/3}),E.createElement("spotLight",{penumbra:1,position:[v.main[0]*p,v.main[1]*p,v.main[2]*p],intensity:i*2,castShadow:!!r,"shadow-bias":w,"shadow-normalBias":S,"shadow-mapSize":C}),E.createElement("pointLight",{position:[v.fill[0]*p,v.fill[1]*p,v.fill[2]*p],intensity:i}),E.createElement(FY,tt({fit:!!t,clip:!!t,margin:Number(t),observe:!0},a),E.createElement(Q3e,{radius:p,adjustCamera:t}),E.createElement(n9,tt({},e,{position:[0,b/2,0],onCentered:R}),n)),E.createElement("group",{position:[0,-A/2-b/2,0]},M&&E.createElement(QY,tt({scale:p*4,far:p,blur:2},T)),I&&E.createElement(VY,tt({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:p*4},T),E.createElement(jY,{amount:(h=T.amount)!==null&&h!==void 0?h:8,radius:(d=T.radius)!==null&&d!==void 0?d:p,ambient:(m=T.ambient)!==null&&m!==void 0?m:.5,intensity:(g=T.intensity)!==null&&g!==void 0?g:1,position:[v.main[0]*p,v.main[1]*p,v.main[2]*p],size:p*4,bias:-w,mapSize:C}))),s&&E.createElement(HY,D))}const j3e=n=>n===0?0:Math.pow(2,10*n-10);function W3e({children:n,floor:e=.25,segments:t=20,receiveShadow:i,...r}){const s=E.useRef(null);return E.useLayoutEffect(()=>{let o=0;const a=t/t/2,l=s.current.attributes.position;for(let c=0;c<t+1;c++)for(let u=0;u<t+1;u++)l.setXYZ(o++,c/t-a+(c===0?-e:0),u/t-a,j3e(c/t));l.needsUpdate=!0,s.current.computeVertexNormals()},[t,e]),E.createElement("group",r,E.createElement("mesh",{receiveShadow:i,rotation:[-Math.PI/2,0,Math.PI/2]},E.createElement("planeGeometry",{ref:s,args:[1,1,t,t]}),n))}const Y3e=E.forwardRef(({fog:n=!1,renderOrder:e,depthWrite:t=!1,colorStop:i=0,color:r="black",opacity:s=.5,...o},a)=>{const l=E.useMemo(()=>{const c=document.createElement("canvas");c.width=128,c.height=128;const u=c.getContext("2d"),f=u.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);return f.addColorStop(i,new et(r).getStyle()),f.addColorStop(1,"rgba(0,0,0,0)"),u.fillStyle=f,u.fillRect(0,0,c.width,c.height),c},[r,i]);return E.createElement("mesh",tt({renderOrder:e,ref:a,"rotation-x":-Math.PI/2},o),E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,opacity:s,fog:n,depthWrite:t,side:ni},E.createElement("canvasTexture",{attach:"map",args:[l]})))});function bz(n=Rs){const e={value:new He};return Object.assign(new zT({side:n}),{viewMatrix:e,onBeforeCompile:t=>{t.uniforms.viewMatrix=e,t.fragmentShader=`vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
           return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
         }
`+t.fragmentShader.replace("#include <normal_fragment_maps>",`#include <normal_fragment_maps>
           normal = inverseTransformDirection( normal, viewMatrix );
`)}})}const X3e=Po({causticsTexture:null,causticsTextureB:null,color:new et,lightProjMatrix:new He,lightViewMatrix:new He},`varying vec3 vWorldPosition;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vec4 worldPosition = modelMatrix * vec4(position, 1.);
     vWorldPosition = worldPosition.xyz;
   }`,`varying vec3 vWorldPosition;
  uniform vec3 color;
  uniform sampler2D causticsTexture;
  uniform sampler2D causticsTextureB;
  uniform mat4 lightProjMatrix;
  uniform mat4 lightViewMatrix;
   void main() {
    // Apply caustics
    vec4 lightSpacePos = lightProjMatrix * lightViewMatrix * vec4(vWorldPosition, 1.0);
    lightSpacePos.xyz /= lightSpacePos.w;
    lightSpacePos.xyz = lightSpacePos.xyz * 0.5 + 0.5;
    vec3 front = texture2D(causticsTexture, lightSpacePos.xy).rgb;
    vec3 back = texture2D(causticsTextureB, lightSpacePos.xy).rgb;
    gl_FragColor = vec4((front + back) * color, 1.0);
    #include <tonemapping_fragment>
    #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),q3e=Po({cameraMatrixWorld:new He,cameraProjectionMatrixInv:new He,normalTexture:null,depthTexture:null,lightDir:new F(0,1,0),lightPlaneNormal:new F(0,1,0),lightPlaneConstant:0,near:.1,far:100,modelMatrix:new He,worldRadius:1/40,ior:1.1,bounces:0,resolution:1024,size:10,intensity:.5},`
  varying vec2 vUv;
  void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }`,`
  uniform mat4 cameraMatrixWorld;
  uniform mat4 cameraProjectionMatrixInv;
  uniform vec3 lightDir;
  uniform vec3 lightPlaneNormal;
  uniform float lightPlaneConstant;
  uniform float near;
  uniform float far;
  uniform float time;
  uniform float worldRadius;
  uniform float resolution;
  uniform float size;
  uniform float intensity;
  uniform float ior;
  precision highp isampler2D;
  precision highp usampler2D;
  uniform sampler2D normalTexture;
  uniform sampler2D depthTexture;
  uniform float bounces;
  varying vec2 vUv;
  vec3 WorldPosFromDepth(float depth, vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = cameraProjectionMatrixInv * clipSpacePosition;
    // Perspective division
    viewSpacePosition /= viewSpacePosition.w;
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    return worldSpacePosition.xyz;
  }
  float sdPlane( vec3 p, vec3 n, float h ) {
    // n must be normalized
    return dot(p,n) + h;
  }
  float planeIntersect( vec3 ro, vec3 rd, vec4 p ) {
    return -(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);
  }
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 pos, vec3 normal, float ior, out vec3 rayOrigin, out vec3 rayDirection) {
    rayOrigin = ro;
    rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = pos + rayDirection * 0.1;
    return rayDirection;
  }
  void main() {
    // Each sample consists of random offset in the x and y direction
    float caustic = 0.0;
    float causticTexelSize = (1.0 / resolution) * size * 2.0;
    float texelsNeeded = worldRadius / causticTexelSize;
    float sampleRadius = texelsNeeded / resolution;
    float sum = 0.0;
    if (texture2D(depthTexture, vUv).x == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec2 offset1 = vec2(-0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset2 = vec2(-0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset3 = vec2(0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset4 = vec2(0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 uv1 = vUv + offset1 * sampleRadius;
    vec2 uv2 = vUv + offset2 * sampleRadius;
    vec2 uv3 = vUv + offset3 * sampleRadius;
    vec2 uv4 = vUv + offset4 * sampleRadius;
    vec3 normal1 = texture2D(normalTexture, uv1, -10.0).rgb * 2.0 - 1.0;
    vec3 normal2 = texture2D(normalTexture, uv2, -10.0).rgb * 2.0 - 1.0;
    vec3 normal3 = texture2D(normalTexture, uv3, -10.0).rgb * 2.0 - 1.0;
    vec3 normal4 = texture2D(normalTexture, uv4, -10.0).rgb * 2.0 - 1.0;
    float depth1 = texture2D(depthTexture, uv1, -10.0).x;
    float depth2 = texture2D(depthTexture, uv2, -10.0).x;
    float depth3 = texture2D(depthTexture, uv3, -10.0).x;
    float depth4 = texture2D(depthTexture, uv4, -10.0).x;
    // Sanity check the depths
    if (depth1 == 1.0 || depth2 == 1.0 || depth3 == 1.0 || depth4 == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec3 pos1 = WorldPosFromDepth(depth1, uv1);
    vec3 pos2 = WorldPosFromDepth(depth2, uv2);
    vec3 pos3 = WorldPosFromDepth(depth3, uv3);
    vec3 pos4 = WorldPosFromDepth(depth4, uv4);
    vec3 originPos1 = WorldPosFromDepth(0.0, uv1);
    vec3 originPos2 = WorldPosFromDepth(0.0, uv2);
    vec3 originPos3 = WorldPosFromDepth(0.0, uv3);
    vec3 originPos4 = WorldPosFromDepth(0.0, uv4);
    vec3 endPos1, endPos2, endPos3, endPos4;
    vec3 endDir1, endDir2, endDir3, endDir4;
    totalInternalReflection(originPos1, lightDir, pos1, normal1, ior, endPos1, endDir1);
    totalInternalReflection(originPos2, lightDir, pos2, normal2, ior, endPos2, endDir2);
    totalInternalReflection(originPos3, lightDir, pos3, normal3, ior, endPos3, endDir3);
    totalInternalReflection(originPos4, lightDir, pos4, normal4, ior, endPos4, endDir4);
    float lightPosArea = length(cross(originPos2 - originPos1, originPos3 - originPos1)) + length(cross(originPos3 - originPos1, originPos4 - originPos1));
    float t1 = planeIntersect(endPos1, endDir1, vec4(lightPlaneNormal, lightPlaneConstant));
    float t2 = planeIntersect(endPos2, endDir2, vec4(lightPlaneNormal, lightPlaneConstant));
    float t3 = planeIntersect(endPos3, endDir3, vec4(lightPlaneNormal, lightPlaneConstant));
    float t4 = planeIntersect(endPos4, endDir4, vec4(lightPlaneNormal, lightPlaneConstant));
    vec3 finalPos1 = endPos1 + endDir1 * t1;
    vec3 finalPos2 = endPos2 + endDir2 * t2;
    vec3 finalPos3 = endPos3 + endDir3 * t3;
    vec3 finalPos4 = endPos4 + endDir4 * t4;
    float finalArea = length(cross(finalPos2 - finalPos1, finalPos3 - finalPos1)) + length(cross(finalPos3 - finalPos1, finalPos4 - finalPos1));
    caustic += intensity * (lightPosArea / finalArea);
    // Calculate the area of the triangle in light spaces
    gl_FragColor = vec4(vec3(max(caustic, 0.0)), 1.0);
  }`),Mz={depth:!0,minFilter:Xt,magFilter:Xt,type:hi},Iz={minFilter:bo,magFilter:Xt,type:Ln,generateMipmaps:!0},J3e=E.forwardRef(({debug:n,children:e,frames:t=1,ior:i=1.1,color:r="white",causticsOnly:s=!1,backside:o=!1,backsideIOR:a=1.1,worldRadius:l=.3125,intensity:c=.05,resolution:u=2024,lightSource:f=[5,5,5],...h},d)=>{Ai({CausticsProjectionMaterial:X3e});const m=E.useRef(null),g=E.useRef(null),v=E.useRef(null),p=E.useRef(null),A=Pe(Q=>Q.gl),y=$8(n&&g,AQ),w=Bs(u,u,Mz),S=Bs(u,u,Mz),C=Bs(u,u,Iz),b=Bs(u,u,Iz),[M]=E.useState(()=>bz()),[I]=E.useState(()=>bz(er)),[T]=E.useState(()=>new q3e),[D]=E.useState(()=>new xc(T));E.useLayoutEffect(()=>{m.current.updateWorldMatrix(!1,!0)});let R=0;const z=new F,L=new l0,H=new He,J=new Hr,Z=new F,U=new F,X=new Gn,Y=new F,O=[],W=[],$=[],k=[],V=new F;for(let Q=0;Q<8;Q++)O.push(new F),W.push(new F),$.push(new F),k.push(new F);return Bt(()=>{if(t===1/0||R++<t){var Q,j;Array.isArray(f)?Z.fromArray(f).normalize():Z.copy(m.current.worldToLocal(f.current.getWorldPosition(z)).normalize()),U.copy(Z).multiplyScalar(-1),(Q=v.current.parent)==null||Q.matrixWorld.identity(),X.setFromObject(v.current,!0),O[0].set(X.min.x,X.min.y,X.min.z),O[1].set(X.min.x,X.min.y,X.max.z),O[2].set(X.min.x,X.max.y,X.min.z),O[3].set(X.min.x,X.max.y,X.max.z),O[4].set(X.max.x,X.min.y,X.min.z),O[5].set(X.max.x,X.min.y,X.max.z),O[6].set(X.max.x,X.max.y,X.min.z),O[7].set(X.max.x,X.max.y,X.max.z);for(let ie=0;ie<8;ie++)W[ie].copy(O[ie]);X.getCenter(Y),O.map(ie=>ie.sub(Y));const oe=J.set(U,0);O.map((ie,be)=>oe.projectPoint(ie,$[be]));const xe=$.reduce((ie,be)=>ie.add(be),z.set(0,0,0)).divideScalar($.length),pe=$.map(ie=>ie.distanceTo(xe)).reduce((ie,be)=>Math.max(ie,be)),de=O.map(ie=>ie.dot(Z)).reduce((ie,be)=>Math.max(ie,be));g.current.position.copy(V.copy(Z).multiplyScalar(de).add(Y)),g.current.lookAt(v.current.localToWorld(Y));const te=H.lookAt(g.current.position,Y,z.set(0,1,0));g.current.left=-pe,g.current.right=pe,g.current.top=pe,g.current.bottom=-pe;const Ee=z.set(0,pe,0).applyMatrix4(te),ue=(g.current.position.y+Ee.y)/Z.y;g.current.near=.1,g.current.far=ue,g.current.updateProjectionMatrix(),g.current.updateMatrixWorld();const ve=W.map((ie,be)=>ie.add(k[be].copy(Z).multiplyScalar(-ie.y/Z.y))),ye=ve.reduce((ie,be)=>ie.add(be),z.set(0,0,0)).divideScalar(ve.length),Be=2*ve.map(ie=>Math.hypot(ie.x-ye.x,ie.z-ye.z)).reduce((ie,be)=>Math.max(ie,be));p.current.scale.setScalar(Be),p.current.position.copy(ye),n&&((j=y.current)==null||j.update()),I.viewMatrix.value=M.viewMatrix.value=g.current.matrixWorldInverse;const ae=L.setFromProjectionMatrix(H.multiplyMatrices(g.current.projectionMatrix,g.current.matrixWorldInverse)).planes[4];T.cameraMatrixWorld=g.current.matrixWorld,T.cameraProjectionMatrixInv=g.current.projectionMatrixInverse,T.lightDir=U,T.lightPlaneNormal=ae.normal,T.lightPlaneConstant=ae.constant,T.near=g.current.near,T.far=g.current.far,T.resolution=u,T.size=pe,T.intensity=c,T.worldRadius=l,v.current.visible=!0,A.setRenderTarget(w),A.clear(),v.current.overrideMaterial=M,A.render(v.current,g.current),A.setRenderTarget(S),A.clear(),o&&(v.current.overrideMaterial=I,A.render(v.current,g.current)),v.current.overrideMaterial=null,T.ior=i,p.current.material.lightProjMatrix=g.current.projectionMatrix,p.current.material.lightViewMatrix=g.current.matrixWorldInverse,T.normalTexture=w.texture,T.depthTexture=w.depthTexture,A.setRenderTarget(C),A.clear(),D.render(A),T.ior=a,T.normalTexture=S.texture,T.depthTexture=S.depthTexture,A.setRenderTarget(b),A.clear(),o&&D.render(A),A.setRenderTarget(null),s&&(v.current.visible=!1)}}),E.useImperativeHandle(d,()=>m.current,[]),E.createElement("group",tt({ref:m},h),E.createElement("scene",{ref:v},E.createElement("orthographicCamera",{ref:g,up:[0,1,0]}),e),E.createElement("mesh",{renderOrder:2,ref:p,"rotation-x":-Math.PI/2},E.createElement("planeGeometry",null),E.createElement("causticsProjectionMaterial",{transparent:!0,color:r,causticsTexture:C.texture,causticsTextureB:b.texture,blending:sE,blendSrc:oE,blendDst:aE,depthWrite:!1}),n&&E.createElement(jW,null,E.createElement("lineBasicMaterial",{color:"#ffff00",toneMapped:!1}))))}),K3e=E.forwardRef(({mixBlur:n=0,mixStrength:e=.5,resolution:t=256,blur:i=[0,0],args:r=[1,1],minDepthThreshold:s=.9,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25,mirror:c=0,children:u,debug:f=0,distortion:h=1,mixContrast:d=1,distortionMap:m,...g},v)=>{Ai({MeshReflectorMaterial:RY}),E.useEffect(()=>{console.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")},[]);const p=Pe(({gl:$})=>$),A=Pe(({camera:$})=>$),y=Pe(({scene:$})=>$);i=Array.isArray(i)?i:[i,i];const w=i[0]+i[1]>0,S=E.useRef(null);E.useImperativeHandle(v,()=>S.current,[]);const[C]=E.useState(()=>new Hr),[b]=E.useState(()=>new F),[M]=E.useState(()=>new F),[I]=E.useState(()=>new F),[T]=E.useState(()=>new He),[D]=E.useState(()=>new F(0,0,-1)),[R]=E.useState(()=>new sn),[z]=E.useState(()=>new F),[L]=E.useState(()=>new F),[H]=E.useState(()=>new sn),[J]=E.useState(()=>new He),[Z]=E.useState(()=>new mn),U=E.useCallback(()=>{if(M.setFromMatrixPosition(S.current.matrixWorld),I.setFromMatrixPosition(A.matrixWorld),T.extractRotation(S.current.matrixWorld),b.set(0,0,1),b.applyMatrix4(T),z.subVectors(M,I),z.dot(b)>0)return;z.reflect(b).negate(),z.add(M),T.extractRotation(A.matrixWorld),D.set(0,0,-1),D.applyMatrix4(T),D.add(I),L.subVectors(M,D),L.reflect(b).negate(),L.add(M),Z.position.copy(z),Z.up.set(0,1,0),Z.up.applyMatrix4(T),Z.up.reflect(b),Z.lookAt(L),Z.far=A.far,Z.updateMatrixWorld(),Z.projectionMatrix.copy(A.projectionMatrix),J.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),J.multiply(Z.projectionMatrix),J.multiply(Z.matrixWorldInverse),J.multiply(S.current.matrixWorld),C.setFromNormalAndCoplanarPoint(b,M),C.applyMatrix4(Z.matrixWorldInverse),R.set(C.normal.x,C.normal.y,C.normal.z,C.constant);const $=Z.projectionMatrix;H.x=(Math.sign(R.x)+$.elements[8])/$.elements[0],H.y=(Math.sign(R.y)+$.elements[9])/$.elements[5],H.z=-1,H.w=(1+$.elements[10])/$.elements[14],R.multiplyScalar(2/R.dot(H)),$.elements[2]=R.x,$.elements[6]=R.y,$.elements[10]=R.z+1,$.elements[14]=R.w},[]),[X,Y,O,W]=E.useMemo(()=>{const $={type:jn,minFilter:Xt,magFilter:Xt},k=new Qn(t,t,$);k.depthBuffer=!0,k.depthTexture=new u0(t,t),k.depthTexture.format=Ja,k.depthTexture.type=Af;const V=new Qn(t,t,$),Q=new PY({gl:p,resolution:t,width:i[0],height:i[1],minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l}),j={mirror:c,textureMatrix:J,mixBlur:n,tDiffuse:k.texture,tDepth:k.depthTexture,tDiffuseBlur:V.texture,hasBlur:w,mixStrength:e,minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l,transparent:!0,debug:f,distortion:h,distortionMap:m,mixContrast:d,"defines-USE_BLUR":w?"":void 0,"defines-USE_DEPTH":a>0?"":void 0,"defines-USE_DISTORTION":m?"":void 0};return[k,V,Q,j]},[p,i,J,t,c,w,n,e,s,o,a,l,f,h,m,d]);return Bt(()=>{if(!(S!=null&&S.current))return;S.current.visible=!1;const $=p.xr.enabled,k=p.shadowMap.autoUpdate;U(),p.xr.enabled=!1,p.shadowMap.autoUpdate=!1,p.setRenderTarget(X),p.state.buffers.depth.setMask(!0),p.autoClear||p.clear(),p.render(y,Z),w&&O.render(p,X,Y),p.xr.enabled=$,p.shadowMap.autoUpdate=k,S.current.visible=!0,p.setRenderTarget(null)}),E.createElement("mesh",tt({ref:S},g),E.createElement("planeGeometry",{args:r}),u?u("meshReflectorMaterial",W):E.createElement("meshReflectorMaterial",W))});class $3e extends Wn{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new F(0,0,0)},lightColor:{value:new et("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new Se(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
        varying vec3 vNormal;
        varying float vViewZ;
        varying float vIntensity;
        uniform vec3 spotPosition;
        uniform float attenuation;

        #include <common>
        #include <logdepthbuf_pars_vertex>

        void main() {
          // compute intensity
          vNormal = normalize(normalMatrix * normal);
          vec4 worldPosition = modelMatrix * vec4(position, 1);
          vec4 viewPosition = viewMatrix * worldPosition;
          vViewZ = viewPosition.z;

          vIntensity = 1.0 - saturate(distance(worldPosition.xyz, spotPosition) / attenuation);

          gl_Position = projectionMatrix * viewPosition;

          #include <logdepthbuf_vertex>
        }
      `,fragmentShader:`
        varying vec3 vNormal;
        varying float vViewZ;
        varying float vIntensity;

        uniform vec3 lightColor;
        uniform float anglePower;
        uniform sampler2D depth;
        uniform vec2 resolution;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float opacity;

        #include <packing>
        #include <logdepthbuf_pars_fragment>

        float readDepth(sampler2D depthSampler, vec2 uv) {
          float fragCoordZ = texture(depthSampler, uv).r;

          // https://github.com/mrdoob/three.js/issues/23072
          #ifdef USE_LOGDEPTHBUF
            float viewZ = 1.0 - exp2(fragCoordZ * log(cameraFar + 1.0) / log(2.0));
          #else
            float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
          #endif

          return viewZ;
        }

        void main() {
          #include <logdepthbuf_fragment>

          vec3 normal = vec3(vNormal.x, vNormal.y, abs(vNormal.z));
          float angleIntensity = pow(dot(normal, vec3(0, 0, 1)), anglePower);
          float intensity = vIntensity * angleIntensity;

          // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
          bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
          if (isSoft) {
            vec2 uv = gl_FragCoord.xy / resolution;
            intensity *= smoothstep(0.0, 1.0, vViewZ - readDepth(depth, uv));
          }

          gl_FragColor = vec4(lightColor, intensity * opacity);

          #include <tonemapping_fragment>
          #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
        }
      `})}}var Z3e=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D uShadowMap;uniform float uTime;void main(){vec3 color=texture2D(uShadowMap,vUv).xyz;gl_FragColor=vec4(color,1.);}`;const eEe=n=>n==null?void 0:n.isSpotLight;function tEe({opacity:n=1,radiusTop:e,radiusBottom:t,depthBuffer:i,color:r="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5}){const c=E.useRef(null),u=Pe(v=>v.size),f=Pe(v=>v.camera),h=Pe(v=>v.viewport.dpr),[d]=E.useState(()=>new $3e),[m]=E.useState(()=>new F);e=e===void 0?.1:e,t=t===void 0?o*7:t,Bt(()=>{d.uniforms.spotPosition.value.copy(c.current.getWorldPosition(m)),c.current.lookAt(c.current.parent.target.getWorldPosition(m))});const g=E.useMemo(()=>{const v=new Nr(e,t,s,128,64,!0);return v.applyMatrix4(new He().makeTranslation(0,-s/2,0)),v.applyMatrix4(new He().makeRotationX(-Math.PI/2)),v},[s,e,t]);return E.createElement(E.Fragment,null,E.createElement("mesh",{ref:c,geometry:g,raycast:()=>null},E.createElement("primitive",{object:d,attach:"material","uniforms-opacity-value":n,"uniforms-lightColor-value":r,"uniforms-attenuation-value":a,"uniforms-anglePower-value":l,"uniforms-depth-value":i,"uniforms-cameraNear-value":f.near,"uniforms-cameraFar-value":f.far,"uniforms-resolution-value":i?[u.width*h,u.height*h]:[0,0]})))}function WY(n,e,t,i,r){const[[s,o]]=E.useState(()=>[new F,new F]);E.useLayoutEffect(()=>{if(eEe(n.current))n.current.shadow.mapSize.set(t,i),n.current.shadow.needsUpdate=!0;else throw new Error("SpotlightShadow must be a child of a SpotLight")},[n,t,i]),Bt(()=>{if(!n.current)return;const a=n.current.position,l=n.current.target.position;o.copy(l).sub(a);var c=o.length();o.normalize().multiplyScalar(c*r),s.copy(a).add(o),e.current.position.copy(s),e.current.lookAt(n.current.target.position)})}function nEe({distance:n=.4,alphaTest:e=.5,map:t,shader:i=Z3e,width:r=512,height:s=512,scale:o=1,children:a,...l}){const c=E.useRef(null),u=l.spotlightRef,f=l.debug;WY(u,c,r,s,n);const h=E.useMemo(()=>new Qn(r,s,{format:Vn,stencilBuffer:!1}),[r,s]),d=E.useRef({uShadowMap:{value:t},uTime:{value:0}});E.useEffect(()=>void(d.current.uShadowMap.value=t),[t]);const m=E.useMemo(()=>new xc(new Wn({uniforms:d.current,vertexShader:`
          varying vec2 vUv;

          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
          `,fragmentShader:i})),[i]);return E.useEffect(()=>()=>{m.material.dispose(),m.dispose()},[m]),E.useEffect(()=>()=>h.dispose(),[h]),Bt(({gl:g},v)=>{d.current.uTime.value+=v,g.setRenderTarget(h),m.render(g),g.setRenderTarget(null)}),E.createElement(E.Fragment,null,E.createElement("mesh",{ref:c,scale:o,castShadow:!0},E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,side:ni,alphaTest:e,alphaMap:h.texture,"alphaMap-wrapS":Wr,"alphaMap-wrapT":Wr,opacity:f?1:0},a)))}function iEe({distance:n=.4,alphaTest:e=.5,map:t,width:i=512,height:r=512,scale:s,children:o,...a}){const l=E.useRef(null),c=a.spotlightRef,u=a.debug;return WY(c,l,i,r,n),E.createElement(E.Fragment,null,E.createElement("mesh",{ref:l,scale:s,castShadow:!0},E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,side:ni,alphaTest:e,alphaMap:t,"alphaMap-wrapS":Wr,"alphaMap-wrapT":Wr,opacity:u?1:0},o)))}function rEe(n){return n.shader?E.createElement(nEe,n):E.createElement(iEe,n)}const sEe=E.forwardRef(({opacity:n=1,radiusTop:e,radiusBottom:t,depthBuffer:i,color:r="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5,volumetric:c=!0,debug:u=!1,children:f,...h},d)=>{const m=E.useRef(null);return E.useImperativeHandle(d,()=>m.current,[]),E.createElement("group",null,u&&m.current&&E.createElement("spotLightHelper",{args:[m.current]}),E.createElement("spotLight",tt({ref:m,angle:o,color:r,distance:s,castShadow:!0},h),c&&E.createElement(tEe,{debug:u,opacity:n,radiusTop:e,radiusBottom:t,depthBuffer:i,color:r,distance:s,angle:o,attenuation:a,anglePower:l})),f&&E.cloneElement(f,{spotlightRef:m,debug:u}))}),oEe=E.forwardRef(({args:n,map:e,toneMapped:t=!1,color:i="white",form:r="rect",intensity:s=1,scale:o=1,target:a,children:l,...c},u)=>{const f=E.useRef(null);return E.useImperativeHandle(u,()=>f.current,[]),E.useLayoutEffect(()=>{!l&&!c.material&&(yr(f.current.material,{color:i}),f.current.material.color.multiplyScalar(s))},[i,s,l,c.material]),E.useLayoutEffect(()=>{a&&f.current.lookAt(Array.isArray(a)?new F(...a):a)},[a]),o=Array.isArray(o)&&o.length===2?[o[0],o[1],1]:o,E.createElement("mesh",tt({ref:f,scale:o},c),r==="circle"?E.createElement("ringGeometry",{args:[0,1,64]}):r==="ring"?E.createElement("ringGeometry",{args:[.5,1,64]}):r==="rect"?E.createElement("planeGeometry",null):E.createElement(r,{args:n}),l||(c.material?null:E.createElement("meshBasicMaterial",{toneMapped:t,map:e,side:ni})))});function YY(n,e,t=new F){const i=Math.PI*(n-.5),r=2*Math.PI*(e-.5);return t.x=Math.cos(r),t.y=Math.sin(i),t.z=Math.sin(r),t}const aEe=E.forwardRef(({inclination:n=.6,azimuth:e=.1,distance:t=1e3,mieCoefficient:i=.005,mieDirectionalG:r=.8,rayleigh:s=.5,turbidity:o=10,sunPosition:a=YY(n,e),...l},c)=>{const u=E.useMemo(()=>new F().setScalar(t),[t]),[f]=E.useState(()=>new H8);return E.createElement("primitive",tt({object:f,ref:c,"material-uniforms-mieCoefficient-value":i,"material-uniforms-mieDirectionalG-value":r,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":a,"material-uniforms-turbidity-value":o,scale:u},l))});class lEe extends Wn{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const cEe=n=>new F().setFromSpherical(new Wh(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),uEe=E.forwardRef(({radius:n=100,depth:e=50,count:t=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:o=1},a)=>{const l=E.useRef(),[c,u,f]=E.useMemo(()=>{const d=[],m=[],g=Array.from({length:t},()=>(.5+.5*Math.random())*r),v=new et;let p=n+e;const A=e/t;for(let y=0;y<t;y++)p-=A*Math.random(),d.push(...cEe(p).toArray()),v.setHSL(y/t,i,.9),m.push(v.r,v.g,v.b);return[new Float32Array(d),new Float32Array(m),new Float32Array(g)]},[t,e,r,n,i]);Bt(d=>l.current&&(l.current.uniforms.time.value=d.clock.getElapsedTime()*o));const[h]=E.useState(()=>new lEe);return E.createElement("points",{ref:a},E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3]}),E.createElement("bufferAttribute",{attach:"attributes-color",args:[u,3]}),E.createElement("bufferAttribute",{attach:"attributes-size",args:[f,1]})),E.createElement("primitive",{ref:l,object:h,attach:"material",blending:e3,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});let Fx;const fEe=new Uint8Array(16);function hEe(){if(!Fx&&(Fx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Fx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fx(fEe)}const Zr=[];for(let n=0;n<256;++n)Zr.push((n+256).toString(16).slice(1));function dEe(n,e=0){return Zr[n[e+0]]+Zr[n[e+1]]+Zr[n[e+2]]+Zr[n[e+3]]+"-"+Zr[n[e+4]]+Zr[n[e+5]]+"-"+Zr[n[e+6]]+Zr[n[e+7]]+"-"+Zr[n[e+8]]+Zr[n[e+9]]+"-"+Zr[n[e+10]]+Zr[n[e+11]]+Zr[n[e+12]]+Zr[n[e+13]]+Zr[n[e+14]]+Zr[n[e+15]]}const pEe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Tz={randomUUID:pEe};function mEe(n,e,t){if(Tz.randomUUID&&!e&&!n)return Tz.randomUUID();n=n||{};const i=n.random||(n.rng||hEe)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,dEe(i)}const gEe="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png",Bz=new He,Ox=new F,zx=new Lt,Pz=new F,Rz=new Lt,eg=new F,f9=E.createContext(null),XY=E.forwardRef(({children:n,material:e=pv,texture:t=gEe,range:i,limit:r=200,frustumCulled:s,...o},a)=>{var l,c;const u=E.useMemo(()=>class extends e{constructor(){super();const M=parseInt(il.replace(/\D+/g,""))>=154?"opaque_fragment":"output_fragment";this.onBeforeCompile=I=>{I.vertexShader=`attribute float opacity;
               varying float vOpacity;
              `+I.vertexShader.replace("#include <fog_vertex>",`#include <fog_vertex>
                 vOpacity = opacity;
                `),I.fragmentShader=`varying float vOpacity;
              `+I.fragmentShader.replace(`#include <${M}>`,`#include <${M}>
                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);
                `)}}},[e]);Ai({CloudMaterial:u});const f=E.useRef(null),h=E.useRef([]),d=E.useMemo(()=>new Float32Array(Array.from({length:r},()=>1)),[r]),m=E.useMemo(()=>new Float32Array(Array.from({length:r},()=>[1,1,1]).flat()),[r]),g=wf(t);let v=0,p=0,A;const y=new Lt,w=new F(0,0,1),S=new F;Bt((M,I)=>{for(v=M.clock.getElapsedTime(),Bz.copy(f.current.matrixWorld).invert(),M.camera.matrixWorld.decompose(Pz,Rz,eg),p=0;p<h.current.length;p++)A=h.current[p],A.ref.current.matrixWorld.decompose(Ox,zx,eg),Ox.add(S.copy(A.position).applyQuaternion(zx).multiply(eg)),zx.copy(Rz).multiply(y.setFromAxisAngle(w,A.rotation+=I*A.rotationFactor)),eg.multiplyScalar(A.volume+(1+Math.sin(v*A.density*A.speed))/2*A.growth),A.matrix.compose(Ox,zx,eg).premultiply(Bz),A.dist=Ox.distanceTo(Pz);for(h.current.sort((T,D)=>D.dist-T.dist),p=0;p<h.current.length;p++)A=h.current[p],d[p]=A.opacity*(A.dist<A.fade-1?A.dist/A.fade:1),f.current.setMatrixAt(p,A.matrix),f.current.setColorAt(p,A.color);f.current.geometry.attributes.opacity.needsUpdate=!0,f.current.instanceMatrix.needsUpdate=!0,f.current.instanceColor&&(f.current.instanceColor.needsUpdate=!0)}),E.useLayoutEffect(()=>{const M=Math.min(r,i!==void 0?i:r,h.current.length);f.current.count=M,Zg(f.current.instanceMatrix,{offset:0,count:M*16}),f.current.instanceColor&&Zg(f.current.instanceColor,{offset:0,count:M*3}),Zg(f.current.geometry.attributes.opacity,{offset:0,count:M})});let C=[(l=g.image.width)!==null&&l!==void 0?l:1,(c=g.image.height)!==null&&c!==void 0?c:1],b=Math.max(C[0],C[1]);return C=[C[0]/b,C[1]/b],E.createElement("group",tt({ref:a},o),E.createElement(f9.Provider,{value:h},n,E.createElement("instancedMesh",{matrixAutoUpdate:!1,ref:f,args:[null,null,r],frustumCulled:s},E.createElement("instancedBufferAttribute",{usage:ms,attach:"instanceColor",args:[m,3]}),E.createElement("planeGeometry",{args:[...C]},E.createElement("instancedBufferAttribute",{usage:ms,attach:"attributes-opacity",args:[d,1]})),E.createElement("cloudMaterial",{key:e.name,map:g,transparent:!0,depthWrite:!1}))))}),Q6=E.forwardRef(({opacity:n=1,speed:e=0,bounds:t=[5,1,1],segments:i=20,color:r="#ffffff",fade:s=10,volume:o=6,smallestVolume:a=.25,distribute:l=null,growth:c=4,concentrate:u="inside",seed:f=Math.random(),...h},d)=>{function m(){const y=Math.sin(f++)*1e4;return y-Math.floor(y)}const g=E.useContext(f9),v=E.useRef(null),[p]=E.useState(()=>mEe()),A=E.useMemo(()=>[...new Array(i)].map((y,w)=>({segments:i,bounds:new F(1,1,1),position:new F,uuid:p,index:w,ref:v,dist:0,matrix:new He,color:new et,rotation:w*(Math.PI/i)})),[i,p]);return E.useLayoutEffect(()=>{A.forEach((y,w)=>{var S;yr(y,{volume:o,color:r,speed:e,growth:c,opacity:n,fade:s,bounds:t,density:Math.max(.5,m()),rotationFactor:Math.max(.2,.5*m())*e});const C=l==null?void 0:l(y,w);(C||i>1)&&y.position.copy(y.bounds).multiply((S=C==null?void 0:C.point)!==null&&S!==void 0?S:{x:m()*2-1,y:m()*2-1,z:m()*2-1});const b=Math.abs(y.position.x),M=Math.abs(y.position.y),I=Math.abs(y.position.z),T=Math.max(b,M,I);y.length=1,b===T&&(y.length-=b/y.bounds.x),M===T&&(y.length-=M/y.bounds.y),I===T&&(y.length-=I/y.bounds.z),y.volume=((C==null?void 0:C.volume)!==void 0?C.volume:Math.max(Math.max(0,a),u==="random"?m():u==="inside"?y.length:1-y.length))*o})},[u,t,s,r,n,c,o,f,i,e]),E.useLayoutEffect(()=>{const y=A;return g.current=[...g.current,...y],()=>{g.current=g.current.filter(w=>w.uuid!==p)}},[A]),E.useImperativeHandle(d,()=>v.current,[]),E.createElement("group",tt({ref:v},h))}),AEe=E.forwardRef((n,e)=>E.useContext(f9)?E.createElement(Q6,tt({ref:e},n)):E.createElement(XY,null,E.createElement(Q6,tt({ref:e},n)))),vEe=Po({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
    }`),qY=n=>n&&n.constructor===Float32Array,yEe=n=>[n.r,n.g,n.b],JY=n=>n instanceof Se||n instanceof F||n instanceof sn,KY=n=>Array.isArray(n)?n:JY(n)?n.toArray():[n,n,n];function tg(n,e,t){return E.useMemo(()=>{if(e!==void 0){if(qY(e))return e;if(e instanceof et){const i=Array.from({length:n*3},()=>yEe(e)).flat();return Float32Array.from(i)}else if(JY(e)||Array.isArray(e)){const i=Array.from({length:n*3},()=>KY(e)).flat();return Float32Array.from(i)}return Float32Array.from({length:n},()=>e)}return Float32Array.from({length:n},t)},[e])}const xEe=E.forwardRef(({noise:n=1,count:e=100,speed:t=1,opacity:i=1,scale:r=1,size:s,color:o,children:a,...l},c)=>{E.useMemo(()=>Ai({SparklesImplMaterial:vEe}),[]);const u=E.useRef(null),f=Pe(y=>y.viewport.dpr),h=KY(r),d=E.useMemo(()=>Float32Array.from(Array.from({length:e},()=>h.map(jt.randFloatSpread)).flat()),[e,...h]),m=tg(e,s,Math.random),g=tg(e,i),v=tg(e,t),p=tg(e*3,n),A=tg(o===void 0?e*3:e,qY(o)?o:new et(o),()=>1);return Bt(y=>{u.current&&u.current.material&&(u.current.material.time=y.clock.elapsedTime)}),E.useImperativeHandle(c,()=>u.current,[]),E.createElement("points",tt({key:`particle-${e}-${JSON.stringify(r)}`},l,{ref:u}),E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",args:[d,3]}),E.createElement("bufferAttribute",{attach:"attributes-size",args:[m,1]}),E.createElement("bufferAttribute",{attach:"attributes-opacity",args:[g,1]}),E.createElement("bufferAttribute",{attach:"attributes-speed",args:[v,1]}),E.createElement("bufferAttribute",{attach:"attributes-color",args:[A,3]}),E.createElement("bufferAttribute",{attach:"attributes-noise",args:[p,3]})),a||E.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:f,depthWrite:!1}))});function _Ee(n){switch(n){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}const EEe="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",wEe="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function $Y(n=0,e=1024,t){const i=Qc(()=>fetch(EEe).then(u=>u.json()),["matcapList"]),r=i[0],s=E.useMemo(()=>Object.keys(i).length,[]),a=`${E.useMemo(()=>typeof n=="string"?n:typeof n=="number"?i[n]:null,[n])||r}${_Ee(e)}.png`,l=`${wEe}/${e}/${a}`;return[wf(l,t),l,s]}const SEe=({children:n,id:e,format:t,onLoad:i})=>{const r=$Y(e,t,i);return E.createElement(E.Fragment,null,n==null?void 0:n(r))},CEe="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",bEe="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function ZY(n=0,e={},t){const{repeat:i=[1,1],anisotropy:r=1,offset:s=[0,0]}=e,o=Qc(()=>fetch(bEe).then(h=>h.json()),["normalsList"]),a=E.useMemo(()=>Object.keys(o).length,[]),l=o[0],c=o[n]||l,u=`${CEe}/normals/${c}`,f=wf(u,t);return E.useLayoutEffect(()=>{f&&(f.wrapS=f.wrapT=Wr,f.repeat=new Se(i[0],i[1]),f.offset=new Se(s[0],s[1]),f.anisotropy=r)},[f,r,i,s]),[f,u,a]}const MEe=({children:n,id:e,onLoad:t,...i})=>{const r=ZY(e,i,t);return E.createElement(E.Fragment,null,n==null?void 0:n(r))},$u={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new et("#ff0000"),backfaceStroke:new et("#0000ff"),fill:new et("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},IEe=Po($u.uniforms,$u.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,$u.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function TEe(n,e){n.onBeforeCompile=t=>{t.uniforms={...t.uniforms,...e},t.vertexShader=t.vertexShader.replace("void main() {",`
		  ${$u.vertex}
		  void main() {
			initWireframe();
		`),t.fragmentShader=t.fragmentShader.replace("void main() {",`
		  ${$u.fragment}
		  void main() {
		`),t.fragmentShader=t.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},n.side=ni,n.transparent=!0}function BEe(n,e){E.useEffect(()=>{var t;return void(n.fillOpacity.value=(t=e.fillOpacity)!==null&&t!==void 0?t:n.fillOpacity.value)},[e.fillOpacity]),E.useEffect(()=>{var t;return void(n.fillMix.value=(t=e.fillMix)!==null&&t!==void 0?t:n.fillMix.value)},[e.fillMix]),E.useEffect(()=>{var t;return void(n.strokeOpacity.value=(t=e.strokeOpacity)!==null&&t!==void 0?t:n.strokeOpacity.value)},[e.strokeOpacity]),E.useEffect(()=>{var t;return void(n.thickness.value=(t=e.thickness)!==null&&t!==void 0?t:n.thickness.value)},[e.thickness]),E.useEffect(()=>void(n.colorBackfaces.value=!!e.colorBackfaces),[e.colorBackfaces]),E.useEffect(()=>void(n.dash.value=!!e.dash),[e.dash]),E.useEffect(()=>void(n.dashInvert.value=!!e.dashInvert),[e.dashInvert]),E.useEffect(()=>{var t;return void(n.dashRepeats.value=(t=e.dashRepeats)!==null&&t!==void 0?t:n.dashRepeats.value)},[e.dashRepeats]),E.useEffect(()=>{var t;return void(n.dashLength.value=(t=e.dashLength)!==null&&t!==void 0?t:n.dashLength.value)},[e.dashLength]),E.useEffect(()=>void(n.squeeze.value=!!e.squeeze),[e.squeeze]),E.useEffect(()=>{var t;return void(n.squeezeMin.value=(t=e.squeezeMin)!==null&&t!==void 0?t:n.squeezeMin.value)},[e.squeezeMin]),E.useEffect(()=>{var t;return void(n.squeezeMax.value=(t=e.squeezeMax)!==null&&t!==void 0?t:n.squeezeMax.value)},[e.squeezeMax]),E.useEffect(()=>void(n.stroke.value=e.stroke?new et(e.stroke):n.stroke.value),[e.stroke]),E.useEffect(()=>void(n.fill.value=e.fill?new et(e.fill):n.fill.value),[e.fill]),E.useEffect(()=>void(n.backfaceStroke.value=e.backfaceStroke?new et(e.backfaceStroke):n.backfaceStroke.value),[e.backfaceStroke])}function PEe(n){return!!(n!=null&&n.geometry)}function REe(n){return!!(n!=null&&n.isBufferGeometry)}function DEe(n){return!!(n!=null&&n.current)}function Dz(n){return(n==null?void 0:n.current)!==void 0}function Lz(n){return n.type==="WireframeGeometry"}function LEe(){const n={};for(const e in $u.uniforms)n[e]={value:$u.uniforms[e]};return n}function FEe(n,e){const i=n.getAttribute("position").count,r=[];for(let s=0;s<i;s++){const o=s%2===0,a=e?1:0;o?r.push(0,0,1,0,1,0,1,0,a):r.push(0,1,0,0,0,1,1,0,a)}return new qt(Float32Array.from(r),3)}function eX(n){const e=DEe(n)?n.current:n;if(REe(e))return e;{if(Lz(e))throw new Error("Wireframe: WireframeGeometry is not supported.");const t=e.parent;if(PEe(t)){if(Lz(t.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return t.geometry}}}function tX(n,e){if(n.index){console.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const i=n.toNonIndexed();n.copy(i),n.setIndex(null)}const t=FEe(n,e);n.setAttribute("barycentric",t)}function OEe({geometry:n,simplify:e=!1,...t}){Ai({MeshWireframeMaterial:IEe});const[i,r]=E.useState(null);E.useLayoutEffect(()=>{const o=eX(n);if(!o)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");tX(o,e),Dz(n)&&r(o)},[e,n]);const s=Dz(n)?i:n;return E.createElement(E.Fragment,null,s&&E.createElement("mesh",{geometry:s},E.createElement("meshWireframeMaterial",tt({attach:"material",transparent:!0,side:ni,polygonOffset:!0,polygonOffsetFactor:-4},t,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function zEe({simplify:n=!1,...e}){const t=E.useRef(null),i=E.useMemo(()=>LEe(),[$u.uniforms]);return BEe(i,e),E.useLayoutEffect(()=>{const r=eX(t);if(!r)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const s=r.clone();return tX(r,n),()=>{r.copy(s),s.dispose()}},[n]),E.useLayoutEffect(()=>{const r=t.current.parent,s=r.material.clone();return TEe(r.material,i),()=>{r.material.dispose(),r.material=s}},[]),E.createElement("object3D",{ref:t})}function UEe({geometry:n,...e}){return n?E.createElement(OEe,tt({geometry:n},e)):E.createElement(zEe,e)}function kEe({opacity:n,alphaMap:e}){const t=E.useRef(null),i=E.useRef(null),r=E.useRef({value:1}),s=E.useRef({value:null}),o=E.useRef({value:!1});return E.useLayoutEffect(()=>{t.current.onBeforeCompile=i.current.onBeforeCompile=a=>{const l=a.fragmentShader.indexOf("void main");let c="",u,f=l;for(;u!==`
`&&f<l+100;)u=a.fragmentShader.charAt(f),c+=u,f++;c=c.trim(),a.vertexShader=a.vertexShader.replace("void main() {",`
        varying vec2 custom_vUv;

        void main() {
          custom_vUv = uv;
          
        `),a.fragmentShader=a.fragmentShader.replace(c,`
          uniform float uShadowOpacity;
          uniform sampler2D uAlphaMap;
          uniform bool uHasAlphaMap;

          varying vec2 custom_vUv;
  
          float bayerDither2x2( vec2 v ) {
            return mod( 3.0 * v.y + 2.0 * v.x, 4.0 );
          }
    
          float bayerDither4x4( vec2 v ) {
            vec2 P1 = mod( v, 2.0 );
            vec2 P2 = mod( floor( 0.5  * v ), 2.0 );
            return 4.0 * bayerDither2x2( P1 ) + bayerDither2x2( P2 );
          }
  
          void main() {
            float alpha = 
              uHasAlphaMap ? 
                uShadowOpacity * texture2D(uAlphaMap, custom_vUv).x
              : uShadowOpacity;

            if( ( bayerDither4x4( floor( mod( gl_FragCoord.xy, 4.0 ) ) ) ) / 16.0 >= alpha ) discard;
            
          `),a.uniforms.uShadowOpacity=r.current,a.uniforms.uAlphaMap=s.current,a.uniforms.uHasAlphaMap=o.current}},[]),Bt(()=>{var a;const l=(a=t.current.__r3f)==null?void 0:a.parent;if(l){const c=l.material;c&&(r.current.value=n??c.opacity,e===!1?(s.current.value=null,o.current.value=!1):(s.current.value=e||c.alphaMap,o.current.value=!!s.current.value))}}),E.createElement(E.Fragment,null,E.createElement("meshDepthMaterial",{ref:t,attach:"customDepthMaterial",depthPacking:hE}),E.createElement("meshDistanceMaterial",{ref:i,attach:"customDistanceMaterial"}))}const Fz=new He,w5=new xa,Oz=new Bi,NEe=new F;class nX extends qs{constructor(){super(),this.size=0,this.color=new et("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){var i,r;const s=this.instance.current;if(!s||!s.geometry)return;const o=s.userData.instances.indexOf(this.instanceKey);if(o===-1||o>s.geometry.drawRange.count)return;const a=(i=(r=e.params.Points)==null?void 0:r.threshold)!==null&&i!==void 0?i:1;if(Oz.set(this.getWorldPosition(NEe),a),e.ray.intersectsSphere(Oz)===!1)return;Fz.copy(s.matrixWorld).invert(),w5.copy(e.ray).applyMatrix4(Fz);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=w5.distanceSqToPoint(this.position);if(u<c){const f=new F;w5.closestPointToPoint(this.position,f),f.applyMatrix4(this.matrixWorld);const h=e.ray.origin.distanceTo(f);if(h<e.near||h>e.far)return;t.push({distance:h,distanceToRay:Math.sqrt(u),point:f,index:o,face:null,object:this})}}}let ih,ng;const iX=E.createContext(null),zz=new He,Uz=new F,GEe=E.forwardRef(({children:n,range:e,limit:t=1e3,...i},r)=>{const s=E.useRef(null);E.useImperativeHandle(r,()=>s.current,[]);const[o,a]=E.useState([]),[[l,c,u]]=E.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);E.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Bt(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),zz.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),ih=0;ih<o.length;ih++)ng=o[ih].current,ng.getWorldPosition(Uz).applyMatrix4(zz),Uz.toArray(l,ih*3),s.current.geometry.attributes.position.needsUpdate=!0,ng.matrixWorldNeedsUpdate=!0,ng.color.toArray(c,ih*3),s.current.geometry.attributes.color.needsUpdate=!0,u.set([ng.size],ih),s.current.geometry.attributes.size.needsUpdate=!0});const f=E.useMemo(()=>({getParent:()=>s,subscribe:h=>(a(d=>[...d,h]),()=>a(d=>d.filter(m=>m.current!==h.current)))}),[]);return E.createElement("points",tt({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},i),E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:ms}),E.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:ms}),E.createElement("bufferAttribute",{attach:"attributes-size",count:u.length,array:u,itemSize:1,usage:ms})),E.createElement(iX.Provider,{value:f},n))}),HEe=E.forwardRef(({children:n,...e},t)=>{E.useMemo(()=>Ai({PositionPoint:nX}),[]);const i=E.useRef(null);E.useImperativeHandle(t,()=>i.current,[]);const{subscribe:r,getParent:s}=E.useContext(iX);return E.useLayoutEffect(()=>r(i),[]),E.createElement("positionPoint",tt({instance:s(),instanceKey:i,ref:i},e),n)}),rX=E.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:r=3,...s},o)=>{const a=E.useRef(null);return E.useImperativeHandle(o,()=>a.current,[]),Bt(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),E.createElement("points",tt({ref:a},s),E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:ms}),t&&E.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:ms}),i&&E.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:ms})),n)}),QEe=E.forwardRef((n,e)=>n.positions instanceof Float32Array?E.createElement(rX,tt({},n,{ref:e})):E.createElement(GEe,tt({},n,{ref:e}))),sX=E.createContext(null),VEe=E.forwardRef((n,e)=>{E.useMemo(()=>Ai({SegmentObject:oX}),[]);const{limit:t=1e3,lineWidth:i=1,children:r,...s}=n,[o,a]=E.useState([]),[l]=E.useState(()=>new TW),[c]=E.useState(()=>new Aw),[u]=E.useState(()=>new gw),[f]=E.useState(()=>new Se(512,512)),[h]=E.useState(()=>Array(t*6).fill(0)),[d]=E.useState(()=>Array(t*6).fill(0)),m=E.useMemo(()=>({subscribe:g=>(a(v=>[...v,g]),()=>a(v=>v.filter(p=>p.current!==g.current)))}),[]);return Bt(()=>{for(let v=0;v<t;v++){var g;const p=(g=o[v])==null?void 0:g.current;p&&(h[v*6+0]=p.start.x,h[v*6+1]=p.start.y,h[v*6+2]=p.start.z,h[v*6+3]=p.end.x,h[v*6+4]=p.end.y,h[v*6+5]=p.end.z,d[v*6+0]=p.color.r,d[v*6+1]=p.color.g,d[v*6+2]=p.color.b,d[v*6+3]=p.color.r,d[v*6+4]=p.color.g,d[v*6+5]=p.color.b)}u.setColors(d),u.setPositions(h),l.computeLineDistances()}),E.createElement("primitive",{object:l,ref:e},E.createElement("primitive",{object:u,attach:"geometry"}),E.createElement("primitive",tt({object:c,attach:"material",vertexColors:!0,resolution:f,linewidth:i},s)),E.createElement(sX.Provider,{value:m},r))});class oX{constructor(){this.color=new et("white"),this.start=new F(0,0,0),this.end=new F(0,0,0)}}const kz=n=>n instanceof F?n:new F(...typeof n=="number"?[n,n,n]:n),jEe=E.forwardRef(({color:n,start:e,end:t},i)=>{const r=E.useContext(sX);if(!r)throw"Segment must used inside Segments component.";const s=E.useRef(null);return E.useImperativeHandle(i,()=>s.current,[]),E.useLayoutEffect(()=>r.subscribe(s),[]),E.createElement("segmentObject",{ref:s,color:n,start:kz(e),end:kz(t)})}),WEe=E.forwardRef(({children:n,hysteresis:e=0,distances:t,...i},r)=>{const s=E.useRef(null);return E.useImperativeHandle(r,()=>s.current,[]),E.useLayoutEffect(()=>{const{current:o}=s;o.levels.length=0,o.children.forEach((a,l)=>o.levels.push({object:a,hysteresis:e,distance:t[l]}))}),Bt(o=>{var a;return(a=s.current)==null?void 0:a.update(o.camera)}),E.createElement("lOD",tt({ref:s},i),n)});function YEe({all:n,scene:e,camera:t}){const i=Pe(({gl:o})=>o),r=Pe(({camera:o})=>o),s=Pe(({scene:o})=>o);return E.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,t||r);const a=new a0(128);new mE(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}function XEe(){const n=Pe(e=>e.gl);return E.useEffect(()=>(n.shadowMap.autoUpdate=!1,n.shadowMap.needsUpdate=!0,()=>{n.shadowMap.autoUpdate=n.shadowMap.needsUpdate=!0}),[n.shadowMap]),null}const Nz=new He,Gz=new xa,S5=new Bi,C5=new F;function qEe(n,e){const t=this.geometry,i=this.material,r=this.matrixWorld;i!==void 0&&(t.boundingSphere===null&&t.computeBoundingSphere(),S5.copy(t.boundingSphere),S5.applyMatrix4(r),n.ray.intersectsSphere(S5)!==!1&&(Nz.copy(r).invert(),Gz.copy(n.ray).applyMatrix4(Nz),!(t.boundingBox!==null&&Gz.intersectBox(t.boundingBox,C5)===null)&&e.push({distance:C5.distanceTo(n.ray.origin),point:C5.clone(),object:this})))}function JEe({pixelated:n}){const e=Pe(o=>o.gl),t=Pe(o=>o.internal.active),i=Pe(o=>o.performance.current),r=Pe(o=>o.viewport.initialDpr),s=Pe(o=>o.setDpr);return E.useEffect(()=>{const o=e.domElement;return()=>{t&&s(r),n&&o&&(o.style.imageRendering="auto")}},[]),E.useEffect(()=>{s(i*r),n&&e.domElement&&(e.domElement.style.imageRendering=i===1?"auto":"pixelated")},[i]),null}function KEe(){const n=Pe(i=>i.get),e=Pe(i=>i.setEvents),t=Pe(i=>i.performance.current);return E.useEffect(()=>{const i=n().events.enabled;return()=>e({enabled:i})},[]),E.useEffect(()=>e({enabled:t===1}),[t]),null}const aX=E.createContext(null);function $Ee({iterations:n=10,ms:e=250,threshold:t=.75,step:i=.1,factor:r=.5,flipflops:s=1/0,bounds:o=h=>h>100?[60,100]:[40,60],onIncline:a,onDecline:l,onChange:c,onFallback:u,children:f}){const h=Math.pow(10,0),[d,m]=E.useState(()=>({fps:0,index:0,factor:r,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:v=>{const p=Symbol();return d.subscriptions.set(p,v.current),()=>void d.subscriptions.delete(p)}}));let g=0;return Bt(()=>{const{frames:v,averages:p}=d;if(!d.fallback&&p.length<n){v.push(performance.now());const A=v[v.length-1]-v[0];if(A>=e){if(d.fps=Math.round(v.length/A*1e3*h)/h,d.refreshrate=Math.max(d.refreshrate,d.fps),p[d.index++%n]=d.fps,p.length===n){const[y,w]=o(d.refreshrate),S=p.filter(b=>b>=w),C=p.filter(b=>b<y);S.length>n*t&&(d.factor=Math.min(1,d.factor+i),d.flipped++,a&&a(d),d.subscriptions.forEach(b=>b.onIncline&&b.onIncline(d))),C.length>n*t&&(d.factor=Math.max(0,d.factor-i),d.flipped++,l&&l(d),d.subscriptions.forEach(b=>b.onDecline&&b.onDecline(d))),g!==d.factor&&(g=d.factor,c&&c(d),d.subscriptions.forEach(b=>b.onChange&&b.onChange(d))),d.flipped>s&&!d.fallback&&(d.fallback=!0,u&&u(d),d.subscriptions.forEach(b=>b.onFallback&&b.onFallback(d))),d.averages=[]}d.frames=[]}}}),E.createElement(aX.Provider,{value:d},f)}function ZEe({onIncline:n,onDecline:e,onChange:t,onFallback:i}){const r=E.useContext(aX),s=E.useRef({onIncline:n,onDecline:e,onChange:t,onFallback:i});E.useLayoutEffect(()=>{s.current.onIncline=n,s.current.onDecline=e,s.current.onChange=t,s.current.onFallback=i},[n,e,t,i]),E.useLayoutEffect(()=>r.subscribe(s),[r])}const lX=E.forwardRef(({children:n,compute:e,width:t,height:i,samples:r=8,renderPriority:s=0,eventPriority:o=0,frames:a=1/0,stencilBuffer:l=!1,depthBuffer:c=!0,generateMipmaps:u=!1,...f},h)=>{const{size:d,viewport:m}=Pe(),g=Bs((t||d.width)*m.dpr,(i||d.height)*m.dpr,{samples:r,stencilBuffer:l,depthBuffer:c,generateMipmaps:u}),[v]=E.useState(()=>new Mo),p=E.useCallback((A,y,w)=>{var S,C;let b=(S=g.texture)==null?void 0:S.__r3f.parent;for(;b&&!(b instanceof Jt);)b=b.__r3f.parent;if(!b)return!1;w.raycaster.camera||w.events.compute(A,w,(C=w.previousRoot)==null?void 0:C.getState());const[M]=w.raycaster.intersectObject(b);if(!M)return!1;const I=M.uv;if(!I)return!1;y.raycaster.setFromCamera(y.pointer.set(I.x*2-1,I.y*2-1),y.camera)},[]);return E.useImperativeHandle(h,()=>g.texture,[g]),E.createElement(E.Fragment,null,Vc(E.createElement(ewe,{renderPriority:s,frames:a,fbo:g},n,E.createElement("group",{onPointerOver:()=>null})),v,{events:{compute:e||p,priority:o}}),E.createElement("primitive",tt({object:g.texture},f)))});function ewe({frames:n,renderPriority:e,children:t,fbo:i}){let r=0,s,o;return Bt(a=>{(n===1/0||r<n)&&(s=a.gl.autoClear,o=a.gl.xr.enabled,a.gl.autoClear=!0,a.gl.xr.enabled=!1,a.gl.setRenderTarget(i),a.gl.render(a.scene,a.camera),a.gl.setRenderTarget(null),a.gl.autoClear=s,a.gl.xr.enabled=o,r++)},e),E.createElement(E.Fragment,null,t)}const cX=E.forwardRef(({children:n,compute:e,renderPriority:t=-1,eventPriority:i=0,frames:r=1/0,stencilBuffer:s=!1,depthBuffer:o=!0,generateMipmaps:a=!1,resolution:l=896,near:c=.1,far:u=1e3,flip:f=!1,position:h,rotation:d,scale:m,quaternion:g,matrix:v,matrixAutoUpdate:p,...A},y)=>{const{size:w,viewport:S}=Pe(),C=E.useRef(null),b=E.useMemo(()=>{const I=new a0(Math.max((l||w.width)*S.dpr,(l||w.height)*S.dpr),{stencilBuffer:s,depthBuffer:o,generateMipmaps:a});return I.texture.isRenderTargetTexture=!f,I.texture.flipY=!0,I.texture.type=jn,I},[l,f]);E.useEffect(()=>()=>b.dispose(),[b]);const[M]=E.useState(()=>new Mo);return E.useImperativeHandle(y,()=>({scene:M,fbo:b,camera:C.current}),[b]),E.createElement(E.Fragment,null,Vc(E.createElement(twe,{renderPriority:t,frames:r,camera:C},n,E.createElement("group",{onPointerOver:()=>null})),M,{events:{compute:e,priority:i}}),E.createElement("primitive",tt({object:b.texture},A)),E.createElement("cubeCamera",{ref:C,args:[c,u,b],position:h,rotation:d,scale:m,quaternion:g,matrix:v,matrixAutoUpdate:p}))});function twe({frames:n,renderPriority:e,children:t,camera:i}){let r=0;return Bt(s=>{(n===1/0||r<n)&&(i.current.update(s.gl,s.scene),r++)},e),E.createElement(E.Fragment,null,t)}const nwe=E.forwardRef(({id:n=1,colorWrite:e=!1,depthWrite:t=!1,...i},r)=>{const s=E.useRef(null),o=E.useMemo(()=>({colorWrite:e,depthWrite:t,stencilWrite:!0,stencilRef:n,stencilFunc:yT,stencilFail:l_,stencilZFail:l_,stencilZPass:l_}),[n,e,t]);return E.useLayoutEffect(()=>{Object.assign(s.current.material,o)}),E.useImperativeHandle(r,()=>s.current,[]),E.createElement("mesh",tt({ref:s,renderOrder:-n},i))});function iwe(n,e=!1){return{stencilWrite:!0,stencilRef:n,stencilFunc:e?vH:AH,stencilFail:Mh,stencilZFail:Mh,stencilZPass:Mh}}function rwe({renderPriority:n=1,zoom:e=0,segments:t=64,children:i,resolution:r=896,...s}){const o=E.useRef(null),a=E.useRef(null),{width:l,height:c}=Pe(v=>v.size),[u]=E.useState(()=>new ti);E.useLayoutEffect(()=>{u.position.set(0,0,100),u.zoom=100,u.left=l/-2,u.right=l/2,u.top=c/2,u.bottom=c/-2,u.updateProjectionMatrix()},[l,c]);const f=Math.sqrt(l*l+c*c)/100*(.5+e/2),h=new F,d=new Bi(new F,f),m=new tn,g=E.useCallback((v,p,A)=>{if(p.pointer.set(v.offsetX/p.size.width*2-1,-(v.offsetY/p.size.height)*2+1),p.raycaster.setFromCamera(p.pointer,u),p.raycaster.ray.intersectSphere(d,h))h.normalize();else return;m.getNormalMatrix(a.current.camera.matrixWorld),a.current.camera.getWorldPosition(p.raycaster.ray.origin),p.raycaster.ray.direction.set(0,0,1).reflect(h),p.raycaster.ray.direction.x*=-1,p.raycaster.ray.direction.applyNormalMatrix(m).multiplyScalar(-1)},[]);return Bt(v=>{n&&v.gl.render(o.current,u)},n),E.createElement(E.Fragment,null,E.createElement("mesh",tt({ref:o},s,{scale:f}),E.createElement("sphereGeometry",{args:[1,t,t]}),E.createElement("meshBasicMaterial",null,E.createElement(cX,{compute:g,attach:"envMap",flip:!0,resolution:r,ref:a},i,E.createElement(swe,{api:a})))))}function swe({api:n}){const e=new F,t=new Lt,i=new F,r=new Qr(0,Math.PI,0);return Bt(s=>{s.camera.matrixWorld.decompose(e,t,i),n.current.camera.position.copy(e),n.current.camera.quaternion.setFromEuler(r).premultiply(t)}),null}const owe=Po({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new Se},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
     vUv = uv;
   }`,`uniform sampler2D sdf;
   uniform sampler2D map;
   uniform float blur;
   uniform float size;
   uniform float time;
   uniform vec2 resolution;
   varying vec2 vUv;
   #include <packing>
   void main() {
     vec2 uv = gl_FragCoord.xy / resolution.xy;
     vec4 t = texture2D(map, uv);
     float k = blur;
     float d = texture2D(sdf, vUv).r/size;
     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));
     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);
     #include <tonemapping_fragment>
     #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),awe=E.forwardRef(({children:n,events:e=void 0,blur:t=0,eventPriority:i=0,renderPriority:r=0,worldUnits:s=!1,resolution:o=512,...a},l)=>{Ai({PortalMaterialImpl:owe});const c=E.useRef(null),{scene:u,gl:f,size:h,viewport:d,setEvents:m}=Pe(),g=Bs(o,o),[v,p]=E.useState(0);Bt(()=>{const C=c.current.blend>0?Math.max(1,r):0;v!==C&&p(C)}),E.useEffect(()=>{e!==void 0&&m({enabled:!e})},[e]);const[A,y]=E.useState(!0),w=CY(y);E.useLayoutEffect(()=>{var C;w.current=(C=c.current)==null?void 0:C.__r3f.parent},[]),E.useLayoutEffect(()=>{if(w.current&&t&&c.current.sdf===null){const C=new gt(w.current.geometry,new Ir),b=new Gn().setFromBufferAttribute(C.geometry.attributes.position),M=new ti(b.min.x*(1+2/o),b.max.x*(1+2/o),b.max.y*(1+2/o),b.min.y*(1+2/o),.1,1e3);M.position.set(0,0,1),M.lookAt(0,0,0),f.setRenderTarget(g),f.render(C,M);const T=cwe(o,o,f)(g.texture),D=new Float32Array(o*o);f.readRenderTargetPixels(T,0,0,o,o,D);let R=1/0;for(let z=0;z<D.length;z++)D[z]<R&&(R=D[z]);R=-R,c.current.size=R,c.current.sdf=T.texture,f.setRenderTarget(null)}},[o,t]),E.useImperativeHandle(l,()=>c.current);const S=E.useCallback((C,b,M)=>{var I;if(!w.current)return!1;if(b.pointer.set(C.offsetX/b.size.width*2-1,-(C.offsetY/b.size.height)*2+1),b.raycaster.setFromCamera(b.pointer,b.camera),((I=c.current)==null?void 0:I.blend)===0){const[T]=b.raycaster.intersectObject(w.current);if(!T)return b.raycaster.camera=void 0,!1}},[]);return E.createElement("portalMaterialImpl",tt({ref:c,blur:t,blend:0,resolution:[h.width*d.dpr,h.height*d.dpr],attach:"material"},a),E.createElement(lX,{attach:"map",frames:A?1/0:0,eventPriority:i,renderPriority:r,compute:S},n,E.createElement(lwe,{events:e,rootScene:u,priority:v,material:c,worldUnits:s})))});function lwe({events:n=void 0,rootScene:e,material:t,priority:i,worldUnits:r}){const s=Pe(f=>f.scene),o=Pe(f=>f.setEvents),a=Bs(),l=Bs();E.useLayoutEffect(()=>{s.matrixAutoUpdate=!1},[]),E.useEffect(()=>{n!==void 0&&o({enabled:n})},[n]);const[c,u]=E.useMemo(()=>{const f={value:0};return[new xc(new Wn({uniforms:{a:{value:a.texture},b:{value:l.texture},blend:f},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          }`,fragmentShader:`
          uniform sampler2D a;
          uniform sampler2D b;
          uniform float blend;
          varying vec2 vUv;
          #include <packing>
          void main() {
            vec4 ta = texture2D(a, vUv);
            vec4 tb = texture2D(b, vUv);
            gl_FragColor = mix(tb, ta, blend);
            #include <tonemapping_fragment>
            #include <${Os>=154?"colorspace_fragment":"encodings_fragment"}>
          }`})),f]},[]);return Bt(f=>{var h;let d=t==null||(h=t.current)==null?void 0:h.__r3f.parent;if(d){if(r)s.matrixWorld.identity();else{var m;i&&((m=t.current)==null?void 0:m.blend)===1&&d.updateWorldMatrix(!0,!1),s.matrixWorld.copy(d.matrixWorld)}if(i){var g,v,p;((g=t.current)==null?void 0:g.blend)>0&&((v=t.current)==null?void 0:v.blend)<1?(u.value=t.current.blend,f.gl.setRenderTarget(a),f.gl.render(s,f.camera),f.gl.setRenderTarget(l),f.gl.render(e,f.camera),f.gl.setRenderTarget(null),c.render(f.gl)):((p=t.current)==null?void 0:p.blend)===1&&f.gl.render(s,f.camera)}}},i),E.createElement(E.Fragment,null)}const cwe=(n,e,t)=>{let i=new Qn(n,e,{minFilter:bo,magFilter:Xt,type:Ln,format:la,generateMipmaps:!0}),r=new Qn(n,e,{minFilter:dn,magFilter:dn}),s=new Qn(n,e,{minFilter:dn,magFilter:dn}),o=new Qn(n,e,{minFilter:dn,magFilter:dn}),a=new Qn(n,e,{minFilter:dn,magFilter:dn}),l=new Qn(n,e,{minFilter:dn,magFilter:dn,type:Ln,format:la}),c=new Qn(n,e,{minFilter:dn,magFilter:dn,type:Ln,format:la});const u=new xc(new Wn({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));
        }`})),f=new xc(new Wn({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));
        }`})),h=new xc(new Wn({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform float offset;
        uniform float level;
        uniform float maxSteps;
        #include <packing>
        void main() {
          float closestDist = 9999999.9;
          vec2 closestPos = vec2(0.0);
          for (float x = -1.0; x <= 1.0; x += 1.0) {
            for (float y = -1.0; y <= 1.0; y += 1.0) {
              vec2 voffset = vUv;
              voffset += vec2(x, y) * vec2(${1/n}, ${1/e}) * offset;
              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));
              float dist = distance(pos.xy, vUv);
              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {
                closestDist = dist;
                closestPos = pos;
              }
            }
          }
          gl_FragColor = pack2HalfToRGBA(closestPos);
        }`})),d=new xc(new Wn({uniforms:{tex:{value:null},size:{value:new Se(n,e)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform vec2 size;
        #include <packing>
        void main() {
          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);
        }`})),m=new xc(new Wn({uniforms:{inside:{value:c.texture},outside:{value:l.texture},tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D inside;
        uniform sampler2D outside;
        uniform sampler2D tex;
        #include <packing>
        void main() {
          float i = texture2D(inside, vUv).x;
          float o =texture2D(outside, vUv).x;
          if (texture2D(tex, vUv).x == 0.0) {
            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);
          } else {
            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);
          }
        }`}));return g=>{let v=i;g.minFilter=dn,g.magFilter=dn,u.material.uniforms.tex.value=g,t.setRenderTarget(r),u.render(t);const p=Math.ceil(Math.log(Math.max(n,e))/Math.log(2));let A=r,y=null;for(let w=0;w<p;w++){const S=Math.pow(2,p-w-1);y=A===r?o:r,h.material.uniforms.level.value=w,h.material.uniforms.maxSteps.value=p,h.material.uniforms.offset.value=S,h.material.uniforms.tex.value=A.texture,t.setRenderTarget(y),h.render(t),A=y}t.setRenderTarget(l),d.material.uniforms.tex.value=y.texture,d.render(t),f.material.uniforms.tex.value=g,t.setRenderTarget(s),f.render(t),A=s;for(let w=0;w<p;w++){const S=Math.pow(2,p-w-1);y=A===s?a:s,h.material.uniforms.level.value=w,h.material.uniforms.maxSteps.value=p,h.material.uniforms.offset.value=S,h.material.uniforms.tex.value=A.texture,t.setRenderTarget(y),h.render(t),A=y}return t.setRenderTarget(c),d.material.uniforms.tex.value=y.texture,d.render(t),t.setRenderTarget(v),m.material.uniforms.tex.value=g,m.render(t),t.setRenderTarget(null),v}};var uwe={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Hz=n=>{let e;const t=new Set,i=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const d=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(m=>m(e,d))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(t.add(u),()=>t.delete(u)),destroy:()=>{(uwe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},c=e=n(i,r,l);return l},fwe=n=>n?Hz(n):Hz;var uX={exports:{}},fX={},hX={exports:{}},dX={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm=E;function hwe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var dwe=typeof Object.is=="function"?Object.is:hwe,pwe=Zm.useState,mwe=Zm.useEffect,gwe=Zm.useLayoutEffect,Awe=Zm.useDebugValue;function vwe(n,e){var t=e(),i=pwe({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return gwe(function(){r.value=t,r.getSnapshot=e,b5(r)&&s({inst:r})},[n,t,e]),mwe(function(){return b5(r)&&s({inst:r}),n(function(){b5(r)&&s({inst:r})})},[n]),Awe(t),t}function b5(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!dwe(n,t)}catch{return!0}}function ywe(n,e){return e()}var xwe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ywe:vwe;dX.useSyncExternalStore=Zm.useSyncExternalStore!==void 0?Zm.useSyncExternalStore:xwe;hX.exports=dX;var _we=hX.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw=E,Ewe=_we;function wwe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Swe=typeof Object.is=="function"?Object.is:wwe,Cwe=Ewe.useSyncExternalStore,bwe=Bw.useRef,Mwe=Bw.useEffect,Iwe=Bw.useMemo,Twe=Bw.useDebugValue;fX.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=bwe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Iwe(function(){function l(d){if(!c){if(c=!0,u=d,d=i(d),r!==void 0&&o.hasValue){var m=o.value;if(r(m,d))return f=m}return f=d}if(m=f,Swe(u,d))return m;var g=i(d);return r!==void 0&&r(m,g)?m:(u=d,f=g)}var c=!1,u,f,h=t===void 0?null:t;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,t,i,r]);var a=Cwe(n,s[0],s[1]);return Mwe(function(){o.hasValue=!0,o.value=a},[a]),Twe(a),a};uX.exports=fX;var Bwe=uX.exports;const Pwe=Zh(Bwe);var pX={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:Rwe}=_t,{useSyncExternalStoreWithSelector:Dwe}=Pwe;let Qz=!1;const Lwe=n=>n;function Fwe(n,e=Lwe,t){(pX?"production":void 0)!=="production"&&t&&!Qz&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Qz=!0);const i=Dwe(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return Rwe(i),i}const Vz=n=>{(pX?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?fwe(n):n,t=(i,r)=>Fwe(e,i,r);return Object.assign(t,e),t},Owe=n=>n?Vz(n):Vz;var jz,Wz;const Yz=typeof window<"u"&&((jz=window.document)!=null&&jz.createElement||((Wz=window.navigator)==null?void 0:Wz.product)==="ReactNative")?_t.useLayoutEffect:_t.useEffect;function zwe(){const n=Owe(e=>({current:new Array,version:0,set:e}));return{In:({children:e})=>{const t=n(r=>r.set),i=n(r=>r.version);return Yz(()=>{t(r=>({version:r.version+1}))},[]),Yz(()=>(t(({current:r})=>({current:[...r,e]})),()=>t(({current:r})=>({current:r.filter(s=>s!==e)}))),[e,i]),null},Out:()=>{const e=n(t=>t.current);return _t.createElement(_t.Fragment,null,e)}}}const Uwe=n=>n&&n.isOrthographicCamera,Xz=new et,mX=zwe();function gX(n){return"top"in n}function M5(n,e){const{right:t,top:i,left:r,bottom:s,width:o,height:a}=e,l=e.bottom<0||i>n.height||t<0||e.left>n.width;if(gX(n)){const f=n.top+n.height-s,h=r-n.left;return{position:{width:o,height:a,left:h,top:i,bottom:f,right:t},isOffscreen:l}}const c=n.height-s;return{position:{width:o,height:a,top:i,left:r,bottom:c,right:t},isOffscreen:l}}function I5(n,{left:e,bottom:t,width:i,height:r}){let s;const o=i/r;return Uwe(n.camera)?(n.camera.left!==i/-2||n.camera.right!==i/2||n.camera.top!==r/2||n.camera.bottom!==r/-2)&&(Object.assign(n.camera,{left:i/-2,right:i/2,top:r/2,bottom:r/-2}),n.camera.updateProjectionMatrix()):n.camera.aspect!==o&&(n.camera.aspect=o,n.camera.updateProjectionMatrix()),s=n.gl.autoClear,n.gl.autoClear=!1,n.gl.setViewport(e,t,i,r),n.gl.setScissor(e,t,i,r),n.gl.setScissorTest(!0),s}function T5(n,e){n.gl.setScissorTest(!1),n.gl.autoClear=e}function qz(n){n.gl.getClearColor(Xz),n.gl.setClearColor(Xz,n.gl.getClearAlpha()),n.gl.clear(!0,!0)}function kwe({visible:n=!0,canvasSize:e,scene:t,index:i,children:r,frames:s,rect:o,track:a}){const l=Pe(),[c,u]=E.useState(!1);let f=0;return Bt(h=>{if(s===1/0||f<=s){var d;a&&(o.current=(d=a.current)==null?void 0:d.getBoundingClientRect()),f++}if(o.current){const{position:m,isOffscreen:g}=M5(e,o.current);if(c!==g&&u(g),n&&!c&&o.current){const v=I5(h,m);h.gl.render(r?h.scene:t,h.camera),T5(h,v)}}},i),E.useLayoutEffect(()=>{const h=o.current;if(h&&(!n||!c)){const{position:d}=M5(e,h),m=I5(l,d);qz(l),T5(l,m)}},[n,c]),E.useEffect(()=>{if(!a)return;const h=o.current,d=l.get().events.connected;return l.setEvents({connected:a.current}),()=>{if(h){const{position:m}=M5(e,h),g=I5(l,m);qz(l),T5(l,g)}l.setEvents({connected:d})}},[a]),E.useEffect(()=>{gX(e)||console.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),E.createElement(E.Fragment,null,r,E.createElement("group",{onPointerOver:()=>null}))}const AX=E.forwardRef(({track:n,visible:e=!0,index:t=1,id:i,style:r,className:s,frames:o=1/0,children:a,...l},c)=>{var u,f,h,d;const m=E.useRef(null),{size:g,scene:v}=Pe(),[p]=E.useState(()=>new Mo),[A,y]=E.useReducer(()=>!0,!1),w=E.useCallback((S,C)=>{if(m.current&&n&&n.current&&S.target===n.current){const{width:b,height:M,left:I,top:T}=m.current,D=S.clientX-I,R=S.clientY-T;C.pointer.set(D/b*2-1,-(R/M)*2+1),C.raycaster.setFromCamera(C.pointer,C.camera)}},[m,n]);return E.useEffect(()=>{var S;n&&(m.current=(S=n.current)==null?void 0:S.getBoundingClientRect()),y()},[n]),E.createElement("group",tt({ref:c},l),A&&Vc(E.createElement(kwe,{visible:e,canvasSize:g,frames:o,scene:v,track:n,rect:m,index:t},a),p,{events:{compute:w,priority:t},size:{width:(u=m.current)==null?void 0:u.width,height:(f=m.current)==null?void 0:f.height,top:(h=m.current)==null?void 0:h.top,left:(d=m.current)==null?void 0:d.left}}))}),Nwe=E.forwardRef(({as:n="div",id:e,visible:t,className:i,style:r,index:s=1,track:o,frames:a=1/0,children:l,...c},u)=>{const f=E.useId(),h=E.useRef(null);return E.useImperativeHandle(u,()=>h.current),E.createElement(E.Fragment,null,E.createElement(n,tt({ref:h,id:e,className:i,style:r},c)),E.createElement(mX.In,null,E.createElement(AX,{visible:t,key:f,track:h,frames:a,index:s},l)))}),vX=E.forwardRef((n,e)=>E.useContext(Yh)?E.createElement(AX,tt({ref:e},n)):E.createElement(Nwe,tt({ref:e},n)));vX.Port=()=>E.createElement(mX.Out,null);const Rv=E.createContext(null),Ux=new F,Jz=new F,Gwe=(n,e,t,i)=>{const r=e.dot(e),s=e.dot(n)-e.dot(t),o=e.dot(i);return o===0?-s/r:(Ux.copy(i).multiplyScalar(r/o).sub(e),Jz.copy(i).multiplyScalar(s/o).add(t).sub(n),-Ux.dot(Jz)/Ux.dot(Ux))},Hwe=new F(0,1,0),Kz=new He,B5=({direction:n,axis:e})=>{const{translation:t,translationLimits:i,annotations:r,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:f,opacity:h,onDragStart:d,onDrag:m,onDragEnd:g,userData:v}=E.useContext(Rv),p=Pe(Z=>Z.controls),A=E.useRef(null),y=E.useRef(null),w=E.useRef(null),S=E.useRef(0),[C,b]=E.useState(!1),M=E.useCallback(Z=>{r&&(A.current.innerText=`${t.current[e].toFixed(2)}`,A.current.style.display="block"),Z.stopPropagation();const U=new He().extractRotation(y.current.matrixWorld),X=Z.point.clone(),Y=new F().setFromMatrixPosition(y.current.matrixWorld),O=n.clone().applyMatrix4(U).normalize();w.current={clickPoint:X,dir:O},S.current=t.current[e],d({component:"Arrow",axis:e,origin:Y,directions:[O]}),p&&(p.enabled=!1),Z.target.setPointerCapture(Z.pointerId)},[r,n,p,d,t,e]),I=E.useCallback(Z=>{if(Z.stopPropagation(),C||b(!0),w.current){const{clickPoint:U,dir:X}=w.current,[Y,O]=(i==null?void 0:i[e])||[void 0,void 0];let W=Gwe(U,X,Z.ray.origin,Z.ray.direction);Y!==void 0&&(W=Math.max(W,Y-S.current)),O!==void 0&&(W=Math.min(W,O-S.current)),t.current[e]=S.current+W,r&&(A.current.innerText=`${t.current[e].toFixed(2)}`),Kz.makeTranslation(X.x*W,X.y*W,X.z*W),m(Kz)}},[r,m,C,t,i,e]),T=E.useCallback(Z=>{r&&(A.current.style.display="none"),Z.stopPropagation(),w.current=null,g(),p&&(p.enabled=!0),Z.target.releasePointerCapture(Z.pointerId)},[r,p,g]),D=E.useCallback(Z=>{Z.stopPropagation(),b(!1)},[]),{cylinderLength:R,coneWidth:z,coneLength:L,matrixL:H}=E.useMemo(()=>{const Z=c?l/a*1.6:a/20,U=c?.2:a/5,X=c?1-U:a-U,Y=new Lt().setFromUnitVectors(Hwe,n.clone().normalize()),O=new He().makeRotationFromQuaternion(Y);return{cylinderLength:X,coneWidth:Z,coneLength:U,matrixL:O}},[n,a,l,c]),J=C?f:u[e];return E.createElement("group",{ref:y},E.createElement("group",{matrix:H,matrixAutoUpdate:!1,onPointerDown:M,onPointerMove:I,onPointerUp:T,onPointerOut:D},r&&E.createElement(Sv,{position:[0,-L,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:A})),E.createElement("mesh",{visible:!1,position:[0,(R+L)/2,0],userData:v},E.createElement("cylinderGeometry",{args:[z*1.4,z*1.4,R+L,8,1]})),E.createElement(tl,{transparent:!0,raycast:()=>null,depthTest:o,points:[0,0,0,0,R,0],lineWidth:l,side:ni,color:J,opacity:h,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),E.createElement("mesh",{raycast:()=>null,position:[0,R+L/2,0],renderOrder:500},E.createElement("coneGeometry",{args:[z,L,24,1]}),E.createElement("meshBasicMaterial",{transparent:!0,depthTest:o,color:J,opacity:h,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},P5=new F,R5=new F,D5=n=>n*180/Math.PI,Qwe=n=>n*Math.PI/180,Vwe=(n,e,t,i,r)=>{P5.copy(n).sub(t),R5.copy(e).sub(t);const s=i.dot(i),o=r.dot(r),a=P5.dot(i)/s,l=P5.dot(r)/o,c=R5.dot(i)/s,u=R5.dot(r)/o,f=Math.atan2(l,a);return Math.atan2(u,c)-f},jwe=(n,e)=>{let t=Math.floor(n/e);return t=t<0?t+1:t,n-t*e},$z=n=>{let e=jwe(n,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},kx=new He,Zz=new F,Nx=new xa,L5=new F,F5=({dir1:n,dir2:e,axis:t})=>{const{rotationLimits:i,annotations:r,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:f,opacity:h,onDragStart:d,onDrag:m,onDragEnd:g,userData:v}=E.useContext(Rv),p=Pe(J=>J.controls),A=E.useRef(null),y=E.useRef(null),w=E.useRef(0),S=E.useRef(0),C=E.useRef(null),[b,M]=E.useState(!1),I=E.useCallback(J=>{r&&(A.current.innerText=`${D5(S.current).toFixed(0)}º`,A.current.style.display="block"),J.stopPropagation();const Z=J.point.clone(),U=new F().setFromMatrixPosition(y.current.matrixWorld),X=new F().setFromMatrixColumn(y.current.matrixWorld,0).normalize(),Y=new F().setFromMatrixColumn(y.current.matrixWorld,1).normalize(),O=new F().setFromMatrixColumn(y.current.matrixWorld,2).normalize(),W=new Hr().setFromNormalAndCoplanarPoint(O,U);C.current={clickPoint:Z,origin:U,e1:X,e2:Y,normal:O,plane:W},d({component:"Rotator",axis:t,origin:U,directions:[X,Y,O]}),p&&(p.enabled=!1),J.target.setPointerCapture(J.pointerId)},[r,p,d,t]),T=E.useCallback(J=>{if(J.stopPropagation(),b||M(!0),C.current){const{clickPoint:Z,origin:U,e1:X,e2:Y,normal:O,plane:W}=C.current,[$,k]=(i==null?void 0:i[t])||[void 0,void 0];Nx.copy(J.ray),Nx.intersectPlane(W,L5),Nx.direction.negate(),Nx.intersectPlane(W,L5);let V=Vwe(Z,L5,U,X,Y),Q=D5(V);J.shiftKey&&(Q=Math.round(Q/10)*10,V=Qwe(Q)),$!==void 0&&k!==void 0&&k-$<2*Math.PI?(V=$z(V),V=V>Math.PI?V-2*Math.PI:V,V=jt.clamp(V,$-w.current,k-w.current),S.current=w.current+V):(S.current=$z(w.current+V),S.current=S.current>Math.PI?S.current-2*Math.PI:S.current),r&&(Q=D5(S.current),A.current.innerText=`${Q.toFixed(0)}º`),kx.makeRotationAxis(O,V),Zz.copy(U).applyMatrix4(kx).sub(U).negate(),kx.setPosition(Zz),m(kx)}},[r,m,b,i,t]),D=E.useCallback(J=>{r&&(A.current.style.display="none"),J.stopPropagation(),w.current=S.current,C.current=null,g(),p&&(p.enabled=!0),J.target.releasePointerCapture(J.pointerId)},[r,p,g]),R=E.useCallback(J=>{J.stopPropagation(),M(!1)},[]),z=E.useMemo(()=>{const J=n.clone().normalize(),Z=e.clone().normalize();return new He().makeBasis(J,Z,J.clone().cross(Z))},[n,e]),L=c?.65:a*.65,H=E.useMemo(()=>{const Z=[];for(let U=0;U<=32;U++){const X=U*(Math.PI/2)/32;Z.push(new F(Math.cos(X)*L,Math.sin(X)*L,0))}return Z},[L]);return E.createElement("group",{ref:y,onPointerDown:I,onPointerMove:T,onPointerUp:D,onPointerOut:R,matrix:z,matrixAutoUpdate:!1},r&&E.createElement(Sv,{position:[L,L,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:A})),E.createElement(tl,{points:H,lineWidth:l*4,visible:!1,userData:v}),E.createElement(tl,{transparent:!0,raycast:()=>null,depthTest:o,points:H,lineWidth:l,side:ni,color:b?f:u[t],opacity:h,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},Wwe=(n,e,t)=>{const i=Math.abs(n.x)>=Math.abs(n.y)&&Math.abs(n.x)>=Math.abs(n.z)?0:Math.abs(n.y)>=Math.abs(n.x)&&Math.abs(n.y)>=Math.abs(n.z)?1:2,r=[0,1,2].sort((m,g)=>Math.abs(e.getComponent(g))-Math.abs(e.getComponent(m))),s=i===r[0]?r[1]:r[0],o=n.getComponent(i),a=n.getComponent(s),l=e.getComponent(i),c=e.getComponent(s),u=t.getComponent(i),h=(t.getComponent(s)-u*(a/o))/(c-l*(a/o));return[(u-h*l)/o,h]},Gx=new xa,Hx=new F,eU=new He,O5=({dir1:n,dir2:e,axis:t})=>{const{translation:i,translationLimits:r,annotations:s,annotationsClass:o,depthTest:a,scale:l,lineWidth:c,fixed:u,axisColors:f,hoveredColor:h,opacity:d,onDragStart:m,onDrag:g,onDragEnd:v,userData:p}=E.useContext(Rv),A=Pe(X=>X.controls),y=E.useRef(null),w=E.useRef(null),S=E.useRef(null),C=E.useRef(0),b=E.useRef(0),[M,I]=E.useState(!1),T=E.useCallback(X=>{s&&(y.current.innerText=`${i.current[(t+1)%3].toFixed(2)}, ${i.current[(t+2)%3].toFixed(2)}`,y.current.style.display="block"),X.stopPropagation();const Y=X.point.clone(),O=new F().setFromMatrixPosition(w.current.matrixWorld),W=new F().setFromMatrixColumn(w.current.matrixWorld,0).normalize(),$=new F().setFromMatrixColumn(w.current.matrixWorld,1).normalize(),k=new F().setFromMatrixColumn(w.current.matrixWorld,2).normalize(),V=new Hr().setFromNormalAndCoplanarPoint(k,O);S.current={clickPoint:Y,e1:W,e2:$,plane:V},C.current=i.current[(t+1)%3],b.current=i.current[(t+2)%3],m({component:"Slider",axis:t,origin:O,directions:[W,$,k]}),A&&(A.enabled=!1),X.target.setPointerCapture(X.pointerId)},[s,A,m,t]),D=E.useCallback(X=>{if(X.stopPropagation(),M||I(!0),S.current){const{clickPoint:Y,e1:O,e2:W,plane:$}=S.current,[k,V]=(r==null?void 0:r[(t+1)%3])||[void 0,void 0],[Q,j]=(r==null?void 0:r[(t+2)%3])||[void 0,void 0];Gx.copy(X.ray),Gx.intersectPlane($,Hx),Gx.direction.negate(),Gx.intersectPlane($,Hx),Hx.sub(Y);let[oe,xe]=Wwe(O,W,Hx);k!==void 0&&(oe=Math.max(oe,k-C.current)),V!==void 0&&(oe=Math.min(oe,V-C.current)),Q!==void 0&&(xe=Math.max(xe,Q-b.current)),j!==void 0&&(xe=Math.min(xe,j-b.current)),i.current[(t+1)%3]=C.current+oe,i.current[(t+2)%3]=b.current+xe,s&&(y.current.innerText=`${i.current[(t+1)%3].toFixed(2)}, ${i.current[(t+2)%3].toFixed(2)}`),eU.makeTranslation(oe*O.x+xe*W.x,oe*O.y+xe*W.y,oe*O.z+xe*W.z),g(eU)}},[s,g,M,i,r,t]),R=E.useCallback(X=>{s&&(y.current.style.display="none"),X.stopPropagation(),S.current=null,v(),A&&(A.enabled=!0),X.target.releasePointerCapture(X.pointerId)},[s,A,v]),z=E.useCallback(X=>{X.stopPropagation(),I(!1)},[]),L=E.useMemo(()=>{const X=n.clone().normalize(),Y=e.clone().normalize();return new He().makeBasis(X,Y,X.clone().cross(Y))},[n,e]),H=u?1/7:l/7,J=u?.225:l*.225,Z=M?h:f[t],U=E.useMemo(()=>[new F(0,0,0),new F(0,J,0),new F(J,J,0),new F(J,0,0),new F(0,0,0)],[J]);return E.createElement("group",{ref:w,matrix:L,matrixAutoUpdate:!1},s&&E.createElement(Sv,{position:[0,0,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:o,ref:y})),E.createElement("group",{position:[H*1.7,H*1.7,0]},E.createElement("mesh",{visible:!0,onPointerDown:T,onPointerMove:D,onPointerUp:R,onPointerOut:z,scale:J,userData:p},E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,depthTest:a,color:Z,polygonOffset:!0,polygonOffsetFactor:-10,side:ni,fog:!1})),E.createElement(tl,{position:[-J/2,-J/2,0],transparent:!0,depthTest:a,points:U,lineWidth:c,color:Z,opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,userData:p,fog:!1})))},vg=new F,tU=new F,Ywe=(n,e,t,i)=>{const r=e.dot(e),s=e.dot(n)-e.dot(t),o=e.dot(i);return o===0?-s/r:(vg.copy(i).multiplyScalar(r/o).sub(e),tU.copy(i).multiplyScalar(s/o).add(t).sub(n),-vg.dot(tU)/vg.dot(vg))},Xwe=new F(0,1,0),ig=new F,nU=new He,z5=({direction:n,axis:e})=>{const{scaleLimits:t,annotations:i,annotationsClass:r,depthTest:s,scale:o,lineWidth:a,fixed:l,axisColors:c,hoveredColor:u,opacity:f,onDragStart:h,onDrag:d,onDragEnd:m,userData:g}=E.useContext(Rv),v=Pe(U=>U.size),p=Pe(U=>U.controls),A=E.useRef(null),y=E.useRef(null),w=E.useRef(null),S=E.useRef(1),C=E.useRef(1),b=E.useRef(null),[M,I]=E.useState(!1),T=l?1.2:1.2*o,D=E.useCallback(U=>{i&&(A.current.innerText=`${C.current.toFixed(2)}`,A.current.style.display="block"),U.stopPropagation();const X=new He().extractRotation(y.current.matrixWorld),Y=U.point.clone(),O=new F().setFromMatrixPosition(y.current.matrixWorld),W=n.clone().applyMatrix4(X).normalize(),$=y.current.matrixWorld.clone(),k=$.clone().invert(),V=l?1/vw(y.current.getWorldPosition(vg),o,U.camera,v):1;b.current={clickPoint:Y,dir:W,mPLG:$,mPLGInv:k,offsetMultiplier:V},h({component:"Sphere",axis:e,origin:O,directions:[W]}),p&&(p.enabled=!1),U.target.setPointerCapture(U.pointerId)},[i,p,n,h,e,l,o,v]),R=E.useCallback(U=>{if(U.stopPropagation(),M||I(!0),b.current){const{clickPoint:X,dir:Y,mPLG:O,mPLGInv:W,offsetMultiplier:$}=b.current,[k,V]=(t==null?void 0:t[e])||[1e-5,void 0],j=Ywe(X,Y,U.ray.origin,U.ray.direction)*$,oe=l?j:j/o;let xe=Math.pow(2,oe*.2);U.shiftKey&&(xe=Math.round(xe*10)/10),xe=Math.max(xe,k/S.current),V!==void 0&&(xe=Math.min(xe,V/S.current)),C.current=S.current*xe,w.current.position.set(0,T+j,0),i&&(A.current.innerText=`${C.current.toFixed(2)}`),ig.set(1,1,1),ig.setComponent(e,xe),nU.makeScale(ig.x,ig.y,ig.z).premultiply(O).multiply(W),d(nU)}},[i,T,d,M,t,e]),z=E.useCallback(U=>{i&&(A.current.style.display="none"),U.stopPropagation(),S.current=C.current,b.current=null,w.current.position.set(0,T,0),m(),p&&(p.enabled=!0),U.target.releasePointerCapture(U.pointerId)},[i,p,m,T]),L=E.useCallback(U=>{U.stopPropagation(),I(!1)},[]),{radius:H,matrixL:J}=E.useMemo(()=>{const U=l?a/o*1.8:o/22.5,X=new Lt().setFromUnitVectors(Xwe,n.clone().normalize()),Y=new He().makeRotationFromQuaternion(X);return{radius:U,matrixL:Y}},[n,o,a,l]),Z=M?u:c[e];return E.createElement("group",{ref:y},E.createElement("group",{matrix:J,matrixAutoUpdate:!1,onPointerDown:D,onPointerMove:R,onPointerUp:z,onPointerOut:L},i&&E.createElement(Sv,{position:[0,T/2,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:r,ref:A})),E.createElement("mesh",{ref:w,position:[0,T,0],renderOrder:500,userData:g},E.createElement("sphereGeometry",{args:[H,12,12]}),E.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:Z,opacity:f,polygonOffset:!0,polygonOffsetFactor:-10}))))},iU=new He,rU=new He,sU=new He,Qx=new He,U5=new He,Bp=new He,oU=new He,aU=new He,lU=new He,Pp=new Gn,k5=new Gn,cU=new F,uU=new F,fU=new F,hU=new F,rg=new F,Rp=new F(1,0,0),Dp=new F(0,1,0),Lp=new F(0,0,1),qwe=E.forwardRef(({matrix:n,onDragStart:e,onDrag:t,onDragEnd:i,autoTransform:r=!0,anchor:s,disableAxes:o=!1,disableSliders:a=!1,disableRotations:l=!1,disableScaling:c=!1,activeAxes:u=[!0,!0,!0],offset:f=[0,0,0],rotation:h=[0,0,0],scale:d=1,lineWidth:m=4,fixed:g=!1,translationLimits:v,rotationLimits:p,scaleLimits:A,depthTest:y=!0,axisColors:w=["#ff2060","#20df80","#2080ff"],hoveredColor:S="#ffff40",annotations:C=!1,annotationsClass:b,opacity:M=1,visible:I=!0,userData:T,children:D,...R},z)=>{const L=Pe(k=>k.invalidate),H=E.useRef(null),J=E.useRef(null),Z=E.useRef(null),U=E.useRef(null),X=E.useRef([0,0,0]),Y=E.useRef(new F(1,1,1)),O=E.useRef(new F(1,1,1));E.useLayoutEffect(()=>{s&&(U.current.updateWorldMatrix(!0,!0),Qx.copy(U.current.matrixWorld).invert(),Pp.makeEmpty(),U.current.traverse(k=>{k.geometry&&(k.geometry.boundingBox||k.geometry.computeBoundingBox(),Bp.copy(k.matrixWorld).premultiply(Qx),k5.copy(k.geometry.boundingBox),k5.applyMatrix4(Bp),Pp.union(k5))}),cU.copy(Pp.max).add(Pp.min).multiplyScalar(.5),uU.copy(Pp.max).sub(Pp.min).multiplyScalar(.5),fU.copy(uU).multiply(new F(...s)).add(cU),hU.set(...f).add(fU),Z.current.position.copy(hU),L())});const W=E.useMemo(()=>({onDragStart:k=>{iU.copy(J.current.matrix),rU.copy(J.current.matrixWorld),e&&e(k),L()},onDrag:k=>{sU.copy(H.current.matrixWorld),Qx.copy(sU).invert(),U5.copy(rU).premultiply(k),Bp.copy(U5).premultiply(Qx),oU.copy(iU).invert(),aU.copy(Bp).multiply(oU),r&&J.current.matrix.copy(Bp),t&&t(Bp,aU,U5,k),L()},onDragEnd:()=>{i&&i(),L()},translation:X,translationLimits:v,rotationLimits:p,axisColors:w,hoveredColor:S,opacity:M,scale:d,lineWidth:m,fixed:g,depthTest:y,userData:T,annotations:C,annotationsClass:b}),[e,t,i,X,v,p,A,y,d,m,g,...w,S,M,T,r,C,b]),$=new F;return Bt(k=>{if(g){const V=vw(Z.current.getWorldPosition($),d,k.camera,k.size);Y.current.setScalar(V)}n&&n instanceof He&&(J.current.matrix=n),J.current.updateWorldMatrix(!0,!0),lU.makeRotationFromEuler(Z.current.rotation).setPosition(Z.current.position).premultiply(J.current.matrixWorld),O.current.setFromMatrixScale(lU),rg.copy(Y.current).divide(O.current),(Math.abs(Z.current.scale.x-rg.x)>1e-4||Math.abs(Z.current.scale.y-rg.y)>1e-4||Math.abs(Z.current.scale.z-rg.z)>1e-4)&&(Z.current.scale.copy(rg),k.invalidate())}),E.useImperativeHandle(z,()=>J.current,[]),E.createElement(Rv.Provider,{value:W},E.createElement("group",{ref:H},E.createElement("group",tt({ref:J,matrix:n,matrixAutoUpdate:!1},R),E.createElement("group",{visible:I,ref:Z,position:f,rotation:h},!o&&u[0]&&E.createElement(B5,{axis:0,direction:Rp}),!o&&u[1]&&E.createElement(B5,{axis:1,direction:Dp}),!o&&u[2]&&E.createElement(B5,{axis:2,direction:Lp}),!a&&u[0]&&u[1]&&E.createElement(O5,{axis:2,dir1:Rp,dir2:Dp}),!a&&u[0]&&u[2]&&E.createElement(O5,{axis:1,dir1:Lp,dir2:Rp}),!a&&u[2]&&u[1]&&E.createElement(O5,{axis:0,dir1:Dp,dir2:Lp}),!l&&u[0]&&u[1]&&E.createElement(F5,{axis:2,dir1:Rp,dir2:Dp}),!l&&u[0]&&u[2]&&E.createElement(F5,{axis:1,dir1:Lp,dir2:Rp}),!l&&u[2]&&u[1]&&E.createElement(F5,{axis:0,dir1:Dp,dir2:Lp}),!c&&u[0]&&E.createElement(z5,{axis:0,direction:Rp}),!c&&u[1]&&E.createElement(z5,{axis:1,direction:Dp}),!c&&u[2]&&E.createElement(z5,{axis:2,direction:Lp})),E.createElement("group",{ref:U},D))))}),Jwe=new F(0,0,-1),Kwe=function(){const n=new F,e=new F,t=new F,i=new F,r=new F;return function(s,o,a,l){return n.copy(s),e.copy(o),t.copy(a),i.copy(e).sub(n),r.copy(t).sub(n),l.crossVectors(r,i).normalize()}}();function $we(n,e){return n.clone().add(e).multiplyScalar(.5)}const yX=E.forwardRef(({points:n=E_.SAMPLE_FACELANDMARKER_RESULT.faceLandmarks[0],face:e,facialTransformationMatrix:t,faceBlendshapes:i,offset:r,offsetScalar:s=80,width:o,height:a,depth:l=1,verticalTri:c=[159,386,152],origin:u,eyes:f=!0,eyesAsOrigin:h=!1,debug:d=!1,children:m,...g},v)=>{var p;e&&(n=e.keypoints,console.warn("Facemesh `face` prop is deprecated: use `points` instead"));const A=E.useRef(null),y=E.useRef(null),w=E.useRef(null),S=E.useRef(null),C=E.useRef(null),b=E.useRef(null),M=E.useRef(null),[I]=E.useState(()=>new F),[T]=E.useState(()=>new Jt),[D]=E.useState(()=>new Lt),[R]=E.useState(()=>new F),{invalidate:z}=Pe();E.useEffect(()=>{var X;(X=C.current)==null||X.geometry.setIndex(E_.TRIANGULATION)},[]);const[L]=E.useState(()=>new F);E.useEffect(()=>{var X,Y;const O=(X=C.current)==null?void 0:X.geometry;if(!O)return;if(O.setFromPoints(n),O.setDrawRange(0,E_.TRIANGULATION.length),t)if(T.matrix.fromArray(t.data),T.matrix.decompose(T.position,T.quaternion,T.scale),T.rotation.y*=-1,T.rotation.z*=-1,D.setFromEuler(T.rotation),r){var W;T.position.y*=-1,T.position.z*=-1,(W=A.current)==null||W.position.copy(T.position.divideScalar(s))}else{var $;($=A.current)==null||$.position.set(0,0,0)}else Kwe(n[c[0]],n[c[1]],n[c[2]],I),D.setFromUnitVectors(Jwe,I);const k=D.clone().invert();if(O.computeBoundingBox(),d&&z(),O.center(),O.applyQuaternion(k),(Y=S.current)==null||Y.setRotationFromQuaternion(D),f){if(!i)console.warn("Facemesh `eyes` option only works if `faceBlendshapes` is provided: skipping.");else if(b.current&&M.current&&w.current)if(h){const V=b.current._computeSphere(O),Q=M.current._computeSphere(O);u=$we(V.center,Q.center).negate(),b.current._update(O,i,V),M.current._update(O,i,Q)}else b.current._update(O,i),M.current._update(O,i)}if(w.current){if(u!==void 0)if(typeof u=="number"){const V=O.getAttribute("position");R.set(-V.getX(u),-V.getY(u),-V.getZ(u))}else u.isVector3&&R.copy(u);else R.setScalar(0);w.current.position.copy(R)}if(y.current){let V=1;(o||a||l)&&(O.boundingBox.getSize(L),o&&(V=o/L.x),a&&(V=a/L.y),l&&(V=l/L.z)),y.current.scale.setScalar(V!==1?V:1)}O.computeVertexNormals(),O.attributes.position.needsUpdate=!0},[n,t,i,T,r,s,o,a,l,c,u,f,d,z,I,D,L,R]);const H=E.useMemo(()=>({outerRef:S,meshRef:C,eyeRightRef:b,eyeLeftRef:M}),[]);E.useImperativeHandle(v,()=>H,[H]);const[J]=E.useState(()=>new F),Z=(p=C.current)==null?void 0:p.geometry.boundingBox,U=(Z==null?void 0:Z.getSize(J).z)||1;return E.createElement("group",g,E.createElement("group",{ref:A},E.createElement("group",{ref:S},E.createElement("group",{ref:y},d?E.createElement(E.Fragment,null,E.createElement("axesHelper",{args:[U]}),E.createElement(tl,{points:[[0,0,0],[0,0,-U]],color:65535})):null,E.createElement("group",{ref:w},f&&i&&E.createElement("group",{name:"eyes"},E.createElement(V6,{side:"left",ref:b,debug:d}),E.createElement(V6,{side:"right",ref:M,debug:d})),E.createElement("mesh",{ref:C,name:"face"},m,d?E.createElement(E.Fragment,null,Z&&E.createElement("box3Helper",{args:[Z]})):null))))))}),Qp={contourLandmarks:{right:[33,133,159,145,153],left:[263,362,386,374,380]},blendshapes:{right:[14,16,18,12],left:[13,15,17,11]},color:{right:"red",left:"#00ff00"},fov:{horizontal:100,vertical:90}},V6=E.forwardRef(({side:n,debug:e=!0},t)=>{const i=E.useRef(null),r=E.useRef(null),[s]=E.useState(()=>new Bi),o=E.useCallback(f=>{const h=f.getAttribute("position"),m=Qp.contourLandmarks[n].map(g=>new F(h.getX(g),h.getY(g),h.getZ(g)));return s.center.set(0,0,0),m.forEach(g=>s.center.add(g)),s.center.divideScalar(m.length),s.radius=m[0].sub(m[1]).length()/2,s},[s,n]),[a]=E.useState(()=>new Qr),l=E.useCallback((f,h,d)=>{if(i.current){var m;(m=d)!==null&&m!==void 0||(d=o(f)),i.current.position.copy(d.center),i.current.scale.setScalar(d.radius)}if(h&&r.current){const g=Qp.blendshapes[n],v=h.categories[g[0]].score,p=h.categories[g[1]].score,A=h.categories[g[2]].score,y=h.categories[g[3]].score,w=Qp.fov.horizontal*jt.DEG2RAD,S=Qp.fov.vertical*jt.DEG2RAD,C=w*.5*(y-A),b=S*.5*(v-p)*(n==="left"?1:-1);a.set(C,b,0),r.current.setRotationFromEuler(a)}},[o,n,a]),c=E.useMemo(()=>({eyeMeshRef:i,irisDirRef:r,_computeSphere:o,_update:l}),[o,l]);E.useImperativeHandle(t,()=>c,[c]);const u=Qp.color[n];return E.createElement("group",null,E.createElement("group",{ref:i},e&&E.createElement("axesHelper",null),E.createElement("group",{ref:r},E.createElement(E.Fragment,null,e&&E.createElement(tl,{points:[[0,0,0],[0,0,-2]],lineWidth:1,color:u})))))}),E_={TRIANGULATION:[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],SAMPLE_FACE:{keypoints:[{x:356.2804412841797,y:295.1960563659668,z:-23.786449432373047,name:"lips"},{x:354.8859405517578,y:264.69520568847656,z:-36.718435287475586},{x:355.2180862426758,y:275.3360366821289,z:-21.183712482452393},{x:347.349853515625,y:242.4400234222412,z:-25.093655586242676},{x:354.40135955810547,y:256.67933464050293,z:-38.23572635650635},{x:353.7689971923828,y:247.54886627197266,z:-34.5475435256958},{x:352.1288299560547,y:227.34312057495117,z:-13.095386028289795},{x:303.5013198852539,y:234.67002868652344,z:12.500141859054565,name:"rightEye"},{x:351.09378814697266,y:211.87547206878662,z:-6.413471698760986},{x:350.7115936279297,y:202.1251630783081,z:-6.413471698760986},{x:348.33667755126953,y:168.7741756439209,z:6.483500003814697,name:"faceOval"},{x:356.4806365966797,y:299.2995357513428,z:-23.144519329071045},{x:356.5511703491211,y:302.66146659851074,z:-21.020312309265137},{x:356.6239547729492,y:304.1536331176758,z:-18.137459754943848,name:"lips"},{x:356.5807342529297,y:305.1840591430664,z:-18.767719268798828,name:"lips"},{x:356.8241500854492,y:308.25711250305176,z:-20.16829490661621},{x:357.113037109375,y:312.26277351379395,z:-22.10575819015503},{x:357.34962463378906,y:317.1123218536377,z:-21.837315559387207,name:"lips"},{x:357.6658630371094,y:325.51036834716797,z:-16.27002477645874},{x:355.0201416015625,y:269.36279296875,z:-33.73054027557373},{x:348.5237503051758,y:270.33411026000977,z:-24.93025302886963},{x:279.97331619262695,y:213.24176788330078,z:47.759642601013184,name:"faceOval"},{x:322.66529083251953,y:238.5027265548706,z:5.535193085670471},{x:316.0983657836914,y:239.94489669799805,z:5.777376294136047},{x:309.9431610107422,y:240.24518966674805,z:7.510589361190796},{x:301.31994247436523,y:237.86138534545898,z:13.118728399276733},{x:328.14266204833984,y:235.80496788024902,z:6.646900177001953},{x:313.7326431274414,y:222.11161136627197,z:3.9887237548828125},{x:320.45196533203125,y:221.87729358673096,z:4.601476192474365},{x:307.35679626464844,y:223.63793849945068,z:5.932023525238037},{x:303.0031204223633,y:226.3743782043457,z:8.479321002960205},{x:296.80023193359375,y:242.94299125671387,z:15.931552648544312},{x:332.2352981567383,y:340.77341079711914,z:-10.165848731994629},{x:301.38587951660156,y:233.46447944641113,z:14.764405488967896,name:"rightEye"},{x:279.0147018432617,y:244.37155723571777,z:45.77549457550049},{x:289.60548400878906,y:239.1807460784912,z:23.191204071044922},{x:320.32257080078125,y:267.1292781829834,z:-4.954537749290466},{x:347.64583587646484,y:294.4955062866211,z:-23.062820434570312,name:"lips"},{x:349.28138732910156,y:303.1095886230469,z:-20.238323211669922},{x:338.9453125,y:298.19186210632324,z:-19.456336498260498,name:"lips"},{x:333.36788177490234,y:302.6706790924072,z:-14.776077270507812,name:"lips"},{x:342.89188385009766,y:304.3561363220215,z:-17.752301692962646},{x:337.7375030517578,y:306.0098361968994,z:-13.410515785217285},{x:325.6159210205078,y:316.22995376586914,z:-6.681914925575256},{x:349.0104675292969,y:264.9818515777588,z:-36.274919509887695},{x:347.7138900756836,y:257.5664806365967,z:-37.67549514770508},{x:291.79357528686523,y:218.88171672821045,z:11.578094959259033,name:"rightEyebrow"},{x:332.2689437866211,y:247.56946563720703,z:-3.3730539679527283},{x:332.0074462890625,y:267.1201229095459,z:-19.969879388809204},{x:331.27952575683594,y:263.6967658996582,z:-17.47218608856201},{x:301.04373931884766,y:269.56552505493164,z:3.61815482378006},{x:347.4863815307617,y:249.0706443786621,z:-32.633421421051025},{x:307.26118087768555,y:208.2646894454956,z:1.1591226607561111,name:"rightEyebrow"},{x:297.91919708251953,y:212.22604751586914,z:5.914516448974609,name:"rightEyebrow"},{x:285.1651382446289,y:197.98450469970703,z:36.391637325286865,name:"faceOval"},{x:337.04097747802734,y:211.25229835510254,z:-4.548954665660858},{x:326.5912628173828,y:223.16698551177979,z:6.670243740081787},{x:320.05664825439453,y:309.5834255218506,z:-4.055835008621216},{x:289.6866226196289,y:314.617395401001,z:53.875489234924316,name:"faceOval"},{x:337.4256896972656,y:270.8755302429199,z:-17.67060160636902},{x:343.69922637939453,y:273.0000400543213,z:-18.756048679351807},{x:327.4242401123047,y:309.22399520874023,z:-4.703601002693176,name:"lips"},{x:330.37220001220703,y:308.3323001861572,z:-6.442649960517883},{x:293.87027740478516,y:207.7961826324463,z:9.821539521217346,name:"rightEyebrow"},{x:332.11437225341797,y:271.22812271118164,z:-16.64351224899292},{x:320.1197814941406,y:207.40366458892822,z:-2.48164564371109,name:"rightEyebrow"},{x:318.59575271606445,y:201.07443809509277,z:-3.110446035861969,name:"rightEyebrow"},{x:310.72303771972656,y:175.75075149536133,z:13.328815698623657,name:"faceOval"},{x:289.67578887939453,y:202.29835510253906,z:21.370456218719482},{x:315.30879974365234,y:187.35260009765625,z:5.0304025411605835},{x:287.8936767578125,y:216.54793739318848,z:17.81065821647644,name:"rightEyebrow"},{x:283.9391899108887,y:215.01142501831055,z:32.04984903335571},{x:348.35330963134766,y:299.4155788421631,z:-22.47924566268921},{x:341.1790466308594,y:301.8221855163574,z:-18.977805376052856},{x:335.69713592529297,y:304.4266891479492,z:-14.682706594467163},{x:339.4615173339844,y:272.3654365539551,z:-16.38674020767212},{x:328.99600982666016,y:308.86685371398926,z:-5.616893768310547},{x:332.00313568115234,y:309.1875743865967,z:-10.335084199905396},{x:331.0068130493164,y:307.9274368286133,z:-6.681914925575256,name:"lips"},{x:341.13792419433594,y:266.4876937866211,z:-26.56425952911377},{x:339.02950286865234,y:305.6663703918457,z:-12.33674168586731,name:"lips"},{x:344.22935485839844,y:304.9452781677246,z:-15.161235332489014,name:"lips"},{x:350.1844024658203,y:304.374303817749,z:-17.5305438041687,name:"lips"},{x:348.52630615234375,y:325.9562301635742,z:-16.164982318878174},{x:348.6581802368164,y:317.1624183654785,z:-21.510512828826904,name:"lips"},{x:348.9766311645508,y:312.1923065185547,z:-21.708929538726807},{x:349.2427444458008,y:308.0660820007324,z:-19.643079042434692},{x:349.67491149902344,y:305.42747497558594,z:-18.16080331802368,name:"lips"},{x:337.95589447021484,y:306.6535949707031,z:-12.803598642349243,name:"lips"},{x:337.06878662109375,y:307.63169288635254,z:-14.274203777313232},{x:335.77449798583984,y:309.8449516296387,z:-15.698124170303345},{x:334.6099090576172,y:312.7997016906738,z:-14.764405488967896,name:"lips"},{x:327.2330856323242,y:293.80866050720215,z:-11.864047050476074},{x:280.97679138183594,y:279.79928970336914,z:68.90834331512451,name:"faceOval"},{x:355.13843536376953,y:271.7875671386719,z:-25.350427627563477},{x:334.7235870361328,y:307.4656391143799,z:-9.302158951759338,name:"lips"},{x:333.5293960571289,y:307.89782524108887,z:-10.200862884521484},{x:346.29688262939453,y:276.4256286621094,z:-19.748122692108154},{x:335.16246795654297,y:276.22097969055176,z:-12.313398122787476},{x:345.09132385253906,y:274.7082996368408,z:-19.304605722427368},{x:325.4267883300781,y:252.95130729675293,z:-1.6661019623279572},{x:315.347843170166,y:259.05200958251953,z:-.25604281574487686},{x:330.44933319091797,y:267.7570152282715,z:-14.017432928085327},{x:294.96768951416016,y:185.26001930236816,z:23.903164863586426,name:"faceOval"},{x:299.63531494140625,y:192.7913761138916,z:12.640198469161987},{x:304.5452117919922,y:202.4142837524414,z:3.244667649269104,name:"rightEyebrow"},{x:331.6915512084961,y:320.0467872619629,z:-10.632705688476562},{x:334.5911407470703,y:201.27566814422607,z:-6.133356094360352,name:"rightEyebrow"},{x:331.4815902709961,y:185.44180870056152,z:.6627205014228821},{x:328.05816650390625,y:170.8385467529297,z:7.358860373497009,name:"faceOval"},{x:304.49764251708984,y:239.76297855377197,z:10.387605428695679},{x:290.6382179260254,y:248.85257720947266,z:19.03616428375244},{x:331.5682601928711,y:233.20727348327637,z:7.837390303611755},{x:295.5115509033203,y:228.9834451675415,z:14.41426157951355},{x:336.94332122802734,y:241.8259334564209,z:-5.27842104434967},{x:336.2792205810547,y:262.7049922943115,z:-26.12074375152588},{x:284.4102478027344,y:255.3262710571289,z:25.467140674591064},{x:295.1420593261719,y:253.02655220031738,z:12.430112361907959},{x:303.5196113586426,y:254.20703887939453,z:6.139191389083862},{x:315.73450088500977,y:251.64799690246582,z:3.3788898587226868},{x:324.69661712646484,y:247.56494522094727,z:2.3328344523906708},{x:331.57970428466797,y:243.02241325378418,z:1.1423448473215103},{x:345.6210708618164,y:229.9976634979248,z:-10.825285911560059},{x:286.26644134521484,y:270.37991523742676,z:21.708929538726807},{x:290.2525520324707,y:228.4921360015869,z:17.71728754043579},{x:351.65367126464844,y:269.3400764465332,z:-33.450424671173096},{x:333.1378936767578,y:253.88388633728027,z:-7.230473756790161},{x:277.8318977355957,y:246.95331573486328,z:68.20805549621582,name:"faceOval"},{x:336.6680908203125,y:238.10003757476807,z:.7688578963279724},{x:329.95800018310547,y:269.18323516845703,z:-7.207130789756775},{x:299.17491912841797,y:234.13324356079102,z:15.95489501953125},{x:335.61729431152344,y:258.71752738952637,z:-23.016133308410645},{x:284.1079330444336,y:297.0343494415283,z:63.25934886932373,name:"faceOval"},{x:331.44542694091797,y:230.6892442703247,z:9.92658257484436,name:"rightEye"},{x:341.41536712646484,y:253.01264762878418,z:-29.038610458374023},{x:303.5472869873047,y:327.5896739959717,z:16.725212335586548},{x:304.7756576538086,y:337.4389457702637,z:27.38126277923584,name:"faceOval"},{x:280.80501556396484,y:275.32050132751465,z:45.0752067565918},{x:295.43582916259766,y:318.4501647949219,z:26.2608003616333},{x:281.4303207397461,y:228.7355661392212,z:40.94350814819336},{x:331.2549591064453,y:349.4216537475586,z:-7.376367449760437},{x:352.4247741699219,y:271.7330074310303,z:-24.953596591949463},{x:327.5672912597656,y:260.41900634765625,z:-5.456410646438599},{x:284.5432472229004,y:241.7647933959961,z:29.668869972229004},{x:310,y:235.66174507141113,z:8.502663969993591,name:"rightEye"},{x:315.7071113586426,y:235.7572603225708,z:6.938687562942505,name:"rightEye"},{x:330.41088104248047,y:311.04143142700195,z:-9.325502514839172,name:"lips"},{x:288.5377502441406,y:285.31983375549316,z:21.837315559387207},{x:344.55039978027344,y:359.4300842285156,z:-6.705257892608643,name:"faceOval"},{x:323.41880798339844,y:351.67362213134766,z:7.802375555038452,name:"faceOval"},{x:314.64088439941406,y:346.11894607543945,z:16.36339783668518,name:"faceOval"},{x:349.4945526123047,y:184.8434829711914,z:-.21847527474164963},{x:359.24694061279297,y:359.8348903656006,z:-8.403456211090088,name:"faceOval"},{x:321.26182556152344,y:234.64492321014404,z:6.90950870513916,name:"rightEye"},{x:326.318359375,y:232.90250301361084,z:8.029969334602356,name:"rightEye"},{x:329.6211624145508,y:231.6195774078369,z:9.722331762313843,name:"rightEye"},{x:285.9398078918457,y:228.2351303100586,z:24.650139808654785},{x:325.79288482666016,y:227.88007736206055,z:7.469738721847534,name:"rightEye"},{x:320.1699447631836,y:227.5934886932373,z:6.168370842933655,name:"rightEye"},{x:314.85408782958984,y:227.85282611846924,z:6.2675780057907104,name:"rightEye"},{x:309.3084907531738,y:229.1516876220703,z:7.7031683921813965,name:"rightEye"},{x:305.5621337890625,y:230.92366218566895,z:9.722331762313843,name:"rightEye"},{x:277.8681945800781,y:228.5354232788086,z:59.71122741699219,name:"faceOval"},{x:306.1444664001465,y:235.1954698562622,z:10.603528022766113,name:"rightEye"},{x:355.4478454589844,y:281.96210861206055,z:-20.565123558044434},{x:333.02661895751953,y:288.0105400085449,z:-14.72939133644104},{x:337.15728759765625,y:269.2059516906738,z:-19.8414945602417},{x:345.9898376464844,y:283.5453128814697,z:-20.4834246635437},{x:351.48963928222656,y:219.98916149139404,z:-7.0378947257995605},{x:312.39574432373047,y:336.50628089904785,z:8.671900033950806},{x:321.32152557373047,y:343.1755256652832,z:.9067271649837494},{x:343.78379821777344,y:353.2975959777832,z:-14.355905055999756},{x:296.8791389465332,y:327.91497230529785,z:41.01353645324707,name:"faceOval"},{x:329.6939468383789,y:229.27897453308105,z:8.934508562088013,name:"rightEye"},{x:341.6905212402344,y:241.4073657989502,z:-14.589333534240723},{x:359.03079986572266,y:353.48859786987305,z:-15.803166627883911},{x:333.1861877441406,y:356.43213272094727,z:-1.0234417766332626,name:"faceOval"},{x:283.97483825683594,y:291.4318656921387,z:41.94725513458252},{x:343.33770751953125,y:305.830135345459,z:-15.756480693817139,name:"lips"},{x:342.40283966064453,y:307.7453899383545,z:-17.4021577835083},{x:341.53621673583984,y:311.0595703125,z:-19.047834873199463},{x:340.9107208251953,y:315.4837703704834,z:-18.5576331615448,name:"lips"},{x:339.1478729248047,y:323.42233657836914,z:-14.367576837539673},{x:333.3201599121094,y:307.4406337738037,z:-9.617288708686829},{x:331.2411117553711,y:306.9811820983887,z:-9.669809937477112},{x:329.23255920410156,y:306.0508346557617,z:-9.582273960113525,name:"lips"},{x:322.4586486816406,y:301.33323669433594,z:-7.720675468444824},{x:297.1712112426758,y:286.9552803039551,z:8.240055441856384},{x:341.3060760498047,y:235.4432201385498,z:-7.504753470420837},{x:336.9318389892578,y:224.3451976776123,z:5.829898118972778},{x:332.65323638916016,y:226.70403957366943,z:8.105834126472473},{x:334.67357635498047,y:306.4397621154785,z:-8.981193900108337,name:"lips"},{x:297.4601936340332,y:306.29210472106934,z:15.476365089416504},{x:342.9119110107422,y:222.37077713012695,z:-2.754466235637665},{x:335.4629898071289,y:332.20250129699707,z:-11.823196411132812},{x:353.2412338256836,y:240.56339263916016,z:-27.147831916809082},{x:346.3080596923828,y:236.41446590423584,z:-18.452589511871338},{x:352.6475143432617,y:234.1420555114746,z:-19.748122692108154},{x:337.3209762573242,y:253.39937210083008,z:-16.024924516677856},{x:358.6122131347656,y:344.90861892700195,z:-18.592647314071655},{x:358.1117248535156,y:334.64990615844727,z:-17.49552845954895},{x:346.4450454711914,y:335.0321102142334,z:-16.32838249206543},{x:319.17640686035156,y:320.2833938598633,z:-3.276764452457428},{x:325.2540588378906,y:276.2369728088379,z:-6.460157036781311},{x:326.7214584350586,y:327.3939514160156,z:-7.417217493057251},{x:310.7190132141113,y:277.2265148162842,z:-3.5452082753181458},{x:319.78355407714844,y:284.8238182067871,z:-6.4543211460113525},{x:305.773983001709,y:290.83580017089844,z:.06907138042151928},{x:344.4001770019531,y:344.85408782958984,z:-16.946970224380493},{x:333.1879425048828,y:258.74256134033203,z:-11.90489649772644},{x:313.80598068237305,y:327.08919525146484,z:2.2277912497520447},{x:322.9637908935547,y:334.6819496154785,z:-3.3643004298210144},{x:313.4055519104004,y:311.2166690826416,z:-1.1175429821014404},{x:291.0865783691406,y:298.2831001281738,z:22.467575073242188},{x:305.6580924987793,y:313.3707904815674,z:5.561453700065613},{x:288.23760986328125,y:305.9941864013672,z:36.765122413635254},{x:315.10692596435547,y:296.26991271972656,z:-4.604393839836121},{x:337.50518798828125,y:247.5944423675537,z:-10.597691535949707},{x:338.8450622558594,y:265.47778129577637,z:-27.778091430664062},{x:334.25254821777344,y:269.0671920776367,z:-20.938611030578613},{x:341.64512634277344,y:259.6387195587158,z:-32.189905643463135},{x:331.44081115722656,y:219.0976095199585,z:4.207563698291779},{x:320.56339263916016,y:216.49658203125,z:2.930997312068939},{x:311.21912002563477,y:216.57853603363037,z:2.9674705862998962},{x:303.46256256103516,y:218.54614734649658,z:5.357203483581543},{x:297.99999237060547,y:222.505202293396,z:9.325502514839172},{x:294.93839263916016,y:236.39654159545898,z:18.534289598464966},{x:278.87489318847656,y:259.7095584869385,z:45.68212032318115},{x:300.3782653808594,y:245.38593292236328,z:12.278382778167725},{x:307.06348419189453,y:246.36857986450195,z:8.164191246032715},{x:315.5229187011719,y:245.3949737548828,z:5.503097176551819},{x:323.71395111083984,y:242.75178909301758,z:4.6335723996162415},{x:330.2785873413086,y:239.34658527374268,z:4.937030673027039},{x:334.6982192993164,y:236.0460376739502,z:4.823233783245087},{x:279.3412208557129,y:263.5196113586426,z:70.91583728790283,name:"faceOval"},{x:334.65972900390625,y:271.6648578643799,z:-17.775644063949585},{x:342.05677032470703,y:246.99846267700195,z:-20.84523916244507},{x:344.0357971191406,y:264.5701503753662,z:-32.936880588531494},{x:348.25531005859375,y:268.6645030975342,z:-30.695960521697998},{x:344.12227630615234,y:266.34212493896484,z:-29.808926582336426},{x:337.12318420410156,y:274.2556858062744,z:-15.768152475357056},{x:349.49047088623047,y:269.071683883667,z:-32.51670837402344},{x:350.1683044433594,y:271.4691352844238,z:-24.93025302886963},{x:333.9634704589844,y:230.56639194488525,z:8.89949381351471},{x:338.2147979736328,y:231.4807891845703,z:4.6715047955513},{x:340.4712677001953,y:231.74463272094727,z:-.34996166825294495},{x:303.28975677490234,y:232.24980354309082,z:11.916568279266357,name:"rightEye"},{x:299.4649124145508,y:229.53842639923096,z:12.325069904327393},{x:359.09618377685547,y:241.77349090576172,z:-24.650139808654785},{x:399.46216583251953,y:229.89503860473633,z:15.919880867004395,name:"leftEye"},{x:361.38919830322266,y:269.6129894256592,z:-24.510080814361572},{x:416.9973373413086,y:206.0895538330078,z:53.26857566833496,name:"faceOval"},{x:381.32179260253906,y:235.5476474761963,z:7.6214683055877686},{x:387.8068542480469,y:236.25958442687988,z:8.345099091529846},{x:393.95751953125,y:235.8660364151001,z:10.475142002105713},{x:401.84600830078125,y:232.77019500732422,z:16.760226488113403},{x:375.70568084716797,y:233.48456382751465,z:8.234220147132874},{x:388.17752838134766,y:218.94717693328857,z:6.810300946235657},{x:381.64928436279297,y:219.2656660079956,z:6.711093783378601},{x:394.4760513305664,y:219.66821193695068,z:9.173773527145386},{x:398.8843536376953,y:221.8837022781372,z:12.03328251838684},{x:406.5454864501953,y:237.12156772613525,z:19.7131085395813},{x:383.87447357177734,y:337.6932907104492,z:-8.631049990653992},{x:401.2682342529297,y:228.5916566848755,z:18.359217643737793,name:"leftEye"},{x:422.0449447631836,y:236.73934936523438,z:51.16771221160889},{x:412.69153594970703,y:232.80198097229004,z:27.52131938934326},{x:387.3497772216797,y:263.298397064209,z:-2.8609684109687805},{x:364.5124053955078,y:293.39221000671387,z:-22.397546768188477,name:"lips"},{x:363.62987518310547,y:302.1291446685791,z:-19.643079042434692},{x:373.2334518432617,y:295.8647060394287,z:-18.125789165496826,name:"lips"},{x:378.83365631103516,y:299.5177745819092,z:-13.153743743896484,name:"lips"},{x:369.91477966308594,y:302.5704002380371,z:-16.65518283843994},{x:374.9167251586914,y:303.5416603088379,z:-11.963253021240234},{x:387.58888244628906,y:312.2716999053955,z:-4.680258631706238},{x:360.6635284423828,y:264.31986808776855,z:-35.94811677932739},{x:361.04564666748047,y:256.8225860595703,z:-37.278664112091064},{x:408.3855438232422,y:213.52088928222656,z:15.756480693817139,name:"leftEyebrow"},{x:373.2946014404297,y:245.38101196289062,z:-1.9316278398036957},{x:376.83860778808594,y:264.3721103668213,z:-18.510947227478027},{x:376.9546127319336,y:261.0010528564453,z:-15.989909172058105},{x:406.1498260498047,y:263.5030174255371,z:7.072908878326416},{x:360.07205963134766,y:248.3631706237793,z:-32.16656446456909},{x:393.11119079589844,y:205.10473251342773,z:3.7786373496055603,name:"leftEyebrow"},{x:402.12791442871094,y:207.89000988006592,z:9.383859634399414,name:"leftEyebrow"},{x:410.8693313598633,y:191.6182279586792,z:41.27030849456787,name:"faceOval"},{x:364.9509811401367,y:210.40483474731445,z:-3.758212625980377},{x:375.94444274902344,y:221.1331844329834,z:8.368442058563232},{x:392.1904754638672,y:305.0360298156738,z:-1.752179116010666},{x:419.50225830078125,y:307.25592613220215,z:58.96425247192383,name:"faceOval"},{x:372.0027160644531,y:268.7212657928467,z:-16.631840467453003},{x:366.1614227294922,y:271.6237449645996,z:-18.219159841537476},{x:385.00938415527344,y:305.3863334655762,z:-2.567722797393799},{x:381.99771881103516,y:304.9723720550537,z:-4.575215280056},{x:405.078125,y:203.21216583251953,z:13.713973760604858,name:"leftEyebrow"},{x:377.13207244873047,y:268.4710121154785,z:-15.266278982162476},{x:380.9713363647461,y:205.36980628967285,z:-.7250899076461792,name:"leftEyebrow"},{x:381.7788314819336,y:198.9268398284912,z:-1.184653863310814,name:"leftEyebrow"},{x:385.5204772949219,y:172.1484375,z:16.04826807975769,name:"faceOval"},{x:407.94189453125,y:196.76236152648926,z:25.723915100097656},{x:383.03890228271484,y:184.5157527923584,z:7.393874526023865},{x:411.61781311035156,y:210.79241752624512,z:22.315845489501953,name:"leftEyebrow"},{x:414.30870056152344,y:208.4643030166626,z:37.021894454956055},{x:364.28722381591797,y:298.35777282714844,z:-21.86065673828125},{x:371.3682556152344,y:299.78848457336426,z:-17.834001779556274},{x:376.88201904296875,y:301.6696071624756,z:-13.153743743896484},{x:370.2193832397461,y:270.49095153808594,z:-15.569736957550049},{x:383.5081100463867,y:305.2726364135742,z:-3.673594295978546},{x:380.73760986328125,y:305.96869468688965,z:-8.660228252410889},{x:381.2334442138672,y:304.63574409484863,z:-4.820316135883331,name:"lips"},{x:368.1698989868164,y:264.8884963989258,z:-25.653886795043945},{x:373.5087203979492,y:303.4233856201172,z:-10.95950722694397,name:"lips"},{x:368.4544372558594,y:303.29601287841797,z:-14.169161319732666,name:"lips"},{x:362.76554107666016,y:303.5735607147217,z:-16.911956071853638,name:"lips"},{x:366.60980224609375,y:324.8870658874512,z:-15.616422891616821},{x:365.7067108154297,y:315.95678329467773,z:-20.903596878051758,name:"lips"},{x:365.0083923339844,y:311.2232208251953,z:-21.066999435424805},{x:364.1508102416992,y:307.0583438873291,z:-18.907777070999146},{x:363.37512969970703,y:304.5721435546875,z:-17.42550015449524,name:"lips"},{x:374.580078125,y:304.3059539794922,z:-11.40302300453186,name:"lips"},{x:375.55362701416016,y:305.0998020172119,z:-12.861957550048828},{x:377.2437286376953,y:307.1674346923828,z:-14.215847253799438},{x:378.68587493896484,y:309.9015712738037,z:-13.223772048950195,name:"lips"},{x:383.8992691040039,y:290.29629707336426,z:-9.97326910495758},{x:423.3871841430664,y:271.91688537597656,z:74.37058925628662,name:"faceOval"},{x:377.68043518066406,y:304.62209701538086,z:-7.603961229324341,name:"lips"},{x:379.00428771972656,y:304.9314594268799,z:-8.57852816581726},{x:364.00279998779297,y:275.2813911437988,z:-19.25792098045349},{x:374.68231201171875,y:273.82555961608887,z:-11.28047227859497},{x:365.0354766845703,y:273.4548568725586,z:-18.791062831878662},{x:380.61901092529297,y:249.8848056793213,z:.15501167625188828},{x:391.14158630371094,y:254.7934627532959,z:2.0906515419483185},{x:378.1761169433594,y:264.9612236022949,z:-12.605184316635132},{x:400.9540557861328,y:179.99592304229736,z:27.82477855682373,name:"faceOval"},{x:398.0038833618164,y:188.50656509399414,z:16.094952821731567},{x:394.8717498779297,y:199.0359592437744,z:6.226727366447449,name:"leftEyebrow"},{x:382.10926055908203,y:316.83926582336426,z:-8.946179747581482},{x:366.51588439941406,y:200.32583713531494,z:-5.24632453918457,name:"leftEyebrow"},{x:367.4893569946289,y:183.87210845947266,z:1.9039081037044525},{x:368.6243438720703,y:168.8127565383911,z:8.736093044281006,name:"faceOval"},{x:398.96175384521484,y:234.9675178527832,z:13.713973760604858},{x:412.9645538330078,y:242.23042488098145,z:23.272905349731445},{x:372.05257415771484,y:231.41919136047363,z:9.226294755935669},{x:406.0722351074219,y:223.58965873718262,z:18.370890617370605},{x:368.27442169189453,y:240.2039337158203,z:-4.166713654994965},{x:372.3575210571289,y:260.66442489624023,z:-24.976940155029297},{x:419.2244338989258,y:247.9079246520996,z:30.299127101898193},{x:409.43885803222656,y:246.60913467407227,z:16.398411989212036},{x:401.69139862060547,y:248.76328468322754,z:9.395531415939331},{x:389.7608184814453,y:247.56915092468262,z:5.841569304466248},{x:380.5461883544922,y:244.55984115600586,z:4.263003468513489},{x:373.25817108154297,y:240.80214500427246,z:2.5356262922286987},{x:358.77086639404297,y:229.35615062713623,z:-10.387605428695679},{x:419.5793914794922,y:262.8478717803955,z:26.5175724029541},{x:410.8808898925781,y:222.51372814178467,z:22.199130058288574},{x:358.45714569091797,y:268.91467094421387,z:-33.17030906677246},{x:373.4129333496094,y:251.6385841369629,z:-5.771540403366089},{x:422.5408172607422,y:239.23919677734375,z:74.04378890991211,name:"faceOval"},{x:367.8171920776367,y:236.58040523529053,z:1.820748895406723},{x:378.51959228515625,y:266.2532329559326,z:-5.74819803237915},{x:403.3472442626953,y:229.05112266540527,z:19.689764976501465},{x:372.34840393066406,y:256.6451168060303,z:-21.872329711914062},{x:422.54566192626953,y:289.1587829589844,z:68.67491245269775,name:"faceOval"},{x:371.9297409057617,y:228.90116214752197,z:11.432201862335205,name:"leftEye"},{x:366.21360778808594,y:251.6158962249756,z:-28.19826364517212},{x:409.1571807861328,y:321.3156223297119,z:20.2266526222229},{x:408.52943420410156,y:331.44238471984863,z:31.09278917312622,name:"faceOval"},{x:424.2788314819336,y:267.1992301940918,z:50.467424392700195},{x:415.60352325439453,y:311.6528606414795,z:30.579242706298828},{x:418.12793731689453,y:221.59927368164062,z:46.26569747924805},{x:385.68286895751953,y:346.0184955596924,z:-5.70151150226593},{x:357.82936096191406,y:271.3758373260498,z:-24.836881160736084},{x:379.588623046875,y:257.5071716308594,z:-3.755294680595398},{x:417.4592590332031,y:234.71948146820068,z:34.5475435256958},{x:393.4684371948242,y:231.58967971801758,z:11.408859491348267,name:"leftEye"},{x:387.8864288330078,y:232.14245796203613,z:9.51808214187622,name:"leftEye"},{x:382.4981689453125,y:307.5654888153076,z:-7.522260546684265,name:"lips"},{x:419.00169372558594,y:277.8332805633545,z:26.424202919006348},{x:373.62953186035156,y:357.6375102996826,z:-5.75986921787262,name:"faceOval"},{x:392.8708267211914,y:347.72446632385254,z:10.154176950454712,name:"faceOval"},{x:400.3953552246094,y:341.0005187988281,z:19.39797878265381,name:"faceOval"},{x:382.25440979003906,y:231.66935920715332,z:8.998700976371765,name:"leftEye"},{x:377.14550018310547,y:230.4228687286377,z:9.804032444953918,name:"leftEye"},{x:373.8358688354492,y:229.64950561523438,z:11.292144060134888,name:"leftEye"},{x:414.5794677734375,y:221.67891025543213,z:29.412097930908203},{x:377.00672149658203,y:225.66201210021973,z:9.360517263412476,name:"leftEye"},{x:382.29530334472656,y:224.8431158065796,z:8.32175612449646,name:"leftEye"},{x:387.5133514404297,y:224.49507236480713,z:8.917000889778137,name:"leftEye"},{x:393.15906524658203,y:225.24795055389404,z:10.737749338150024,name:"leftEye"},{x:397.05554962158203,y:226.55359268188477,z:13.002015352249146,name:"leftEye"},{x:420.5299377441406,y:221.014666557312,z:65.40690422058105,name:"faceOval"},{x:397.06920623779297,y:230.6661558151245,z:13.807345628738403,name:"leftEye"},{x:377.94647216796875,y:285.1647090911865,z:-13.305472135543823},{x:372.1118927001953,y:267.1267318725586,z:-18.83774757385254},{x:364.9968719482422,y:282.24411964416504,z:-19.818150997161865},{x:401.973876953125,y:331.20131492614746,z:11.566424369812012},{x:394.3083190917969,y:338.86693954467773,z:3.142542541027069},{x:373.9820861816406,y:351.4504623413086,z:-13.50388765335083},{x:414.3888854980469,y:321.24735832214355,z:45.51872253417969,name:"faceOval"},{x:373.44234466552734,y:227.33163356781006,z:10.626870393753052,name:"leftEye"},{x:364.0731430053711,y:240.31539916992188,z:-13.807345628738403},{x:384.2658233642578,y:353.3793067932129,z:.7385850697755814,name:"faceOval"},{x:423.20526123046875,y:283.5176181793213,z:47.152724266052246},{x:369.42798614501953,y:304.0898895263672,z:-14.647691249847412,name:"lips"},{x:370.63812255859375,y:305.90051651000977,z:-16.211668252944946},{x:371.91192626953125,y:309.0167713165283,z:-17.84567356109619},{x:373.0583953857422,y:313.3545398712158,z:-17.378815412521362,name:"lips"},{x:375.39905548095703,y:321.09289169311523,z:-13.118728399276733},{x:379.2567825317383,y:304.3582534790039,z:-7.924926280975342},{x:381.18797302246094,y:303.7031364440918,z:-7.843226194381714},{x:383.0918502807617,y:302.4884605407715,z:-7.6506465673446655,name:"lips"},{x:389.09461975097656,y:297.1475315093994,z:-5.5497825145721436},{x:411.6408920288086,y:280.24898529052734,z:12.02161192893982},{x:363.3110809326172,y:234.27620887756348,z:-6.775286793708801},{x:366.0474395751953,y:223.29872131347656,z:6.827808618545532},{x:370.34427642822266,y:225.1457118988037,z:9.558931589126587},{x:377.5371551513672,y:303.60079765319824,z:-7.358860373497009,name:"lips"},{x:412.9557800292969,y:299.53579902648926,z:19.39797878265381},{x:360.0810241699219,y:221.72012329101562,z:-2.153385728597641},{x:379.82784271240234,y:329.47723388671875,z:-10.48097848892212},{x:359.08477783203125,y:235.7911491394043,z:-18.079102039337158},{x:369.6688461303711,y:251.5407943725586,z:-14.962821006774902},{x:369.5555114746094,y:333.5307312011719,z:-15.67478060722351},{x:394.0193176269531,y:315.6973171234131,z:-.9920747578144073},{x:383.78997802734375,y:272.7268695831299,z:-4.689012169837952},{x:387.67765045166016,y:323.6722755432129,z:-5.640236139297485},{x:397.8769302368164,y:272.1331214904785,z:-.9395531564950943},{x:389.87476348876953,y:280.5630111694336,z:-4.29218202829361},{x:403.83888244628906,y:285.1167869567871,z:3.0229100584983826},{x:372.5467300415039,y:343.1070327758789,z:-16.153310537338257},{x:374.1112518310547,y:256.3721466064453,z:-10.574349164962769},{x:399.73785400390625,y:321.77515983581543,z:4.849494695663452},{x:392.03365325927734,y:330.56447982788086,z:-1.3407598435878754},{x:398.59134674072266,y:305.93902587890625,z:1.517290621995926},{x:417.95997619628906,y:290.9716987609863,z:26.89105987548828},{x:406.04541778564453,y:307.35154151916504,z:8.666064143180847},{x:420.75328826904297,y:298.40752601623535,z:41.78385257720947},{x:395.4522705078125,y:291.4153575897217,z:-2.1752697229385376},{x:368.6452102661133,y:245.8882999420166,z:-9.453888535499573},{x:370.34900665283203,y:263.56690406799316,z:-26.75100326538086},{x:374.98477935791016,y:266.6126346588135,z:-19.77146625518799},{x:366.99840545654297,y:258.12140464782715,z:-31.372904777526855},{x:371.00616455078125,y:217.63479709625244,z:5.60522198677063},{x:381.30577087402344,y:214.14087295532227,z:4.983716309070587},{x:390.1496124267578,y:213.38221549987793,z:5.593550801277161},{x:397.7696990966797,y:214.3659782409668,z:8.57852816581726},{x:403.1652069091797,y:217.65509605407715,z:13.013685941696167},{x:407.3551940917969,y:230.72525024414062,z:22.444231510162354},{x:424.0876770019531,y:251.7839241027832,z:51.16771221160889},{x:403.50196838378906,y:239.88757610321045,z:15.803166627883911},{x:397.31719970703125,y:241.49806022644043,z:11.233787536621094},{x:388.99425506591797,y:241.4366912841797,z:7.948269248008728},{x:380.7804489135742,y:239.78078842163086,z:6.600214838981628},{x:374.01336669921875,y:237.11946487426758,z:6.349278092384338},{x:369.39125061035156,y:234.35351371765137,z:5.987462401390076},{x:422.9730987548828,y:255.76455116271973,z:76.61150932312012,name:"faceOval"},{x:374.73915100097656,y:269.24214363098145,z:-16.608498096466064},{x:364.61681365966797,y:245.71088790893555,z:-20.02823829650879},{x:365.3834533691406,y:263.34174156188965,z:-32.32996463775635},{x:361.58252716064453,y:267.8273677825928,z:-30.345816612243652},{x:365.37208557128906,y:265.0249671936035,z:-29.178667068481445},{x:372.72605895996094,y:272.05135345458984,z:-14.834434986114502},{x:360.48614501953125,y:268.34827423095703,z:-32.189905643463135},{x:359.9516296386719,y:270.8049201965332,z:-24.650139808654785},{x:369.5049285888672,y:229.01945114135742,z:10.107489824295044},{x:365.5447769165039,y:230.24096488952637,z:5.593550801277161},{x:363.50669860839844,y:230.6208372116089,z:.43622106313705444},{x:399.3529510498047,y:227.65677452087402,z:15.35965085029602,name:"leftEye"},{x:402.5693130493164,y:224.60190296173096,z:15.931552648544312}],box:{xMin:277.8318977355957,yMin:168.7741756439209,xMax:424.2788314819336,yMax:359.8348903656006,width:146.4469337463379,height:191.0607147216797}},SAMPLE_FACELANDMARKER_RESULT:{faceLandmarks:[[{x:.5760777592658997,y:.8639070391654968,z:-.030997956171631813},{x:.572094738483429,y:.7886289358139038,z:-.07189624011516571},{x:.5723551511764526,y:.8075382709503174,z:-.03578168898820877},{x:.5548420548439026,y:.7188365459442139,z:-.057787876576185226},{x:.5706077814102173,y:.7674974799156189,z:-.07740399986505508},{x:.5681378245353699,y:.7387768030166626,z:-.07356284558773041},{x:.5621535181999207,y:.6681165099143982,z:-.04189874976873398},{x:.46613582968711853,y:.6679812073707581,z:.011289681307971478},{x:.5579932928085327,y:.6174106597900391,z:-.03502821549773216},{x:.5563451647758484,y:.5905600190162659,z:-.03928658738732338},{x:.5487832427024841,y:.4900572597980499,z:-.029898937791585922},{x:.5765544176101685,y:.8692144751548767,z:-.02831427752971649},{x:.5771114230155945,y:.873644232749939,z:-.02345779910683632},{x:.5771905779838562,y:.877016007900238,z:-.016658689826726913},{x:.5778058767318726,y:.8770116567611694,z:-.014505492523312569},{x:.5783766508102417,y:.8835000991821289,z:-.015996402129530907},{x:.5792440176010132,y:.8913810849189758,z:-.01924579218029976},{x:.5796768069267273,y:.8996334671974182,z:-.018261712044477463},{x:.5817288160324097,y:.9255813956260681,z:-.007126849144697189},{x:.5726592540740967,y:.7992473244667053,z:-.0643521398305893},{x:.5579419136047363,y:.7996989488601685,z:-.04566684365272522},{x:.4216199815273285,y:.5958762764930725,z:.06776496022939682},{x:.5052269697189331,y:.6796539425849915,z:-.0010737782577052712},{x:.49243026971817017,y:.6838865876197815,z:-.0005227324436418712},{x:.4796970784664154,y:.6856290102005005,z:.002684245817363262},{x:.4618356227874756,y:.6764569878578186,z:.013439622707664967},{x:.5160380601882935,y:.6737282276153564,z:-17607348127057776e-21},{x:.48070961236953735,y:.6255870461463928,z:-.008339674212038517},{x:.49719780683517456,y:.6256808042526245,z:-.008027955889701843},{x:.46674346923828125,y:.6317623853683472,z:-.004460199736058712},{x:.4582492709159851,y:.641118049621582,z:.0011905613355338573},{x:.45408669114112854,y:.6911458969116211,z:.020514748990535736},{x:.535312294960022,y:.9619986414909363,z:.012499462813138962},{x:.4608460068702698,y:.6628725528717041,z:.01517564244568348},{x:.4206731915473938,y:.6828458309173584,z:.07848648726940155},{x:.4390624463558197,y:.6796106696128845,z:.03283142298460007},{x:.5029968619346619,y:.7701570391654968,z:-.009734481573104858},{x:.5595027208328247,y:.8607323169708252,z:-.030043255537748337},{x:.5621269941329956,y:.8738374710083008,z:-.021709579974412918},{x:.5451499819755554,y:.865527331829071,z:-.022014077752828598},{x:.5351184010505676,y:.8705098032951355,z:-.011602800339460373},{x:.5495014190673828,y:.8744956254959106,z:-.016490943729877472},{x:.5395170450210571,y:.8759440779685974,z:-.007333362940698862},{x:.5183624029159546,y:.8959754705429077,z:.010520773939788342},{x:.5604349374771118,y:.7895449995994568,z:-.07082037627696991},{x:.557381272315979,y:.7687489986419678,z:-.07590588927268982},{x:.4432901442050934,y:.6308897733688354,z:.0027153254486620426},{x:.5258325338363647,y:.7151225805282593,z:-.014676518738269806},{x:.5271827578544617,y:.7833116054534912,z:-.037643320858478546},{x:.5257382988929749,y:.7717816233634949,z:-.03401920944452286},{x:.46516409516334534,y:.7705106735229492,z:.0065747760236263275},{x:.5558893084526062,y:.7420997619628906,z:-.0694495290517807},{x:.4720408320426941,y:.6066038608551025,z:-.021204356104135513},{x:.45432573556900024,y:.6158540844917297,z:-.011054684408009052},{x:.4305151402950287,y:.5608053803443909,z:.0396830290555954},{x:.5310865640640259,y:.6157484650611877,z:-.03081176057457924},{x:.5114666223526001,y:.6329749226570129,z:-.00335998204536736},{x:.506435751914978,y:.8786543607711792,z:.012980876490473747},{x:.4480472207069397,y:.8640613555908203,z:.12569651007652283},{x:.5372058153152466,y:.7942581176757812,z:-.03168361634016037},{x:.5488379597663879,y:.8001630306243896,z:-.03280917927622795},{x:.5213388204574585,y:.8794381618499756,z:.011892606504261494},{x:.5242055654525757,y:.8789222240447998,z:.008370225317776203},{x:.4477175176143646,y:.6039950251579285,z:-.0050799972377717495},{x:.526964008808136,y:.7916748523712158,z:-.02968614175915718},{x:.4971255660057068,y:.6050706505775452,z:-.028175678104162216},{x:.4938119053840637,y:.5882453918457031,z:-.03210941329598427},{x:.4757143557071686,y:.5094879865646362,z:-.01300730835646391},{x:.43947282433509827,y:.5816648006439209,z:.01415177434682846},{x:.485664039850235,y:.5477864146232605,z:-.023685332387685776},{x:.43635931611061096,y:.6226438283920288,z:.013606148771941662},{x:.42910251021385193,y:.6102726459503174,z:.03926564007997513},{x:.5605402588844299,y:.8680099248886108,z:-.027318159118294716},{x:.5474816560745239,y:.8702861070632935,z:-.019686367362737656},{x:.5373021364212036,y:.8728838562965393,z:-.010484928265213966},{x:.540735125541687,y:.7979167103767395,z:-.029073253273963928},{x:.5228585004806519,y:.87913578748703,z:.009915109723806381},{x:.530497670173645,y:.8815253973007202,z:.0020524784922599792},{x:.5259912610054016,y:.8790552616119385,z:.007895970717072487},{x:.5433906316757202,y:.7882310748100281,z:-.05121905356645584},{x:.541388213634491,y:.8777219653129578,z:-.00466804439201951},{x:.5515822172164917,y:.8767023086547852,z:-.010475946590304375},{x:.5637003779411316,y:.877059817314148,z:-.015273625031113625},{x:.5640299320220947,y:.9263423085212708,z:-.00658724969252944},{x:.5642300248146057,y:.8993074893951416,z:-.017653480172157288},{x:.5637336373329163,y:.8910360932350159,z:-.01852807030081749},{x:.5637134313583374,y:.8837276697158813,z:-.01482592523097992},{x:.564205527305603,y:.8768964409828186,z:-.01331155002117157},{x:.5419867634773254,y:.8778373599052429,z:-.0037720394320786},{x:.5404468774795532,y:.880696177482605,z:-.005610354244709015},{x:.5392338633537292,y:.8845721483230591,z:-.007352025713771582},{x:.538469672203064,y:.8891173601150513,z:-.005154991988092661},{x:.5189250111579895,y:.8452741503715515,z:-.009755070321261883},{x:.4258975088596344,y:.7662280797958374,z:.1387351155281067},{x:.5725725293159485,y:.8041572570800781,z:-.04583907872438431},{x:.5342061519622803,y:.8785833120346069,z:.002659974154084921},{x:.5324031114578247,y:.8804071545600891,z:.0017832003068178892},{x:.5538818836212158,y:.8078407645225525,z:-.03254539892077446},{x:.5325431823730469,y:.8026832938194275,z:-.019140373915433884},{x:.5514076948165894,y:.8043903112411499,z:-.03313535451889038},{x:.5131856203079224,y:.7284771800041199,z:-.009399853646755219},{x:.49331504106521606,y:.7443980574607849,z:-.005225230939686298},{x:.5239617824554443,y:.7807451486587524,z:-.025881027802824974},{x:.4473606050014496,y:.5315827131271362,z:.011164786294102669},{x:.45718759298324585,y:.5604941248893738,z:-.005943301599472761},{x:.4670005738735199,y:.5909327268600464,z:-.019681761041283607},{x:.5311570167541504,y:.9076261520385742,z:.00389476353302598},{x:.5249923467636108,y:.5893563628196716,z:-.037981919944286346},{x:.5166932344436646,y:.5429551005363464,z:-.03319704160094261},{x:.5085030198097229,y:.49676206707954407,z:-.02691275253891945},{x:.4687720239162445,y:.6834565997123718,z:.008113506250083447},{x:.4426414966583252,y:.7069531679153442,z:.028577271848917007},{x:.5230373740196228,y:.6675713658332825,z:.001773772411979735},{x:.4481240212917328,y:.6527872085571289,z:.012414850294589996},{x:.5339856743812561,y:.7012367844581604,z:-.020220188423991203},{x:.5347223281860352,y:.7761190533638,z:-.05141595005989075},{x:.4315067231655121,y:.7211957573890686,z:.04381405934691429},{x:.45203351974487305,y:.7206180095672607,z:.017288070172071457},{x:.46892452239990234,y:.7265436053276062,z:.005602988880127668},{x:.49314674735069275,y:.7202282547950745,z:-.0006408205372281373},{x:.5104925632476807,y:.7091827392578125,z:-.00362918758764863},{x:.5232142210006714,y:.698553740978241,z:-.00787867046892643},{x:.5497883558273315,y:.6743605136871338,z:-.036349106580019},{x:.43658503890037537,y:.7627100348472595,z:.042555369436740875},{x:.4397648870944977,y:.6528646349906921,z:.017956094816327095},{x:.5653332471847534,y:.7992802858352661,z:-.06365057826042175},{x:.5285563468933105,y:.736810564994812,z:-.018836988136172295},{x:.4180678725242615,y:.6792560815811157,z:.12284679710865021},{x:.5328429937362671,y:.6865872144699097,z:-.010484723374247551},{x:.5230283141136169,y:.7809416055679321,z:-.011922398582100868},{x:.4551771283149719,y:.6650775074958801,z:.01774493046104908},{x:.5337203741073608,y:.7618928551673889,z:-.04697106033563614},{x:.43463975191116333,y:.8133478164672852,z:.1354849934577942},{x:.5225707292556763,y:.6605283617973328,z:.004980515688657761},{x:.5441933870315552,y:.7497199773788452,z:-.06091512367129326},{x:.4774007797241211,y:.9159183502197266,z:.059622734785079956},{x:.48068761825561523,y:.9364941716194153,z:.08404944837093353},{x:.4268292486667633,y:.7657528519630432,z:.09051097184419632},{x:.46051913499832153,y:.8880485892295837,z:.0738474428653717},{x:.4243420660495758,y:.6434382200241089,z:.06230505183339119},{x:.5342157483100891,y:.9835634231567383,z:.021662971004843712},{x:.5668109655380249,y:.8042187094688416,z:-.044937074184417725},{x:.5176341533660889,y:.7530587315559387,z:-.012967454269528389},{x:.430206298828125,y:.6835605502128601,z:.04612284153699875},{x:.4794231951236725,y:.6732114553451538,z:.003970044665038586},{x:.49073347449302673,y:.6722435355186462,z:.0008692514384165406},{x:.5294116139411926,y:.884677529335022,z:.004413890186697245},{x:.4430122375488281,y:.80235356092453,z:.04987282305955887},{x:.5603825449943542,y:1.0092442035675049,z:.026417359709739685},{x:.5186598300933838,y:.9828659892082214,z:.0513598807156086},{x:.5010536909103394,y:.9640932679176331,z:.06591596454381943},{x:.5524769425392151,y:.539441704750061,z:-.035816047340631485},{x:.5879997611045837,y:1.0091472864151,z:.02285068854689598},{x:.5016193985939026,y:.6684437990188599,z:.00028415941051207483},{x:.511952817440033,y:.6642197370529175,z:.0021144719794392586},{x:.5194343328475952,y:.6623469591140747,z:.004674181342124939},{x:.4321230351924896,y:.6496355533599854,z:.03124697133898735},{x:.508686363697052,y:.6479565501213074,z:-.00044765998609364033},{x:.4963986277580261,y:.6431032419204712,z:-.0032507688738405704},{x:.4845542013645172,y:.6430778503417969,z:-.002903624437749386},{x:.4733612537384033,y:.647506833076477,z:.00023347247042693198},{x:.4668654501438141,y:.653346598148346,z:.004762572236359119},{x:.41815051436424255,y:.633708119392395,z:.09809435904026031},{x:.47159942984580994,y:.6711485385894775,z:.007849935442209244},{x:.5734396576881409,y:.8256140351295471,z:-.03155219927430153},{x:.5306524038314819,y:.8337990641593933,z:-.018351426348090172},{x:.5371729135513306,y:.7910830974578857,z:-.037286680191755295},{x:.5549534559249878,y:.8275275826454163,z:-.030664825811982155},{x:.5597432255744934,y:.6418541669845581,z:-.03318847343325615},{x:.4958484172821045,y:.9429569244384766,z:.048340678215026855},{x:.5140507817268372,y:.9634028077125549,z:.03589847311377525},{x:.5587693452835083,y:.9951097369194031,z:.00908728688955307},{x:.46411189436912537,y:.9051855206489563,z:.10601935535669327},{x:.5181609392166138,y:.6554316878318787,z:.002546071307733655},{x:.5436590909957886,y:.7085841298103333,z:-.03844436630606651},{x:.5872187614440918,y:.9960382580757141,z:.0063423276878893375},{x:.5379653573036194,y:.9989125728607178,z:.03636329993605614},{x:.4350326955318451,y:.8088565468788147,z:.09147704392671585},{x:.5523084998130798,y:.8773422837257385,z:-.009068487212061882},{x:.5510149598121643,y:.8816931843757629,z:-.011043853126466274},{x:.5503793954849243,y:.88776695728302,z:-.01348799467086792},{x:.5501549243927002,y:.8954370617866516,z:-.012142189778387547},{x:.546072781085968,y:.9192524552345276,z:-.003157563041895628},{x:.5314661860466003,y:.8771666884422302,z:.0005075141089037061},{x:.5293324589729309,y:.8762547969818115,z:.00039177737198770046},{x:.5275698900222778,y:.8750609755516052,z:47732755774632096e-21},{x:.5104271173477173,y:.8607332110404968,z:.0012934643309563398},{x:.45938700437545776,y:.8134918212890625,z:.023569690063595772},{x:.5418947339057922,y:.6864100694656372,z:-.027333909645676613},{x:.531914234161377,y:.6456130743026733,z:-.005434140563011169},{x:.523697018623352,y:.647885262966156,z:-.0002466466394253075},{x:.5338191390037537,y:.8783687353134155,z:.002268768846988678},{x:.46226605772972107,y:.8610277771949768,z:.04718952998518944},{x:.5434442758560181,y:.6456181406974792,z:-.02327350154519081},{x:.5399754643440247,y:.940219521522522,z:.005075343884527683},{x:.5661457777023315,y:.71457839012146,z:-.06242101639509201},{x:.5523148775100708,y:.6974870562553406,z:-.04863070324063301},{x:.5639959573745728,y:.6923378109931946,z:-.05180761218070984},{x:.5367592573165894,y:.7423217296600342,z:-.03623027727007866},{x:.5853689908981323,y:.9752064943313599,z:-.002361974213272333},{x:.5835235118865967,y:.9493685960769653,z:-.003941743168979883},{x:.5615018606185913,y:.949194610118866,z:-.0015953965485095978},{x:.5068561434745789,y:.9048219323158264,z:.01862684078514576},{x:.5134067535400391,y:.7971825003623962,z:-.008485661819577217},{x:.5223897099494934,y:.925589919090271,z:.01249657291918993},{x:.48500555753707886,y:.7959478497505188,z:-.0032065745908766985},{x:.5037734508514404,y:.8184596300125122,z:-.004932103678584099},{x:.4766361117362976,y:.828806459903717,z:.01027688942849636},{x:.5589827299118042,y:.974656343460083,z:.0009666886180639267},{x:.5294582843780518,y:.7541216611862183,z:-.025603046640753746},{x:.4973002076148987,y:.9208990931510925,z:.031931452453136444},{x:.5163551568984985,y:.9432790875434875,z:.024321340024471283},{x:.49399662017822266,y:.8814862370491028,z:.018687399104237556},{x:.44948166608810425,y:.836137592792511,z:.05702034756541252},{x:.47898444533348083,y:.8836610913276672,z:.03150695189833641},{x:.4454479217529297,y:.8499438166618347,z:.08868525922298431},{x:.49572959542274475,y:.8452823758125305,z:.0036111653316766024},{x:.5362502336502075,y:.7222585678100586,z:-.027912352234125137},{x:.5393770337104797,y:.7850722074508667,z:-.05415399745106697},{x:.531399667263031,y:.7898418307304382,z:-.03883346915245056},{x:.5451627373695374,y:.7717036604881287,z:-.06480253487825394},{x:.5206395983695984,y:.6287745833396912,z:-.010521138086915016},{x:.4974782466888428,y:.6191938519477844,z:-.014098240062594414},{x:.4774145185947418,y:.6193130612373352,z:-.013643337413668633},{x:.4616098403930664,y:.6259890198707581,z:-.008448202162981033},{x:.4516478478908539,y:.6368461847305298,z:9050309745362028e-20},{x:.4485096037387848,y:.6719120740890503,z:.022984720766544342},{x:.42177659273147583,y:.7240667343139648,z:.08511673659086227},{x:.4616215229034424,y:.6988231539726257,z:.014238474890589714},{x:.4755798876285553,y:.7034608721733093,z:.00625590980052948},{x:.4924992024898529,y:.7005885243415833,z:.0009391739731654525},{x:.5082254409790039,y:.693384051322937,z:-.0009464038303121924},{x:.5203112959861755,y:.6849707961082458,z:-.0022114769089967012},{x:.52867591381073,y:.6779075860977173,z:-.002962538506835699},{x:.4213953912258148,y:.7219811677932739,z:.1350894570350647},{x:.5320829749107361,y:.794858992099762,z:-.03181503340601921},{x:.5452795028686523,y:.7286570072174072,z:-.04771539941430092},{x:.5496407747268677,y:.7866933345794678,z:-.06452003121376038},{x:.557040274143219,y:.7962084412574768,z:-.05837344378232956},{x:.549176812171936,y:.7895247936248779,z:-.057761140167713165},{x:.5362890362739563,y:.8005836606025696,z:-.026903774589300156},{x:.560200035572052,y:.7983731031417847,z:-.06172555685043335},{x:.5616944432258606,y:.8022753596305847,z:-.045200999826192856},{x:.5273328423500061,y:.6611284017562866,z:.0029021520167589188},{x:.534850537776947,y:.6660012006759644,z:-.005215510260313749},{x:.5394860506057739,y:.6701375246047974,z:-.014931917190551758},{x:.4634307324886322,y:.658291757106781,z:.009295716881752014},{x:.4538393020629883,y:.6519932150840759,z:.00930330716073513},{x:.5776031613349915,y:.7159298658370972,z:-.057365912944078445},{x:.6504855155944824,y:.6461779475212097,z:.014184834435582161},{x:.5860154032707214,y:.7962266206741333,z:-.04522843658924103},{x:.6842049360275269,y:.5631637573242188,z:.07207967340946198},{x:.6152560710906982,y:.6674962639808655,z:.0007529259892180562},{x:.6280948519706726,y:.6684326529502869,z:.0016892586136236787},{x:.6408625245094299,y:.6663892269134521,z:.005331226624548435},{x:.6557814478874207,y:.6534678936004639,z:.01646413467824459},{x:.6035663485527039,y:.6639701724052429,z:.0013799630105495453},{x:.6329053044319153,y:.608010470867157,z:-.006195899099111557},{x:.6167260408401489,y:.6117533445358276,z:-.006319951266050339},{x:.6471013426780701,y:.6112449765205383,z:-.0017843559617176652},{x:.6560901999473572,y:.6185776591300964,z:.004047257360070944},{x:.6666946411132812,y:.6651176810264587,z:.023647578433156013},{x:.6311345100402832,y:.9495396018028259,z:.014004078693687916},{x:.6544655561447144,y:.6397901773452759,z:.01809609681367874},{x:.6965808868408203,y:.6482675075531006,z:.08304904401302338},{x:.679817259311676,y:.650188148021698,z:.03632688894867897},{x:.6336516737937927,y:.7541458010673523,z:-.007742783520370722},{x:.5921701192855835,y:.8567668199539185,z:-.029399123042821884},{x:.591663658618927,y:.870215654373169,z:-.02103729173541069},{x:.6068367958068848,y:.8584195375442505,z:-.020668085664510727},{x:.6176617741584778,y:.860965371131897,z:-.009790095500648022},{x:.6040634512901306,y:.8686612844467163,z:-.015289564616978168},{x:.6143736839294434,y:.8671170473098755,z:-.005712216719985008},{x:.6373105049133301,y:.8815656900405884,z:.012672550976276398},{x:.5832505822181702,y:.7866312861442566,z:-.07051534950733185},{x:.5836675763130188,y:.7658692598342896,z:-.07566110789775848},{x:.6709531545639038,y:.604898989200592,z:.005951565690338612},{x:.6029891967773438,y:.705652117729187,z:-.013388276100158691},{x:.6131622195243835,y:.7728396058082581,z:-.036248479038476944},{x:.6123163104057312,y:.7612020373344421,z:-.03264721855521202},{x:.6696187853813171,y:.744706928730011,z:.009673702530562878},{x:.5803102254867554,y:.7385968565940857,z:-.0689152330160141},{x:.6404349207878113,y:.5877999663352966,z:-.01929756999015808},{x:.6588467955589294,y:.5929454565048218,z:-.008487257175147533},{x:.6720337867736816,y:.530631422996521,z:.043437421321868896},{x:.584305465221405,y:.6099005341529846,z:-.030301367864012718},{x:.6034283638000488,y:.6217452883720398,z:-.001970183802768588},{x:.6460927724838257,y:.8608663082122803,z:.015541625209152699},{x:.6957815289497375,y:.8326103091239929,z:.13015234470367432},{x:.6043362617492676,y:.7861682772636414,z:-.030476901680231094},{x:.594293475151062,y:.7942103147506714,z:-.032218821346759796},{x:.6324057579040527,y:.8665139675140381,z:.014255806803703308},{x:.6296147704124451,y:.8667733669281006,z:.010388285852968693},{x:.663644552230835,y:.5798642635345459,z:-.0022301070857793093},{x:.6140630841255188,y:.7809288501739502,z:-.02835679054260254},{x:.615908145904541,y:.5921698212623596,z:-.026804860681295395},{x:.617181122303009,y:.5748661756515503,z:-.03060605563223362},{x:.6222207546234131,y:.49137672781944275,z:-.011151673272252083},{x:.6669357419013977,y:.5541607141494751,z:.017466170713305473},{x:.6182981729507446,y:.5320425629615784,z:-.021793590858578682},{x:.6760554313659668,y:.595052182674408,z:.017115700989961624},{x:.6801463961601257,y:.5800720453262329,z:.043127160519361496},{x:.5922210812568665,y:.8644017577171326,z:-.02662893570959568},{x:.6054555177688599,y:.8637874722480774,z:-.018363753333687782},{x:.6161889433860779,y:.8641164898872375,z:-.008808949030935764},{x:.6017249822616577,y:.7901403307914734,z:-.028126630932092667},{x:.631446123123169,y:.8664817810058594,z:.012112865224480629},{x:.6249198913574219,y:.8716511130332947,z:.003882825840264559},{x:.6281915903091431,y:.867301881313324,z:.009891441091895103},{x:.5986843109130859,y:.7813931703567505,z:-.050227612257003784},{x:.6126407384872437,y:.869275689125061,z:-.0031255714129656553},{x:.6027271151542664,y:.8711842894554138,z:-.009324162267148495},{x:.59088134765625,y:.8742044568061829,z:-.014608660712838173},{x:.5984604358673096,y:.9216185212135315,z:-.005981989670544863},{x:.5950398445129395,y:.8964707255363464,z:-.01703473925590515},{x:.5941568613052368,y:.8882410526275635,z:-.017784785479307175},{x:.5928806662559509,y:.8803883194923401,z:-.014153128489851952},{x:.5909661054611206,y:.8748103976249695,z:-.012609979137778282},{x:.6128016710281372,y:.8702545762062073,z:-.0022550546564161777},{x:.6150846481323242,y:.8726804256439209,z:-.00414019962772727},{x:.6173093914985657,y:.8770190477371216,z:-.005970994010567665},{x:.619335412979126,y:.8814800977706909,z:-.0036864024586975574},{x:.6292637586593628,y:.8314558267593384,z:-.007714875973761082},{x:.702275276184082,y:.7320667505264282,z:.1433621346950531},{x:.6204835176467896,y:.8689177632331848,z:.0044869170524179935},{x:.6223508715629578,y:.8704851269721985,z:.00352082890458405},{x:.590448260307312,y:.8029727935791016,z:-.03200828656554222},{x:.6097423434257507,y:.7933741211891174,z:-.018042555078864098},{x:.59229576587677,y:.7993767261505127,z:-.032564569264650345},{x:.6171364188194275,y:.7153720259666443,z:-.007672437466681004},{x:.6389747858047485,y:.726390540599823,z:-.002999067772179842},{x:.6151940226554871,y:.769412100315094,z:-.024427521973848343},{x:.6526776552200317,y:.505868136882782,z:.01412637997418642},{x:.6475822329521179,y:.5375454425811768,z:-.0033899128902703524},{x:.6433356404304504,y:.5714520215988159,z:-.017428796738386154},{x:.626949667930603,y:.8962116837501526,z:.005602736957371235},{x:.5868416428565979,y:.5829002261161804,z:-.03727729618549347},{x:.5877229571342468,y:.5345035791397095,z:-.032396964728832245},{x:.5887066125869751,y:.48655083775520325,z:-.025856535881757736},{x:.6507197618484497,y:.6612282991409302,z:.011114613153040409},{x:.6803066730499268,y:.677992045879364,z:.032125361263751984},{x:.5963194370269775,y:.6598632335662842,z:.002976928371936083},{x:.667536199092865,y:.6274255514144897,z:.015618261881172657},{x:.5930740833282471,y:.6940041780471802,z:-.019217798486351967},{x:.6053346395492554,y:.7676517963409424,z:-.050308309495449066},{x:.6934473514556885,y:.6884298920631409,z:.04794462397694588},{x:.6738007664680481,y:.6934011578559875,z:.020697161555290222},{x:.6588084697723389,y:.7033141851425171,z:.008462334051728249},{x:.6346072554588318,y:.7029502391815186,z:.001542167621664703},{x:.6157816648483276,y:.6966525912284851,z:-.002009218093007803},{x:.6015574336051941,y:.688928484916687,z:-.006588225718587637},{x:.5746836066246033,y:.6711069345474243,z:-.03597589209675789},{x:.6947521567344666,y:.7309479117393494,z:.046707939356565475},{x:.6759101152420044,y:.6249120831489563,z:.021654341369867325},{x:.5794773101806641,y:.7971615195274353,z:-.06339326500892639},{x:.6041849851608276,y:.727514922618866,z:-.017512541264295578},{x:.6968844532966614,y:.6440950036048889,z:.12727996706962585},{x:.5910853147506714,y:.679325520992279,z:-.009497715160250664},{x:.6157375574111938,y:.7695677280426025,z:-.010624290443956852},{x:.6606494784355164,y:.6410489678382874,z:.0208158977329731},{x:.6040687561035156,y:.7531470656394958,z:-.045887019485235214},{x:.7012156248092651,y:.780247151851654,z:.14028730988502502},{x:.595149576663971,y:.6527782678604126,z:.006308757700026035},{x:.5925500392913818,y:.7436665892601013,z:-.060151755809783936},{x:.6780198812484741,y:.8905693888664246,z:.0626060739159584},{x:.676746666431427,y:.9113880395889282,z:.08726003766059875},{x:.7030686140060425,y:.7312687635421753,z:.09529774636030197},{x:.688987135887146,y:.8588417172431946,z:.07752864807844162},{x:.6883691549301147,y:.6109960675239563,z:.06669612973928452},{x:.6358906030654907,y:.9702065587043762,z:.023120900616049767},{x:.5781539678573608,y:.8023634552955627,z:-.044763918966054916},{x:.6170316934585571,y:.7408350706100464,z:-.011375460773706436},{x:.688542366027832,y:.6516284346580505,z:.050206027925014496},{x:.6385149359703064,y:.6540714502334595,z:.006462941411882639},{x:.6279382109642029,y:.6563615798950195,z:.003062846139073372},{x:.6268895268440247,y:.8736732006072998,z:.00627936702221632},{x:.6944946050643921,y:.7709181308746338,z:.053824134171009064},{x:.614617109298706,y:1.0022112131118774,z:.02719894051551819},{x:.6493719220161438,y:.9665167927742004,z:.053563784807920456},{x:.6624587178230286,y:.943530797958374,z:.068605437874794},{x:.6162528991699219,y:.6558693051338196,z:.002187855076044798},{x:.6058168411254883,y:.654328465461731,z:.0036193584091961384},{x:.5987918972969055,y:.6536934971809387,z:.006134530063718557},{x:.6831037402153015,y:.6195642948150635,z:.03511790186166763},{x:.6062582731246948,y:.6356398463249207,z:.001280312892049551},{x:.6174948811531067,y:.62776118516922,z:-.0013642468256875873},{x:.6297246217727661,y:.6253792643547058,z:-.0007034156005829573},{x:.6407091617584229,y:.627578616142273,z:.0028144705574959517},{x:.6479622721672058,y:.6322650909423828,z:.00750273372977972},{x:.6915091276168823,y:.5990704298019409,z:.10270945727825165},{x:.6457163095474243,y:.6504453420639038,z:.010696077719330788},{x:.6164222955703735,y:.8231936097145081,z:-.016772059723734856},{x:.6042401194572449,y:.7830976843833923,z:-.03630910441279411},{x:.5922216773033142,y:.8228387236595154,z:-.029992375522851944},{x:.6646111011505127,y:.92097008228302,z:.050967294722795486},{x:.651232898235321,y:.9460107088088989,z:.038000158965587616},{x:.6140977144241333,y:.9882472157478333,z:.009882091544568539},{x:.6870781183242798,y:.8768675327301025,z:.10980932414531708},{x:.5986856818199158,y:.6456438899040222,z:.003999010659754276},{x:.585981547832489,y:.7034481763839722,z:-.0377722829580307},{x:.6342031359672546,y:.9867448806762695,z:.03786521404981613},{x:.7013950943946838,y:.776049017906189,z:.09598205983638763},{x:.6030206680297852,y:.8719133138656616,z:-.007931148633360863},{x:.6050592064857483,y:.8767156004905701,z:-.009791925549507141},{x:.6073468923568726,y:.8831382393836975,z:-.012361008673906326},{x:.6087977290153503,y:.890143632888794,z:-.01098148338496685},{x:.6147705316543579,y:.9110084772109985,z:-.0018823575228452682},{x:.622577965259552,y:.8670604825019836,z:.002609190298244357},{x:.6241236329078674,y:.8651344180107117,z:.0025534380692988634},{x:.6257084608078003,y:.8638408184051514,z:.0023300074972212315},{x:.639931321144104,y:.8449671268463135,z:.0038123116828501225},{x:.6810906529426575,y:.7856625318527222,z:.02717764675617218},{x:.583532452583313,y:.6811994910240173,z:-.026588857173919678},{x:.5855660438537598,y:.6393819451332092,z:-.004512844607234001},{x:.5932201743125916,y:.6398029327392578,z:.0008020466193556786},{x:.6200879812240601,y:.8683351874351501,z:.00417016725987196},{x:.6842559576034546,y:.8330534100532532,z:.050836317241191864},{x:.5754412412643433,y:.6418221592903137,z:-.022838059812784195},{x:.6232790350914001,y:.9295297265052795,z:.006339520215988159},{x:.5764067769050598,y:.694546639919281,z:-.04825803264975548},{x:.59778892993927,y:.7343927621841431,z:-.035004377365112305},{x:.6042810678482056,y:.9441440105438232,z:-.0010970570147037506},{x:.6496372222900391,y:.8869078159332275,z:.021036235615611076},{x:.6274012327194214,y:.7830310463905334,z:-.006658440921455622},{x:.637792706489563,y:.9104999899864197,z:.014290250837802887},{x:.6549934148788452,y:.7748609185218811,z:-.0006672973395325243},{x:.6404005289077759,y:.801220715045929,z:-.0026642554439604282},{x:.6671456694602966,y:.8045546412467957,z:.013180811889469624},{x:.6107483506202698,y:.9680658578872681,z:.001778992242179811},{x:.6060343980789185,y:.744587242603302,z:-.024382334202528},{x:.6602751612663269,y:.8998945355415344,z:.0344940721988678},{x:.6463775038719177,y:.9262562394142151,z:.02617623284459114},{x:.6579852104187012,y:.8602304458618164,z:.021586716175079346},{x:.6926165223121643,y:.8053340315818787,z:.061075080186128616},{x:.6724731922149658,y:.8594399690628052,z:.03457934781908989},{x:.6975721716880798,y:.8183245062828064,z:.09300774335861206},{x:.6512877941131592,y:.8258221745491028,z:.006324059329926968},{x:.594887375831604,y:.7148372530937195,z:-.026898479089140892},{x:.6017440557479858,y:.7773507833480835,z:-.05312420800328255},{x:.6096571683883667,y:.7806998491287231,z:-.037646256387233734},{x:.5952993035316467,y:.7654367685317993,z:-.06398405134677887},{x:.5950021147727966,y:.6201304793357849,z:-.009297547861933708},{x:.6165438890457153,y:.6052900552749634,z:-.012455573305487633},{x:.6362661719322205,y:.6015968918800354,z:-.011649220250546932},{x:.6522727608680725,y:.6046400666236877,z:-.005903332494199276},{x:.6625409722328186,y:.6128141283988953,z:.0030042496509850025},{x:.6688099503517151,y:.6457712054252625,z:.026322703808546066},{x:.7013440728187561,y:.6893666386604309,z:.08984331786632538},{x:.6608623266220093,y:.6749406456947327,z:.0172116681933403},{x:.6482325196266174,y:.6823726296424866,z:.008881398476660252},{x:.6313265562057495,y:.6842025518417358,z:.0031308617908507586},{x:.6147016286849976,y:.6809731721878052,z:.0007630771724507213},{x:.6018834114074707,y:.6755372285842896,z:-.0008834321051836014},{x:.5925027132034302,y:.670681357383728,z:-.001968748401850462},{x:.700127363204956,y:.6871103644371033,z:.13980500400066376},{x:.6095665693283081,y:.7853189706802368,z:-.03074747882783413},{x:.5880423784255981,y:.7229287028312683,z:-.04691500961780548},{x:.5930182337760925,y:.7811514139175415,z:-.06398335844278336},{x:.5867722034454346,y:.7922660112380981,z:-.05794971063733101},{x:.5933279991149902,y:.7842848896980286,z:-.05714067071676254},{x:.6063535809516907,y:.7920218706130981,z:-.02590685710310936},{x:.5839452743530273,y:.794978141784668,z:-.0615212507545948},{x:.5828126072883606,y:.8000800013542175,z:-.0449722595512867},{x:.5909603834152222,y:.6541213393211365,z:.003991890233010054},{x:.5852181911468506,y:.6602938771247864,z:-.004428438376635313},{x:.5825737714767456,y:.6651063561439514,z:-.014345290139317513},{x:.6517343521118164,y:.6362385153770447,z:.012151890434324741},{x:.6615052819252014,y:.6281577944755554,z:.0123682152479887},{x:.4856873154640198,y:.6568945646286011,z:.000720038078725338},{x:.49988406896591187,y:.6547410488128662,z:.0006949726957827806},{x:.48438939452171326,y:.6392973065376282,z:.000705525919329375},{x:.47143134474754333,y:.6589511632919312,z:.0006980331381782889},{x:.48704618215560913,y:.6752797961235046,z:.0006921177846379578},{x:.6243702173233032,y:.640461802482605,z:-6592126737814397e-20},{x:.6390967965126038,y:.6385173797607422,z:-.00016105435497593135},{x:.6230536699295044,y:.6224825382232666,z:-.00016136496560648084},{x:.6095397472381592,y:.641917884349823,z:-.0001803556369850412},{x:.6250996589660645,y:.6586247682571411,z:-.0001785515050869435}]],faceBlendshapes:[{categories:[{index:0,score:5187174338061595e-21,categoryName:"_neutral",displayName:""},{index:1,score:.24521504342556,categoryName:"browDownLeft",displayName:""},{index:2,score:.1987743377685547,categoryName:"browDownRight",displayName:""},{index:3,score:.013400448486208916,categoryName:"browInnerUp",displayName:""},{index:4,score:.012361560948193073,categoryName:"browOuterUpLeft",displayName:""},{index:5,score:.019305096939206123,categoryName:"browOuterUpRight",displayName:""},{index:6,score:28426356948330067e-21,categoryName:"cheekPuff",displayName:""},{index:7,score:34500112633395474e-23,categoryName:"cheekSquintLeft",displayName:""},{index:8,score:483789051486383e-21,categoryName:"cheekSquintRight",displayName:""},{index:9,score:.07650448381900787,categoryName:"eyeBlinkLeft",displayName:""},{index:10,score:.05070012807846069,categoryName:"eyeBlinkRight",displayName:""},{index:11,score:.13978900015354156,categoryName:"eyeLookDownLeft",displayName:""},{index:12,score:.14198613166809082,categoryName:"eyeLookDownRight",displayName:""},{index:13,score:.2177766114473343,categoryName:"eyeLookInLeft",displayName:""},{index:14,score:.014739357866346836,categoryName:"eyeLookInRight",displayName:""},{index:15,score:.02361512929201126,categoryName:"eyeLookOutLeft",displayName:""},{index:16,score:.19679604470729828,categoryName:"eyeLookOutRight",displayName:""},{index:17,score:.04874616861343384,categoryName:"eyeLookUpLeft",displayName:""},{index:18,score:.049392376095056534,categoryName:"eyeLookUpRight",displayName:""},{index:19,score:.34944331645965576,categoryName:"eyeSquintLeft",displayName:""},{index:20,score:.2939716875553131,categoryName:"eyeSquintRight",displayName:""},{index:21,score:.005955042317509651,categoryName:"eyeWideLeft",displayName:""},{index:22,score:.006776117719709873,categoryName:"eyeWideRight",displayName:""},{index:23,score:16942436559475027e-21,categoryName:"jawForward",displayName:""},{index:24,score:.0045165494084358215,categoryName:"jawLeft",displayName:""},{index:25,score:.07803940027952194,categoryName:"jawOpen",displayName:""},{index:26,score:2090057751047425e-20,categoryName:"jawRight",displayName:""},{index:27,score:.06032035872340202,categoryName:"mouthClose",displayName:""},{index:28,score:.00228882092051208,categoryName:"mouthDimpleLeft",displayName:""},{index:29,score:.00781762320548296,categoryName:"mouthDimpleRight",displayName:""},{index:30,score:.0017093931091949344,categoryName:"mouthFrownLeft",displayName:""},{index:31,score:.0019319106359034777,categoryName:"mouthFrownRight",displayName:""},{index:32,score:8485237776767462e-20,categoryName:"mouthFunnel",displayName:""},{index:33,score:.0009051355300471187,categoryName:"mouthLeft",displayName:""},{index:34,score:.0003630454302765429,categoryName:"mouthLowerDownLeft",displayName:""},{index:35,score:.00017601238505449146,categoryName:"mouthLowerDownRight",displayName:""},{index:36,score:.12865161895751953,categoryName:"mouthPressLeft",displayName:""},{index:37,score:.20137207210063934,categoryName:"mouthPressRight",displayName:""},{index:38,score:.0022203284315764904,categoryName:"mouthPucker",displayName:""},{index:39,score:.0009096377179957926,categoryName:"mouthRight",displayName:""},{index:40,score:.34189721941947937,categoryName:"mouthRollLower",displayName:""},{index:41,score:.11409689486026764,categoryName:"mouthRollUpper",displayName:""},{index:42,score:.17172536253929138,categoryName:"mouthShrugLower",displayName:""},{index:43,score:.004038424696773291,categoryName:"mouthShrugUpper",displayName:""},{index:44,score:.00023205230536404997,categoryName:"mouthSmileLeft",displayName:""},{index:45,score:.00019313619122840464,categoryName:"mouthSmileRight",displayName:""},{index:46,score:.0018571305554360151,categoryName:"mouthStretchLeft",displayName:""},{index:47,score:.0023813238367438316,categoryName:"mouthStretchRight",displayName:""},{index:48,score:24323100660694763e-21,categoryName:"mouthUpperUpLeft",displayName:""},{index:49,score:3161552012898028e-20,categoryName:"mouthUpperUpRight",displayName:""},{index:50,score:108198406678639e-21,categoryName:"noseSneerLeft",displayName:""},{index:51,score:12652527630052646e-22,categoryName:"noseSneerRight",displayName:""}],headIndex:-1,headName:""}],facialTransformationMatrixes:[{rows:4,columns:4,data:[.9947517514228821,.10230544209480286,.0013679931871592999,0,-.10230997204780579,.9947447776794434,.003816320328041911,0,-.000970348424743861,-.0039362297393381596,.9999914169311523,0,2.8888821601867676,-7.808934211730957,-30.52109146118164,1]}]}},xX=E.createContext({}),j6={basePath:"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.8/wasm",options:{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}};function Zwe({basePath:n=j6.basePath,options:e=j6.options,children:t}){const i=JSON.stringify(e),r=Qc(async()=>{const{FilesetResolver:s,FaceLandmarker:o}=await Z3(async()=>{const{FilesetResolver:l,FaceLandmarker:c}=await import("./vision_bundle-DAfdqQjW.js");return{FilesetResolver:l,FaceLandmarker:c}},[]),a=await s.forVisionTasks(n);return o.createFromOptions(a,e)},[n,i]);return E.useEffect(()=>()=>{r==null||r.close(),VE([n,i])},[r,n,i]),E.createElement(xX.Provider,{value:r},t)}function _X(){return E.useContext(xX)}function dU(n,e){return n.clone().add(e).multiplyScalar(.5)}function Fp(n,e,t){const i=n.localToWorld(e);return t.worldToLocal(i)}const EX=E.createContext({}),e4e=E.forwardRef(({camera:n,autostart:e=!0,webcam:t=!0,webcamVideoTextureSrc:i,manualUpdate:r=!1,manualDetect:s=!1,onVideoFrame:o,smoothTime:a=.25,offset:l=!0,offsetScalar:c=80,eyes:u=!1,eyesAsOrigin:f=!0,depth:h=.15,debug:d=!1,facemesh:m,makeDefault:g},v)=>{var p,A;const y=Pe(Q=>Q.scene),w=Pe(Q=>Q.camera),S=Pe(Q=>Q.set),C=Pe(Q=>Q.get),b=n||w,M=E.useRef(null),I=E.useRef(null),[T]=E.useState(()=>new Jt),[D]=E.useState(()=>new F),[R]=E.useState(()=>new F),[z]=E.useState(()=>new F),[L]=E.useState(()=>new F),H=E.useCallback(()=>{T.parent=b.parent;const Q=I.current;if(Q){const{outerRef:j,eyeRightRef:oe,eyeLeftRef:xe}=Q;if(oe.current&&xe.current){const{irisDirRef:pe}=oe.current,{irisDirRef:de}=xe.current;pe.current&&de.current&&j.current&&(D.copy(Fp(pe.current,new F(0,0,0),j.current)),R.copy(Fp(de.current,new F(0,0,0),j.current)),T.position.copy(Fp(j.current,dU(D,R),b.parent||y)),z.copy(Fp(pe.current,new F(0,0,1),j.current)),L.copy(Fp(de.current,new F(0,0,1),j.current)),T.lookAt(j.current.localToWorld(dU(z,L))))}else j.current&&(T.position.copy(Fp(j.current,new F(0,0,0),b.parent||y)),T.lookAt(j.current.localToWorld(new F(0,0,1))))}return T},[b,R,L,D,z,y,T]),[J]=E.useState(()=>new Jt),Z=E.useCallback(function(Q,j){if(b){var oe;(oe=j)!==null&&oe!==void 0||(j=H()),a>0?(qm.damp3(J.position,j.position,a,Q,void 0,void 0,1e-9),qm.dampE(J.rotation,j.rotation,a,Q,void 0,void 0,1e-9)):(J.position.copy(j.position),J.rotation.copy(j.rotation)),b.position.copy(J.position),b.rotation.copy(J.rotation)}},[b,H,a,J.position,J.rotation]),[U,X]=E.useState(),Y=_X(),O=E.useCallback((Q,j)=>{const oe=Y==null?void 0:Y.detectForVideo(Q,j);X(oe)},[Y]);Bt((Q,j)=>{r||Z(j)});const W=E.useMemo(()=>Object.assign(Object.create(Yr.prototype),{detect:O,computeTarget:H,update:Z,facemeshApiRef:I,webcamApiRef:M,play:()=>{var Q;(Q=M.current)==null||(Q=Q.videoTextureApiRef.current)==null||Q.texture.source.data.play()},pause:()=>{var Q;(Q=M.current)==null||(Q=Q.videoTextureApiRef.current)==null||Q.texture.source.data.pause()}}),[O,H,Z]);E.useImperativeHandle(v,()=>W,[W]),E.useEffect(()=>{const Q=j=>{s||O(j.texture.source.data,j.time),o&&o(j)};return W.addEventListener("videoFrame",Q),()=>{W.removeEventListener("videoFrame",Q)}},[W,O,Y,s,o]),E.useEffect(()=>{if(g){const Q=C().controls;return S({controls:W}),()=>S({controls:Q})}},[g,W,C,S]);const $=U==null?void 0:U.faceLandmarks[0],k=U==null||(p=U.facialTransformationMatrixes)==null?void 0:p[0],V=U==null||(A=U.faceBlendshapes)==null?void 0:A[0];return E.createElement(EX.Provider,{value:W},t&&E.createElement(E.Suspense,{fallback:null},E.createElement(t4e,{ref:M,autostart:e,videoTextureSrc:i})),E.createElement(yX,tt({ref:I},m,{points:$,depth:h,facialTransformationMatrix:k,faceBlendshapes:V,eyes:u,eyesAsOrigin:f,offset:l,offsetScalar:c,debug:d,"rotation-z":Math.PI,visible:d}),E.createElement("meshBasicMaterial",{side:ni})))}),h9=()=>E.useContext(EX),t4e=E.forwardRef(({videoTextureSrc:n,autostart:e=!0},t)=>{const i=E.useRef(null),r=h9(),s=Qc(async()=>n?Promise.resolve(null):await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}),[n]);E.useEffect(()=>(r.dispatchEvent({type:"stream",stream:s}),()=>{s==null||s.getTracks().forEach(a=>a.stop()),VE([n])}),[s,r,n]);const o=E.useMemo(()=>({videoTextureApiRef:i}),[]);return E.useImperativeHandle(t,()=>o,[o]),E.createElement(E.Suspense,{fallback:null},E.createElement(n4e,{ref:i,src:n||s,start:e}))}),n4e=E.forwardRef(({src:n,start:e},t)=>{const i=K8(n,{start:e}),r=i.source.data,s=h9(),o=E.useCallback(l=>{s.dispatchEvent({type:"videoFrame",texture:i,time:l})},[i,s]);i4e(r,o);const a=E.useMemo(()=>({texture:i}),[i]);return E.useImperativeHandle(t,()=>a,[a]),E.createElement(E.Fragment,null)}),i4e=(n,e)=>{E.useEffect(()=>{if(!n||!n.requestVideoFrameCallback)return;let t;function i(...r){e(...r),t=n.requestVideoFrameCallback(i)}return n.requestVideoFrameCallback(i),()=>n.cancelVideoFrameCallback(t)},[n,e])},r4e=Object.freeze(Object.defineProperty({__proto__:null,AccumulativeShadows:VY,AdaptiveDpr:JEe,AdaptiveEvents:KEe,ArcballControls:s2e,AsciiRenderer:Gye,BBAnchor:x_e,Backdrop:W3e,BakeShadows:XEe,Billboard:KAe,Bounds:FY,Box:K_e,Bvh:f_e,CameraControls:h2e,CameraShake:w3e,Capsule:p3e,CatmullRomLine:cve,Caustics:J3e,Center:n9,Circle:$_e,Clone:YA,Cloud:AEe,CloudInstance:Q6,Clouds:XY,ComputedAttribute:Rye,Cone:Z_e,ContactShadows:QY,CubeCamera:Zye,CubeTexture:B2e,CubicBezierLine:lve,CurveModifier:L_e,CycleRaycast:Zhe,Cylinder:e3e,Decal:Uye,Detailed:WEe,DetectGPU:$2e,DeviceOrientationControls:e2e,Dodecahedron:f3e,DragControls:gpe,Edges:jW,Effects:hye,Environment:HY,EnvironmentCube:c9,EnvironmentMap:Tw,EnvironmentPortal:GY,Example:C_e,Extrude:h3e,FaceControls:e4e,FaceLandmarker:Zwe,FaceLandmarkerDefaults:j6,Facemesh:yX,FacemeshDatas:E_,FacemeshEye:V6,FacemeshEyeDefaults:Qp,Fbo:qye,Fbx:P2e,FirstPersonControls:l2e,Fisheye:rwe,Float:S3e,FlyControls:t2e,GizmoHelper:y2e,GizmoViewcube:b2e,GizmoViewport:M2e,Gltf:Nye,GradientTexture:dye,GradientType:P6,Grid:T2e,Helper:O2e,Html:Sv,Hud:nY,Icosahedron:c3e,Image:vye,Instance:i9,Instances:r9,IsObject:Tm,KeyboardControls:O0e,Ktx2:R2e,Lathe:d3e,Lightformer:oEe,Line:tl,Loader:ide,MapControls:n2e,MarchingCube:Fye,MarchingCubes:Lye,MarchingPlane:Oye,Mask:nwe,MatcapTexture:SEe,Merged:P_e,MeshDiscardMaterial:Y_e,MeshDistortMaterial:z_e,MeshPortalMaterial:awe,MeshReflectorMaterial:G_e,MeshRefractionMaterial:V_e,MeshTransmissionMaterial:W_e,MeshWobbleMaterial:k_e,MotionPathControls:m2e,NormalTexture:MEe,Octahedron:u3e,OrbitControls:i2e,OrthographicCamera:KW,Outlines:yye,PerformanceMonitor:$Ee,PerspectiveCamera:$ye,PivotControls:qwe,Plane:n3e,Point:HEe,PointMaterial:X_e,PointMaterialImpl:DY,PointerLockControls:a2e,Points:QEe,PointsBuffer:rX,Polyhedron:l3e,PositionPoint:nX,PositionalAudio:uve,Preload:YEe,PresentationControls:L0e,Progress:tde,QuadraticBezierLine:ave,RandomizedLight:jY,Reflector:K3e,RenderCubeTexture:cX,RenderTexture:lX,Resize:x3e,Ring:a3e,RoundedBox:A3e,Sampler:Pye,ScreenQuad:y3e,ScreenSizer:sve,ScreenSpace:$Ae,Scroll:Ame,ScrollControls:pme,Segment:jEe,SegmentObject:oX,Segments:VEe,Select:qAe,Shadow:Y3e,ShadowAlpha:kEe,Shape:m3e,Sky:aEe,SoftShadows:J_e,Sparkles:xEe,Sphere:t3e,Splat:Xye,SpotLight:sEe,SpotLightShadow:rEe,SpriteAnimator:D_e,Stage:V3e,Stars:uEe,Stats:N2e,StatsGl:Q2e,Svg:kye,Tetrahedron:o3e,Text:oye,Text3D:QW,Texture:pye,Torus:r3e,TorusKnot:s3e,TrackballControls:r2e,Trail:Bye,TrailTexture:S_e,TransformControls:o2e,Tube:i3e,VideoTexture:F2e,View:vX,Wireframe:UEe,accumulativeContext:u9,calcPosFromAngles:YY,calculateAspectRatio:D6,calculateScaleFactor:vw,checkIfFrameIsEmpty:lY,getFirstItem:aY,isWebGL2Available:fye,meshBounds:qEe,shaderMaterial:Po,useAnimations:d_e,useAspect:j2e,useBVH:u_e,useBounds:OY,useBoxProjectedEnv:y_e,useCamera:W2e,useContextBridge:h_e,useCubeCamera:$W,useCubeTexture:J8,useCursor:ede,useDepthBuffer:V2e,useDetectGPU:hY,useEnvironment:a9,useFBO:Bs,useFBX:Ew,useFaceControls:h9,useFaceLandmarker:_X,useFont:xw,useGLTF:Pv,useGizmoContext:_w,useHelper:$8,useIntersect:CY,useKTX2:ww,useKeyboardControls:z0e,useMask:iwe,useMatcapTexture:$Y,useMotion:tY,useNormalTexture:ZY,usePerformanceMonitor:ZEe,useProgress:E8,useScroll:C8,useSelect:JAe,useSpriteAnimator:R_e,useSpriteLoader:Sw,useSurfaceSampler:XW,useTexture:wf,useTrail:YW,useTrailTexture:bY,useVideoTexture:K8},Symbol.toStringTag,{value:"Module"}));function wX(){return q.jsxs("div",{className:"background",children:[q.jsx("span",{}),q.jsx("span",{})]})}function SX(){return q.jsxs("section",{className:"BackgroundContainer",children:[q.jsx("div",{className:"stopPropagationLayer"}),q.jsx(wfe,{importedFiber:{...bce,...r4e,...nfe},style:{position:"absolute",top:0},children:q.jsx(Qhe,{cDistance:3.5,cPolarAngle:0,positionX:0,positionY:0,positionZ:1.4,rotationX:0,rotationY:0,rotationZ:90,type:"waterPlane",color1:"#000000",color2:"#000000",color3:"#390048",uSpeed:.04,range:"disabled",uDensity:1,uStrength:2,brightness:3.5,reflection:1,dampingFactor:0,grain:"off",toggleAxis:!1})})]})}const s4e=E.lazy(()=>Z3(()=>import("./NTFCard-CzZu8wJL.js"),[]));function Pw({searchBar:n,imagesCount:e,title:t,showFilter:i,filter:r="All",profileCollectionToRender:s,isProfileCollectionRender:o}){const[a,l]=E.useState(r),[c,u]=E.useState([]),[f,h]=E.useState(""),d=["All","Photography","AI Models","Animation","3D Art"];E.useEffect(()=>{if(o){let g=[];s==null||s.forEach(v=>{let p=da.find(A=>A.id==v);p&&g.push(p)}),u(g);return}m()},[a,f]);function m(){var g=da.filter(A=>A.filterSearch.includes(a));g=g.slice(0,e);var v=g.slice();if(f!=""){var p=v.filter(A=>A.ArtName.includes(f)||A.id.includes(f));u(p)}else u(g)}return q.jsxs("main",{id:"NFTCardPage",children:[q.jsx(wX,{}),q.jsxs("nav",{children:[q.jsx("h4",{children:t}),n&&q.jsxs("div",{className:"InputContainer",children:[q.jsx(ai,{icon:RG}),q.jsx("input",{id:"SearchBar",type:"text",value:f,onChange:g=>h(g.target.value)})]}),i&&q.jsx("ul",{children:d.map(g=>q.jsx(pZ,{buttonFilter:g,selectedFilter:a,setSelectedFilter:l},`filter_button_${g}`))})]}),q.jsx("section",{className:"CardsContainer",children:c.length>0?c.map(g=>q.jsx(E.Suspense,{children:q.jsx(s4e,{id:g.id},g.id)},`suspense_element_for_art_${g.id}`)):q.jsxs("div",{className:"noArtsSearched",children:[q.jsx("p",{children:"No art found"}),q.jsx(ai,{icon:DG.faHeartBroken})]})})]})}function Il({classes:n,color:e,content:t,children:i,handleClickFunction:r}){return q.jsxs("button",{onClick:r,className:`${n} ${e}`,children:[t,i]})}var Vp={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="arrow-right",i=448,r=512,s=[8594],o="f061",a="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z";n.definition={prefix:e,iconName:t,icon:[i,r,s,o,a]},n.faArrowRight=n.definition,n.prefix=e,n.iconName=t,n.width=i,n.height=r,n.ligatures=s,n.unicode=o,n.svgPathData=a,n.aliases=s})(Vp);var o4e=n=>{switch(n){case"success":return c4e;case"info":return f4e;case"warning":return u4e;case"error":return h4e;default:return null}},a4e=Array(12).fill(0),l4e=({visible:n})=>_t.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},_t.createElement("div",{className:"sonner-spinner"},a4e.map((e,t)=>_t.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),c4e=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),u4e=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),f4e=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),h4e=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),d4e=()=>{let[n,e]=_t.useState(document.hidden);return _t.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},W6=1,p4e=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...i}=n,r=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:W6++,s=this.toasts.find(a=>a.id===r),o=n.dismissible===void 0?!0:n.dismissible;return s?this.toasts=this.toasts.map(a=>a.id===r?(this.publish({...a,...n,id:r,title:t}),{...a,...n,id:r,dismissible:o,title:t}):a):this.addToast({title:t,...i,dismissible:o,id:r}),r},this.dismiss=n=>(n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let i=n instanceof Promise?n:n(),r=t!==void 0;return i.then(async s=>{if(g4e(s)&&!s.ok){r=!1;let o=typeof e.error=="function"?await e.error(`HTTP error! status: ${s.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${s.status}`):e.description;this.create({id:t,type:"error",message:o,description:a})}else if(e.success!==void 0){r=!1;let o=typeof e.success=="function"?await e.success(s):e.success,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:t,type:"success",message:o,description:a})}}).catch(async s=>{if(e.error!==void 0){r=!1;let o=typeof e.error=="function"?await e.error(s):e.error,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:t,type:"error",message:o,description:a})}}).finally(()=>{var s;r&&(this.dismiss(t),t=void 0),(s=e.finally)==null||s.call(e)}),t},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||W6++;return this.create({jsx:n(t),id:t,...e}),t},this.subscribers=[],this.toasts=[]}},Ao=new p4e,m4e=(n,e)=>{let t=(e==null?void 0:e.id)||W6++;return Ao.addToast({title:n,...e,id:t}),t},g4e=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",A4e=m4e,v4e=()=>Ao.toasts,Lu=Object.assign(A4e,{success:Ao.success,info:Ao.info,warning:Ao.warning,error:Ao.error,custom:Ao.custom,message:Ao.message,promise:Ao.promise,dismiss:Ao.dismiss,loading:Ao.loading},{getHistory:v4e});function y4e(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}y4e(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Vx(n){return n.label!==void 0}var x4e=3,_4e="32px",E4e=4e3,w4e=356,S4e=14,C4e=20,b4e=200;function M4e(...n){return n.filter(Boolean).join(" ")}var I4e=n=>{var e,t,i,r,s,o,a,l,c,u;let{invert:f,toast:h,unstyled:d,interacting:m,setHeights:g,visibleToasts:v,heights:p,index:A,toasts:y,expanded:w,removeToast:S,defaultRichColors:C,closeButton:b,style:M,cancelButtonStyle:I,actionButtonStyle:T,className:D="",descriptionClassName:R="",duration:z,position:L,gap:H,loadingIcon:J,expandByDefault:Z,classNames:U,icons:X,closeButtonAriaLabel:Y="Close toast",pauseWhenPageIsHidden:O,cn:W}=n,[$,k]=_t.useState(!1),[V,Q]=_t.useState(!1),[j,oe]=_t.useState(!1),[xe,pe]=_t.useState(!1),[de,te]=_t.useState(0),[Ee,ue]=_t.useState(0),ve=_t.useRef(null),ye=_t.useRef(null),Be=A===0,ae=A+1<=v,ie=h.type,be=h.dismissible!==!1,Re=h.className||"",ct=h.descriptionClassName||"",se=_t.useMemo(()=>p.findIndex(Ye=>Ye.toastId===h.id)||0,[p,h.id]),ee=_t.useMemo(()=>{var Ye;return(Ye=h.closeButton)!=null?Ye:b},[h.closeButton,b]),Ae=_t.useMemo(()=>h.duration||z||E4e,[h.duration,z]),Ue=_t.useRef(0),Ce=_t.useRef(0),ke=_t.useRef(0),We=_t.useRef(null),[Xe,Oe]=L.split("-"),ft=_t.useMemo(()=>p.reduce((Ye,fe,_e)=>_e>=se?Ye:Ye+fe.height,0),[p,se]),lt=d4e(),st=h.invert||f,ce=ie==="loading";Ce.current=_t.useMemo(()=>se*H+ft,[se,ft]),_t.useEffect(()=>{k(!0)},[]),_t.useLayoutEffect(()=>{if(!$)return;let Ye=ye.current,fe=Ye.style.height;Ye.style.height="auto";let _e=Ye.getBoundingClientRect().height;Ye.style.height=fe,ue(_e),g(Me=>Me.find(at=>at.toastId===h.id)?Me.map(at=>at.toastId===h.id?{...at,height:_e}:at):[{toastId:h.id,height:_e,position:h.position},...Me])},[$,h.title,h.description,g,h.id]);let De=_t.useCallback(()=>{Q(!0),te(Ce.current),g(Ye=>Ye.filter(fe=>fe.toastId!==h.id)),setTimeout(()=>{S(h)},b4e)},[h,S,g,Ce]);_t.useEffect(()=>{if(h.promise&&ie==="loading"||h.duration===1/0||h.type==="loading")return;let Ye,fe=Ae;return w||m||O&&lt?(()=>{if(ke.current<Ue.current){let _e=new Date().getTime()-Ue.current;fe=fe-_e}ke.current=new Date().getTime()})():fe!==1/0&&(Ue.current=new Date().getTime(),Ye=setTimeout(()=>{var _e;(_e=h.onAutoClose)==null||_e.call(h,h),De()},fe)),()=>clearTimeout(Ye)},[w,m,Z,h,Ae,De,h.promise,ie,O,lt]),_t.useEffect(()=>{let Ye=ye.current;if(Ye){let fe=Ye.getBoundingClientRect().height;return ue(fe),g(_e=>[{toastId:h.id,height:fe,position:h.position},..._e]),()=>g(_e=>_e.filter(Me=>Me.toastId!==h.id))}},[g,h.id]),_t.useEffect(()=>{h.delete&&De()},[De,h.delete]);function $e(){return X!=null&&X.loading?_t.createElement("div",{className:"sonner-loader","data-visible":ie==="loading"},X.loading):J?_t.createElement("div",{className:"sonner-loader","data-visible":ie==="loading"},J):_t.createElement(l4e,{visible:ie==="loading"})}return _t.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ye,className:W(D,Re,U==null?void 0:U.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[ie],(t=h==null?void 0:h.classNames)==null?void 0:t[ie]),"data-sonner-toast":"","data-rich-colors":(i=h.richColors)!=null?i:C,"data-styled":!(h.jsx||h.unstyled||d),"data-mounted":$,"data-promise":!!h.promise,"data-removed":V,"data-visible":ae,"data-y-position":Xe,"data-x-position":Oe,"data-index":A,"data-front":Be,"data-swiping":j,"data-dismissible":be,"data-type":ie,"data-invert":st,"data-swipe-out":xe,"data-expanded":!!(w||Z&&$),style:{"--index":A,"--toasts-before":A,"--z-index":y.length-A,"--offset":`${V?de:Ce.current}px`,"--initial-height":Z?"auto":`${Ee}px`,...M,...h.style},onPointerDown:Ye=>{ce||!be||(ve.current=new Date,te(Ce.current),Ye.target.setPointerCapture(Ye.pointerId),Ye.target.tagName!=="BUTTON"&&(oe(!0),We.current={x:Ye.clientX,y:Ye.clientY}))},onPointerUp:()=>{var Ye,fe,_e,Me;if(xe||!be)return;We.current=null;let at=Number(((Ye=ye.current)==null?void 0:Ye.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ot=new Date().getTime()-((fe=ve.current)==null?void 0:fe.getTime()),yt=Math.abs(at)/ot;if(Math.abs(at)>=C4e||yt>.11){te(Ce.current),(_e=h.onDismiss)==null||_e.call(h,h),De(),pe(!0);return}(Me=ye.current)==null||Me.style.setProperty("--swipe-amount","0px"),oe(!1)},onPointerMove:Ye=>{var fe;if(!We.current||!be)return;let _e=Ye.clientY-We.current.y,Me=Ye.clientX-We.current.x,at=(Xe==="top"?Math.min:Math.max)(0,_e),ot=Ye.pointerType==="touch"?10:2;Math.abs(at)>ot?(fe=ye.current)==null||fe.style.setProperty("--swipe-amount",`${_e}px`):Math.abs(Me)>ot&&(We.current=null)}},ee&&!h.jsx?_t.createElement("button",{"aria-label":Y,"data-disabled":ce,"data-close-button":!0,onClick:ce||!be?()=>{}:()=>{var Ye;De(),(Ye=h.onDismiss)==null||Ye.call(h,h)},className:W(U==null?void 0:U.closeButton,(r=h==null?void 0:h.classNames)==null?void 0:r.closeButton)},_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_t.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_t.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||_t.isValidElement(h.title)?h.jsx||h.title:_t.createElement(_t.Fragment,null,ie||h.icon||h.promise?_t.createElement("div",{"data-icon":"",className:W(U==null?void 0:U.icon,(s=h==null?void 0:h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||$e():null,h.type!=="loading"?h.icon||(X==null?void 0:X[ie])||o4e(ie):null):null,_t.createElement("div",{"data-content":"",className:W(U==null?void 0:U.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},_t.createElement("div",{"data-title":"",className:W(U==null?void 0:U.title,(a=h==null?void 0:h.classNames)==null?void 0:a.title)},h.title),h.description?_t.createElement("div",{"data-description":"",className:W(R,ct,U==null?void 0:U.description,(l=h==null?void 0:h.classNames)==null?void 0:l.description)},h.description):null),_t.isValidElement(h.cancel)?h.cancel:h.cancel&&Vx(h.cancel)?_t.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||I,onClick:Ye=>{var fe,_e;Vx(h.cancel)&&be&&((_e=(fe=h.cancel).onClick)==null||_e.call(fe,Ye),De())},className:W(U==null?void 0:U.cancelButton,(c=h==null?void 0:h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,_t.isValidElement(h.action)?h.action:h.action&&Vx(h.action)?_t.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||T,onClick:Ye=>{var fe,_e;Vx(h.action)&&(Ye.defaultPrevented||((_e=(fe=h.action).onClick)==null||_e.call(fe,Ye),De()))},className:W(U==null?void 0:U.actionButton,(u=h==null?void 0:h.classNames)==null?void 0:u.actionButton)},h.action.label):null))};function pU(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var T4e=n=>{let{invert:e,position:t="bottom-right",hotkey:i=["altKey","KeyT"],expand:r,closeButton:s,className:o,offset:a,theme:l="light",richColors:c,duration:u,style:f,visibleToasts:h=x4e,toastOptions:d,dir:m=pU(),gap:g=S4e,loadingIcon:v,icons:p,containerAriaLabel:A="Notifications",pauseWhenPageIsHidden:y,cn:w=M4e}=n,[S,C]=_t.useState([]),b=_t.useMemo(()=>Array.from(new Set([t].concat(S.filter(O=>O.position).map(O=>O.position)))),[S,t]),[M,I]=_t.useState([]),[T,D]=_t.useState(!1),[R,z]=_t.useState(!1),[L,H]=_t.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=_t.useRef(null),Z=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=_t.useRef(null),X=_t.useRef(!1),Y=_t.useCallback(O=>{var W;(W=S.find($=>$.id===O.id))!=null&&W.delete||Ao.dismiss(O.id),C($=>$.filter(({id:k})=>k!==O.id))},[S]);return _t.useEffect(()=>Ao.subscribe(O=>{if(O.dismiss){C(W=>W.map($=>$.id===O.id?{...$,delete:!0}:$));return}setTimeout(()=>{DN.flushSync(()=>{C(W=>{let $=W.findIndex(k=>k.id===O.id);return $!==-1?[...W.slice(0,$),{...W[$],...O},...W.slice($+1)]:[O,...W]})})})}),[]),_t.useEffect(()=>{if(l!=="system"){H(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:O})=>{H(O?"dark":"light")})},[l]),_t.useEffect(()=>{S.length<=1&&D(!1)},[S]),_t.useEffect(()=>{let O=W=>{var $,k;i.every(V=>W[V]||W.code===V)&&(D(!0),($=J.current)==null||$.focus()),W.code==="Escape"&&(document.activeElement===J.current||(k=J.current)!=null&&k.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[i]),_t.useEffect(()=>{if(J.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,X.current=!1)}},[J.current]),S.length?_t.createElement("section",{"aria-label":`${A} ${Z}`,tabIndex:-1},b.map((O,W)=>{var $;let[k,V]=O.split("-");return _t.createElement("ol",{key:O,dir:m==="auto"?pU():m,tabIndex:-1,ref:J,className:o,"data-sonner-toaster":!0,"data-theme":L,"data-y-position":k,"data-x-position":V,style:{"--front-toast-height":`${(($=M[0])==null?void 0:$.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||_4e,"--width":`${w4e}px`,"--gap":`${g}px`,...f},onBlur:Q=>{X.current&&!Q.currentTarget.contains(Q.relatedTarget)&&(X.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||X.current||(X.current=!0,U.current=Q.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{R||D(!1)},onPointerDown:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},S.filter(Q=>!Q.position&&W===0||Q.position===O).map((Q,j)=>{var oe,xe;return _t.createElement(I4e,{key:Q.id,icons:p,index:j,toast:Q,defaultRichColors:c,duration:(oe=d==null?void 0:d.duration)!=null?oe:u,className:d==null?void 0:d.className,descriptionClassName:d==null?void 0:d.descriptionClassName,invert:e,visibleToasts:h,closeButton:(xe=d==null?void 0:d.closeButton)!=null?xe:s,interacting:R,position:O,style:d==null?void 0:d.style,unstyled:d==null?void 0:d.unstyled,classNames:d==null?void 0:d.classNames,cancelButtonStyle:d==null?void 0:d.cancelButtonStyle,actionButtonStyle:d==null?void 0:d.actionButtonStyle,removeToast:Y,toasts:S.filter(pe=>pe.position==Q.position),heights:M.filter(pe=>pe.position==Q.position),setHeights:I,expandByDefault:r,gap:g,loadingIcon:v,expanded:T,pauseWhenPageIsHidden:y,cn:w})}))})):null};function Fu({title:n,description:e,showButton:t,children:i,uuid:r,imgPath:s,handleFunction:o}){return q.jsx(q.Fragment,{children:q.jsxs("div",{className:"Toast",children:[o&&q.jsx("button",{className:"closeButton",onClick:()=>o(r),children:q.jsx(ai,{icon:cT})}),s&&q.jsx("img",{src:`/${s}`}),q.jsxs("article",{children:[q.jsx("h4",{className:"title",children:n}),q.jsx("p",{className:"description",children:e})]}),t&&q.jsx("button",{className:"undoButton",children:i})]})})}function B4e(){return q.jsxs("section",{className:"offerPage",id:"offerPage",children:[q.jsx(wX,{}),q.jsxs("section",{children:[q.jsxs("h5",{children:["Big",q.jsx("br",{}),"Promo"]}),q.jsxs("h2",{children:["Limited Time",q.jsx("br",{}),"Offer. AI Model",q.jsx("br",{}),"Deals Await"]}),q.jsxs("div",{children:[q.jsx("p",{children:"Explore our Limited Time Offer on CyberNFT and Discover Exclusive deals on rare and unique NFT artWorks exclusive. Don't miss this opportunity to ass stunning digital masterpieces to your collection"}),q.jsxs("ul",{children:[q.jsx("li",{children:q.jsx(Il,{content:"Buy Now",classes:"button1 text-white bg-transparent border-white text-bold"})}),q.jsx("li",{children:q.jsx(Il,{classes:"button2 bg-pink text-white",children:q.jsx(ai,{icon:Vp.faArrowRight})})})]})]})]}),q.jsxs("section",{children:[q.jsxs("div",{className:"card1",children:[q.jsx("img",{src:da[30].path}),q.jsx(Il,{classes:"button2 bg-white text-black",handleClickFunction:()=>Lu(q.jsx(Fu,{title:"Ah!",description:"Should this button do something?",showButton:!1}),{duration:5e3}),children:q.jsx(ai,{icon:Vp.faArrowRight})})]}),q.jsx("div",{className:"card2",children:q.jsxs("article",{children:[q.jsxs("div",{className:"pinkCardTop",children:[q.jsxs("h2",{children:["Discover ",q.jsx("br",{}),"Exclusive Promos"]}),q.jsx(Il,{classes:"button2 bg-white text-black",handleClickFunction:()=>Lu(q.jsx(Fu,{title:"Loading...",description:"ok I lied, this button has no functions, sorry",showButton:!1}),{duration:5e3}),children:q.jsx(ai,{icon:Vp.faArrowRight})})]}),q.jsx("p",{children:"Welcome to CyberNFT's exclusive promo section, where art enthusiasts and collectors converge to explore a treasure trove of digital masterpieces. Our curated selection of AI model portraits in mesmerizing neon purple hues awaits, each piece a testament to the fusion of creativity and technology. As you navigate throungh our promo offers, immerse yourself in the captivating narratives woven into each artwork"})]})}),q.jsxs("div",{className:"card3",children:[q.jsx("img",{src:da[6].path}),q.jsx(Il,{classes:"button2 bg-white text-black",handleClickFunction:()=>Lu(q.jsx(Fu,{title:"Ah!",description:"Should this button do something?",showButton:!1}),{duration:5e3}),children:q.jsx(ai,{icon:Vp.faArrowRight})})]}),q.jsxs("div",{className:"card4",children:[q.jsx("img",{src:da[43].path}),q.jsx(Il,{classes:"button2 bg-white text-black",handleClickFunction:()=>Lu(q.jsx(Fu,{title:"Loading...",description:"ok I lied, this button has no functions, sorry",showButton:!1}),{duration:5e3}),children:q.jsx(ai,{icon:Vp.faArrowRight})})]})]})]})}const N5=E.lazy(()=>Z3(()=>import("./homeImgComponent-BhgMzqLK.js"),[]));function P4e(){return q.jsx("section",{id:"home",children:q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"bgImageContainer"}),q.jsx("div",{className:"bottomGradient",children:" "}),q.jsxs("main",{children:[q.jsxs("section",{children:[q.jsxs("h3",{className:"floatingText1",children:["Where Art",q.jsx("br",{}),"Meets the",q.jsx("br",{}),"Future"]}),q.jsx("h2",{className:"textCyber",children:"Cyber"})]}),q.jsx("section",{children:q.jsx("ul",{children:q.jsxs(E.Suspense,{children:[q.jsx(N5,{componentClass:"HomeImg3",imgPath:`${da[55].path}`}),q.jsx(N5,{componentClass:"HomeImg2",imgPath:`${da[61].path}`}),q.jsx(N5,{componentClass:"HomeImg1",imgPath:`${da[45].path}`})]})})}),q.jsxs("section",{children:[q.jsx("p",{children:"begin Your Journey"}),q.jsxs("h3",{className:"floatingText2",children:["Connect with",q.jsx("br",{}),"visionary artists."]}),q.jsx("h2",{className:"textNFT flooatingElement",children:"NFT"})]})]})]})})}function CX({id:n,children:e}){return q.jsx("main",{id:n,className:"PageSection",children:e})}function R4e(){return q.jsx(CX,{id:"KnowMore",children:q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"bgImageContainer"}),q.jsx("div",{className:"topGradient"}),q.jsxs("main",{children:[q.jsxs("section",{className:"KnowMoreTopTexts",children:[q.jsx("h2",{children:"Embarking on a Digital Journey"}),q.jsx("h2",{children:"Redefining Art Ownership"}),q.jsx("h2",{children:"through Cyber NFT"})]}),q.jsxs("section",{children:[q.jsx("h4",{children:"Discover Art with Us"}),q.jsxs("article",{children:[q.jsx("p",{children:"we're leading a digital renaissance by revolutionizing how art is owned and appreciated. Our platform leverages blockchain-powered NFTs to redefine art ownership, empowering artists and enriching collectors in the vibrant world of digital creativity"}),q.jsxs("div",{className:"buttonsContainer",children:[q.jsx(Il,{classes:"button1 bg-transparent border-white text-bold",content:"Know More",handleClickFunction:()=>Lu(q.jsx(Fu,{title:"Sorry",description:"This button has no functions, maybe next time",showButton:!1}),{duration:5e3})}),q.jsx(Il,{classes:"button2 bg-pink ",handleClickFunction:()=>Lu(q.jsx(Fu,{title:"Sorry",description:"This button has no functions, maybe next time",showButton:!1}),{duration:5e3}),children:q.jsx(ai,{icon:PG})})]})]})]})]})]})})}function D4e(){return q.jsxs("div",{id:"horizontalBar",className:"horizontalBar",children:[q.jsx("h4",{children:"Creativity"}),q.jsx(ai,{icon:sS}),q.jsx("h4",{children:"Innovation"}),q.jsx(ai,{icon:sS}),q.jsx("h4",{children:"Artistry"}),q.jsx(ai,{icon:sS}),q.jsx("h4",{children:"Experience"})]})}class gr{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){const t=gr.hexChars,i=gr.hexOut;let r,s,o,a;for(a=0;a<4;a+=1)for(s=a*8,r=e[a],o=0;o<8;o+=2)i[s+1+o]=t.charAt(r&15),r>>>=4,i[s+0+o]=t.charAt(r&15),r>>>=4;return i.join("")}static _md5cycle(e,t){let i=e[0],r=e[1],s=e[2],o=e[3];i+=(r&s|~r&o)+t[0]-680876936|0,i=(i<<7|i>>>25)+r|0,o+=(i&r|~i&s)+t[1]-389564586|0,o=(o<<12|o>>>20)+i|0,s+=(o&i|~o&r)+t[2]+606105819|0,s=(s<<17|s>>>15)+o|0,r+=(s&o|~s&i)+t[3]-1044525330|0,r=(r<<22|r>>>10)+s|0,i+=(r&s|~r&o)+t[4]-176418897|0,i=(i<<7|i>>>25)+r|0,o+=(i&r|~i&s)+t[5]+1200080426|0,o=(o<<12|o>>>20)+i|0,s+=(o&i|~o&r)+t[6]-1473231341|0,s=(s<<17|s>>>15)+o|0,r+=(s&o|~s&i)+t[7]-45705983|0,r=(r<<22|r>>>10)+s|0,i+=(r&s|~r&o)+t[8]+1770035416|0,i=(i<<7|i>>>25)+r|0,o+=(i&r|~i&s)+t[9]-1958414417|0,o=(o<<12|o>>>20)+i|0,s+=(o&i|~o&r)+t[10]-42063|0,s=(s<<17|s>>>15)+o|0,r+=(s&o|~s&i)+t[11]-1990404162|0,r=(r<<22|r>>>10)+s|0,i+=(r&s|~r&o)+t[12]+1804603682|0,i=(i<<7|i>>>25)+r|0,o+=(i&r|~i&s)+t[13]-40341101|0,o=(o<<12|o>>>20)+i|0,s+=(o&i|~o&r)+t[14]-1502002290|0,s=(s<<17|s>>>15)+o|0,r+=(s&o|~s&i)+t[15]+1236535329|0,r=(r<<22|r>>>10)+s|0,i+=(r&o|s&~o)+t[1]-165796510|0,i=(i<<5|i>>>27)+r|0,o+=(i&s|r&~s)+t[6]-1069501632|0,o=(o<<9|o>>>23)+i|0,s+=(o&r|i&~r)+t[11]+643717713|0,s=(s<<14|s>>>18)+o|0,r+=(s&i|o&~i)+t[0]-373897302|0,r=(r<<20|r>>>12)+s|0,i+=(r&o|s&~o)+t[5]-701558691|0,i=(i<<5|i>>>27)+r|0,o+=(i&s|r&~s)+t[10]+38016083|0,o=(o<<9|o>>>23)+i|0,s+=(o&r|i&~r)+t[15]-660478335|0,s=(s<<14|s>>>18)+o|0,r+=(s&i|o&~i)+t[4]-405537848|0,r=(r<<20|r>>>12)+s|0,i+=(r&o|s&~o)+t[9]+568446438|0,i=(i<<5|i>>>27)+r|0,o+=(i&s|r&~s)+t[14]-1019803690|0,o=(o<<9|o>>>23)+i|0,s+=(o&r|i&~r)+t[3]-187363961|0,s=(s<<14|s>>>18)+o|0,r+=(s&i|o&~i)+t[8]+1163531501|0,r=(r<<20|r>>>12)+s|0,i+=(r&o|s&~o)+t[13]-1444681467|0,i=(i<<5|i>>>27)+r|0,o+=(i&s|r&~s)+t[2]-51403784|0,o=(o<<9|o>>>23)+i|0,s+=(o&r|i&~r)+t[7]+1735328473|0,s=(s<<14|s>>>18)+o|0,r+=(s&i|o&~i)+t[12]-1926607734|0,r=(r<<20|r>>>12)+s|0,i+=(r^s^o)+t[5]-378558|0,i=(i<<4|i>>>28)+r|0,o+=(i^r^s)+t[8]-2022574463|0,o=(o<<11|o>>>21)+i|0,s+=(o^i^r)+t[11]+1839030562|0,s=(s<<16|s>>>16)+o|0,r+=(s^o^i)+t[14]-35309556|0,r=(r<<23|r>>>9)+s|0,i+=(r^s^o)+t[1]-1530992060|0,i=(i<<4|i>>>28)+r|0,o+=(i^r^s)+t[4]+1272893353|0,o=(o<<11|o>>>21)+i|0,s+=(o^i^r)+t[7]-155497632|0,s=(s<<16|s>>>16)+o|0,r+=(s^o^i)+t[10]-1094730640|0,r=(r<<23|r>>>9)+s|0,i+=(r^s^o)+t[13]+681279174|0,i=(i<<4|i>>>28)+r|0,o+=(i^r^s)+t[0]-358537222|0,o=(o<<11|o>>>21)+i|0,s+=(o^i^r)+t[3]-722521979|0,s=(s<<16|s>>>16)+o|0,r+=(s^o^i)+t[6]+76029189|0,r=(r<<23|r>>>9)+s|0,i+=(r^s^o)+t[9]-640364487|0,i=(i<<4|i>>>28)+r|0,o+=(i^r^s)+t[12]-421815835|0,o=(o<<11|o>>>21)+i|0,s+=(o^i^r)+t[15]+530742520|0,s=(s<<16|s>>>16)+o|0,r+=(s^o^i)+t[2]-995338651|0,r=(r<<23|r>>>9)+s|0,i+=(s^(r|~o))+t[0]-198630844|0,i=(i<<6|i>>>26)+r|0,o+=(r^(i|~s))+t[7]+1126891415|0,o=(o<<10|o>>>22)+i|0,s+=(i^(o|~r))+t[14]-1416354905|0,s=(s<<15|s>>>17)+o|0,r+=(o^(s|~i))+t[5]-57434055|0,r=(r<<21|r>>>11)+s|0,i+=(s^(r|~o))+t[12]+1700485571|0,i=(i<<6|i>>>26)+r|0,o+=(r^(i|~s))+t[3]-1894986606|0,o=(o<<10|o>>>22)+i|0,s+=(i^(o|~r))+t[10]-1051523|0,s=(s<<15|s>>>17)+o|0,r+=(o^(s|~i))+t[1]-2054922799|0,r=(r<<21|r>>>11)+s|0,i+=(s^(r|~o))+t[8]+1873313359|0,i=(i<<6|i>>>26)+r|0,o+=(r^(i|~s))+t[15]-30611744|0,o=(o<<10|o>>>22)+i|0,s+=(i^(o|~r))+t[6]-1560198380|0,s=(s<<15|s>>>17)+o|0,r+=(o^(s|~i))+t[13]+1309151649|0,r=(r<<21|r>>>11)+s|0,i+=(s^(r|~o))+t[4]-145523070|0,i=(i<<6|i>>>26)+r|0,o+=(r^(i|~s))+t[11]-1120210379|0,o=(o<<10|o>>>22)+i|0,s+=(i^(o|~r))+t[2]+718787259|0,s=(s<<15|s>>>17)+o|0,r+=(o^(s|~i))+t[9]-343485551|0,r=(r<<21|r>>>11)+s|0,e[0]=i+e[0]|0,e[1]=r+e[1]|0,e[2]=s+e[2]|0,e[3]=o+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(gr.stateIdentity),this}appendStr(e){const t=this._buffer8,i=this._buffer32;let r=this._bufferLength,s,o;for(o=0;o<e.length;o+=1){if(s=e.charCodeAt(o),s<128)t[r++]=s;else if(s<2048)t[r++]=(s>>>6)+192,t[r++]=s&63|128;else if(s<55296||s>56319)t[r++]=(s>>>12)+224,t[r++]=s>>>6&63|128,t[r++]=s&63|128;else{if(s=(s-55296)*1024+(e.charCodeAt(++o)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[r++]=(s>>>18)+240,t[r++]=s>>>12&63|128,t[r++]=s>>>6&63|128,t[r++]=s&63|128}r>=64&&(this._dataLength+=64,gr._md5cycle(this._state,i),r-=64,i[0]=i[16])}return this._bufferLength=r,this}appendAsciiStr(e){const t=this._buffer8,i=this._buffer32;let r=this._bufferLength,s,o=0;for(;;){for(s=Math.min(e.length-o,64-r);s--;)t[r++]=e.charCodeAt(o++);if(r<64)break;this._dataLength+=64,gr._md5cycle(this._state,i),r=0}return this._bufferLength=r,this}appendByteArray(e){const t=this._buffer8,i=this._buffer32;let r=this._bufferLength,s,o=0;for(;;){for(s=Math.min(e.length-o,64-r);s--;)t[r++]=e[o++];if(r<64)break;this._dataLength+=64,gr._md5cycle(this._state,i),r=0}return this._bufferLength=r,this}getState(){const e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){const t=e.buffer,i=e.state,r=this._state;let s;for(this._dataLength=e.length,this._bufferLength=e.buflen,r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],s=0;s<t.length;s+=1)this._buffer8[s]=t.charCodeAt(s)}end(e=!1){const t=this._bufferLength,i=this._buffer8,r=this._buffer32,s=(t>>2)+1;this._dataLength+=t;const o=this._dataLength*8;if(i[t]=128,i[t+1]=i[t+2]=i[t+3]=0,r.set(gr.buffer32Identity.subarray(s),s),t>55&&(gr._md5cycle(this._state,r),r.set(gr.buffer32Identity)),o<=4294967295)r[14]=o;else{const a=o.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;const l=parseInt(a[2],16),c=parseInt(a[1],16)||0;r[14]=l,r[15]=c}return gr._md5cycle(this._state,r),e?this._state:gr._hex(this._state)}}gr.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]);gr.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);gr.hexChars="0123456789abcdef";gr.hexOut=[];gr.onePassHasher=new gr;if(gr.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.");const L4e=[{cart:[],email:"DataDyna@gmail.com",id:1,name:"DataDyna",passwordHash:"b4294wsl80387ad8sdf8slwo8574d57c",profileBanner:"https://i.pinimg.com/736x/74/a9/dd/74a9dd3910e587f4997e6edab8296b31.jpg",profileBiography:"",profileImage:"https://i.pinimg.com/236x/49/5e/ef/495eef3708490fddd605cb810277c2b5.jpg",profileNftCollection:["BA03","BA08","GB07","GB02","GB03","DB03"]},{cart:[],email:"ByteBend@gmail.com",id:2,name:"ByteBend",passwordHash:"b82o4wsl803871dcwsfhslwo8cmap27c",profileBanner:"https://i.pinimg.com/originals/18/3d/a8/183da8a49597943f6b8c70f2876c51eb.gif",profileBiography:"look at the sky, contemplate its beauty",profileImage:"https://i.pinimg.com/564x/c5/2d/25/c52d2577b3bdc6e2e5b5c35966101be3.jpg",profileNftCollection:["EB07","FB03","GB06","AA01","AA00"]},{cart:[],email:"ElecEdge@gmail.com",id:3,name:"ElecEdge",passwordHash:"b82g4wsl80y871dc2spo7lwoccm3p27c",profileBanner:"https://i.pinimg.com/564x/11/88/7a/11887ae00a829526d17898709632ffd6.jpg",profileBiography:"",profileImage:"https://i.pinimg.com/564x/f1/b1/1a/f1b11a06a2b86887c17a8d3ed7d16749.jpg",profileNftCollection:["AA09","AA03","BA04","BA06","CA02","CA06","GB08"]},{cart:[],email:"FizuKi@gmail.com",id:4,name:"FizuKi",passwordHash:"ad2g4wsl20j871dc2spw7lwoxck3ln7q",profileBanner:"https://i.pinimg.com/564x/f1/57/7c/f1577c0e4bf8eef6cda762fdb114968a.jpg",profileBiography:"You handled words so well, but you were always unable to read yourself",profileImage:"https://i.pinimg.com/564x/68/71/ba/6871bab11f2773da3694407f369700b7.jpg",profileNftCollection:["DB08","DB06","DB00","EB05","FB04","GB09"]},{cart:[],email:"VirtVip@gmail.com",id:5,name:"VirtVip",passwordHash:"xd2g4ss0t4lh71dc2spw73woxck3ln71",profileBanner:"https://i.pinimg.com/564x/87/0b/ec/870bec0f2cc91af7d198da9c251cbae0.jpg",profileBiography:"",profileImage:"https://i.pinimg.com/564x/28/34/5f/28345fe7a912a32e57caaf39264923b3.jpg",profileNftCollection:["DB04","DB09","CA07"]},{cart:[],email:"CodeCrus@gmail.com",id:6,name:"CodeCrus",passwordHash:"345d63f73a504c4008bb5f84c4849a54",profileBanner:"https://i.pinimg.com/564x/1d/f7/b5/1df7b5b4c9de1cd9714a82e9fd6cbb74.jpg",profileBiography:"Looking back might be the only way to move forward",profileImage:"https://i.pinimg.com/564x/34/5d/63/345d63f73a504c4008bb5f84c4849a54.jpg",profileNftCollection:["A002","AA08","BA00","DB02","FB01"]},{cart:[],email:"NeonNom@gmail.com",id:7,name:"NeonNom",passwordHash:"nd2g4sd0t4lf71dc2spw43wvxck9ln7r",profileBanner:"https://i.pinimg.com/564x/db/04/b7/db04b73374dd3b7f6a29d7943f96e7de.jpg",profileBiography:"",profileImage:"https://i.pinimg.com/564x/f3/c1/07/f3c1071a229b2219bd8b2862cd389e89.jpg",profileNftCollection:["AA07","BA01","BA07","CA05","EB00","DB01"]},{cart:[],email:"CyCraze@gmail.com",id:8,name:"CyCraze",passwordHash:"q3rg4sd0tglc51ic2spw43wvxck90n2e",profileBanner:"https://i.pinimg.com/564x/79/de/25/79de255a1d8f96be595cb79f02de300b.jpg",profileBiography:"success is a sum of small efforts",profileImage:"https://i.pinimg.com/736x/74/82/74/7482740e012b34b5cf61ee731715e70b.jpg",profileNftCollection:["FB05","FB02","EB03","CA04"]},{cart:[],email:"DigVand@gmail.com",id:9,name:"DigVand",passwordHash:"s3rk4cd0ngld5cicws2w939v2ck90n2b",profileBanner:"https://i.pinimg.com/564x/1e/a5/ec/1ea5ec3a3aac173852b162bc946d66e1.jpg",profileBiography:"",profileImage:"https://i.pinimg.com/736x/d8/f8/f1/d8f8f1cb9a3fa06669a2f26b20805050.jpg",profileNftCollection:["BA05","EB08","GB05","BA02"]},{cart:[],email:"TechTina@gmail.com",id:10,name:"TechTina",passwordHash:"w3rk4cd0nlk55cicws2w939vlck9fn2j",profileBanner:"https://i.pinimg.com/564x/2f/4a/5e/2f4a5e4e1e7c3c8e40c0d822512ddec1.jpg",profileBiography:"keep swimming, keep swimming, keep swimming, swim, swim...",profileImage:"https://i.pinimg.com/564x/5d/1e/53/5d1e534b4bcaea4bee2cd0b5068856c3.jpg",profileNftCollection:["GB00","FB07","FB09","FB08"]},{cart:[],email:"NeonNim@gmail.com",id:11,name:"NeonNim",passwordHash:"bef6af5be84d5f62e54ed1547719c482",profileBanner:"https://i.pinimg.com/564x/cb/f6/0e/cbf60e0243e8a0b08cea6c3fbd3dc330.jpg",profileBiography:"",profileImage:"https://i.pinimg.com/736x/be/f6/af/bef6af5be84d5f62e54ed1547719c482.jpg",profileNftCollection:["BA09","GB04","GB01","FB00","EB02"]},{cart:[],email:"PixelPunk@gmail.com",id:12,name:"PixelPunk",passwordHash:"d8cb397b76fc53e6e461d6c244e25763",profileBanner:"https://i.pinimg.com/564x/5f/7b/66/5f7b6620db16e5bc65979d019c6b7932.jpg",profileBiography:"._.",profileImage:"https://i.pinimg.com/564x/62/27/4d/62274d6148464c62cb6b25a5d0a67d1a.jpg",profileNftCollection:["CA03","CA00","AA06","AA05"]},{cart:[],email:"OdNiana@gmail.com",id:13,name:"OdNiana",passwordHash:"46b1982225090cd714711f6f41c7de1a",profileBanner:"https://i.pinimg.com/564x/f7/b2/61/f7b261c660b6e4d99bd9949dd66a7807.jpg",profileBiography:"Just Relax",profileImage:"https://i.pinimg.com/564x/46/b1/98/46b1982225090cd714711f6f41c7de1a.jpg",profileNftCollection:[]},{cart:[],email:"Wendi@gmail.com",id:14,name:"Wendi.i",passwordHash:"33a70a285a44b8dbc79e6324b5c885b8",profileBanner:"https://i.pinimg.com/564x/e5/51/9c/e5519cf7e686833345b520138197d80f.jpg",profileBiography:"like an astronaut",profileImage:"https://i.pinimg.com/564x/33/a7/0a/33a70a285a44b8dbc79e6324b5c885b8.jpg",profileNftCollection:[]},{cart:[],email:"Momunto@gmail.com",id:15,name:"Momunto",passwordHash:"2b30b894d105189f5fe5939f7fefca1c",profileBanner:"https://i.pinimg.com/564x/cb/f6/0e/cbf60e0243e8a0b08cea6c3fbd3dc330.jpg",profileBiography:"",profileImage:"https://i.pinimg.com/564x/2b/30/b8/2b30b894d105189f5fe5939f7fefca1c.jpg",profileNftCollection:[]},{cart:[],email:"Suni@gmail.com",id:16,name:"Suni",passwordHash:"04a193097366e915c9ded16b7e026232",profileBanner:"https://i.pinimg.com/564x/f1/48/00/f14800e047f825fb305e6e5d88ea0bf8.jpg",profileBiography:"._.",profileImage:"https://i.pinimg.com/564x/04/a1/93/04a193097366e915c9ded16b7e026232.jpg",profileNftCollection:[]},{cart:[],email:"Morg@gmail.com",id:17,name:"Morg",passwordHash:"a1d45df6a902722ddef9189b237379f3",profileBanner:"https://i.pinimg.com/736x/73/e9/e5/73e9e597baea15a4b81a79fe2f7051b1.jpg",profileBiography:"._.",profileImage:"https://i.pinimg.com/564x/a1/d4/5d/a1d45df6a902722ddef9189b237379f3.jpg",profileNftCollection:[]},{cart:[],email:"Paulina@gmail.com",id:18,name:"Paulina",passwordHash:"849895252ef400c9fb1deef48ee99aa3",profileBanner:"https://i.pinimg.com/564x/9a/e2/6b/9ae26bcb949e37e07a2cd2b1c669db7b.jpg",profileBiography:"._.",profileImage:"https://i.pinimg.com/564x/84/98/95/849895252ef400c9fb1deef48ee99aa3.jpg",profileNftCollection:[]},{cart:[],email:"Katio@gmail.com",id:19,name:"Katio",passwordHash:"e1e947932d1cb620ee2a4ae7fe7ca7de",profileBanner:"https://i.pinimg.com/564x/cb/f6/0e/cbf60e0243e8a0b08cea6c3fbd3dc330.jpg",profileBiography:"._.",profileImage:"https://i.pinimg.com/564x/e1/e9/47/e1e947932d1cb620ee2a4ae7fe7ca7de.jpg",profileNftCollection:[]}];function F4e(){localStorage.getItem("CyberNftUsers")||localStorage.setItem("CyberNftUsers",JSON.stringify(L4e))}const Zi={create(n){const{ProfileName:e,ProfileEmail:t,ProfilePassword:i,ProfileImage:r="DefaultProfileImageURL"}=n;let s=Zi.readAll();if(!s)return{loginStatus:!1,content:{userData:null,error:"User list not found"}};if(s.findIndex(l=>l.email==t.trim())!=-1)return{loginStatus:!1,content:{userData:null,error:"Email already registered"}};var o=0;return s.length>0&&(o=s[s.length-1].id+1),s.push({id:o,name:e.trim(),email:t.trim(),passwordHash:mU(i.trim()),profileImage:r,profileBanner:"https://i.pinimg.com/564x/cb/f6/0e/cbf60e0243e8a0b08cea6c3fbd3dc330.jpg",profileBiography:"",profileNftCollection:[],cart:[],userWallet:127}),G5(s),Zi.login({ProfileEmail:t,ProfilePassword:i})},update(n){const{idToUpdate:e,newProfileData:t}=n,i=Zi.readAll();if(!i)return;const r=i==null?void 0:i.find(o=>o.id==e),s=i.findIndex(o=>o.id==e);if(!r){console.log("Update block");return}i[s]={id:r.id,name:t.name,email:r.email,passwordHash:r.passwordHash,profileImage:t.profileImage,profileBanner:t.profileBanner,profileBiography:t.profileBiography,profileNftCollection:t.profileNftCollection,cart:t.cart,userWallet:t.userWallet},G5(i),console.log("Profile Updated")},delete({id:n}){const e=Zi.readAll();if(!e)return;const t=e.filter(i=>i.id!=n);G5(t)},read(){const n=localStorage.getItem("CyberNftUsers");if(!n)return;const e=JSON.parse(n),t=[];return e.forEach(i=>{const{id:r,name:s,profileBanner:o,profileBiography:a,profileImage:l,profileNftCollection:c,cart:u,userWallet:f}=i;t.push({id:r,name:s,profileBanner:o,profileBiography:a,profileImage:l,profileNftCollection:c,cart:u,userWallet:f})}),t},readAll(){const n=localStorage.getItem("CyberNftUsers");return n?JSON.parse(n):void 0},login({ProfileEmail:n,ProfilePassword:e}){const t=Zi.readAll();if(!t)return{loginStatus:!1,content:{userData:null,error:"User list not found"}};const i=t.findIndex(s=>s.email==n.trim());if(i==-1)return{loginStatus:!1,content:{userData:null,error:"Incorrect email"}};if(t[i].passwordHash!=mU(e.trim()))return{loginStatus:!1,content:{userData:null,error:"Incorrect password"}};const r=Zi.read();return r?{loginStatus:!0,content:{userData:r[i],error:""}}:{loginStatus:!1,content:{userData:null,error:"User list not found"}}}};function mU(n){return gr.hashStr(n)}function G5(n){localStorage.setItem("CyberNftUsers",JSON.stringify(n))}function bX({id:n}){var t;const e=(t=Zi.read())==null?void 0:t.find(i=>i.id==n);return E.useEffect(()=>{var i;(i=document.getElementById(`collectorCard${n}`))==null||i.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})},[]),q.jsxs(cg,{id:`collectorCard${n}`,to:`/ProfilePage/${e==null?void 0:e.id}`,className:"CollectorCard",children:[q.jsx("img",{className:"cardBanner",src:e==null?void 0:e.profileBanner}),q.jsx("div",{className:"cardImgContainer",children:q.jsx("img",{src:e==null?void 0:e.profileImage,alt:""})}),q.jsx("span",{children:q.jsx("h4",{children:e==null?void 0:e.name})})]})}function O4e(){let n=Zi.read();return n=n==null?void 0:n.slice(0,12),q.jsx("section",{id:"TopCollectorsPage",children:q.jsxs("main",{children:[q.jsxs("h2",{children:["Top Collectors",q.jsx("br",{}),"Over LastWeek"]}),q.jsx("ul",{children:n==null?void 0:n.map(e=>q.jsx("li",{children:q.jsx(bX,{id:e.id},e.id)}))})]})})}function z4e(){return q.jsxs(q.Fragment,{children:[q.jsx(P4e,{}),q.jsx(R4e,{}),q.jsx(D4e,{}),q.jsx(Pw,{searchBar:!1,title:"ArtWorks",showFilter:!0,imagesCount:10}),q.jsx(B4e,{}),q.jsx(O4e,{})]})}function H5(){const n=XN();return console.error(n),q.jsx(CX,{id:"ErrorPage",children:q.jsx("h1",{children:"Error 404"})})}const MX=E.createContext(null);function U4e(){const[n,e]=E.useState(null);return E.useEffect(()=>{F4e()},[]),q.jsx(q.Fragment,{children:q.jsxs(MX.Provider,{value:{logedUserData:n,setLogedUserData:e},children:[q.jsx(T4e,{toastOptions:{unstyled:!0,className:"toast"}}),q.jsx(qN,{})]})})}var IX={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="cart-shopping",i=576,r=512,s=[128722,"shopping-cart"],o="f07a",a="M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z";n.definition={prefix:e,iconName:t,icon:[i,r,s,o,a]},n.faCartShopping=n.definition,n.prefix=e,n.iconName=t,n.width=i,n.height=r,n.ligatures=s,n.unicode=o,n.svgPathData=a,n.aliases=s})(IX);const k4e=[{name:"Black Autumn",id:"A001",ArtsInCollection:["BA01","BA09","DB01"]},{name:"White Autumn",id:"A002",ArtsInCollection:["AA02","AA04","CA01","DB02","DB05","EB01"]},{name:"Marble",id:"A003",ArtsInCollection:["AA05","AA06","AA08","BA06","CA08","CA09","DB07"]},{name:"Crystal Eyes",id:"A004",ArtsInCollection:["BA02","DB00","DB04"]},{name:"Black and White",id:"A005",ArtsInCollection:["AA03","AA09","BA04","CA00","CA02","CA03","DB03","EB03"]},{name:"Ne0n",id:"A006",ArtsInCollection:["AA01","EB05","EB06","EB07","EB08","FB05","FB06","GB01","GB09"]},{name:"Skulls",id:"A007",ArtsInCollection:["BA07","CA05","CA07","DB09","EB02"]},{name:"Gems",id:"A008",ArtsInCollection:["AA00","AA07","BA00","EB00","GB02","GB04","GB06"]},{name:"Liquify",id:"A009",ArtsInCollection:["BA03","BA08"]}];function N4e(n){return da.find(t=>t.id==n)}function G4e({artId:n}){const e=N4e(n);return q.jsx("span",{className:"artThumbnail",children:q.jsx($3,{to:`/ArtPreview/${e==null?void 0:e.id}`,children:q.jsx("img",{src:`${e==null?void 0:e.path}`})})})}const ud=()=>{const n=E.useContext(MX);if(!n)throw new Error("AppContext data is missing!");return n};function H4e({id:n}){var u;const{logedUserData:e}=ud(),[t,i]=E.useState(!1),[r,s]=E.useState(!1),o=da.find(f=>f.id==n),a=k4e.find(f=>f.id==(o==null?void 0:o.collectionId)),l=(u=Zi.read())==null?void 0:u.find(f=>f.profileNftCollection.includes(n));E.useEffect(()=>{i((e==null?void 0:e.cart.includes(n))||!1),s((e==null?void 0:e.profileNftCollection.includes(n))||!1)},[n]);function c({nftId:f}){if(!e)return;let h=(e==null?void 0:e.cart)||[];h.includes(f)||(h.push(f),Zi.update({idToUpdate:e.id,newProfileData:{...e,cart:h}}),i(!0))}return q.jsxs(q.Fragment,{children:[o&&e?q.jsxs("section",{id:"ArtShowPage",children:[q.jsx("section",{className:"imgContainer",children:q.jsx("img",{src:`${o==null?void 0:o.path}`})}),q.jsxs("div",{className:"imgDataContainer",children:[a&&q.jsxs("div",{className:"collectionContainer",children:[q.jsxs("p",{className:"CollectionName",children:[a==null?void 0:a.name," collection"]}),q.jsx("div",{className:"collectionImagesContainer",children:a==null?void 0:a.ArtsInCollection.map(f=>q.jsx(G4e,{artId:f}))})]}),q.jsxs("section",{children:[q.jsxs("div",{className:"CartCardTop",children:[q.jsx("h2",{children:o==null?void 0:o.ArtName}),l&&q.jsxs("div",{className:"ownerCard",children:[q.jsx("p",{className:"OwnerText",children:"Owner: "}),q.jsxs("div",{children:[q.jsx("p",{className:"ownerName",children:l.name}),q.jsx("div",{className:"ownerImgContainer",children:q.jsx("img",{className:"ownerImg",src:l.profileImage},"AA004")})]})]})]}),q.jsxs("span",{className:"idContainer",children:[q.jsx("p",{children:"Id:"}),q.jsxs("h5",{children:["#",o==null?void 0:o.id]})]}),(o==null?void 0:o.collectionName)&&q.jsxs("span",{className:"collectionInfoContainer",children:[q.jsx("p",{children:"Collection:"}),q.jsx("h5",{children:o==null?void 0:o.collectionName})]}),!r&&q.jsx("div",{className:"buttonContainer",children:t?q.jsx(Il,{classes:"button1 bg-white  gap-1 text-black text-500",content:"Already in cart"}):q.jsxs(q.Fragment,{children:[q.jsx(Il,{classes:"button1 bg-white  gap-1 text-black text-500",content:"Add to Cart",handleClickFunction:()=>{c({nftId:o.id}),Lu(q.jsx(Fu,{title:"",description:`${o.ArtName} added to cart`,showButton:!1}))},children:q.jsx(ai,{icon:IX.faCartShopping,color:"#000"})}),q.jsxs("p",{children:[o==null?void 0:o.EHT_price," Eth"]})]})})]})]})]}):q.jsx("p",{children:"No Art Selected"}),q.jsx(Pw,{title:"More like this",searchBar:!1,showFilter:!1,filter:o==null?void 0:o.filterSearch[1]})]})}function Q4e(){const{id:n}=jN();return q.jsx(q.Fragment,{children:n!=null&&q.jsx(H4e,{id:n})})}function V4e(){return q.jsx("section",{children:q.jsx(Pw,{showFilter:!0,title:"ArtWorks",searchBar:!0})})}function j4e(n={}){const{nonce:e,onScriptLoadSuccess:t,onScriptLoadError:i}=n,[r,s]=E.useState(!1),o=E.useRef(t);o.current=t;const a=E.useRef(i);return a.current=i,E.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.nonce=e,l.onload=()=>{var c;s(!0),(c=o.current)===null||c===void 0||c.call(o)},l.onerror=()=>{var c;s(!1),(c=a.current)===null||c===void 0||c.call(a)},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[e]),r}const TX=E.createContext(null);function W4e({clientId:n,nonce:e,onScriptLoadSuccess:t,onScriptLoadError:i,children:r}){const s=j4e({nonce:e,onScriptLoadSuccess:t,onScriptLoadError:i}),o=E.useMemo(()=>({clientId:n,scriptLoadedSuccessfully:s}),[n,s]);return _t.createElement(TX.Provider,{value:o},r)}function Y4e(){const n=E.useContext(TX);if(!n)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return n}function X4e(n){var e;return(e=n==null?void 0:n.clientId)!==null&&e!==void 0?e:n==null?void 0:n.client_id}const q4e={large:40,medium:32,small:20};function gU({onSuccess:n,onError:e,useOneTap:t,promptMomentNotification:i,type:r="standard",theme:s="outline",size:o="large",text:a,shape:l,logo_alignment:c,width:u,locale:f,click_listener:h,containerProps:d,...m}){const g=E.useRef(null),{clientId:v,scriptLoadedSuccessfully:p}=Y4e(),A=E.useRef(n);A.current=n;const y=E.useRef(e);y.current=e;const w=E.useRef(i);return w.current=i,E.useEffect(()=>{var S,C,b,M,I,T,D,R,z;if(p)return(b=(C=(S=window==null?void 0:window.google)===null||S===void 0?void 0:S.accounts)===null||C===void 0?void 0:C.id)===null||b===void 0||b.initialize({client_id:v,callback:L=>{var H;if(!(L!=null&&L.credential))return(H=y.current)===null||H===void 0?void 0:H.call(y);const{credential:J,select_by:Z}=L;A.current({credential:J,clientId:X4e(L),select_by:Z})},...m}),(T=(I=(M=window==null?void 0:window.google)===null||M===void 0?void 0:M.accounts)===null||I===void 0?void 0:I.id)===null||T===void 0||T.renderButton(g.current,{type:r,theme:s,size:o,text:a,shape:l,logo_alignment:c,width:u,locale:f,click_listener:h}),t&&((z=(R=(D=window==null?void 0:window.google)===null||D===void 0?void 0:D.accounts)===null||R===void 0?void 0:R.id)===null||z===void 0||z.prompt(w.current)),()=>{var L,H,J;t&&((J=(H=(L=window==null?void 0:window.google)===null||L===void 0?void 0:L.accounts)===null||H===void 0?void 0:H.id)===null||J===void 0||J.cancel())}},[v,p,t,r,s,o,a,l,c,u,f]),_t.createElement("div",{...d,ref:g,style:{height:q4e[o],...d==null?void 0:d.style}})}class yg extends Error{}yg.prototype.name="InvalidTokenError";function J4e(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function K4e(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return J4e(e)}catch{return atob(e)}}function AU(n,e){if(typeof n!="string")throw new yg("Invalid token specified: must be a string");e||(e={});const t=e.header===!0?0:1,i=n.split(".")[t];if(typeof i!="string")throw new yg(`Invalid token specified: missing part #${t+1}`);let r;try{r=K4e(i)}catch(s){throw new yg(`Invalid token specified: invalid base64 for part #${t+1} (${s.message})`)}try{return JSON.parse(r)}catch(s){throw new yg(`Invalid token specified: invalid json for part #${t+1} (${s.message})`)}}function $4e(){const{setLogedUserData:n}=ud(),e=J3();E.useEffect(()=>{document.getElementById("loginForm").addEventListener("submit",r=>{r.preventDefault();const s=Zi.login({ProfileEmail:document.getElementById("emailInput").value,ProfilePassword:document.getElementById("passwordInput").value});console.log(s),(s==null?void 0:s.loginStatus)==!0&&(n(s.content.userData),e("/Home"))})},[]);function t({name:i,email:r,password:s,imgPath:o}){const a=Zi.login({ProfileEmail:r,ProfilePassword:s});if(console.log(a),(a==null?void 0:a.loginStatus)==!0)n(a.content.userData),e("/Home");else{const l=Zi.create({ProfileEmail:r,ProfileName:i,ProfilePassword:s,ProfileImage:o});l.loginStatus==!0&&(n(l.content.userData),e("/Home"))}}return q.jsxs("section",{className:"loginPageContainer",children:[q.jsx(SX,{}),q.jsxs("section",{className:"loginPageSection",children:[q.jsx("h1",{children:"Sign in"}),q.jsxs("form",{id:"loginForm",className:"loginTop",children:[q.jsx("input",{type:"email",required:!0,placeholder:"Email",id:"emailInput",className:"loginPageInput"}),q.jsx("input",{type:"password",required:!0,placeholder:"Password",id:"passwordInput",className:"loginPageInput"}),q.jsx("input",{type:"submit",value:"Login",className:"loginPageButton"})]}),q.jsx("p",{children:"or"}),q.jsxs("div",{className:"loginBottom",children:[q.jsxs(W4e,{clientId:"289460002198-gq16afh9fjjqu146j6hftlu5gtl44d72.apps.googleusercontent.com",children:[q.jsx("button",{className:"googleButtonContainerSmall",children:q.jsx(gU,{type:"icon",theme:"outline",text:"signin_with",size:"large",shape:"square",onSuccess:i=>{if(i.credential){const r=AU(i.credential);console.log(r),t({name:r.name,email:r.email,password:r.sub,imgPath:r.picture})}},onError:()=>console.log("can you try again?")})}),q.jsx("button",{className:"googleButtonContainerLarge",children:q.jsx(gU,{onSuccess:i=>{if(i.credential){const r=AU(i.credential);console.log(r),t({name:r.name,email:r.email,password:r.sub,imgPath:r.picture})}},onError:()=>console.log("can you try again?")})})]}),q.jsx($3,{className:"loginPageRegisterButton",to:"/Register",children:"Register"})]})]})]})}function Z4e(){return q.jsx(q.Fragment,{children:q.jsx($4e,{})})}function Y6(n){return q.jsx("div",{className:"profilePictureContainer",children:q.jsx("img",{src:n.imgPath,id:`imgId${n.imgPath}`,className:`
                    profilePicture 
                    ${n.selectedPicturePath==n.imgPath?"selectedPicture":"notSelectedPicture"}
                    ${n.size}
                    `,srcSet:"Profile picture"})})}const vU=["/defaultProfilePicture/boy3.png","/defaultProfilePicture/girl4.png","/defaultProfilePicture/boy4.png","/defaultProfilePicture/boy1.png","/defaultProfilePicture/girl2.png","/defaultProfilePicture/boy0.png","/defaultProfilePicture/girl8.png","/defaultProfilePicture/man0.png","/defaultProfilePicture/man1.png","/defaultProfilePicture/girl0.png","/defaultProfilePicture/boy5.png","/defaultProfilePicture/boy6.png","/defaultProfilePicture/girl5.png","/defaultProfilePicture/girl1.png","/defaultProfilePicture/boy2.png","/defaultProfilePicture/girl3.png","/defaultProfilePicture/man2.png","/defaultProfilePicture/girl6.png","/defaultProfilePicture/girl7.png"];function d9(n){return q.jsx("section",{className:"ModalContainer",children:q.jsxs("div",{className:"Modal",children:[q.jsx("button",{className:"closeModalButton",onClick:()=>n.handleFunction(!1),children:q.jsx(ai,{icon:cT})}),n.children]})})}function eSe(){const n=J3(),{setLogedUserData:e}=ud(),[t,i]=E.useState(!1),[r,s]=E.useState(vU[0]);return console.log(r),E.useEffect(()=>{var o=document.getElementById("RegisterForm");o.addEventListener("submit",function(a){a.preventDefault();const l=Zi.create({ProfileName:document.getElementById("nameInput").value,ProfileEmail:document.getElementById("emailInput").value,ProfilePassword:document.getElementById("passwordInput").value,ProfileImage:r});console.log(l),l.loginStatus==!0&&(e(l.content.userData),n("/Home"))})},[]),q.jsxs("section",{className:"registerPageContainer",children:[q.jsx(SX,{}),t&&q.jsx(d9,{handleFunction:i,children:q.jsx("div",{className:"profilePictureModal",children:vU.map((o,a)=>q.jsx("button",{onClick:()=>s(o),style:{background:"none"},children:q.jsx(Y6,{selectedPicturePath:r,imgPath:o,size:"size-3"},`imgPath${a}`)}))})}),q.jsxs("section",{className:"registerPageSection",children:[q.jsx("h1",{children:"Register"}),q.jsxs("form",{className:"registerTop",id:"RegisterForm",children:[q.jsxs("div",{className:"NameAndPicContainer",children:[q.jsx("input",{type:"text",required:!0,id:"nameInput",placeholder:"Name",name:"Name",className:"registerPageInput"}),q.jsx("button",{type:"button",onClick:()=>i(!0),style:{background:"none"},children:q.jsx(Y6,{imgPath:r,size:"size-2"},"imgPath0")})]}),q.jsx("input",{type:"email",required:!0,id:"emailInput",placeholder:"Email",name:"Email",className:"registerPageInput"}),q.jsx("p",{className:"EmailErrorMessage",id:"EmailErrorMessage",children:"E-mail already registered"}),q.jsx("input",{type:"password",required:!0,id:"passwordInput",placeholder:"Password",name:"Password",className:"registerPageInput"}),q.jsx("button",{type:"submit",value:"Register",className:"registerPageButton",id:"registerPageButton",children:"Register"}),q.jsxs("p",{className:"linkText",children:["Do you have an account? ",q.jsx($3,{to:"/Login",children:"Login"})]})]})]})]})}function tSe(){return q.jsx(q.Fragment,{children:q.jsx(eSe,{})})}var p9={prefix:"fab",iconName:"ethereum",icon:[320,512,[],"f42e","M311.9 260.8L160 353.6 8 260.8 160 0l151.9 260.8zM160 383.4L8 290.6 160 512l152-221.4-152 92.8z"]};const w_={readAll(){try{return da}catch(n){return n}},readById(n){return da.find(t=>t.id==n)}};function nSe(){const[n,e]=E.useState(!1),[t,i]=E.useState(!1),{logedUserData:r,setLogedUserData:s}=ud();let o=0;r==null||r.cart.forEach(l=>{var u;let c=(u=w_==null?void 0:w_.readById(l))==null?void 0:u.EHT_price;c&&(o+=c)});function a(){if(e(!1),i(!1),!r)return;let l=[...r.profileNftCollection,...r.cart];const c={...r,cart:[],profileNftCollection:l};Zi.update({idToUpdate:r.id,newProfileData:c}),s(c);const u=Zi.read();r.cart.forEach(f=>{const h=u==null?void 0:u.find(d=>d.profileNftCollection.includes(f));h&&Zi.update({idToUpdate:h.id,newProfileData:{...h,profileNftCollection:h.profileNftCollection.filter(d=>d!=f)}})})}return q.jsx(q.Fragment,{children:n?q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"backgroundLayer",onClick:()=>e(!1)}),q.jsxs("div",{className:"sideCartSectionContainer",children:[q.jsx("button",{className:"cartButton cartArrowButton",onClick:()=>e(!1),children:q.jsx(ai,{icon:PG})}),q.jsx("section",{className:"itemsContainer",children:r==null?void 0:r.cart.map(l=>q.jsx(iSe,{nftId:l},`Item_Card_Id_${l}`))}),q.jsxs("footer",{className:"sideCartSectionFooter",children:[q.jsxs("p",{className:"totalPrice",children:[o,q.jsx(ai,{size:"sm",icon:p9})]}),q.jsx("button",{className:"purchaseButton",onClick:()=>i(!0),children:"Continue Purchase"})]})]}),t&&q.jsxs(d9,{handleFunction:i,children:[q.jsx("p",{className:"purchaseModalText",children:"Are you sure you want to complete the purchase?"}),q.jsxs("ul",{className:"purchaseModalButtonsContainer",children:[q.jsx("li",{children:q.jsx("button",{className:"purchaseModalKeepLookingButton",onClick:()=>i(!1),children:"Keep Looking"})}),q.jsx("li",{children:q.jsx("button",{className:"purchaseModalBuyButton",onClick:a,children:"Purchase"})})]})]})]}):q.jsx("button",{className:"cartButton",onClick:()=>e(!0),children:q.jsx(ai,{icon:pte})})})}function iSe({nftId:n}){const{logedUserData:e,setLogedUserData:t}=ud(),i=w_.readById(n);if(!i)return;const r=Zi.read(),s=r==null?void 0:r.find(a=>a.profileNftCollection.includes(n));function o({nftId:a}){let l=(e==null?void 0:e.cart)||[];if(!l.includes(a))return;console.log(a);let c=l.filter(u=>u!=a);console.log(c),e&&(Zi.update({idToUpdate:e.id,newProfileData:{...e,cart:c}}),t({...e,cart:c}))}return q.jsxs("div",{className:"CartItemCard",children:[q.jsx("div",{className:"CartItemImageContainer",children:q.jsx("img",{className:"CartItemImage",src:i.path})}),q.jsxs("article",{className:"CartItemInfo",children:[q.jsxs("p",{className:"CartItemName",children:[i.ArtName," ",q.jsx("span",{className:"CartItemCollectionName",children:i.collectionName})]}),q.jsx("button",{className:"CartItemDeleteButton",onClick:()=>o({nftId:n}),children:q.jsx(ai,{icon:cT})}),q.jsx("p",{className:"CartItemOwner",children:s==null?void 0:s.name}),q.jsxs("p",{className:"CartItemPrice",children:[q.jsx(ai,{size:"sm",icon:p9}),i.EHT_price]})]})]})}function rSe(){const{logedUserData:n}=ud();return console.log(n),E.useEffect(()=>{console.log(n)},[]),q.jsxs("nav",{className:"navBar",children:[q.jsxs("ul",{children:[q.jsx("li",{children:q.jsxs(cg,{to:"/Home",className:({isActive:e,isPending:t})=>t?"pending":e?"active":"",children:[q.jsx(ai,{icon:gte}),q.jsx("p",{className:"navLinkText",children:"Home"})]})}),q.jsx("li",{children:q.jsxs(cg,{to:"/MarketPlace",className:({isActive:e,isPending:t})=>t?"pending":e?"active":"",children:[q.jsx(ai,{icon:p9}),q.jsx("p",{className:"navLinkText",children:"Market Place"})]})}),q.jsx("li",{children:q.jsxs("a",{onClick:()=>Lu(q.jsx(Fu,{title:"Sorry",description:"This button has no functions, maybe next time",showButton:!1}),{duration:5e3}),children:[q.jsx(ai,{icon:_te}),q.jsx("p",{className:"navLinkText",children:"Offers"})]})}),q.jsx("li",{children:q.jsxs(cg,{to:"/Collectors",className:({isActive:e,isPending:t})=>t?"pending":e?"active":"",children:[q.jsx(ai,{icon:hte}),q.jsx("p",{className:"navLinkText",children:"Collectors"})]})})]}),q.jsxs("div",{className:"rightNavButtonsContainer",children:[q.jsx(cg,{to:`/ProfilePage/${n==null?void 0:n.id}`,children:q.jsx(Y6,{imgPath:n==null?void 0:n.profileImage,size:"size-1"})}),q.jsx(nSe,{})]})]})}function sSe(){return q.jsxs("div",{className:"footerSection",id:"Contact",children:[q.jsx("section",{children:q.jsxs("ul",{children:[q.jsx("li",{children:q.jsx("p",{children:"Resources"})}),q.jsx("li",{children:q.jsx("a",{children:"Blog"})}),q.jsx("li",{children:q.jsx("a",{children:"Why Us?"})}),q.jsx("li",{children:q.jsx("a",{children:"Customer Review"})})]})}),q.jsxs("footer",{children:[q.jsxs("ul",{children:[q.jsx("li",{children:q.jsx("button",{children:"information"})}),q.jsx("li",{children:q.jsx("button",{children:"Terms of uses"})})]}),q.jsx("p",{children:"Merely illustrative images"})]})]})}function oSe(){return q.jsxs(q.Fragment,{children:[q.jsx(rSe,{}),q.jsx(qN,{}),q.jsx(sSe,{})]})}function yU({labelText:n,FunctionToSetFilePath:e}){const t=E.useRef(null);E.useEffect(()=>{var r,s,o;(r=t.current)==null||r.addEventListener("dragover",a=>{a.preventDefault(),console.log("over")}),(s=t.current)==null||s.addEventListener("dragenter",a=>{a.preventDefault(),console.log("enter")}),(o=t.current)==null||o.addEventListener("drop",a=>{a.preventDefault(),console.log("drop")})},[]);function i(r){if(!r)return;console.log(r);let s=new FileReader;s.onload=()=>{console.log("reader init"),s.result!=null&&(console.log(s.result),e(s.result))},s.readAsDataURL(r[0])}return q.jsxs(q.Fragment,{children:[q.jsx("p",{className:"ModalImageInput",children:n}),q.jsx("input",{type:"file",accept:"image/png image/jpeg",id:n,className:"modalDropAreaInput",onChange:r=>i(r.target.files)}),q.jsx("label",{htmlFor:n,className:"modalDropArea",id:"modalDropArea",ref:t,onDrop:r=>i(r.dataTransfer.files),children:"Select or Drop Here"})]})}function aSe(){const[n,e]=E.useState(!1),[t,i]=E.useState(!1),{logedUserData:r}=ud();let s,{ProfileId:o}=jN();o&&(s=parseInt(o));let a=Zi.read(),l=a==null?void 0:a.find(y=>y.id==s);const[c,u]=E.useState(l==null?void 0:l.name),[f,h]=E.useState(l==null?void 0:l.profileBiography),[d,m]=E.useState(l==null?void 0:l.profileImage),[g,v]=E.useState(l==null?void 0:l.profileBanner);E.useEffect(()=>{(r==null?void 0:r.id)==s&&e(!0)},[]);function p(){r&&(!c||!g||!d||(Zi.update({idToUpdate:r.id,newProfileData:{...r,name:c,profileBanner:`${g}`,profileBiography:f||"",profileImage:`${d}`}}),i(!1)))}function A(){i(!1),u(l==null?void 0:l.name),h(l==null?void 0:l.profileBiography),m(l==null?void 0:l.profileImage),v(l==null?void 0:l.profileBanner)}return q.jsxs(q.Fragment,{children:[q.jsxs("main",{className:"profilePageContainer",children:[q.jsx("section",{className:"banner",children:q.jsx("div",{className:"bannerBackgroundImgContainer",children:q.jsx("img",{className:"bannerBackgroundImg",src:l==null?void 0:l.profileBanner,alt:"",srcSet:""})})}),q.jsxs("section",{className:"profileDataContainer",children:[q.jsx("div",{className:"ProfileImgContainer",children:q.jsx("img",{src:l==null?void 0:l.profileImage,className:"ProfileImg"},`BannerPicture_${l==null?void 0:l.profileImage} `)}),q.jsxs("article",{className:"profileArticle",children:[q.jsx("ul",{className:"profileButtonsList",children:n?q.jsx("li",{children:q.jsxs("button",{className:"profileButton",onClick:()=>i(!0),children:[q.jsx(ai,{size:"sm",icon:dte}),q.jsx("p",{className:"buttonText",children:"Edit Profile"})]})}):q.jsxs(q.Fragment,{children:[q.jsx("li",{children:q.jsxs("button",{className:"profileButton",children:[q.jsx(ai,{size:"sm",icon:vte}),q.jsx("p",{className:"buttonText",children:"follow"})]})}),q.jsx("li",{children:q.jsxs("button",{className:"profileButton",children:[q.jsx(ai,{size:"sm",icon:Ete}),q.jsx("p",{className:"buttonText",children:"Report"})]})})]})}),q.jsx("h2",{className:"profileName",children:l==null?void 0:l.name}),q.jsx("h4",{className:"profileBio",children:l==null?void 0:l.profileBiography})]})]}),q.jsx(Pw,{title:`${l==null?void 0:l.name} Collection`,isProfileCollectionRender:!0,profileCollectionToRender:l==null?void 0:l.profileNftCollection,searchBar:!1,showFilter:!1})]}),t&&q.jsxs(d9,{handleFunction:i,children:[q.jsxs("div",{className:"modalContentContainer",children:[q.jsxs("section",{id:"modalProfileCard",className:"modalProfileCard",children:[q.jsx("img",{className:"modalProfileCardBanner",src:`${g}`}),q.jsxs("div",{className:"modalProfileCardDataContainer",children:[q.jsx("img",{className:"modalProfileCardImg",src:`${d}`}),q.jsxs("article",{className:"modalProfileCardArticle",children:[q.jsx("h3",{className:"modalProfileCardName",id:"modalProfileCardName",children:c}),q.jsx("h4",{className:"modalProfileCardBio",id:"modalProfileCardBio",children:f})]})]})]}),q.jsx("form",{id:"ModalForm",className:"ModalForm",action:"",children:q.jsxs("ul",{children:[q.jsxs("li",{children:[q.jsx("label",{htmlFor:"ModalNameInput",className:"modalInputLabel",children:"Name"}),q.jsx("input",{type:"text",id:"ModalNameInput",className:"modalInput",defaultValue:l==null?void 0:l.name,onChange:y=>u(y.target.value)})]}),q.jsxs("li",{children:[q.jsx("label",{htmlFor:"ModalBioInput",className:"modalInputLabel",children:"Biography"}),q.jsx("input",{type:"text",id:"ModalBioInput",className:"modalInput",defaultValue:l==null?void 0:l.profileBiography,onChange:y=>h(y.target.value)})]}),q.jsx("li",{children:q.jsx(yU,{labelText:"Image",FunctionToSetFilePath:m})}),q.jsx("li",{children:q.jsx(yU,{labelText:"Banner",FunctionToSetFilePath:v})})]})})]}),q.jsxs("div",{className:"modalButtonsContainer",children:[q.jsx("button",{id:"ModalCancelButton",className:"modalCancelButton modalButton",onClick:()=>A(),children:"cancel"}),q.jsx("button",{id:"ModalConfirmButton",className:"modalConfirmButton modalButton",onClick:()=>p(),children:"confirm"})]})]})]})}function lSe(){return q.jsx("section",{children:q.jsx(aSe,{})})}function cSe(){const n=Zi.read(),[e,t]=E.useState(n),i=E.useRef(null);function r(s){if(s.trim()==""){t(n);return}let o=[];n==null||n.forEach(a=>{a.name.toLowerCase().trim().includes(s.trim().toLowerCase())&&o.push(a)}),t(o)}return q.jsxs("main",{className:"collectorCardPageMainContainer",children:[q.jsxs("div",{className:"searchBarContainer",children:[q.jsx(ai,{icon:RG}),q.jsx("input",{className:"searchBar",type:"text",ref:i,onChange:s=>r(s.target.value)})]}),q.jsx("section",{className:"collectorCardsContainer",children:e==null?void 0:e.map(s=>q.jsx(bX,{id:s.id}))})]})}function uSe(){return q.jsx(q.Fragment,{children:q.jsx(cSe,{})})}const fSe=K$([{path:"/",element:q.jsx(U4e,{}),errorElement:q.jsx(H5,{}),children:[{path:"/",element:q.jsx(oSe,{}),children:[{path:"/",element:q.jsx(Q$,{to:"/Login"})},{path:"/Home",element:q.jsx(z4e,{})},{path:"/ArtPreview/:id",element:q.jsx(Q4e,{})},{path:"/MarketPlace",element:q.jsx(V4e,{})},{path:"/ProfilePage/:ProfileId",element:q.jsx(lSe,{})},{path:"/Collectors",element:q.jsx(uSe,{})}]},{path:"/Login",element:q.jsx(Z4e,{}),errorElement:q.jsx(H5,{})},{path:"/Register",element:q.jsx(tSe,{}),errorElement:q.jsx(H5,{})}]}]);Q5.createRoot(document.getElementById("root")).render(q.jsx(sZ,{router:fSe}));export{$3 as L,oq as c,Zh as g,q as j,E as r,N4e as s};
